<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstCombineLoadStoreAlloca.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstCombineLoadStoreAlloca.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineLoadStoreAlloca_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineLoadStoreAlloca.cpp -------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the visit functions for load, store and alloca.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MapVector_8h.html">llvm/ADT/MapVector.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombiner_8h.html">llvm/Transforms/InstCombine/InstCombiner.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   29</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDeadStore, <span class="stringliteral">&quot;Number of dead stores eliminated&quot;</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumGlobalCopies, <span class="stringliteral">&quot;Number of allocas copied from constant global&quot;</span>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a1884d0184a1c6c06fc7a70eaede8a73f">MaxCopiedFromConstantUsers</a>(</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="stringliteral">&quot;instcombine-max-copied-from-constant-users&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(300),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum users to visit in copy from constant transform&quot;</span>),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// isOnlyCopiedFromConstantMemory - Recursively walk the uses of a (derived)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/// pointer to an alloca.  Ignore any reads of the pointer, return false if we</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/// see any stores or other unknown uses.  If we see pointer arithmetic, keep</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// track of whether it moves the pointer (with IsOffset) but otherwise traverse</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/// the uses.  If we see a memcpy/memmove that targets an unoffseted pointer to</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/// the alloca, and if the source pointer is a pointer to a constant memory</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/// location, we can optimize this.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#ae1c9444bcb6b157e8f8c4ec8bf265010">   47</a></span>&#160;<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae1c9444bcb6b157e8f8c4ec8bf265010">isOnlyCopiedFromConstantMemory</a>(<a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *V,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                               <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *&amp;TheCopy,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;ToDelete) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// We track lifetime intrinsics as we encounter them.  If we decide to go</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// ahead and replace the value with the memory location, this lets the caller</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// quickly eliminate the markers.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keyword">using</span> ValueAndIsOffset = <a class="code" href="classllvm_1_1PointerIntPair.html">PointerIntPair&lt;Value *, 1, bool&gt;</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ValueAndIsOffset, 32&gt;</a> Worklist;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;ValueAndIsOffset, 32&gt;</a> Visited;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(V, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ValueAndIsOffset Elem = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Elem).second)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() &gt; <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a1884d0184a1c6c06fc7a70eaede8a73f">MaxCopiedFromConstantUsers</a>)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> [<a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a>, IsOffset] = Elem;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="classllvm_1_1Value.html">Value</a>-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">// Ignore non-volatile loads, they are always ok.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (!LI-&gt;isSimple()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordflow">if</span> (isa&lt;PHINode, SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment">// We set IsOffset=true, to forbid the memcpy from occurring after the</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">// phi: If one of the phi operands is not based on the alloca, we</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// would incorrectly omit a write.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">if</span> (isa&lt;BitCastInst, AddrSpaceCastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">// If uses of the bitcast are ok, we are ok.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IsOffset);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="comment">// If the GEP has all zero indices, it doesn&#39;t offset the pointer. If it</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">// doesn&#39;t, it does.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IsOffset || !<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasAllZeroIndices());</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Call = dyn_cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// If this is the function being called then we treat it like a load and</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">// ignore it.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> (Call-&gt;isCallee(&amp;U))</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordtype">unsigned</span> DataOpNo = Call-&gt;getDataOperandNo(&amp;U);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordtype">bool</span> IsArgOperand = Call-&gt;isArgOperand(&amp;U);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="comment">// Inalloca arguments are clobbered by the call.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (IsArgOperand &amp;&amp; Call-&gt;isInAllocaArgument(DataOpNo))</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="comment">// If this call site doesn&#39;t modify the memory, then we know it is just</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// a load (but one that potentially returns the value itself), so we can</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// ignore it if we know that the value isn&#39;t captured.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordtype">bool</span> NoCapture = Call-&gt;doesNotCapture(DataOpNo);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> ((Call-&gt;onlyReadsMemory() &amp;&amp; (Call-&gt;use_empty() || NoCapture)) ||</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            (Call-&gt;onlyReadsMemory(DataOpNo) &amp;&amp; NoCapture))</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// If this is being passed as a byval argument, the caller is making a</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="comment">// copy, so it is only a read of the alloca.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (IsArgOperand &amp;&amp; Call-&gt;isByValArgument(DataOpNo))</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="comment">// Lifetime intrinsics can be handled by the caller.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isLifetimeStartOrEnd()) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty() &amp;&amp; <span class="stringliteral">&quot;Lifetime markers have no result to use!&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        ToDelete.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="comment">// If this is isn&#39;t our memcpy/memmove, reject it as something we can&#39;t</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="comment">// handle.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = dyn_cast&lt;MemTransferInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="comment">// If the transfer is volatile, reject it.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isVolatile())</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="comment">// If the transfer is using the alloca as a source of the transfer, then</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="comment">// ignore it since it is a load (unless the transfer is volatile).</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">if</span> (U.getOperandNo() == 1)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">// If we already have seen a copy, reject the second one.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">if</span> (TheCopy) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="comment">// If the pointer has been offset from the start of the alloca, we can&#39;t</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="comment">// safely handle this.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (IsOffset) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="comment">// If the memintrinsic isn&#39;t using the alloca as the dest, reject it.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">if</span> (U.getOperandNo() != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="comment">// If the source of the memcpy/move is not constant, reject it.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a728f79528ca8659e15d00c1e6818b316">isModSet</a>(AA-&gt;<a class="code" href="classllvm_1_1AAResults.html#a7785e563bd969eb1f63d26eca6873eb6">getModRefInfoMask</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getSource())))</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="comment">// Otherwise, the transform is safe.  Remember the copy instruction.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      TheCopy = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/// isOnlyCopiedFromConstantMemory - Return true if the specified alloca is only</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/// modified by a copy from a constant memory location. If we can prove this, we</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/// can replace any uses of the alloca with uses of the memory location</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">/// directly.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a074ac84adb84ca4ffff6cc6aee79aae3">  169</a></span>&#160;<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae1c9444bcb6b157e8f8c4ec8bf265010">isOnlyCopiedFromConstantMemory</a>(<a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                               <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;ToDelete) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *TheCopy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae1c9444bcb6b157e8f8c4ec8bf265010">isOnlyCopiedFromConstantMemory</a>(AA, AI, TheCopy, ToDelete))</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> TheCopy;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/// Returns true if V is dereferenceable for size of alloca.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a9981d75cde69ea5ca9706536fa4bbab5">  179</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a9981d75cde69ea5ca9706536fa4bbab5">isDereferenceableForAllocaSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#aea74164514e7164813ab30bcc4b7c557">isArrayAllocation</a>())</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocaSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>());</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (!AllocaSize)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a2da012cb3e5534bbee33563d309bc354">isDereferenceableAndAlignedPointer</a>(V, AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>(),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                            <a class="code" href="classllvm_1_1APInt.html">APInt</a>(64, AllocaSize), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a9beeeb91e51f1b571d37c1cdcc26ab15">  190</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a9beeeb91e51f1b571d37c1cdcc26ab15">simplifyAllocaArraySize</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                            <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;AI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// Check for array size of 1 (scalar allocation).</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (!AI.<a class="code" href="classllvm_1_1AllocaInst.html#aea74164514e7164813ab30bcc4b7c557">isArrayAllocation</a>()) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// i32 1 is the canonical array size for scalar allocations.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>(32))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// Canonicalize it.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">replaceOperand</a>(AI, 0, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(1));</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// Convert: alloca Ty, C - where C is a constant != 1 into: alloca [C x Ty], 1</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>())) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue().getActiveBits() &lt;= 64) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *NewTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getZExtValue());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *New = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afbe24f9e57cab99bd5bf3960c76bcc94">CreateAlloca</a>(NewTy, AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad2fb148dfac3182fce33be95fc4e9159">getAddressSpace</a>(),</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                                <span class="keyword">nullptr</span>, AI.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      New-&gt;setAlignment(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>());</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">replaceAllDbgUsesWith</a>(AI, *New, *New, DT);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="comment">// Scan to the end of the allocation instructions, to skip over a block of</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="comment">// allocas if possible...also skip interleaved debug info</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> It(New);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">while</span> (isa&lt;AllocaInst&gt;(*It) || isa&lt;DbgInfoIntrinsic&gt;(*It))</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        ++It;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="comment">// Now that I is pointing to the first non-allocation-inst in the block,</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="comment">// insert our getelementptr instruction...</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a7a2619d0e489a4ba9c19a0d86a041d59">getIntPtrType</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NullIdx = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IdxTy);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx[2] = {NullIdx, NullIdx};</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">GetElementPtrInst::CreateInBounds</a>(</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          NewTy, New, Idx, New-&gt;getName() + <span class="stringliteral">&quot;.sub&quot;</span>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#af1dcd6c00214bd9c8c8b3c9f9aedcc04">InsertNewInstBefore</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, *It);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="comment">// Now make everything use the getelementptr instead of the original</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="comment">// allocation.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(AI, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()))</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(AI, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>()));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Ensure that the alloca array size argument has type intptr_t, so that</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// any casting is exposed early.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a7a2619d0e489a4ba9c19a0d86a041d59">getIntPtrType</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != IntPtrTy) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ad145436b2347d82ff976a0d86a0ae149">CreateIntCast</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>(), IntPtrTy, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">replaceOperand</a>(AI, 0, V);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">// If I and V are pointers in different address space, it is not allowed to</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">// use replaceAllUsesWith since I and V have different types. A</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">// non-target-specific transformation should not use addrspacecast on V since</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">// the two address space may be disjoint depending on target.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">// This class chases down uses of the old pointer until reaching the load</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">// instructions, then replaces the old pointer in the load instructions with</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// the new pointer. If during the chasing it sees bitcast or GEP, it will</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// create new bitcast or GEP with the new pointer and use them in the load</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// instruction.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keyword">class </span>PointerReplacer {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  PointerReplacer(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Root)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    : IC(IC), Root(Root) {}</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">bool</span> collectUsers();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">void</span> replacePointer(<a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">bool</span> collectUsersRecursive(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aca964c0c0aee877ecf5c5af8a47982f6">replace</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *getReplacement(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1compression_1_1zlib.html#a369da242fd5c0d70a31ffcd3374a0909">isAvailable</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == &amp;Root || Worklist.contains(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 32&gt;</a> ValuesToRevisit;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Instruction *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, Value *&gt;</a> WorkMap;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Root;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;};</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keywordtype">bool</span> PointerReplacer::collectUsers() {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span> (!collectUsersRecursive(Root))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// Ensure that all outstanding (indirect) users of I</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// are inserted into the Worklist. Return false</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// otherwise.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : ValuesToRevisit)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (!Worklist.contains(Inst))</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">bool</span> PointerReplacer::collectUsersRecursive(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users()) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">auto</span> *Inst = cast&lt;Instruction&gt;(&amp;*U);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = dyn_cast&lt;LoadInst&gt;(Inst)) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;isVolatile())</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      Worklist.insert(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(Inst)) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">// All incoming values must be instructions for replacability</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;incoming_values(),</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                 [](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { return !isa&lt;Instruction&gt;(V); }))</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="comment">// If at least one incoming value of the PHI is not in Worklist,</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="comment">// store the PHI for revisiting and skip this iteration of the</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">// loop.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;incoming_values(), [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            return !isAvailable(cast&lt;Instruction&gt;(V));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          })) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        ValuesToRevisit.insert(Inst);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      Worklist.insert(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (!collectUsersRecursive(*<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>))</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Inst)) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue()) ||</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          !isa&lt;Instruction&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue()))</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1compression_1_1zlib.html#a369da242fd5c0d70a31ffcd3374a0909">isAvailable</a>(cast&lt;Instruction&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue())) ||</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          !<a class="code" href="namespacellvm_1_1compression_1_1zlib.html#a369da242fd5c0d70a31ffcd3374a0909">isAvailable</a>(cast&lt;Instruction&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue()))) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        ValuesToRevisit.insert(Inst);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      Worklist.insert(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (!collectUsersRecursive(*<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;GetElementPtrInst, BitCastInst&gt;(Inst)) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      Worklist.insert(Inst);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (!collectUsersRecursive(*Inst))</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = dyn_cast&lt;MemTransferInst&gt;(Inst)) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isVolatile())</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      Worklist.insert(Inst);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Inst-&gt;isLifetimeStartOrEnd()) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cannot handle pointer user: &quot;</span> &lt;&lt; *U &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *PointerReplacer::getReplacement(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { <span class="keywordflow">return</span> WorkMap.lookup(V); }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="keywordtype">void</span> <a class="code" href="ConstantMerge_8cpp.html#acf172e841018fd16e65771f5ade0b297">PointerReplacer::replace</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (getReplacement(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a> = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">auto</span> *V = getReplacement(<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V &amp;&amp; <span class="stringliteral">&quot;Operand not replaced&quot;</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">auto</span> *NewI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>-&gt;getType(), V, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>-&gt;isVolatile(),</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                              <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>-&gt;getAlign(), <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>-&gt;getOrdering(),</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                              <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>-&gt;getSyncScopeID());</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    NewI-&gt;takeName(<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="namespacellvm.html#a2f8e44f52bb2b2c5d2273eccec70faae">copyMetadataForLoad</a>(*NewI, *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    IC.InsertNewInstWith(NewI, *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    IC.replaceInstUsesWith(*<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>, NewI);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    WorkMap[<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>] = NewI;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *NewTy = getReplacement(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValue(0))-&gt;getType();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">auto</span> *NewPHI = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(NewTy, <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getNumIncomingValues(),</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                   <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getName(), <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getNumIncomingValues(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      NewPHI-&gt;addIncoming(getReplacement(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)),</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                          <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    WorkMap[<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>] = NewPHI;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keyword">auto</span> *V = getReplacement(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V &amp;&amp; <span class="stringliteral">&quot;Operand not replaced&quot;</span>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Indices;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;idx_begin(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;idx_end());</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keyword">auto</span> *NewI =</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getSourceElementType(), V, Indices);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    IC.InsertNewInstWith(NewI, *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    NewI-&gt;takeName(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    WorkMap[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>] = NewI;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BC = dyn_cast&lt;BitCastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">auto</span> *V = getReplacement(BC-&gt;getOperand(0));</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V &amp;&amp; <span class="stringliteral">&quot;Operand not replaced&quot;</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">auto</span> *NewT = <a class="code" href="classllvm_1_1PointerType.html#ac0f741735997264d3018e30ce2a6b2d3">PointerType::getWithSamePointeeType</a>(</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        cast&lt;PointerType&gt;(BC-&gt;getType()),</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keyword">auto</span> *NewI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(V, NewT);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    IC.InsertNewInstWith(NewI, *BC);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    NewI-&gt;takeName(BC);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    WorkMap[BC] = NewI;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">auto</span> *NewSI = <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), getReplacement(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue()),</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        getReplacement(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue()), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getName(), <span class="keyword">nullptr</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    IC.InsertNewInstWith(NewSI, *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    NewSI-&gt;takeName(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    WorkMap[<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>] = NewSI;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MemCpy = dyn_cast&lt;MemTransferInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keyword">auto</span> *SrcV = getReplacement(MemCpy-&gt;getRawSource());</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// The pointer may appear in the destination of a copy, but we don&#39;t want to</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// replace it.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (!SrcV) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(getReplacement(MemCpy-&gt;getRawDest()) &amp;&amp;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;             <span class="stringliteral">&quot;destination not in replace list&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    IC.Builder.SetInsertPoint(MemCpy);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keyword">auto</span> *NewI = IC.Builder.CreateMemTransferInst(</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        MemCpy-&gt;getIntrinsicID(), MemCpy-&gt;getRawDest(), MemCpy-&gt;getDestAlign(),</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        SrcV, MemCpy-&gt;getSourceAlign(), MemCpy-&gt;getLength(),</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        MemCpy-&gt;isVolatile());</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="structllvm_1_1AAMDNodes.html">AAMDNodes</a> AAMD = MemCpy-&gt;getAAMetadata();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (AAMD)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      NewI-&gt;setAAMetadata(AAMD);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    IC.eraseInstFromFunction(*MemCpy);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    WorkMap[MemCpy] = NewI;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;should never reach here&quot;</span>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="keywordtype">void</span> PointerReplacer::replacePointer(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">auto</span> *PT = cast&lt;PointerType&gt;(Root.getType());</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4a3795a38ac6eb8cb14191aaba99205a87">NT</a> = cast&lt;PointerType&gt;(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PT != <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4a3795a38ac6eb8cb14191aaba99205a87">NT</a> &amp;&amp; PT-&gt;hasSameElementTypeAs(<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4a3795a38ac6eb8cb14191aaba99205a87">NT</a>) &amp;&amp; <span class="stringliteral">&quot;Invalid usage&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  WorkMap[&amp;Root] = V;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Workitem : Worklist)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="namespacellvm.html#aca964c0c0aee877ecf5c5af8a47982f6">replace</a>(Workitem);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#af99540103c8717d41b490fc2a1acad5c">  446</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#af99540103c8717d41b490fc2a1acad5c">InstCombinerImpl::visitAllocaInst</a>(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;AI) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a9beeeb91e51f1b571d37c1cdcc26ab15">simplifyAllocaArraySize</a>(*<span class="keyword">this</span>, AI, DT))</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// Move all alloca&#39;s of zero byte objects to the entry block and merge them</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// together.  Note that we only do this for alloca&#39;s, because malloc should</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// allocate and return a unique pointer, even for a zero byte allocation.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>()).getKnownMinValue() == 0) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment">// For a zero sized alloca there is no point in doing an array allocation.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="comment">// This is helpful if the array size is a complicated expression not used</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="comment">// elsewhere.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#aea74164514e7164813ab30bcc4b7c557">isArrayAllocation</a>())</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span> replaceOperand(AI, 0,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">// Get the first instruction in the entry block.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;EntryBlock = AI.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FirstInst = EntryBlock.<a class="code" href="classllvm_1_1BasicBlock.html#a94c9bd7b123be808934be99e1bcedd24">getFirstNonPHIOrDbg</a>();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">if</span> (FirstInst != &amp;AI) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="comment">// If the entry block doesn&#39;t start with a zero-size alloca then move</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// this one to the start of the entry block.  There is no problem with</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// dominance as the array size was forced to a constant earlier already.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *EntryAI = dyn_cast&lt;AllocaInst&gt;(FirstInst);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (!EntryAI || !EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() ||</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>())</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                    .getKnownMinValue() != 0) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          AI.<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(FirstInst);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <span class="keywordflow">return</span> &amp;AI;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// Replace this zero-sized alloca with the one at the start of the entry</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// block after ensuring that the address will be aligned enough for both</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="comment">// types.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> MaxAlign = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>(), AI.<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>());</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(MaxAlign);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>() != EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>())</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(EntryAI, AI.<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>());</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(AI, EntryAI);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// Check to see if this allocation is only modified by a memcpy/memmove from</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// a memory location whose alignment is equal to or exceeds that of the</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// allocation. If this is the case, we can change all users to use the</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// constant memory location instead.  This is commonly produced by the CFE by</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// constructs like &quot;void foo() { int A[] = {1,2,3,4,5,6,7,8,9...}; }&quot; if &#39;A&#39;</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// is only subsequently read.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> ToDelete;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *Copy = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae1c9444bcb6b157e8f8c4ec8bf265010">isOnlyCopiedFromConstantMemory</a>(AA, &amp;AI, ToDelete)) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TheSrc = Copy-&gt;getSource();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> AllocaAlign = AI.<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>();</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> SourceAlign = <a class="code" href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">getOrEnforceKnownAlignment</a>(</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      TheSrc, AllocaAlign, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;AI, &amp;AC, &amp;DT);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (AllocaAlign &lt;= SourceAlign &amp;&amp;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a9981d75cde69ea5ca9706536fa4bbab5">isDereferenceableForAllocaSize</a>(TheSrc, &amp;AI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) &amp;&amp;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        !isa&lt;Instruction&gt;(TheSrc)) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// FIXME: Can we sink instructions without violating dominance when TheSrc</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// is an instruction instead of a constant or argument?</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found alloca equal to global: &quot;</span> &lt;&lt; AI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  memcpy = &quot;</span> &lt;&lt; *Copy &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordtype">unsigned</span> SrcAddrSpace = TheSrc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keyword">auto</span> *DestTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>(), SrcAddrSpace);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad2fb148dfac3182fce33be95fc4e9159">getAddressSpace</a>() == SrcAddrSpace) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Delete : ToDelete)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          eraseInstFromFunction(*Delete);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(TheSrc, DestTy);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewI = replaceInstUsesWith(AI, Cast);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        eraseInstFromFunction(*Copy);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        ++NumGlobalCopies;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">return</span> NewI;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      PointerReplacer PtrReplacer(*<span class="keyword">this</span>, AI);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">if</span> (PtrReplacer.collectUsers()) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Delete : ToDelete)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          eraseInstFromFunction(*Delete);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(TheSrc, DestTy);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        PtrReplacer.replacePointer(Cast);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        ++NumGlobalCopies;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// At last, use the generic allocation site handler to aggressively remove</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// unused allocas.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">return</span> visitAllocSite(AI);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">// Are we allowed to form a atomic load or store of this type?</span></div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">  539</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">return</span> Ty-&gt;<a class="code" href="classllvm_1_1Type.html#abf313eff420b7c6c8e322a2e9c53cd90">isIntOrPtrTy</a>() || Ty-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">/// Helper to combine a load to a new type.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">/// This just does the work of combining a load to a new type. It handles</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">/// metadata, etc., and returns the new instruction. The \c NewTy should be the</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">/// loaded *value* type. This will convert it to a pointer, cast the operand to</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">/// that pointer type, load it, etc.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">/// Note that this will create all of the instructions with whatever insert</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">/// point the \c InstCombinerImpl currently is using.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">  552</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">InstCombinerImpl::combineLoadToNewType</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;LI, <a class="code" href="classllvm_1_1Type.html">Type</a> *NewTy,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Suffix) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!LI.<a class="code" href="classllvm_1_1Instruction.html#a57efb022f2ee2e19e4cdf582f4d27f2d">isAtomic</a>() || <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a>(NewTy)) &amp;&amp;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;         <span class="stringliteral">&quot;can&#39;t fold an atomic load to requested type&quot;</span>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = LI.<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordtype">unsigned</span> AS = LI.<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NewPtrTy = NewTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(AS);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewPtr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NewPtr))) &amp;&amp;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        NewPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == NewPtrTy))</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    NewPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, NewPtrTy);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignedLoad(</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      NewTy, NewPtr, LI.<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>(), LI.<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>(), LI.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + Suffix);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  NewLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(LI.<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(), LI.<a class="code" href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">getSyncScopeID</a>());</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="namespacellvm.html#a2f8e44f52bb2b2c5d2273eccec70faae">copyMetadataForLoad</a>(*NewLoad, LI);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">return</span> NewLoad;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">/// Combine a store to a new type.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">/// Returns the newly created store instruction.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">  575</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isAtomic() || <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) &amp;&amp;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;         <span class="stringliteral">&quot;can&#39;t fold an atomic store of requested type&quot;</span>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerOperand();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordtype">unsigned</span> AS = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerAddressSpace();</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, MDNode *&gt;</a>, 8&gt; MD;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAllMetadata(MD);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NewStore = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">CreateAlignedStore</a>(</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      V, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">CreateBitCast</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(AS)),</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAlign(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isVolatile());</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  NewStore-&gt;<a class="code" href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">setAtomic</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOrdering(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getSyncScopeID());</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MDPair : MD) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = MDPair.first;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = MDPair.second;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// Note, essentially every kind of metadata should be preserved here! This</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// routine is supposed to clone a store instruction changing *only its</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// type*. The only metadata it makes sense to drop is metadata which is</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// invalidated when the pointer type changes. This should essentially</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// never be the case in LLVM, but we explicitly switch over only known</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// metadata to be conservatively correct. If you are adding metadata to</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// LLVM which pertains to stores, you almost certainly want to add it</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// here.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_dbg:</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_DIAssignID:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_tbaa:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_prof:</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_fpmath:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_tbaa_struct:</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_alias_scope:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_noalias:</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_nontemporal:</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_mem_parallel_loop_access:</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_access_group:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="comment">// All of these directly apply.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      NewStore-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_invariant_load:</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_nonnull:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_noundef:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_range:</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_align:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_dereferenceable:</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">case</span> LLVMContext::MD_dereferenceable_or_null:</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="comment">// These don&#39;t apply for stores.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">return</span> NewStore;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;}</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">/// Returns true if instruction represent minmax pattern like:</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">///   select ((cmp load V1, load V2), V1, V2).</span></div>
<div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#ada4b86278f4b6680ba5921674815b609">  632</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ada4b86278f4b6680ba5921674815b609">isMinMaxWithLoads</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *&amp;LoadTy) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Expected pointer type.&quot;</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// Ignore possible ty* to ixx* bitcast.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  V = <a class="code" href="classllvm_1_1InstCombiner.html#a2c476f610d4da3bd752816bc918aa146">InstCombiner::peekThroughBitcast</a>(V);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">// Check that select is select ((cmp load V1, load V2), V1, V2) - minmax</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// pattern.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *L1;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">m_Cmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(L1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>)),</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))))</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  LoadTy = L1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">m_Load</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))) &amp;&amp;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">m_Load</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)))) ||</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">m_Load</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))) &amp;&amp;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">m_Load</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))));</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/// Combine loads to match the type of their uses&#39; value after looking</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/// through intervening bitcasts.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">/// The core idea here is that if the result of a load is used in an operation,</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">/// we should load the type most conducive to that operation. For example, when</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">/// loading an integer and converting that immediately to a pointer, we should</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">/// instead directly load a pointer.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">/// However, this routine must never change the width of a load or the number of</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">/// loads as that would introduce a semantic change. This combine is expected to</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">/// be a semantic no-op which just allows loads to more closely model the types</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">/// of their consuming operations.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">/// Currently, we also refuse to change the precise type used for an atomic load</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">/// or a volatile load. This is debatable, and might be reasonable to change</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">/// later. However, it is risky in case some backend or other part of LLVM is</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">/// relying on the exact type loaded to select appropriate atomic operations.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#afcff6bf4e119e9c668532a4b3e8660db">  670</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#afcff6bf4e119e9c668532a4b3e8660db">combineLoadToOperationType</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC,</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                                               <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// FIXME: We could probably with some care handle both volatile and ordered</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// atomic loads here but it isn&#39;t clear that this is important.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.isUnordered())</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.use_empty())</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// swifterror values can&#39;t be bitcasted.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.getPointerOperand()-&gt;isSwiftError())</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">// Fold away bit casts of the loaded value by loading the desired type.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="comment">// Note that we should not do this for pointer&lt;-&gt;integer casts,</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// because that would result in type punning.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.hasOneUse()) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// Don&#39;t transform when the type is x86_amx, it makes the pass that lower</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// x86_amx type happy.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy = <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.getType();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BC = dyn_cast&lt;BitCastInst&gt;(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.user_back())) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab549082d9dfb91ec9a8dc06601d54855">isX86_AMXTy</a>() &amp;&amp; <span class="stringliteral">&quot;Load from x86_amx* should not happen!&quot;</span>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">if</span> (BC-&gt;getType()-&gt;isX86_AMXTy())</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CastUser = dyn_cast&lt;CastInst&gt;(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.user_back())) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = CastUser-&gt;getDestTy();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordflow">if</span> (CastUser-&gt;isNoopCast(IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>()) &amp;&amp;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">isPtrOrPtrVectorTy</a>() == DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">isPtrOrPtrVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          (!<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>.isAtomic() || <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a>(DestTy))) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad = IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">combineLoadToNewType</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>, DestTy);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        CastUser-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewLoad);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8a9b236a3c941e893f6eaa6ca6e4a36f">eraseInstFromFunction</a>(*CastUser);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// FIXME: We should also canonicalize loads of vectors when their elements are</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// cast to other types.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a1214f728b208633ffd04b22b58d80dbd">  715</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a1214f728b208633ffd04b22b58d80dbd">unpackLoadToAggregate</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;LI) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// FIXME: We could probably with some care handle both volatile and atomic</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// stores here but it isn&#39;t clear that this is important.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span> (!LI.<a class="code" href="classllvm_1_1LoadInst.html#aeb534c1a0391ce24551c226a582099a7">isSimple</a>())</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classT.html">T</a>-&gt;isAggregateType())</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Name = LI.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = dyn_cast&lt;StructType&gt;(<a class="code" href="classT.html">T</a>)) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// If the struct only have one element, we unpack.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keyword">auto</span> NumElements = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getNumElements();</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span> (NumElements == 1) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad = IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">combineLoadToNewType</a>(LI, <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getTypeAtIndex(0U),</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                                  <span class="stringliteral">&quot;.unpack&quot;</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      NewLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>());</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(LI, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10531decc5032413dba40ebf5589ef81">CreateInsertValue</a>(</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classT.html">T</a>), NewLoad, 0, Name));</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// We don&#39;t want to break loads with padding here as we&#39;d loose</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// the knowledge that padding exists for the rest of the pipeline.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keyword">auto</span> *SL = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getStructLayout(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (SL-&gt;hasPadding())</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="structllvm_1_1Align.html">Align</a> = LI.<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = LI.<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keyword">auto</span> *IdxType = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="classT.html">T</a>-&gt;getContext());</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">auto</span> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, 0);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumElements; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Indices[2] = {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        Zero,</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      };</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ab2c2d36b9d75147a029f2b3f44451cbb">CreateInBoundsGEP</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(Indices),</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                                               Name + <span class="stringliteral">&quot;.elt&quot;</span>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keyword">auto</span> *L = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a1e0fea1b88c314ecffb18922c6be5e70">CreateAlignedLoad</a>(</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getElementType(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;          <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="structllvm_1_1Align.html">Align</a>, SL-&gt;getElementOffset(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)), Name + <span class="stringliteral">&quot;.unpack&quot;</span>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="comment">// Propagate AA metadata. It&#39;ll still be valid on the narrowed load.</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>());</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      V = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10531decc5032413dba40ebf5589ef81">CreateInsertValue</a>(V, L, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    V-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(Name);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(LI, V);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AT = dyn_cast&lt;ArrayType&gt;(<a class="code" href="classT.html">T</a>)) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keyword">auto</span> *ET = AT-&gt;getElementType();</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keyword">auto</span> NumElements = AT-&gt;getNumElements();</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (NumElements == 1) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad = IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">combineLoadToNewType</a>(LI, ET, <span class="stringliteral">&quot;.unpack&quot;</span>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      NewLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>());</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(LI, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10531decc5032413dba40ebf5589ef81">CreateInsertValue</a>(</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classT.html">T</a>), NewLoad, 0, Name));</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// Bail out if the array is too large. Ideally we would like to optimize</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// arrays of arbitrary size but this has a terrible impact on compile time.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">// The threshold here is chosen arbitrarily, maybe needs a little bit of</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">// tuning.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> (NumElements &gt; IC.<a class="code" href="classllvm_1_1InstCombiner.html#a4bc1fafcc9582581002518df62792214">MaxArraySizeForCombine</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keyword">auto</span> EltSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(ET);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="structllvm_1_1Align.html">Align</a> = LI.<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = LI.<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keyword">auto</span> *IdxType = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="classT.html">T</a>-&gt;getContext());</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keyword">auto</span> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, 0);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Offset = 0;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumElements; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Indices[2] = {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        Zero,</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      };</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ab2c2d36b9d75147a029f2b3f44451cbb">CreateInBoundsGEP</a>(AT, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(Indices),</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                               Name + <span class="stringliteral">&quot;.elt&quot;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keyword">auto</span> *L = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a1e0fea1b88c314ecffb18922c6be5e70">CreateAlignedLoad</a>(AT-&gt;getElementType(), <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                             <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="structllvm_1_1Align.html">Align</a>, Offset),</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                             Name + <span class="stringliteral">&quot;.unpack&quot;</span>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>());</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      V = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10531decc5032413dba40ebf5589ef81">CreateInsertValue</a>(V, L, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      Offset += EltSize;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    V-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(Name);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(LI, V);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">// If we can determine that all possible objects pointed to by the provided</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">// pointer value are, not only dereferenceable, but also definitively less than</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">// or equal to the provided maximum size, then return true. Otherwise, return</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">// false (constant global values and allocas fall into this category).</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">// FIXME: This should probably live in ValueTracking (or similar).</span></div>
<div class="line"><a name="l00825"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#af278f33f3e54a61566b7fdff3835e980">  825</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#af278f33f3e54a61566b7fdff3835e980">isObjectSizeLessThanOrEq</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxSize,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Worklist(1, V);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;stripPointerCasts();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).second)</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      Worklist.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue());</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      Worklist.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue());</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Worklist, PN-&gt;incoming_values());</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> *GA = dyn_cast&lt;GlobalAlias&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">if</span> (GA-&gt;isInterposable())</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      Worklist.push_back(GA-&gt;getAliasee());</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// If we know how big this object is, and it is less than MaxSize, continue</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// searching. Otherwise, return false.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">if</span> (!AI-&gt;getAllocatedType()-&gt;isSized())</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CS = dyn_cast&lt;ConstantInt&gt;(AI-&gt;getArraySize());</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">if</span> (!CS)</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> TS = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AI-&gt;getAllocatedType());</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">if</span> (TS.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="comment">// Make sure that, even if the multiplication below would wrap as an</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="comment">// uint64_t, we still do the right thing.</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">if</span> ((CS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(128) * <a class="code" href="classllvm_1_1APInt.html">APInt</a>(128, TS.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()))</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;              .ugt(MaxSize))</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">if</span> (!GV-&gt;hasDefinitiveInitializer() || !GV-&gt;isConstant())</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> InitSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GV-&gt;getValueType());</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">if</span> (InitSize &gt; MaxSize)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">// If we&#39;re indexing into an object of a known size, and the outer index is</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">// not a constant, but having any value but zero would lead to undefined</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">// behavior, replace it with zero.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">// For example, if we have:</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">// @f.a = private unnamed_addr constant [1 x i32] [i32 12], align 4</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">// ...</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">// %arrayidx = getelementptr inbounds [1 x i32]* @f.a, i64 0, i64 %x</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">// ... = load i32* %arrayidx, align 4</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">// Then we know that we can replace %x in the GEP with i64 0.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">// FIXME: We could fold any GEP index to zero that would cause UB if it were</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">// not zero. Currently, we only handle the first such index. Also, we could</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">// also search through non-zero constant indices if we kept track of the</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">// offsets those indices implied.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a4380ad0de0940297354df2effeb021ad">  907</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4380ad0de0940297354df2effeb021ad">canReplaceGEPIdxWithZero</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                     <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemI,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                     <span class="keywordtype">unsigned</span> &amp;Idx) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (GEPI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() &lt; 2)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Find the first non-zero index of a GEP. If all indices are zero, return</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// one past the last index.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keyword">auto</span> FirstNZIdx = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = GEPI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = GEPI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V))</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;isZero())</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  };</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// Skip through initial &#39;zero&#39; indices, and find the corresponding pointer</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// type. See if the next index is not a constant.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  Idx = FirstNZIdx(GEPI);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">if</span> (Idx == GEPI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>())</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(GEPI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(Idx)))</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Ops(GEPI-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>(), GEPI-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>() + Idx);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SourceElementType = GEPI-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a565374c44dbf08e54528a87448e10df5">getSourceElementType</a>();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// Size information about scalable vectors is not available, so we cannot</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">// deduce whether indexing at n is undefined behaviour or not. Bail out.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ScalableVectorType&gt;(SourceElementType))</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *AllocTy = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a99d4bfe49182f8d80abb1960f2c12d46">GetElementPtrInst::getIndexedType</a>(SourceElementType, Ops);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">if</span> (!AllocTy || !AllocTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>())</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TyAllocSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AllocTy).getFixedValue();</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// If there are more indices after the one we might replace with a zero, make</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// sure they&#39;re all non-negative. If any of them are negative, the overall</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// address being computed might be before the base address determined by the</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// first non-zero index.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keyword">auto</span> IsAllNonNegative = [&amp;]() {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Idx+1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = GEPI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae099c6fa4a0b06306ece7dd372e8d02a">computeKnownBits</a>(GEPI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), 0, MemI);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="keywordflow">if</span> (Known.<a class="code" href="structllvm_1_1KnownBits.html#a157efd68e8b4b838829cad165b1583f8">isNonNegative</a>())</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  };</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// FIXME: If the GEP is not inbounds, and there are extra indices after the</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="comment">// one we&#39;ll replace, those could cause the address computation to wrap</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">// (rendering the IsAllNonNegative() check below insufficient). We can do</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// better, ignoring zero indices (and other indices we can prove small</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">// enough not to wrap).</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordflow">if</span> (Idx+1 != GEPI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() &amp;&amp; !GEPI-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a01f11934ce1bac24a7c9190d14686844">isInBounds</a>())</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// Note that isObjectSizeLessThanOrEq will return true only if the pointer is</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// also known to be dereferenceable.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#af278f33f3e54a61566b7fdff3835e980">isObjectSizeLessThanOrEq</a>(GEPI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), TyAllocSize, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) &amp;&amp;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;         IsAllNonNegative();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;}</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">// If we&#39;re indexing into an object with a variable index for the memory</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">// access, but the object has only one element, we can assume that the index</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">// will always be zero. If we replace the GEP, return it.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#ae2780828fdbafdf202fd7daa07b0e38d">  983</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae2780828fdbafdf202fd7daa07b0e38d">replaceGEPIdxWithZero</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                          <a class="code" href="classT.html">T</a> &amp;MemI) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordtype">unsigned</span> Idx;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4380ad0de0940297354df2effeb021ad">canReplaceGEPIdxWithZero</a>(IC, GEPI, &amp;MemI, Idx)) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewGEPI = GEPI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">clone</a>();</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      NewGEPI-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(Idx,</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(GEPI-&gt;getOperand(Idx)-&gt;getType(), 0));</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      NewGEPI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(GEPI);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      MemI.setOperand(MemI.getPointerOperandIndex(), NewGEPI);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">return</span> NewGEPI;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a2d7ec4252834b9593345e41e55dbb53c"> 1000</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a2d7ec4252834b9593345e41e55dbb53c">canSimplifyNullStoreOrGEP</a>(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getFunction(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerAddressSpace()))</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerOperand();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = GEPI-&gt;getOperand(0);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">return</span> (isa&lt;ConstantPointerNull&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &amp;&amp;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;          !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getFunction(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerAddressSpace()));</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;}</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a495e0c2946cb54155fefdf25d2cf8454"> 1011</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a495e0c2946cb54155fefdf25d2cf8454">canSimplifyNullLoadOrGEP</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;LI, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *GEPI0 = GEPI-&gt;getOperand(0);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(GEPI0) &amp;&amp;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>(), GEPI-&gt;getPointerAddressSpace()))</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) ||</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      (isa&lt;ConstantPointerNull&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) &amp;&amp;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;       !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>(), LI.<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>())))</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;}</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a3ba96a0d49ec5f1a062b075f54536a3c"> 1025</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a3ba96a0d49ec5f1a062b075f54536a3c">InstCombinerImpl::visitLoadInst</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;LI) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = LI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="comment">// Try to canonicalize the loaded type.</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#afcff6bf4e119e9c668532a4b3e8660db">combineLoadToOperationType</a>(*<span class="keyword">this</span>, LI))</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">// Attempt to improve the alignment.</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> KnownAlign = <a class="code" href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">getOrEnforceKnownAlignment</a>(</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPrefTypeAlign(LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;LI, &amp;AC, &amp;DT);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">if</span> (KnownAlign &gt; LI.<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>())</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    LI.<a class="code" href="classllvm_1_1LoadInst.html#a2b1268b642e9bf4373b6fb31c482c9ca">setAlignment</a>(KnownAlign);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// Replace GEP indices if possible.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewGEPI = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae2780828fdbafdf202fd7daa07b0e38d">replaceGEPIdxWithZero</a>(*<span class="keyword">this</span>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, LI)) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      Worklist.push(NewGEPI);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">return</span> &amp;LI;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a1214f728b208633ffd04b22b58d80dbd">unpackLoadToAggregate</a>(*<span class="keyword">this</span>, LI))</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="comment">// Do really simple store-to-load forwarding and load CSE, to catch cases</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// where there are several consecutive memory accesses to the same location,</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// separated by a few arithmetic operations.</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordtype">bool</span> IsLoadCSE = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *AvailableVal = <a class="code" href="namespacellvm.html#a4112c4d55a504c443acdc97bf2a3acdf">FindAvailableLoadedValue</a>(&amp;LI, *AA, &amp;IsLoadCSE)) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (IsLoadCSE)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="namespacellvm.html#a9b43098c569ea8289ed1ab70ee9a00af">combineMetadataForCSE</a>(cast&lt;LoadInst&gt;(AvailableVal), &amp;LI, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        LI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitOrPointerCast(AvailableVal, LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                           LI.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.cast&quot;</span>));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// None of the following transforms are legal for volatile/ordered atomic</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// loads.  Most of them do apply for unordered atomics.</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">if</span> (!LI.<a class="code" href="classllvm_1_1LoadInst.html#ac072f8698be17d52f20bb63d59e6ce41">isUnordered</a>()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="comment">// load(gep null, ...) -&gt; unreachable</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// load null/undef -&gt; unreachable</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// TODO: Consider a target hook for valid address spaces for this xforms.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a495e0c2946cb54155fefdf25d2cf8454">canSimplifyNullLoadOrGEP</a>(LI, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="comment">// Insert a new store to null instruction before the load to indicate</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// that this code is not reachable.  We do this instead of inserting</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// an unreachable instruction directly because we cannot modify the</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">// CFG.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()),</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getType()), &amp;LI);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;setDebugLoc(LI.<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(LI, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// Change select and PHI nodes to select values instead of addresses: this</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// helps alias analysis out a lot, allows many others simplifications, and</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// exposes redundancy in the code.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// Note that we cannot do the transformation unless we know that the</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">// introduced loads cannot trap!  Something like this is valid as long as</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// the condition is always false: load (select bool %C, int* null, int* %G),</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="comment">// but it would not be valid if we transformed it to load from null</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">// unconditionally.</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="comment">// load (select (Cond, &amp;V1, &amp;V2))  --&gt; select(Cond, load &amp;V1, load &amp;V2).</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = LI.<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad2ea0f3a55cc5ac23db1d53c12f656f9">isSafeToLoadUnconditionally</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1), LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                                      Alignment, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) &amp;&amp;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;          <a class="code" href="namespacellvm.html#ad2ea0f3a55cc5ac23db1d53c12f656f9">isSafeToLoadUnconditionally</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2), LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                      Alignment, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>)) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *V1 =</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1),</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                               <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1)-&gt;getName() + <span class="stringliteral">&quot;.val&quot;</span>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> =</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2),</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                               <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2)-&gt;getName() + <span class="stringliteral">&quot;.val&quot;</span>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LI.<a class="code" href="classllvm_1_1LoadInst.html#ac072f8698be17d52f20bb63d59e6ce41">isUnordered</a>() &amp;&amp; <span class="stringliteral">&quot;implied by above&quot;</span>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        V1-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2b1268b642e9bf4373b6fb31c482c9ca">setAlignment</a>(Alignment);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        V1-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(LI.<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(), LI.<a class="code" href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">getSyncScopeID</a>());</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>-&gt;setAlignment(Alignment);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>-&gt;setAtomic(LI.<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(), LI.<a class="code" href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">getSyncScopeID</a>());</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="comment">// load (select (cond, null, P)) -&gt; load P</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1)) &amp;&amp;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;          !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFunction(),</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                                LI.<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>()))</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">return</span> replaceOperand(LI, 0, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2));</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="comment">// load (select (cond, P, null)) -&gt; load P</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2)) &amp;&amp;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;          !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFunction(),</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                                LI.<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>()))</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">return</span> replaceOperand(LI, 0, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  }</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;}</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">/// Look for extractelement/insertvalue sequence that acts like a bitcast.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">/// \returns underlying value that was &quot;cast&quot;, or nullptr otherwise.</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">/// For example, if we have:</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">///     %E0 = extractelement &lt;2 x double&gt; %U, i32 0</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">///     %V0 = insertvalue [2 x double] undef, double %E0, 0</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">///     %E1 = extractelement &lt;2 x double&gt; %U, i32 1</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">///     %V1 = insertvalue [2 x double] %V0, double %E1, 1</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">/// and the layout of a &lt;2 x double&gt; is isomorphic to a [2 x double],</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">/// then %V1 can be safely approximated by a conceptual &quot;bitcast&quot; of %U.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">/// Note that %U may contain non-undef values where %V1 has undef.</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a337553bc4cd451108e8708b82b79e7ee"> 1140</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a337553bc4cd451108e8708b82b79e7ee">likeBitCastFromVector</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *U = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">auto</span> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = dyn_cast&lt;InsertValueInst&gt;(V)) {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = dyn_cast&lt;ExtractElementInst&gt;(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getInsertedValueOperand());</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getVectorOperand();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (!U)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      U = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (U != <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>)</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getIndexOperand());</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (!CI || <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getNumIndices() != 1 || CI-&gt;getZExtValue() != *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;idx_begin())</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    V = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getAggregateOperand();</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>()) || !U)</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keyword">auto</span> *UT = cast&lt;VectorType&gt;(U-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keyword">auto</span> *VT = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// Check that types UT and VT are bitwise isomorphic.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSizeInBits(UT) != <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSizeInBits(VT)) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AT = dyn_cast&lt;ArrayType&gt;(VT)) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">if</span> (AT-&gt;getNumElements() != cast&lt;FixedVectorType&gt;(UT)-&gt;getNumElements())</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = cast&lt;StructType&gt;(VT);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getNumElements() != cast&lt;FixedVectorType&gt;(UT)-&gt;getNumElements())</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *EltT : <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;elements()) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">if</span> (EltT != UT-&gt;getElementType())</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">return</span> U;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;}</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">/// Combine stores to match the type of value being stored.</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">/// The core idea here is that the memory does not have any intrinsic type and</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">/// where we can we should match the type of a store to the type of value being</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">/// stored.</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">/// However, this routine must never change the width of a store or the number of</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">/// stores as that would introduce a semantic change. This combine is expected to</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">/// be a semantic no-op which just allows stores to more closely model the types</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">/// of their incoming values.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">/// Currently, we also refuse to change the precise type used for an atomic or</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">/// volatile store. This is debatable, and might be reasonable to change later.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">/// However, it is risky in case some backend or other part of LLVM is relying</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">/// on the exact type stored to select appropriate atomic operations.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">/// \returns true if the store was successfully combined away. This indicates</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">/// the caller must erase the store instruction. We have to let the caller erase</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">/// the store instruction as otherwise there is no way to signal whether it was</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">/// combined or not: IC.EraseInstFromFunction returns a null pointer.</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#ac8600b466ac41bd3d0e42cea97c718b8"> 1201</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ac8600b466ac41bd3d0e42cea97c718b8">combineStoreToValueType</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="comment">// FIXME: We could probably with some care handle both volatile and ordered</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// atomic stores here but it isn&#39;t clear that this is important.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isUnordered())</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// swifterror values can&#39;t be bitcasted.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerOperand()-&gt;isSwiftError())</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getValueOperand();</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">// Fold away bit casts of the stored value by storing the original type.</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BC = dyn_cast&lt;BitCastInst&gt;(V)) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!BC-&gt;getType()-&gt;isX86_AMXTy() &amp;&amp;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;           <span class="stringliteral">&quot;store to x86_amx* should not happen!&quot;</span>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    V = BC-&gt;getOperand(0);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// Don&#39;t transform when the type is x86_amx, it makes the pass that lower</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// x86_amx type happy.</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ab549082d9dfb91ec9a8dc06601d54855">isX86_AMXTy</a>())</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isAtomic() || <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a>(IC, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, V);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *U = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a337553bc4cd451108e8708b82b79e7ee">likeBitCastFromVector</a>(IC, V))</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isAtomic() || <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a>(U-&gt;getType())) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a>(IC, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, U);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// FIXME: We should also canonicalize stores of vectors when their elements</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">// are cast to other types.</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#acce887569ed105b612c33053a3264608"> 1239</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#acce887569ed105b612c33053a3264608">unpackStoreToAggregate</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// FIXME: We could probably with some care handle both volatile and atomic</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// stores here but it isn&#39;t clear that this is important.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isSimple())</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getValueOperand();</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160; </div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classT.html">T</a>-&gt;isAggregateType())</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = dyn_cast&lt;StructType&gt;(<a class="code" href="classT.html">T</a>)) {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// If the struct only have one element, we unpack.</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordtype">unsigned</span> Count = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getNumElements();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">if</span> (Count == 1) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      V = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6895b4fdb208e8a5ff15c573c71657b0">CreateExtractValue</a>(V, 0);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a>(IC, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, V);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160; </div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="comment">// We don&#39;t want to break loads with padding here as we&#39;d loose</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="comment">// the knowledge that padding exists for the rest of the pipeline.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keyword">auto</span> *SL = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getStructLayout(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">if</span> (SL-&gt;hasPadding())</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="structllvm_1_1Align.html">Align</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAlign();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;16&gt;</a> EltName = V-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>();</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    EltName += <span class="stringliteral">&quot;.elt&quot;</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerOperand();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;16&gt;</a> AddrName = <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;getName();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    AddrName += <span class="stringliteral">&quot;.repack&quot;</span>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keyword">auto</span> *IdxType = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getContext());</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keyword">auto</span> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, 0);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Count; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Indices[2] = {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        Zero,</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      };</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> =</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;          IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ab2c2d36b9d75147a029f2b3f44451cbb">CreateInBoundsGEP</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(Indices), AddrName);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keyword">auto</span> *Val = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6895b4fdb208e8a5ff15c573c71657b0">CreateExtractValue</a>(V, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, EltName);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keyword">auto</span> EltAlign = <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="structllvm_1_1Align.html">Align</a>, SL-&gt;getElementOffset(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">llvm::Instruction</a> *NS = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">CreateAlignedStore</a>(Val, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, EltAlign);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      NS-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAAMetadata());</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AT = dyn_cast&lt;ArrayType&gt;(<a class="code" href="classT.html">T</a>)) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="comment">// If the array only have one element, we unpack.</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keyword">auto</span> NumElements = AT-&gt;getNumElements();</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (NumElements == 1) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      V = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6895b4fdb208e8a5ff15c573c71657b0">CreateExtractValue</a>(V, 0);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a>(IC, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, V);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="comment">// Bail out if the array is too large. Ideally we would like to optimize</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="comment">// arrays of arbitrary size but this has a terrible impact on compile time.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="comment">// The threshold here is chosen arbitrarily, maybe needs a little bit of</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">// tuning.</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span> (NumElements &gt; IC.<a class="code" href="classllvm_1_1InstCombiner.html#a4bc1fafcc9582581002518df62792214">MaxArraySizeForCombine</a>)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keyword">auto</span> EltSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AT-&gt;getElementType());</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="structllvm_1_1Align.html">Align</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAlign();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;16&gt;</a> EltName = V-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>();</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    EltName += <span class="stringliteral">&quot;.elt&quot;</span>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerOperand();</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;16&gt;</a> AddrName = <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;getName();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    AddrName += <span class="stringliteral">&quot;.repack&quot;</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keyword">auto</span> *IdxType = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="classT.html">T</a>-&gt;getContext());</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keyword">auto</span> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, 0);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Offset = 0;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumElements; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Indices[2] = {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        Zero,</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxType, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      };</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> =</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;          IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ab2c2d36b9d75147a029f2b3f44451cbb">CreateInBoundsGEP</a>(AT, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(Indices), AddrName);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keyword">auto</span> *Val = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6895b4fdb208e8a5ff15c573c71657b0">CreateExtractValue</a>(V, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, EltName);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <span class="keyword">auto</span> EltAlign = <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="structllvm_1_1Align.html">Align</a>, Offset);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NS = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">CreateAlignedStore</a>(Val, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, EltAlign);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      NS-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAAMetadata());</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      Offset += EltSize;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">/// equivalentAddressValues - Test if A and B will obviously have the same</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">/// value. This includes recognizing that %t0 and %t1 will have the same</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">/// value in code like this:</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">///   %t0 = getelementptr \@a, 0, 3</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">///   store i32 0, i32* %t0</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">///   %t1 = getelementptr \@a, 0, 3</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">///   %t2 = load i32* %t1</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a"> 1351</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">// Test if the values are trivially equivalent.</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="comment">// Test if the values come form identical arithmetic instructions.</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// This uses isIdenticalToWhenDefined instead of isIdenticalTo because</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="comment">// its only used to compare two uses within the same basic block, which</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">// means that they&#39;ll always either have the same value or one of them</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="comment">// will have an undefined value.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">if</span> (isa&lt;BinaryOperator&gt;(A) ||</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      isa&lt;CastInst&gt;(A) ||</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      isa&lt;PHINode&gt;(A) ||</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      isa&lt;GetElementPtrInst&gt;(A))</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BI = dyn_cast&lt;Instruction&gt;(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(A)-&gt;isIdenticalToWhenDefined(BI))</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">// Otherwise they may not be equivalent.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;}</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">/// Converts store (bitcast (load (bitcast (select ...)))) to</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">/// store (load (select ...)), where select is minmax:</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">/// select ((cmp load V1, load V2), V1, V2).</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#acf256b5c507948c6c7d15e59dfaa8800"> 1375</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#acf256b5c507948c6c7d15e59dfaa8800">removeBitcastsFromLoadStoreOnMinMax</a>(<a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC,</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                                                <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// bitcast?</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getPointerOperand(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="comment">// load? integer?</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadAddr;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getValueOperand(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">m_Load</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LoadAddr)))))</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="keyword">auto</span> *LI = cast&lt;LoadInst&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getValueOperand());</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keywordflow">if</span> (!LI-&gt;getType()-&gt;isIntegerTy())</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *CmpLoadTy;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ada4b86278f4b6680ba5921674815b609">isMinMaxWithLoads</a>(LoadAddr, CmpLoadTy))</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// Make sure the type would actually change.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// This condition can be hit with chains of bitcasts.</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordflow">if</span> (LI-&gt;getType() == CmpLoadTy)</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// Make sure we&#39;re not changing the size of the load/store.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSizeInBits(LI-&gt;getType()) !=</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSizeInBits(CmpLoadTy))</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(LI-&gt;users(), [LI, LoadAddr](<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        auto *SI = dyn_cast&lt;StoreInst&gt;(U);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        return SI &amp;&amp; SI-&gt;getPointerOperand() != LI &amp;&amp;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;               InstCombiner::peekThroughBitcast(SI-&gt;getPointerOperand()) !=</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                   LoadAddr &amp;&amp;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;               !SI-&gt;getPointerOperand()-&gt;isSwiftError();</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      }))</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(LI);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLI = IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">combineLoadToNewType</a>(*LI, CmpLoadTy);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// Replace all the stores with stores of the newly loaded value.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *UI : LI-&gt;users()) {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keyword">auto</span> *USI = cast&lt;StoreInst&gt;(UI);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(USI);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a>(IC, *USI, NewLI);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(*LI, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(LI-&gt;getType()));</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8a9b236a3c941e893f6eaa6ca6e4a36f">eraseInstFromFunction</a>(*LI);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;}</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160; </div>
<div class="line"><a name="l01424"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a8042dd4cb7e9772368f2808b8db577be"> 1424</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8042dd4cb7e9772368f2808b8db577be">InstCombinerImpl::visitStoreInst</a>(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(0);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(1);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// Try to canonicalize the stored type.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ac8600b466ac41bd3d0e42cea97c718b8">combineStoreToValueType</a>(*<span class="keyword">this</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="comment">// Attempt to improve the alignment.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> KnownAlign = <a class="code" href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">getOrEnforceKnownAlignment</a>(</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPrefTypeAlign(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, &amp;AC, &amp;DT);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">if</span> (KnownAlign &gt; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAlign())</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.setAlignment(KnownAlign);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="comment">// Try to canonicalize the stored type.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#acce887569ed105b612c33053a3264608">unpackStoreToAggregate</a>(*<span class="keyword">this</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#acf256b5c507948c6c7d15e59dfaa8800">removeBitcastsFromLoadStoreOnMinMax</a>(*<span class="keyword">this</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// Replace GEP indices if possible.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewGEPI = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ae2780828fdbafdf202fd7daa07b0e38d">replaceGEPIdxWithZero</a>(*<span class="keyword">this</span>, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>)) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      Worklist.push(NewGEPI);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// Don&#39;t hack volatile/ordered stores.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="comment">// FIXME: Some bits are legal for ordered atomic stores; needs refactoring.</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isUnordered()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// If the RHS is an alloca with a single use, zapify the store, making the</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// alloca dead.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0))) {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)-&gt;hasOneUse())</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;          <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// If we have a store to a location which is known constant, we can conclude</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// that the store must be storing the constant value (else the memory</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// wouldn&#39;t be constant), and this must be a noop.</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a728f79528ca8659e15d00c1e6818b316">isModSet</a>(AA-&gt;getModRefInfoMask(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)))</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// Do really simple DSE, to catch cases where there are several consecutive</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// stores to the same location, separated by a few arithmetic operations. This</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="comment">// situation often occurs with bitfield accesses.</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBI(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ScanInsts = 6; BBI != <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getParent()-&gt;<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>() &amp;&amp; ScanInsts;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;       --ScanInsts) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    --BBI;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">// Don&#39;t count debug info directives, lest they affect codegen,</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// and we skip pointer-to-pointer bitcasts, which are NOPs.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordflow">if</span> (BBI-&gt;isDebugOrPseudoInst() ||</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        (isa&lt;BitCastInst&gt;(BBI) &amp;&amp; BBI-&gt;getType()-&gt;isPointerTy())) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      ScanInsts++;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *PrevSI = dyn_cast&lt;StoreInst&gt;(BBI)) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      <span class="comment">// Prev store isn&#39;t volatile, and stores to the same location?</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <span class="keywordflow">if</span> (PrevSI-&gt;isUnordered() &amp;&amp;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;          <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a>(PrevSI-&gt;getOperand(1), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(1)) &amp;&amp;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;          PrevSI-&gt;getValueOperand()-&gt;getType() ==</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;              <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getValueOperand()-&gt;getType()) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        ++NumDeadStore;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="comment">// Manually add back the original store to the worklist now, so it will</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="comment">// be processed after the operands of the removed store, as this may</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="comment">// expose additional DSE opportunities.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        Worklist.push(&amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        eraseInstFromFunction(*PrevSI);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="comment">// If this is a load, we have to stop.  However, if the loaded value is from</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// the pointer we&#39;re loading and is producing the pointer we&#39;re storing,</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// then *this* store is dead (X = load P; store X -&gt; P).</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(BBI)) {</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">if</span> (LI == Val &amp;&amp; <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a>(LI-&gt;getOperand(0), <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isUnordered() &amp;&amp; <span class="stringliteral">&quot;can&#39;t eliminate ordering operation&quot;</span>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <span class="comment">// Otherwise, this is a load from some other location.  Stores before it</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="comment">// may not be dead.</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="comment">// Don&#39;t skip over loads, throws or things that can modify memory.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span> (BBI-&gt;mayWriteToMemory() || BBI-&gt;mayReadFromMemory() || BBI-&gt;mayThrow())</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="comment">// store X, null    -&gt; turns into &#39;unreachable&#39; in SimplifyCFG</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// store X, GEP(null, Y) -&gt; turns into &#39;unreachable&#39; in SimplifyCFG</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a2d7ec4252834b9593345e41e55dbb53c">canSimplifyNullStoreOrGEP</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>)) {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;PoisonValue&gt;(Val))</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, 0, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// Do not modify these!</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// store undef, Ptr -&gt; noop</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// FIXME: This is technically incorrect because it might overwrite a poison</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// value. Change to PoisonValue once #52930 is resolved.</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Val))</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;}</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">/// Try to transform:</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment">///   if () { *P = v1; } else { *P = v2 }</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">/// or:</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment">///   *P = v1; if () { *P = v2; }</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">/// into a phi node with a store in the successor.</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9d9df487d54cc5567b4e0b1c8e0120a8"> 1547</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#a9d9df487d54cc5567b4e0b1c8e0120a8">InstCombinerImpl::mergeStoreIntoSuccessor</a>(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isUnordered())</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// This code has not been audited for volatile/ordered case.</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// Check if the successor block has exactly 2 incoming edges.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StoreBB = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getParent();</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = StoreBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(0);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">if</span> (!DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a526630ff85b48f29ac5b4c519c6c2243">hasNPredecessors</a>(2))</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// Capture the other block (the block that doesn&#39;t contain our store).</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PredIter = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(DestBB);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="keywordflow">if</span> (*PredIter == StoreBB)</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    ++PredIter;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OtherBB = *PredIter;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// Bail out if all of the relevant blocks aren&#39;t distinct. This can happen,</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// for example, if SI is in an infinite loop.</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="keywordflow">if</span> (StoreBB == DestBB || OtherBB == DestBB)</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">// Verify that the other block ends in a branch and is not otherwise empty.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBI(OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OtherBr = dyn_cast&lt;BranchInst&gt;(BBI);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keywordflow">if</span> (!OtherBr || BBI == OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// If the other block ends in an unconditional branch, check for the &#39;if then</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">// else&#39; case. There is an instruction before the branch.</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *OtherStore = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <span class="keywordflow">if</span> (OtherBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>()) {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    --BBI;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// Skip over debugging info and pseudo probes.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">while</span> (BBI-&gt;isDebugOrPseudoInst() ||</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;           (isa&lt;BitCastInst&gt;(BBI) &amp;&amp; BBI-&gt;getType()-&gt;isPointerTy())) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> (BBI==OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      --BBI;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">// If this isn&#39;t a store, isn&#39;t a store to the same location, or is not the</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="comment">// right kind of store, bail out.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    OtherStore = dyn_cast&lt;StoreInst&gt;(BBI);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">if</span> (!OtherStore || OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) != <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(1) ||</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        !<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isSameOperationAs(OtherStore))</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="comment">// Otherwise, the other block ended with a conditional branch. If one of the</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="comment">// destinations is StoreBB, then we have the if/then case.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="keywordflow">if</span> (OtherBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) != StoreBB &amp;&amp;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        OtherBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1) != StoreBB)</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// Okay, we know that OtherBr now goes to Dest and StoreBB, so this is an</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// if/then triangle. See if there is a store to the same ptr as SI that</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="comment">// lives in OtherBB.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">for</span> (;; --BBI) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <span class="comment">// Check to see if we find the matching store.</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keywordflow">if</span> ((OtherStore = dyn_cast&lt;StoreInst&gt;(BBI))) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">if</span> (OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) != <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(1) ||</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            !<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isSameOperationAs(OtherStore))</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="comment">// If we find something that may be using or overwriting the stored</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="comment">// value, or if we run out of instructions, we can&#39;t do the transform.</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">if</span> (BBI-&gt;mayReadFromMemory() || BBI-&gt;mayThrow() ||</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;          BBI-&gt;mayWriteToMemory() || BBI == OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// In order to eliminate the store in OtherBr, we have to make sure nothing</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// reads or overwrites the stored value in StoreBB.</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = StoreBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="comment">// FIXME: This should really be AA driven.</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadFromMemory() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayThrow() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayWriteToMemory())</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">// Insert a PHI node now if we need it.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MergedVal = OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="comment">// The debug locations of the original instructions might differ. Merge them.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> MergedLoc = <a class="code" href="classllvm_1_1DILocation.html#accc5dccb020fb7b324fcfb2d221c1a19">DILocation::getMergedLocation</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getDebugLoc(),</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                                                     OtherStore-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keywordflow">if</span> (MergedVal != <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(0)) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(MergedVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2, <span class="stringliteral">&quot;storemerge&quot;</span>);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(0), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getParent());</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), OtherBB);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    MergedVal = InsertNewInstBefore(PN, DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>());</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(MergedLoc);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="comment">// Advance to a place where it is safe to insert the new store and insert it.</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  BBI = DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>();</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NewSI =</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(MergedVal, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOperand(1), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.isVolatile(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAlign(),</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getOrdering(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getSyncScopeID());</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  InsertNewInstBefore(NewSI, *BBI);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(MergedLoc);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2711d3bc7c6c769a8f34c7fc3937169d">mergeDIAssignID</a>({&amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, OtherStore});</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="comment">// If the two stores had AA tags, merge them.</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <a class="code" href="structllvm_1_1AAMDNodes.html">AAMDNodes</a> AATags = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getAAMetadata();</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">if</span> (AATags)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(AATags.<a class="code" href="structllvm_1_1AAMDNodes.html#a6b173e97523275314f3f2b433a5f71a9">merge</a>(OtherStore-&gt;<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>()));</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// Nuke the old stores.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  eraseInstFromFunction(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  eraseInstFromFunction(*OtherStore);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ab2c2d36b9d75147a029f2b3f44451cbb"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ab2c2d36b9d75147a029f2b3f44451cbb">llvm::IRBuilderBase::CreateInBoundsGEP</a></div><div class="ttdeci">Value * CreateInBoundsGEP(Type *Ty, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01791">IRBuilder.h:1791</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ad145436b2347d82ff976a0d86a0ae149"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ad145436b2347d82ff976a0d86a0ae149">llvm::IRBuilderBase::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02077">IRBuilder.h:2077</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8ad67a33bae235fe3cca1c3e5a91ed2d"><div class="ttname"><a href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSetImpl&lt; Type * &gt; *Visited=nullptr) const</div><div class="ttdoc">Return true if it makes sense to take the size of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00295">Type.h:295</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a337553bc4cd451108e8708b82b79e7ee"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a337553bc4cd451108e8708b82b79e7ee">likeBitCastFromVector</a></div><div class="ttdeci">static Value * likeBitCastFromVector(InstCombinerImpl &amp;IC, Value *V)</div><div class="ttdoc">Look for extractelement/insertvalue sequence that acts like a bitcast.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01140">InstCombineLoadStoreAlloca.cpp:1140</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_aceaa5a2bd964e34d0dbf3ed1f146abc7"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">llvm::GetElementPtrInst::idx_begin</a></div><div class="ttdeci">op_iterator idx_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01050">Instructions.h:1050</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00180">IRBuilder.h:180</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aa49ebc2d87162ef011b1648bca33bbeb"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">llvm::IRBuilderBase::CreateAlignedStore</a></div><div class="ttdeci">StoreInst * CreateAlignedStore(Value *Val, Value *Ptr, MaybeAlign Align, bool isVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01741">IRBuilder.h:1741</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a6895b4fdb208e8a5ff15c573c71657b0"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6895b4fdb208e8a5ff15c573c71657b0">llvm::IRBuilderBase::CreateExtractValue</a></div><div class="ttdeci">Value * CreateExtractValue(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02397">IRBuilder.h:2397</a></div></div>
<div class="ttc" id="aInstCombiner_8h_html"><div class="ttname"><a href="InstCombiner_8h.html">InstCombiner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a42438d0a43720a6571c9138224481754"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">llvm::AllocaInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the memory that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00125">Instructions.h:125</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_af278f33f3e54a61566b7fdff3835e980"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#af278f33f3e54a61566b7fdff3835e980">isObjectSizeLessThanOrEq</a></div><div class="ttdeci">static bool isObjectSizeLessThanOrEq(Value *V, uint64_t MaxSize, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00825">InstCombineLoadStoreAlloca.cpp:825</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html_accc5dccb020fb7b324fcfb2d221c1a19"><div class="ttname"><a href="classllvm_1_1DILocation.html#accc5dccb020fb7b324fcfb2d221c1a19">llvm::DILocation::getMergedLocation</a></div><div class="ttdeci">static const DILocation * getMergedLocation(const DILocation *LocA, const DILocation *LocB)</div><div class="ttdoc">When two instructions are combined into a single instruction we also need to combine the original loc...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l00108">DebugInfoMetadata.cpp:108</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aLoads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdoc">This class wraps the llvm.memcpy/memmove intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01113">IntrinsicInst.h:1113</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a9188f84e1dd67530330dcab9cae787d7"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">llvm::details::FixedOrScalableQuantity::isScalable</a></div><div class="ttdeci">constexpr bool isScalable() const</div><div class="ttdoc">Returns whether the quantity is scaled by a runtime quantity (vscale).</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00166">TypeSize.h:166</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_acf256b5c507948c6c7d15e59dfaa8800"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#acf256b5c507948c6c7d15e59dfaa8800">removeBitcastsFromLoadStoreOnMinMax</a></div><div class="ttdeci">static bool removeBitcastsFromLoadStoreOnMinMax(InstCombinerImpl &amp;IC, StoreInst &amp;SI)</div><div class="ttdoc">Converts store (bitcast (load (bitcast (select ...)))) to store (load (select ...)),...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01375">InstCombineLoadStoreAlloca.cpp:1375</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in a numbered address space.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00729">Type.cpp:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05258">Instructions.h:5258</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_ac106bea55dfb26f8b14676aac05bd89f"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">llvm::AllocaInst::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Overload to return most specific pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00100">Instructions.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae1d331bc844ecb92bdeb0b706ae04396"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy &amp; Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00058">InstCombiner.h:58</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00279">RISCVBaseInfo.h:279</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a78cd22f497c1e81c4d8a5e9073ef5a24"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">llvm::PatternMatch::m_Load</a></div><div class="ttdeci">OneOps_match&lt; OpTy, Instruction::Load &gt; m_Load(const OpTy &amp;Op)</div><div class="ttdoc">Matches LoadInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01563">PatternMatch.h:1563</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00729">DerivedTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00735">Function.h:735</a></div></div>
<div class="ttc" id="aMapVector_8h_html"><div class="ttname"><a href="MapVector_8h.html">MapVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_a728f79528ca8659e15d00c1e6818b316"><div class="ttname"><a href="namespacellvm.html#a728f79528ca8659e15d00c1e6818b316">llvm::isModSet</a></div><div class="ttdeci">bool isModSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00048">ModRef.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae099c6fa4a0b06306ece7dd372e8d02a"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae099c6fa4a0b06306ece7dd372e8d02a">llvm::InstCombiner::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, unsigned Depth, const Instruction *CxtI) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00461">InstCombiner.h:461</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html">llvm::GlobalAlias</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalAlias_8h_source.html#l00028">GlobalAlias.h:28</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdoc">Insert an unlinked instruction into a basic block immediately before the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00088">Instruction.cpp:88</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a4bc1fafcc9582581002518df62792214"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a4bc1fafcc9582581002518df62792214">llvm::InstCombiner::MaxArraySizeForCombine</a></div><div class="ttdeci">uint64_t MaxArraySizeForCombine</div><div class="ttdoc">Maximum size of array considered when transforming.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00053">InstCombiner.h:53</a></div></div>
<div class="ttc" id="astructllvm_1_1AAMDNodes_html"><div class="ttname"><a href="structllvm_1_1AAMDNodes.html">llvm::AAMDNodes</a></div><div class="ttdoc">A collection of metadata nodes that might be associated with a memory access used by the alias-analys...</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00651">Metadata.h:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ad7586c4efa39c8f9162c7608ff9a57cf"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ad7586c4efa39c8f9162c7608ff9a57cf">llvm::InstCombinerImpl::combineLoadToNewType</a></div><div class="ttdeci">LoadInst * combineLoadToNewType(LoadInst &amp;LI, Type *NewTy, const Twine &amp;Suffix=&quot;&quot;)</div><div class="ttdoc">Helper to combine a load to a new type.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00552">InstCombineLoadStoreAlloca.cpp:552</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af99540103c8717d41b490fc2a1acad5c"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af99540103c8717d41b490fc2a1acad5c">llvm::InstCombinerImpl::visitAllocaInst</a></div><div class="ttdeci">Instruction * visitAllocaInst(AllocaInst &amp;AI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00446">InstCombineLoadStoreAlloca.cpp:446</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e7b79b3933def717c2a0f2fc6fa38e0"><div class="ttname"><a href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">llvm::getOrEnforceKnownAlignment</a></div><div class="ttdeci">Align getOrEnforceKnownAlignment(Value *V, MaybeAlign PrefAlign, const DataLayout &amp;DL, const Instruction *CxtI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdoc">Try to ensure that the alignment of V is at least PrefAlign bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01439">Local.cpp:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8042dd4cb7e9772368f2808b8db577be"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8042dd4cb7e9772368f2808b8db577be">llvm::InstCombinerImpl::visitStoreInst</a></div><div class="ttdeci">Instruction * visitStoreInst(StoreInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01424">InstCombineLoadStoreAlloca.cpp:1424</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a495e0c2946cb54155fefdf25d2cf8454"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a495e0c2946cb54155fefdf25d2cf8454">canSimplifyNullLoadOrGEP</a></div><div class="ttdeci">static bool canSimplifyNullLoadOrGEP(LoadInst &amp;LI, Value *Op)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01011">InstCombineLoadStoreAlloca.cpp:1011</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a3618ea6473718a4b0145750a1a2c2868"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a3618ea6473718a4b0145750a1a2c2868">combineStoreToNewValue</a></div><div class="ttdeci">static StoreInst * combineStoreToNewValue(InstCombinerImpl &amp;IC, StoreInst &amp;SI, Value *V)</div><div class="ttdoc">Combine a store to a new type.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00575">InstCombineLoadStoreAlloca.cpp:575</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a526630ff85b48f29ac5b4c519c6c2243"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a526630ff85b48f29ac5b4c519c6c2243">llvm::BasicBlock::hasNPredecessors</a></div><div class="ttdeci">bool hasNPredecessors(unsigned N) const</div><div class="ttdoc">Return true if this block has exactly N predecessors.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00306">BasicBlock.cpp:306</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00264">Instructions.h:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a1e0fea1b88c314ecffb18922c6be5e70"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a1e0fea1b88c314ecffb18922c6be5e70">llvm::IRBuilderBase::CreateAlignedLoad</a></div><div class="ttdeci">LoadInst * CreateAlignedLoad(Type *Ty, Value *Ptr, MaybeAlign Align, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01722">IRBuilder.h:1722</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a4380ad0de0940297354df2effeb021ad"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a4380ad0de0940297354df2effeb021ad">canReplaceGEPIdxWithZero</a></div><div class="ttdeci">static bool canReplaceGEPIdxWithZero(InstCombinerImpl &amp;IC, GetElementPtrInst *GEPI, Instruction *MemI, unsigned &amp;Idx)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00907">InstCombineLoadStoreAlloca.cpp:907</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_ad2fb148dfac3182fce33be95fc4e9159"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ad2fb148dfac3182fce33be95fc4e9159">llvm::AllocaInst::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space for the allocation.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00105">Instructions.h:105</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac0467ca7fad871738b10db95feb40dad"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">llvm::PatternMatch::m_BitCast</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::BitCast &gt; m_BitCast(const OpTy &amp;Op)</div><div class="ttdoc">Matches BitCast.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01593">PatternMatch.h:1593</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aac5759c83abd6a4af236401a7cfe7a0f"><div class="ttname"><a href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const</div><div class="ttdoc">Return true if this is one of the floating-point types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00185">Type.h:185</a></div></div>
<div class="ttc" id="aConstantMerge_8cpp_html_acf172e841018fd16e65771f5ade0b297"><div class="ttname"><a href="ConstantMerge_8cpp.html#acf172e841018fd16e65771f5ade0b297">replace</a></div><div class="ttdeci">static void replace(Module &amp;M, GlobalVariable *Old, GlobalVariable *New)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantMerge_8cpp_source.html#l00116">ConstantMerge.cpp:116</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a1884d0184a1c6c06fc7a70eaede8a73f"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a1884d0184a1c6c06fc7a70eaede8a73f">MaxCopiedFromConstantUsers</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxCopiedFromConstantUsers(&quot;instcombine-max-copied-from-constant-users&quot;, cl::init(300), cl::desc(&quot;Maximum users to visit in copy from constant transform&quot;), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_af51c113a039c82f6870df5dc9666b5e3"><div class="ttname"><a href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">llvm::LoadInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the access that is being performed.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00220">Instructions.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_afbe24f9e57cab99bd5bf3960c76bcc94"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#afbe24f9e57cab99bd5bf3960c76bcc94">llvm::IRBuilderBase::CreateAlloca</a></div><div class="ttdeci">AllocaInst * CreateAlloca(Type *Ty, unsigned AddrSpace, Value *ArraySize=nullptr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01688">IRBuilder.h:1688</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9b43098c569ea8289ed1ab70ee9a00af"><div class="ttname"><a href="namespacellvm.html#a9b43098c569ea8289ed1ab70ee9a00af">llvm::combineMetadataForCSE</a></div><div class="ttdeci">void combineMetadataForCSE(Instruction *K, const Instruction *J, bool DoesKMove)</div><div class="ttdoc">Combine the metadata of two instructions so that K can replace J.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02740">Local.cpp:2740</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_aff28bd42ac76fc3e1c0e4db7f9e06f2d"><div class="ttname"><a href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">llvm::StoreInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SyncScope::ID SSID=SyncScope::System)</div><div class="ttdoc">Sets the ordering constraint and the synchronization scope ID of this store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00376">Instructions.h:376</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd6aa057934751aaac54e5c18bcc18eb"><div class="ttname"><a href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">llvm::commonAlignment</a></div><div class="ttdeci">Align commonAlignment(Align A, uint64_t Offset)</div><div class="ttdoc">Returns the alignment that satisfies both alignments.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00212">Alignment.h:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a565374c44dbf08e54528a87448e10df5"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a565374c44dbf08e54528a87448e10df5">llvm::GetElementPtrInst::getSourceElementType</a></div><div class="ttdeci">Type * getSourceElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01015">Instructions.h:1015</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdoc">Set the metadata of the specified kind to the specified node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01455">Metadata.cpp:1455</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">llvm::AArch64CC::LT</a></div><div class="ttdeci">@ LT</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00266">AArch64BaseInfo.h:266</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8a9b236a3c941e893f6eaa6ca6e4a36f"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8a9b236a3c941e893f6eaa6ca6e4a36f">llvm::InstCombinerImpl::eraseInstFromFunction</a></div><div class="ttdeci">Instruction * eraseInstFromFunction(Instruction &amp;I) override</div><div class="ttdoc">Combiner aware instruction erasure.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00408">InstCombineInternal.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a01f11934ce1bac24a7c9190d14686844"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a01f11934ce1bac24a7c9190d14686844">llvm::GetElementPtrInst::isInBounds</a></div><div class="ttdeci">bool isInBounds() const</div><div class="ttdoc">Determine whether the GEP has the inbounds flag.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01942">Instructions.cpp:1942</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a10531decc5032413dba40ebf5589ef81"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a10531decc5032413dba40ebf5589ef81">llvm::IRBuilderBase::CreateInsertValue</a></div><div class="ttdeci">Value * CreateInsertValue(Value *Agg, Value *Val, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02404">IRBuilder.h:2404</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a157efd68e8b4b838829cad165b1583f8"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a157efd68e8b4b838829cad165b1583f8">llvm::KnownBits::isNonNegative</a></div><div class="ttdeci">bool isNonNegative() const</div><div class="ttdoc">Returns true if this value is known to be non-negative.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00099">KnownBits.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_abc13043585e5845ce7fc26b858851ec9"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">llvm::InstCombiner::replaceOperand</a></div><div class="ttdeci">Instruction * replaceOperand(Instruction &amp;I, unsigned OpNum, Value *V)</div><div class="ttdoc">Replace operand of instruction and add old operand to the worklist.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00442">InstCombiner.h:442</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01462">PatternMatch.h:1462</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_adefbb946b174533d5eb8db503b1f4ffa"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a></div><div class="ttdeci">add sub stmia L5 ldr L2</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00201">README.txt:201</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a074617b3e2f9f98ee3a2ac208e8e7210"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const</div><div class="ttdoc">Return the type that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00118">Instructions.h:118</a></div></div>
<div class="ttc" id="aSmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a57efb022f2ee2e19e4cdf582f4d27f2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a57efb022f2ee2e19e4cdf582f4d27f2d">llvm::Instruction::isAtomic</a></div><div class="ttdeci">bool isAtomic() const LLVM_READONLY</div><div class="ttdoc">Return true if this instruction has an AtomicOrdering of unordered or higher.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00666">Instruction.cpp:666</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_ac8600b466ac41bd3d0e42cea97c718b8"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#ac8600b466ac41bd3d0e42cea97c718b8">combineStoreToValueType</a></div><div class="ttdeci">static bool combineStoreToValueType(InstCombinerImpl &amp;IC, StoreInst &amp;SI)</div><div class="ttdoc">Combine stores to match the type of value being stored.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01201">InstCombineLoadStoreAlloca.cpp:1201</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="anamespacellvm_html_aca964c0c0aee877ecf5c5af8a47982f6"><div class="ttname"><a href="namespacellvm.html#aca964c0c0aee877ecf5c5af8a47982f6">llvm::replace</a></div><div class="ttdeci">void replace(Container &amp;Cont, typename Container::iterator ContIt, typename Container::iterator ContEnd, RandomAccessIterator ValIt, RandomAccessIterator ValEnd)</div><div class="ttdoc">Given a sequence container Cont, replace the range [ContIt, ContEnd) with the range [ValIt,...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02021">STLExtras.h:2021</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00716">PatternMatch.h:716</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1CPol_html_a7d79a4b341da8ac60b91c1f4b1ea42c4a3795a38ac6eb8cb14191aaba99205a87"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4a3795a38ac6eb8cb14191aaba99205a87">llvm::AMDGPU::CPol::NT</a></div><div class="ttdeci">@ NT</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00319">SIDefines.h:319</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_aaca14fdf6d151782f7ab0a66405453fb"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">llvm::AllocaInst::getArraySize</a></div><div class="ttdeci">const Value * getArraySize() const</div><div class="ttdoc">Get the number of elements allocated.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00096">Instructions.h:96</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00375">Value.cpp:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html">llvm::InstCombinerImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00061">InstCombineInternal.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_aade703948f2fdabdc65868bdf42d3141"><div class="ttname"><a href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">llvm::Instruction::getAAMetadata</a></div><div class="ttdeci">AAMDNodes getAAMetadata() const</div><div class="ttdoc">Returns the AA metadata for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01499">Metadata.cpp:1499</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a1214f728b208633ffd04b22b58d80dbd"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a1214f728b208633ffd04b22b58d80dbd">unpackLoadToAggregate</a></div><div class="ttdeci">static Instruction * unpackLoadToAggregate(InstCombinerImpl &amp;IC, LoadInst &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00715">InstCombineLoadStoreAlloca.cpp:715</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_aca6c2de6950cb093f509ed2b67e02da2"><div class="ttname"><a href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">llvm::LoadInst::getSyncScopeID</a></div><div class="ttdeci">SyncScope::ID getSyncScopeID() const</div><div class="ttdoc">Returns the synchronization scope ID of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00239">Instructions.h:239</a></div></div>
<div class="ttc" id="anamespacellvm_1_1compression_1_1zlib_html_a369da242fd5c0d70a31ffcd3374a0909"><div class="ttname"><a href="namespacellvm_1_1compression_1_1zlib.html#a369da242fd5c0d70a31ffcd3374a0909">llvm::compression::zlib::isAvailable</a></div><div class="ttdeci">bool isAvailable()</div><div class="ttdef"><b>Definition:</b> <a href="Compression_8cpp_source.html#l00105">Compression.cpp:105</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 16 &gt;</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdeci">@ IE</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00027">ARMBaseInfo.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2f8e44f52bb2b2c5d2273eccec70faae"><div class="ttname"><a href="namespacellvm.html#a2f8e44f52bb2b2c5d2273eccec70faae">llvm::copyMetadataForLoad</a></div><div class="ttdeci">void copyMetadataForLoad(LoadInst &amp;Dest, const LoadInst &amp;Source)</div><div class="ttdoc">Copy the metadata from the source instruction to the destination (the replacement for the source inst...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02753">Local.cpp:2753</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a161c2db145827f4e181e7fe662b53a81"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">llvm::LoadInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Returns the address space of the pointer operand.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00270">Instructions.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a06d64f226fabd94d694d6abd82e3c7b3"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">llvm::IRBuilderBase::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02008">IRBuilder.h:2008</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a66eb0dc4cd710cba31cbf66f6c031bfb"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00372">InstCombiner.h:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad2ea0f3a55cc5ac23db1d53c12f656f9"><div class="ttname"><a href="namespacellvm.html#ad2ea0f3a55cc5ac23db1d53c12f656f9">llvm::isSafeToLoadUnconditionally</a></div><div class="ttdeci">bool isSafeToLoadUnconditionally(Value *V, Align Alignment, APInt &amp;Size, const DataLayout &amp;DL, Instruction *ScanFrom=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if we know that executing a load from this value cannot trap.</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00325">Loads.cpp:325</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_abf313eff420b7c6c8e322a2e9c53cd90"><div class="ttname"><a href="classllvm_1_1Type.html#abf313eff420b7c6c8e322a2e9c53cd90">llvm::Type::isIntOrPtrTy</a></div><div class="ttdeci">bool isIntOrPtrTy() const</div><div class="ttdoc">Return true if this is an integer type or a pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00237">Type.h:237</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00472">IRBuilder.h:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9d9df487d54cc5567b4e0b1c8e0120a8"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9d9df487d54cc5567b4e0b1c8e0120a8">llvm::InstCombinerImpl::mergeStoreIntoSuccessor</a></div><div class="ttdeci">bool mergeStoreIntoSuccessor(StoreInst &amp;SI)</div><div class="ttdoc">Try to transform: if () { *P = v1; } else { *P = v2 } or: *P = v1; if () { *P = v2; } into a phi node...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01547">InstCombineLoadStoreAlloca.cpp:1547</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a2d7ec4252834b9593345e41e55dbb53c"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a2d7ec4252834b9593345e41e55dbb53c">canSimplifyNullStoreOrGEP</a></div><div class="ttdeci">static bool canSimplifyNullStoreOrGEP(StoreInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01000">InstCombineLoadStoreAlloca.cpp:1000</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a2b1268b642e9bf4373b6fb31c482c9ca"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2b1268b642e9bf4373b6fb31c482c9ca">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00224">Instructions.h:224</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_ada4b86278f4b6680ba5921674815b609"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#ada4b86278f4b6680ba5921674815b609">isMinMaxWithLoads</a></div><div class="ttdeci">static bool isMinMaxWithLoads(Value *V, Type *&amp;LoadTy)</div><div class="ttdoc">Returns true if instruction represent minmax pattern like: select ((cmp load V1, load V2),...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00632">InstCombineLoadStoreAlloca.cpp:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a9a94c15dff322a963b566d486dd673b5"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">llvm::GetElementPtrInst::CreateInBounds</a></div><div class="ttdeci">static GetElementPtrInst * CreateInBounds(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create an &quot;inbounds&quot; getelementptr.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00993">Instructions.h:993</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2711d3bc7c6c769a8f34c7fc3937169d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2711d3bc7c6c769a8f34c7fc3937169d">llvm::Instruction::mergeDIAssignID</a></div><div class="ttdeci">void mergeDIAssignID(ArrayRef&lt; const Instruction * &gt; SourceInstructions)</div><div class="ttdoc">Merge the DIAssignID metadata from this instruction and those attached to instructions in SourceInstr...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00901">DebugInfo.cpp:901</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00640">Type.cpp:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_acce887569ed105b612c33053a3264608"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#acce887569ed105b612c33053a3264608">unpackStoreToAggregate</a></div><div class="ttdeci">static bool unpackStoreToAggregate(InstCombinerImpl &amp;IC, StoreInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01239">InstCombineLoadStoreAlloca.cpp:1239</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9784a018b2dd6a85ee8a70f5f5ab3d02"><div class="ttname"><a href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">llvm::replaceAllDbgUsesWith</a></div><div class="ttdeci">bool replaceAllDbgUsesWith(Instruction &amp;From, Value &amp;To, Instruction &amp;DomPoint, DominatorTree &amp;DT)</div><div class="ttdoc">Point debug users of From to To or salvage them.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02171">Local.cpp:2171</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_af1dcd6c00214bd9c8c8b3c9f9aedcc04"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#af1dcd6c00214bd9c8c8b3c9f9aedcc04">llvm::InstCombiner::InsertNewInstBefore</a></div><div class="ttdeci">Instruction * InsertNewInstBefore(Instruction *New, Instruction &amp;Old)</div><div class="ttdoc">Inserts an instruction New before instruction Old.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00397">InstCombiner.h:397</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad56f6a9b5cd05940017c4544df48bc30"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03217">Instructions.h:3217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a74c47d18ecd4ca3399785e6ae07134dc"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00966">Instructions.h:966</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0a4d51e372293abe5e5f6dac133e80a6"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const</div><div class="ttdoc">Create a copy of 'this' instruction that is identical in all ways except the following:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00903">Instruction.cpp:903</a></div></div>
<div class="ttc" id="astructllvm_1_1AAMDNodes_html_a6b173e97523275314f3f2b433a5f71a9"><div class="ttname"><a href="structllvm_1_1AAMDNodes.html#a6b173e97523275314f3f2b433a5f71a9">llvm::AAMDNodes::merge</a></div><div class="ttdeci">AAMDNodes merge(const AAMDNodes &amp;Other) const</div><div class="ttdoc">Given two sets of AAMDNodes applying to potentially different locations, determine the best AAMDNodes...</div><div class="ttdef"><b>Definition:</b> <a href="TypeBasedAliasAnalysis_8cpp_source.html#l00522">TypeBasedAliasAnalysis.cpp:522</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adea6dc2e42baa345b97be48b0370313d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">llvm::PatternMatch::m_Undef</a></div><div class="ttdeci">auto m_Undef()</div><div class="ttdoc">Match an arbitrary undef constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00136">PatternMatch.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_aeb534c1a0391ce24551c226a582099a7"><div class="ttname"><a href="classllvm_1_1LoadInst.html#aeb534c1a0391ce24551c226a582099a7">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00256">Instructions.h:256</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a9beeeb91e51f1b571d37c1cdcc26ab15"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a9beeeb91e51f1b571d37c1cdcc26ab15">simplifyAllocaArraySize</a></div><div class="ttdeci">static Instruction * simplifyAllocaArraySize(InstCombinerImpl &amp;IC, AllocaInst &amp;AI, DominatorTree &amp;DT)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00190">InstCombineLoadStoreAlloca.cpp:190</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_aea74164514e7164813ab30bcc4b7c557"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#aea74164514e7164813ab30bcc4b7c557">llvm::AllocaInst::isArrayAllocation</a></div><div class="ttdeci">bool isArrayAllocation() const</div><div class="ttdoc">Return true if there is an allocation size parameter to the allocation instruction that is not 1.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01508">Instructions.cpp:1508</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ab03652069eab17006c51f00c261a6a44"><div class="ttname"><a href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">llvm::Type::isPtrOrPtrVectorTy</a></div><div class="ttdeci">bool isPtrOrPtrVectorTy() const</div><div class="ttdoc">Return true if this is a pointer type or a vector of pointer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00255">Type.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a6ae88dc44b078c80ce3a25401fd4b05b"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">llvm::LoadInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SyncScope::ID SSID=SyncScope::System)</div><div class="ttdoc">Sets the ordering constraint and the synchronization scope ID of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00250">Instructions.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a93603fe0d4168b92a901f06015ecb2e7"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const</div><div class="ttdoc">Returns the ordering constraint of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00229">Instructions.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00042">CFG.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_aa00031e59684d793baa874f11ddaf189"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">llvm::InstCombiner::replaceInstUsesWith</a></div><div class="ttdeci">Instruction * replaceInstUsesWith(Instruction &amp;I, Value *V)</div><div class="ttdoc">A combiner-aware RAUW-like routine.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00418">InstCombiner.h:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00326">BasicBlock.h:326</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1dc76cc8bf703e6ada68bededcbb9573"><div class="ttname"><a href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">llvm::APInt::zext</a></div><div class="ttdeci">APInt zext(unsigned width) const</div><div class="ttdoc">Zero extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00973">APInt.cpp:973</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_afcff6bf4e119e9c668532a4b3e8660db"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#afcff6bf4e119e9c668532a4b3e8660db">combineLoadToOperationType</a></div><div class="ttdeci">static Instruction * combineLoadToOperationType(InstCombinerImpl &amp;IC, LoadInst &amp;Load)</div><div class="ttdoc">Combine loads to match the type of their uses' value after looking through intervening bitcasts.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00670">InstCombineLoadStoreAlloca.cpp:670</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html_a7a2619d0e489a4ba9c19a0d86a041d59"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a7a2619d0e489a4ba9c19a0d86a041d59">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const</div><div class="ttdoc">Returns an integer type with size at least as big as that of a pointer in the given address space.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00861">DataLayout.cpp:861</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdeci">@ V2</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00124">NVPTX.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a3265ae31efc424def9bd2a560a8a4c5a"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a></div><div class="ttdeci">static bool equivalentAddressValues(Value *A, Value *B)</div><div class="ttdoc">equivalentAddressValues - Test if A and B will obviously have the same value.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01351">InstCombineLoadStoreAlloca.cpp:1351</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_ae1c9444bcb6b157e8f8c4ec8bf265010"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#ae1c9444bcb6b157e8f8c4ec8bf265010">isOnlyCopiedFromConstantMemory</a></div><div class="ttdeci">static bool isOnlyCopiedFromConstantMemory(AAResults *AA, AllocaInst *V, MemTransferInst *&amp;TheCopy, SmallVectorImpl&lt; Instruction * &gt; &amp;ToDelete)</div><div class="ttdoc">isOnlyCopiedFromConstantMemory - Recursively walk the uses of a (derived) pointer to an alloca.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00047">InstCombineLoadStoreAlloca.cpp:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4dd9b6c5bb93e01393c47dbe60f8b23f"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">llvm::Instruction::setAAMetadata</a></div><div class="ttdeci">void setAAMetadata(const AAMDNodes &amp;N)</div><div class="ttdoc">Sets the AA metadata on this instruction from the AAMDNodes structure.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01513">Metadata.cpp:1513</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4112c4d55a504c443acdc97bf2a3acdf"><div class="ttname"><a href="namespacellvm.html#a4112c4d55a504c443acdc97bf2a3acdf">llvm::FindAvailableLoadedValue</a></div><div class="ttdeci">Value * FindAvailableLoadedValue(LoadInst *Load, BasicBlock *ScanBB, BasicBlock::iterator &amp;ScanFrom, unsigned MaxInstsToScan=DefMaxInstsToScan, AAResults *AA=nullptr, bool *IsLoadCSE=nullptr, unsigned *NumScanedInst=nullptr)</div><div class="ttdoc">Scan backwards to see if we have the value of the given load available locally within a small number ...</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00428">Loads.cpp:428</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">llvm::TargetStackID::Value</a></div><div class="ttdeci">Value</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00027">TargetFrameLowering.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a99d4bfe49182f8d80abb1960f2c12d46"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a99d4bfe49182f8d80abb1960f2c12d46">llvm::GetElementPtrInst::getIndexedType</a></div><div class="ttdeci">static Type * getIndexedType(Type *Ty, ArrayRef&lt; Value * &gt; IdxList)</div><div class="ttdoc">Returns the result type of a getelementptr with the given source element type and indexes.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01900">Instructions.cpp:1900</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_af3bb24b322533dbe8a63c84b18568fe1"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#af3bb24b322533dbe8a63c84b18568fe1">llvm::AllocaInst::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00129">Instructions.h:129</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a7785e563bd969eb1f63d26eca6873eb6"><div class="ttname"><a href="classllvm_1_1AAResults.html#a7785e563bd969eb1f63d26eca6873eb6">llvm::AAResults::getModRefInfoMask</a></div><div class="ttdeci">ModRefInfo getModRefInfoMask(const MemoryLocation &amp;Loc, bool IgnoreLocals=false)</div><div class="ttdoc">Returns a bitmask that should be unconditionally applied to the ModRef info of a memory location.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00149">AliasAnalysis.cpp:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerIntPair_html"><div class="ttname"><a href="classllvm_1_1PointerIntPair.html">llvm::PointerIntPair&lt; Value *, 1, bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a2eccc19f9061eeb7ad1e30e21f76034d"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">llvm::LoadInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const</div><div class="ttdoc">Return true if this is a load from a volatile memory location.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00214">Instructions.h:214</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_ac0f741735997264d3018e30ce2a6b2d3"><div class="ttname"><a href="classllvm_1_1PointerType.html#ac0f741735997264d3018e30ce2a6b2d3">llvm::PointerType::getWithSamePointeeType</a></div><div class="ttdeci">static PointerType * getWithSamePointeeType(PointerType *PT, unsigned AddressSpace)</div><div class="ttdoc">This constructs a pointer type with the same pointee type as input PointerType (or opaque pointer if ...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00666">DerivedTypes.h:666</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a94c9bd7b123be808934be99e1bcedd24"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a94c9bd7b123be808934be99e1bcedd24">llvm::BasicBlock::getFirstNonPHIOrDbg</a></div><div class="ttdeci">const Instruction * getFirstNonPHIOrDbg(bool SkipPseudoOp=true) const</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode or a debug intrinsic,...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00215">BasicBlock.cpp:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c6b351507d3c0730f4290919d43a12"><div class="ttname"><a href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef</a></div><div class="ttdeci">ArrayRef(const T &amp;OneElt) -&gt; ArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_ac072f8698be17d52f20bb63d59e6ce41"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ac072f8698be17d52f20bb63d59e6ce41">llvm::LoadInst::isUnordered</a></div><div class="ttdeci">bool isUnordered() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00258">Instructions.h:258</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a2c476f610d4da3bd752816bc918aa146"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a2c476f610d4da3bd752816bc918aa146">llvm::InstCombiner::peekThroughBitcast</a></div><div class="ttdeci">static Value * peekThroughBitcast(Value *V, bool OneUseOnly=false)</div><div class="ttdoc">Return the source operand of a potentially bitcasted value while optionally checking if it has one us...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00101">InstCombiner.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b03ed78a8e299bde6d26a8793cd4e06"><div class="ttname"><a href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">llvm::NullPointerIsDefined</a></div><div class="ttdeci">bool NullPointerIsDefined(const Function *F, unsigned AS=0)</div><div class="ttdoc">Check whether null pointer dereferencing is considered undefined behavior for a given function or an ...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l02136">Function.cpp:2136</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a9981d75cde69ea5ca9706536fa4bbab5"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a9981d75cde69ea5ca9706536fa4bbab5">isDereferenceableForAllocaSize</a></div><div class="ttdeci">static bool isDereferenceableForAllocaSize(const Value *V, const AllocaInst *AI, const DataLayout &amp;DL)</div><div class="ttdoc">Returns true if V is dereferenceable for size of alloca.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00179">InstCombineLoadStoreAlloca.cpp:179</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_ae2780828fdbafdf202fd7daa07b0e38d"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#ae2780828fdbafdf202fd7daa07b0e38d">replaceGEPIdxWithZero</a></div><div class="ttdeci">static Instruction * replaceGEPIdxWithZero(InstCombinerImpl &amp;IC, Value *Ptr, T &amp;MemI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00983">InstCombineLoadStoreAlloca.cpp:983</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a753e1338645ec04d045211b8a46d968d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">llvm::PatternMatch::m_Cmp</a></div><div class="ttdeci">class_match&lt; CmpInst &gt; m_Cmp()</div><div class="ttdoc">Matches any compare instruction and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00089">PatternMatch.h:89</a></div></div>
<div class="ttc" id="aInstCombineLoadStoreAlloca_8cpp_html_a8120208e16158e30ea3d285a1fa83f52"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a8120208e16158e30ea3d285a1fa83f52">isSupportedAtomicType</a></div><div class="ttdeci">static bool isSupportedAtomicType(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00539">InstCombineLoadStoreAlloca.cpp:539</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a3ba96a0d49ec5f1a062b075f54536a3c"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a3ba96a0d49ec5f1a062b075f54536a3c">llvm::InstCombinerImpl::visitLoadInst</a></div><div class="ttdeci">Instruction * visitLoadInst(LoadInst &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l01025">InstCombineLoadStoreAlloca.cpp:1025</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ab549082d9dfb91ec9a8dc06601d54855"><div class="ttname"><a href="classllvm_1_1Type.html#ab549082d9dfb91ec9a8dc06601d54855">llvm::Type::isX86_AMXTy</a></div><div class="ttdeci">bool isX86_AMXTy() const</div><div class="ttdoc">Return true if this is X86 AMX.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00204">Type.h:204</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00108">Instruction.cpp:108</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2da012cb3e5534bbee33563d309bc354"><div class="ttname"><a href="namespacellvm.html#a2da012cb3e5534bbee33563d309bc354">llvm::isDereferenceableAndAlignedPointer</a></div><div class="ttdeci">bool isDereferenceableAndAlignedPointer(const Value *V, Type *Ty, Align Alignment, const DataLayout &amp;DL, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Returns true if V is always a dereferenceable pointer with alignment greater or equal than requested.</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00201">Loads.cpp:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:23:43 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

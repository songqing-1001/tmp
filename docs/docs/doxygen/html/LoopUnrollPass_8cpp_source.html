<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LoopUnrollPass.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopUnrollPass.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopUnrollPass_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopUnroll.cpp - Loop unroller pass --------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass implements a simple loop unroller.  It works best when loops have</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// been canonicalized by the -indvars pass, allowing it to determine the trip</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// counts of loops easily.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUnrollPass_8h.html">llvm/Transforms/Scalar/LoopUnrollPass.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMapInfo_8h.html">llvm/ADT/DenseMapInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopAnalysisManager_8h.html">llvm/Analysis/LoopAnalysisManager.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUnrollAnalyzer_8h.html">llvm/Analysis/LoopUnrollAnalyzer.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DiagnosticInfo_8h.html">llvm/IR/DiagnosticInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPassManager_8h.html">llvm/Transforms/Scalar/LoopPassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_8h.html">llvm/Transforms/Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPeel_8h.html">llvm/Transforms/Utils/LoopPeel.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopSimplify_8h.html">llvm/Transforms/Utils/LoopSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SizeOpts_8h.html">llvm/Transforms/Utils/SizeOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="UnrollLoop_8h.html">llvm/Transforms/Utils/UnrollLoop.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   72</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-unroll&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a74ac302e71a5bdbb6b2ab1e1d1266e6e">llvm::ForgetSCEVInLoopUnroll</a>(</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="stringliteral">&quot;forget-scev-loop-unroll&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Forget everything in SCEV when doing LoopUnroll, instead of just&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;             <span class="stringliteral">&quot; the current top-most loop. This is sometimes preferred to reduce&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;             <span class="stringliteral">&quot; compile time.&quot;</span>));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="LoopUnrollPass_8cpp.html#af546274b11b5fa0b126dc7f3e76966ce">UnrollThreshold</a>(<span class="stringliteral">&quot;unroll-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The cost threshold for loop unrolling&quot;</span>));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="LoopUnrollPass_8cpp.html#abe48dc9203c8f5e23051f398f57cc286">UnrollOptSizeThreshold</a>(</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <span class="stringliteral">&quot;unroll-optsize-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The cost threshold for loop unrolling when optimizing for &quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;               <span class="stringliteral">&quot;size&quot;</span>));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a625bc7a81808cf7087f2535ee90eef9f">UnrollPartialThreshold</a>(</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="stringliteral">&quot;unroll-partial-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The cost threshold for partial loop unrolling&quot;</span>));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a2703b0874899c598d0eea9660ed007bd">UnrollMaxPercentThresholdBoost</a>(</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="stringliteral">&quot;unroll-max-percent-threshold-boost&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(400), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum &#39;boost&#39; (represented as a percentage &gt;= 100) applied &quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;             <span class="stringliteral">&quot;to the threshold when aggressively unrolling a loop due to the &quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;             <span class="stringliteral">&quot;dynamic cost savings. If completely unrolling a loop will reduce &quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;             <span class="stringliteral">&quot;the total runtime from X to Y, we boost the loop unroll &quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;             <span class="stringliteral">&quot;threshold to DefaultThreshold*std::min(MaxPercentThresholdBoost, &quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;             <span class="stringliteral">&quot;X/Y). This limit avoids excessive code bloat.&quot;</span>));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a2f37fb0593d9a4a6cb19fa059274ef7e">UnrollMaxIterationsCountToAnalyze</a>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="stringliteral">&quot;unroll-max-iteration-count-to-analyze&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(10), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t allow loop unrolling to simulate more than this number of&quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;             <span class="stringliteral">&quot;iterations when checking full unroll profitability&quot;</span>));</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a235a94f9bb6716e557601149ca0fb534">UnrollCount</a>(</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="stringliteral">&quot;unroll-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use this unroll count for all loops including those with &quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;             <span class="stringliteral">&quot;unroll_count pragma values, for testing purposes&quot;</span>));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a83fc54909661665a54cdda54686342dd">UnrollMaxCount</a>(</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="stringliteral">&quot;unroll-max-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Set the max unroll count for partial and runtime unrolling, for&quot;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;             <span class="stringliteral">&quot;testing purposes&quot;</span>));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#adc0220c27b9cd27e22c391378ed1244b">UnrollFullMaxCount</a>(</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="stringliteral">&quot;unroll-full-max-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="stringliteral">&quot;Set the max unroll count for full unrolling, for testing purposes&quot;</span>));</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="LoopUnrollPass_8cpp.html#af5f14075ded64ace8c96da035ef79dd3">UnrollAllowPartial</a>(<span class="stringliteral">&quot;unroll-allow-partial&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allows loops to be partially unrolled until &quot;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                <span class="stringliteral">&quot;-unroll-threshold loop size is reached.&quot;</span>));</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#ab2cdbfa345b54258773128fd1e77ce4e">UnrollAllowRemainder</a>(</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="stringliteral">&quot;unroll-allow-remainder&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow generation of a loop remainder (extra iterations) &quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;             <span class="stringliteral">&quot;when unrolling a loop.&quot;</span>));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="LoopUnrollPass_8cpp.html#a99ecdadaa7869a0686af1714201f931b">UnrollRuntime</a>(<span class="stringliteral">&quot;unroll-runtime&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Unroll loops with run-time trip counts&quot;</span>));</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a181a0f298bf648abcfc8f10215ad7b2e">UnrollMaxUpperBound</a>(</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="stringliteral">&quot;unroll-max-upperbound&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(8), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="stringliteral">&quot;The max of trip count upper bound that is considered in unrolling&quot;</span>));</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#aae18ea31c70cfa9d2028b0369af1c516">PragmaUnrollThreshold</a>(</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="stringliteral">&quot;pragma-unroll-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(16 * 1024), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Unrolled size limit for loops with an unroll(full) or &quot;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;             <span class="stringliteral">&quot;unroll_count pragma.&quot;</span>));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a7d9c8b643475dfdeab1c6861e7e6317e">FlatLoopTripCountThreshold</a>(</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="stringliteral">&quot;flat-loop-tripcount-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(5), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;If the runtime tripcount for the loop is lower than the &quot;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;             <span class="stringliteral">&quot;threshold, the loop is considered as flat and will be less &quot;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;             <span class="stringliteral">&quot;aggressively unrolled.&quot;</span>));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#afda534b0c37087131851e5f959c2a890">UnrollUnrollRemainder</a>(</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="stringliteral">&quot;unroll-remainder&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow the loop remainder to be unrolled.&quot;</span>));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// This option isn&#39;t ever intended to be enabled, it serves to allow</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// experiments to check the assumptions about when this kind of revisit is</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">// necessary.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a461048a2b71f481f5b6c706fceb652d0">UnrollRevisitChildLoops</a>(</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="stringliteral">&quot;unroll-revisit-child-loops&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enqueue and re-visit child loops in the loop PM after unrolling. &quot;</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;             <span class="stringliteral">&quot;This shouldn&#39;t typically be needed as child loops (or their &quot;</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;             <span class="stringliteral">&quot;clones) were already visited.&quot;</span>));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopUnrollPass_8cpp.html#a2347552ca69d9cad96b3e1ce7f673ec0">UnrollThresholdAggressive</a>(</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="stringliteral">&quot;unroll-threshold-aggressive&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(300), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Threshold (max size of unrolled loop) to use in aggressive (O3) &quot;</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;             <span class="stringliteral">&quot;optimizations&quot;</span>));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="LoopUnrollPass_8cpp.html#a007d1271341269538628d304ef34970d">UnrollThresholdDefault</a>(<span class="stringliteral">&quot;unroll-threshold-default&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(150),</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                           <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Default threshold (max size of unrolled &quot;</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                    <span class="stringliteral">&quot;loop), used in all but O3 optimizations&quot;</span>));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// A magic value for use with the Threshold parameter to indicate</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/// that the loop unroll should be performed regardless of how much</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/// code expansion would result.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#aa2e7d58f32215958839220d8ffbde13b">  179</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopUnrollPass_8cpp.html#aa2e7d58f32215958839220d8ffbde13b">NoThreshold</a> = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;unsigned&gt;::max</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/// Gather the various unrolling parameters based on the defaults, compiler</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/// flags, TTI overrides and user specified parameters.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="namespacellvm.html#abd642fa74effc122158e6fb11da78600">  183</a></span>&#160;<span class="comment"></span><a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> <a class="code" href="namespacellvm.html#abd642fa74effc122158e6fb11da78600">llvm::gatherUnrollingPreferences</a>(</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE, <span class="keywordtype">int</span> OptLevel,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    std::optional&lt;unsigned&gt; UserThreshold, std::optional&lt;unsigned&gt; UserCount,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    std::optional&lt;bool&gt; UserAllowPartial, std::optional&lt;bool&gt; UserRuntime,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    std::optional&lt;bool&gt; UserUpperBound,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    std::optional&lt;unsigned&gt; UserFullUnrollMaxCount) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> UP;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// Set up the defaults</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> =</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      OptLevel &gt; 2 ? <a class="code" href="LoopUnrollPass_8cpp.html#a2347552ca69d9cad96b3e1ce7f673ec0">UnrollThresholdAggressive</a> : <a class="code" href="LoopUnrollPass_8cpp.html#a007d1271341269538628d304ef34970d">UnrollThresholdDefault</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a63a7a13b9f772e6c656e94fb7e251d46">MaxPercentThresholdBoost</a> = 400;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af9a7105299bd43b8b61c803f26e4a31b">OptSizeThreshold</a> = <a class="code" href="LoopUnrollPass_8cpp.html#abe48dc9203c8f5e23051f398f57cc286">UnrollOptSizeThreshold</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> = 150;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a54b17420c467d2bb9edd2f79e54d2b6f">PartialOptSizeThreshold</a> = <a class="code" href="LoopUnrollPass_8cpp.html#abe48dc9203c8f5e23051f398f57cc286">UnrollOptSizeThreshold</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 0;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a5ebdb0ee911db5f4304bc6b92b0fed98">DefaultUnrollRuntimeCount</a> = 8;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a> = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;unsigned&gt;::max</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac9d35cceaeac03c999997e0b4d3ebcb6">FullUnrollMaxCount</a> = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;unsigned&gt;::max</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a> = 2;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac0713be3d080bf7e023ddb524f6eabe7">UnrollRemainder</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#afaa4eb31d0f39aa8c7ac8d081a39fec5">AllowExpensiveTripCount</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">Force</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a20a872a70cd97f4915f64fb9470c32d0">UpperBound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abbdf27d466fda1df8f9ce6f256026cce">UnrollAndJam</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a83395d28f9c1d9063aa6d9eb40dd2e7a">UnrollAndJamInnerLoopThreshold</a> = 60;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ab826709c552acec43be43f958b750105">MaxIterationsCountToAnalyze</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a2f37fb0593d9a4a6cb19fa059274ef7e">UnrollMaxIterationsCountToAnalyze</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// Override with any target specific settings</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a25f5cd1eed2a2102d7a012dbc5c08e1a">getUnrollingPreferences</a>(L, SE, UP, &amp;ORE);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// Apply size attributes</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordtype">bool</span> OptForSize = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>() ||</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <span class="comment">// Let unroll hints / pragmas take precedence over PGSO.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    (<a class="code" href="namespacellvm.html#a868145c1795173f9642f99c354f91a7d">hasUnrollTransformation</a>(L) != <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5">TM_ForcedByUser</a> &amp;&amp;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                     <a class="code" href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>(), PSI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                                 <a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">PGSOQueryType::IRPass</a>));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> (OptForSize) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af9a7105299bd43b8b61c803f26e4a31b">OptSizeThreshold</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a54b17420c467d2bb9edd2f79e54d2b6f">PartialOptSizeThreshold</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a63a7a13b9f772e6c656e94fb7e251d46">MaxPercentThresholdBoost</a> = 100;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// Apply any user values specified by cl::opt</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopUnrollPass_8cpp.html#af546274b11b5fa0b126dc7f3e76966ce">UnrollThreshold</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> = <a class="code" href="LoopUnrollPass_8cpp.html#af546274b11b5fa0b126dc7f3e76966ce">UnrollThreshold</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#a625bc7a81808cf7087f2535ee90eef9f">UnrollPartialThreshold</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a625bc7a81808cf7087f2535ee90eef9f">UnrollPartialThreshold</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#a2703b0874899c598d0eea9660ed007bd">UnrollMaxPercentThresholdBoost</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a63a7a13b9f772e6c656e94fb7e251d46">MaxPercentThresholdBoost</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a2703b0874899c598d0eea9660ed007bd">UnrollMaxPercentThresholdBoost</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#a83fc54909661665a54cdda54686342dd">UnrollMaxCount</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a83fc54909661665a54cdda54686342dd">UnrollMaxCount</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#adc0220c27b9cd27e22c391378ed1244b">UnrollFullMaxCount</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac9d35cceaeac03c999997e0b4d3ebcb6">FullUnrollMaxCount</a> = <a class="code" href="LoopUnrollPass_8cpp.html#adc0220c27b9cd27e22c391378ed1244b">UnrollFullMaxCount</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#af5f14075ded64ace8c96da035ef79dd3">UnrollAllowPartial</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a> = <a class="code" href="LoopUnrollPass_8cpp.html#af5f14075ded64ace8c96da035ef79dd3">UnrollAllowPartial</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#ab2cdbfa345b54258773128fd1e77ce4e">UnrollAllowRemainder</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> = <a class="code" href="LoopUnrollPass_8cpp.html#ab2cdbfa345b54258773128fd1e77ce4e">UnrollAllowRemainder</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#a99ecdadaa7869a0686af1714201f931b">UnrollRuntime</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a99ecdadaa7869a0686af1714201f931b">UnrollRuntime</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#a181a0f298bf648abcfc8f10215ad7b2e">UnrollMaxUpperBound</a> == 0)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a20a872a70cd97f4915f64fb9470c32d0">UpperBound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopUnrollPass_8cpp.html#afda534b0c37087131851e5f959c2a890">UnrollUnrollRemainder</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac0713be3d080bf7e023ddb524f6eabe7">UnrollRemainder</a> = <a class="code" href="LoopUnrollPass_8cpp.html#afda534b0c37087131851e5f959c2a890">UnrollUnrollRemainder</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="LoopUnrollPass_8cpp.html#a2f37fb0593d9a4a6cb19fa059274ef7e">UnrollMaxIterationsCountToAnalyze</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ab826709c552acec43be43f958b750105">MaxIterationsCountToAnalyze</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a2f37fb0593d9a4a6cb19fa059274ef7e">UnrollMaxIterationsCountToAnalyze</a>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// Apply user values provided by argument</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (UserThreshold) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> = *UserThreshold;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> = *UserThreshold;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">if</span> (UserCount)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = *UserCount;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (UserAllowPartial)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a> = *UserAllowPartial;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (UserRuntime)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> = *UserRuntime;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (UserUpperBound)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a20a872a70cd97f4915f64fb9470c32d0">UpperBound</a> = *UserUpperBound;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">if</span> (UserFullUnrollMaxCount)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac9d35cceaeac03c999997e0b4d3ebcb6">FullUnrollMaxCount</a> = *UserFullUnrollMaxCount;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">return</span> UP;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">/// A struct to densely store the state of an instruction after unrolling at</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/// each iteration.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">/// This is designed to work like a tuple of &lt;Instruction *, int&gt; for the</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/// purposes of hashing and lookup, but to be able to associate two boolean</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/// states with each key.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span><span class="keyword">struct </span>UnrolledInstState {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordtype">int</span> Iteration : 30;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordtype">unsigned</span> IsFree : 1;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">unsigned</span> IsCounted : 1;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;};</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">/// Hashing and equality testing for a set of the instruction states.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span><span class="keyword">struct </span>UnrolledInstStateKeyInfo {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keyword">using</span> PtrInfo = <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;Instruction *&gt;</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keyword">using</span> PairInfo = <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;std::pair&lt;Instruction *, int&gt;</a>&gt;;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> UnrolledInstState getEmptyKey() {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> {PtrInfo::getEmptyKey(), 0, 0, 0};</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> UnrolledInstState getTombstoneKey() {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">return</span> {PtrInfo::getTombstoneKey(), 0, 0, 0};</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> getHashValue(<span class="keyword">const</span> UnrolledInstState &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> PairInfo::getHashValue({<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.I, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Iteration});</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a0f0d66fa63bebb53ddd51f1cc4def0f8">isEqual</a>(<span class="keyword">const</span> UnrolledInstState &amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                             <span class="keyword">const</span> UnrolledInstState &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Attributes_8cpp.html#a12f59da641309f7afb7b1d32cb59a7bf">PairInfo::isEqual</a>({<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.I, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.Iteration}, {<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.I, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.Iteration});</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;};</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">struct </span>EstimatedUnrollCost {<span class="comment"></span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">  /// The estimated cost after unrolling.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> UnrolledCost;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">  /// The estimated dynamic cost of executing the instructions in the</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">  /// rolled form.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> RolledDynamicCost;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;};</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keyword">struct </span>PragmaInfo {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  PragmaInfo(<span class="keywordtype">bool</span> UUC, <span class="keywordtype">bool</span> PFU, <span class="keywordtype">unsigned</span> PC, <span class="keywordtype">bool</span> PEU)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      : UserUnrollCount(UUC), PragmaFullUnroll(PFU), PragmaCount(PC),</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        PragmaEnableUnroll(PEU) {}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> UserUnrollCount;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> PragmaFullUnroll;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> PragmaCount;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> PragmaEnableUnroll;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;};</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">/// Figure out if the loop is worth full unrolling.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">/// Complete loop unrolling can make some loads constant, and we need to know</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/// if that would expose any further optimization opportunities.  This routine</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/// estimates this optimization.  It computes cost of unrolled loop</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/// (UnrolledCost) and dynamic cost of the original loop (RolledDynamicCost). By</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/// dynamic cost we mean that we won&#39;t count costs of blocks that are known not</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">/// to be executed (i.e. if we have a branch in the loop and we know that at the</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/// given iteration its condition would be resolved to true, we won&#39;t add up the</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/// cost of the &#39;false&#39;-block).</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">/// \returns Optional value, holding the RolledDynamicCost and UnrolledCost. If</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">/// the analysis failed (no benefits expected from the unrolling, or the loop is</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/// too big to analyze), the returned value is std::nullopt.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a4decf28de1615d8ab7bafa9785e740b6">  346</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::optional&lt;EstimatedUnrollCost&gt; <a class="code" href="LoopUnrollPass_8cpp.html#a4decf28de1615d8ab7bafa9785e740b6">analyzeLoopUnrollCost</a>(</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">unsigned</span> TripCount, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Value *&gt;</a> &amp;EphValues,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <span class="keywordtype">unsigned</span> MaxUnrolledLoopSize,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">unsigned</span> MaxIterationsCountToAnalyze) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// We want to be able to scale offsets by the trip count and add more offsets</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// to them without checking for overflows, and we already don&#39;t want to</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// analyze *massive* trip counts, so we force the max to be reasonably small.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaxIterationsCountToAnalyze &lt;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;             (<span class="keywordtype">unsigned</span>)(<a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;int&gt;::max</a>() / 2) &amp;&amp;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         <span class="stringliteral">&quot;The unroll iterations max is too large!&quot;</span>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// Only analyze inner loops. We can&#39;t properly estimate cost of nested loops</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// and we won&#39;t visit inner loops again anyway.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>())</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// Don&#39;t simulate loops with a big or unknown tripcount</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (!TripCount || TripCount &gt; MaxIterationsCountToAnalyze)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 16&gt;</a> BBWorklist;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;std::pair&lt;BasicBlock *, BasicBlock *&gt;</a>, 4&gt; ExitWorklist;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> SimplifiedValues;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Value *, Value *&gt;</a>, 4&gt; SimplifiedInputValues;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// The estimated cost of the unrolled form of the loop. We try to estimate</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// this by simplifying as much as we can while computing the estimate.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> UnrolledCost = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// We also track the estimated dynamic (that is, actually executed) cost in</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// the rolled form. This helps identify cases when the savings from unrolling</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// aren&#39;t just exposing dead control flows, but actual reduced dynamic</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// instructions due to the simplifications which we expect to occur after</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// unrolling.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RolledDynamicCost = 0;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// We track the simplification of each instruction in each iteration. We use</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// this to recursively merge costs into the unrolled cost on-demand so that</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// we don&#39;t count the cost of any dead code. This is essentially a map from</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// &lt;instruction, int&gt; to &lt;bool, bool&gt;, but stored as a densely packed struct.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;UnrolledInstState, UnrolledInstStateKeyInfo&gt;</a> InstCostMap;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// A small worklist used to accumulate cost of instructions from each</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// observable and reached root in the loop.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> CostWorklist;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// PHI-used worklist used between iterations while accumulating cost.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> PHIUsedList;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// Helper function to accumulate cost for instructions in the loop.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keyword">auto</span> AddCostRecursively = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;RootI, <span class="keywordtype">int</span> Iteration) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Iteration &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Cannot have a negative iteration!&quot;</span>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CostWorklist.empty() &amp;&amp; <span class="stringliteral">&quot;Must start with an empty cost list&quot;</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PHIUsedList.empty() &amp;&amp; <span class="stringliteral">&quot;Must start with an empty phi used list&quot;</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    CostWorklist.push_back(&amp;RootI);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TargetTransformInfo::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> =</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      RootI.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">hasMinSize</a>() ?</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a> :</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">for</span> (;; --Iteration) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CostWorklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="comment">// InstCostMap only uses I and Iteration as a key, the other two values</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">// don&#39;t matter here.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keyword">auto</span> CostIter = InstCostMap.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a56034ec173ce8feff8568c0e29462094">find</a>({<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Iteration, 0, 0});</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span> (CostIter == InstCostMap.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a8cd802dcaed35e1f28ea3cbe4af4eff5">end</a>())</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <span class="comment">// If an input to a PHI node comes from a dead path through the loop</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <span class="comment">// we may have no cost data for it here. What that actually means is</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;          <span class="comment">// that it is free.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keyword">auto</span> &amp;<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = *CostIter;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.IsCounted)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;          <span class="comment">// Already counted this instruction.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">// Mark that we are counting the cost of this instruction now.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.IsCounted = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="comment">// If this is a PHI node in the loop header, just add it to the PHI set.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PhiI = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          <span class="keywordflow">if</span> (PhiI-&gt;getParent() == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.IsFree &amp;&amp; <span class="stringliteral">&quot;Loop PHIs shouldn&#39;t be evaluated as they &quot;</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                  <span class="stringliteral">&quot;inherently simplify during unrolling.&quot;</span>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">if</span> (Iteration == 0)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="comment">// Push the incoming value from the backedge into the PHI used list</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="comment">// if it is an in-loop instruction. We&#39;ll use this to populate the</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="comment">// cost worklist for the next iteration (as we count backwards).</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OpI = dyn_cast&lt;Instruction&gt;(</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    PhiI-&gt;getIncomingValueForBlock(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>())))</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;              <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(OpI))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                PHIUsedList.push_back(OpI);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// First accumulate the cost of this instruction.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.IsFree) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          UnrolledCost += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding cost of instruction (iteration &quot;</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                            &lt;&lt; Iteration &lt;&lt; <span class="stringliteral">&quot;): &quot;</span>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;dump());</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// We must count the cost of every operand which is not free,</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">// recursively. If we reach a loop PHI node, simply add it to the set</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="comment">// to be considered on the next iteration (backwards!).</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands()) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;          <span class="comment">// Check whether this operand is free due to being a constant or</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;          <span class="comment">// outside the loop.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          <span class="keyword">auto</span> *OpI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <span class="keywordflow">if</span> (!OpI || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(OpI))</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          <span class="comment">// Otherwise accumulate its cost.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;          CostWorklist.push_back(OpI);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      } <span class="keywordflow">while</span> (!CostWorklist.empty());</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> (PHIUsedList.empty())</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// We&#39;ve exhausted the search.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Iteration &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;             <span class="stringliteral">&quot;Cannot track PHI-used values past the first iteration!&quot;</span>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      CostWorklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(PHIUsedList.begin(), PHIUsedList.end());</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      PHIUsedList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  };</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// Ensure that we don&#39;t violate the loop structure invariants relied on by</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// this analysis.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>() &amp;&amp; <span class="stringliteral">&quot;Must put loop into normal form first.&quot;</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">isLCSSAForm</a>(DT) &amp;&amp;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;         <span class="stringliteral">&quot;Must have loops in LCSSA form to track live-out values.&quot;</span>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting LoopUnroll profitability analysis...\n&quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TargetTransformInfo::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> =</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">hasMinSize</a>() ?</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a> : <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// Simulate execution of each iteration of the loop counting instructions,</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// which would be simplified.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// Since the same load will take different values on different iterations,</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// we literally have to go through all loop&#39;s iterations.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Iteration = 0; Iteration &lt; TripCount; ++Iteration) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; Analyzing iteration &quot;</span> &lt;&lt; Iteration &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// Prepare for the iteration by collecting any simplified entry or backedge</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// inputs.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="comment">// The loop header PHI nodes must have exactly two input: one from the</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// loop preheader and one from the loop latch.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getNumIncomingValues() == 2 &amp;&amp;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          <span class="stringliteral">&quot;Must have an incoming value only for the preheader and the latch.&quot;</span>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValueForBlock(</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;          Iteration == 0 ? L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>() : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">if</span> (Iteration != 0 &amp;&amp; SimplifiedValues.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(V))</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        V = SimplifiedValues.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(V);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      SimplifiedInputValues.push_back({<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>, V});</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// Now clear and re-populate the map for the next iteration.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    SimplifiedValues.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">while</span> (!SimplifiedInputValues.empty())</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      SimplifiedValues.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(SimplifiedInputValues.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>());</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="classllvm_1_1UnrolledInstAnalyzer.html">UnrolledInstAnalyzer</a> Analyzer(Iteration, SimplifiedValues, SE, L);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    BBWorklist.<a class="code" href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">clear</a>();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    BBWorklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">// Note that we *must not* cache the size, this loop grows the worklist.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx != BBWorklist.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>(); ++Idx) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BBWorklist[Idx];</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="comment">// Visit all instructions in the given basic block and try to simplify</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="comment">// it.  We don&#39;t change the actual IR, just count optimization</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="comment">// opportunities.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">// These won&#39;t get into the final code - don&#39;t even try calculating the</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// cost for them.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || EphValues.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="comment">// Track this instruction&#39;s expected baseline cost when executing the</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="comment">// rolled loop form.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        RolledDynamicCost += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">// Visit the instruction to analyze its loop cost after unrolling,</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="comment">// and if the visitor returns true, mark the instruction as free after</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="comment">// unrolling and continue.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordtype">bool</span> IsFree = Analyzer.visit(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keywordtype">bool</span> Inserted = InstCostMap.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>({&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)Iteration,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                                           (<span class="keywordtype">unsigned</span>)IsFree,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                           <span class="comment">/*IsCounted*/</span> <span class="keyword">false</span>}).second;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        (void)Inserted;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted &amp;&amp; <span class="stringliteral">&quot;Cannot have a state for an unvisited instruction!&quot;</span>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (IsFree)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="comment">// Can&#39;t properly model a cost of a call.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment">// FIXME: With a proper cost model we should be able to do it.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CI-&gt;getCalledFunction();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> || <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa8b08fb48c8c58e63aa231a1099475d9">isLoweredToCall</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>)) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t analyze cost of loop with call\n&quot;</span>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment">// If the instruction might have a side-effect recursively account for</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">// the cost of it and all the instructions leading up to it.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayHaveSideEffects())</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          AddCostRecursively(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Iteration);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="comment">// If unrolled body turns out to be too big, bail out.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">if</span> (UnrolledCost &gt; MaxUnrolledLoopSize) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Exceeded threshold.. exiting.\n&quot;</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;  UnrolledCost: &quot;</span> &lt;&lt; UnrolledCost</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;, MaxUnrolledLoopSize: &quot;</span> &lt;&lt; MaxUnrolledLoopSize</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keyword">auto</span> getSimplifiedConstant = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) -&gt; <a class="code" href="classllvm_1_1Constant.html">Constant</a> * {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> (SimplifiedValues.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(V))</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          V = SimplifiedValues.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(V);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">return</span> dyn_cast&lt;Constant&gt;(V);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      };</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="comment">// Add in the live successors by first checking whether we have terminator</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="comment">// that may be simplified based on the values simplified by this call.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *KnownSucc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span> (BI-&gt;isConditional()) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SimpleCond = getSimplifiedConstant(BI-&gt;getCondition())) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="comment">// Just take the first successor if condition is undef</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(SimpleCond))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;              KnownSucc = BI-&gt;getSuccessor(0);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SimpleCondVal =</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                         dyn_cast&lt;ConstantInt&gt;(SimpleCond))</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;              KnownSucc = BI-&gt;getSuccessor(SimpleCondVal-&gt;isZero() ? 1 : 0);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SwitchInst&gt;(TI)) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SimpleCond = getSimplifiedConstant(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition())) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          <span class="comment">// Just take the first successor if condition is undef</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(SimpleCond))</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            KnownSucc = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getSuccessor(0);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SimpleCondVal =</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                       dyn_cast&lt;ConstantInt&gt;(SimpleCond))</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            KnownSucc = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;findCaseValue(SimpleCondVal)-&gt;getCaseSuccessor();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">if</span> (KnownSucc) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(KnownSucc))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          BBWorklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(KnownSucc);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          ExitWorklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>({<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, KnownSucc});</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// Add BB&#39;s successors to the worklist.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Succ))</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;          BBWorklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Succ);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          ExitWorklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>({<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Succ});</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      AddCostRecursively(*TI, Iteration);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// If we found no optimization opportunities on the first iteration, we</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// won&#39;t find them on later ones too.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (UnrolledCost == RolledDynamicCost) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  No opportunities found.. exiting.\n&quot;</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;  UnrolledCost: &quot;</span> &lt;&lt; UnrolledCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">while</span> (!ExitWorklist.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>()) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB, *ExitBB;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    std::tie(ExitingBB, ExitBB) = ExitWorklist.<a class="code" href="classllvm_1_1SetVector.html#a3499f6a24500afba2c318295ad2d2d05">pop_back_val</a>();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *ExitBB) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">if</span> (!PN)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = PN-&gt;getIncomingValueForBlock(ExitingBB);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OpI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(OpI))</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          AddCostRecursively(*OpI, TripCount - 1);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UnrolledCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp; RolledDynamicCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         <span class="stringliteral">&quot;All instructions must have a valid cost, whether the &quot;</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;         <span class="stringliteral">&quot;loop is rolled or unrolled.&quot;</span>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Analysis finished:\n&quot;</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;UnrolledCost: &quot;</span> &lt;&lt; UnrolledCost &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;RolledDynamicCost: &quot;</span> &lt;&lt; RolledDynamicCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">return</span> {{<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>(*UnrolledCost.<a class="code" href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">getValue</a>()),</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;           <a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>(*RolledDynamicCost.<a class="code" href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">getValue</a>())}};</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">/// ApproximateLoopSize - Approximate the size of the loop.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="namespacellvm.html#acb4e0bba417ccd05efb694c13e0ae2b0">  666</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="namespacellvm.html#acb4e0bba417ccd05efb694c13e0ae2b0">llvm::ApproximateLoopSize</a>(</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">unsigned</span> &amp;NumCalls, <span class="keywordtype">bool</span> &amp;NotDuplicatable, <span class="keywordtype">bool</span> &amp;<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a>,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Value *&gt;</a> &amp;EphValues, <span class="keywordtype">unsigned</span> BEInsns) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="structllvm_1_1CodeMetrics.html">CodeMetrics</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>())</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.analyzeBasicBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, EphValues);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  NumCalls = <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInlineCandidates;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  NotDuplicatable = <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.notDuplicatable;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a> = <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.convergent;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopSize = <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInsts;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// Don&#39;t allow an estimate of size zero.  This would allows unrolling of loops</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// with huge iteration counts, which is a compile time problem even if it&#39;s</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// not a problem for code quality. Also, the code using this size may assume</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// that each loop has at least three instructions (likely a conditional</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// branch, a comparison feeding that branch, and some kind of loop increment</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">// feeding that comparison instruction).</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">if</span> (LoopSize.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp; LoopSize &lt; BEInsns + 1)</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// This is an open coded max() on InstructionCost</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    LoopSize = BEInsns + 1;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">return</span> LoopSize;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">// Returns the loop hint metadata node with the given name (for example,</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">// &quot;llvm.loop.unroll.count&quot;).  If no such metadata node exists, then nullptr is</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">// returned.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">  695</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">getUnrollMetadataForLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Name) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *LoopID = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>())</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#af455c80b53029287f35a7e3441eed512">GetUnrollMetadata</a>(LoopID, Name);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">// Returns true if the loop has an unroll(full) pragma.</span></div>
<div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a47df9ca203042ef85332754224d91218">  702</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopUnrollPass_8cpp.html#a47df9ca203042ef85332754224d91218">hasUnrollFullPragma</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">getUnrollMetadataForLoop</a>(L, <span class="stringliteral">&quot;llvm.loop.unroll.full&quot;</span>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">// Returns true if the loop has an unroll(enable) pragma. This metadata is used</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">// for both &quot;#pragma unroll&quot; and &quot;#pragma clang loop unroll(enable)&quot; directives.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a4f99182190ead9c0b0ab19cf46019386">  708</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopUnrollPass_8cpp.html#a4f99182190ead9c0b0ab19cf46019386">hasUnrollEnablePragma</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">getUnrollMetadataForLoop</a>(L, <span class="stringliteral">&quot;llvm.loop.unroll.enable&quot;</span>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">// Returns true if the loop has an runtime unroll(disable) pragma.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#ac94e9ab3d7f1774d783c54ca0bc9a538">  713</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopUnrollPass_8cpp.html#ac94e9ab3d7f1774d783c54ca0bc9a538">hasRuntimeUnrollDisablePragma</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">getUnrollMetadataForLoop</a>(L, <span class="stringliteral">&quot;llvm.loop.unroll.runtime.disable&quot;</span>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;}</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">// If loop has an unroll_count pragma return the (necessarily</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">// positive) value from the pragma.  Otherwise return 0.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a4f441813911ba060dc9457d93d289527">  719</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopUnrollPass_8cpp.html#a4f441813911ba060dc9457d93d289527">unrollCountPragmaValue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MD = <a class="code" href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">getUnrollMetadataForLoop</a>(L, <span class="stringliteral">&quot;llvm.loop.unroll.count&quot;</span>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">if</span> (MD) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MD-&gt;<a class="code" href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">getNumOperands</a>() == 2 &amp;&amp;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;           <span class="stringliteral">&quot;Unroll count hint metadata should have two operands.&quot;</span>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">unsigned</span> Count =</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        mdconst::extract&lt;ConstantInt&gt;(MD-&gt;<a class="code" href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">getOperand</a>(1))-&gt;getZExtValue();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Count &gt;= 1 &amp;&amp; <span class="stringliteral">&quot;Unroll count must be positive.&quot;</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> Count;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">// Computes the boosting factor for complete unrolling.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">// If fully unrolling the loop would save a lot of RolledDynamicCost, it would</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">// be beneficial to fully unroll the loop even if unrolledcost is large. We</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">// use (RolledDynamicCost / UnrolledCost) to model the unroll benefits to adjust</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">// the unroll threshold.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#acbbbc7e7d7a179db52a59d70392a1e9c">  737</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopUnrollPass_8cpp.html#acbbbc7e7d7a179db52a59d70392a1e9c">getFullUnrollBoostingFactor</a>(<span class="keyword">const</span> EstimatedUnrollCost &amp;Cost,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                            <span class="keywordtype">unsigned</span> MaxPercentThresholdBoost) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.RolledDynamicCost &gt;= <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;unsigned&gt;::max</a>() / 100)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> 100;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.UnrolledCost != 0)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// The boosting factor is RolledDynamicCost / UnrolledCost</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(100 * <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.RolledDynamicCost / <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.UnrolledCost,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    MaxPercentThresholdBoost);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">return</span> MaxPercentThresholdBoost;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">// Produce an estimate of the unrolled cost of the specified loop.  This</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">// is used to a) produce a cost estimate for partial unrolling and b) to</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">// cheaply estimate cost for full unrolling when we don&#39;t want to symbolically</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">// evaluate all iterations.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="classUnrollCostEstimator.html">  753</a></span>&#160;<span class="keyword">class </span><a class="code" href="classUnrollCostEstimator.html">UnrollCostEstimator</a> {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> LoopSize;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="classUnrollCostEstimator.html#a04950e4008a9674418e40e4ef94d9ea8">  757</a></span>&#160;  <a class="code" href="classUnrollCostEstimator.html#a04950e4008a9674418e40e4ef94d9ea8">UnrollCostEstimator</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <span class="keywordtype">unsigned</span> LoopSize) : LoopSize(LoopSize) {}</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// Returns loop size estimation for unrolled loop, given the unrolling</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// configuration specified by UP.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">  762</a></span>&#160;  <a class="code" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">getUnrolledLoopSize</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> &amp;UP,</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> CountOverwrite = 0)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoopSize &gt;= UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a> &amp;&amp;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;           <span class="stringliteral">&quot;LoopSize should not be less than BEInsns!&quot;</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (CountOverwrite)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(LoopSize - UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>) * CountOverwrite +</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;             UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(LoopSize - UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>) * UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> +</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;             UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;};</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keyword">static</span> std::optional&lt;unsigned&gt;</div>
<div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a18806cdb72c45552e5bea3a77109aea7">  776</a></span>&#160;<a class="code" href="LoopUnrollPass_8cpp.html#a18806cdb72c45552e5bea3a77109aea7">shouldPragmaUnroll</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> PragmaInfo &amp;PInfo,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TripMultiple, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TripCount,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classUnrollCostEstimator.html">UnrollCostEstimator</a> UCE,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                   <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> &amp;UP) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// Using unroll pragma</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// 1st priority is unroll count set by &quot;unroll-count&quot; option.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">if</span> (PInfo.UserUnrollCount) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> &amp;&amp;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        UCE.<a class="code" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">getUnrolledLoopSize</a>(UP, (<span class="keywordtype">unsigned</span>)<a class="code" href="LoopUnrollPass_8cpp.html#a235a94f9bb6716e557601149ca0fb534">UnrollCount</a>) &lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a>)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span>)<a class="code" href="LoopUnrollPass_8cpp.html#a235a94f9bb6716e557601149ca0fb534">UnrollCount</a>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// 2nd priority is unroll count set by pragma.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (PInfo.PragmaCount &gt; 0) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> ((UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> || (TripMultiple % PInfo.PragmaCount == 0)))</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">return</span> PInfo.PragmaCount;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordflow">if</span> (PInfo.PragmaFullUnroll &amp;&amp; TripCount != 0)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">return</span> TripCount;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// if didn&#39;t return until here, should continue to other priorties</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#ae217227e871881bbe884af5158998c21">  803</a></span>&#160;<span class="keyword">static</span> std::optional&lt;unsigned&gt; <a class="code" href="LoopUnrollPass_8cpp.html#ae217227e871881bbe884af5158998c21">shouldFullUnroll</a>(</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Value *&gt;</a> &amp;EphValues,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> FullUnrollTripCount, <span class="keyword">const</span> <a class="code" href="classUnrollCostEstimator.html">UnrollCostEstimator</a> UCE,</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> &amp;UP) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FullUnrollTripCount &amp;&amp; <span class="stringliteral">&quot;should be non-zero!&quot;</span>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">if</span> (FullUnrollTripCount &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac9d35cceaeac03c999997e0b4d3ebcb6">FullUnrollMaxCount</a>)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// When computing the unrolled size, note that BEInsns are not replicated</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// like the rest of the loop body.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordflow">if</span> (UCE.<a class="code" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">getUnrolledLoopSize</a>(UP) &lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a>)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">return</span> FullUnrollTripCount;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// The loop isn&#39;t that small, but we still can fully unroll it if that</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// helps to remove a significant number of instructions.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// To check that, run additional analysis on the loop.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (std::optional&lt;EstimatedUnrollCost&gt; <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a4decf28de1615d8ab7bafa9785e740b6">analyzeLoopUnrollCost</a>(</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          L, FullUnrollTripCount, DT, SE, EphValues, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> * UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a63a7a13b9f772e6c656e94fb7e251d46">MaxPercentThresholdBoost</a> / 100,</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ab826709c552acec43be43f958b750105">MaxIterationsCountToAnalyze</a>)) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordtype">unsigned</span> Boost =</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <a class="code" href="LoopUnrollPass_8cpp.html#acbbbc7e7d7a179db52a59d70392a1e9c">getFullUnrollBoostingFactor</a>(*<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a63a7a13b9f772e6c656e94fb7e251d46">MaxPercentThresholdBoost</a>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>-&gt;UnrolledCost &lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> * Boost / 100)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">return</span> FullUnrollTripCount;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;}</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="keyword">static</span> std::optional&lt;unsigned&gt;</div>
<div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#afc196ec1fe8dc9531a2d0bd76b8defc6">  834</a></span>&#160;<a class="code" href="LoopUnrollPass_8cpp.html#afc196ec1fe8dc9531a2d0bd76b8defc6">shouldPartialUnroll</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> LoopSize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TripCount,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classUnrollCostEstimator.html">UnrollCostEstimator</a> UCE,</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> &amp;UP) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">if</span> (!TripCount)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">if</span> (!UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a>) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  will not try to unroll partially because &quot;</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;-unroll-allow-partial not given\n&quot;</span>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> == 0)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = TripCount;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> != <a class="code" href="LoopUnrollPass_8cpp.html#aa2e7d58f32215958839220d8ffbde13b">NoThreshold</a>) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">// Reduce unroll count to be modulo of TripCount for partial unrolling.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (UCE.<a class="code" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">getUnrolledLoopSize</a>(UP, <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a>) &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a>)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = (<a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a>, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a> + 1) - UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>) /</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        (LoopSize - UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a>)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> != 0 &amp;&amp; TripCount % <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> != 0)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a>--;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> &amp;&amp; <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> &lt;= 1) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="comment">// If there is no Count that is modulo of TripCount, set Count to</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="comment">// largest power-of-two factor that satisfies the threshold limit.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="comment">// As we&#39;ll create fixup loop, do the type of unrolling only if</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="comment">// remainder loop is allowed.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a5ebdb0ee911db5f4304bc6b92b0fed98">DefaultUnrollRuntimeCount</a>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> != 0 &amp;&amp;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;             UCE.<a class="code" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">getUnrolledLoopSize</a>(UP, <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a>) &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a>)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> &gt;&gt;= 1;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> &lt; 2) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = 0;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = TripCount;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a>)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  partially unrolling with count: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">count</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">// Returns true if unroll count was set explicitly.</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">// Calculates unroll count and writes it to UP.Count.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">// Unless IgnoreUser is true, will also use metadata and command-line options</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">// that are specific to to the LoopUnroll pass (which, for instance, are</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">// irrelevant for the LoopUnrollAndJam pass).</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">// FIXME: This function is used by LoopUnroll and LoopUnrollAndJam, but consumes</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">// many LoopUnroll-specific options. The shared functionality should be</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">// refactored into it own function.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="namespacellvm.html#aaf3f6dd34ce3968d323a20d3a22e4545">  889</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#aaf3f6dd34ce3968d323a20d3a22e4545">llvm::computeUnrollCount</a>(</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Value *&gt;</a> &amp;EphValues,</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <span class="keywordtype">unsigned</span> TripCount, <span class="keywordtype">unsigned</span> MaxTripCount,</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordtype">bool</span> MaxOrZero, <span class="keywordtype">unsigned</span> TripMultiple, <span class="keywordtype">unsigned</span> LoopSize,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> &amp;UP,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TargetTransformInfo::PeelingPreferences</a> &amp;PP, <span class="keywordtype">bool</span> &amp;UseUpperBound) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="classUnrollCostEstimator.html">UnrollCostEstimator</a> UCE(*L, LoopSize);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> UserUnrollCount = <a class="code" href="LoopUnrollPass_8cpp.html#a235a94f9bb6716e557601149ca0fb534">UnrollCount</a>.getNumOccurrences() &gt; 0;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> PragmaFullUnroll = <a class="code" href="LoopUnrollPass_8cpp.html#a47df9ca203042ef85332754224d91218">hasUnrollFullPragma</a>(L);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> PragmaCount = <a class="code" href="LoopUnrollPass_8cpp.html#a4f441813911ba060dc9457d93d289527">unrollCountPragmaValue</a>(L);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> PragmaEnableUnroll = <a class="code" href="LoopUnrollPass_8cpp.html#a4f99182190ead9c0b0ab19cf46019386">hasUnrollEnablePragma</a>(L);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> ExplicitUnroll = PragmaCount &gt; 0 || PragmaFullUnroll ||</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                              PragmaEnableUnroll || UserUnrollCount;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  PragmaInfo PInfo(UserUnrollCount, PragmaFullUnroll, PragmaCount,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                   PragmaEnableUnroll);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// Use an explicit peel count that has been specified for testing. In this</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// case it&#39;s not permitted to also specify an explicit unroll count.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">if</span> (PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a>) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopUnrollPass_8cpp.html#a235a94f9bb6716e557601149ca0fb534">UnrollCount</a>.getNumOccurrences() &gt; 0) {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Cannot specify both explicit peel count and &quot;</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                         <span class="stringliteral">&quot;explicit unroll count&quot;</span>, <span class="comment">/*GenCrashDiag=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 1;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// Check for explicit Count.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// 1st priority is unroll count set by &quot;unroll-count&quot; option.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// 2nd priority is unroll count set by pragma.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> UnrollFactor = <a class="code" href="LoopUnrollPass_8cpp.html#a18806cdb72c45552e5bea3a77109aea7">shouldPragmaUnroll</a>(L, PInfo, TripMultiple, TripCount,</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                                             UCE, UP)) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = *UnrollFactor;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">if</span> (UserUnrollCount || (PragmaCount &gt; 0)) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#afaa4eb31d0f39aa8c7ac8d081a39fec5">AllowExpensiveTripCount</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">Force</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> |= (PragmaCount &gt; 0);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">return</span> ExplicitUnroll;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (ExplicitUnroll &amp;&amp; TripCount != 0) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="comment">// If the loop has an unrolling pragma, we want to be more aggressive with</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="comment">// unrolling limits. Set thresholds to at least the PragmaUnrollThreshold</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="comment">// value which is larger than the default limits.</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> = std::max&lt;unsigned&gt;(UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a>, <a class="code" href="LoopUnrollPass_8cpp.html#aae18ea31c70cfa9d2028b0369af1c516">PragmaUnrollThreshold</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> =</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;          std::max&lt;unsigned&gt;(UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a>, <a class="code" href="LoopUnrollPass_8cpp.html#aae18ea31c70cfa9d2028b0369af1c516">PragmaUnrollThreshold</a>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// 3rd priority is exact full unrolling.  This will eliminate all copies</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// of some exit test.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 0;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (TripCount) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = TripCount;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> UnrollFactor = <a class="code" href="LoopUnrollPass_8cpp.html#ae217227e871881bbe884af5158998c21">shouldFullUnroll</a>(L, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, SE, EphValues,</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                             TripCount, UCE, UP)) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = *UnrollFactor;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      UseUpperBound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">return</span> ExplicitUnroll;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// 4th priority is bounded unrolling.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// We can unroll by the upper bound amount if it&#39;s generally allowed or if</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="comment">// we know that the loop is executed either the upper bound or zero times.</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="comment">// (MaxOrZero unrolling keeps only the first loop test, so the number of</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// loop tests remains the same compared to the non-unrolled version, whereas</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="comment">// the generic upper bound unrolling keeps all but the last loop test so the</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// number of loop tests goes up which may end up being worse on targets with</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// constrained branch predictor resources so is controlled by an option.)</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="comment">// In addition we only unroll small upper bounds.</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">// Note that the cost of bounded unrolling is always strictly greater than</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// cost of exact full unrolling.  As such, if we have an exact count and</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">// found it unprofitable, we&#39;ll never chose to bounded unroll.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordflow">if</span> (!TripCount &amp;&amp; MaxTripCount &amp;&amp; (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a20a872a70cd97f4915f64fb9470c32d0">UpperBound</a> || MaxOrZero) &amp;&amp;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      MaxTripCount &lt;= <a class="code" href="LoopUnrollPass_8cpp.html#a181a0f298bf648abcfc8f10215ad7b2e">UnrollMaxUpperBound</a>) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = MaxTripCount;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> UnrollFactor = <a class="code" href="LoopUnrollPass_8cpp.html#ae217227e871881bbe884af5158998c21">shouldFullUnroll</a>(L, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, SE, EphValues,</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                             MaxTripCount, UCE, UP)) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = *UnrollFactor;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      UseUpperBound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordflow">return</span> ExplicitUnroll;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">// 5th priority is loop peeling.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <a class="code" href="namespacellvm.html#a1b8329ea8794c1e6fa1294a1e5a463dd">computePeelCount</a>(L, LoopSize, PP, TripCount, DT, SE, AC, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordflow">if</span> (PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a>) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 1;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">return</span> ExplicitUnroll;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// Before starting partial unrolling, set up.partial to true,</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">// if user explicitly asked  for unrolling</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">if</span> (TripCount)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a> |= ExplicitUnroll;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// 6th priority is partial unrolling.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">// Try partial unroll only when TripCount could be statically calculated.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> UnrollFactor = <a class="code" href="LoopUnrollPass_8cpp.html#afc196ec1fe8dc9531a2d0bd76b8defc6">shouldPartialUnroll</a>(LoopSize, TripCount, UCE, UP)) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = *UnrollFactor;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">if</span> ((PragmaFullUnroll || PragmaEnableUnroll) &amp;&amp; TripCount &amp;&amp;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> != TripCount)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(<a class="code" href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                        <span class="stringliteral">&quot;FullUnrollAsDirectedTooLarge&quot;</span>,</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                        L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;Unable to fully unroll loop as directed by unroll pragma &quot;</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                  <span class="stringliteral">&quot;because &quot;</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                  <span class="stringliteral">&quot;unrolled size is too large.&quot;</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      });</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> != <a class="code" href="LoopUnrollPass_8cpp.html#aa2e7d58f32215958839220d8ffbde13b">NoThreshold</a>) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> == 0) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> (PragmaEnableUnroll)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;          ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(<a class="code" href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                                            <span class="stringliteral">&quot;UnrollAsDirectedTooLarge&quot;</span>,</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                            L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;Unable to unroll loop as directed by unroll(enable) &quot;</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                      <span class="stringliteral">&quot;pragma &quot;</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                      <span class="stringliteral">&quot;because unrolled size is too large.&quot;</span>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;          });</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">return</span> ExplicitUnroll;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TripCount == 0 &amp;&amp;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;         <span class="stringliteral">&quot;All cases when TripCount is constant should be covered here.&quot;</span>);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">if</span> (PragmaFullUnroll)</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                 <a class="code" href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;CantFullUnrollAsDirectedRuntimeTripCount&quot;</span>,</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                 L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Unable to fully unroll loop as directed by unroll(full) &quot;</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                <span class="stringliteral">&quot;pragma &quot;</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                <span class="stringliteral">&quot;because loop has a runtime trip count.&quot;</span>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    });</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// 7th priority is runtime unrolling.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// Don&#39;t unroll a runtime trip count loop when it is disabled.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopUnrollPass_8cpp.html#ac94e9ab3d7f1774d783c54ca0bc9a538">hasRuntimeUnrollDisablePragma</a>(L)) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 0;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// Don&#39;t unroll a small upper bound loop unless user or TTI asked to do so.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> (MaxTripCount &amp;&amp; !UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">Force</a> &amp;&amp; MaxTripCount &lt; <a class="code" href="LoopUnrollPass_8cpp.html#a181a0f298bf648abcfc8f10215ad7b2e">UnrollMaxUpperBound</a>) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 0;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// Check if the runtime trip count is too small when profile is available.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a9084ce2576fad285c1c0dc1e165dd4b6">hasProfileData</a>()) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> ProfileTripCount = <a class="code" href="namespacellvm.html#a0b3c6dc8e7df65d2385acfe9657abd03">getLoopEstimatedTripCount</a>(L)) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">if</span> (*ProfileTripCount &lt; <a class="code" href="LoopUnrollPass_8cpp.html#a7d9c8b643475dfdeab1c6861e7e6317e">FlatLoopTripCountThreshold</a>)</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#afaa4eb31d0f39aa8c7ac8d081a39fec5">AllowExpensiveTripCount</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> |= PragmaEnableUnroll || PragmaCount &gt; 0 || UserUnrollCount;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">if</span> (!UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a>) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  will not try to unroll loop with runtime trip count &quot;</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;-unroll-runtime not given\n&quot;</span>);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 0;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> == 0)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a5ebdb0ee911db5f4304bc6b92b0fed98">DefaultUnrollRuntimeCount</a>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">// Reduce unroll count to be the largest power-of-two factor of</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="comment">// the original count which satisfies the threshold limit.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">while</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> != 0 &amp;&amp;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         UCE.<a class="code" href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">getUnrolledLoopSize</a>(UP) &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a>)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> &gt;&gt;= 1;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordtype">unsigned</span> OrigCount = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (!UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> &amp;&amp; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> != 0 &amp;&amp; (TripMultiple % UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>) != 0) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">while</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> != 0 &amp;&amp; TripMultiple % UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> != 0)</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> &gt;&gt;= 1;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Remainder loop is restricted (that could architecture &quot;</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                  <span class="stringliteral">&quot;specific or because the loop contains a convergent &quot;</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                  <span class="stringliteral">&quot;instruction), so unroll count must divide the trip &quot;</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                  <span class="stringliteral">&quot;multiple, &quot;</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;               &lt;&lt; TripMultiple &lt;&lt; <span class="stringliteral">&quot;.  Reducing unroll count from &quot;</span> &lt;&lt; OrigCount</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keyword">using namespace </span>ore;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopUnrollPass_8cpp.html#a4f441813911ba060dc9457d93d289527">unrollCountPragmaValue</a>(L) &gt; 0 &amp;&amp; !UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a>)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(<a class="code" href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                        <span class="stringliteral">&quot;DifferentUnrollCountFromDirected&quot;</span>,</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                        L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;Unable to unroll loop the number of times directed by &quot;</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                  <span class="stringliteral">&quot;unroll_count pragma because remainder loop is restricted &quot;</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                  <span class="stringliteral">&quot;(that could architecture specific or because the loop &quot;</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                  <span class="stringliteral">&quot;contains a convergent instruction) and so must have an &quot;</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                  <span class="stringliteral">&quot;unroll &quot;</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                  <span class="stringliteral">&quot;count that divides the loop trip multiple of &quot;</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;TripMultiple&quot;</span>, TripMultiple) &lt;&lt; <span class="stringliteral">&quot;.  Unrolling instead &quot;</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;UnrollCount&quot;</span>, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>) &lt;&lt; <span class="stringliteral">&quot; time(s).&quot;</span>;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      });</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> &gt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a>)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">MaxCount</a>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">if</span> (MaxTripCount &amp;&amp; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> &gt; MaxTripCount)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = MaxTripCount;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  runtime unrolling with count: &quot;</span> &lt;&lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> &lt; 2)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> = 0;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">return</span> ExplicitUnroll;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1">LoopUnrollResult</a></div>
<div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="LoopUnrollPass_8cpp.html#a0902a0ceb102cc66001a40cc148b310a"> 1123</a></span>&#160;<a class="code" href="LoopUnrollPass_8cpp.html#a0902a0ceb102cc66001a40cc148b310a">tryToUnrollLoop</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;AC,</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI, <span class="keywordtype">bool</span> PreserveLCSSA, <span class="keywordtype">int</span> OptLevel,</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <span class="keywordtype">bool</span> OnlyWhenForced, <span class="keywordtype">bool</span> ForgetAllSCEV,</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                std::optional&lt;unsigned&gt; ProvidedCount,</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                std::optional&lt;unsigned&gt; ProvidedThreshold,</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                std::optional&lt;bool&gt; ProvidedAllowPartial,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                std::optional&lt;bool&gt; ProvidedRuntime,</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                std::optional&lt;bool&gt; ProvidedUpperBound,</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                std::optional&lt;bool&gt; ProvidedAllowPeeling,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                std::optional&lt;bool&gt; ProvidedAllowProfileBasedPeeling,</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                std::optional&lt;unsigned&gt; ProvidedFullUnrollMaxCount) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop Unroll: F[&quot;</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                    &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;] Loop %&quot;</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                    &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcb">TransformationMode</a> <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = <a class="code" href="namespacellvm.html#a868145c1795173f9642f99c354f91a7d">hasUnrollTransformation</a>(L);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> &amp; <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa70bd8f3da4232ad809b2ffdcc1254bd">TM_Disable</a>)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// If this loop isn&#39;t forced to be unrolled, avoid unrolling it when the</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// parent loop has an explicit unroll-and-jam pragma. This is to prevent</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// automatic unrolling from interfering with the user requested</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// transformation.</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentL = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>();</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (ParentL != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <a class="code" href="namespacellvm.html#a7386405e9217844550433e1debb58ef7">hasUnrollAndJamTransformation</a>(ParentL) == <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5">TM_ForcedByUser</a> &amp;&amp;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <a class="code" href="namespacellvm.html#a868145c1795173f9642f99c354f91a7d">hasUnrollTransformation</a>(L) != <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5">TM_ForcedByUser</a>) {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not unrolling loop since parent loop has&quot;</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; llvm.loop.unroll_and_jam.\n&quot;</span>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">// If this loop isn&#39;t forced to be unrolled, avoid unrolling it when the</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// loop has an explicit unroll-and-jam pragma. This is to prevent automatic</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// unrolling from interfering with the user requested transformation.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7386405e9217844550433e1debb58ef7">hasUnrollAndJamTransformation</a>(L) == <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5">TM_ForcedByUser</a> &amp;&amp;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <a class="code" href="namespacellvm.html#a868145c1795173f9642f99c354f91a7d">hasUnrollTransformation</a>(L) != <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5">TM_ForcedByUser</a>) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;  Not unrolling loop since it has llvm.loop.unroll_and_jam.\n&quot;</span>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>()) {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not unrolling loop which is not in loop-simplify form.\n&quot;</span>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// When automatic unrolling is disabled, do not unroll unless overridden for</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">// this loop.</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">if</span> (OnlyWhenForced &amp;&amp; !(<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> &amp; <a class="code" href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbac3977ea14dd68d93d147c91a34de4bb3">TM_Enable</a>))</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordtype">bool</span> OptForSize = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>();</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordtype">unsigned</span> NumInlineCandidates;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordtype">bool</span> NotDuplicatable;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> UP = <a class="code" href="namespacellvm.html#abd642fa74effc122158e6fb11da78600">gatherUnrollingPreferences</a>(</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      L, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, PSI, ORE, OptLevel, ProvidedThreshold, ProvidedCount,</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      ProvidedAllowPartial, ProvidedRuntime, ProvidedUpperBound,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      ProvidedFullUnrollMaxCount);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TargetTransformInfo::PeelingPreferences</a> PP = <a class="code" href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">gatherPeelingPreferences</a>(</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      L, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, ProvidedAllowPeeling, ProvidedAllowProfileBasedPeeling, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// Exit early if unrolling is disabled. For OptForSize, we pick the loop size</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// as threshold later on.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">if</span> (UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> == 0 &amp;&amp; (!UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a> || UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> == 0) &amp;&amp;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      !OptForSize)</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 32&gt;</a> EphValues;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">CodeMetrics::collectEphemeralValues</a>(L, &amp;AC, EphValues);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopSizeIC =</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <a class="code" href="namespacellvm.html#acb4e0bba417ccd05efb694c13e0ae2b0">ApproximateLoopSize</a>(L, NumInlineCandidates, NotDuplicatable, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a>,</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, EphValues, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Loop Size = &quot;</span> &lt;&lt; LoopSizeIC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="keywordflow">if</span> (!LoopSizeIC.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>()) {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not unrolling loop which contains instructions&quot;</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with invalid cost.\n&quot;</span>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordtype">unsigned</span> LoopSize = *LoopSizeIC.<a class="code" href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">getValue</a>();</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (NotDuplicatable) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not unrolling loop which contains non-duplicatable&quot;</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; instructions.\n&quot;</span>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// When optimizing for size, use LoopSize + 1 as threshold (we use &lt; Threshold</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// later), to (fully) unroll loops, if it does not increase code size.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> (OptForSize)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a>, LoopSize + 1);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (NumInlineCandidates != 0) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not unrolling loop with inlinable calls.\n&quot;</span>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="comment">// Find the smallest exact trip count for any exit. This is an upper bound</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// on the loop trip count, but an exit at an earlier iteration is still</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// possible. An unroll by the smallest exact trip count guarantees that all</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// branches relating to at least one exit can be eliminated. This is unlike</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// the max trip count, which only guarantees that the backedge can be broken.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordtype">unsigned</span> TripCount = 0;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordtype">unsigned</span> TripMultiple = 1;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBlock : ExitingBlocks)</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> TC = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#abec0c616087c002528fcf80c6583eadd">getSmallConstantTripCount</a>(L, ExitingBlock))</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">if</span> (!TripCount || TC &lt; TripCount)</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        TripCount = TripMultiple = TC;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">if</span> (!TripCount) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">// If no exact trip count is known, determine the trip multiple of either</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// the loop latch or the single exiting block.</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">// TODO: Relax for multiple exits.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (!ExitingBlock || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(ExitingBlock))</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      ExitingBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">if</span> (ExitingBlock)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      TripMultiple = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a29ee697fe94374eae9689321e811f5e9">getSmallConstantTripMultiple</a>(L, ExitingBlock);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// If the loop contains a convergent operation, the prelude we&#39;d add</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="comment">// to do the first few instructions before we hit the unrolled loop</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// is unsafe -- it adds a control-flow dependency to the convergent</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// operation.  Therefore restrict remainder loop (try unrolling without).</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="comment">// TODO: This is quite conservative.  In practice, convergent_op()</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// is likely to be called unconditionally in the loop.  In this</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// case, the program would be ill-formed (on most architectures)</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// unless n were the same on all threads in a thread group.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">// Assuming n is the same on all threads, any kind of unrolling is</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// safe.  But currently llvm&#39;s notion of convergence isn&#39;t powerful</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// enough to express this.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a>)</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">AllowRemainder</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// Try to find the trip count upper bound if we cannot find the exact trip</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="comment">// count.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="keywordtype">unsigned</span> MaxTripCount = 0;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordtype">bool</span> MaxOrZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">if</span> (!TripCount) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    MaxTripCount = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a3cc216ff1aa29e15999df96770a870bf">getSmallConstantMaxTripCount</a>(L);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    MaxOrZero = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a57a6829dad387e7075a6325e3ec6ace5">isBackedgeTakenCountMaxOrZero</a>(L);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="comment">// computeUnrollCount() decides whether it is beneficial to use upper bound to</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// fully unroll the loop.</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordtype">bool</span> UseUpperBound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordtype">bool</span> IsCountSetExplicitly = <a class="code" href="namespacellvm.html#aaf3f6dd34ce3968d323a20d3a22e4545">computeUnrollCount</a>(</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    L, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, LI, &amp;AC, SE, EphValues, &amp;ORE, TripCount, MaxTripCount, MaxOrZero,</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      TripMultiple, LoopSize, UP, PP, UseUpperBound);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">if</span> (!UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="keywordflow">if</span> (PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a>) {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> == 1 &amp;&amp; <span class="stringliteral">&quot;Cannot perform peel and unroll in the same step&quot;</span>);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;PEELING loop %&quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with iteration count &quot;</span> &lt;&lt; PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> &lt;&lt; <span class="stringliteral">&quot;!\n&quot;</span>);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;Peeled&quot;</span>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(),</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; peeled loop by &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;PeelCount&quot;</span>, PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a>)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; iterations&quot;</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    });</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#afdb3eec2f46233c924c30c0838a3c8fe">peelLoop</a>(L, PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a>, LI, &amp;SE, DT, &amp;AC, PreserveLCSSA, VMap)) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <a class="code" href="namespacellvm.html#ae6bce7d8b2b4cdd3f548de6b5e05f9b3">simplifyLoopAfterUnroll</a>(L, <span class="keyword">true</span>, LI, &amp;SE, &amp;DT, &amp;AC, &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="comment">// If the loop was peeled, we already &quot;used up&quot; the profile information</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="comment">// we had, so we don&#39;t want to unroll or peel again.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="keywordflow">if</span> (PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">PeelProfiledIterations</a>)</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        L-&gt;<a class="code" href="classllvm_1_1Loop.html#ae27590daf21d575c9bb75c966fe256f2">setLoopAlreadyUnrolled</a>();</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1a17f29ed218b7407dfd14e9a3ec8bd011">LoopUnrollResult::PartiallyUnrolled</a>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="comment">// At this point, UP.Runtime indicates that run-time unrolling is allowed.</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="comment">// However, we only want to actually perform it if we don&#39;t know the trip</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">// count and the unroll count doesn&#39;t divide the known trip multiple.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">// TODO: This decision should probably be pushed up into</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// computeUnrollCount().</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> &amp;= TripCount == 0 &amp;&amp; TripMultiple % UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a> != 0;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">// Save loop properties before it is transformed.</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigLoopID = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="comment">// Unroll the loop.</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *RemainderLoop = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1">LoopUnrollResult</a> UnrollResult = <a class="code" href="namespacellvm.html#ad1bf56174fa0c9a2f271e84c9b45ac2c">UnrollLoop</a>(</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      L,</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      {UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">Force</a>, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a>, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#afaa4eb31d0f39aa8c7ac8d081a39fec5">AllowExpensiveTripCount</a>,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;       UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac0713be3d080bf7e023ddb524f6eabe7">UnrollRemainder</a>, ForgetAllSCEV},</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      LI, &amp;SE, &amp;DT, &amp;AC, &amp;<a class="code" href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">TTI</a>, &amp;ORE, PreserveLCSSA, &amp;RemainderLoop);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (UnrollResult == <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>)</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">if</span> (RemainderLoop) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    std::optional&lt;MDNode *&gt; RemainderLoopID =</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <a class="code" href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">makeFollowupLoopID</a>(OrigLoopID, {<a class="code" href="namespacellvm.html#a9e3f06a77c19d1098df61d28499fcf3b">LLVMLoopUnrollFollowupAll</a>,</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                                        <a class="code" href="namespacellvm.html#ac127703689b2c3771640f7fa800d61dc">LLVMLoopUnrollFollowupRemainder</a>});</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">if</span> (RemainderLoopID)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      RemainderLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(*RemainderLoopID);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keywordflow">if</span> (UnrollResult != <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1add722bdf19fff3e686f559790c6124d8">LoopUnrollResult::FullyUnrolled</a>) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    std::optional&lt;MDNode *&gt; NewLoopID =</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">makeFollowupLoopID</a>(OrigLoopID, {<a class="code" href="namespacellvm.html#a9e3f06a77c19d1098df61d28499fcf3b">LLVMLoopUnrollFollowupAll</a>,</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                                        <a class="code" href="namespacellvm.html#ac955f7402a9bb544b17efcff58f5a401">LLVMLoopUnrollFollowupUnrolled</a>});</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">if</span> (NewLoopID) {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(*NewLoopID);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="comment">// Do not setLoopAlreadyUnrolled if loop attributes have been specified</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="comment">// explicitly.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">return</span> UnrollResult;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  }</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// If loop has an unroll count pragma or unrolled by explicitly set count</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// mark loop as unrolled to prevent unrolling beyond that requested.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">if</span> (UnrollResult != <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1add722bdf19fff3e686f559790c6124d8">LoopUnrollResult::FullyUnrolled</a> &amp;&amp; IsCountSetExplicitly)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Loop.html#ae27590daf21d575c9bb75c966fe256f2">setLoopAlreadyUnrolled</a>();</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordflow">return</span> UnrollResult;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;}</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="keyword">class </span>LoopUnroll : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>; <span class="comment">// Pass ID, replacement for typeid</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keywordtype">int</span> OptLevel;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">  /// If false, use a cost model to determine whether unrolling of a loop is</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">  /// profitable. If true, only loops that explicitly request unrolling via</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">  /// metadata are considered. All other loops are skipped.</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> OnlyWhenForced;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">  /// If false, when SCEV is invalidated, only forget everything in the</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">  /// top-most loop (call forgetTopMostLoop), of the loop being processed.</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">  /// Otherwise, forgetAllLoops and rebuild when needed next.</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> ForgetAllSCEV;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  std::optional&lt;unsigned&gt; ProvidedCount;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  std::optional&lt;unsigned&gt; ProvidedThreshold;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  std::optional&lt;bool&gt; ProvidedAllowPartial;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  std::optional&lt;bool&gt; ProvidedRuntime;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  std::optional&lt;bool&gt; ProvidedUpperBound;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  std::optional&lt;bool&gt; ProvidedAllowPeeling;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  std::optional&lt;bool&gt; ProvidedAllowProfileBasedPeeling;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  std::optional&lt;unsigned&gt; ProvidedFullUnrollMaxCount;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  LoopUnroll(<span class="keywordtype">int</span> OptLevel = 2, <span class="keywordtype">bool</span> OnlyWhenForced = <span class="keyword">false</span>,</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;             <span class="keywordtype">bool</span> ForgetAllSCEV = <span class="keyword">false</span>,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;             std::optional&lt;unsigned&gt; Threshold = std::nullopt,</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;             std::optional&lt;unsigned&gt; Count = std::nullopt,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;             std::optional&lt;bool&gt; AllowPartial = std::nullopt,</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;             std::optional&lt;bool&gt; Runtime = std::nullopt,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;             std::optional&lt;bool&gt; UpperBound = std::nullopt,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;             std::optional&lt;bool&gt; AllowPeeling = std::nullopt,</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;             std::optional&lt;bool&gt; AllowProfileBasedPeeling = std::nullopt,</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;             std::optional&lt;unsigned&gt; ProvidedFullUnrollMaxCount = std::nullopt)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      : <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), OptLevel(OptLevel), OnlyWhenForced(OnlyWhenForced),</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        ForgetAllSCEV(ForgetAllSCEV), ProvidedCount(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(Count)),</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        ProvidedThreshold(Threshold), ProvidedAllowPartial(AllowPartial),</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        ProvidedRuntime(<a class="code" href="namespacellvm.html#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">Runtime</a>), ProvidedUpperBound(UpperBound),</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        ProvidedAllowPeeling(AllowPeeling),</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        ProvidedAllowProfileBasedPeeling(AllowProfileBasedPeeling),</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        ProvidedFullUnrollMaxCount(ProvidedFullUnrollMaxCount) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="namespacellvm.html#a1ae4cc6b0e03c93538ef094518fabd35">initializeLoopUnrollPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">if</span> (skipLoop(L))</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = *L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keyword">auto</span> &amp;DT = getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI = &amp;getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo();</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE = getAnalysis&lt;ScalarEvolutionWrapperPass&gt;().getSE();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> =</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keyword">auto</span> &amp;AC = getAnalysis&lt;AssumptionCacheTracker&gt;().getAssumptionCache(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="comment">// For the old PM, we can&#39;t use OptimizationRemarkEmitter as an analysis</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="comment">// pass.  Function analyses need to be preserved across loop transformations</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="comment">// but ORE cannot be preserved (see comment before the pass definition).</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordtype">bool</span> PreserveLCSSA = mustPreserveAnalysisID(<a class="code" href="namespacellvm.html#a3e3d3c6d4e33a4f5ca579ee7939f0349">LCSSAID</a>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1">LoopUnrollResult</a> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = <a class="code" href="LoopUnrollPass_8cpp.html#a0902a0ceb102cc66001a40cc148b310a">tryToUnrollLoop</a>(</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        L, DT, LI, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, AC, ORE, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, PreserveLCSSA, OptLevel,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        OnlyWhenForced, ForgetAllSCEV, ProvidedCount, ProvidedThreshold,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        ProvidedAllowPartial, ProvidedRuntime, ProvidedUpperBound,</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        ProvidedAllowPeeling, ProvidedAllowProfileBasedPeeling,</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        ProvidedFullUnrollMaxCount);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> (Result == <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1add722bdf19fff3e686f559790c6124d8">LoopUnrollResult::FullyUnrolled</a>)</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      LPM.<a class="code" href="classllvm_1_1LPPassManager.html#a8ef47cc6f59b91bf5a1392975366e758">markLoopAsDeleted</a>(*L);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> != <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">  /// This transformation requires natural loop information &amp; requires that</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">  /// loop preheaders be inserted into the CFG...</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>&gt;();</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="comment">// FIXME: Loop passes are required to preserve domtree, and for now we just</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="comment">// recreate dom info if anything gets unrolled.</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <a class="code" href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">getLoopAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;};</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">LoopUnroll::ID</a> = 0;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(LoopUnroll, <span class="stringliteral">&quot;loop-unroll&quot;</span>, <span class="stringliteral">&quot;Unroll loops&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>)</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>)</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LoopUnroll, &quot;<a class="code" href="lib_2Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a>-unroll&quot;, &quot;Unroll <a class="code" href="LoopInfo_8cpp.html#a49ae40a9c91d665793aaed656c26ca30">loops</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="namespacellvm.html#a5661ae57c57732f7f570b4a03f241e33"> 1455</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a5661ae57c57732f7f570b4a03f241e33">createLoopUnrollPass</a>(<span class="keywordtype">int</span> OptLevel, <span class="keywordtype">bool</span> OnlyWhenForced,</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                                 <span class="keywordtype">bool</span> ForgetAllSCEV, <span class="keywordtype">int</span> Threshold, <span class="keywordtype">int</span> Count,</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                                 <span class="keywordtype">int</span> AllowPartial, <span class="keywordtype">int</span> Runtime, <span class="keywordtype">int</span> UpperBound,</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                 <span class="keywordtype">int</span> AllowPeeling) {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// TODO: It would make more sense for this function to take the optionals</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="comment">// directly, but that&#39;s dangerous since it would silently break out of tree</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// callers.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LoopUnroll(</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      OptLevel, OnlyWhenForced, ForgetAllSCEV,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      Threshold == -1 ? std::nullopt : std::optional&lt;unsigned&gt;(Threshold),</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      Count == -1 ? std::nullopt : std::optional&lt;unsigned&gt;(Count),</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      AllowPartial == -1 ? std::nullopt : std::optional&lt;bool&gt;(AllowPartial),</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="namespacellvm.html#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">Runtime</a> == -1 ? std::nullopt : std::optional&lt;bool&gt;(<a class="code" href="namespacellvm.html#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">Runtime</a>),</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      UpperBound == -1 ? std::nullopt : std::optional&lt;bool&gt;(UpperBound),</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      AllowPeeling == -1 ? std::nullopt : std::optional&lt;bool&gt;(AllowPeeling));</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;}</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"><a class="line" href="namespacellvm.html#afcb78ada6323e9f418a372f0af5d66d8"> 1472</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#afcb78ada6323e9f418a372f0af5d66d8">llvm::createSimpleLoopUnrollPass</a>(<span class="keywordtype">int</span> OptLevel, <span class="keywordtype">bool</span> OnlyWhenForced,</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                                       <span class="keywordtype">bool</span> ForgetAllSCEV) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a5661ae57c57732f7f570b4a03f241e33">createLoopUnrollPass</a>(OptLevel, OnlyWhenForced, ForgetAllSCEV, -1, -1,</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                              0, 0, 0, 1);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;}</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopFullUnrollPass.html#aacf97677dabaa7e583a690244bde44ea"> 1478</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LoopFullUnrollPass.html#aacf97677dabaa7e583a690244bde44ea">LoopFullUnrollPass::run</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                                          <a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR,</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                                          <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;Updater) {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// For the new PM, we can&#39;t use OptimizationRemarkEmitter as an analysis</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// pass. Function analyses need to be preserved across loop transformations</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// but ORE cannot be preserved (see comment before the pass definition).</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// Keep track of the previous loop structure so we can identify new loops</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">// created by unrolling.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentL = L.<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>();</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Loop *, 4&gt;</a> OldLoops;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="keywordflow">if</span> (ParentL)</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    OldLoops.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ParentL-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af2f81059dc7566164b018aac6555eb1a">begin</a>(), ParentL-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a98eb0888f30e7a27151a7b02fa053205">end</a>());</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    OldLoops.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>.<a class="code" href="classllvm_1_1LoopInfoBase.html#ab447b41b9c51151b5c6ef497a60689ae">begin</a>(), AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>.<a class="code" href="classllvm_1_1LoopInfoBase.html#a4f728602e7d377829675f13446cf6647">end</a>());</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  std::string LoopName = std::string(L.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>());</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160; </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordtype">bool</span> Changed =</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <a class="code" href="LoopUnrollPass_8cpp.html#a0902a0ceb102cc66001a40cc148b310a">tryToUnrollLoop</a>(&amp;L, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">DT</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">SE</a>, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">TTI</a>, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">AC</a>, ORE,</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                      <span class="comment">/*BFI*/</span> <span class="keyword">nullptr</span>, <span class="comment">/*PSI*/</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                      <span class="comment">/*PreserveLCSSA*/</span> <span class="keyword">true</span>, OptLevel, OnlyWhenForced,</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                      ForgetSCEV, <span class="comment">/*Count*/</span> std::nullopt,</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                      <span class="comment">/*Threshold*/</span> std::nullopt, <span class="comment">/*AllowPartial*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                      <span class="comment">/*Runtime*/</span> <span class="keyword">false</span>, <span class="comment">/*UpperBound*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                      <span class="comment">/*AllowPeeling*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                      <span class="comment">/*AllowProfileBasedPeeling*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                      <span class="comment">/*FullUnrollMaxCount*/</span> std::nullopt) !=</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// The parent must not be damaged by unrolling!</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="keywordflow">if</span> (ParentL)</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    ParentL-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a2896fd505fc6356f4ad5b53bb5001a39">verifyLoop</a>();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// Unrolling can do several things to introduce new loops into a loop nest:</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// - Full unrolling clones child loops within the current loop but then</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">//   removes the current loop making all of the children appear to be new</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">//   sibling loops.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// When a new loop appears as a sibling loop after fully unrolling,</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="comment">// its nesting structure has fundamentally changed and we want to revisit</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="comment">// it to reflect that.</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// When unrolling has removed the current loop, we need to tell the</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// infrastructure that it is gone.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// Finally, we support a debugging/testing mode where we revisit child loops</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// as well. These are not expected to require further optimizations as either</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// they or the loop they were cloned from have been directly visited already.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// But the debugging mode allows us to check this assumption.</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordtype">bool</span> IsCurrentLoopValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Loop *, 4&gt;</a> SibLoops;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">if</span> (ParentL)</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    SibLoops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(ParentL-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af2f81059dc7566164b018aac6555eb1a">begin</a>(), ParentL-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a98eb0888f30e7a27151a7b02fa053205">end</a>());</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    SibLoops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>.<a class="code" href="classllvm_1_1LoopInfoBase.html#ab447b41b9c51151b5c6ef497a60689ae">begin</a>(), AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>.<a class="code" href="classllvm_1_1LoopInfoBase.html#a4f728602e7d377829675f13446cf6647">end</a>());</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">erase_if</a>(SibLoops, [&amp;](<a class="code" href="classllvm_1_1Loop.html">Loop</a> *SibLoop) {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span> (SibLoop == &amp;L) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      IsCurrentLoopValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// Otherwise erase the loop from the list if it was in the old loops.</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">return</span> OldLoops.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(SibLoop);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  });</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  Updater.<a class="code" href="classllvm_1_1LPMUpdater.html#ae95084eaa2138306765de7c711fa65b5">addSiblingLoops</a>(SibLoops);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160; </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keywordflow">if</span> (!IsCurrentLoopValid) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    Updater.<a class="code" href="classllvm_1_1LPMUpdater.html#ad898592a9fdc638d33b6b5cf0eba2bbe">markLoopAsDeleted</a>(L, LoopName);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// We can only walk child loops if the current loop remained valid.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopUnrollPass_8cpp.html#a461048a2b71f481f5b6c706fceb652d0">UnrollRevisitChildLoops</a>) {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      <span class="comment">// Walk *all* of the child loops.</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Loop *, 4&gt;</a> ChildLoops(L.<a class="code" href="classllvm_1_1LoopBase.html#af2f81059dc7566164b018aac6555eb1a">begin</a>(), L.<a class="code" href="classllvm_1_1LoopBase.html#a98eb0888f30e7a27151a7b02fa053205">end</a>());</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      Updater.<a class="code" href="classllvm_1_1LPMUpdater.html#ad76f37ff51a1cc6ecca63633f2247c2f">addChildLoops</a>(ChildLoops);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">getLoopPassPreservedAnalyses</a>();</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;}</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopUnrollPass.html#a62ed17cf8aa893362e6c3c1f6d8a0898"> 1564</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LoopUnrollPass.html#a62ed17cf8aa893362e6c3c1f6d8a0898">LoopUnrollPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                                      <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="keyword">auto</span> &amp;LI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// There are no loops in the function. Return before computing other expensive</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">// analyses.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a83d8036930a033b196409ced5c9409e5">empty</a>())</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keyword">auto</span> &amp;SE = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolutionAnalysis.html">ScalarEvolutionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keyword">auto</span> &amp;DT = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keyword">auto</span> &amp;AC = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AssumptionAnalysis.html">AssumptionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keyword">auto</span> &amp;ORE = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">OptimizationRemarkEmitterAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LAMProxy = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">LoopAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a> = &amp;LAMProxy-&gt;getManager();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keyword">auto</span> &amp;MAMProxy = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">ModuleAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI =</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      MAMProxy.getCachedResult&lt;<a class="code" href="classllvm_1_1ProfileSummaryAnalysis.html">ProfileSummaryAnalysis</a>&gt;(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = (PSI &amp;&amp; PSI-&gt;hasProfileSummary()) ?</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160; </div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">// The unroller requires loops to be in simplified form, and also needs LCSSA.</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="comment">// Since simplification may add new inner loops, it has to run before the</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">// legality and profitability checks. This means running the loop unroller</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// will simplify all loops, regardless of whether anything end up being</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="comment">// unrolled.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;L : LI) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    Changed |=</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <a class="code" href="namespacellvm.html#a0083a69883e0f97e111dbff064c60f42">simplifyLoop</a>(L, &amp;DT, &amp;LI, &amp;SE, &amp;AC, <span class="keyword">nullptr</span>, <span class="keyword">false</span> <span class="comment">/* PreserveLCSSA */</span>);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    Changed |= <a class="code" href="namespacellvm.html#a30e47ae014eb35bea24e45097c2bd731">formLCSSARecursively</a>(*L, DT, &amp;LI, &amp;SE);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">// Add the loop nests in the reverse order of LoopInfo. See method</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// declaration.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <a class="code" href="classllvm_1_1SmallPriorityWorklist.html">SmallPriorityWorklist&lt;Loop *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <a class="code" href="namespacellvm.html#ab7a106c600cf32852298d9041e8c8044">appendLoopsToWorklist</a>(LI, Worklist);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">empty</a>()) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="comment">// Because the LoopInfo stores the loops in RPO, we walk the worklist</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="comment">// from back to front so that we work forward across the CFG, which</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// for unrolling is only needed to get optimization remarks emitted in</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">// a forward order.</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L = *Worklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">pop_back_val</a>();</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentL = L.<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="comment">// Check if the profile summary indicates that the profiled application</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="comment">// has a huge working set size, in which case we disable peeling to avoid</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// bloating it further.</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    std::optional&lt;bool&gt; LocalAllowPeeling = UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a89f3cc58de97975474aec06d7c46b2fa">AllowPeeling</a>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">if</span> (PSI &amp;&amp; PSI-&gt;hasHugeWorkingSetSize())</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      LocalAllowPeeling = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    std::string LoopName = std::string(L.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>());</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="comment">// The API here is quite complex to call and we allow to select some</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="comment">// flavors of unrolling during construction time (by setting UnrollOpts).</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1">LoopUnrollResult</a> Result = <a class="code" href="LoopUnrollPass_8cpp.html#a0902a0ceb102cc66001a40cc148b310a">tryToUnrollLoop</a>(</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        &amp;L, DT, &amp;LI, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, AC, ORE, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, PSI,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="comment">/*PreserveLCSSA*/</span> <span class="keyword">true</span>, UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a0ffbb1b91937d258b118eccfd4fb5d74">OptLevel</a>, UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a1d7f4d26f7d8ccc72d9006b729e6a637">OnlyWhenForced</a>,</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a27976a17a9771b0dbbf007157226c33d">ForgetSCEV</a>, <span class="comment">/*Count*/</span> std::nullopt,</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="comment">/*Threshold*/</span> std::nullopt, UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a3533763e5a069304cac300d58aa3c335">AllowPartial</a>,</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a4e0d8e894c9a946cab90061f99a514d4">AllowRuntime</a>, UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#acd31f207713b86ad24694c320b1db3f0">AllowUpperBound</a>, LocalAllowPeeling,</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a85e15580034714afcf2519f689174b10">AllowProfileBasedPeeling</a>, UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a307cbe3aacadc70d64a8570be1394229">FullUnrollMaxCount</a>);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    Changed |= Result != <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a>;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="comment">// The parent must not be damaged by unrolling!</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">if</span> (Result != <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">LoopUnrollResult::Unmodified</a> &amp;&amp; ParentL)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      ParentL-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a2896fd505fc6356f4ad5b53bb5001a39">verifyLoop</a>();</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">// Clear any cached analysis results for L if we removed it completely.</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a> &amp;&amp; Result == <a class="code" href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1add722bdf19fff3e686f559790c6124d8">LoopUnrollResult::FullyUnrolled</a>)</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a4926331431f03253ee3ec8e6e3bb9d1c">clear</a>(L, LoopName);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">getLoopPassPreservedAnalyses</a>();</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopUnrollPass.html#ac318cdc3433689772c5cce5abdb39472"> 1650</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopUnrollPass.html#ac318cdc3433689772c5cce5abdb39472">LoopUnrollPass::printPipeline</a>(</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>)&gt; MapClassName2PassName) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1PassInfoMixin.html">PassInfoMixin&lt;LoopUnrollPass&gt;</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classllvm_1_1LoopUnrollPass.html#ac318cdc3433689772c5cce5abdb39472">printPipeline</a>(</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, MapClassName2PassName);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">if</span> (UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a3533763e5a069304cac300d58aa3c335">AllowPartial</a> != std::nullopt)</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (*UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a3533763e5a069304cac300d58aa3c335">AllowPartial</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;partial;&quot;</span>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="keywordflow">if</span> (UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a89f3cc58de97975474aec06d7c46b2fa">AllowPeeling</a> != std::nullopt)</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (*UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a89f3cc58de97975474aec06d7c46b2fa">AllowPeeling</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;peeling;&quot;</span>;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">if</span> (UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a4e0d8e894c9a946cab90061f99a514d4">AllowRuntime</a> != std::nullopt)</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (*UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a4e0d8e894c9a946cab90061f99a514d4">AllowRuntime</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;runtime;&quot;</span>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="keywordflow">if</span> (UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#acd31f207713b86ad24694c320b1db3f0">AllowUpperBound</a> != std::nullopt)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (*UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#acd31f207713b86ad24694c320b1db3f0">AllowUpperBound</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;upperbound;&quot;</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keywordflow">if</span> (UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a85e15580034714afcf2519f689174b10">AllowProfileBasedPeeling</a> != std::nullopt)</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (*UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a85e15580034714afcf2519f689174b10">AllowProfileBasedPeeling</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;profile-peeling;&quot;</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordflow">if</span> (UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a307cbe3aacadc70d64a8570be1394229">FullUnrollMaxCount</a> != std::nullopt)</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;full-unroll-max=&quot;</span> &lt;&lt; UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a307cbe3aacadc70d64a8570be1394229">FullUnrollMaxCount</a> &lt;&lt; <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;O&quot;</span> &lt;&lt; UnrollOpts.<a class="code" href="structllvm_1_1LoopUnrollOptions.html#a0ffbb1b91937d258b118eccfd4fb5d74">OptLevel</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a7d9c8b643475dfdeab1c6861e7e6317e"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a7d9c8b643475dfdeab1c6861e7e6317e">FlatLoopTripCountThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; FlatLoopTripCountThreshold(&quot;flat-loop-tripcount-threshold&quot;, cl::init(5), cl::Hidden, cl::desc(&quot;If the runtime tripcount for the loop is lower than the &quot; &quot;threshold, the loop is considered as flat and will be less &quot; &quot;aggressively unrolled.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1OuterAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1OuterAnalysisManagerProxy.html">llvm::OuterAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;inner&quot; IR unit that provides access to an analysis manager over a &quot;outer&quot; IR uni...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l01056">PassManager.h:1056</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_acc2a7ecc1c0355035c91448ed850390f"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">llvm::TargetTransformInfo::UnrollingPreferences::BEInsns</a></div><div class="ttdeci">unsigned BEInsns</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00490">TargetTransformInfo.h:490</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a54b17420c467d2bb9edd2f79e54d2b6f"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a54b17420c467d2bb9edd2f79e54d2b6f">llvm::TargetTransformInfo::UnrollingPreferences::PartialOptSizeThreshold</a></div><div class="ttdeci">unsigned PartialOptSizeThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop when optimizing for size, like OptSizeThreshold,...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00469">TargetTransformInfo.h:469</a></div></div>
<div class="ttc" id="anamespacellvm_html_a868145c1795173f9642f99c354f91a7d"><div class="ttname"><a href="namespacellvm.html#a868145c1795173f9642f99c354f91a7d">llvm::hasUnrollTransformation</a></div><div class="ttdeci">TransformationMode hasUnrollTransformation(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00352">LoopUtils.cpp:352</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a4f441813911ba060dc9457d93d289527"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a4f441813911ba060dc9457d93d289527">unrollCountPragmaValue</a></div><div class="ttdeci">static unsigned unrollCountPragmaValue(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00719">LoopUnrollPass.cpp:719</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ae31307b4efc5ce5311752041e7ff7cdc"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">llvm::TargetTransformInfo::UnrollingPreferences::Runtime</a></div><div class="ttdeci">bool Runtime</div><div class="ttdoc">Allow runtime unrolling (unrolling of loops to expand the size of the loop body even when the number ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00497">TargetTransformInfo.h:497</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkMissed_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkMissed.html">llvm::OptimizationRemarkMissed</a></div><div class="ttdoc">Diagnostic information for missed-optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00734">DiagnosticInfo.h:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">llvm::TargetTransformInfo::TargetCostKind</a></div><div class="ttdeci">TargetCostKind</div><div class="ttdoc">The kind of cost model.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00241">TargetTransformInfo.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolutionAnalysis_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolutionAnalysis.html">llvm::ScalarEvolutionAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the ScalarEvolution for a function.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02219">ScalarEvolution.h:2219</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ae28e05c1aac288aa7e4a49d858b35c46"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">llvm::TargetTransformInfo::UnrollingPreferences::PartialThreshold</a></div><div class="ttdeci">unsigned PartialThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop, like Threshold, but used for partial/runtime unrolling (set...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00465">TargetTransformInfo.h:465</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aLoopSimplify_8h_html"><div class="ttname"><a href="LoopSimplify_8h.html">LoopSimplify.h</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_ae217227e871881bbe884af5158998c21"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#ae217227e871881bbe884af5158998c21">shouldFullUnroll</a></div><div class="ttdeci">static std::optional&lt; unsigned &gt; shouldFullUnroll(Loop *L, const TargetTransformInfo &amp;TTI, DominatorTree &amp;DT, ScalarEvolution &amp;SE, const SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues, const unsigned FullUnrollTripCount, const UnrollCostEstimator UCE, const TargetTransformInfo::UnrollingPreferences &amp;UP)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00803">LoopUnrollPass.cpp:803</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac77dbedcfd916a5c9b58e753b2678a98"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">llvm::TargetTransformInfo::getInstructionCost</a></div><div class="ttdeci">InstructionCost getInstructionCost(const User *U, ArrayRef&lt; const Value * &gt; Operands, TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the cost of a given IR user when lowered.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00230">TargetTransformInfo.cpp:230</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a4decf28de1615d8ab7bafa9785e740b6"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a4decf28de1615d8ab7bafa9785e740b6">analyzeLoopUnrollCost</a></div><div class="ttdeci">static std::optional&lt; EstimatedUnrollCost &gt; analyzeLoopUnrollCost(const Loop *L, unsigned TripCount, DominatorTree &amp;DT, ScalarEvolution &amp;SE, const SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues, const TargetTransformInfo &amp;TTI, unsigned MaxUnrolledLoopSize, unsigned MaxIterationsCountToAnalyze)</div><div class="ttdoc">Figure out if the loop is worth full unrolling.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00346">LoopUnrollPass.cpp:346</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a902b4712394a3b3450893634b3302893"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">llvm::LoopStandardAnalysisResults::AC</a></div><div class="ttdeci">AssumptionCache &amp; AC</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00053">LoopAnalysisManager.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnrolledInstAnalyzer_html"><div class="ttname"><a href="classllvm_1_1UnrolledInstAnalyzer.html">llvm::UnrolledInstAnalyzer</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollAnalyzer_8h_source.html#l00042">LoopUnrollAnalyzer.h:42</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a18806cdb72c45552e5bea3a77109aea7"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a18806cdb72c45552e5bea3a77109aea7">shouldPragmaUnroll</a></div><div class="ttdeci">static std::optional&lt; unsigned &gt; shouldPragmaUnroll(Loop *L, const PragmaInfo &amp;PInfo, const unsigned TripMultiple, const unsigned TripCount, const UnrollCostEstimator UCE, const TargetTransformInfo::UnrollingPreferences &amp;UP)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00776">LoopUnrollPass.cpp:776</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_adc0220c27b9cd27e22c391378ed1244b"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#adc0220c27b9cd27e22c391378ed1244b">UnrollFullMaxCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollFullMaxCount(&quot;unroll-full-max-count&quot;, cl::Hidden, cl::desc(&quot;Set the max unroll count for full unrolling, for testing purposes&quot;))</div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a625bc7a81808cf7087f2535ee90eef9f"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a625bc7a81808cf7087f2535ee90eef9f">UnrollPartialThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollPartialThreshold(&quot;unroll-partial-threshold&quot;, cl::Hidden, cl::desc(&quot;The cost threshold for partial loop unrolling&quot;))</div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a0e3eba5cd35140f30d54eb8ef1fb0215"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a0e3eba5cd35140f30d54eb8ef1fb0215">llvm::TargetTransformInfo::UnrollingPreferences::MaxCount</a></div><div class="ttdeci">unsigned MaxCount</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00481">TargetTransformInfo.h:481</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a088d219b77b18a231ee48de6b15d1f9a"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a088d219b77b18a231ee48de6b15d1f9a">getUnrollMetadataForLoop</a></div><div class="ttdeci">static MDNode * getUnrollMetadataForLoop(const Loop *L, StringRef Name)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00695">LoopUnrollPass.cpp:695</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="astructllvm_1_1PassInfoMixin_html"><div class="ttname"><a href="structllvm_1_1PassInfoMixin.html">llvm::PassInfoMixin&lt; LoopUnrollPass &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a29ee697fe94374eae9689321e811f5e9"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a29ee697fe94374eae9689321e811f5e9">llvm::ScalarEvolution::getSmallConstantTripMultiple</a></div><div class="ttdeci">unsigned getSmallConstantTripMultiple(const Loop *L, const SCEV *ExitCount)</div><div class="ttdoc">Returns the largest constant divisor of the trip count as a normal unsigned value,...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08261">ScalarEvolution.cpp:8261</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0b2ca98dc28c61793ff5c90d23e5f14e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00197">DenseMap.h:197</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopUnrollPass_html_ac318cdc3433689772c5cce5abdb39472"><div class="ttname"><a href="classllvm_1_1LoopUnrollPass.html#ac318cdc3433689772c5cce5abdb39472">llvm::LoopUnrollPass::printPipeline</a></div><div class="ttdeci">void printPipeline(raw_ostream &amp;OS, function_ref&lt; StringRef(StringRef)&gt; MapClassName2PassName)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l01650">LoopUnrollPass.cpp:1650</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1b8329ea8794c1e6fa1294a1e5a463dd"><div class="ttname"><a href="namespacellvm.html#a1b8329ea8794c1e6fa1294a1e5a463dd">llvm::computePeelCount</a></div><div class="ttdeci">void computePeelCount(Loop *L, unsigned LoopSize, TargetTransformInfo::PeelingPreferences &amp;PP, unsigned TripCount, DominatorTree &amp;DT, ScalarEvolution &amp;SE, AssumptionCache *AC=nullptr, unsigned Threshold=UINT_MAX)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00472">LoopPeel.cpp:472</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a85e15580034714afcf2519f689174b10"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a85e15580034714afcf2519f689174b10">llvm::LoopUnrollOptions::AllowProfileBasedPeeling</a></div><div class="ttdeci">std::optional&lt; bool &gt; AllowProfileBasedPeeling</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00066">LoopUnrollPass.h:66</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html">llvm::CodeMetrics</a></div><div class="ttdoc">Utility to calculate the size and a few similar metrics for a set of basic blocks.</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00031">CodeMetrics.h:31</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a461048a2b71f481f5b6c706fceb652d0"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a461048a2b71f481f5b6c706fceb652d0">UnrollRevisitChildLoops</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollRevisitChildLoops(&quot;unroll-revisit-child-loops&quot;, cl::Hidden, cl::desc(&quot;Enqueue and re-visit child loops in the loop PM after unrolling. &quot; &quot;This shouldn't typically be needed as child loops (or their &quot; &quot;clones) were already visited.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a56034ec173ce8feff8568c0e29462094"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a56034ec173ce8feff8568c0e29462094">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; ValueT &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00179">DenseSet.h:179</a></div></div>
<div class="ttc" id="aclassUnrollCostEstimator_html_a14fdcbdab931169b1c158f6b4cd932f7"><div class="ttname"><a href="classUnrollCostEstimator.html#a14fdcbdab931169b1c158f6b4cd932f7">UnrollCostEstimator::getUnrolledLoopSize</a></div><div class="ttdeci">uint64_t getUnrolledLoopSize(const TargetTransformInfo::UnrollingPreferences &amp;UP, const unsigned CountOverwrite=0) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00762">LoopUnrollPass.cpp:762</a></div></div>
<div class="ttc" id="aSizeOpts_8h_html"><div class="ttname"><a href="SizeOpts_8h.html">SizeOpts.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac127703689b2c3771640f7fa800d61dc"><div class="ttname"><a href="namespacellvm.html#ac127703689b2c3771640f7fa800d61dc">llvm::LLVMLoopUnrollFollowupRemainder</a></div><div class="ttdeci">const char *const LLVMLoopUnrollFollowupRemainder</div><div class="ttdef"><b>Definition:</b> <a href="UnrollLoop_8h_source.html#l00045">UnrollLoop.h:45</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a615131659002c10601eef598d42d025e"><div class="ttname"><a href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">llvm::Loop::getStartLoc</a></div><div class="ttdeci">DebugLoc getStartLoc() const</div><div class="ttdoc">Return the debug location of the start of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00631">LoopInfo.cpp:631</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a47df9ca203042ef85332754224d91218"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a47df9ca203042ef85332754224d91218">hasUnrollFullPragma</a></div><div class="ttdeci">static bool hasUnrollFullPragma(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00702">LoopUnrollPass.cpp:702</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a83395d28f9c1d9063aa6d9eb40dd2e7a"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a83395d28f9c1d9063aa6d9eb40dd2e7a">llvm::TargetTransformInfo::UnrollingPreferences::UnrollAndJamInnerLoopThreshold</a></div><div class="ttdeci">unsigned UnrollAndJamInnerLoopThreshold</div><div class="ttdoc">Threshold for unroll and jam, for inner loop size.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00516">TargetTransformInfo.h:516</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ac0713be3d080bf7e023ddb524f6eabe7"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac0713be3d080bf7e023ddb524f6eabe7">llvm::TargetTransformInfo::UnrollingPreferences::UnrollRemainder</a></div><div class="ttdeci">bool UnrollRemainder</div><div class="ttdoc">Allow unrolling of all the iterations of the runtime loop remainder.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00509">TargetTransformInfo.h:509</a></div></div>
<div class="ttc" id="anamespacellvm_html_a92caae34bfacc63bda0f23d5d005a89e"><div class="ttname"><a href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">llvm::getLoopAnalysisUsage</a></div><div class="ttdeci">void getLoopAnalysisUsage(AnalysisUsage &amp;AU)</div><div class="ttdoc">Helper to consistently add the set of standard passes to a loop pass's AnalysisUsage.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00141">LoopUtils.cpp:141</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a19cc5df79c699ab1e137118b8c472a9e"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">llvm::TargetTransformInfo::UnrollingPreferences::Count</a></div><div class="ttdeci">unsigned Count</div><div class="ttdoc">A forced unrolling factor (the number of concatenated bodies of the original loop in the unrolled loo...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00474">TargetTransformInfo.h:474</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">llvm::TargetTransformInfo::TCK_CodeSize</a></div><div class="ttdeci">@ TCK_CodeSize</div><div class="ttdoc">Instruction code size.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00244">TargetTransformInfo.h:244</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1ae4cc6b0e03c93538ef094518fabd35"><div class="ttname"><a href="namespacellvm.html#a1ae4cc6b0e03c93538ef094518fabd35">llvm::initializeLoopUnrollPass</a></div><div class="ttdeci">void initializeLoopUnrollPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_af01349dac5ea8d7fc1d5bedcc82a17b8"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">llvm::TargetTransformInfo::UnrollingPreferences::Partial</a></div><div class="ttdeci">bool Partial</div><div class="ttdoc">Allow partial unrolling (unrolling of loops to expand the size of the loop body, not only to eliminat...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00493">TargetTransformInfo.h:493</a></div></div>
<div class="ttc" id="anamespacellvm_html_a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de"><div class="ttname"><a href="namespacellvm.html#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">llvm::AsanDetectStackUseAfterReturnMode::Runtime</a></div><div class="ttdeci">@ Runtime</div><div class="ttdoc">Detect stack use after return if not disabled runtime with (ASAN_OPTIONS=detect_stack_use_after_retur...</div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a27976a17a9771b0dbbf007157226c33d"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a27976a17a9771b0dbbf007157226c33d">llvm::LoopUnrollOptions::ForgetSCEV</a></div><div class="ttdeci">const bool ForgetSCEV</div><div class="ttdoc">If true, forget all loops when unrolling.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00078">LoopUnrollPass.h:78</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">llvm::TargetTransformInfo::PeelingPreferences</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00547">TargetTransformInfo.h:547</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html">llvm::LoopStandardAnalysisResults</a></div><div class="ttdoc">The adaptor from a function pass to a loop pass computes these analyses and makes them available to t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00051">LoopAnalysisManager.h:51</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ac9d35cceaeac03c999997e0b4d3ebcb6"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ac9d35cceaeac03c999997e0b4d3ebcb6">llvm::TargetTransformInfo::UnrollingPreferences::FullUnrollMaxCount</a></div><div class="ttdeci">unsigned FullUnrollMaxCount</div><div class="ttdoc">Set the maximum unrolling factor for full unrolling.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00485">TargetTransformInfo.h:485</a></div></div>
<div class="ttc" id="anamespacellvm_html_a30e47ae014eb35bea24e45097c2bd731"><div class="ttname"><a href="namespacellvm.html#a30e47ae014eb35bea24e45097c2bd731">llvm::formLCSSARecursively</a></div><div class="ttdeci">bool formLCSSARecursively(Loop &amp;L, const DominatorTree &amp;DT, const LoopInfo *LI, ScalarEvolution *SE)</div><div class="ttdoc">Put a loop nest into LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LCSSA_8cpp_source.html#l00410">LCSSA.cpp:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af2f81059dc7566164b018aac6555eb1a"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af2f81059dc7566164b018aac6555eb1a">llvm::LoopBase::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00171">LoopInfo.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">llvm::MCID::Convergent</a></div><div class="ttdeci">@ Convergent</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00185">MCInstrDesc.h:185</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aaa96df870a1b3d7ffc56bec3eb0b0cff"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">llvm::LoopStandardAnalysisResults::DT</a></div><div class="ttdeci">DominatorTree &amp; DT</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00054">LoopAnalysisManager.h:54</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a2703b0874899c598d0eea9660ed007bd"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a2703b0874899c598d0eea9660ed007bd">UnrollMaxPercentThresholdBoost</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollMaxPercentThresholdBoost(&quot;unroll-max-percent-threshold-boost&quot;, cl::init(400), cl::Hidden, cl::desc(&quot;The maximum 'boost' (represented as a percentage &gt;= 100) applied &quot; &quot;to the threshold when aggressively unrolling a loop due to the &quot; &quot;dynamic cost savings. If completely unrolling a loop will reduce &quot; &quot;the total runtime from X to Y, we boost the loop unroll &quot; &quot;threshold to DefaultThreshold*std::min(MaxPercentThresholdBoost, &quot; &quot;X/Y). This limit avoids excessive code bloat.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a007d1271341269538628d304ef34970d"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a007d1271341269538628d304ef34970d">UnrollThresholdDefault</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollThresholdDefault(&quot;unroll-threshold-default&quot;, cl::init(150), cl::Hidden, cl::desc(&quot;Default threshold (max size of unrolled &quot; &quot;loop), used in all but O3 optimizations&quot;))</div></div>
<div class="ttc" id="aLoopInfo_8cpp_html_a49ae40a9c91d665793aaed656c26ca30"><div class="ttname"><a href="LoopInfo_8cpp.html#a49ae40a9c91d665793aaed656c26ca30">loops</a></div><div class="ttdeci">loops</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01177">LoopInfo.cpp:1177</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_afaa4eb31d0f39aa8c7ac8d081a39fec5"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#afaa4eb31d0f39aa8c7ac8d081a39fec5">llvm::TargetTransformInfo::UnrollingPreferences::AllowExpensiveTripCount</a></div><div class="ttdeci">bool AllowExpensiveTripCount</div><div class="ttdoc">Allow emitting expensive instructions (such as divisions) when computing the trip count of a loop for...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00502">TargetTransformInfo.h:502</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0f0d66fa63bebb53ddd51f1cc4def0f8"><div class="ttname"><a href="namespacellvm.html#a0f0d66fa63bebb53ddd51f1cc4def0f8">llvm::isEqual</a></div><div class="ttdeci">bool isEqual(const GCNRPTracker::LiveRegSet &amp;S1, const GCNRPTracker::LiveRegSet &amp;S2)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00021">GCNRegPressure.cpp:21</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="alib_2Analysis_2README_8txt_html_a01d2af4eee7c40485a0ce3683a2e907a"><div class="ttname"><a href="lib_2Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is&lt; loop &gt; Outside the loop</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Analysis_2README_8txt_source.html#l00008">README.txt:8</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_aa4068e37ec583962685e3567dc102ae5"><div class="ttname"><a href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">llvm::MDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Return number of MDNode operands.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01297">Metadata.h:1297</a></div></div>
<div class="ttc" id="aLoopAnalysisManager_8h_html"><div class="ttname"><a href="LoopAnalysisManager_8h.html">LoopAnalysisManager.h</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a235a94f9bb6716e557601149ca0fb534"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a235a94f9bb6716e557601149ca0fb534">UnrollCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollCount(&quot;unroll-count&quot;, cl::Hidden, cl::desc(&quot;Use this unroll count for all loops including those with &quot; &quot;unroll_count pragma values, for testing purposes&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a25f5cd1eed2a2102d7a012dbc5c08e1a"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a25f5cd1eed2a2102d7a012dbc5c08e1a">llvm::TargetTransformInfo::getUnrollingPreferences</a></div><div class="ttdeci">void getUnrollingPreferences(Loop *L, ScalarEvolution &amp;, UnrollingPreferences &amp;UP, OptimizationRemarkEmitter *ORE) const</div><div class="ttdoc">Get target-customized preferences for the generic loop unrolling transformation.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00342">TargetTransformInfo.cpp:342</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_af546274b11b5fa0b126dc7f3e76966ce"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#af546274b11b5fa0b126dc7f3e76966ce">UnrollThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollThreshold(&quot;unroll-threshold&quot;, cl::Hidden, cl::desc(&quot;The cost threshold for loop unrolling&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a1d7f4d26f7d8ccc72d9006b729e6a637"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a1d7f4d26f7d8ccc72d9006b729e6a637">llvm::LoopUnrollOptions::OnlyWhenForced</a></div><div class="ttdeci">bool OnlyWhenForced</div><div class="ttdoc">If false, use a cost model to determine whether unrolling of a loop is profitable.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00073">LoopUnrollPass.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a8cd802dcaed35e1f28ea3cbe4af4eff5"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a8cd802dcaed35e1f28ea3cbe4af4eff5">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00174">DenseSet.h:174</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aCodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a62733c3335a87750623dbfc5b3ae4f6c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const</div><div class="ttdoc">Return the parent loop if it exists or nullptr for top level loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00114">LoopInfo.h:114</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3e837c0d2a0521b4a4680071cac0dcbac3977ea14dd68d93d147c91a34de4bb3"><div class="ttname"><a href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbac3977ea14dd68d93d147c91a34de4bb3">llvm::TM_Enable</a></div><div class="ttdeci">@ TM_Enable</div><div class="ttdoc">The transformation should be applied without considering a cost model.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00273">LoopUtils.h:273</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb4e0bba417ccd05efb694c13e0ae2b0"><div class="ttname"><a href="namespacellvm.html#acb4e0bba417ccd05efb694c13e0ae2b0">llvm::ApproximateLoopSize</a></div><div class="ttdeci">InstructionCost ApproximateLoopSize(const Loop *L, unsigned &amp;NumCalls, bool &amp;NotDuplicatable, bool &amp;Convergent, const TargetTransformInfo &amp;TTI, const SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues, unsigned BEInsns)</div><div class="ttdoc">ApproximateLoopSize - Approximate the size of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00666">LoopUnrollPass.cpp:666</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html_a89c02eecae37f89bf86f71336630858d"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">llvm::TargetTransformInfo::PeelingPreferences::PeelProfiledIterations</a></div><div class="ttdeci">bool PeelProfiledIterations</div><div class="ttdoc">Allow peeling basing on profile.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00560">TargetTransformInfo.h:560</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3af72f14ea20f2c762c751d2d49e5ea3"><div class="ttname"><a href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a></div><div class="ttdeci">bool shouldOptimizeForSize(const MachineFunction *MF, ProfileSummaryInfo *PSI, const MachineBlockFrequencyInfo *BFI, PGSOQueryType QueryType=PGSOQueryType::Other)</div><div class="ttdoc">Returns true if machine function MF is suggested to be size-optimized based on the profile.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSizeOpts_8cpp_source.html#l00183">MachineSizeOpts.cpp:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ae27590daf21d575c9bb75c966fe256f2"><div class="ttname"><a href="classllvm_1_1Loop.html#ae27590daf21d575c9bb75c966fe256f2">llvm::Loop::setLoopAlreadyUnrolled</a></div><div class="ttdeci">void setLoopAlreadyUnrolled()</div><div class="ttdoc">Add llvm.loop.unroll.disable to this loop's loop id metadata.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00537">LoopInfo.cpp:537</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="anamespacellvm_html_af455c80b53029287f35a7e3441eed512"><div class="ttname"><a href="namespacellvm.html#af455c80b53029287f35a7e3441eed512">llvm::GetUnrollMetadata</a></div><div class="ttdeci">MDNode * GetUnrollMetadata(MDNode *LoopID, StringRef Name)</div><div class="ttdoc">Given an llvm.loop loop id metadata node, returns the loop hint metadata node with the given name (fo...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnroll_8cpp_source.html#l00901">LoopUnroll.cpp:901</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a181a0f298bf648abcfc8f10215ad7b2e"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a181a0f298bf648abcfc8f10215ad7b2e">UnrollMaxUpperBound</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollMaxUpperBound(&quot;unroll-max-upperbound&quot;, cl::init(8), cl::Hidden, cl::desc(&quot;The max of trip count upper bound that is considered in unrolling&quot;))</div></div>
<div class="ttc" id="aInlineOrder_8cpp_html_a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6"><div class="ttname"><a href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">InlinePriorityMode::Cost</a></div><div class="ttdeci">@ Cost</div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a4217ba2e3d1295f8e9e6b49cef2a8b76"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">llvm::TargetTransformInfo::UnrollingPreferences::Force</a></div><div class="ttdeci">bool Force</div><div class="ttdoc">Apply loop unroll on any kind of loop (mainly to loops that fail runtime unrolling).</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00505">TargetTransformInfo.h:505</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00536">README.txt:536</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a4926331431f03253ee3ec8e6e3bb9d1c"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a4926331431f03253ee3ec8e6e3bb9d1c">llvm::AnalysisManager::clear</a></div><div class="ttdeci">void clear(IRUnitT &amp;IR, llvm::StringRef Name)</div><div class="ttdoc">Clear any cached analysis results for a single unit of IR.</div><div class="ttdef"><b>Definition:</b> <a href="PassManagerImpl_8h_source.html#l00036">PassManagerImpl.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac955f7402a9bb544b17efcff58f5a401"><div class="ttname"><a href="namespacellvm.html#ac955f7402a9bb544b17efcff58f5a401">llvm::LLVMLoopUnrollFollowupUnrolled</a></div><div class="ttdeci">const char *const LLVMLoopUnrollFollowupUnrolled</div><div class="ttdef"><b>Definition:</b> <a href="UnrollLoop_8h_source.html#l00043">UnrollLoop.h:43</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_ab2cdbfa345b54258773128fd1e77ce4e"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#ab2cdbfa345b54258773128fd1e77ce4e">UnrollAllowRemainder</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollAllowRemainder(&quot;unroll-allow-remainder&quot;, cl::Hidden, cl::desc(&quot;Allow generation of a loop remainder (extra iterations) &quot; &quot;when unrolling a loop.&quot;))</div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a98eb0888f30e7a27151a7b02fa053205"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a98eb0888f30e7a27151a7b02fa053205">llvm::LoopBase::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00172">LoopInfo.h:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a40f34cc77d2b3bc73384f535c8101858"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">llvm::LoopBase::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00195">LoopInfo.h:195</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a0902a0ceb102cc66001a40cc148b310a"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a0902a0ceb102cc66001a40cc148b310a">tryToUnrollLoop</a></div><div class="ttdeci">static LoopUnrollResult tryToUnrollLoop(Loop *L, DominatorTree &amp;DT, LoopInfo *LI, ScalarEvolution &amp;SE, const TargetTransformInfo &amp;TTI, AssumptionCache &amp;AC, OptimizationRemarkEmitter &amp;ORE, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, bool PreserveLCSSA, int OptLevel, bool OnlyWhenForced, bool ForgetAllSCEV, std::optional&lt; unsigned &gt; ProvidedCount, std::optional&lt; unsigned &gt; ProvidedThreshold, std::optional&lt; bool &gt; ProvidedAllowPartial, std::optional&lt; bool &gt; ProvidedRuntime, std::optional&lt; bool &gt; ProvidedUpperBound, std::optional&lt; bool &gt; ProvidedAllowPeeling, std::optional&lt; bool &gt; ProvidedAllowProfileBasedPeeling, std::optional&lt; unsigned &gt; ProvidedFullUnrollMaxCount)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l01123">LoopUnrollPass.cpp:1123</a></div></div>
<div class="ttc" id="aDenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ab826709c552acec43be43f958b750105"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ab826709c552acec43be43f958b750105">llvm::TargetTransformInfo::UnrollingPreferences::MaxIterationsCountToAnalyze</a></div><div class="ttdeci">unsigned MaxIterationsCountToAnalyze</div><div class="ttdoc">Don't allow loop unrolling to simulate more than this number of iterations when checking full unroll ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00519">TargetTransformInfo.h:519</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae6bce7d8b2b4cdd3f548de6b5e05f9b3"><div class="ttname"><a href="namespacellvm.html#ae6bce7d8b2b4cdd3f548de6b5e05f9b3">llvm::simplifyLoopAfterUnroll</a></div><div class="ttdeci">void simplifyLoopAfterUnroll(Loop *L, bool SimplifyIVs, LoopInfo *LI, ScalarEvolution *SE, DominatorTree *DT, AssumptionCache *AC, const TargetTransformInfo *TTI)</div><div class="ttdoc">Perform some cleanup and simplifications on loops after unrolling.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnroll_8cpp_source.html#l00215">LoopUnroll.cpp:215</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_abbdf27d466fda1df8f9ce6f256026cce"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abbdf27d466fda1df8f9ce6f256026cce">llvm::TargetTransformInfo::UnrollingPreferences::UnrollAndJam</a></div><div class="ttdeci">bool UnrollAndJam</div><div class="ttdoc">Allow unroll and jam. Used to enable unroll and jam for the target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00511">TargetTransformInfo.h:511</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a2896fd505fc6356f4ad5b53bb5001a39"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a2896fd505fc6356f4ad5b53bb5001a39">llvm::LoopBase::verifyLoop</a></div><div class="ttdeci">void verifyLoop() const</div><div class="ttdoc">Verify loop structure.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00302">LoopInfoImpl.h:302</a></div></div>
<div class="ttc" id="anamespacellvm_html_aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb"><div class="ttname"><a href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">llvm::PGSOQueryType::IRPass</a></div><div class="ttdeci">@ IRPass</div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a46880fab7a9d5bd439725f2acc59b80d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">llvm::LoopBase::getExitingBlocks</a></div><div class="ttdeci">void getExitingBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitingBlocks) const</div><div class="ttdoc">Return all blocks inside the loop that have successors outside of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00033">LoopInfoImpl.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1Option_html_a2dc75fafb68e7669e776e19da7857cdf"><div class="ttname"><a href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">llvm::cl::Option::getNumOccurrences</a></div><div class="ttdeci">int getNumOccurrences() const</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00401">CommandLine.h:401</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html_a7e174506b52ad46ea1f746a7f727d999"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">llvm::CodeMetrics::collectEphemeralValues</a></div><div class="ttdeci">static void collectEphemeralValues(const Loop *L, AssumptionCache *AC, SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues)</div><div class="ttdoc">Collect a loop's ephemeral values (those used only by an assume or similar intrinsics in the loop).</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00070">CodeMetrics.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00076">LoopPass.h:76</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_adf6f53d7652b471c995b7d10f3dd2729"><div class="ttname"><a href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const</div><div class="ttdoc">If getExitingBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00048">LoopInfoImpl.h:48</a></div></div>
<div class="ttc" id="aTransforms_2Utils_8h_html"><div class="ttname"><a href="Transforms_2Utils_8h.html">Utils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a917a64b00c1745fd0c78c2b2320cd4ad"><div class="ttname"><a href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">llvm::Loop::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00891">LoopInfo.h:891</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c861ddf753ab3690437dceaadf5c7e1add722bdf19fff3e686f559790c6124d8"><div class="ttname"><a href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1add722bdf19fff3e686f559790c6124d8">llvm::LoopUnrollResult::FullyUnrolled</a></div><div class="ttdeci">@ FullyUnrolled</div><div class="ttdoc">The loop was fully unrolled into straight-line code.</div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_afcb78ada6323e9f418a372f0af5d66d8"><div class="ttname"><a href="namespacellvm.html#afcb78ada6323e9f418a372f0af5d66d8">llvm::createSimpleLoopUnrollPass</a></div><div class="ttdeci">Pass * createSimpleLoopUnrollPass(int OptLevel=2, bool OnlyWhenForced=false, bool ForgetAllSCEV=false)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l01472">LoopUnrollPass.cpp:1472</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_afdb3eec2f46233c924c30c0838a3c8fe"><div class="ttname"><a href="namespacellvm.html#afdb3eec2f46233c924c30c0838a3c8fe">llvm::peelLoop</a></div><div class="ttdeci">bool peelLoop(Loop *L, unsigned PeelCount, LoopInfo *LI, ScalarEvolution *SE, DominatorTree &amp;DT, AssumptionCache *AC, bool PreserveLCSSA, ValueToValueMapTy &amp;VMap)</div><div class="ttdoc">VMap is the value-map that maps instructions from the original loop to instructions in the last peele...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00855">LoopPeel.cpp:855</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9e3f06a77c19d1098df61d28499fcf3b"><div class="ttname"><a href="namespacellvm.html#a9e3f06a77c19d1098df61d28499fcf3b">llvm::LLVMLoopUnrollFollowupAll</a></div><div class="ttdeci">const char *const LLVMLoopUnrollFollowupAll</div><div class="ttdef"><b>Definition:</b> <a href="UnrollLoop_8h_source.html#l00042">UnrollLoop.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a83fc54909661665a54cdda54686342dd"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a83fc54909661665a54cdda54686342dd">UnrollMaxCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollMaxCount(&quot;unroll-max-count&quot;, cl::Hidden, cl::desc(&quot;Set the max unroll count for partial and runtime unrolling, for&quot; &quot;testing purposes&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_abec0c616087c002528fcf80c6583eadd"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#abec0c616087c002528fcf80c6583eadd">llvm::ScalarEvolution::getSmallConstantTripCount</a></div><div class="ttdeci">unsigned getSmallConstantTripCount(const Loop *L)</div><div class="ttdoc">Returns the exact trip count of the loop if we can compute it, and the result is a small constant.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08105">ScalarEvolution.cpp:8105</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a6cbc0453586a25c057a32161b38b8ce4"><div class="ttname"><a href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">llvm::MDNode::getOperand</a></div><div class="ttdeci">const MDOperand &amp; getOperand(unsigned I) const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01291">Metadata.h:1291</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00268">DenseSet.h:268</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac7294ba4e105807674fe3a394437fcc1"><div class="ttname"><a href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">llvm::getLoopPassPreservedAnalyses</a></div><div class="ttdeci">PreservedAnalyses getLoopPassPreservedAnalyses()</div><div class="ttdoc">Returns the minimum set of Analyses that all loop passes must preserve.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8cpp_source.html#l00138">LoopAnalysisManager.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ac233a2693163ed58305215ca2f6921e3"><div class="ttname"><a href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">llvm::Loop::isLoopSimplifyForm</a></div><div class="ttdeci">bool isLoopSimplifyForm() const</div><div class="ttdoc">Return true if the Loop is in the form that the LoopSimplify form transforms loops to,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00479">LoopInfo.cpp:479</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a99ecdadaa7869a0686af1714201f931b"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a99ecdadaa7869a0686af1714201f931b">UnrollRuntime</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollRuntime(&quot;unroll-runtime&quot;, cl::Hidden, cl::desc(&quot;Unroll loops with run-time trip counts&quot;))</div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a4f99182190ead9c0b0ab19cf46019386"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a4f99182190ead9c0b0ab19cf46019386">hasUnrollEnablePragma</a></div><div class="ttdeci">static bool hasUnrollEnablePragma(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00708">LoopUnrollPass.cpp:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1bf56174fa0c9a2f271e84c9b45ac2c"><div class="ttname"><a href="namespacellvm.html#ad1bf56174fa0c9a2f271e84c9b45ac2c">llvm::UnrollLoop</a></div><div class="ttdeci">LoopUnrollResult UnrollLoop(Loop *L, UnrollLoopOptions ULO, LoopInfo *LI, ScalarEvolution *SE, DominatorTree *DT, AssumptionCache *AC, const llvm::TargetTransformInfo *TTI, OptimizationRemarkEmitter *ORE, bool PreserveLCSSA, Loop **RemainderLoop=nullptr)</div><div class="ttdoc">Unroll the given loop by Count.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnroll_8cpp_source.html#l00269">LoopUnroll.cpp:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00110">DenseMap.h:110</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab1772fd431decccb7926d484ea223db7"><div class="ttname"><a href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">llvm::count</a></div><div class="ttdeci">auto count(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::count to count the number of times an element Element occurs in the give...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01896">STLExtras.h:1896</a></div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00028">LoopPass.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7386405e9217844550433e1debb58ef7"><div class="ttname"><a href="namespacellvm.html#a7386405e9217844550433e1debb58ef7">llvm::hasUnrollAndJamTransformation</a></div><div class="ttdeci">TransformationMode hasUnrollAndJamTransformation(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00373">LoopUtils.cpp:373</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html">llvm::LPMUpdater</a></div><div class="ttdoc">This class provides an interface for updating the loop pass manager based on mutations to the loop ne...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00262">LoopPassManager.h:262</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_acd31f207713b86ad24694c320b1db3f0"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#acd31f207713b86ad24694c320b1db3f0">llvm::LoopUnrollOptions::AllowUpperBound</a></div><div class="ttdeci">std::optional&lt; bool &gt; AllowUpperBound</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00065">LoopUnrollPass.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionAnalysis_html"><div class="ttname"><a href="classllvm_1_1AssumptionAnalysis.html">llvm::AssumptionAnalysis</a></div><div class="ttdoc">A function analysis which provides an AssumptionCache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00173">AssumptionCache.h:173</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPriorityWorklist_html"><div class="ttname"><a href="classllvm_1_1SmallPriorityWorklist.html">llvm::SmallPriorityWorklist</a></div><div class="ttdoc">A version of PriorityWorklist that selects small size optimized data structures for the vector and ma...</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00255">PriorityWorklist.h:255</a></div></div>
<div class="ttc" id="anamespacellvm_html_a368216c9c116e3f30d8dd352ce1370fc"><div class="ttname"><a href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">llvm::makeFollowupLoopID</a></div><div class="ttdeci">std::optional&lt; MDNode * &gt; makeFollowupLoopID(MDNode *OrigLoopID, ArrayRef&lt; StringRef &gt; FollowupAttrs, const char *InheritOptionsAttrsPrefix=&quot;&quot;, bool AlwaysNew=false)</div><div class="ttdoc">Create a new loop identifier for a loop created from a loop transformation.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00263">LoopUtils.cpp:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a3cc216ff1aa29e15999df96770a870bf"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a3cc216ff1aa29e15999df96770a870bf">llvm::ScalarEvolution::getSmallConstantMaxTripCount</a></div><div class="ttdeci">unsigned getSmallConstantMaxTripCount(const Loop *L)</div><div class="ttdoc">Returns the upper bound of the loop trip count as a normal unsigned value.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08121">ScalarEvolution.cpp:8121</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a307cbe3aacadc70d64a8570be1394229"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a307cbe3aacadc70d64a8570be1394229">llvm::LoopUnrollOptions::FullUnrollMaxCount</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; FullUnrollMaxCount</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00067">LoopUnrollPass.h:67</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">llvm::TargetTransformInfo::UnrollingPreferences</a></div><div class="ttdoc">Parameters that control the generic loop unrolling transformation.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00440">TargetTransformInfo.h:440</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c861ddf753ab3690437dceaadf5c7e1a17f29ed218b7407dfd14e9a3ec8bd011"><div class="ttname"><a href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1a17f29ed218b7407dfd14e9a3ec8bd011">llvm::LoopUnrollResult::PartiallyUnrolled</a></div><div class="ttdeci">@ PartiallyUnrolled</div><div class="ttdoc">The loop was partially unrolled – we still have a loop, but with a smaller trip count.</div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaf3f6dd34ce3968d323a20d3a22e4545"><div class="ttname"><a href="namespacellvm.html#aaf3f6dd34ce3968d323a20d3a22e4545">llvm::computeUnrollCount</a></div><div class="ttdeci">bool computeUnrollCount(Loop *L, const TargetTransformInfo &amp;TTI, DominatorTree &amp;DT, LoopInfo *LI, AssumptionCache *AC, ScalarEvolution &amp;SE, const SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues, OptimizationRemarkEmitter *ORE, unsigned TripCount, unsigned MaxTripCount, bool MaxOrZero, unsigned TripMultiple, unsigned LoopSize, TargetTransformInfo::UnrollingPreferences &amp;UP, TargetTransformInfo::PeelingPreferences &amp;PP, bool &amp;UseUpperBound)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00889">LoopUnrollPass.cpp:889</a></div></div>
<div class="ttc" id="aMachineTraceMetrics_8cpp_html_a6f3004139ef53bc2cf206b8864976928"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a></div><div class="ttdeci">Machine Trace Metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00052">MachineTraceMetrics.cpp:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c861ddf753ab3690437dceaadf5c7e1"><div class="ttname"><a href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1">llvm::LoopUnrollResult</a></div><div class="ttdeci">LoopUnrollResult</div><div class="ttdoc">Represents the result of a UnrollLoop invocation.</div><div class="ttdef"><b>Definition:</b> <a href="UnrollLoop_8h_source.html#l00054">UnrollLoop.h:54</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a0ffbb1b91937d258b118eccfd4fb5d74"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a0ffbb1b91937d258b118eccfd4fb5d74">llvm::LoopUnrollOptions::OptLevel</a></div><div class="ttdeci">int OptLevel</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00068">LoopUnrollPass.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_adc2ef5f0964becc28dfa58a7abc2f1e7"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the PriorityWorklist is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00067">PriorityWorklist.h:67</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a2347552ca69d9cad96b3e1ce7f673ec0"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a2347552ca69d9cad96b3e1ce7f673ec0">UnrollThresholdAggressive</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollThresholdAggressive(&quot;unroll-threshold-aggressive&quot;, cl::init(300), cl::Hidden, cl::desc(&quot;Threshold (max size of unrolled loop) to use in aggressive (O3) &quot; &quot;optimizations&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3e837c0d2a0521b4a4680071cac0dcbaa70bd8f3da4232ad809b2ffdcc1254bd"><div class="ttname"><a href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa70bd8f3da4232ad809b2ffdcc1254bd">llvm::TM_Disable</a></div><div class="ttdeci">@ TM_Disable</div><div class="ttdoc">The transformation should not be applied.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00276">LoopUtils.h:276</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassUnrollCostEstimator_html_a04950e4008a9674418e40e4ef94d9ea8"><div class="ttname"><a href="classUnrollCostEstimator.html#a04950e4008a9674418e40e4ef94d9ea8">UnrollCostEstimator::UnrollCostEstimator</a></div><div class="ttdeci">UnrollCostEstimator(Loop &amp;L, unsigned LoopSize)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00757">LoopUnrollPass.cpp:757</a></div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_aa2e7d58f32215958839220d8ffbde13b"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#aa2e7d58f32215958839220d8ffbde13b">NoThreshold</a></div><div class="ttdeci">static const unsigned NoThreshold</div><div class="ttdoc">A magic value for use with the Threshold parameter to indicate that the loop unroll should be perform...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00179">LoopUnrollPass.cpp:179</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0d69e81725c10fa5407f0bf34462068"><div class="ttname"><a href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">llvm::TTI</a></div><div class="ttdeci">TargetTransformInfo TTI</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00191">TargetTransformInfo.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_aefaba3912f52186ea896035ea0f5b00c"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">llvm::InstructionCost::getValue</a></div><div class="ttdeci">std::optional&lt; CostType &gt; getValue() const</div><div class="ttdoc">This function is intended to be used as sparingly as possible, since the class provides the full rang...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00087">InstructionCost.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aa8b08fb48c8c58e63aa231a1099475d9"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aa8b08fb48c8c58e63aa231a1099475d9">llvm::TargetTransformInfo::isLoweredToCall</a></div><div class="ttdeci">bool isLoweredToCall(const Function *F) const</div><div class="ttdoc">Test whether calls to a function lower to actual program function calls.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00298">TargetTransformInfo.cpp:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_ab447b41b9c51151b5c6ef497a60689ae"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#ab447b41b9c51151b5c6ef497a60689ae">llvm::LoopInfoBase::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00967">LoopInfo.h:967</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html_ad898592a9fdc638d33b6b5cf0eba2bbe"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html#ad898592a9fdc638d33b6b5cf0eba2bbe">llvm::LPMUpdater::markLoopAsDeleted</a></div><div class="ttdeci">void markLoopAsDeleted(Loop &amp;L, llvm::StringRef Name)</div><div class="ttdoc">Loop passes should use this method to indicate they have deleted a loop from the nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00282">LoopPassManager.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aLoopPassManager_8h_html"><div class="ttname"><a href="LoopPassManager_8h.html">LoopPassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_af5f14075ded64ace8c96da035ef79dd3"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#af5f14075ded64ace8c96da035ef79dd3">UnrollAllowPartial</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollAllowPartial(&quot;unroll-allow-partial&quot;, cl::Hidden, cl::desc(&quot;Allows loops to be partially unrolled until &quot; &quot;-unroll-threshold loop size is reached.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_aae18ea31c70cfa9d2028b0369af1c516"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#aae18ea31c70cfa9d2028b0369af1c516">PragmaUnrollThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PragmaUnrollThreshold(&quot;pragma-unroll-threshold&quot;, cl::init(16 *1024), cl::Hidden, cl::desc(&quot;Unrolled size limit for loops with an unroll(full) or &quot; &quot;unroll_count pragma.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryAnalysis_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryAnalysis.html">llvm::ProfileSummaryAnalysis</a></div><div class="ttdoc">An analysis pass based on the new PM to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00212">ProfileSummaryInfo.h:212</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html_a93102207c7c9430df6ef02447446de9b"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">llvm::TargetTransformInfo::PeelingPreferences::PeelCount</a></div><div class="ttdeci">unsigned PeelCount</div><div class="ttdoc">A forced peeling factor (the number of bodied of the original loop that should be peeled off before t...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00551">TargetTransformInfo.h:551</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCacheTracker_html"><div class="ttname"><a href="classllvm_1_1AssumptionCacheTracker.html">llvm::AssumptionCacheTracker</a></div><div class="ttdoc">An immutable pass that tracks lazily created AssumptionCache objects.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00202">AssumptionCache.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a3499f6a24500afba2c318295ad2d2d05"><div class="ttname"><a href="classllvm_1_1SetVector.html#a3499f6a24500afba2c318295ad2d2d05">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00225">SetVector.h:225</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">llvm::TargetTransformInfo::TCK_SizeAndLatency</a></div><div class="ttdeci">@ TCK_SizeAndLatency</div><div class="ttdoc">The weighted sum of size and latency.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00245">TargetTransformInfo.h:245</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5"><div class="ttname"><a href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcbaa1c649bc8228a2e36e04b8454851bfc5">llvm::TM_ForcedByUser</a></div><div class="ttdeci">@ TM_ForcedByUser</div><div class="ttdoc">The transformation was directed by the user, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00284">LoopUtils.h:284</a></div></div>
<div class="ttc" id="aLoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7a106c600cf32852298d9041e8c8044"><div class="ttname"><a href="namespacellvm.html#ab7a106c600cf32852298d9041e8c8044">llvm::appendLoopsToWorklist</a></div><div class="ttdeci">void appendLoopsToWorklist(RangeT &amp;&amp;, SmallPriorityWorklist&lt; Loop *, 4 &gt; &amp;)</div><div class="ttdoc">Utility that implements appending of loops onto a worklist given a range.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01524">LoopUtils.cpp:1524</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="aCostModel_8cpp_html_a263d4048026a7c0a91393b998181f16e"><div class="ttname"><a href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a></div><div class="ttdeci">static cl::opt&lt; TargetTransformInfo::TargetCostKind &gt; CostKind(&quot;cost-kind&quot;, cl::desc(&quot;Target cost kind&quot;), cl::init(TargetTransformInfo::TCK_RecipThroughput), cl::values(clEnumValN(TargetTransformInfo::TCK_RecipThroughput, &quot;throughput&quot;, &quot;Reciprocal throughput&quot;), clEnumValN(TargetTransformInfo::TCK_Latency, &quot;latency&quot;, &quot;Instruction latency&quot;), clEnumValN(TargetTransformInfo::TCK_CodeSize, &quot;code-size&quot;, &quot;Code size&quot;), clEnumValN(TargetTransformInfo::TCK_SizeAndLatency, &quot;size-latency&quot;, &quot;Code size and latency&quot;)))</div></div>
<div class="ttc" id="anamespacellvm_html_a6e86d0ac2e968adc60290ca52da02e42"><div class="ttname"><a href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">llvm::gatherPeelingPreferences</a></div><div class="ttdeci">TargetTransformInfo::PeelingPreferences gatherPeelingPreferences(Loop *L, ScalarEvolution &amp;SE, const TargetTransformInfo &amp;TTI, std::optional&lt; bool &gt; UserAllowPeeling, std::optional&lt; bool &gt; UserAllowProfileBasedPeeling, bool UnrollingSpecficValues=false)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00811">LoopPeel.cpp:811</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aa09379aa4435be95eb717dd9b5d8b4c5"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">llvm::LoopStandardAnalysisResults::LI</a></div><div class="ttdeci">LoopInfo &amp; LI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00055">LoopAnalysisManager.h:55</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a5ebdb0ee911db5f4304bc6b92b0fed98"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a5ebdb0ee911db5f4304bc6b92b0fed98">llvm::TargetTransformInfo::UnrollingPreferences::DefaultUnrollRuntimeCount</a></div><div class="ttdeci">unsigned DefaultUnrollRuntimeCount</div><div class="ttdoc">Default unroll count for loops with run-time trip count.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00476">TargetTransformInfo.h:476</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_abe48dc9203c8f5e23051f398f57cc286"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#abe48dc9203c8f5e23051f398f57cc286">UnrollOptSizeThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollOptSizeThreshold(&quot;unroll-optsize-threshold&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;The cost threshold for loop unrolling when optimizing for &quot; &quot;size&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_ae01c5ced9fe2fe50f421ae121483ef04"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">llvm::InstructionCost::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00079">InstructionCost.h:79</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">llvm::AMDGPUISD::BFI</a></div><div class="ttdeci">@ BFI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00441">AMDGPUISelLowering.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_afda534b0c37087131851e5f959c2a890"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#afda534b0c37087131851e5f959c2a890">UnrollUnrollRemainder</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollUnrollRemainder(&quot;unroll-remainder&quot;, cl::Hidden, cl::desc(&quot;Allow the loop remainder to be unrolled.&quot;))</div></div>
<div class="ttc" id="aLoopUnrollAnalyzer_8h_html"><div class="ttname"><a href="LoopUnrollAnalyzer_8h.html">LoopUnrollAnalyzer.h</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a7cfe61417446ebb812e81293bde22a29"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a></div><div class="ttdeci">LoopAnalysisManager LAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00058">PassBuilderBindings.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1c455e007178a24dfb18ac0e200ea02c"><div class="ttname"><a href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">llvm::Function::hasOptSize</a></div><div class="ttdeci">bool hasOptSize() const</div><div class="ttdoc">Optimize this function for size (-Os) or minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00644">Function.h:644</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a96bda22e654a59fec0620767b56dd53f"><div class="ttname"><a href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Completely clear the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00213">SetVector.h:213</a></div></div>
<div class="ttc" id="aclassUnrollCostEstimator_html"><div class="ttname"><a href="classUnrollCostEstimator.html">UnrollCostEstimator</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00753">LoopUnrollPass.cpp:753</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a16165c1e5da45acaa086c3a54a188d34"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">llvm::LoopBase::isInnermost</a></div><div class="ttdeci">bool isInnermost() const</div><div class="ttdoc">Return true if the loop does not contain any (natural) loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00182">LoopInfo.h:182</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3e3d3c6d4e33a4f5ca579ee7939f0349"><div class="ttname"><a href="namespacellvm.html#a3e3d3c6d4e33a4f5ca579ee7939f0349">llvm::LCSSAID</a></div><div class="ttdeci">char &amp; LCSSAID</div><div class="ttdef"><b>Definition:</b> <a href="LCSSA_8cpp_source.html#l00492">LCSSA.cpp:492</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74ac302e71a5bdbb6b2ab1e1d1266e6e"><div class="ttname"><a href="namespacellvm.html#a74ac302e71a5bdbb6b2ab1e1d1266e6e">llvm::ForgetSCEVInLoopUnroll</a></div><div class="ttdeci">cl::opt&lt; bool &gt; ForgetSCEVInLoopUnroll</div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopUnrollPass_html_a62ed17cf8aa893362e6c3c1f6d8a0898"><div class="ttname"><a href="classllvm_1_1LoopUnrollPass.html#a62ed17cf8aa893362e6c3c1f6d8a0898">llvm::LoopUnrollPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l01564">LoopUnrollPass.cpp:1564</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_adf4be757fa30ca7fe3e8b119438100f0"><div class="ttname"><a href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">llvm::Loop::setLoopID</a></div><div class="ttdeci">void setLoopID(MDNode *LoopID) const</div><div class="ttdoc">Set the llvm.loop loop id metadata for this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00525">LoopInfo.cpp:525</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPPassManager_html_a8ef47cc6f59b91bf5a1392975366e758"><div class="ttname"><a href="classllvm_1_1LPPassManager.html#a8ef47cc6f59b91bf5a1392975366e758">llvm::LPPassManager::markLoopAsDeleted</a></div><div class="ttdeci">void markLoopAsDeleted(Loop &amp;L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8cpp_source.html#l00110">LoopPass.cpp:110</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a3444a9359f5f17f1694f82c41d5fd574"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">llvm::LoopStandardAnalysisResults::TTI</a></div><div class="ttdeci">TargetTransformInfo &amp; TTI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00058">LoopAnalysisManager.h:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a20a872a70cd97f4915f64fb9470c32d0"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a20a872a70cd97f4915f64fb9470c32d0">llvm::TargetTransformInfo::UnrollingPreferences::UpperBound</a></div><div class="ttdeci">bool UpperBound</div><div class="ttdoc">Allow using trip count upper bound to unroll loops.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00507">TargetTransformInfo.h:507</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8h_html"><div class="ttname"><a href="LoopUnrollPass_8h.html">LoopUnrollPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_afbcd78588d5235f99698b5c30f591382"><div class="ttname"><a href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">llvm::Loop::getLoopID</a></div><div class="ttdeci">MDNode * getLoopID() const</div><div class="ttdoc">Return the llvm.loop loop id metadata node for this loop if it is present.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00501">LoopInfo.cpp:501</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a57a6829dad387e7075a6325e3ec6ace5"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a57a6829dad387e7075a6325e3ec6ace5">llvm::ScalarEvolution::isBackedgeTakenCountMaxOrZero</a></div><div class="ttdeci">bool isBackedgeTakenCountMaxOrZero(const Loop *L)</div><div class="ttdoc">Return true if the backedge taken count is either the value returned by getConstantMaxBackedgeTakenCo...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08344">ScalarEvolution.cpp:8344</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a90a202de107720c5c6af3a5bc275d8f5"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">llvm::AnalysisManager::getCachedResult</a></div><div class="ttdeci">PassT::Result * getCachedResult(IRUnitT &amp;IR) const</div><div class="ttdoc">Get the cached result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00793">PassManager.h:793</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_abb51de50739e767745339e9bb2aa31a4"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#abb51de50739e767745339e9bb2aa31a4">llvm::TargetTransformInfo::UnrollingPreferences::AllowRemainder</a></div><div class="ttdeci">bool AllowRemainder</div><div class="ttdoc">Allow generation of a loop remainder (extra iterations after unroll).</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00499">TargetTransformInfo.h:499</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aDiagnosticInfo_8h_html"><div class="ttname"><a href="DiagnosticInfo_8h.html">DiagnosticInfo.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_a2f37fb0593d9a4a6cb19fa059274ef7e"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#a2f37fb0593d9a4a6cb19fa059274ef7e">UnrollMaxIterationsCountToAnalyze</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollMaxIterationsCountToAnalyze(&quot;unroll-max-iteration-count-to-analyze&quot;, cl::init(10), cl::Hidden, cl::desc(&quot;Don't allow loop unrolling to simulate more than this number of&quot; &quot;iterations when checking full unroll profitability&quot;))</div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_afc196ec1fe8dc9531a2d0bd76b8defc6"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#afc196ec1fe8dc9531a2d0bd76b8defc6">shouldPartialUnroll</a></div><div class="ttdeci">static std::optional&lt; unsigned &gt; shouldPartialUnroll(const unsigned LoopSize, const unsigned TripCount, const UnrollCostEstimator UCE, const TargetTransformInfo::UnrollingPreferences &amp;UP)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00834">LoopUnrollPass.cpp:834</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a89f3cc58de97975474aec06d7c46b2fa"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a89f3cc58de97975474aec06d7c46b2fa">llvm::LoopUnrollOptions::AllowPeeling</a></div><div class="ttdeci">std::optional&lt; bool &gt; AllowPeeling</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00063">LoopUnrollPass.h:63</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0083a69883e0f97e111dbff064c60f42"><div class="ttname"><a href="namespacellvm.html#a0083a69883e0f97e111dbff064c60f42">llvm::simplifyLoop</a></div><div class="ttdeci">bool simplifyLoop(Loop *L, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, MemorySSAUpdater *MSSAU, bool PreserveLCSSA)</div><div class="ttdoc">Simplify each loop in a loop nest recursively.</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00708">LoopSimplify.cpp:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9084ce2576fad285c1c0dc1e165dd4b6"><div class="ttname"><a href="classllvm_1_1Function.html#a9084ce2576fad285c1c0dc1e165dd4b6">llvm::Function::hasProfileData</a></div><div class="ttdeci">bool hasProfileData(bool IncludeSynthetic=false) const</div><div class="ttdoc">Return true if the function is annotated with profile data.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00289">Function.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aAttributes_8cpp_html_a12f59da641309f7afb7b1d32cb59a7bf"><div class="ttname"><a href="Attributes_8cpp.html#a12f59da641309f7afb7b1d32cb59a7bf">isEqual</a></div><div class="ttdeci">static bool isEqual(const Function &amp;Caller, const Function &amp;Callee)</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01947">Attributes.cpp:1947</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html_ad76f37ff51a1cc6ecca63633f2247c2f"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html#ad76f37ff51a1cc6ecca63633f2247c2f">llvm::LPMUpdater::addChildLoops</a></div><div class="ttdeci">void addChildLoops(ArrayRef&lt; Loop * &gt; NewChildLoops)</div><div class="ttdoc">Loop passes should use this method to indicate they have added new child loops of the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00303">LoopPassManager.h:303</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a124376878e24aef4252795ba9fea420f"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">llvm::LoopStandardAnalysisResults::SE</a></div><div class="ttdeci">ScalarEvolution &amp; SE</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00056">LoopAnalysisManager.h:56</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a3533763e5a069304cac300d58aa3c335"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a3533763e5a069304cac300d58aa3c335">llvm::LoopUnrollOptions::AllowPartial</a></div><div class="ttdeci">std::optional&lt; bool &gt; AllowPartial</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00062">LoopUnrollPass.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_ab89ceb7695256590499de818b5360c54"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00153">PriorityWorklist.h:153</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopUnrollOptions_html_a4e0d8e894c9a946cab90061f99a514d4"><div class="ttname"><a href="structllvm_1_1LoopUnrollOptions.html#a4e0d8e894c9a946cab90061f99a514d4">llvm::LoopUnrollOptions::AllowRuntime</a></div><div class="ttdeci">std::optional&lt; bool &gt; AllowRuntime</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8h_source.html#l00064">LoopUnrollPass.h:64</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a4f728602e7d377829675f13446cf6647"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a4f728602e7d377829675f13446cf6647">llvm::LoopInfoBase::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00968">LoopInfo.h:968</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00052">PassSupport.h:52</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_ac94e9ab3d7f1774d783c54ca0bc9a538"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#ac94e9ab3d7f1774d783c54ca0bc9a538">hasRuntimeUnrollDisablePragma</a></div><div class="ttdeci">static bool hasRuntimeUnrollDisablePragma(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00713">LoopUnrollPass.cpp:713</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00072">LoopUnrollPass.cpp:72</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a21e7febf468c370793f606da5cd0e6fe"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">llvm::TargetTransformInfo::UnrollingPreferences::Threshold</a></div><div class="ttdeci">unsigned Threshold</div><div class="ttdoc">The cost threshold for the unrolled loop.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00448">TargetTransformInfo.h:448</a></div></div>
<div class="ttc" id="aUnrollLoop_8h_html"><div class="ttname"><a href="UnrollLoop_8h.html">UnrollLoop.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a83d8036930a033b196409ced5c9409e5"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a83d8036930a033b196409ced5c9409e5">llvm::LoopInfoBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00971">LoopInfo.h:971</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a021a92f02d7e959877a4154277fc5c91"><div class="ttname"><a href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">llvm::Loop::isLCSSAForm</a></div><div class="ttdeci">bool isLCSSAForm(const DominatorTree &amp;DT, bool IgnoreTokens=true) const</div><div class="ttdoc">Return true if the Loop is in LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00462">LoopInfo.cpp:462</a></div></div>
<div class="ttc" id="aDenseMapInfo_8h_html"><div class="ttname"><a href="DenseMapInfo_8h.html">DenseMapInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a548cfb9440f36ba67fc5566b8e967fc6"><div class="ttname"><a href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">llvm::Function::hasMinSize</a></div><div class="ttdeci">bool hasMinSize() const</div><div class="ttdoc">Optimize this function for minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00641">Function.h:641</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; const Value * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00931">PassManager.h:931</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_af9a7105299bd43b8b61c803f26e4a31b"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af9a7105299bd43b8b61c803f26e4a31b">llvm::TargetTransformInfo::UnrollingPreferences::OptSizeThreshold</a></div><div class="ttdeci">unsigned OptSizeThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop when optimizing for size (set to UINT_MAX to disable).</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00462">TargetTransformInfo.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af691775d5a45e28afbdb3e97cab22eee"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">llvm::LoopBase::isLoopExiting</a></div><div class="ttdeci">bool isLoopExiting(const BlockT *BB) const</div><div class="ttdoc">True if terminator in the block can branch to another block that is outside of the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00242">LoopInfo.h:242</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_abd642fa74effc122158e6fb11da78600"><div class="ttname"><a href="namespacellvm.html#abd642fa74effc122158e6fb11da78600">llvm::gatherUnrollingPreferences</a></div><div class="ttdeci">TargetTransformInfo::UnrollingPreferences gatherUnrollingPreferences(Loop *L, ScalarEvolution &amp;SE, const TargetTransformInfo &amp;TTI, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, llvm::OptimizationRemarkEmitter &amp;ORE, int OptLevel, std::optional&lt; unsigned &gt; UserThreshold, std::optional&lt; unsigned &gt; UserCount, std::optional&lt; bool &gt; UserAllowPartial, std::optional&lt; bool &gt; UserRuntime, std::optional&lt; bool &gt; UserUpperBound, std::optional&lt; unsigned &gt; UserFullUnrollMaxCount)</div><div class="ttdoc">Gather the various unrolling parameters based on the defaults, compiler flags, TTI overrides and user...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00183">LoopUnrollPass.cpp:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03283">Instructions.h:3283</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84"><div class="ttname"><a href="namespacellvm.html#a8c861ddf753ab3690437dceaadf5c7e1aac5e6ff0bb9cd22f9f55570e7b318c84">llvm::LoopUnrollResult::Unmodified</a></div><div class="ttdeci">@ Unmodified</div><div class="ttdoc">The loop was not modified.</div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html_ae95084eaa2138306765de7c711fa65b5"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html#ae95084eaa2138306765de7c711fa65b5">llvm::LPMUpdater::addSiblingLoops</a></div><div class="ttdeci">void addSiblingLoops(ArrayRef&lt; Loop * &gt; NewSibLoops)</div><div class="ttdoc">Loop passes should use this method to indicate they have added new sibling loops to the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00330">LoopPassManager.h:330</a></div></div>
<div class="ttc" id="aLoopPeel_8h_html"><div class="ttname"><a href="LoopPeel_8h.html">LoopPeel.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0b3c6dc8e7df65d2385acfe9657abd03"><div class="ttname"><a href="namespacellvm.html#a0b3c6dc8e7df65d2385acfe9657abd03">llvm::getLoopEstimatedTripCount</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getLoopEstimatedTripCount(Loop *L, unsigned *EstimatedLoopInvocationWeight=nullptr)</div><div class="ttdoc">Returns a loop's estimated trip count based on branch weight metadata.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00811">LoopUtils.cpp:811</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">llvm::OptimizationRemarkEmitterAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00164">OptimizationRemarkEmitter.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aLoopUnrollPass_8cpp_html_acbbbc7e7d7a179db52a59d70392a1e9c"><div class="ttname"><a href="LoopUnrollPass_8cpp.html#acbbbc7e7d7a179db52a59d70392a1e9c">getFullUnrollBoostingFactor</a></div><div class="ttdeci">static unsigned getFullUnrollBoostingFactor(const EstimatedUnrollCost &amp;Cost, unsigned MaxPercentThresholdBoost)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00737">LoopUnrollPass.cpp:737</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3e837c0d2a0521b4a4680071cac0dcb"><div class="ttname"><a href="namespacellvm.html#aa3e837c0d2a0521b4a4680071cac0dcb">llvm::TransformationMode</a></div><div class="ttdeci">TransformationMode</div><div class="ttdoc">The mode sets how eager a transformation should be applied.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00267">LoopUtils.h:267</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a63a7a13b9f772e6c656e94fb7e251d46"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a63a7a13b9f772e6c656e94fb7e251d46">llvm::TargetTransformInfo::UnrollingPreferences::MaxPercentThresholdBoost</a></div><div class="ttdeci">unsigned MaxPercentThresholdBoost</div><div class="ttdoc">If complete unrolling will reduce the cost of the loop, we will boost the Threshold by a certain perc...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00459">TargetTransformInfo.h:459</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5661ae57c57732f7f570b4a03f241e33"><div class="ttname"><a href="namespacellvm.html#a5661ae57c57732f7f570b4a03f241e33">llvm::createLoopUnrollPass</a></div><div class="ttdeci">Pass * createLoopUnrollPass(int OptLevel=2, bool OnlyWhenForced=false, bool ForgetAllSCEV=false, int Threshold=-1, int Count=-1, int AllowPartial=-1, int Runtime=-1, int UpperBound=-1, int AllowPeeling=-1)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l01455">LoopUnrollPass.cpp:1455</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopFullUnrollPass_html_aacf97677dabaa7e583a690244bde44ea"><div class="ttname"><a href="classllvm_1_1LoopFullUnrollPass.html#aacf97677dabaa7e583a690244bde44ea">llvm::LoopFullUnrollPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Loop &amp;L, LoopAnalysisManager &amp;AM, LoopStandardAnalysisResults &amp;AR, LPMUpdater &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l01478">LoopUnrollPass.cpp:1478</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:33:42 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Vectorize/LoopVectorize.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_acb975f027bc8cf760392318543d920a.html">Vectorize</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopVectorize.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopVectorize_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopVectorize.cpp - A Loop Vectorizer ------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This is the LLVM loop vectorizer. This pass modifies &#39;vectorizable&#39; loops</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// and generates target-independent LLVM-IR.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// The vectorizer uses the TargetTransformInfo analysis to estimate the costs</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// of instructions in order to estimate the profitability of vectorization.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// The loop vectorizer combines consecutive loop iterations into a single</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// &#39;wide&#39; iteration. After this transformation the index is incremented</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// by the SIMD vector width, and not by one.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// This pass has three parts:</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// 1. The main loop pass that drives the different parts.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// 2. LoopVectorizationLegality - A unit that checks for the legality</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//    of the vectorization.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// 3. InnerLoopVectorizer - A unit that performs the actual</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//    widening of instructions.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// 4. LoopVectorizationCostModel - A unit that checks for the profitability</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//    of vectorization. It decides on the optimal vector width, which</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//    can be one, if vectorization is not profitable.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// There is a development effort going on to migrate loop vectorizer to the</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// VPlan infrastructure and to introduce outer loop vectorization support (see</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// docs/Proposal/VectorizationPlan.rst and</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// http://lists.llvm.org/pipermail/llvm-dev/2017-December/119523.html). For this</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// purpose, we temporarily introduced the VPlan-native vectorization path: an</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// alternative vectorization path that is natively implemented on top of the</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// VPlan infrastructure. See EnableVPlanNativePath for enabling.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// The reduction-variable vectorization is based on the paper:</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//  D. Nuzman and R. Henderson. Multi-platform Auto-vectorization.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// Variable uniformity checks are inspired by:</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//  Karrenberg, R. and Hack, S. Whole Function Vectorization.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// The interleaved access vectorization is based on the paper:</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//  Dorit Nuzman, Ira Rosen and Ayal Zaks.  Auto-Vectorization of Interleaved</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//  Data for SIMD</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// Other ideas/concepts are from:</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//  A. Zaks and D. Nuzman. Autovectorization in GCC-two years later.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">//  S. Maleki, Y. Gao, M. Garzaran, T. Wong and D. Padua.  An Evaluation of</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">//  Vectorizing Compilers.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopVectorize_8h.html">llvm/Transforms/Vectorize/LoopVectorize.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopVectorizationPlanner_8h.html">LoopVectorizationPlanner.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VPRecipeBuilder_8h.html">VPRecipeBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VPlan_8h.html">VPlan.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VPlanHCFGBuilder_8h.html">VPlanHCFGBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VPlanTransforms_8h.html">VPlanTransforms.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMapInfo_8h.html">llvm/ADT/DenseMapInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Hashing_8h.html">llvm/ADT/Hashing.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MapVector_8h.html">llvm/ADT/MapVector.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicAliasAnalysis_8h.html">llvm/Analysis/BasicAliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2CFG_8h.html">llvm/Analysis/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DemandedBits_8h.html">llvm/Analysis/DemandedBits.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalsModRef_8h.html">llvm/Analysis/GlobalsModRef.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopAccessAnalysis_8h.html">llvm/Analysis/LoopAccessAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopAnalysisManager_8h.html">llvm/Analysis/LoopAnalysisManager.h</a>&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopIterator_8h.html">llvm/Analysis/LoopIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpressions_8h.html">llvm/Analysis/ScalarEvolutionExpressions.h</a>&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VectorUtils_8h.html">llvm/Analysis/VectorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugLoc_8h.html">llvm/IR/DebugLoc.h</a>&quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DiagnosticInfo_8h.html">llvm/IR/DiagnosticInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Verifier_8h.html">llvm/IR/Verifier.h</a>&quot;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionCost_8h.html">llvm/Support/InstructionCost.h</a>&quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InjectTLIMappings_8h.html">llvm/Transforms/Utils/InjectTLIMappings.h</a>&quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopSimplify_8h.html">llvm/Transforms/Utils/LoopSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopVersioning_8h.html">llvm/Transforms/Utils/LoopVersioning.h</a>&quot;</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpander_8h.html">llvm/Transforms/Utils/ScalarEvolutionExpander.h</a>&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SizeOpts_8h.html">llvm/Transforms/Utils/SizeOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopVectorizationLegality_8h.html">llvm/Transforms/Vectorize/LoopVectorizationLegality.h</a>&quot;</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">  156</a></span>&#160;<span class="preprocessor">#define LV_NAME &quot;loop-vectorize&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">  157</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE LV_NAME</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a8eba8b6f7c3e69bf4d4efd92cd74b5a6">  160</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LoopVectorize_8cpp.html#a8eba8b6f7c3e69bf4d4efd92cd74b5a6">VerboseDebug</a>[] = <a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a> <span class="stringliteral">&quot;-verbose&quot;</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/// @{</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/// Metadata attribute names</span></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a3bf55ccbbeedcfb8cd2a1bd62c0ad91a">  165</a></span>&#160;<span class="comment"></span><span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LoopVectorize_8cpp.html#a3bf55ccbbeedcfb8cd2a1bd62c0ad91a">LLVMLoopVectorizeFollowupAll</a>[] = <span class="stringliteral">&quot;llvm.loop.vectorize.followup_all&quot;</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a99050b417d193e1cc1117e5bbd4bfbce">  166</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LoopVectorize_8cpp.html#a99050b417d193e1cc1117e5bbd4bfbce">LLVMLoopVectorizeFollowupVectorized</a>[] =</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="stringliteral">&quot;llvm.loop.vectorize.followup_vectorized&quot;</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#aadedae9de069f3bcef6fa7a90ce4a630">  168</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LoopVectorize_8cpp.html#aadedae9de069f3bcef6fa7a90ce4a630">LLVMLoopVectorizeFollowupEpilogue</a>[] =</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="stringliteral">&quot;llvm.loop.vectorize.followup_epilogue&quot;</span>;<span class="comment"></span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/// @}</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(LoopsVectorized, <span class="stringliteral">&quot;Number of loops vectorized&quot;</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(LoopsAnalyzed, <span class="stringliteral">&quot;Number of loops analyzed for vectorization&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(LoopsEpilogueVectorized, <span class="stringliteral">&quot;Number of epilogues vectorized&quot;</span>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a757b134f1de2185cb667e6387b73d650">EnableEpilogueVectorization</a>(</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="stringliteral">&quot;enable-epilogue-vectorization&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable vectorization of epilogue loops.&quot;</span>));</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a99a503a2d14911c8bb439fea8e49cdf7">EpilogueVectorizationForceVF</a>(</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="stringliteral">&quot;epilogue-vectorization-force-VF&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When epilogue vectorization is enabled, and a value greater than &quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;             <span class="stringliteral">&quot;1 is specified, forces the given VF for all applicable epilogue &quot;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;             <span class="stringliteral">&quot;loops.&quot;</span>));</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a00921df4d41f1947bb823562e2983702">EpilogueVectorizationMinVF</a>(</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="stringliteral">&quot;epilogue-vectorization-minimum-VF&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(16), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Only loops with vectorization factor equal to or larger than &quot;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;             <span class="stringliteral">&quot;the specified value are considered for epilogue vectorization.&quot;</span>));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/// Loops with a known constant trip count below this number are vectorized only</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">/// if no scalar iteration overheads are incurred.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a367c00b94d19dddb8a87f5d80840770d">TinyTripCountVectorThreshold</a>(</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="stringliteral">&quot;vectorizer-min-trip-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(16), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Loops with a constant trip count that is smaller than this &quot;</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;             <span class="stringliteral">&quot;value are vectorized only if no scalar iteration overheads &quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;             <span class="stringliteral">&quot;are incurred.&quot;</span>));</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a81cab9f3e7e0225e565699792e125012">VectorizeMemoryCheckThreshold</a>(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="stringliteral">&quot;vectorize-memory-check-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(128), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum allowed number of runtime memory checks&quot;</span>));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// Option prefer-predicate-over-epilogue indicates that an epilogue is undesired,</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// that predication is preferred, and this lists all options. I.e., the</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// vectorizer will try to fold the tail-loop (epilogue) into the vector body</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">// and predicate the instructions accordingly. If tail-folding fails, there are</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">// different fallback strategies depending on these values:</span></div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="namespacePreferPredicateTy.html">  208</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacePreferPredicateTy.html">PreferPredicateTy</a> {</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cda">  209</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cda">Option</a> {</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7">  210</a></span>&#160;    <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7">ScalarEpilogue</a> = 0,</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa3111b239a92c1674cea87d025e818091">  211</a></span>&#160;    <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa3111b239a92c1674cea87d025e818091">PredicateElseScalarEpilogue</a>,</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa5e6f0abe1c426939c61d8924cfa02e5a">  212</a></span>&#160;    <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa5e6f0abe1c426939c61d8924cfa02e5a">PredicateOrDontVectorize</a></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  };</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;} <span class="comment">// namespace PreferPredicateTy</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;PreferPredicateTy::Option&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a4560cb303f08f288db125b0b213ab06a">PreferPredicateOverEpilogue</a>(</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="stringliteral">&quot;prefer-predicate-over-epilogue&quot;</span>,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7">PreferPredicateTy::ScalarEpilogue</a>),</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Tail-folding and predication preferences over creating a scalar &quot;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;             <span class="stringliteral">&quot;epilogue loop.&quot;</span>),</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7">PreferPredicateTy::ScalarEpilogue</a>,</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                         <span class="stringliteral">&quot;scalar-epilogue&quot;</span>,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                         <span class="stringliteral">&quot;Don&#39;t tail-predicate loops, create scalar epilogue&quot;</span>),</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;              <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa3111b239a92c1674cea87d025e818091">PreferPredicateTy::PredicateElseScalarEpilogue</a>,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                         <span class="stringliteral">&quot;predicate-else-scalar-epilogue&quot;</span>,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                         <span class="stringliteral">&quot;prefer tail-folding, create scalar epilogue if tail &quot;</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                         <span class="stringliteral">&quot;folding fails.&quot;</span>),</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;              <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa5e6f0abe1c426939c61d8924cfa02e5a">PreferPredicateTy::PredicateOrDontVectorize</a>,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                         <span class="stringliteral">&quot;predicate-dont-vectorize&quot;</span>,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                         <span class="stringliteral">&quot;prefers tail-folding, don&#39;t attempt vectorization if &quot;</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                         <span class="stringliteral">&quot;tail-folding fails.&quot;</span>)));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a717c84dccaec7d7928d41106e5c42684">MaximizeBandwidth</a>(</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="stringliteral">&quot;vectorizer-maximize-bandwidth&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximize bandwidth when selecting vectorization factor which &quot;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;             <span class="stringliteral">&quot;will be determined by the smallest type in loop.&quot;</span>));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#ac2ea855ca5fe5b7adb059e3305b9c755">EnableInterleavedMemAccesses</a>(</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="stringliteral">&quot;enable-interleaved-mem-accesses&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable vectorization on interleaved memory accesses in a loop&quot;</span>));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/// An interleave-group may need masking if it resides in a block that needs</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/// predication, or in order to mask away gaps.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a266653d74b7082b0c2cfbef0d7b5a9e3">EnableMaskedInterleavedMemAccesses</a>(</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="stringliteral">&quot;enable-masked-interleaved-mem-accesses&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable vectorization on masked interleaved memory accesses in a loop&quot;</span>));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a7051c657436b4eaefa4d4d00bea4f5af">TinyTripCountInterleaveThreshold</a>(</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="stringliteral">&quot;tiny-trip-count-interleave-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(128), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;We don&#39;t interleave loops with a estimated constant trip count &quot;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;             <span class="stringliteral">&quot;below this number&quot;</span>));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#ae52dda6f96edd7c80db048491bd8af99">ForceTargetNumScalarRegs</a>(</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="stringliteral">&quot;force-target-num-scalar-regs&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;A flag that overrides the target&#39;s number of scalar registers.&quot;</span>));</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a560142fc3cf3a8e07fa9765f94bc7a4e">ForceTargetNumVectorRegs</a>(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="stringliteral">&quot;force-target-num-vector-regs&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;A flag that overrides the target&#39;s number of vector registers.&quot;</span>));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a99463cf52e27f46b31ba55f306e9a8d8">ForceTargetMaxScalarInterleaveFactor</a>(</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="stringliteral">&quot;force-target-max-scalar-interleave&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;A flag that overrides the target&#39;s max interleave factor for &quot;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;             <span class="stringliteral">&quot;scalar loops.&quot;</span>));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#aadb00ad909c8ae2cf77f5fdf0422eda6">ForceTargetMaxVectorInterleaveFactor</a>(</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="stringliteral">&quot;force-target-max-vector-interleave&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;A flag that overrides the target&#39;s max interleave factor for &quot;</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;             <span class="stringliteral">&quot;vectorized loops.&quot;</span>));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a436530ecee5235bf4c602c61b846d613">ForceTargetInstructionCost</a>(</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="stringliteral">&quot;force-target-instruction-cost&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;A flag that overrides the target&#39;s expected cost for &quot;</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;             <span class="stringliteral">&quot;an instruction to a single constant value. Mostly &quot;</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;             <span class="stringliteral">&quot;useful for getting consistent testing.&quot;</span>));</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#ad2af1b354f978aa6964b48c3382f5376">ForceTargetSupportsScalableVectors</a>(</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="stringliteral">&quot;force-target-supports-scalable-vectors&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="stringliteral">&quot;Pretend that scalable vectors are supported, even if the target does &quot;</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="stringliteral">&quot;not support them. This flag should only be used for testing.&quot;</span>));</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#aa26872ae2e00e13535d1a50baa9f5b5e">SmallLoopCost</a>(</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="stringliteral">&quot;small-loop-cost&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(20), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="stringliteral">&quot;The cost of a loop that is considered &#39;small&#39; by the interleaver.&quot;</span>));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#aad2cabd453be4d9c91e47d9ee61a578e">LoopVectorizeWithBlockFrequency</a>(</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="stringliteral">&quot;loop-vectorize-with-block-frequency&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable the use of the block frequency analysis to access PGO &quot;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;             <span class="stringliteral">&quot;heuristics minimizing code growth in cold regions and being more &quot;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;             <span class="stringliteral">&quot;aggressive in hot regions.&quot;</span>));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">// Runtime interleave loops for load/store throughput.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a7a7e3f00efc52b3aedc91687d425617b">EnableLoadStoreRuntimeInterleave</a>(</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="stringliteral">&quot;enable-loadstore-runtime-interleave&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="stringliteral">&quot;Enable runtime interleaving until load/store ports are saturated&quot;</span>));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/// Interleave small loops with scalar reductions.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a5674da6dbea803c20e13f6094e8781cd">InterleaveSmallLoopScalarReduction</a>(</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="stringliteral">&quot;interleave-small-loop-scalar-reduction&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable interleaving for loops with small iteration counts that &quot;</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;             <span class="stringliteral">&quot;contain scalar reductions to expose ILP.&quot;</span>));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/// The number of stores in a loop that are allowed to need predication.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a183a358204f179aa874471fa86e06068">NumberOfStoresToPredicate</a>(</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="stringliteral">&quot;vectorize-num-stores-pred&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max number of stores to be predicated behind an if.&quot;</span>));</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a611e3975b0c17413d87c6c5ed2e121ab">EnableIndVarRegisterHeur</a>(</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="stringliteral">&quot;enable-ind-var-reg-heur&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Count the induction variable only once when interleaving&quot;</span>));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a089aa34b9791fc488d0cd00f40ddb700">EnableCondStoresVectorization</a>(</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="stringliteral">&quot;enable-cond-stores-vec&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable if predication of stores during vectorization.&quot;</span>));</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a4ef03b8373b1c532fec839db60118ff5">MaxNestedScalarReductionIC</a>(</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="stringliteral">&quot;max-nested-scalar-reduction-interleave&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum interleave count to use when interleaving a scalar &quot;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;             <span class="stringliteral">&quot;reduction in a nested loop.&quot;</span>));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="LoopVectorize_8cpp.html#adbab10940d6653d68e6aac48082acb65">PreferInLoopReductions</a>(<span class="stringliteral">&quot;prefer-inloop-reductions&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                           <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Prefer in-loop vector reductions, &quot;</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                    <span class="stringliteral">&quot;overriding the targets preference.&quot;</span>));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#ac050a91bc264472b58f2144ff8638b4c">ForceOrderedReductions</a>(</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="stringliteral">&quot;force-ordered-reductions&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable the vectorisation of loops with in-order (strict) &quot;</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;             <span class="stringliteral">&quot;FP reductions&quot;</span>));</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a159b9f91d009fa5484c1cbad8f102c17">PreferPredicatedReductionSelect</a>(</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="stringliteral">&quot;prefer-predicated-reduction-select&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="stringliteral">&quot;Prefer predicating a reduction operation over an after loop select.&quot;</span>));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>(</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="stringliteral">&quot;enable-vplan-native-path&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable VPlan-native vectorization path with &quot;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;             <span class="stringliteral">&quot;support for outer loop vectorization.&quot;</span>));</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">// This flag enables the stress testing of the VPlan H-CFG construction in the</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">// VPlan-native vectorization path. It must be used in conjuction with</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">// -enable-vplan-native-path. -vplan-verify-hcfg can also be used to enable the</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">// verification of the H-CFGs built.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a9aba1a55848dca801709169068b8d264">VPlanBuildStressTest</a>(</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="stringliteral">&quot;vplan-build-stress-test&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="stringliteral">&quot;Build VPlan for every supported loop nest in the function and bail &quot;</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="stringliteral">&quot;out right after the build (stress test the VPlan H-CFG construction &quot;</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="stringliteral">&quot;in the VPlan-native vectorization path).&quot;</span>));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#af98e93062e9f33018307ffc64d4b009e">llvm::EnableLoopInterleaving</a>(</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="stringliteral">&quot;interleave-loops&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable loop interleaving in Loop vectorization passes&quot;</span>));</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a7f386d38a2c6c22a343243e9e48f7532">llvm::EnableLoopVectorization</a>(</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="stringliteral">&quot;vectorize-loops&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Run the Loop vectorization passes&quot;</span>));</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a363c5daacce6cd5f935f14f969871cdd">PrintVPlansInDotFormat</a>(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="stringliteral">&quot;vplan-print-in-dot-format&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use dot format instead of plain text when dumping VPlans&quot;</span>));</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;cl::boolOrDefault&gt;</a> <a class="code" href="LoopVectorize_8cpp.html#a623732b7467b6516344dec814819f258">ForceSafeDivisor</a>(</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="stringliteral">&quot;force-widen-divrem-via-safe-divisor&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="stringliteral">&quot;Override cost based safe divisor widening for div/rem instructions&quot;</span>));</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">/// A helper function that returns true if the given type is irregular. The</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">/// type is irregular if its allocated size doesn&#39;t equal the store size of an</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">/// element of the corresponding vector type.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#aa407c2e7d895ed29af8cc68563c03065">  378</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopVectorize_8cpp.html#aa407c2e7d895ed29af8cc68563c03065">hasIrregularType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Determine if an array of N elements of type Ty is &quot;bitcast compatible&quot;</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// with a &lt;N x Ty&gt; vector.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// This is only true if there is no padding between the array elements.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSizeInBits(Ty) != <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(Ty);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">/// A helper function that returns the reciprocal of the block probability of</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// predicated blocks. If we return X, we are assuming the predicated block</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/// will execute once for every X iterations of the loop header.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/// TODO: We should use actual block probability here, if available. Currently,</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">///       we always assume predicated blocks have a 50% chance of executing.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">  391</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">getReciprocalPredBlockProb</a>() { <span class="keywordflow">return</span> 2; }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">/// A helper function that returns an integer or floating-point constant with</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/// value C.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a41355f2c2a12e043fa98f666dff27cc3">  395</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="LoopVectorize_8cpp.html#a41355f2c2a12e043fa98f666dff27cc3">getSignedIntOrFpConstant</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, int64_t <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ? <a class="code" href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">ConstantInt::getSigned</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                           : <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/// Returns &quot;best known&quot; trip count for the specified loop \p L as defined by</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// the following procedure:</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">///   1) Returns exact trip count if it is known.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">///   2) Returns expected trip count according to profile data if any.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">///   3) Returns upper bound estimate if it is known.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">///   4) Returns std::nullopt if all of the above failed.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a036986770115ea3dbe00153cbeea478e">  406</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::optional&lt;unsigned&gt; <a class="code" href="LoopVectorize_8cpp.html#a036986770115ea3dbe00153cbeea478e">getSmallBestKnownTC</a>(<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                                   <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// Check if exact trip count is known.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> ExpectedTC = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#abec0c616087c002528fcf80c6583eadd">getSmallConstantTripCount</a>(L))</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> ExpectedTC;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// Check if there is an expected trip count available from profile data.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#aad2cabd453be4d9c91e47d9ee61a578e">LoopVectorizeWithBlockFrequency</a>)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> EstimatedTC = <a class="code" href="namespacellvm.html#a0b3c6dc8e7df65d2385acfe9657abd03">getLoopEstimatedTripCount</a>(L))</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> *EstimatedTC;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Check if upper bound estimate is known.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> ExpectedTC = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a3cc216ff1aa29e15999df96770a870bf">getSmallConstantMaxTripCount</a>(L))</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> ExpectedTC;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">// Forward declare GeneratedRTChecks.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keyword">class </span>GeneratedRTChecks;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> <a class="code" href="structllvm_1_1ShouldRunExtraVectorPasses.html#a42f51564a150e5ecd40230fad2368ee9">ShouldRunExtraVectorPasses::Key</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">/// InnerLoopVectorizer vectorizes loops which contain only one basic</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">/// block to a specified vectorization factor (VF).</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">/// This class performs the widening of scalars into vectors, or multiple</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">/// scalars. This class also implements the following features:</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">/// * It inserts an epilogue loop for handling loops that don&#39;t have iteration</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">///   counts that are known to be a multiple of the vectorization factor.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">/// * It handles the code generation for reduction variables.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">/// * Scalarization (implementation using scalars) of un-vectorizable</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">///   instructions.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">/// InnerLoopVectorizer does not perform any vectorization-legality</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/// checks, and relies on the caller to check for the different legality</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/// aspects. The InnerLoopVectorizer relies on the</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/// LoopVectorizationLegality class to provide information about the induction</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/// and reduction variables that were found to a given vectorization factor.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html">  447</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a> {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a2ea9cfa48f5e86a4fc258e924756d0e2">  449</a></span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2ea9cfa48f5e86a4fc258e924756d0e2">InnerLoopVectorizer</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                      <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>,</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                      <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> VecWidth,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                      <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">MinProfitableTripCount</a>,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                      <span class="keywordtype">unsigned</span> UnrollFactor, <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *LVL,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                      <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> *CM, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                      <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, GeneratedRTChecks &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">RTChecks</a>)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>), <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>),</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>(VecWidth), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>(UnrollFactor),</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.getSE()-&gt;getContext()), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>(LVL), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>(CM), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>),</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">RTChecks</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">RTChecks</a>) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// Query this against the original loop and save it here because the profile</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// of the original loop header may change as the transformation happens.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a93a8f97a1e57c3bce2e7c3473d592c01">OptForSizeBasedOnProfile</a> = <a class="code" href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a>(</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">PGSOQueryType::IRPass</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">MinProfitableTripCount</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">isZero</a>())</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      this-&gt;MinProfitableTripCount = VecWidth;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      this-&gt;MinProfitableTripCount = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">MinProfitableTripCount</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aecacb69b3a2334317cce2a7856f7d30d">~InnerLoopVectorizer</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">  /// Create a new empty loop that will contain vectorized instructions later</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">  /// on, while the old loop will be used as the scalar remainder. Control flow</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">  /// is generated around the vectorized (and scalar epilogue) loops consisting</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">  /// of various checks and bypasses. Return the pre-header block of the new</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">  /// loop and the start value for the canonical induction, if it is != 0. The</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">  /// latter is the case when vectorizing the epilogue loop. In the case of</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">  /// epilogue vectorization, this function is overriden to handle the more</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">  /// complex control flow around the loops.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> std::pair&lt;BasicBlock *, Value *&gt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2822137afbc8a9a1304f1b3b115498db">createVectorizedLoopSkeleton</a>();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">  /// Fix the vectorized code, taking care of header phi&#39;s, live-outs, and more.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae2a4807be3034c8d65b3195b547f22e5">fixVectorizedLoop</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State, <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// Return true if any runtime check is added.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a2e066ef7bc9673cbb2a825189491577d">  489</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2e066ef7bc9673cbb2a825189491577d">areSafetyChecksAdded</a>() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a645c5c5c1e89cb56be66db8db877001d">AddedSafetyChecks</a>; }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">  /// A type for vectorized values in the new loop. Each value from the</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">  /// original loop, when vectorized, is represented by UF vector values in the</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">  /// new unrolled loop, where UF is the unroll factor.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a1f4a2ef1f084ba435289cfa02460f971">  494</a></span>&#160;<span class="comment"></span>  <span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallVector.html">VectorParts</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 2&gt;</a>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /// A helper function to scalarize a single Instruction in the innermost loop.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  /// Generates a sequence of scalar instances for each lane between \p MinLane</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">  /// and \p MaxLane, times each part between \p MinPart and \p MaxPart,</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">  /// inclusive. Uses the VPValue operands from \p RepRecipe instead of \p</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">  /// Instr&#39;s operands.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">scalarizeInstruction</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr,</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                            <a class="code" href="classllvm_1_1VPReplicateRecipe.html">VPReplicateRecipe</a> *RepRecipe,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a> &amp;Instance, <span class="keywordtype">bool</span> IfPredicateInstr,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                            <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">  /// Construct the vector value of a scalarized value \p V one lane at a time.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae26a2cbdb26b960379cca81872a10dc1">packScalarIntoVectorValue</a>(<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <span class="keyword">const</span> <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a> &amp;Instance,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                 <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">  /// Try to vectorize interleaved access group \p Group with the base address</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  /// given in \p Addr, optionally masking the vector operations if \p</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">  /// BlockInMask is non-null. Use \p State to translate given VPValues to IR</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">  /// values in the vectorized loop.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#abb6b4f5c0e1dad90fe7bc7a920c4b1bf">vectorizeInterleaveGroup</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup&lt;Instruction&gt;</a> *Group,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> VPDefs,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State, <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> StoredValues,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                                <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *BlockInMask = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">  /// Fix the non-induction PHIs in \p Plan.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a8d204031ffe1bcc568fb040aebe5f278">fixNonInductionPHIs</a>(<a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">  /// Returns true if the reordering of FP operations is not allowed, but we are</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">  /// able to vectorize with strict in-order reductions for the given RdxDesc.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">useOrderedReductions</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">  /// Create a broadcast instruction. This method generates a broadcast</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">  /// instruction (shuffle) for loop invariant values and for the induction</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">  /// value. If this is the induction variable then we extend it to N, N+1, ...</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">  /// this is needed because each iteration in the loop corresponds to a SIMD</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">  /// element.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a111d43f8be3b83c9087b11878f581c09">getBroadcastInstrs</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Returns the resume value (bc.merge.rdx) for a reduction as</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// generated by fixReduction.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a4d6937e8333699792612fd75586a9538">getReductionResumeValue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">  /// Create a new phi node for the induction variable \p OrigPhi to resume</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">  /// iteration count in the scalar epilogue, from where the vectorized loop</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">  /// left off. In cases where the loop skeleton is more complicated (eg.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">  /// epilogue vectorization) and the resume values can come from an additional</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">  /// bypass block, the \p AdditionalBypass pair provides information about the</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">  /// bypass block and the end value on the edge from bypass to this loop.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7137d6863a9184da04c18725908e413">createInductionResumeValue</a>(</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OrigPhi, <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> BypassBlocks,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      std::pair&lt;BasicBlock *, Value *&gt; AdditionalBypass = {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>});</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a409249e01d3e65716e4c76fa3369a4e0">  550</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1LoopVectorizationPlanner.html">LoopVectorizationPlanner</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">  /// A small list of PHINodes.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a7d0ec07a204a42b659f723c619bc906a">  553</a></span>&#160;<span class="comment"></span>  <span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallVector.html">PhiVector</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 4&gt;</a>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">  /// A type for scalarized values in the new loop. Each value from the</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">  /// original loop, when scalarized, is represented by UF x VF scalar values</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">  /// in the new unrolled loop, where UF is the unroll factor and VF is the</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">  /// vectorization factor.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a676de2f8c2a0c028ebb2dedb073216c5">  559</a></span>&#160;<span class="comment"></span>  <span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallVector.html">ScalarParts</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;Value *, 4&gt;</a>, 2&gt;;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">  /// Set up the values of the IVs correctly when exiting the vector loop.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a4a2f293d45c29130bf71bfa9680c5e40">fixupIVUsers</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OrigPhi, <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;II,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *EndValue,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MiddleBlock, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *VectorHeader,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">  /// Handle all cross-iteration phis in the header.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9092d12fba0d0d26f3eedf809d7348fe">fixCrossIterationPHIs</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">  /// Create the exit value of first order recurrences in the middle block and</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">  /// update their users.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ad8b1b881fbc9264bdb8c54d6f354dafa">fixFixedOrderRecurrence</a>(<a class="code" href="structllvm_1_1VPFirstOrderRecurrencePHIRecipe.html">VPFirstOrderRecurrencePHIRecipe</a> *PhiR,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                               <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">  /// Create code for the loop exit value of the reduction.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af35c2cd70263a0ef121763297ec04fde">fixReduction</a>(<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html">VPReductionPHIRecipe</a> *Phi, <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">  /// Clear NSW/NUW flags from reduction instructions if necessary.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac4804fc99b4e6fcfe166821970d0dd1c">clearReductionWrapFlags</a>(<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html">VPReductionPHIRecipe</a> *PhiR,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                               <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">  /// Iteratively sink the scalarized operands of a predicated instruction into</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">  /// the block that was created for it.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0a5c60e5cebd520f95b9813fd9807016">sinkScalarOperands</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PredInst);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">  /// Shrinks vector element sizes to the smallest bitwidth they can be legally</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">  /// represented as.</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a78472ee88ead39b42e99ce633c22428d">truncateToMinimalBitwidths</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">  /// Returns (and creates if needed) the original loop trip count.</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBlock);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">  /// Returns (and creates if needed) the trip count of the widened loop.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">getOrCreateVectorTripCount</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBlock);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">  /// Returns a bitcasted value to the requested vector type.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">  /// Also handles bitcasts of vector&lt;float&gt; &lt;-&gt; vector&lt;pointer&gt; types.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a208c011242ca3423a05a6db01b29910c">createBitOrPointerCast</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *DstVTy,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">  /// Emit a bypass check to see if the vector trip count is zero, including if</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">  /// it overflows.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a72c491cdf8cf0283d87008831431f917">emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">  /// Emit a bypass check to see if all of the SCEV assumptions we&#39;ve</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">  /// had to make are correct. Returns the block containing the checks or</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">  /// nullptr if no checks have been added.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e">emitSCEVChecks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">  /// Emit bypass checks to check any memory assumptions we may have made.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">  /// Returns the block containing the checks or nullptr if no checks have been</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">  /// added.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca">emitMemRuntimeChecks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">  /// Emit basic blocks (prefixed with \p Prefix) for the iteration check,</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">  /// vector loop preheader, middle block and scalar preheader.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795">createVectorLoopSkeleton</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">  /// Create new phi nodes for the induction variables to resume iteration count</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">  /// in the scalar epilogue, from where the vectorized loop left off.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">  /// In cases where the loop skeleton is more complicated (eg. epilogue</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">  /// vectorization) and the resume values can come from an additional bypass</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">  /// block, the \p AdditionalBypass pair provides information about the bypass</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">  /// block and the end value on the edge from bypass to this loop.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2a6e6e87c238d303539a31eb41d668e3">createInductionResumeValues</a>(</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      std::pair&lt;BasicBlock *, Value *&gt; AdditionalBypass = {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>});</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">  /// Complete the loop skeleton by adding debug MDs, creating appropriate</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">  /// conditional branches in the middle block, preparing the builder and</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">  /// running the verifier. Return the preheader of the completed vector loop.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253">completeLoopSkeleton</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">  /// Collect poison-generating recipes that may generate a poison value that is</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">  /// used after vectorization, even when their operands are not poison. Those</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">  /// recipes meet the following conditions:</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">  ///  * Contribute to the address computation of a recipe generating a widen</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">  ///    memory load/store (VPWidenMemoryInstructionRecipe or</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">  ///    VPInterleaveRecipe).</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">  ///  * Such a widen memory load/store has at least one underlying Instruction</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">  ///    that is in a basic block that needs predication and after vectorization</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">  ///    the generated instruction won&#39;t be predicated.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a287121278d5d3dbbd2a50bc0ee211fa4">collectPoisonGeneratingRecipes</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">  /// Allow subclasses to override and print debug traces before/after vplan</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">  /// execution, when trace information is requested.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a00579d597c88e5f3c51754bcd9ec5658">  646</a></span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a00579d597c88e5f3c51754bcd9ec5658">printDebugTracesAtStart</a>(){};</div>
<div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a9e275f16680d4f09dbcc0dd7d323a075">  647</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9e275f16680d4f09dbcc0dd7d323a075">printDebugTracesAtEnd</a>(){};</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">  /// The original loop.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">  /// A wrapper around ScalarEvolution used to add runtime SCEV checks. Applies</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">  /// dynamic knowledge to simplify SCEV expressions and converts them to a</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">  /// more usable form.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">  655</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">  /// Loop Info.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">  658</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">  /// Dominator Tree.</span></div>
<div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">  661</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">  /// Target Library Info.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">  664</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">  /// Target Transform Info.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a238e95d82d095fec9241f2f5b81db3c5">  667</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a238e95d82d095fec9241f2f5b81db3c5">TTI</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">  /// Assumption Cache.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">  670</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">  /// Interface to emit optimization remarks.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">  673</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">  /// The vectorization SIMD factor to use. Each vector will have this many</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">  /// vector elements.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">  677</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">  679</a></span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">MinProfitableTripCount</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">  /// The vectorization unroll factor to use. Each scalar is vectorized to this</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">  /// many different vector instructions.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">  683</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">  /// The builder that we use</span></div>
<div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">  686</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">// --- Vectorization state ---</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">  /// The vector-loop preheader.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">  691</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">  /// The scalar-loop preheader.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">  694</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">  /// Middle Block between the vector and the scalar.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">  697</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">  /// The unique ExitBlock of the scalar loop if one exists.  Note that</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">  /// there can be multiple exiting edges reaching this block.</span></div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">  701</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">  /// The scalar loop body.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a07bd7f4b4c433f0197dbdcf68941e5fd">  704</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a07bd7f4b4c433f0197dbdcf68941e5fd">LoopScalarBody</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">  /// A list of all bypass blocks. The first block is the entry of the loop.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">  707</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">  /// Store instructions that were predicated.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a47eab9fa7cfa73af0b164da3fca49a0f">  710</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a47eab9fa7cfa73af0b164da3fca49a0f">PredicatedInstructions</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">  /// Trip count of the original loop.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">  713</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  /// Trip count of the widened loop (TripCount - TripCount % (VF*UF))</span></div>
<div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">  716</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">  /// The legality analysis.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">  719</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">  /// The profitablity analysis.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">  722</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// Record whether runtime checks are added.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a645c5c5c1e89cb56be66db8db877001d">  725</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a645c5c5c1e89cb56be66db8db877001d">AddedSafetyChecks</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// Holds the end values for each induction variable. We save the end values</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// so we can later fix-up the external users of the induction variables.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a1d2bb8dc96ed2e49d7588600b9182333">  729</a></span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;PHINode *, Value *&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1d2bb8dc96ed2e49d7588600b9182333">IVEndValues</a>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">  /// BFI and PSI are used to check for profile guided size optimizations.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">  732</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">  733</a></span>&#160;  <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// Whether this loop should be optimized for size based on profile guided size</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// optimizatios.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a93a8f97a1e57c3bce2e7c3473d592c01">  737</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a93a8f97a1e57c3bce2e7c3473d592c01">OptForSizeBasedOnProfile</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">  /// Structure to hold information about generated runtime checks, responsible</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">  /// for cleaning the checks, if vectorization turns out unprofitable.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">  741</a></span>&#160;<span class="comment"></span>  GeneratedRTChecks &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">RTChecks</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">// Holds the resume values for reductions in the loops, used to set the</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// correct start value of reduction PHIs when vectorizing the epilogue.</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;const RecurrenceDescriptor *, PHINode *, 4&gt;</a></div>
<div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a3331ef52e6ae007bfc63ddb9fa44318d">  746</a></span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a3331ef52e6ae007bfc63ddb9fa44318d">ReductionResumeValues</a>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;};</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopUnroller.html">  749</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1InnerLoopUnroller.html">InnerLoopUnroller</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a> {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopUnroller.html#a1b8e7c1c617e1c5286e2912cdb118401">  751</a></span>&#160;  <a class="code" href="classllvm_1_1InnerLoopUnroller.html#a1b8e7c1c617e1c5286e2912cdb118401">InnerLoopUnroller</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>,</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <span class="keywordtype">unsigned</span> UnrollFactor,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *LVL,</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> *CM, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>,</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, GeneratedRTChecks &amp;<a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>,</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                            <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a>::getFixed(1),</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                            <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a>::getFixed(1), UnrollFactor, LVL, CM,</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, <a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>) {}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *getBroadcastInstrs(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;};</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/// Encapsulate information regarding vectorization of a loop and its epilogue.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">/// This information is meant to be updated and used across two stages of</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/// epilogue vectorization.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">  771</a></span>&#160;<span class="comment"></span><span class="keyword">struct </span><a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">EpilogueLoopVectorizationInfo</a> {</div>
<div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">  772</a></span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">MainLoopVF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(0);</div>
<div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">  773</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">MainLoopUF</a> = 0;</div>
<div class="line"><a name="l00774"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">  774</a></span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(0);</div>
<div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">  775</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a> = 0;</div>
<div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">  776</a></span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00777"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">  777</a></span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">  778</a></span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">  779</a></span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">  780</a></span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">  781</a></span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">VectorTripCount</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#aa22b873ceebeeaae4b6384da2b8683c3">  783</a></span>&#160;  <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#aa22b873ceebeeaae4b6384da2b8683c3">EpilogueLoopVectorizationInfo</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MVF, <span class="keywordtype">unsigned</span> MUF,</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> EVF, <span class="keywordtype">unsigned</span> EUF)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      : <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">MainLoopVF</a>(MVF), <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">MainLoopUF</a>(MUF), <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>(EVF), <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a>(EUF) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EUF == 1 &amp;&amp;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;           <span class="stringliteral">&quot;A high UF for the epilogue loop is likely not beneficial.&quot;</span>);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;};</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">/// An extension of the inner loop vectorizer that creates a skeleton for a</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">/// vectorized loop that has its epilogue (residual) also vectorized.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">/// The idea is to run the vplan on a given loop twice, firstly to setup the</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">/// skeleton and vectorize the main loop, and secondly to complete the skeleton</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">/// from the first step and vectorize the epilogue.  This is achieved by</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">/// deriving two concrete strategy classes from this base class and invoking</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">/// them in succession from the loop vectorizer planner.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">  798</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">InnerLoopAndEpilogueVectorizer</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a> {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#a38cf9efacb031a3c5937226fe180d9ca">  800</a></span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#a38cf9efacb031a3c5937226fe180d9ca">InnerLoopAndEpilogueVectorizer</a>(</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">EpilogueLoopVectorizationInfo</a> &amp;<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *LVL, <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">llvm::LoopVectorizationCostModel</a> *CM,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>,</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      GeneratedRTChecks &amp;Checks)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>,</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                            <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.MainLoopVF, <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.MainLoopVF, <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.MainLoopUF, LVL,</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                            CM, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, Checks),</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>) {}</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Override this function to handle the more complex control flow around the</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// three loops.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ade960d0214d8579239e68d98a7242a2d">  815</a></span>&#160;  std::pair&lt;BasicBlock *, Value *&gt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ade960d0214d8579239e68d98a7242a2d">createVectorizedLoopSkeleton</a>() final {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#a823c6809d079aeeab3510ee8287c75bf">createEpilogueVectorizedLoopSkeleton</a>();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">  /// The interface for creating a vectorized skeleton using one of two</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">  /// different strategies, each corresponding to one execution of the vplan</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">  /// as described above.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> std::pair&lt;BasicBlock *, Value *&gt;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#a823c6809d079aeeab3510ee8287c75bf">createEpilogueVectorizedLoopSkeleton</a>() = 0;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">  /// Holds and updates state information required to vectorize the main loop</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">  /// and its epilogue in two separate passes. This setup helps us avoid</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">  /// regenerating and recomputing runtime safety checks. It also helps us to</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">  /// shorten the iteration-count-check path length for the cases where the</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">  /// iteration count of the loop is so small that the main vector loop is</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">  /// completely skipped.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">  831</a></span>&#160;<span class="comment"></span>  <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">EpilogueLoopVectorizationInfo</a> &amp;<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;};</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">/// A specialized derived class of inner loop vectorizer that performs</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">/// vectorization of *main* loops in the process of vectorizing loops and their</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">/// epilogues.</span></div>
<div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerMainLoop.html">  837</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html">EpilogueVectorizerMainLoop</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">InnerLoopAndEpilogueVectorizer</a> {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerMainLoop.html#a0c93ba172c5dbd2e1e76718981ac1b1e">  839</a></span>&#160;  <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#a0c93ba172c5dbd2e1e76718981ac1b1e">EpilogueVectorizerMainLoop</a>(</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">EpilogueLoopVectorizationInfo</a> &amp;<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *LVL, <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">llvm::LoopVectorizationCostModel</a> *CM,</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>,</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      GeneratedRTChecks &amp;<a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      : <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">InnerLoopAndEpilogueVectorizer</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>,</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                                       <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>, LVL, CM, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, <a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>) {}<span class="comment"></span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">  /// Implements the interface for creating a vectorized skeleton using the</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">  /// *main loop* strategy (ie the first pass of vplan execution).</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment"></span>  std::pair&lt;BasicBlock *, Value *&gt; <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#ab976353361314366d6ba4fa1127884fe">createEpilogueVectorizedLoopSkeleton</a>() final;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;protected:<span class="comment"></span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">  /// Emits an iteration count bypass check once for the main loop (when \p</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">  /// ForEpilogue is false) and once for the epilogue loop (when \p</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">  /// ForEpilogue is true).</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25">emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass, <span class="keywordtype">bool</span> ForEpilogue);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aad9eb57dcbd9a2c3fd1993685783d7f7">printDebugTracesAtStart</a>() override;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#a87a0c8bda4e9e23e896e46d0a2208c17">printDebugTracesAtEnd</a>() override;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;};</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">// A specialized derived class of inner loop vectorizer that performs</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">// vectorization of *epilogue* loops in the process of vectorizing loops and</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">// their epilogues.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html">  865</a></span>&#160;class <a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html">EpilogueVectorizerEpilogueLoop</a> : public <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">InnerLoopAndEpilogueVectorizer</a> {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a1b2c87aa19d1f80725542eb9348a6742">  867</a></span>&#160;  <a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a1b2c87aa19d1f80725542eb9348a6742">EpilogueVectorizerEpilogueLoop</a>(</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>,</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">EpilogueLoopVectorizationInfo</a> &amp;<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>,</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *LVL, <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">llvm::LoopVectorizationCostModel</a> *CM,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>,</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      GeneratedRTChecks &amp;Checks)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      : <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">InnerLoopAndEpilogueVectorizer</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>,</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                                       <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>, LVL, CM, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, Checks) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a> = <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  }<span class="comment"></span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">  /// Implements the interface for creating a vectorized skeleton using the</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">  /// *epilogue loop* strategy (ie the second pass of vplan execution).</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment"></span>  std::pair&lt;BasicBlock *, Value *&gt; <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#ab976353361314366d6ba4fa1127884fe">createEpilogueVectorizedLoopSkeleton</a>() final;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;protected:<span class="comment"></span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">  /// Emits an iteration count bypass check after the main vector loop has</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">  /// finished to see if there are any iterations left to execute by either</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">  /// the vector epilogue or the scalar epilogue.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *emitMinimumVectorEpilogueIterCountCheck(</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                                                      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass,</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                                      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Insert);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aad9eb57dcbd9a2c3fd1993685783d7f7">printDebugTracesAtStart</a>() override;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#a87a0c8bda4e9e23e896e46d0a2208c17">printDebugTracesAtEnd</a>() override;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;};</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">/// Look for a meaningful debug location on the instruction or it&#39;s</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">/// operands.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ae03080593554f2ae8e8aeedec6ab55f6">  897</a></span>&#160;<span class="comment"></span>static <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="LoopVectorize_8cpp.html#ae03080593554f2ae8e8aeedec6ab55f6">getDebugLocFromInstOrOperands</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> Empty;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc() != Empty)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands()) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OpInst = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">if</span> (OpInst-&gt;getDebugLoc() != Empty)</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">return</span> OpInst;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">/// Write a \p DebugMsg about vectorization to the debug output stream. If \p I</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/// is passed, the message relates to that particular instruction.</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"></span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a1a861c376095fff2ee736b0a743cc44e">  917</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#a1a861c376095fff2ee736b0a743cc44e">debugVectorizationMessage</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>,</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> DebugMsg,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> &lt;&lt; DebugMsg;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">/// Create an analysis remark that explains why vectorization failed</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">/// \p PassName is the name of the pass (e.g. can be AlwaysPrint).  \p</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">/// RemarkName is the identifier for the remark.  If \p I is passed it is an</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">/// instruction that prevents vectorization.  Otherwise \p TheLoop is used for</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">/// the location of the remark.  \return the remark object that can be</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">/// streamed to.</span></div>
<div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a966bd95f68b2df47061387f8d169db54">  936</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a> <a class="code" href="LoopVectorize_8cpp.html#a966bd95f68b2df47061387f8d169db54">createLVAnalysis</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="X86LowerAMXIntrinsics_8cpp.html#adb9257105a403ef9d0773b87693f7779">PassName</a>,</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> RemarkName, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *TheLoop, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CodeRegion = TheLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = TheLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    CodeRegion = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="comment">// If there is no debug location attached to the instruction, revert back to</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">// using the loop&#39;s.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc())</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="X86LowerAMXIntrinsics_8cpp.html#adb9257105a403ef9d0773b87693f7779">PassName</a>, RemarkName, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CodeRegion);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">/// Return a value for Step multiplied by VF.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno"><a class="line" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">  955</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                       int64_t Step) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Expected an integer step&quot;</span>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *StepVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Step * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateVScale(StepVal) : StepVal;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;}</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">/// Return the runtime value for VF.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">  963</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateVScale(EC) : EC;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno"><a class="line" href="namespacellvm.html#adda962906fa6521f6794e5af3bf06c71">  968</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="namespacellvm.html#adda962906fa6521f6794e5af3bf06c71">createTripCountSCEV</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BackedgeTakenCount = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#ada1db826f3d2266fe2c4d06218d8d342">getBackedgeTakenCount</a>();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;SCEVCouldNotCompute&gt;(BackedgeTakenCount) &amp;&amp; <span class="stringliteral">&quot;Invalid loop count&quot;</span>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE = *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// The exit count might have the type of i64 while the phi is i32. This can</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// happen if we have an induction variable that is sign extended before the</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// compare. The only way that we get a backedge taken count is that the</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="comment">// induction variable was signed and as such will not overflow. In such a case</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// truncation is legal.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordflow">if</span> (SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(BackedgeTakenCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()) &gt;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      IdxTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>())</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    BackedgeTakenCount = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a426976cfd81411f49f7e5fe77ee4e3a4">getTruncateOrNoop</a>(BackedgeTakenCount, IdxTy);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  BackedgeTakenCount = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a933eb87303a6ce51c8894e431fbc389b">getNoopOrZeroExtend</a>(BackedgeTakenCount, IdxTy);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// Get the total trip count from the count by adding 1.</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">return</span> SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(BackedgeTakenCount,</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                       SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">getOne</a>(BackedgeTakenCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()));</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;}</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab4ab56724794d299f76a8fada309a727">  989</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#ab4ab56724794d299f76a8fada309a727">getRuntimeVFAsFloat</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *FTy,</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                                  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() &amp;&amp; <span class="stringliteral">&quot;Expected floating point type!&quot;</span>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(FTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(), FTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RuntimeVF = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, IntTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateUIToFP(RuntimeVF, FTy);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">  997</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> DebugMsg,</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> OREMsg, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ORETag,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *TheLoop,</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="LoopVectorize_8cpp.html#a1a861c376095fff2ee736b0a743cc44e">debugVectorizationMessage</a>(<span class="stringliteral">&quot;Not vectorizing: &quot;</span>, DebugMsg, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> Hints(TheLoop, <span class="keyword">true</span> <span class="comment">/* doesn&#39;t matter */</span>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>(</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <a class="code" href="LoopVectorize_8cpp.html#a966bd95f68b2df47061387f8d169db54">createLVAnalysis</a>(Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#abcf8c2b35316773f1ab0ba70aeb2a6de">vectorizeAnalysisPassName</a>(), ORETag, TheLoop, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;loop not vectorized: &quot;</span> &lt;&lt; OREMsg);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"><a class="line" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d"> 1008</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ORETag,</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                             <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *TheLoop,</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                             <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="LoopVectorize_8cpp.html#a1a861c376095fff2ee736b0a743cc44e">debugVectorizationMessage</a>(<span class="stringliteral">&quot;&quot;</span>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> Hints(TheLoop, <span class="keyword">true</span> <span class="comment">/* doesn&#39;t matter */</span>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>(</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <a class="code" href="LoopVectorize_8cpp.html#a966bd95f68b2df47061387f8d169db54">createLVAnalysis</a>(Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#abcf8c2b35316773f1ab0ba70aeb2a6de">vectorizeAnalysisPassName</a>(), ORETag, TheLoop, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;}</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">/// \return string containing a file name and a line # for the given loop.</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#aa74e864ddfcd1582f11672ed11958ad5"> 1022</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::string <a class="code" href="LoopVectorize_8cpp.html#aa74e864ddfcd1582f11672ed11958ad5">getDebugLocString</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  std::string Result;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">if</span> (L) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(Result);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> LoopDbgLoc = L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>())</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      LoopDbgLoc.print(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="comment">// Just print the module name.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a168fb8190f7a201fd0c85b276cac268f">getModuleIdentifier</a>();</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.<a class="code" href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;}</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a287121278d5d3dbbd2a50bc0ee211fa4"> 1037</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a287121278d5d3dbbd2a50bc0ee211fa4">InnerLoopVectorizer::collectPoisonGeneratingRecipes</a>(</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// Collect recipes in the backward slice of `Root` that may generate a poison</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// value that is used after vectorization.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;VPRecipeBase *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keyword">auto</span> collectPoisonGeneratingInstrsInBackwardSlice([&amp;](<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *Root) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPRecipeBase *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    Worklist.push_back(Root);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// Traverse the backward slice of Root through its use-def chain.</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      VPRecipeBase *CurRec = Worklist.back();</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      Worklist.pop_back();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      if (!Visited.insert(CurRec).second)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        continue;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="comment">// Prune search if we find another recipe generating a widen memory</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="comment">// instruction. Widen memory instructions involved in address computation</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">// will lead to gather/scatter instructions, which don&#39;t need to be</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="comment">// handled.</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      if (isa&lt;VPWidenMemoryInstructionRecipe&gt;(CurRec) ||</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;          isa&lt;VPInterleaveRecipe&gt;(CurRec) ||</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;          isa&lt;VPScalarIVStepsRecipe&gt;(CurRec) ||</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;          isa&lt;VPCanonicalIVPHIRecipe&gt;(CurRec) ||</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          isa&lt;VPActiveLaneMaskPHIRecipe&gt;(CurRec))</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        continue;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="comment">// This recipe contributes to the address computation of a widen</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="comment">// load/store. Collect recipe if its underlying instruction has</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="comment">// poison-generating flags.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      Instruction *Instr = CurRec-&gt;getUnderlyingInstr();</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      if (Instr &amp;&amp; Instr-&gt;hasPoisonGeneratingFlags())</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        State.MayGeneratePoisonRecipes.insert(CurRec);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="comment">// Add new definitions to the worklist.</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      for (VPValue *operand : CurRec-&gt;operands())</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        if (VPRecipeBase *OpDef = operand-&gt;getDefiningRecipe())</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;          Worklist.push_back(OpDef);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  });</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// Traverse all the recipes in the VPlan and collect the poison-generating</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// recipes in the backward slice starting at the address of a VPWidenRecipe or</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">// VPInterleaveRecipe.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keyword">auto</span> Iter = <a class="code" href="namespacellvm.html#a4c2438a07fc002678d8d1736e72b2e6b">vp_depth_first_deep</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">Plan</a>-&gt;<a class="code" href="classllvm_1_1VPlan.html#a386bbf298b1f43a45977b7414925f8a3">getEntry</a>());</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB : VPBlockUtils::blocksOnly&lt;VPBasicBlock&gt;(Iter)) {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> &amp;Recipe : *VPBB) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *WidenRec = dyn_cast&lt;VPWidenMemoryInstructionRecipe&gt;(&amp;Recipe)) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;UnderlyingInstr = WidenRec-&gt;getIngredient();</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *AddrDef = WidenRec-&gt;getAddr()-&gt;getDefiningRecipe();</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">if</span> (AddrDef &amp;&amp; WidenRec-&gt;isConsecutive() &amp;&amp;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3b78b24a3c241e611957b82cd12640da">blockNeedsPredication</a>(UnderlyingInstr.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()))</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;          collectPoisonGeneratingInstrsInBackwardSlice(AddrDef);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *InterleaveRec = dyn_cast&lt;VPInterleaveRecipe&gt;(&amp;Recipe)) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *AddrDef = InterleaveRec-&gt;getAddr()-&gt;getDefiningRecipe();</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <span class="keywordflow">if</span> (AddrDef) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;          <span class="comment">// Check if any member of the interleave group needs predication.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup&lt;Instruction&gt;</a> *InterGroup =</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;              InterleaveRec-&gt;getInterleaveGroup();</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;          <span class="keywordtype">bool</span> NeedPredication = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, NumMembers = InterGroup-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#af81c826ee51addc3321e4ef1c1934696">getNumMembers</a>();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;               <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumMembers; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = InterGroup-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#ab945330dc19d757dfe310145636b370c">getMember</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordflow">if</span> (Member)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;              NeedPredication |=</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3b78b24a3c241e611957b82cd12640da">blockNeedsPredication</a>(Member-&gt;getParent());</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;          }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;          <span class="keywordflow">if</span> (NeedPredication)</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            collectPoisonGeneratingInstrsInBackwardSlice(AddrDef);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a4d6937e8333699792612fd75586a9538"> 1115</a></span>&#160;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a4d6937e8333699792612fd75586a9538">InnerLoopVectorizer::getReductionResumeValue</a>(</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keyword">auto</span> It = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a3331ef52e6ae007bfc63ddb9fa44318d">ReductionResumeValues</a>.find(&amp;RdxDesc);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(It != <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a3331ef52e6ae007bfc63ddb9fa44318d">ReductionResumeValues</a>.end() &amp;&amp;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;         <span class="stringliteral">&quot;Expected to find a resume value for the reduction.&quot;</span>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">return</span> It-&gt;second;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;}</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">// Loop vectorization cost-model hints how the scalar epilogue loop should be</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">// lowered.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d"> 1127</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">ScalarEpilogueLowering</a> {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// The default: allowing scalar epilogues.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7"> 1130</a></span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// Vectorization with OptForSize: don&#39;t allow epilogues.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7"> 1133</a></span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7">CM_ScalarEpilogueNotAllowedOptSize</a>,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// A special case of vectorisation with OptForSize: loops with a very small</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// trip count are considered for vectorization under OptForSize, thereby</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// making sure the cost of their loop body is dominant, free of runtime</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// guards and scalar iteration overheads.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da0a5c3a3ea2de39aa77f3e6da8de4d5bd"> 1139</a></span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da0a5c3a3ea2de39aa77f3e6da8de4d5bd">CM_ScalarEpilogueNotAllowedLowTripLoop</a>,</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="comment">// Loop hint predicate indicating an epilogue is undesired.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354"> 1142</a></span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>,</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// Directive indicating we must either tail fold or not vectorize</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206"> 1145</a></span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206">CM_ScalarEpilogueNotAllowedUsePredicate</a></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;};</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">/// ElementCountComparator creates a total ordering for ElementCount</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">/// for the purposes of using it in a set structure.</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="structllvm_1_1ElementCountComparator.html"> 1150</a></span>&#160;<span class="comment"></span><span class="keyword">struct </span><a class="code" href="structllvm_1_1ElementCountComparator.html">ElementCountComparator</a> {</div>
<div class="line"><a name="l01151"></a><span class="lineno"><a class="line" href="structllvm_1_1ElementCountComparator.html#aee3431839d5c0c1a22a7d45ff5fc45da"> 1151</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1ElementCountComparator.html#aee3431839d5c0c1a22a7d45ff5fc45da">operator()</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">return</span> std::make_tuple(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.isScalable(), <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getKnownMinValue()) &lt;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;           std::make_tuple(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isScalable(), <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getKnownMinValue());</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;};</div>
<div class="line"><a name="l01156"></a><span class="lineno"><a class="line" href="namespacellvm.html#abb366cb1ba551c093b12eb2302e9818e"> 1156</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallSet.html">ElementCountSet</a> = <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;ElementCount, 16, ElementCountComparator&gt;</a>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2d1c8f6c08d3d6f2e5f3354027997a29"> 1158</a></span>&#160;<span class="keyword">using</span> <a class="code" href="namespacellvm.html#a2d1c8f6c08d3d6f2e5f3354027997a29">InstructionVFPair</a> = std::pair&lt;Instruction *, ElementCount&gt;;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">/// LoopVectorizationCostModel - estimates the expected speedups due to</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">/// vectorization.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">/// In many cases vectorization is not profitable. This can happen because of</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">/// a number of reasons. In this class we mainly attempt to predict the</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">/// expected speedup/slowdowns due to the supported instruction set. We use the</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">/// TargetTransformInfo to query the different backends for the cost of</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">/// different operations.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html"> 1167</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a405e73f32c9044b8b14648b62cb2ef30"> 1169</a></span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a405e73f32c9044b8b14648b62cb2ef30">LoopVectorizationCostModel</a>(<a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">ScalarEpilogueLowering</a> <span class="keywordtype">SEL</span>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                             <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                             <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>,</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1DemandedBits.html">DemandedBits</a> *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>,</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                             <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                             <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> *Hints,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                             <a class="code" href="classllvm_1_1InterleavedAccessInfo.html">InterleavedAccessInfo</a> &amp;IAI)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      : ScalarEpilogueStatus(SEL), TheLoop(L), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>),</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>), <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>(<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>), TheFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        Hints(Hints), InterleaveInfo(IAI) {}</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">  /// \return An upper bound for the vectorization factors (both fixed and</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">  /// scalable). If the factors are 0, vectorization and interleaving should be</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">  /// avoided up front.</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment"></span>  <a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a> computeMaxVF(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF, <span class="keywordtype">unsigned</span> UserIC);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">  /// \return True if runtime checks are required for vectorization, and false</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">  /// otherwise.</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> runtimeChecksRequired();</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">  /// \return The most profitable vectorization factor and the cost of that VF.</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">  /// This method checks every VF in \p CandidateVFs. If UserVF is not ZERO</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">  /// then this vectorization factor will be selected if vectorization is</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">  /// possible.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment"></span>  <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  selectVectorizationFactor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">ElementCountSet</a> &amp;CandidateVFs);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  selectEpilogueVectorizationFactor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxVF,</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html">LoopVectorizationPlanner</a> &amp;LVP);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">  /// Setup cost-based decisions for user vectorization factor.</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">  /// \return true if the UserVF is a feasible VF to be chosen.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a885ad9ea73b97e3154433e5c37fefa99"> 1204</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a885ad9ea73b97e3154433e5c37fefa99">selectUserVectorizationFactor</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    collectUniformsAndScalars(UserVF);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    collectInstsToScalarize(UserVF);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">return</span> expectedCost(UserVF).first.isValid();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">  /// \return The size (in bits) of the smallest and widest types in the code</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">  /// that needs to be vectorized. We ignore values that remain scalar such as</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">  /// 64 bit loop indices.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"></span>  std::pair&lt;unsigned, unsigned&gt; getSmallestAndWidestTypes();</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">  /// \return The desired interleave count.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">  /// If interleave count has been specified by metadata it will be returned.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">  /// Otherwise, the interleave count is computed and returned. VF and LoopCost</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">  /// are the selected vectorization factor and the cost of the selected VF.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> selectInterleaveCount(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopCost);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">  /// Memory access instruction may be vectorized in more than one way.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">  /// Form of instruction after vectorization depends on cost.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">  /// This function takes cost-based decisions for Load/Store instructions</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">  /// and collects them in a map. This decisions map is used for building</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">  /// the lists of loop-uniform and loop-scalar instructions.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">  /// The calculated cost is saved with widening decision in order to</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">  /// avoid redundant calculations.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setCostBasedWideningDecision(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">  /// A struct that represents some properties of the register usage</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">  /// of a loop.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html"> 1232</a></span>&#160;<span class="comment"></span>  <span class="keyword">struct </span><a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html">RegisterUsage</a> {<span class="comment"></span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">    /// Holds the number of loop invariant values that are used in the loop.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">    /// The key is ClassID of target-provided register class.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a12f1d225b87b9cb583e78478d9ef3b9c"> 1235</a></span>&#160;<span class="comment"></span>    <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;unsigned, unsigned, 4&gt;</a> <a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a12f1d225b87b9cb583e78478d9ef3b9c">LoopInvariantRegs</a>;<span class="comment"></span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">    /// Holds the maximum number of concurrent live intervals in the loop.</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">    /// The key is ClassID of target-provided register class.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a0ae3b197ca92417681a2865b605e56a9"> 1238</a></span>&#160;<span class="comment"></span>    <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;unsigned, unsigned, 4&gt;</a> <a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a0ae3b197ca92417681a2865b605e56a9">MaxLocalUsers</a>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  };</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">  /// \return Returns information about the register usages of the loop for the</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">  /// given vectorization factors.</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegisterUsage, 8&gt;</a></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  calculateRegisterUsage(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ElementCount&gt;</a> VFs);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">  /// Collect values we want to ignore in the cost model.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectValuesToIgnore();</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">  /// Collect all element types in the loop for which widening is needed.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectElementTypesForWidening();</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">  /// Split reductions into those that happen in the loop, and those that happen</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">  /// outside. In loop reductions are collected into InLoopReductionChains.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectInLoopReductions();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">  /// Returns true if we should use strict in-order reductions for the given</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">  /// RdxDesc. This is true if the -enable-strict-reductions flag is passed,</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">  /// the IsOrdered flag of RdxDesc is set and we do not allow reordering</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment">  /// of FP operations.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ad508b8cfa31c0e7a1ac8f9d733bb8eed"> 1260</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ad508b8cfa31c0e7a1ac8f9d733bb8eed">useOrderedReductions</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">return</span> !Hints-&gt;allowReordering() &amp;&amp; RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a8dad5abc2bd929acd8391643b2dbe4c5">isOrdered</a>();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">  /// \returns The smallest bitwidth each instruction can be represented with.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">  /// The vector equivalents of these instructions should be truncated to this</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">  /// type.</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a3d2ab7c2a128f7e20765d0bd0ac745ea"> 1267</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Instruction *, uint64_t&gt;</a> &amp;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a3d2ab7c2a128f7e20765d0bd0ac745ea">getMinimalBitwidths</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">return</span> MinBWs;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">  /// \returns True if it is more profitable to scalarize instruction \p I for</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">  /// vectorization factor \p VF.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a9a6fbca8c965adeb8016a03ca3de2cac"> 1273</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a9a6fbca8c965adeb8016a03ca3de2cac">isProfitableToScalarize</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;           <span class="stringliteral">&quot;Profitable to scalarize relevant only for VF &gt; 1.&quot;</span>);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="comment">// Cost model is not run in the VPlan-native path - return conservative</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="comment">// result until this changes.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keyword">auto</span> Scalars = InstsToScalarize.find(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Scalars != InstsToScalarize.end() &amp;&amp;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;           <span class="stringliteral">&quot;VF not yet analyzed for scalarization profitability&quot;</span>);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">return</span> Scalars-&gt;second.find(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) != Scalars-&gt;second.end();</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment">  /// Returns true if \p I is known to be uniform after vectorization.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a20d7c96738b8f59692aec029895f8eb9"> 1289</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a20d7c96738b8f59692aec029895f8eb9">isUniformAfterVectorization</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="comment">// Pseudo probe needs to be duplicated for each unrolled iteration and</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">// vector lane so that profiled loop trip count can be accurately</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">// accumulated instead of being under counted.</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PseudoProbeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="comment">// Cost model is not run in the VPlan-native path - return conservative</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="comment">// result until this changes.</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keyword">auto</span> UniformsPerVF = Uniforms.find(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UniformsPerVF != Uniforms.end() &amp;&amp;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;           <span class="stringliteral">&quot;VF not yet analyzed for uniformity&quot;</span>);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">return</span> UniformsPerVF-&gt;second.count(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">  /// Returns true if \p I is known to be scalar after vectorization.</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a5f5d6f7a1f29874d1e77a889510c879c"> 1311</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a5f5d6f7a1f29874d1e77a889510c879c">isScalarAfterVectorization</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="comment">// Cost model is not run in the VPlan-native path - return conservative</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="comment">// result until this changes.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keyword">auto</span> ScalarsPerVF = Scalars.find(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ScalarsPerVF != Scalars.end() &amp;&amp;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;           <span class="stringliteral">&quot;Scalar values are not calculated for VF&quot;</span>);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">return</span> ScalarsPerVF-&gt;second.count(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">  /// \returns True if instruction \p I can be truncated to a smaller bitwidth</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">  /// for vectorization factor \p VF.</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#aa8c00664c6be2042407f13e4fcad950b"> 1328</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aa8c00664c6be2042407f13e4fcad950b">canTruncateToMinimalBitwidth</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; MinBWs.find(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) != MinBWs.end() &amp;&amp;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;           !isProfitableToScalarize(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) &amp;&amp;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;           !isScalarAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">  /// Decision that was taken during cost calculation for memory instruction.</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260"> 1335</a></span>&#160;<span class="comment"></span>  <span class="keyword">enum</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> {</div>
<div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260af974de6a8aba0481a82335fb93471a39"> 1336</a></span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260af974de6a8aba0481a82335fb93471a39">CM_Unknown</a>,</div>
<div class="line"><a name="l01337"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260adc468760c02910f77bad7525bc66c334"> 1337</a></span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260adc468760c02910f77bad7525bc66c334">CM_Widen</a>,         <span class="comment">// For consecutive accesses with stride +1.</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a058eacbd3c28e2ecec2af7db726ce527"> 1338</a></span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a058eacbd3c28e2ecec2af7db726ce527">CM_Widen_Reverse</a>, <span class="comment">// For consecutive accesses with stride -1.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971"> 1339</a></span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971">CM_Interleave</a>,</div>
<div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260ae849d400780f51424bc4e4c26ddf3000"> 1340</a></span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260ae849d400780f51424bc4e4c26ddf3000">CM_GatherScatter</a>,</div>
<div class="line"><a name="l01341"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a03c0934d38787b1773c050deee484126"> 1341</a></span>&#160;    CM_Scalarize</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  };</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">  /// Save vectorization decision \p W and \p Cost taken by the cost model for</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">  /// instruction \p I and vector width \p VF.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abc1b952dd1661ccba4f999610bf9732e"> 1346</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abc1b952dd1661ccba4f999610bf9732e">setWideningDecision</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>,</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                           <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected VF &gt;=2&quot;</span>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    WideningDecisions[std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)] = std::make_pair(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">  /// Save vectorization decision \p W and \p Cost taken by the cost model for</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">  /// interleaving group \p Grp and vector width \p VF.</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a9c44a42299ed9e7e97200271b00e0c7a"> 1354</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a9c44a42299ed9e7e97200271b00e0c7a">setWideningDecision</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup&lt;Instruction&gt;</a> *Grp,</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                           <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>,</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                           <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>) {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected VF &gt;=2&quot;</span>);<span class="comment"></span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">    /// Broadcast this decicion to all instructions inside the group.</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">    /// But the cost will be assigned to one instruction only.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment"></span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Grp-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a46f3b431a3121fdf53608a283bf4efec">getFactor</a>(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Grp-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#ab945330dc19d757dfe310145636b370c">getMember</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">if</span> (Grp-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#aac206f570f599e8832d28a15bddb12d5">getInsertPos</a>() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;          WideningDecisions[std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)] = std::make_pair(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;          WideningDecisions[std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)] = std::make_pair(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>, 0);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">  /// Return the cost model decision for the given instruction \p I and vector</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">  /// width \p VF. Return CM_Unknown if this instruction did not pass</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">  /// through the cost modeling.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#af01e065313d5fcaba9570458faf32429"> 1373</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af01e065313d5fcaba9570458faf32429">getWideningDecision</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected VF to be a vector VF&quot;</span>);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="comment">// Cost model is not run in the VPlan-native path - return conservative</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">// result until this changes.</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="keywordflow">return</span> CM_GatherScatter;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    std::pair&lt;Instruction *, ElementCount&gt; InstOnVF = std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keyword">auto</span> Itr = WideningDecisions.find(InstOnVF);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">if</span> (Itr == WideningDecisions.end())</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">return</span> CM_Unknown;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">return</span> Itr-&gt;second.first;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">  /// Return the vectorization cost for the given instruction \p I and vector</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">  /// width \p VF.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#af7844564539b9f0f917e8f2380a064b3"> 1389</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af7844564539b9f0f917e8f2380a064b3">getWideningCost</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected VF &gt;=2&quot;</span>);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    std::pair&lt;Instruction *, ElementCount&gt; InstOnVF = std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WideningDecisions.find(InstOnVF) != WideningDecisions.end() &amp;&amp;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;           <span class="stringliteral">&quot;The cost is not calculated&quot;</span>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> WideningDecisions[InstOnVF].second;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  }</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">  /// Return True if instruction \p I is an optimizable truncate whose operand</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">  /// is an induction variable. Such a truncate will be removed by adding a new</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">  /// induction variable with the destination type.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a61375f5189558cc261186f388d31fe92"> 1400</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a61375f5189558cc261186f388d31fe92">isOptimizableIVTruncate</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// If the instruction is not a truncate, return false.</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keyword">auto</span> *Trunc = dyn_cast&lt;TruncInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (!Trunc)</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">// Get the source and destination types of the truncate.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(cast&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getSrcTy(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(cast&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getDestTy(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="comment">// If the truncate is free for the given types, return false. Replacing a</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="comment">// free truncate with an induction variable would add an induction variable</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// update instruction to each iteration of the loop. We exclude from this</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// check the primary induction variable since it will need an update</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// instruction regardless.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = Trunc-&gt;getOperand(0);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4f213123efd9b8524e1a413c15ed43bf">getPrimaryInduction</a>() &amp;&amp; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae3e55cf13c60a8b90145f1411367b975">isTruncateFree</a>(SrcTy, DestTy))</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">// If the truncated value is not an induction variable, return false.</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a7803d6f1162773c3b1a61e3ff441fcb8">isInductionPhi</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  }</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">  /// Collects the instructions to scalarize for each predicated instruction in</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">  /// the loop.</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectInstsToScalarize(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">  /// Collect Uniform and Scalar values for the given \p VF.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">  /// The sets depend on CM decision for Load/Store instructions</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">  /// that may be vectorized as interleave, gather-scatter or scalarized.</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ab4a3f06ac8f2aff57b864c2d8ace97d8"> 1430</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ab4a3f06ac8f2aff57b864c2d8ace97d8">collectUniformsAndScalars</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// Do the analysis once.</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || Uniforms.find(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) != Uniforms.end())</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    setCostBasedWideningDecision(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    collectLoopUniforms(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    collectLoopScalars(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  }</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">  /// Returns true if the target machine supports masked store operation</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">  /// for the given \p DataType and kind of access to \p Ptr.</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a8c25146329f69e026508656cfb1280fa"> 1441</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a8c25146329f69e026508656cfb1280fa">isLegalMaskedStore</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classDataType.html">DataType</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4589ea484ebe1919b451fff3948a17cc">isConsecutivePtr</a>(<a class="code" href="classDataType.html">DataType</a>, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &amp;&amp;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;           <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ab9bcc7733985bba3ab58e5c2abbc129e">isLegalMaskedStore</a>(<a class="code" href="classDataType.html">DataType</a>, Alignment);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">  /// Returns true if the target machine supports masked load operation</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">  /// for the given \p DataType and kind of access to \p Ptr.</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a472c49074b0d81970f8eea07de4d7ad4"> 1448</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a472c49074b0d81970f8eea07de4d7ad4">isLegalMaskedLoad</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classDataType.html">DataType</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4589ea484ebe1919b451fff3948a17cc">isConsecutivePtr</a>(<a class="code" href="classDataType.html">DataType</a>, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &amp;&amp;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;           <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aff5a70644f05b7731348861016ff2af1">isLegalMaskedLoad</a>(<a class="code" href="classDataType.html">DataType</a>, Alignment);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">  /// Returns true if the target machine can represent \p V as a masked gather</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">  /// or scatter operation.</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a5c67d5cf4fc57aedeb5a25941354c3dc"> 1455</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a5c67d5cf4fc57aedeb5a25941354c3dc">isLegalGatherOrScatter</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                              <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1)) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> = isa&lt;LoadInst&gt;(V);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = isa&lt;StoreInst&gt;(V);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> &amp;&amp; !<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>)</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keyword">auto</span> *Ty = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(V);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> <a class="code" href="structllvm_1_1Align.html">Align</a> = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(V);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>())</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      Ty = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Ty, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> &amp;&amp; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a33ac7704be5bd5455f78caf0b5371012">isLegalMaskedGather</a>(Ty, <a class="code" href="structllvm_1_1Align.html">Align</a>)) ||</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;           (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> &amp;&amp; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a0a973aabc3b5429e5e05beee35892de0">isLegalMaskedScatter</a>(Ty, <a class="code" href="structllvm_1_1Align.html">Align</a>));</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">  /// Returns true if the target machine supports all of the reduction</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">  /// variables found for the given VF.</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a07515d0542b797be2d1c87d4359ff8f6"> 1471</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a07515d0542b797be2d1c87d4359ff8f6">canVectorizeReductions</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>(), [&amp;](<span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      const RecurrenceDescriptor &amp;RdxDesc = Reduction.second;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      return TTI.isLegalToVectorizeReduction(RdxDesc, VF);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    }));</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  }</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">  /// Given costs for both strategies, return true if the scalar predication</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">  /// lowering should be used for div/rem.  This incorporates an override</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">  /// option so it is not simply a cost comparison.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#add43c346a11ae1deb49142ba968eb07e"> 1481</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#add43c346a11ae1deb49142ba968eb07e">isDivRemScalarWithPredication</a>(<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarCost,</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                                     <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> SafeDivisorCost)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="LoopVectorize_8cpp.html#a623732b7467b6516344dec814819f258">ForceSafeDivisor</a>) {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43">cl::BOU_UNSET</a>:</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <span class="keywordflow">return</span> ScalarCost &lt; SafeDivisorCost;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736">cl::BOU_TRUE</a>:</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef">cl::BOU_FALSE</a>:</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    };</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;impossible case value&quot;</span>);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment">  /// Returns true if \p I is an instruction which requires predication and</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment">  /// for which our chosen predication strategy is scalarization (i.e. we</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment">  /// don&#39;t have an alternate strategy such as masking available).</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">  /// \p VF is the vectorization factor that will be used to vectorize \p I.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isScalarWithPredication(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">  /// Returns true if \p I is an instruction that needs to be predicated</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">  /// at runtime.  The result is independent of the predication mechanism.</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment">  /// Superset of instructions that return true for isScalarWithPredication.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isPredicatedInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="comment">  /// Return the costs for our two available strategies for lowering a</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment">  /// div/rem operation which requires speculating at least one lane.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">  /// First result is for scalarization (will be invalid for scalable</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">  /// vectors); second is for the safe-divisor strategy.</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment"></span>  std::pair&lt;InstructionCost, InstructionCost&gt;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  getDivRemSpeculationCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                           <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment">  /// Returns true if \p I is a memory instruction with consecutive memory</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">  /// access that can be widened.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> memoryInstructionCanBeWidened(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">  /// Returns true if \p I is a memory instruction in an interleaved-group</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">  /// of memory accesses that can be vectorized with wide vector loads/stores</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">  /// and shuffles.</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> interleavedAccessCanBeWidened(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">  /// Check if \p Instr belongs to any interleaved access group.</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a12f564436f7f84cd23ee0653c9eef13a"> 1523</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a12f564436f7f84cd23ee0653c9eef13a">isAccessInterleaved</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">return</span> InterleaveInfo.isInterleaved(Instr);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">  /// Get the interleaved access group that \p Instr belongs to.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup&lt;Instruction&gt;</a> *</div>
<div class="line"><a name="l01529"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#abcf928a0b41395ea7aad52c702fcb8b8"> 1529</a></span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abcf928a0b41395ea7aad52c702fcb8b8">getInterleavedAccessGroup</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr) {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">return</span> InterleaveInfo.getInterleaveGroup(Instr);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment">  /// Returns true if we&#39;re required to use a scalar epilogue for at least</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">  /// the final iteration of the original loop.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed"> 1535</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">if</span> (!isScalarEpilogueAllowed())</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="comment">// If we might exit from anywhere but the latch, must run the exiting</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="comment">// iteration in scalar form.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span> (TheLoop-&gt;getExitingBlock() != TheLoop-&gt;getLoopLatch())</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; InterleaveInfo.requiresScalarEpilogue();</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment">  /// Returns true if a scalar epilogue is not allowed due to optsize or a</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">  /// loop hint annotation.</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#af67062c22dbf5e0ab35164a778768476"> 1547</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af67062c22dbf5e0ab35164a778768476">isScalarEpilogueAllowed</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">return</span> ScalarEpilogueStatus == <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">  /// Returns the TailFoldingStyle that is best for the current loop.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#af86aec7d66264b623dd7efde226749b9"> 1552</a></span>&#160;<span class="comment"></span>  <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdd">TailFoldingStyle</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af86aec7d66264b623dd7efde226749b9">getTailFoldingStyle</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">if</span> (!CanFoldTailByMasking)</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdda6adf97f83acf6453d4a6a4b1070f3754">TailFoldingStyle::None</a>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2a688f3783d789aabf7bd9a938ed0c1f">getPreferredTailFoldingStyle</a>();</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">  /// Returns true if all loop blocks should be masked to fold tail loop.</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba"> 1560</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba">foldTailByMasking</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordflow">return</span> getTailFoldingStyle() != <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdda6adf97f83acf6453d4a6a4b1070f3754">TailFoldingStyle::None</a>;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">  /// Returns true if were tail-folding and want to use the active lane mask</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">  /// for vector loop control flow.</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a0ab984ebf7756adea3f3dc454d7bc96a"> 1566</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a0ab984ebf7756adea3f3dc454d7bc96a">useActiveLaneMaskForControlFlow</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">return</span> getTailFoldingStyle() == <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bddad817e2199b89933da1a3cd7e130cd782">TailFoldingStyle::DataAndControlFlow</a>;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  }</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">  /// Returns true if the instructions in this block requires predication</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">  /// for any reason, e.g. because tail folding now requires a predicate</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">  /// or because the block in the original loop was predicated.</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ab8c8de8f62b5d2b27c4878d3effd7273"> 1573</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ab8c8de8f62b5d2b27c4878d3effd7273">blockNeedsPredicationForAnyReason</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">return</span> foldTailByMasking() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3b78b24a3c241e611957b82cd12640da">blockNeedsPredication</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">  /// A SmallMapVector to store the InLoop reduction op chains, mapping phi</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">  /// nodes to the chain of instructions representing the reductions. Uses a</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">  /// MapVector to ensure deterministic iteration order.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> ReductionChainMap =</div>
<div class="line"><a name="l01581"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#aac0937a089c57e8aa9521e814d70e6be"> 1581</a></span>&#160;      <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;PHINode *, SmallVector&lt;Instruction *, 4&gt;</a>, 4&gt;;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment">  /// Return the chain of instructions representing an inloop reduction.</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a3161602a616c472f8ec39bd0bd58e680"> 1584</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SmallMapVector.html">ReductionChainMap</a> &amp;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a3161602a616c472f8ec39bd0bd58e680">getInLoopReductionChains</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">return</span> InLoopReductionChains;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">  /// Returns true if the Phi is part of an inloop reduction.</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a9819226a3ff242635fd99bf22b50bd97"> 1589</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a9819226a3ff242635fd99bf22b50bd97">isInLoopReduction</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">return</span> InLoopReductionChains.count(Phi);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  }</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">  /// Estimate cost of an intrinsic call instruction CI if it were vectorized</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">  /// with factor VF.  Return the cost of the instruction, including</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">  /// scalarization overhead if it&#39;s needed.</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getVectorIntrinsicCost(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">  /// Estimate cost of a call instruction CI if it were vectorized with factor</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment">  /// VF. Return the cost of the instruction, including scalarization overhead</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">  /// if it&#39;s needed. The flag NeedToScalarize shows if the call needs to be</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">  /// scalarized -</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">  /// i.e. either vector version isn&#39;t available, or is too expensive.</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getVectorCallCost(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                                    <a class="code" href="classllvm_1_1Function.html">Function</a> **Variant,</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                                    <span class="keywordtype">bool</span> *NeedsMask = <span class="keyword">nullptr</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">  /// Returns true if the per-lane cost of VectorizationFactor A is lower than</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">  /// that of B.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isMoreProfitable(<span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> &amp;A,</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                        <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="comment">  /// Invalidates decisions already taken by the cost model.</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a85afe07533e500a31222b17f80b540fe"> 1613</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a85afe07533e500a31222b17f80b540fe">invalidateCostModelingDecisions</a>() {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    WideningDecisions.clear();</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    Uniforms.clear();</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    Scalars.clear();</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment">  /// Convenience function that returns the value of vscale_range iff</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment">  /// vscale_range.min == vscale_range.max or otherwise returns the value</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment">  /// returned by the corresponding TLI method.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment"></span>  std::optional&lt;unsigned&gt; getVScaleForTuning() <span class="keyword">const</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordtype">unsigned</span> NumPredStores = 0;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">  /// \return An upper bound for the vectorization factors for both</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">  /// fixed and scalable vectorization, where the minimum-known number of</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">  /// elements is a power-of-2 larger than zero. If scalable vectorization is</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">  /// disabled or unsupported, then the scalable part will be equal to</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">  /// ElementCount::getScalable(0).</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment"></span>  <a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a> computeFeasibleMaxVF(<span class="keywordtype">unsigned</span> ConstTripCount,</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                                           <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF,</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                                           <span class="keywordtype">bool</span> FoldTailByMasking);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">  /// \return the maximized element count based on the targets vector</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment">  /// registers and the loop trip-count, but limited to a maximum safe VF.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">  /// This is a helper function of computeFeasibleMaxVF.</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> getMaximizedVFForTarget(<span class="keywordtype">unsigned</span> ConstTripCount,</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                                       <span class="keywordtype">unsigned</span> SmallestType,</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                                       <span class="keywordtype">unsigned</span> WidestType,</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                                       <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxSafeVF,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                       <span class="keywordtype">bool</span> FoldTailByMasking);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">  /// \return the maximum legal scalable VF, based on the safe max number</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">  /// of elements.</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> getMaxLegalScalableVF(<span class="keywordtype">unsigned</span> MaxSafeElements);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment">  /// The vectorization cost is a combination of the cost itself and a boolean</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">  /// indicating whether any of the contributing operations will actually</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">  /// operate on vector values after type legalization in the backend. If this</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">  /// latter value is false, then all operations will be scalarized (i.e. no</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">  /// vectorization has actually taken place).</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> VectorizationCostTy = std::pair&lt;InstructionCost, bool&gt;;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">  /// Returns the expected execution cost. The unit of the cost does</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">  /// not matter because we use the &#39;cost&#39; units to compare different</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">  /// vector widths. The cost that is returned is *not* normalized by</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">  /// the factor width. If \p Invalid is not nullptr, this function</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">  /// will add a pair(Instruction*, ElementCount) to \p Invalid for</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">  /// each instruction that has an Invalid cost for the given VF.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"></span>  VectorizationCostTy</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  expectedCost(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;InstructionVFPair&gt;</a> *Invalid = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">  /// Returns the execution time cost of an instruction for a given vector</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">  /// width. Vector width of one means scalar.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment"></span>  VectorizationCostTy getInstructionCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment">  /// The cost-computation logic from getInstructionCost which provides</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">  /// the vector type as an output parameter.</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getInstructionCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                                     <a class="code" href="classllvm_1_1Type.html">Type</a> *&amp;VectorTy);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">  /// Return the cost of instructions in an inloop reduction pattern, if I is</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">  /// part of that pattern.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment"></span>  std::optional&lt;InstructionCost&gt;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  getReductionPatternCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *VectorTy,</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                          <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment">  /// Calculate vectorization cost of memory instruction \p I.</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getMemoryInstructionCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="comment">  /// The cost computation for scalarized memory instruction.</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getMemInstScalarizationCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="comment">  /// The cost computation for interleaving group of memory instructions.</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getInterleaveGroupCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment">  /// The cost computation for Gather/Scatter instruction.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getGatherScatterCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">  /// The cost computation for widening instruction \p I with consecutive</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment">  /// memory access.</span></div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getConsecutiveMemOpCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">  /// The cost calculation for Load/Store instruction \p I with uniform pointer -</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">  /// Load: scalar load + broadcast.</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment">  /// Store: scalar store + (loop invariant value stored? 0 : extract of last</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">  /// element)</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getUniformMemOpCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">  /// Estimate the overhead of scalarizing an instruction. This is a</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">  /// convenience wrapper for the type-based getScalarizationOverhead API.</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getScalarizationOverhead(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                                           <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment">  /// Returns true if an artificially high cost for emulated masked memrefs</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">  /// should be used.</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> useEmulatedMaskMemRefHack(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">  /// Map of scalar integer values to the smallest bitwidth they can be legally</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">  /// represented as. The vector equivalents of these values should be truncated</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">  /// to this type.</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Instruction *, uint64_t&gt;</a> MinBWs;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">  /// A type representing the costs for instructions if they were to be</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">  /// scalarized rather than vectorized. The entries are Instruction-Cost</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="comment">  /// pairs.</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> ScalarCostsTy = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, InstructionCost&gt;</a>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">  /// A set containing all BasicBlocks that are known to present after</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment">  /// vectorization as a predicated block.</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ElementCount, SmallPtrSet&lt;BasicBlock *, 4&gt;</a>&gt;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      PredicatedBBsAfterVectorization;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment">  /// Records whether it is allowed to have the original scalar loop execute at</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment">  /// least once. This may be needed as a fallback loop in case runtime</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment">  /// aliasing/dependence checks fail, or to handle the tail/remainder</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">  /// iterations when the trip count is unknown or doesn&#39;t divide by the VF,</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">  /// or as a peel-loop to handle gaps in interleave-groups.</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">  /// Under optsize and when the trip count is very small we don&#39;t allow any</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">  /// iterations to execute in the scalar loop.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"></span>  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">ScalarEpilogueLowering</a> ScalarEpilogueStatus = <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment">  /// All blocks of loop are to be masked to fold tail of scalar iterations.</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> CanFoldTailByMasking = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">  /// A map holding scalar costs for different vectorization factors. The</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">  /// presence of a cost for an instruction in the mapping indicates that the</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment">  /// instruction will be scalarized when vectorizing with the associated</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="comment">  /// vectorization factor. The entries are VF-ScalarCostTy pairs.</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ElementCount, ScalarCostsTy&gt;</a> InstsToScalarize;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<span class="comment">  /// Holds the instructions known to be uniform after vectorization.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="comment">  /// The data is collected per VF.</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ElementCount, SmallPtrSet&lt;Instruction *, 4&gt;</a>&gt; Uniforms;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">  /// Holds the instructions known to be scalar after vectorization.</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">  /// The data is collected per VF.</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ElementCount, SmallPtrSet&lt;Instruction *, 4&gt;</a>&gt; Scalars;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">  /// Holds the instructions (address computations) that are forced to be</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment">  /// scalarized.</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ElementCount, SmallPtrSet&lt;Instruction *, 4&gt;</a>&gt; ForcedScalars;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">  /// PHINodes of the reductions that should be expanded in-loop along with</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">  /// their associated chains of reduction operations, in program order from top</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">  /// (PHI) to bottom</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment"></span>  ReductionChainMap InLoopReductionChains;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="comment">  /// A Map of inloop reduction operations and their immediate chain operand.</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">  /// FIXME: This can be removed once reductions can be costed correctly in</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">  /// vplan. This was added to allow quick lookup to the inloop operations,</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment">  /// without having to loop through InLoopReductionChains.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Instruction *&gt;</a> InLoopReductionImmediateChains;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">  /// Returns the expected difference in cost from scalarizing the expression</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">  /// feeding a predicated instruction \p PredInst. The instructions to</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">  /// scalarize and their scalar costs are collected in \p ScalarCosts. A</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment">  /// non-negative return value implies the expression will be scalarized.</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment">  /// Currently, only single-use chains are considered for scalarization.</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> computePredInstDiscount(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PredInst,</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                                          ScalarCostsTy &amp;ScalarCosts,</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                                          <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="comment">  /// Collect the instructions that are uniform after vectorization. An</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">  /// instruction is uniform if we represent it with a single scalar value in</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">  /// the vectorized loop corresponding to each vector iteration. Examples of</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">  /// uniform instructions include pointer operands of consecutive or</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">  /// interleaved memory accesses. Note that although uniformity implies an</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">  /// instruction will be scalar, the reverse is not true. In general, a</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">  /// scalarized instruction will be represented by VF scalar values in the</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment">  /// vectorized loop, each corresponding to an iteration of the original</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="comment">  /// scalar loop.</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectLoopUniforms(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="comment">  /// Collect the instructions that are scalar after vectorization. An</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment">  /// instruction is scalar if it is known to be uniform or will be scalarized</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment">  /// during vectorization. collectLoopScalars should only add non-uniform nodes</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">  /// to the list if they are used by a load/store instruction that is marked as</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">  /// CM_Scalarize. Non-uniform scalarized instructions will be represented by</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">  /// VF values in the vectorized loop, each corresponding to an iteration of</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">  /// the original scalar loop.</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectLoopScalars(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment">  /// Keeps cost model vectorization decision and cost for instructions.</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">  /// Right now it is used for memory instructions only.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> DecisionList = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;std::pair&lt;Instruction *, ElementCount&gt;</a>,</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                                std::pair&lt;InstWidening, InstructionCost&gt;&gt;;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160; </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  DecisionList WideningDecisions;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">  /// Returns true if \p V is expected to be vectorized and it needs to be</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">  /// extracted.</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> needsExtract(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || !TheLoop-&gt;contains(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        TheLoop-&gt;isLoopInvariant(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="comment">// Assume we can vectorize V (and hence we need extraction) if the</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="comment">// scalars are not computed yet. This can happen, because it is called</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="comment">// via getScalarizationOverhead from setCostBasedWideningDecision, before</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="comment">// the scalars are collected. That should be a safe assumption in most</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="comment">// cases, because we check if the operands have vectorizable types</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="comment">// beforehand in LoopVectorizationLegality.</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">return</span> Scalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) == Scalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() ||</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;           !isScalarAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  };</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment">  /// Returns a range containing only operands needing to be extracted.</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> filterExtractingOperands(<a class="code" href="classllvm_1_1User.html#a917548288129e24325af275795e4622f">Instruction::op_range</a> Ops,</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                                                   <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a>(<a class="code" href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">make_filter_range</a>(</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        Ops, [<span class="keyword">this</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { <span class="keywordflow">return</span> this-&gt;needsExtract(V, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>); }));</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">  /// Determines if we have the infrastructure to vectorize loop \p L and its</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment">  /// epilogue, assuming the main loop is vectorized by \p VF.</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isCandidateForEpilogueVectorization(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L,</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">  /// Returns true if epilogue vectorization is considered profitable, and</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">  /// false otherwise.</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment">  /// \p VF is the vectorization factor chosen for the original loop.</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isEpilogueVectorizationProfitable(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">  /// The loop that we evaluate.</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a664dc60e31d9203d66c9d7a49787b63f"> 1841</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a664dc60e31d9203d66c9d7a49787b63f">TheLoop</a>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment">  /// Predicated scalar evolution analysis.</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a35372cc43a297f286fc6c679b14c61d2"> 1844</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a35372cc43a297f286fc6c679b14c61d2">PSE</a>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment">  /// Loop Info analysis.</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a8c62d3e36a2d815cbfac5a1579ccbb01"> 1847</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a8c62d3e36a2d815cbfac5a1579ccbb01">LI</a>;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">  /// Vectorization legality.</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a4714bf2e30b65997d553264e047245f1"> 1850</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a4714bf2e30b65997d553264e047245f1">Legal</a>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">  /// Vector target information.</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a3dfa67eb67a32ca048b4af8fae5c898d"> 1853</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a3dfa67eb67a32ca048b4af8fae5c898d">TTI</a>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment">  /// Target Library Info.</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a598f8ca344de1cfac7a7985b212bb66b"> 1856</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a598f8ca344de1cfac7a7985b212bb66b">TLI</a>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">  /// Demanded bits analysis.</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a58fd764accfd06df487cc6ec43d4f5fc"> 1859</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DemandedBits.html">DemandedBits</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a58fd764accfd06df487cc6ec43d4f5fc">DB</a>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">  /// Assumption cache.</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#aba357162dc28acb3a399731e1e397614"> 1862</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aba357162dc28acb3a399731e1e397614">AC</a>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="comment">  /// Interface to emit optimization remarks.</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a8b0171a0d29e72189ffad26b9770c464"> 1865</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a8b0171a0d29e72189ffad26b9770c464">ORE</a>;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a4384debcd154f44445005e6866afba4a"> 1867</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a4384debcd154f44445005e6866afba4a">TheFunction</a>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">  /// Loop Vectorize Hint.</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a35e67974daa692cfd961904c151ad33d"> 1870</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> *<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a35e67974daa692cfd961904c151ad33d">Hints</a>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment">  /// The interleave access information contains groups of interleaved accesses</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">  /// with the same stride and close to each other.</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a7a98f0c17229446d76997f158d896aad"> 1874</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InterleavedAccessInfo.html">InterleavedAccessInfo</a> &amp;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a7a98f0c17229446d76997f158d896aad">InterleaveInfo</a>;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">  /// Values to ignore in the cost model.</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a7e207263ca75f2bfc5eb562a213bc575"> 1877</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 16&gt;</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a7e207263ca75f2bfc5eb562a213bc575">ValuesToIgnore</a>;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">  /// Values to ignore in the cost model when VF &gt; 1.</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a91945cb39ed4c6676d991a9528dcd2d0"> 1880</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 16&gt;</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a91945cb39ed4c6676d991a9528dcd2d0">VecValuesToIgnore</a>;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">  /// All element types found in the loop.</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a00a28a503636abdbedf080f3896b937c"> 1883</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Type *, 16&gt;</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a00a28a503636abdbedf080f3896b937c">ElementTypesInLoop</a>;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">  /// Profitable vector factors.</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a58931f2bf23c97dfb6cb6982b226ef8d"> 1886</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VectorizationFactor, 8&gt;</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a58931f2bf23c97dfb6cb6982b226ef8d">ProfitableVFs</a>;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;};</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160; </div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">/// Helper struct to manage generating runtime checks for vectorization.</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">/// The runtime checks are created up-front in temporary blocks to allow better</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">/// estimating the cost and un-linked from the existing IR. After deciding to</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">/// vectorize, the checks are moved back. If deciding not to vectorize, the</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">/// temporary blocks are completely removed.</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment"></span><span class="keyword">class </span>GeneratedRTChecks {<span class="comment"></span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">  /// Basic block which contains the generated SCEV checks, if any.</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SCEVCheckBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="comment">  /// The value representing the result of the generated SCEV checks. If it is</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment">  /// nullptr, either no SCEV checks have been generated or they have been used.</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVCheckCond = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment">  /// Basic block which contains the generated memory runtime checks, if any.</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MemCheckBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="comment">  /// The value representing the result of the generated memory runtime checks.</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment">  /// If it is nullptr, either no memory runtime checks have been generated or</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment">  /// they have been used.</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *MemRuntimeCheckCond = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a238e95d82d095fec9241f2f5b81db3c5">TTI</a>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> SCEVExp;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> MemCheckExp;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="keywordtype">bool</span> CostTooHigh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  GeneratedRTChecks(<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                    <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a238e95d82d095fec9241f2f5b81db3c5">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>), SCEVExp(SE, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;scev.check&quot;</span>),</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        MemCheckExp(SE, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;scev.check&quot;</span>) {}</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="comment">  /// Generate runtime checks in SCEVCheckBlock and MemCheckBlock, so we can</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="comment">  /// accurately estimate the cost of the runtime checks. The blocks are</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment">  /// un-linked from the IR and is added back during vector code generation. If</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment">  /// there is no vector code generation, the check blocks are removed</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment">  /// completely.</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> Create(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopAccessInfo.html">LoopAccessInfo</a> &amp;LAI,</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVPredicate.html">SCEVPredicate</a> &amp;UnionPred, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <span class="keywordtype">unsigned</span> IC) {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160; </div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="comment">// Hard cutoff to limit compile-time increase in case a very large number of</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="comment">// runtime checks needs to be generated.</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="comment">// TODO: Skip cutoff if the loop is guaranteed to execute, e.g. due to</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="comment">// profile info.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    CostTooHigh =</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        LAI.<a class="code" href="classllvm_1_1LoopAccessInfo.html#a76ffc71fcd432b9a2a15b11c3144397d">getNumRuntimePointerChecks</a>() &gt; <a class="code" href="LoopVectorize_8cpp.html#a81cab9f3e7e0225e565699792e125012">VectorizeMemoryCheckThreshold</a>;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">if</span> (CostTooHigh)</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopHeader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">// Use SplitBlock to create blocks for SCEV &amp; memory runtime checks to</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="comment">// ensure the blocks are properly added to LoopInfo &amp; DominatorTree. Those</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="comment">// may be used by SCEVExpander. The blocks will be un-linked from their</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="comment">// predecessors and removed from LI &amp; DT at the end of the function.</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordflow">if</span> (!UnionPred.<a class="code" href="classllvm_1_1SCEVPredicate.html#ac43f5102232a1e1819b0763536f2937a">isAlwaysTrue</a>()) {</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      SCEVCheckBlock = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(Preheader, Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                  <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;vector.scevcheck&quot;</span>);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      SCEVCheckCond = SCEVExp.<a class="code" href="classllvm_1_1SCEVExpander.html#aab89200a9867fdf7476cf0c09e80ef78">expandCodeForPredicate</a>(</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;          &amp;UnionPred, SCEVCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;RtPtrChecking = *LAI.<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>();</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">if</span> (RtPtrChecking.Need) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      <span class="keyword">auto</span> *Pred = SCEVCheckBlock ? SCEVCheckBlock : Preheader;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      MemCheckBlock = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(Pred, Pred-&gt;getTerminator(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                                 <span class="stringliteral">&quot;vector.memcheck&quot;</span>);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <span class="keyword">auto</span> DiffChecks = RtPtrChecking.getDiffChecks();</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">if</span> (DiffChecks) {</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RuntimeVF = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        MemRuntimeCheckCond = <a class="code" href="namespacellvm.html#ad4f572b4f4bf6aa2dbf10a0bd160280d">addDiffRuntimeChecks</a>(</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            MemCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), *DiffChecks, MemCheckExp,</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            [<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, &amp;RuntimeVF](<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a>) {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;              if (!RuntimeVF)</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                RuntimeVF = getRuntimeVF(B, B.getIntNTy(Bits), VF);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;              return RuntimeVF;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            },</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            IC);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        MemRuntimeCheckCond =</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;            <a class="code" href="namespacellvm.html#aaa7128a88e182950e0881573bb55f079">addRuntimeChecks</a>(MemCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), L,</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                             RtPtrChecking.getChecks(), MemCheckExp);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MemRuntimeCheckCond &amp;&amp;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;             <span class="stringliteral">&quot;no RT checks generated although RtPtrChecking &quot;</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;             <span class="stringliteral">&quot;claimed checks are required&quot;</span>);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">if</span> (!MemCheckBlock &amp;&amp; !SCEVCheckBlock)</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="comment">// Unhook the temporary block with the checks, update various places</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="comment">// accordingly.</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckBlock)</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      SCEVCheckBlock-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Preheader);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="keywordflow">if</span> (MemCheckBlock)</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      MemCheckBlock-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Preheader);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckBlock) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      SCEVCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), SCEVCheckBlock);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    }</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordflow">if</span> (MemCheckBlock) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      MemCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), MemCheckBlock);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    }</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160; </div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(LoopHeader, Preheader);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keywordflow">if</span> (MemCheckBlock) {</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#aa6ae6629458ff4ccac821618d1677af4">eraseNode</a>(MemCheckBlock);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a52cb018f4f53613b5369ddb5d9873286">removeBlock</a>(MemCheckBlock);</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    }</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckBlock) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#aa6ae6629458ff4ccac821618d1677af4">eraseNode</a>(SCEVCheckBlock);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a52cb018f4f53613b5369ddb5d9873286">removeBlock</a>(SCEVCheckBlock);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  }</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getCost() {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckBlock || MemCheckBlock)</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Calculating cost of runtime checks:\n&quot;</span>);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">if</span> (CostTooHigh) {</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>.setInvalid();</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  number of checks exceeded threshold\n&quot;</span>);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160; </div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RTCheckCost = 0;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckBlock)</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *SCEVCheckBlock) {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        <span class="keywordflow">if</span> (SCEVCheckBlock-&gt;getTerminator() == &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> =</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;  for &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        RTCheckCost += <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      }</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">if</span> (MemCheckBlock)</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *MemCheckBlock) {</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">if</span> (MemCheckBlock-&gt;getTerminator() == &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> =</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;  for &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        RTCheckCost += <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckBlock || MemCheckBlock)</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Total cost of runtime checks: &quot;</span> &lt;&lt; RTCheckCost</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">return</span> RTCheckCost;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="comment">  /// Remove the created SCEV &amp; memory runtime check blocks &amp; instructions, if</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="comment">  /// unused.</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment"></span>  ~GeneratedRTChecks() {</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <a class="code" href="classllvm_1_1SCEVExpanderCleaner.html">SCEVExpanderCleaner</a> SCEVCleaner(SCEVExp);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <a class="code" href="classllvm_1_1SCEVExpanderCleaner.html">SCEVExpanderCleaner</a> MemCheckCleaner(MemCheckExp);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordflow">if</span> (!SCEVCheckCond)</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      SCEVCleaner.markResultUsed();</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">if</span> (!MemRuntimeCheckCond)</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      MemCheckCleaner.markResultUsed();</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">if</span> (MemRuntimeCheckCond) {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keyword">auto</span> &amp;SE = *MemCheckExp.<a class="code" href="classllvm_1_1SCEVExpander.html#a64ee7daceb7bcfa5f42af2835c914ad2">getSE</a>();</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="comment">// Memory runtime check generation creates compares that use expanded</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      <span class="comment">// values. Remove them before running the SCEVExpanderCleaners.</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(*MemCheckBlock))) {</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        <span class="keywordflow">if</span> (MemCheckExp.<a class="code" href="classllvm_1_1SCEVExpander.html#aab1d5fe8452ef0d6995904efe86ef9ff">isInsertedInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.eraseFromParent();</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    }</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    MemCheckCleaner.cleanup();</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    SCEVCleaner.cleanup();</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160; </div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <span class="keywordflow">if</span> (SCEVCheckCond)</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      SCEVCheckBlock-&gt;eraseFromParent();</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="keywordflow">if</span> (MemRuntimeCheckCond)</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      MemCheckBlock-&gt;eraseFromParent();</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">  /// Adds the generated SCEVCheckBlock before \p LoopVectorPreHeader and</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="comment">  /// adjusts the branches to branch to the vector preheader or \p Bypass,</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="comment">  /// depending on the generated condition.</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e">emitSCEVChecks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass,</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                             <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>,</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                             <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>) {</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">if</span> (!SCEVCheckCond)</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = SCEVCheckCond;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="comment">// Mark the check as used, to prevent it from being removed during cleanup.</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    SCEVCheckCond = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero())</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keyword">auto</span> *Pred = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160; </div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, SCEVCheckBlock);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="comment">// Create new preheader for vector loop.</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a5b3c2afaad5594cd0eedd58a78a91baf">PL</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>))</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a5b3c2afaad5594cd0eedd58a78a91baf">PL</a>-&gt;addBasicBlockToLoop(SCEVCheckBlock, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160; </div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    SCEVCheckBlock-&gt;getTerminator()-&gt;eraseFromParent();</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    SCEVCheckBlock-&gt;moveBefore(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    Pred-&gt;getTerminator()-&gt;replaceSuccessorWith(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>,</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                                                SCEVCheckBlock);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">addNewBlock</a>(SCEVCheckBlock, Pred);</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, SCEVCheckBlock);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160; </div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(SCEVCheckBlock-&gt;getTerminator(),</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                        <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>));</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">return</span> SCEVCheckBlock;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment">  /// Adds the generated MemCheckBlock before \p LoopVectorPreHeader and adjusts</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment">  /// the branches to branch to the vector preheader or \p Bypass, depending on</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment">  /// the generated condition.</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca">emitMemRuntimeChecks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass,</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                                   <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="comment">// Check if we generated code that checks in runtime if arrays overlap.</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="keywordflow">if</span> (!MemRuntimeCheckCond)</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keyword">auto</span> *Pred = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a657e5d1f0907b46daf10219e2b9b5ae5">replaceSuccessorWith</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>,</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                                                MemCheckBlock);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">addNewBlock</a>(MemCheckBlock, Pred);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, MemCheckBlock);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    MemCheckBlock-&gt;moveBefore(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a5b3c2afaad5594cd0eedd58a78a91baf">PL</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>))</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a5b3c2afaad5594cd0eedd58a78a91baf">PL</a>-&gt;addBasicBlockToLoop(MemCheckBlock, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        MemCheckBlock-&gt;getTerminator(),</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, MemRuntimeCheckCond));</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    MemCheckBlock-&gt;getTerminator()-&gt;setDebugLoc(</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        Pred-&gt;getTerminator()-&gt;getDebugLoc());</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">// Mark the check as used, to prevent it from being removed during cleanup.</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    MemRuntimeCheckCond = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordflow">return</span> MemCheckBlock;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;};</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160; </div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">// Return true if \p OuterLp is an outer loop annotated with hints for explicit</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">// vectorization. The loop needs to be annotated with #pragma omp simd</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">// simdlen(#) or #pragma clang vectorize(enable) vectorize_width(#). If the</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">// vector length information is not provided, vectorization is not considered</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">// explicit. Interleave hints are not allowed either. These limitations will be</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">// relaxed in the future.</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">// Please, note that we are currently forced to abuse the pragma &#39;clang</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment">// vectorize&#39; semantics. This pragma provides *auto-vectorization hints*</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment">// (i.e., LV must check that vectorization is legal) whereas pragma &#39;omp simd&#39;</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="comment">// provides *explicit vectorization hints* (LV can bypass legal checks and</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="comment">// assume that vectorization is legal). However, both hints are implemented</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment">// using the same metadata (llvm.loop.vectorize, processed by</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment">// LoopVectorizeHints). This will be fixed in the future when the native IR</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">// representation for pragma &#39;omp simd&#39; is introduced.</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a806ec23d6f44b02ad8cf3b1e61c05495"> 2171</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopVectorize_8cpp.html#a806ec23d6f44b02ad8cf3b1e61c05495">isExplicitVecOuterLoop</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *OuterLp,</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                                   <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>) {</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!OuterLp-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() &amp;&amp; <span class="stringliteral">&quot;This is not an outer loop&quot;</span>);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> Hints(OuterLp, <span class="keyword">true</span> <span class="comment">/*DisableInterleaving*/</span>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="comment">// Only outer loops with an explicit vectorization hint are supported.</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// Unannotated outer loops are ignored.</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordflow">if</span> (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea8914fe2dbf82d457456e8e4faa201b87">LoopVectorizeHints::FK_Undefined</a>)</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = OuterLp-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="keywordflow">if</span> (!Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a21b6d9e2aa12c8c68d8e2f122ec7ecec">allowVectorization</a>(Fn, OuterLp,</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                                <span class="keyword">true</span> <span class="comment">/*VectorizeOnlyWhenForced*/</span>)) {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Loop hints prevent outer loop vectorization.\n&quot;</span>);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="keywordflow">if</span> (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#ad98353127dbeb649d41ca07da5074b49">getInterleave</a>() &gt; 1) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="comment">// TODO: Interleave support is future work.</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not vectorizing: Interleave is not supported for &quot;</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                         <span class="stringliteral">&quot;outer loops.\n&quot;</span>);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;}</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160; </div>
<div class="line"><a name="l02199"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a00315ff11c9068aab97e5780bdfa5eef"> 2199</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#a00315ff11c9068aab97e5780bdfa5eef">collectSupportedLoops</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                                  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>,</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                                  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Loop *&gt;</a> &amp;V) {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="comment">// Collect inner loops and outer loops without irreducible control flow. For</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="comment">// now, only collect outer loops that have explicit vectorization hints. If we</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="comment">// are stress testing the VPlan H-CFG construction, we collect the outermost</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="comment">// loop of every loop nest.</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keywordflow">if</span> (L.<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() || <a class="code" href="LoopVectorize_8cpp.html#a9aba1a55848dca801709169068b8d264">VPlanBuildStressTest</a> ||</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a> &amp;&amp; <a class="code" href="LoopVectorize_8cpp.html#a806ec23d6f44b02ad8cf3b1e61c05495">isExplicitVecOuterLoop</a>(&amp;L, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>))) {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="classllvm_1_1LoopBlocksRPO.html">LoopBlocksRPO</a> RPOT(&amp;L);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    RPOT.<a class="code" href="classllvm_1_1LoopBlocksRPO.html#ad75769a81e0bebc6db0793566a4486fb">perform</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">if</span> (!containsIrreducibleCFG&lt;const BasicBlock *&gt;(RPOT, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>)) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      V.push_back(&amp;L);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="comment">// TODO: Collect inner loops inside marked outer loops in case</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="comment">// vectorization fails for the outer loop. Do not invoke</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <span class="comment">// &#39;containsIrreducibleCFG&#39; again for inner loops when the outer loop is</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <span class="comment">// already known to be reducible. We can use an inherited attribute for</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="comment">// that.</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *InnerL : L)</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <a class="code" href="LoopVectorize_8cpp.html#a00315ff11c9068aab97e5780bdfa5eef">collectSupportedLoops</a>(*InnerL, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, V);</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;}</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment">/// The LoopVectorize Pass.</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment"></span><span class="keyword">struct </span>LoopVectorize : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {<span class="comment"></span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">  /// Pass identification, replacement for typeid</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment"></span>  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html">LoopVectorizePass</a> Impl;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="keyword">explicit</span> LoopVectorize(<span class="keywordtype">bool</span> InterleaveOnlyWhenForced = <span class="keyword">false</span>,</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                         <span class="keywordtype">bool</span> VectorizeOnlyWhenForced = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>),</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        Impl({InterleaveOnlyWhenForced, VectorizeOnlyWhenForced}) {</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <a class="code" href="namespacellvm.html#a6feec53bc62dc3b5677f0b7c066535d3">initializeLoopVectorizePass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  }</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">if</span> (skipFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; </div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keyword">auto</span> *SE = &amp;getAnalysis&lt;ScalarEvolutionWrapperPass&gt;().getSE();</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> = &amp;getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo();</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = &amp;getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a> = &amp;getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a> = &amp;getAnalysis&lt;BlockFrequencyInfoWrapperPass&gt;().getBFI();</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keyword">auto</span> *TLIP = getAnalysisIfAvailable&lt;TargetLibraryInfoWrapperPass&gt;();</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a> = TLIP ? &amp;TLIP-&gt;getTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a> = &amp;getAnalysis&lt;AssumptionCacheTracker&gt;().getAssumptionCache(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="keyword">auto</span> &amp;LAIs = getAnalysis&lt;LoopAccessLegacyAnalysis&gt;().getLAIs();</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a> = &amp;getAnalysis&lt;DemandedBitsWrapperPass&gt;().getDemandedBits();</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a> = &amp;getAnalysis&lt;OptimizationRemarkEmitterWrapperPass&gt;().getORE();</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a> = &amp;getAnalysis&lt;ProfileSummaryInfoWrapperPass&gt;().getPSI();</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">return</span> Impl</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        .<a class="code" href="structllvm_1_1LoopVectorizePass.html#a525145697638ba4415e19d92a4946b30">runImpl</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *SE, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, LAIs, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        .<a class="code" href="structllvm_1_1LoopVectorizeResult.html#a36b3635888f4d5263ae7179034879c62">MadeAnyChange</a>;</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160; </div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>&gt;();</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfoWrapperPass.html">BlockFrequencyInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolutionWrapperPass.html">ScalarEvolutionWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopAccessLegacyAnalysis.html">LoopAccessLegacyAnalysis</a>&gt;();</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DemandedBitsWrapperPass.html">DemandedBitsWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1InjectTLIMappingsLegacy.html">InjectTLIMappingsLegacy</a>&gt;();</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="comment">// We currently do not preserve loopinfo/dominator analyses with outer loop</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="comment">// vectorization. Until this is addressed, mark these analyses as preserved</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="comment">// only for non-VPlan-native path.</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="comment">// TODO: Preserve Loop and Dominator analyses for VPlan-native path.</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>) {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    }</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160; </div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1BasicAAWrapperPass.html">BasicAAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1GlobalsAAWrapperPass.html">GlobalsAAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">ProfileSummaryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;};</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment">// Implementation of LoopVectorizationLegality, InnerLoopVectorizer and</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment">// LoopVectorizationCostModel and LoopVectorizationPlanner.</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160; </div>
<div class="line"><a name="l02296"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a111d43f8be3b83c9087b11878f581c09"> 2296</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a111d43f8be3b83c9087b11878f581c09">InnerLoopVectorizer::getBroadcastInstrs</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="comment">// We need to place the broadcast of invariant variables outside the loop,</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="comment">// but only if it&#39;s proven safe to do so. Else, broadcast will be inside</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="comment">// vector loop body.</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="keywordtype">bool</span> SafeToHoist = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(V) &amp;&amp;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                     (!Instr ||</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>));</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="comment">// Place the code for broadcasting invariant variables in the new preheader.</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> Guard(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  <span class="keywordflow">if</span> (SafeToHoist)</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="comment">// Broadcast the scalar into all locations in the vector.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Shuf = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, V, <span class="stringliteral">&quot;broadcast&quot;</span>);</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">return</span> Shuf;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;}</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment">/// This function adds</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment">/// (StartIdx * Step, (StartIdx + 1) * Step, (StartIdx + 2) * Step, ...)</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="comment">/// to each vector element of Val. The sequence starts at StartIndex.</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="comment">/// \p Opcode is relevant for FP induction variable.</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ac7423cc1aa92a399ed2921544c456c82"> 2319</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LoopVectorize_8cpp.html#ac7423cc1aa92a399ed2921544c456c82">getStepVector</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="classllvm_1_1Value.html">Value</a> *StartIdx, <a class="code" href="classllvm_1_1Value.html">Value</a> *Step,</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                            <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BinOp, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                            <a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>) {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;only vector VFs are supported&quot;</span>);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160; </div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="comment">// Create and check the types.</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <span class="keyword">auto</span> *ValVTy = cast&lt;VectorType&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> VLen = ValVTy-&gt;getElementCount();</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *STy = Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((STy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() || STy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;         <span class="stringliteral">&quot;Induction Step must be an integer or FP&quot;</span>);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == STy &amp;&amp; <span class="stringliteral">&quot;Step has wrong type&quot;</span>);</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 8&gt;</a> Indices;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="comment">// Create a vector of consecutive numbers from zero to VF.</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *InitVecValVTy = ValVTy;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  <span class="keywordflow">if</span> (STy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *InitVecValSTy =</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(STy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(), STy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    InitVecValVTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(InitVecValSTy, VLen);</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  }</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *InitVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae934d6e99e0516d606ae8e65ff6aed63">CreateStepVector</a>(InitVecValVTy);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="comment">// Splat the StartIdx</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StartIdxSplat = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(VLen, StartIdx);</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="keywordflow">if</span> (STy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    InitVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(InitVec, StartIdxSplat);</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    Step = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(VLen, Step);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid step vec&quot;</span>);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="comment">// FIXME: The newly created binary instructions should contain nsw/nuw</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="comment">// flags, which can be found from the original scalar operations.</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    Step = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">CreateMul</a>(InitVec, Step);</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(Val, Step, <span class="stringliteral">&quot;induction&quot;</span>);</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  }</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <span class="comment">// Floating point induction.</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((BinOp == Instruction::FAdd || BinOp == Instruction::FSub) &amp;&amp;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;         <span class="stringliteral">&quot;Binary Opcode should be specified for FP induction&quot;</span>);</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  InitVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ad0fe11db5d339b9eb4830b54eda769e0">CreateUIToFP</a>(InitVec, ValVTy);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  InitVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a0037e4c509dde63e30ae3e0287c5ee69">CreateFAdd</a>(InitVec, StartIdxSplat);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160; </div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  Step = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(VLen, Step);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MulOp = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a490a5df5a9f49b5648d251cda2f7c428">CreateFMul</a>(InitVec, Step);</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(BinOp, Val, MulOp, <span class="stringliteral">&quot;induction&quot;</span>);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;}</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="comment">/// Compute scalar induction steps. \p ScalarIV is the scalar induction</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="comment">/// variable on which to base the steps, \p Step is the size of the step.</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a7ea774676c15ac86f21bfccd434728db"> 2370</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#a7ea774676c15ac86f21bfccd434728db">buildScalarSteps</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarIV, <a class="code" href="classllvm_1_1Value.html">Value</a> *Step,</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>,</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                             <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// Ensure step has the same type as that of scalar IV.</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ScalarIVTy = ScalarIV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordflow">if</span> (ScalarIVTy != Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="comment">// TODO: Also use VPDerivedIVRecipe when only the step needs truncating, to</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="comment">// avoid separate truncate here.</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;           <span class="stringliteral">&quot;Truncation requires an integer step&quot;</span>);</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    Step = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a08230b6650e11747ef33144f1e463064">CreateTrunc</a>(Step, ScalarIVTy);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="comment">// We build scalar steps for both integer and floating-point induction</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="comment">// variables. Here, we determine the kind of arithmetic we will perform.</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> AddOp;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> MulOp;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keywordflow">if</span> (ScalarIVTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    AddOp = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    MulOp = <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    AddOp = <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionOpcode();</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    MulOp = Instruction::FMul;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160; </div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="comment">// Determine the number of scalars we need to generate for each unroll</span></div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <span class="comment">// iteration.</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="keywordtype">bool</span> FirstLaneOnly = <a class="code" href="namespacellvm_1_1vputils.html#aacc20e63a2f2d234ec139ed94e6384ce">vputils::onlyFirstLaneUsed</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <span class="comment">// Compute the scalar steps and save the results in State.</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntStepTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(ScalarIVTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(),</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                                     ScalarIVTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VecIVTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UnitStepVec = <span class="keyword">nullptr</span>, *SplatStep = <span class="keyword">nullptr</span>, *SplatIV = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <span class="keywordflow">if</span> (!FirstLaneOnly &amp;&amp; State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    VecIVTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarIVTy, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    UnitStepVec =</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae934d6e99e0516d606ae8e65ff6aed63">CreateStepVector</a>(<a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(IntStepTy, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>));</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    SplatStep = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, Step);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    SplatIV = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, ScalarIV);</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  }</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="keywordtype">unsigned</span> StartPart = 0;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordtype">unsigned</span> EndPart = State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="keywordtype">unsigned</span> StartLane = 0;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keywordtype">unsigned</span> EndLane = FirstLaneOnly ? 1 : State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keywordflow">if</span> (State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>) {</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    StartPart = State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>-&gt;Part;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    EndPart = StartPart + 1;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    StartLane = State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>-&gt;Lane.getKnownLane();</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    EndLane = StartLane + 1;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = StartPart; Part &lt; EndPart; ++Part) {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StartIdx0 = <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, IntStepTy, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, Part);</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160; </div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="keywordflow">if</span> (!FirstLaneOnly &amp;&amp; State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <span class="keyword">auto</span> *SplatStartIdx = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, StartIdx0);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      <span class="keyword">auto</span> *InitVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(SplatStartIdx, UnitStepVec);</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keywordflow">if</span> (ScalarIVTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>())</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        InitVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aea45123dc92604e7354b7ef87cd7adb5">CreateSIToFP</a>(InitVec, VecIVTy);</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(MulOp, InitVec, SplatStep);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="keyword">auto</span> *Add = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(AddOp, SplatIV, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Add, Part);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <span class="comment">// It&#39;s useful to record the lane values too for the known minimum number</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="comment">// of elements so we do those below. This improves the code quality when</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="comment">// trying to extract the first element, for example.</span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160; </div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordflow">if</span> (ScalarIVTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>())</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      StartIdx0 = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aea45123dc92604e7354b7ef87cd7adb5">CreateSIToFP</a>(StartIdx0, ScalarIVTy);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Lane = StartLane; Lane &lt; EndLane; ++Lane) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *StartIdx = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;          AddOp, StartIdx0, <a class="code" href="LoopVectorize_8cpp.html#a41355f2c2a12e043fa98f666dff27cc3">getSignedIntOrFpConstant</a>(ScalarIVTy, Lane));</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="comment">// The step returned by `createStepForVF` is a runtime-evaluated value</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="comment">// when VF is scalable. Otherwise, it should be folded into a Constant.</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() || isa&lt;Constant&gt;(StartIdx)) &amp;&amp;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;             <span class="stringliteral">&quot;Expected StartIdx to be folded to a constant when VF is not &quot;</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;             <span class="stringliteral">&quot;scalable&quot;</span>);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(MulOp, StartIdx, Step);</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      <span class="keyword">auto</span> *Add = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(AddOp, ScalarIV, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Add, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(Part, Lane));</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;}</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">// Generate code for the induction step. Note that induction steps are</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">// required to be loop-invariant</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a96d25fa6a3a7f93741ce1c948b24e0f4"> 2459</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LoopVectorize_8cpp.html#a96d25fa6a3a7f93741ce1c948b24e0f4">CreateStepValue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                              <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore,</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                              <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a> = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a51d9710fffc66dd4c9aab84af5978e1e">getDataLayout</a>();</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a> || SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(Step, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>)) &amp;&amp;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;         <span class="stringliteral">&quot;Induction step should be loop invariant&quot;</span>);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = dyn_cast&lt;SCEVUnknown&gt;(Step))</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getValue();</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160; </div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> Exp(SE, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;induction&quot;</span>);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="keywordflow">return</span> Exp.expandCodeFor(Step, Step-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>(), InsertBefore);</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="comment">/// Compute the transformed value of Index at offset StartValue using step</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment">/// StepValue.</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment">/// For integer induction, returns StartValue + Index * StepValue.</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment">/// For pointer induction, returns StartValue[Index * StepValue].</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment">/// FIXME: The newly created binary instructions should contain nsw/nuw</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="comment">/// flags, which can be found from the original scalar operations.</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560"> 2478</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                   <a class="code" href="classllvm_1_1Value.html">Value</a> *StartValue, <a class="code" href="classllvm_1_1Value.html">Value</a> *Step,</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *StepTy = Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedIndex = StepTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                           ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateSExtOrTrunc(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, StepTy)</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                           : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateCast(Instruction::SIToFP, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, StepTy);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="keywordflow">if</span> (CastedIndex != <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    CastedIndex-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(CastedIndex-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.cast&quot;</span>);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = CastedIndex;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  }</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <span class="comment">// Note: the IR at this point is broken. We cannot use SE to create any new</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="comment">// SCEV and then expand it, hoping that SCEV&#39;s simplification will give us</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="comment">// a more optimal code. Unfortunately, attempt of doing so on invalid IR may</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  <span class="comment">// lead to various SCEV crashes. So all we can do is to use builder and rely</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <span class="comment">// on InstCombine for future simplifications. Here we handle some trivial</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <span class="comment">// cases only.</span></div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <span class="keyword">auto</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a> = [&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType() &amp;&amp; <span class="stringliteral">&quot;Types don&#39;t match!&quot;</span>);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CX = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      <span class="keywordflow">if</span> (CX-&gt;isZero())</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CY = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <span class="keywordflow">if</span> (CY-&gt;isZero())</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  };</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160; </div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="comment">// We allow X to be a vector type, in which case Y will potentially be</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="comment">// splatted into a vector with the same element count.</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <span class="keyword">auto</span> <a class="code" href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a> = [&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) {</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarType() == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;           <span class="stringliteral">&quot;Types don&#39;t match!&quot;</span>);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CX = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <span class="keywordflow">if</span> (CX-&gt;isOne())</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CY = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="keywordflow">if</span> (CY-&gt;isOne())</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *XVTy = dyn_cast&lt;VectorType&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <span class="keywordflow">if</span> (XVTy &amp;&amp; !isa&lt;VectorType&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()))</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateVectorSplat(XVTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a59632c5deb0423a518ad984bdd04d41f">getElementCount</a>(), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateMul(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  };</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getKind()) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccaf0191e822c9708e106d7bb58aa9ec947">InductionDescriptor::IK_IntInduction</a>: {</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;VectorType&gt;(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>-&gt;getType()) &amp;&amp;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;           <span class="stringliteral">&quot;Vector indices not supported for integer inductions yet&quot;</span>);</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>-&gt;getType() == StartValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;           <span class="stringliteral">&quot;Index type does not match StartValue type&quot;</span>);</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(Step) &amp;&amp; cast&lt;ConstantInt&gt;(Step)-&gt;isMinusOne())</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateSub(StartValue, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, Step);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a>(StartValue, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  }</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccab61689ca7d0a024fc4ff52a74d691ae2">InductionDescriptor::IK_PtrInduction</a>: {</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;Constant&gt;(Step) &amp;&amp;</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;           <span class="stringliteral">&quot;Expected constant step for pointer induction&quot;</span>);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateGEP(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getElementType(), StartValue, <a class="code" href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, Step));</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  }</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccab0b71801de025f26b088a8cb22825f79">InductionDescriptor::IK_FpInduction</a>: {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;VectorType&gt;(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>-&gt;getType()) &amp;&amp;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;           <span class="stringliteral">&quot;Vector indices not supported for FP inductions yet&quot;</span>);</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() &amp;&amp; <span class="stringliteral">&quot;Expected FP Step value&quot;</span>);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keyword">auto</span> InductionBinOp = <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionBinOp();</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InductionBinOp &amp;&amp;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;           (InductionBinOp-&gt;getOpcode() == Instruction::FAdd ||</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            InductionBinOp-&gt;getOpcode() == Instruction::FSub) &amp;&amp;</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;           <span class="stringliteral">&quot;Original bin op should be defined for FP induction&quot;</span>);</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160; </div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MulExp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateFMul(Step, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateBinOp(InductionBinOp-&gt;getOpcode(), StartValue, MulExp,</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                         <span class="stringliteral">&quot;induction&quot;</span>);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabcca85d6fca1e5ba292e9d884797aa73f545">InductionDescriptor::IK_NoInduction</a>:</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;invalid enum&quot;</span>);</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;}</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae26a2cbdb26b960379cca81872a10dc1"> 2560</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae26a2cbdb26b960379cca81872a10dc1">InnerLoopVectorizer::packScalarIntoVectorValue</a>(<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>,</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                                                    <span class="keyword">const</span> <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a> &amp;Instance,</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                                                    <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarInst = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Instance);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VectorValue = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Instance.<a class="code" href="structllvm_1_1VPIteration.html#a323bf7200480600790f48e5a9cdf2ed2">Part</a>);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  VectorValue = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a39b5a72b70df94211893c7fc6bbfe1f5">CreateInsertElement</a>(</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      VectorValue, ScalarInst,</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      Instance.<a class="code" href="structllvm_1_1VPIteration.html#a67ae6a50eeac60108e45fe4088944f9f">Lane</a>.<a class="code" href="classllvm_1_1VPLane.html#a2855a09c41f64a31ab555a9ab7ec9c5f">getAsRuntimeExpr</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, VectorValue, Instance.<a class="code" href="structllvm_1_1VPIteration.html#a323bf7200480600790f48e5a9cdf2ed2">Part</a>);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;}</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="comment">// Return whether we allow using masked interleave-groups (for dealing with</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="comment">// strided loads/stores that reside in predicated blocks, or for dealing</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="comment">// with gaps).</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2"> 2574</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="comment">// If an override option has been passed in for interleaved accesses, use it.</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a266653d74b7082b0c2cfbef0d7b5a9e3">EnableMaskedInterleavedMemAccesses</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopVectorize_8cpp.html#a266653d74b7082b0c2cfbef0d7b5a9e3">EnableMaskedInterleavedMemAccesses</a>;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a6b0734de892207738014317d233c72ad">enableMaskedInterleavedAccessVectorization</a>();</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;}</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160; </div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="comment">// Try to vectorize the interleave group that \p Instr belongs to.</span></div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="comment">// E.g. Translate following interleaved load group (factor = 3):</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">//   for (i = 0; i &lt; N; i+=3) {</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="comment">//     R = Pic[i];             // Member of index 0</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="comment">//     G = Pic[i+1];           // Member of index 1</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment">//     B = Pic[i+2];           // Member of index 2</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="comment">//     ... // do something to R, G, B</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="comment">//   }</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="comment">// To:</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="comment">//   %wide.vec = load &lt;12 x i32&gt;                       ; Read 4 tuples of R,G,B</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;<span class="comment">//   %R.vec = shuffle %wide.vec, poison, &lt;0, 3, 6, 9&gt;   ; R elements</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="comment">//   %G.vec = shuffle %wide.vec, poison, &lt;1, 4, 7, 10&gt;  ; G elements</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="comment">//   %B.vec = shuffle %wide.vec, poison, &lt;2, 5, 8, 11&gt;  ; B elements</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="comment">// Or translate following interleaved store group (factor = 3):</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="comment">//   for (i = 0; i &lt; N; i+=3) {</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="comment">//     ... do something to R, G, B</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="comment">//     Pic[i]   = R;           // Member of index 0</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;<span class="comment">//     Pic[i+1] = G;           // Member of index 1</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="comment">//     Pic[i+2] = B;           // Member of index 2</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;<span class="comment">//   }</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="comment">// To:</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="comment">//   %R_G.vec = shuffle %R.vec, %G.vec, &lt;0, 1, 2, ..., 7&gt;</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment">//   %B_U.vec = shuffle %B.vec, poison, &lt;0, 1, 2, 3, u, u, u, u&gt;</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment">//   %interleaved.vec = shuffle %R_G.vec, %B_U.vec,</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">//        &lt;0, 4, 8, 1, 5, 9, 2, 6, 10, 3, 7, 11&gt;    ; Interleave R,G,B elements</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment">//   store &lt;12 x i32&gt; %interleaved.vec              ; Write 4 tuples of R,G,B</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#abb6b4f5c0e1dad90fe7bc7a920c4b1bf"> 2610</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#abb6b4f5c0e1dad90fe7bc7a920c4b1bf">InnerLoopVectorizer::vectorizeInterleaveGroup</a>(</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup&lt;Instruction&gt;</a> *Group, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> VPDefs,</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State, <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> StoredValues,</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *BlockInMask) {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr = Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#aac206f570f599e8832d28a15bddb12d5">getInsertPos</a>();</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160; </div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="comment">// Prepare for the vector type of the interleaved load/store.</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ScalarTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(Instr);</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  <span class="keywordtype">unsigned</span> InterleaveFactor = Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a46f3b431a3121fdf53608a283bf4efec">getFactor</a>();</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;scalable vectors not yet supported.&quot;</span>);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <span class="keyword">auto</span> *VecTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> * InterleaveFactor);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="comment">// Prepare for the new pointers.</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 2&gt;</a> AddrParts;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a5bb08a7480808cec4d5b9e1d0a3012c6">getIndex</a>(Instr);</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160; </div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="comment">// TODO: extend the masked interleaved-group support to reversed access.</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!BlockInMask || !Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a776b9e4e25dda6aff28a94e69a7533e6">isReverse</a>()) &amp;&amp;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;         <span class="stringliteral">&quot;Reversed masked interleave-group not supported.&quot;</span>);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160; </div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <span class="comment">// If the group is reverse, adjust the index to refer to the last vector lane</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="comment">// instead of the first. We adjust the index from the first vector lane,</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="comment">// rather than directly getting the pointer for lane VF - 1, because the</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="comment">// pointer operand of the interleaved access is supposed to be uniform. For</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="comment">// uniform instructions, we&#39;re only required to generate a value for the</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="comment">// first vector lane in each unroll iteration.</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="keywordflow">if</span> (Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a776b9e4e25dda6aff28a94e69a7533e6">isReverse</a>())</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> += (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() - 1) * Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a46f3b431a3121fdf53608a283bf4efec">getFactor</a>();</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160; </div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; Part++) {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrPart = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(Part, 0));</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(AddrPart);</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <span class="comment">// Notice current instruction could be any index. Need to adjust the address</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="comment">// to the member of index 0.</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <span class="comment">// E.g.  a = A[i+1];     // Member of index 1 (Current instruction)</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    <span class="comment">//       b = A[i];       // Member of index 0</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="comment">// Current pointer is pointed to A[i+1], adjust it to A[i].</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    <span class="comment">// E.g.  A[i+1] = a;     // Member of index 1</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    <span class="comment">//       A[i]   = b;     // Member of index 0</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <span class="comment">//       A[i+2] = c;     // Member of index 2 (Current instruction)</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <span class="comment">// Current pointer is pointed to A[i+2], adjust it to A[i].</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160; </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordtype">bool</span> InBounds = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SeparateConstOffsetFromGEP_8cpp.html#a589d62ce2ac872ff25beaad782d27235">gep</a> = dyn_cast&lt;GetElementPtrInst&gt;(AddrPart-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>()))</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      InBounds = <a class="code" href="SeparateConstOffsetFromGEP_8cpp.html#a589d62ce2ac872ff25beaad782d27235">gep</a>-&gt;isInBounds();</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    AddrPart = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afb5c46a140e1b7f08de54d9c035a8adc">CreateGEP</a>(ScalarTy, AddrPart, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(-<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>));</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    cast&lt;GetElementPtrInst&gt;(AddrPart)-&gt;setIsInBounds(InBounds);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="comment">// Cast to the vector pointer type.</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a> = AddrPart-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = VecTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(<a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    AddrParts.push_back(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">CreateBitCast</a>(AddrPart, PtrTy));</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  }</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160; </div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(Instr);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PoisonVec = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(VecTy);</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160; </div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MaskForGaps = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  <span class="keywordflow">if</span> (Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a3c0ed6567fafd374da72087409959b75">requiresScalarEpilogue</a>() &amp;&amp; !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af67062c22dbf5e0ab35164a778768476">isScalarEpilogueAllowed</a>()) {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    MaskForGaps = <a class="code" href="namespacellvm.html#a673cf7e3d4e84d3e3dfa9dc000499cba">createBitMaskForGaps</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>(), *Group);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaskForGaps &amp;&amp; <span class="stringliteral">&quot;Mask for Gaps is required but it is null&quot;</span>);</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  }</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;  <span class="comment">// Vectorize the interleaved load group.</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Instr)) {</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="comment">// For each unroll part, create a wide load for the group.</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 2&gt;</a> NewLoads;</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; Part++) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewLoad;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;      <span class="keywordflow">if</span> (BlockInMask || MaskForGaps) {</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(*<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) &amp;&amp;</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;               <span class="stringliteral">&quot;masked interleaved groups are not allowed.&quot;</span>);</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *GroupMask = MaskForGaps;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        <span class="keywordflow">if</span> (BlockInMask) {</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *BlockInMaskPart = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(BlockInMask, Part);</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *ShuffledMask = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10886c0492c6195902a91bb3ace8ac2e">CreateShuffleVector</a>(</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;              BlockInMaskPart,</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;              <a class="code" href="namespacellvm.html#a7504dd988bee776d391c05231515297d">createReplicatedMask</a>(InterleaveFactor, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()),</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;              <span class="stringliteral">&quot;interleaved.mask&quot;</span>);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;          GroupMask = MaskForGaps</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                          ? <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(Instruction::And, ShuffledMask,</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                                                MaskForGaps)</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                          : ShuffledMask;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        }</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        NewLoad =</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a483f68557374e8fc58f8a294e7f1268e">CreateMaskedLoad</a>(VecTy, AddrParts[Part], Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#aa311eadfce08b1fa5cf55c6c2008bb47">getAlign</a>(),</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                                     GroupMask, PoisonVec, <span class="stringliteral">&quot;wide.masked.vec&quot;</span>);</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      }</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        NewLoad = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a1e0fea1b88c314ecffb18922c6be5e70">CreateAlignedLoad</a>(VecTy, AddrParts[Part],</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                                            Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#aa311eadfce08b1fa5cf55c6c2008bb47">getAlign</a>(), <span class="stringliteral">&quot;wide.vec&quot;</span>);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a9c748347f137d9e3d6c51833e6882272">addMetadata</a>(NewLoad);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;      NewLoads.push_back(NewLoad);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    }</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160; </div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="comment">// For each member in the group, shuffle out the appropriate data from the</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="comment">// wide loads.</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordtype">unsigned</span> J = 0;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; InterleaveFactor; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#ab945330dc19d757dfe310145636b370c">getMember</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160; </div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;      <span class="comment">// Skip the gaps in the group.</span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;      <span class="keywordflow">if</span> (!Member)</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160; </div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      <span class="keyword">auto</span> StrideMask =</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;          <a class="code" href="namespacellvm.html#a689f785bfa4f3650dc44d519df0406fd">createStrideMask</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InterleaveFactor, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; Part++) {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *StridedVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10886c0492c6195902a91bb3ace8ac2e">CreateShuffleVector</a>(</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;            NewLoads[Part], StrideMask, <span class="stringliteral">&quot;strided.vec&quot;</span>);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        <span class="comment">// If this member has different type, cast the result type.</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        <span class="keywordflow">if</span> (Member-&gt;getType() != ScalarTy) {</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;VF is assumed to be non scalable.&quot;</span>);</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;          <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *OtherVTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Member-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;          StridedVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a208c011242ca3423a05a6db01b29910c">createBitOrPointerCast</a>(StridedVec, OtherVTy, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        }</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        <span class="keywordflow">if</span> (Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a776b9e4e25dda6aff28a94e69a7533e6">isReverse</a>())</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;          StridedVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a69d0103b83202f0339cfb6b018b3c78a">CreateVectorReverse</a>(StridedVec, <span class="stringliteral">&quot;reverse&quot;</span>);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(VPDefs[J], StridedVec, Part);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      }</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;      ++J;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    }</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  }</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160; </div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="comment">// The sub vector type for current instruction.</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="keyword">auto</span> *SubVT = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160; </div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="comment">// Vectorize the interleaved store group.</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  MaskForGaps = <a class="code" href="namespacellvm.html#a673cf7e3d4e84d3e3dfa9dc000499cba">createBitMaskForGaps</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>(), *Group);</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MaskForGaps || <a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(*<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>)) &amp;&amp;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;         <span class="stringliteral">&quot;masked interleaved groups are not allowed.&quot;</span>);</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MaskForGaps || !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) &amp;&amp;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;         <span class="stringliteral">&quot;masking gaps for scalable vectors is not yet supported.&quot;</span>);</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; Part++) {</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="comment">// Collect the stored vector from each member.</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> StoredVecs;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="keywordtype">unsigned</span> StoredIdx = 0;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; InterleaveFactor; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#ab945330dc19d757dfe310145636b370c">getMember</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) || MaskForGaps) &amp;&amp;</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;             <span class="stringliteral">&quot;Fail to get a member from an interleaved store group&quot;</span>);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#ab945330dc19d757dfe310145636b370c">getMember</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160; </div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      <span class="comment">// Skip the gaps in the group.</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      <span class="keywordflow">if</span> (!Member) {</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(SubVT);</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        StoredVecs.push_back(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      }</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredVec = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(StoredValues[StoredIdx], Part);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;      ++StoredIdx;</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160; </div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      <span class="keywordflow">if</span> (Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a776b9e4e25dda6aff28a94e69a7533e6">isReverse</a>())</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        StoredVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a69d0103b83202f0339cfb6b018b3c78a">CreateVectorReverse</a>(StoredVec, <span class="stringliteral">&quot;reverse&quot;</span>);</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      <span class="comment">// If this member has different type, cast it to a unified type.</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160; </div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <span class="keywordflow">if</span> (StoredVec-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != SubVT)</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        StoredVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a208c011242ca3423a05a6db01b29910c">createBitOrPointerCast</a>(StoredVec, SubVT, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160; </div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      StoredVecs.push_back(StoredVec);</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    }</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="comment">// Concatenate all vectors into a wide vector.</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *WideVec = <a class="code" href="namespacellvm.html#a4288169d91ab0f0f01405115fd2931a7">concatenateVectors</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, StoredVecs);</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160; </div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="comment">// Interleave the elements in the wide vector.</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IVec = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10886c0492c6195902a91bb3ace8ac2e">CreateShuffleVector</a>(</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        WideVec, <a class="code" href="namespacellvm.html#aab4ac3afe77847f88a5bec4ef29e68fa">createInterleaveMask</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>(), InterleaveFactor),</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="stringliteral">&quot;interleaved.vec&quot;</span>);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160; </div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewStoreInstr;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">if</span> (BlockInMask || MaskForGaps) {</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *GroupMask = MaskForGaps;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      <span class="keywordflow">if</span> (BlockInMask) {</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *BlockInMaskPart = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(BlockInMask, Part);</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ShuffledMask = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a10886c0492c6195902a91bb3ace8ac2e">CreateShuffleVector</a>(</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            BlockInMaskPart,</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            <a class="code" href="namespacellvm.html#a7504dd988bee776d391c05231515297d">createReplicatedMask</a>(InterleaveFactor, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()),</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            <span class="stringliteral">&quot;interleaved.mask&quot;</span>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;        GroupMask = MaskForGaps ? <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(Instruction::And,</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                                                      ShuffledMask, MaskForGaps)</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                                : ShuffledMask;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      }</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      NewStoreInstr = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aad07e3e0fa03f6c780e13d924325d8d0">CreateMaskedStore</a>(IVec, AddrParts[Part],</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                                                Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#aa311eadfce08b1fa5cf55c6c2008bb47">getAlign</a>(), GroupMask);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      NewStoreInstr =</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">CreateAlignedStore</a>(IVec, AddrParts[Part], Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#aa311eadfce08b1fa5cf55c6c2008bb47">getAlign</a>());</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    Group-&gt;<a class="code" href="classllvm_1_1InterleaveGroup.html#a9c748347f137d9e3d6c51833e6882272">addMetadata</a>(NewStoreInstr);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  }</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;}</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160; </div>
<div class="line"><a name="l02812"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e"> 2812</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">InnerLoopVectorizer::scalarizeInstruction</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr,</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                                               <a class="code" href="classllvm_1_1VPReplicateRecipe.html">VPReplicateRecipe</a> *RepRecipe,</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                                               <span class="keyword">const</span> <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a> &amp;Instance,</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                                               <span class="keywordtype">bool</span> IfPredicateInstr,</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                                               <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Instr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8cbe006c6c069502d37891c438847c23">isAggregateType</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t handle vectors&quot;</span>);</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160; </div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="comment">// llvm.experimental.noalias.scope.decl intrinsics must only be duplicated for</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="comment">// the first lane and part.</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  <span class="keywordflow">if</span> (isa&lt;NoAliasScopeDeclInst&gt;(Instr))</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <span class="keywordflow">if</span> (!Instance.<a class="code" href="structllvm_1_1VPIteration.html#af6b2c977def935b6b1b9a061281df6f3">isFirstIteration</a>())</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160; </div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  <span class="comment">// Does this instruction return a value ?</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <span class="keywordtype">bool</span> IsVoidRetTy = Instr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>();</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160; </div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Cloned = Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">clone</a>();</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="keywordflow">if</span> (!IsVoidRetTy)</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    Cloned-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(Instr-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.cloned&quot;</span>);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <span class="comment">// If the scalarized instruction contributes to the address computation of a</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  <span class="comment">// widen masked load/store which was in a basic block that needed predication</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <span class="comment">// and is not predicated after vectorization, we can&#39;t propagate</span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <span class="comment">// poison-generating flags (nuw/nsw, exact, inbounds, etc.). The scalarized</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">// instruction could feed a poison value to the base address of the widen</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="comment">// load/store.</span></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="keywordflow">if</span> (State.<a class="code" href="structllvm_1_1VPTransformState.html#aae693bb6dc12250b068ab60efde5f99e">MayGeneratePoisonRecipes</a>.contains(RepRecipe))</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    Cloned-&gt;<a class="code" href="classllvm_1_1Instruction.html#ad4613def4002aa69721553e567ca4187">dropPoisonGeneratingFlags</a>();</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160; </div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <span class="keywordflow">if</span> (Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>())</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(Instr);</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="comment">// Replace the operands of the cloned instructions with their scalar</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="comment">// equivalents in the new loop.</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(RepRecipe-&gt;<a class="code" href="classllvm_1_1VPUser.html#a11d83265a9e4ff6c6ecd3cf222ad0208">operands</a>())) {</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <span class="keyword">auto</span> InputInstance = Instance;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Operand = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.value();</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1vputils.html#a0ae36efaf093c35afe18910df9607b98">vputils::isUniformAfterVectorization</a>(Operand))</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      InputInstance.Lane = <a class="code" href="classllvm_1_1VPLane.html#af6be7b0459911799a13a8174138c7020">VPLane::getFirstLane</a>();</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    Cloned-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.index(), State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(Operand, InputInstance));</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#a5797d36eb67fb263b8c111e12e9818aa">addNewMetadata</a>(Cloned, Instr);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <span class="comment">// Place the cloned scalar in the new loop.</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#acc72050d863c3dbd1d98426c6f97d7de">Insert</a>(Cloned);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(RepRecipe, Cloned, Instance);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160; </div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <span class="comment">// If we just cloned a new assumption, add it the assumption cache.</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;AssumeInst&gt;(Cloned))</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>-&gt;<a class="code" href="classllvm_1_1AssumptionCache.html#a7f02822253b078960693acc2f30d4817">registerAssumption</a>(II);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="comment">// End if-block.</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="keywordflow">if</span> (IfPredicateInstr)</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a47eab9fa7cfa73af0b164da3fca49a0f">PredicatedInstructions</a>.push_back(Cloned);</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;}</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160; </div>
<div class="line"><a name="l02869"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca"> 2869</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">InnerLoopVectorizer::getOrCreateTripCount</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBlock) {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a>)</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a>;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160; </div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBlock);</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>(InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <span class="comment">// Find the loop boundaries.</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3ba2418cb3fe3918cd5cfa5f6fdce778">getWidestInductionType</a>();</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IdxTy &amp;&amp; <span class="stringliteral">&quot;No type for induction&quot;</span>);</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount = <a class="code" href="namespacellvm.html#adda962906fa6521f6794e5af3bf06c71">createTripCountSCEV</a>(IdxTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>);</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160; </div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160; </div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;  <span class="comment">// Expand the trip count and place the new instructions in the preheader.</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="comment">// Notice that the pre-header does not change, only the loop body.</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> Exp(*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;induction&quot;</span>);</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160; </div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="comment">// Count holds the overall loop count (N).</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a> = Exp.expandCodeFor(ExitCount, ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>(),</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                                InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160; </div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>())</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a> =</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;        <a class="code" href="classllvm_1_1CastInst.html#acd347d07162a5a80dac61e5bdea9616c">CastInst::CreatePointerCast</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a>, IdxTy, <span class="stringliteral">&quot;exitcount.ptrcnt.to.int&quot;</span>,</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;                                    InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160; </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">TripCount</a>;</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;}</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160; </div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *</div>
<div class="line"><a name="l02899"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4"> 2899</a></span>&#160;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">InnerLoopVectorizer::getOrCreateVectorTripCount</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBlock) {</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>)</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160; </div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TC = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(InsertBlock);</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>(InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160; </div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = TC-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <span class="comment">// This is where we can make the step a runtime constant.</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Step = <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, Ty, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>);</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <span class="comment">// If the tail is to be folded by masking, round the number of iterations N</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <span class="comment">// up to a multiple of Step instead of rounding down. This is done by first</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="comment">// adding Step-1 and then rounding down. Note that it&#39;s ok if this addition</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="comment">// overflows: the vector induction variable will eventually wrap to zero given</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="comment">// that it starts at zero and its Step is a power of two; the loop will then</span></div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  <span class="comment">// exit, with the last early-exit vector comparison also producing all-true.</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <span class="comment">// For scalable vectors the VF is not guaranteed to be a power of 2, but this</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <span class="comment">// is accounted for in emitIterationCountCheck that adds an overflow check.</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba">foldTailByMasking</a>()) {</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>) &amp;&amp;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;           <span class="stringliteral">&quot;VF*UF must be a power of 2 when folding tail by masking&quot;</span>);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NumLanes = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, Ty, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>);</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    TC = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        TC, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(NumLanes, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1)), <span class="stringliteral">&quot;n.rnd.up&quot;</span>);</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  }</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160; </div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <span class="comment">// Now we need to generate the expression for the part of the loop that the</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  <span class="comment">// vectorized body will execute. This is equal to N - (N % Step) if scalar</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <span class="comment">// iterations are not required for correctness, or N - Step, otherwise. Step</span></div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;  <span class="comment">// is equal to the vectorization factor (number of SIMD elements) times the</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <span class="comment">// unroll factor (number of SIMD instructions).</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ab9a873b7d011645b5b649c65f4be21ec">CreateURem</a>(TC, Step, <span class="stringliteral">&quot;n.mod.vf&quot;</span>);</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160; </div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <span class="comment">// There are cases where we *must* run at least one iteration in the remainder</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  <span class="comment">// loop.  See the cost model for when this can happen.  If the step evenly</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="comment">// divides the trip count, we set the remainder to be equal to the step. If</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  <span class="comment">// the step does not evenly divide the trip count, no adjustment is necessary</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <span class="comment">// since there will already be scalar iterations. Note that the minimum</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;  <span class="comment">// iterations check ensures that N &gt;= Step.</span></div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="keyword">auto</span> *IsZero = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a86d9ee5c4a2560ea49adf705ffa0e63a">CreateICmpEQ</a>(R, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(R-&gt;getType(), 0));</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    R = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(IsZero, Step, R);</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  }</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(TC, R, <span class="stringliteral">&quot;n.vec&quot;</span>);</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160; </div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;}</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a208c011242ca3423a05a6db01b29910c"> 2949</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a208c011242ca3423a05a6db01b29910c">InnerLoopVectorizer::createBitOrPointerCast</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *DstVTy,</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <span class="comment">// Verify that V is a vector type with same number of elements as DstVTy.</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <span class="keyword">auto</span> *DstFVTy = cast&lt;FixedVectorType&gt;(DstVTy);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = DstFVTy-&gt;getNumElements();</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <span class="keyword">auto</span> *SrcVecTy = cast&lt;FixedVectorType&gt;(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> == SrcVecTy-&gt;getNumElements()) &amp;&amp; <span class="stringliteral">&quot;Vector dimensions do not match&quot;</span>);</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcElemTy = SrcVecTy-&gt;getElementType();</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DstElemTy = DstFVTy-&gt;getElementType();</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(SrcElemTy) == <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(DstElemTy)) &amp;&amp;</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;         <span class="stringliteral">&quot;Vector elements must have same size&quot;</span>);</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160; </div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  <span class="comment">// Do a direct cast if element types are castable.</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html#a94f850488e8bda1d1b400821d6d61bd1">CastInst::isBitOrNoopPointerCastable</a>(SrcElemTy, DstElemTy, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) {</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2ebb635fa802cbd7f8b4962b03d49c33">CreateBitOrPointerCast</a>(V, DstFVTy);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  }</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <span class="comment">// V cannot be directly casted to desired vector type.</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="comment">// May happen when V is a floating point vector but DstVTy is a vector of</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  <span class="comment">// pointers or vice-versa. Handle this using a two-step bitcast using an</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  <span class="comment">// intermediate Integer type for the bitcast i.e. Ptr &lt;-&gt; Int &lt;-&gt; Float.</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DstElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() != SrcElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;         <span class="stringliteral">&quot;Only one type should be a pointer type&quot;</span>);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DstElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() != SrcElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;         <span class="stringliteral">&quot;Only one type should be a floating point type&quot;</span>);</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy =</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">IntegerType::getIntNTy</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(SrcElemTy));</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <span class="keyword">auto</span> *VecIntTy = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(IntTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastVal = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2ebb635fa802cbd7f8b4962b03d49c33">CreateBitOrPointerCast</a>(V, VecIntTy);</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2ebb635fa802cbd7f8b4962b03d49c33">CreateBitOrPointerCast</a>(CastVal, DstFVTy);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;}</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160; </div>
<div class="line"><a name="l02980"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a72c491cdf8cf0283d87008831431f917"> 2980</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a72c491cdf8cf0283d87008831431f917">InnerLoopVectorizer::emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass) {</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Count = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  <span class="comment">// Reuse existing vector loop preheader for TC checks.</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <span class="comment">// Note that new preheader block is generated for vector loop.</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">const</span> TCCheckBlock = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>(TCCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160; </div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  <span class="comment">// Generate code to check if the loop&#39;s trip count is less than VF * UF, or</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  <span class="comment">// equal to it in case a scalar epilogue is required; this implies that the</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <span class="comment">// vector trip count is zero. This check also covers the case where adding one</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  <span class="comment">// to the backedge-taken count overflowed leading to an incorrect trip count</span></div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;  <span class="comment">// of zero. In this case we will also jump to the scalar loop.</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;                                            : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  <span class="comment">// If tail is to be folded, vector loop takes care of all iterations.</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *CountTy = Count-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CheckMinIters = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a337deb4326c2dbbe852f77d2d213a9fb">getFalse</a>();</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keyword">auto</span> CreateStep = [&amp;]() -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="comment">// Create step with max(MinProTripCount, UF * VF).</span></div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a> * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() &gt;= <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">MinProfitableTripCount</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>())</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, CountTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>);</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160; </div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MinProfTC =</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, CountTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">MinProfitableTripCount</a>, 1);</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;      <span class="keywordflow">return</span> MinProfTC;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a9dd3b826858e2830f89aa99b46fb166f">CreateBinaryIntrinsic</a>(</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        <a class="code" href="namespacellvm_1_1APIntOps.html#a071b3581888d9e3b0b05cec58f152a91">Intrinsic::umax</a>, MinProfTC, <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, CountTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>));</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  };</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160; </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba">foldTailByMasking</a>())</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    CheckMinIters =</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">CreateICmp</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, Count, CreateStep(), <span class="stringliteral">&quot;min.iters.check&quot;</span>);</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="comment">// vscale is not necessarily a power-of-2, which means we cannot guarantee</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="comment">// an overflow to zero when updating induction variables and so an</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <span class="comment">// additional overflow check is required before entering the vector loop.</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160; </div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    <span class="comment">// Get the maximum unsigned value for the type.</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MaxUIntTripCount =</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CountTy, cast&lt;IntegerType&gt;(CountTy)-&gt;getMask());</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(MaxUIntTripCount, Count);</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <span class="comment">// Don&#39;t execute the vector loop if (UMax - n) &lt; (VF * UF).</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    CheckMinIters = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">CreateICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, CreateStep());</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  }</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160; </div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  <span class="comment">// Create new preheader for vector loop.</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a> =</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(TCCheckBlock, TCCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                 <span class="stringliteral">&quot;vector.ph&quot;</span>);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160; </div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#ade6d93f9485649bade540a37ec163058">properlyDominates</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(TCCheckBlock),</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;                               <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(Bypass)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()) &amp;&amp;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;         <span class="stringliteral">&quot;TC check is expected to dominate Bypass&quot;</span>);</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  <span class="comment">// Update dominator for Bypass &amp; LoopExit (if needed).</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(Bypass, TCCheckBlock);</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="comment">// If there is an epilogue which must run, there&#39;s no edge from the</span></div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="comment">// middle block to exit blocks  and thus no need to update the immediate</span></div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="comment">// dominator of the exit blocks.</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>, TCCheckBlock);</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160; </div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      TCCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(),</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, CheckMinIters));</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(TCCheckBlock);</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;}</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160; </div>
<div class="line"><a name="l03051"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e"> 3051</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e">InnerLoopVectorizer::emitSCEVChecks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass) {</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">const</span> SCEVCheckBlock =</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">RTChecks</a>.emitSCEVChecks(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>);</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <span class="keywordflow">if</span> (!SCEVCheckBlock)</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160; </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(SCEVCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>() ||</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;           (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a93a8f97a1e57c3bce2e7c3473d592c01">OptForSizeBasedOnProfile</a> &amp;&amp;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a35e67974daa692cfd961904c151ad33d">Hints</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() != <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a>)) &amp;&amp;</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;         <span class="stringliteral">&quot;Cannot SCEV check stride or overflow when optimizing for size&quot;</span>);</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160; </div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="comment">// Update dominator only if this is first RT check.</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.empty()) {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(Bypass, SCEVCheckBlock);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      <span class="comment">// If there is an epilogue which must run, there&#39;s no edge from the</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      <span class="comment">// middle block to exit blocks  and thus no need to update the immediate</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      <span class="comment">// dominator of the exit blocks.</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>, SCEVCheckBlock);</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  }</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(SCEVCheckBlock);</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a645c5c5c1e89cb56be66db8db877001d">AddedSafetyChecks</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="keywordflow">return</span> SCEVCheckBlock;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;}</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca"> 3078</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca">InnerLoopVectorizer::emitMemRuntimeChecks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass) {</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="comment">// VPlan-native path does not do any analysis for runtime checks currently.</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160; </div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">const</span> MemCheckBlock =</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">RTChecks</a>.emitMemRuntimeChecks(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <span class="comment">// Check if we generated code that checks in runtime if arrays overlap. We put</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="comment">// the checks into a separate block to make the more common case of few</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <span class="comment">// elements faster.</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  <span class="keywordflow">if</span> (!MemCheckBlock)</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160; </div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="keywordflow">if</span> (MemCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a93a8f97a1e57c3bce2e7c3473d592c01">OptForSizeBasedOnProfile</a>) {</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a35e67974daa692cfd961904c151ad33d">Hints</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a> &amp;&amp;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;           <span class="stringliteral">&quot;Cannot emit memory checks when optimizing for size, unless forced &quot;</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;           <span class="stringliteral">&quot;to vectorize.&quot;</span>);</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;VectorizationCodeSize&quot;</span>,</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;                                        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(),</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;                                        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Code-size may be reduced by not forcing &quot;</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;                <span class="stringliteral">&quot;vectorization, or by source-code modifications &quot;</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;                <span class="stringliteral">&quot;eliminating the need for runtime checks &quot;</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                <span class="stringliteral">&quot;(e.g., adding &#39;restrict&#39;).&quot;</span>;</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    });</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  }</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(MemCheckBlock);</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160; </div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a645c5c5c1e89cb56be66db8db877001d">AddedSafetyChecks</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="keywordflow">return</span> MemCheckBlock;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;}</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795"> 3114</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795">InnerLoopVectorizer::createVectorLoopSkeleton</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>) {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a07bd7f4b4c433f0197dbdcf68941e5fd">LoopScalarBody</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a> &amp;&amp; <span class="stringliteral">&quot;Invalid loop structure&quot;</span>);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#afd50c2de451ac9fc0865dc747dd2d485">getUniqueExitBlock</a>(); <span class="comment">// may be nullptr</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a> || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) &amp;&amp;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;         <span class="stringliteral">&quot;multiple exit loop without required epilogue?&quot;</span>);</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a> =</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;                 <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>) + <span class="stringliteral">&quot;middle.block&quot;</span>);</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a> =</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>,</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                 <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>) + <span class="stringliteral">&quot;scalar.ph&quot;</span>);</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="keyword">auto</span> *ScalarLatchTerm = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160; </div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  <span class="comment">// Set up the middle block terminator.  Two cases:</span></div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <span class="comment">// 1) If we know that we must execute the scalar epilogue, emit an</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="comment">//    unconditional branch.</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <span class="comment">// 2) Otherwise, we must have a single unique exit block (due to how we</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  <span class="comment">//    implement the multiple exit case).  In this case, set up a conditional</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  <span class="comment">//    branch from the middle block to the loop scalar preheader, and the</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  <span class="comment">//    exit block.  completeLoopSkeleton will update the condition to use an</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <span class="comment">//    iteration check, if required to decide whether to execute the remainder.</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BrInst = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ?</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>) :</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>,</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                       <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a414e874f68f2400a42f68317c97c79a2">getTrue</a>());</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  BrInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(ScalarLatchTerm-&gt;getDebugLoc());</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), BrInst);</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160; </div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  <span class="comment">// Update dominator for loop exit. During skeleton creation, only the vector</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  <span class="comment">// pre-header and the middle block are created. The vector loop is entirely</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <span class="comment">// created during VPlan exection.</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="comment">// If there is an epilogue which must run, there&#39;s no edge from the</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <span class="comment">// middle block to exit blocks  and thus no need to update the immediate</span></div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="comment">// dominator of the exit blocks.</span></div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;}</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160; </div>
<div class="line"><a name="l03156"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae7137d6863a9184da04c18725908e413"> 3156</a></span>&#160;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7137d6863a9184da04c18725908e413">InnerLoopVectorizer::createInductionResumeValue</a>(</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OrigPhi, <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;II,</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> BypassBlocks,</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    std::pair&lt;BasicBlock *, Value *&gt; AdditionalBypass) {</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">getOrCreateVectorTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a> &amp;&amp; <span class="stringliteral">&quot;Expected valid arguments&quot;</span>);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160; </div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OldInduction = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4f213123efd9b8524e1a413c15ed43bf">getPrimaryInduction</a>();</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;EndValue = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1d2bb8dc96ed2e49d7588600b9182333">IVEndValues</a>[OrigPhi];</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *EndValueFromAdditionalBypass = AdditionalBypass.second;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <span class="keywordflow">if</span> (OrigPhi == OldInduction) {</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    <span class="comment">// We know what the end value is.</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    EndValue = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160; </div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <span class="comment">// Fast-math-flags propagate from the original induction instruction.</span></div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="keywordflow">if</span> (II.<a class="code" href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">getInductionBinOp</a>() &amp;&amp; isa&lt;FPMathOperator&gt;(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">getInductionBinOp</a>()))</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setFastMathFlags(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">getInductionBinOp</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">getFastMathFlags</a>());</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160; </div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Step =</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        <a class="code" href="LoopVectorize_8cpp.html#a96d25fa6a3a7f93741ce1c948b24e0f4">CreateStepValue</a>(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#aa4d4c780188d04f2d52d48d360ff0a5e">getStep</a>(), *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), &amp;*<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.GetInsertPoint());</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    EndValue =</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;        <a class="code" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>, II.<a class="code" href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">getStartValue</a>(), Step, II);</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    EndValue-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;ind.end&quot;</span>);</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160; </div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <span class="comment">// Compute the end value for the additional bypass (if applicable).</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <span class="keywordflow">if</span> (AdditionalBypass.first) {</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.SetInsertPoint(&amp;(*AdditionalBypass.first-&gt;getFirstInsertionPt()));</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Step =</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;          <a class="code" href="LoopVectorize_8cpp.html#a96d25fa6a3a7f93741ce1c948b24e0f4">CreateStepValue</a>(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#aa4d4c780188d04f2d52d48d360ff0a5e">getStep</a>(), *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), &amp;*<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.GetInsertPoint());</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      EndValueFromAdditionalBypass = <a class="code" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a>(</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, AdditionalBypass.second, II.<a class="code" href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">getStartValue</a>(), Step, II);</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      EndValueFromAdditionalBypass-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;ind.end&quot;</span>);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    }</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  }</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160; </div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <span class="comment">// Create phi nodes to merge from the  backedge-taken check block.</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *BCResumeVal = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(OrigPhi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 3, <span class="stringliteral">&quot;bc.resume.val&quot;</span>,</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;                                         <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <span class="comment">// Copy original phi DL over to the new one.</span></div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  BCResumeVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(OrigPhi-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160; </div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="comment">// The new PHI merges the original incoming value, in case of a bypass,</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  <span class="comment">// or the value at the end of the vectorized loop.</span></div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  BCResumeVal-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(EndValue, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>);</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160; </div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <span class="comment">// Fix the scalar body counter (PHI node).</span></div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="comment">// The old induction&#39;s phi node in the scalar body needs the truncated</span></div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="comment">// value.</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : BypassBlocks)</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    BCResumeVal-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">getStartValue</a>(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160; </div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <span class="keywordflow">if</span> (AdditionalBypass.first)</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    BCResumeVal-&gt;<a class="code" href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">setIncomingValueForBlock</a>(AdditionalBypass.first,</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                                          EndValueFromAdditionalBypass);</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  <span class="keywordflow">return</span> BCResumeVal;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;}</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160; </div>
<div class="line"><a name="l03215"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a2a6e6e87c238d303539a31eb41d668e3"> 3215</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2a6e6e87c238d303539a31eb41d668e3">InnerLoopVectorizer::createInductionResumeValues</a>(</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    std::pair&lt;BasicBlock *, Value *&gt; AdditionalBypass) {</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((AdditionalBypass.first &amp;&amp; AdditionalBypass.second) ||</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;          (!AdditionalBypass.first &amp;&amp; !AdditionalBypass.second)) &amp;&amp;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;         <span class="stringliteral">&quot;Inconsistent information about additional bypass.&quot;</span>);</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="comment">// We are going to resume the execution of the scalar loop.</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <span class="comment">// Go over all of the induction variables that we found and fix the</span></div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  <span class="comment">// PHIs that are left in the scalar version of the loop.</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  <span class="comment">// The starting values of PHI nodes depend on the counter of the last</span></div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <span class="comment">// iteration in the vectorized loop.</span></div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <span class="comment">// If we come from a bypass edge then we need to start from the original</span></div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  <span class="comment">// start value.</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;InductionEntry : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">getInductionVars</a>()) {</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OrigPhi = InductionEntry.first;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;II = InductionEntry.second;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *BCResumeVal = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7137d6863a9184da04c18725908e413">createInductionResumeValue</a>(</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        OrigPhi, II, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>, AdditionalBypass);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    OrigPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">setIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>, BCResumeVal);</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  }</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;}</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160; </div>
<div class="line"><a name="l03236"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253"> 3236</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253">InnerLoopVectorizer::completeLoopSkeleton</a>() {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  <span class="comment">// The trip counts should be cached by now.</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Count = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">getOrCreateVectorTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160; </div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <span class="keyword">auto</span> *ScalarLatchTerm = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160; </div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  <span class="comment">// Add a check in the middle block to see if we have completed</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  <span class="comment">// all of the iterations in the first vector loop.  Three cases:</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;  <span class="comment">// 1) If we require a scalar epilogue, there is no conditional branch as</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  <span class="comment">//    we unconditionally branch to the scalar preheader.  Do nothing.</span></div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <span class="comment">// 2) If (N - N%VF) == N, then we *don&#39;t* need to run the remainder.</span></div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;  <span class="comment">//    Thus if tail is to be folded, we know we don&#39;t need to run the</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <span class="comment">//    remainder and we can use the previous value for the condition (true).</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  <span class="comment">// 3) Otherwise, construct a runtime check.</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) &amp;&amp; !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba">foldTailByMasking</a>()) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CmpN = <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>,</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                                        Count, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>, <span class="stringliteral">&quot;cmp.n&quot;</span>,</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                                        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160; </div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <span class="comment">// Here we use the same DebugLoc as the scalar loop latch terminator instead</span></div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <span class="comment">// of the corresponding compare because they may have ended up with</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="comment">// different line numbers and we want to avoid awkward line stepping while</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="comment">// debugging. Eg. if the compare has got a line number inside the loop.</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    CmpN-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(ScalarLatchTerm-&gt;getDebugLoc());</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    cast&lt;BranchInst&gt;(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())-&gt;setCondition(CmpN);</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  }</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160; </div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">verify</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>));</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160; </div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;}</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160; </div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;std::pair&lt;BasicBlock *, Value *&gt;</div>
<div class="line"><a name="l03272"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a2822137afbc8a9a1304f1b3b115498db"> 3272</a></span>&#160;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2822137afbc8a9a1304f1b3b115498db">InnerLoopVectorizer::createVectorizedLoopSkeleton</a>() {</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment">   In this function we generate a new loop. The new loop will contain</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;<span class="comment">   the vectorized instructions while the old loop will continue to run the</span></div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;<span class="comment">   scalar remainder.</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">       [ ] &lt;-- loop iteration number check.</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="comment">    /   |</span></div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment">   /    v</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="comment">  |    [ ] &lt;-- vector loop bypass (may consist of multiple blocks).</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;<span class="comment">  |  /  |</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;<span class="comment">  | /   v</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="comment">  ||   [ ]     &lt;-- vector pre header.</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="comment">  |/    |</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="comment">  |     v</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">  |    [  ] \</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="comment">  |    [  ]_|   &lt;-- vector loop (created during VPlan execution).</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="comment">  |     |</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;<span class="comment">  |     v</span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;<span class="comment">  \   -[ ]   &lt;--- middle-block.</span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;<span class="comment">   \/   |</span></div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;<span class="comment">   /\   v</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;<span class="comment">   | -&gt;[ ]     &lt;--- new preheader.</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="comment">   |    |</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="comment"> (opt)  v      &lt;-- edge from middle to exit iff epilogue is not required.</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="comment">   |   [ ] \</span></div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="comment">   |   [ ]_|   &lt;-- old scalar loop to handle remainder (scalar epilogue).</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="comment">    \   |</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="comment">     \  v</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;<span class="comment">      &gt;[ ]     &lt;-- exit block(s).</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="comment">   ...</span></div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160; </div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <span class="comment">// Create an empty vector loop, and prepare basic blocks for the runtime</span></div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;  <span class="comment">// checks.</span></div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795">createVectorLoopSkeleton</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160; </div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="comment">// Now, compare the new count to zero. If it is zero skip the vector loop and</span></div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="comment">// jump to the scalar loop. This check also covers the case where the</span></div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  <span class="comment">// backedge-taken count is uint##_max: adding one to it will overflow leading</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  <span class="comment">// to an incorrect trip count of zero. In this (rare) case we will also jump</span></div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  <span class="comment">// to the scalar loop.</span></div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25">emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;  <span class="comment">// Generate the code to check any assumptions that we&#39;ve made for SCEV</span></div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <span class="comment">// expressions.</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e">emitSCEVChecks</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  <span class="comment">// Generate the code that checks in runtime if arrays overlap. We put the</span></div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  <span class="comment">// checks into a separate block to make the more common case of few elements</span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  <span class="comment">// faster.</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca">emitMemRuntimeChecks</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;  <span class="comment">// Emit phis for the new starting index of the scalar loop.</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2a6e6e87c238d303539a31eb41d668e3">createInductionResumeValues</a>();</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;  <span class="keywordflow">return</span> {<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253">completeLoopSkeleton</a>(), <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;}</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160; </div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;<span class="comment">// Fix up external users of the induction variable. At this point, we are</span></div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;<span class="comment">// in LCSSA form, with all external PHIs that use the IV having one input value,</span></div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="comment">// coming from the remainder loop. We need those PHIs to also have a correct</span></div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="comment">// value for the IV when arriving directly from the middle block.</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a4a2f293d45c29130bf71bfa9680c5e40"> 3335</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a4a2f293d45c29130bf71bfa9680c5e40">InnerLoopVectorizer::fixupIVUsers</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OrigPhi,</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;II,</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                                       <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *EndValue,</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;                                       <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MiddleBlock,</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                                       <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *VectorHeader, <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  <span class="comment">// There are two kinds of external IV usages - those that use the value</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="comment">// computed in the last iteration (the PHI) and those that use the penultimate</span></div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;  <span class="comment">// value (the value that feeds into the phi from the loop latch).</span></div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  <span class="comment">// We allow both, but they, obviously, have different values.</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160; </div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#afd50c2de451ac9fc0865dc747dd2d485">getUniqueExitBlock</a>() &amp;&amp; <span class="stringliteral">&quot;Expected a single exit block&quot;</span>);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160; </div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> MissingVals;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160; </div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <span class="comment">// An external user of the last iteration&#39;s value should see the value that</span></div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;  <span class="comment">// the remainder loop uses to initialize its own IV.</span></div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a1673ee57164ca23d9545b629b55e08d2">PostInc</a> = OrigPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a1673ee57164ca23d9545b629b55e08d2">PostInc</a>-&gt;users()) {</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI)) {</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;PHINode&gt;(UI) &amp;&amp; <span class="stringliteral">&quot;Expected LCSSA form&quot;</span>);</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;      MissingVals[UI] = EndValue;</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    }</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  }</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  <span class="comment">// An external user of the penultimate value need to see EndValue - Step.</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;  <span class="comment">// The simplest way to get this is to recompute it from the constituent SCEVs,</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;  <span class="comment">// that is Start + (Step * (CRD - 1)).</span></div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : OrigPhi-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <span class="keyword">auto</span> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI)) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;PHINode&gt;(UI) &amp;&amp; <span class="stringliteral">&quot;Expected LCSSA form&quot;</span>);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(MiddleBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <span class="comment">// Fast-math-flags propagate from the original induction instruction.</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <span class="keywordflow">if</span> (II.<a class="code" href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">getInductionBinOp</a>() &amp;&amp; isa&lt;FPMathOperator&gt;(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">getInductionBinOp</a>()))</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setFastMathFlags(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">getInductionBinOp</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">getFastMathFlags</a>());</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160; </div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CountMinusOne = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateSub(</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">VectorTripCount</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      CountMinusOne-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;cmo&quot;</span>);</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Step = <a class="code" href="LoopVectorize_8cpp.html#a96d25fa6a3a7f93741ce1c948b24e0f4">CreateStepValue</a>(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#aa4d4c780188d04f2d52d48d360ff0a5e">getStep</a>(), *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(),</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                                    VectorHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Escape =</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;          <a class="code" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, CountMinusOne, II.<a class="code" href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">getStartValue</a>(), Step, II);</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      Escape-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;ind.escape&quot;</span>);</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      MissingVals[UI] = Escape;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    }</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  }</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160; </div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : MissingVals) {</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first);</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="comment">// One corner case we have to handle is two IVs &quot;chasing&quot; each-other,</span></div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <span class="comment">// that is %IV2 = phi [...], [ %IV1, %latch ]</span></div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="comment">// In this case, if IV1 has an external use, we need to avoid adding both</span></div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <span class="comment">// &quot;last value of IV1&quot; and &quot;penultimate value of IV2&quot;. So, verify that we</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    <span class="comment">// don&#39;t already have an incoming value for the middle block.</span></div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getBasicBlockIndex(MiddleBlock) == -1) {</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second, MiddleBlock);</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      Plan.<a class="code" href="classllvm_1_1VPlan.html#a37397a91646330bb54d00429975ff770">removeLiveOut</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    }</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  }</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;}</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160; </div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160; </div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="keyword">struct </span>CSEDenseMapInfo {</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> canHandle(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <span class="keywordflow">return</span> isa&lt;InsertElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;ExtractElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;           isa&lt;ShuffleVectorInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  }</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160; </div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *getEmptyKey() {</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;Instruction *&gt;::getEmptyKey</a>();</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  }</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160; </div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *getTombstoneKey() {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;Instruction *&gt;::getTombstoneKey</a>();</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  }</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160; </div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> getHashValue(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(canHandle(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <span class="stringliteral">&quot;Unknown instruction!&quot;</span>);</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#add71474638430694c84640146383fc44">hash_combine</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), <a class="code" href="namespacellvm.html#af80edfc5e42059e045aa7bf7fe42bee3">hash_combine_range</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;value_op_begin(),</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                                                           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;value_op_end()));</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160; </div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a0f0d66fa63bebb53ddd51f1cc4def0f8">isEqual</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == getEmptyKey() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> == getEmptyKey() ||</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;        <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == getTombstoneKey() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> == getTombstoneKey())</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;isIdenticalTo(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  }</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;};</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160; </div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;<span class="comment">///Perform cse of induction variable instructions.</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#acc13ee8b8985399901ac09b51822e21a"> 3433</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#acc13ee8b8985399901ac09b51822e21a">cse</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;  <span class="comment">// Perform simple cse.</span></div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;Instruction *, Instruction *, 4, CSEDenseMapInfo&gt;</a> CSEMap;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <span class="keywordflow">if</span> (!CSEDenseMapInfo::canHandle(&amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>))</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160; </div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    <span class="comment">// Check if we can replace this instruction with any of the</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    <span class="comment">// visited instructions.</span></div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V = CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(&amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>)) {</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>.replaceAllUsesWith(V);</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>.eraseFromParent();</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;    }</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160; </div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;    CSEMap[&amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>] = &amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  }</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;}</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160; </div>
<div class="line"><a name="l03452"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ad5180469a22eefe055d29c1cef4d47a3"> 3452</a></span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ad5180469a22eefe055d29c1cef4d47a3">LoopVectorizationCostModel::getVectorCallCost</a>(</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1Function.html">Function</a> **Variant, <span class="keywordtype">bool</span> *NeedsMask)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ScalarRetTy = CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *, 4&gt;</a> Tys, ScalarTys;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ArgOp : CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>())</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    ScalarTys.push_back(ArgOp-&gt;getType());</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160; </div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  <span class="comment">// Estimate cost of scalarized vector call. The source operands are assumed</span></div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;  <span class="comment">// to be vectors, so we need to extract individual elements from there,</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  <span class="comment">// execute VF scalar calls, and then gather the result into the vector return</span></div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  <span class="comment">// value.</span></div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarCallCost =</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af67833027bb46ddb390684a6f0b75398">getCallInstrCost</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, ScalarRetTy, ScalarTys, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="keywordflow">return</span> ScalarCallCost;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160; </div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  <span class="comment">// Compute corresponding vector type for return value and arguments.</span></div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ScalarRetTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Type.html">Type</a> *ScalarTy : ScalarTys)</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    Tys.push_back(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ScalarTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160; </div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <span class="comment">// Compute costs of unpacking argument values for the scalar calls and</span></div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <span class="comment">// packing the return values to a vector.</span></div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarizationCost =</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      getScalarizationOverhead(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160; </div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> =</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      ScalarCallCost * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() + ScalarizationCost;</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160; </div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;  <span class="comment">// If we can&#39;t emit a vector call for this function, then the currently found</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;  <span class="comment">// cost is the cost we need to return.</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> MaskCost = 0;</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;  <a class="code" href="structllvm_1_1VFShape.html">VFShape</a> Shape = <a class="code" href="structllvm_1_1VFShape.html#a33df83a8555fc8dd7c7d547576abb354">VFShape::get</a>(*CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <span class="keyword">false</span> <span class="comment">/*HasGlobalPred*/</span>);</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *VecFunc = <a class="code" href="classllvm_1_1VFDatabase.html">VFDatabase</a>(*CI).<a class="code" href="group__VFDatabase.html#ga66862f50dead385e61e416b35110c5f1">getVectorizedFunction</a>(Shape);</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="comment">// If we want an unmasked vector function but can&#39;t find one matching the VF,</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  <span class="comment">// maybe we can find vector function that does use a mask and synthesize</span></div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  <span class="comment">// an all-true mask.</span></div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <span class="keywordflow">if</span> (!VecFunc) {</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    Shape = <a class="code" href="structllvm_1_1VFShape.html#a33df83a8555fc8dd7c7d547576abb354">VFShape::get</a>(*CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <span class="comment">/*HasGlobalPred=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    VecFunc = <a class="code" href="classllvm_1_1VFDatabase.html">VFDatabase</a>(*CI).<a class="code" href="group__VFDatabase.html#ga66862f50dead385e61e416b35110c5f1">getVectorizedFunction</a>(Shape);</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="comment">// If we found one, add in the cost of creating a mask</span></div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    <span class="keywordflow">if</span> (VecFunc) {</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <span class="keywordflow">if</span> (NeedsMask)</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;        *NeedsMask = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      MaskCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa0519f26bcb15c25ac0ff557061fa7af">getShuffleCost</a>(</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796">TargetTransformInfo::SK_Broadcast</a>,</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;          <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;              <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">IntegerType::getInt1Ty</a>(VecFunc-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>()),</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;              <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    }</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;  }</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160; </div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a> || CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a1fb374eb65dcf7cd3d1671efb2616f76">isNoBuiltin</a>() || !VecFunc)</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160; </div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;  <span class="comment">// If the corresponding vector cost is cheaper, return its cost.</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> VectorCallCost =</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af67833027bb46ddb390684a6f0b75398">getCallInstrCost</a>(<span class="keyword">nullptr</span>, RetTy, Tys, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) + MaskCost;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  <span class="keywordflow">if</span> (VectorCallCost &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>) {</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    *Variant = VecFunc;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = VectorCallCost;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;  }</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;}</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160; </div>
<div class="line"><a name="l03519"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a3dd07e45e737ead315e7e7ad1ae74692"> 3519</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="LoopVectorize_8cpp.html#a3dd07e45e737ead315e7e7ad1ae74692">MaybeVectorizeType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Elt, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || (!Elt-&gt;<a class="code" href="classllvm_1_1Type.html#abf313eff420b7c6c8e322a2e9c53cd90">isIntOrPtrTy</a>() &amp;&amp; !Elt-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()))</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <span class="keywordflow">return</span> Elt;</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Elt, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;}</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l03526"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a5abced3ab870d7abf57f2b35a02cd041"> 3526</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a5abced3ab870d7abf57f2b35a02cd041">LoopVectorizationCostModel::getVectorIntrinsicCost</a>(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI,</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;                                                   <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = <a class="code" href="namespacellvm.html#a11c66d01880f53332fc7ad53f565b039">getVectorIntrinsicIDForCall</a>(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>);</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> &amp;&amp; <span class="stringliteral">&quot;Expected intrinsic call!&quot;</span>);</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = <a class="code" href="LoopVectorize_8cpp.html#a3dd07e45e737ead315e7e7ad1ae74692">MaybeVectorizeType</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;  <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FPMO = dyn_cast&lt;FPMathOperator&gt;(CI))</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    FMF = FPMO-&gt;getFastMathFlags();</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160; </div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *&gt;</a> <a class="code" href="AMDGPULowerKernelArguments_8cpp.html#a1161e5a4e753384aaba3a8e4533c4261">Arguments</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>());</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>();</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *&gt;</a> ParamTys;</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  <a class="code" href="lib_2Target_2README_8txt.html#a69955d334349c9adad86cd95171dce4c">std::transform</a>(FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a05d5616e1422394b4d350c008b0cc5e0">param_begin</a>(), FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#aeae69a459419ec0bb738cdc73f4fc2a1">param_end</a>(),</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                 std::back_inserter(ParamTys),</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                 [&amp;](<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) { return MaybeVectorizeType(Ty, VF); });</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160; </div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  <a class="code" href="classllvm_1_1IntrinsicCostAttributes.html">IntrinsicCostAttributes</a> CostAttrs(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, RetTy, <a class="code" href="AMDGPULowerKernelArguments_8cpp.html#a1161e5a4e753384aaba3a8e4533c4261">Arguments</a>, ParamTys, FMF,</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                                    dyn_cast&lt;IntrinsicInst&gt;(CI));</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a4218f47749d093473e680ad0199fb239">getIntrinsicInstrCost</a>(CostAttrs,</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;                                   <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TargetTransformInfo::TCK_RecipThroughput</a>);</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;}</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160; </div>
<div class="line"><a name="l03548"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359"> 3548</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359">smallestIntegerVectorType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *T2) {</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;  <span class="keyword">auto</span> *I1 = cast&lt;IntegerType&gt;(cast&lt;VectorType&gt;(<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>)-&gt;getElementType());</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  <span class="keyword">auto</span> *I2 = cast&lt;IntegerType&gt;(cast&lt;VectorType&gt;(T2)-&gt;getElementType());</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;  <span class="keywordflow">return</span> I1-&gt;getBitWidth() &lt; I2-&gt;getBitWidth() ? <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> : T2;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;}</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160; </div>
<div class="line"><a name="l03554"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ab2ebcb0227079343a9a2e53638c1d76e"> 3554</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="LoopVectorize_8cpp.html#ab2ebcb0227079343a9a2e53638c1d76e">largestIntegerVectorType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *T2) {</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <span class="keyword">auto</span> *I1 = cast&lt;IntegerType&gt;(cast&lt;VectorType&gt;(<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>)-&gt;getElementType());</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;  <span class="keyword">auto</span> *I2 = cast&lt;IntegerType&gt;(cast&lt;VectorType&gt;(T2)-&gt;getElementType());</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <span class="keywordflow">return</span> I1-&gt;getBitWidth() &gt; I2-&gt;getBitWidth() ? <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> : T2;</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;}</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160; </div>
<div class="line"><a name="l03560"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a78472ee88ead39b42e99ce633c22428d"> 3560</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a78472ee88ead39b42e99ce633c22428d">InnerLoopVectorizer::truncateToMinimalBitwidths</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;  <span class="comment">// For every instruction `I` in MinBWs, truncate the operands, create a</span></div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  <span class="comment">// truncated version of `I` and reextend its result. InstCombine runs</span></div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;  <span class="comment">// later and will remove any ext/trunc pairs.</span></div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> Erased;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;KV : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a3d2ab7c2a128f7e20765d0bd0ac745ea">getMinimalBitwidths</a>()) {</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <span class="comment">// If the value wasn&#39;t vectorized, we must maintain the original scalar</span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <span class="comment">// type. The absence of the value from State indicates that it</span></div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    <span class="comment">// wasn&#39;t vectorized.</span></div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="comment">// FIXME: Should not rely on getVPValue at this point.</span></div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">Plan</a>-&gt;<a class="code" href="classllvm_1_1VPlan.html#af6c277f93322363a61d8ba68204137f6">getVPValue</a>(KV.first, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    <span class="keywordflow">if</span> (!State.<a class="code" href="structllvm_1_1VPTransformState.html#a822e8ad6b7b1af54dcad80db1cf96b87">hasAnyVectorValue</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>))</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Part);</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;      <span class="keywordflow">if</span> (Erased.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty() || !isa&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *OriginalTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType();</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *ScalarTruncatedTy =</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;          <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(OriginalTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(), KV.second);</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;      <span class="keyword">auto</span> *TruncatedTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;          ScalarTruncatedTy, cast&lt;VectorType&gt;(OriginalTy)-&gt;getElementCount());</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">if</span> (TruncatedTy == OriginalTy)</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160; </div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      <span class="keyword">auto</span> ShrinkOperand = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ZI = dyn_cast&lt;ZExtInst&gt;(V))</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;          <span class="keywordflow">if</span> (ZI-&gt;getSrcTy() == TruncatedTy)</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;            <span class="keywordflow">return</span> ZI-&gt;getOperand(0);</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(V, TruncatedTy);</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;      };</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160; </div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;      <span class="comment">// The actual instruction modification depends on the instruction type,</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;      <span class="comment">// unfortunately.</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateBinOp(BO-&gt;getOpcode(), ShrinkOperand(BO-&gt;getOperand(0)),</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                             ShrinkOperand(BO-&gt;getOperand(1)));</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160; </div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        <span class="comment">// Any wrapping introduced by shrinking this operation shouldn&#39;t be</span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        <span class="comment">// considered undefined behavior. So, we can&#39;t unconditionally copy</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        <span class="comment">// arithmetic wrapping flags to NewI.</span></div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        cast&lt;BinaryOperator&gt;(NewI)-&gt;copyIRFlags(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/*IncludeWrapFlags=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;        NewI =</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateICmp(CI-&gt;getPredicate(), ShrinkOperand(CI-&gt;getOperand(0)),</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                         ShrinkOperand(CI-&gt;getOperand(1)));</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;        NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateSelect(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(),</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;                              ShrinkOperand(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue()),</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                              ShrinkOperand(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue()));</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        <span class="keywordflow">switch</span> (CI-&gt;getOpcode()) {</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled cast!&quot;</span>);</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;          NewI = ShrinkOperand(CI-&gt;getOperand(0));</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;        <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;          NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateSExtOrTrunc(</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;              CI-&gt;getOperand(0),</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;              <a class="code" href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359">smallestIntegerVectorType</a>(OriginalTy, TruncatedTy));</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;          NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;              CI-&gt;getOperand(0),</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;              <a class="code" href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359">smallestIntegerVectorType</a>(OriginalTy, TruncatedTy));</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        }</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;ShuffleVectorInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        <span class="keyword">auto</span> Elements0 =</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            cast&lt;VectorType&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0)-&gt;getType())-&gt;getElementCount();</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;        <span class="keyword">auto</span> *O0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;            <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0), <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarTruncatedTy, Elements0));</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        <span class="keyword">auto</span> Elements1 =</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;            cast&lt;VectorType&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1)-&gt;getType())-&gt;getElementCount();</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        <span class="keyword">auto</span> *O1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;            <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1), <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarTruncatedTy, Elements1));</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;        NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateShuffleVector(O0, O1, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getShuffleMask());</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        <span class="comment">// Don&#39;t do anything with the operands, just extend the result.</span></div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = dyn_cast&lt;InsertElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        <span class="keyword">auto</span> Elements =</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;            cast&lt;VectorType&gt;(<a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>-&gt;getOperand(0)-&gt;getType())-&gt;getElementCount();</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;        <span class="keyword">auto</span> *O0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;            <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>-&gt;getOperand(0), <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarTruncatedTy, Elements));</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;        <span class="keyword">auto</span> *O1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(<a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>-&gt;getOperand(1), ScalarTruncatedTy);</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;        NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateInsertElement(O0, O1, <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>-&gt;getOperand(2));</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *EE = dyn_cast&lt;ExtractElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        <span class="keyword">auto</span> Elements =</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;            cast&lt;VectorType&gt;(EE-&gt;getOperand(0)-&gt;getType())-&gt;getElementCount();</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        <span class="keyword">auto</span> *O0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;            EE-&gt;getOperand(0), <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarTruncatedTy, Elements));</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;        NewI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateExtractElement(O0, EE-&gt;getOperand(2));</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        <span class="comment">// If we don&#39;t know what to do, be conservative and don&#39;t do anything.</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      }</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160; </div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;      <span class="comment">// Lastly, extend the result.</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      NewI-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExtOrTrunc(NewI, OriginalTy);</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(Res);</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;      cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;eraseFromParent();</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      Erased.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a47d824e6296e81c04858e04a72dde4eb">reset</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Res, Part);</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;  }</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160; </div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;  <span class="comment">// We&#39;ll have created a bunch of ZExts that are now parentless. Clean up.</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;KV : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a3d2ab7c2a128f7e20765d0bd0ac745ea">getMinimalBitwidths</a>()) {</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    <span class="comment">// If the value wasn&#39;t vectorized, we must maintain the original scalar</span></div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    <span class="comment">// type. The absence of the value from State indicates that it</span></div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="comment">// wasn&#39;t vectorized.</span></div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="comment">// FIXME: Should not rely on getVPValue at this point.</span></div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">Plan</a>-&gt;<a class="code" href="classllvm_1_1VPlan.html#af6c277f93322363a61d8ba68204137f6">getVPValue</a>(KV.first, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    <span class="keywordflow">if</span> (!State.<a class="code" href="structllvm_1_1VPTransformState.html#a822e8ad6b7b1af54dcad80db1cf96b87">hasAnyVectorValue</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>))</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Part);</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;      <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> *Inst = dyn_cast&lt;ZExtInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;      <span class="keywordflow">if</span> (Inst &amp;&amp; Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewI = Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#a47d824e6296e81c04858e04a72dde4eb">reset</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, NewI, Part);</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;      }</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    }</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;  }</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;}</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160; </div>
<div class="line"><a name="l03693"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ae2a4807be3034c8d65b3195b547f22e5"> 3693</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae2a4807be3034c8d65b3195b547f22e5">InnerLoopVectorizer::fixVectorizedLoop</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State,</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;                                            <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  <span class="comment">// Insert truncates and extends for any truncated instructions as hints to</span></div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;  <span class="comment">// InstCombine.</span></div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>())</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a78472ee88ead39b42e99ce633c22428d">truncateToMinimalBitwidths</a>(State);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160; </div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;  <span class="comment">// Fix widened non-induction PHIs by setting up the PHI operands.</span></div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a8d204031ffe1bcc568fb040aebe5f278">fixNonInductionPHIs</a>(Plan, State);</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160; </div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <span class="comment">// At this point every instruction in the original loop is widened to a</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <span class="comment">// vector form. Now we need to fix the recurrences in the loop. These PHI</span></div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  <span class="comment">// nodes are currently empty because we did not want to introduce cycles.</span></div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <span class="comment">// This is the second stage of vectorizing recurrences.</span></div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9092d12fba0d0d26f3eedf809d7348fe">fixCrossIterationPHIs</a>(State);</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  <span class="comment">// Forget the original basic block.</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>()-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a592bdd7731b14ff4ff5d646f6f399900">forgetLoop</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>);</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160; </div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *LatchVPBB = Plan.<a class="code" href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">getVectorLoopRegion</a>()-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a33d7fc49dbb786dce0e0c5762f067935">getExitingBasicBlock</a>();</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *VectorLoop = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#a0741c1fb9535c8e4dcd98d3f1f41474d">VPBB2IRBB</a>[LatchVPBB]);</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="comment">// No edge from the middle block to the unique exit block has been inserted</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    <span class="comment">// and there is nothing to fix from vector loop; phis should have incoming</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <span class="comment">// from scalar loop only.</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;    Plan.<a class="code" href="classllvm_1_1VPlan.html#a44ff684e8c8fa502d0238de8907acfd3">clearLiveOuts</a>();</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    <span class="comment">// If we inserted an edge from the middle block to the unique exit block,</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;    <span class="comment">// update uses outside the loop (phis) to account for the newly inserted</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    <span class="comment">// edge.</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160; </div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <span class="comment">// Fix-up external users of the induction variables.</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Entry : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">getInductionVars</a>())</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a4a2f293d45c29130bf71bfa9680c5e40">fixupIVUsers</a>(Entry.first, Entry.second,</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                   <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">getOrCreateVectorTripCount</a>(VectorLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()),</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                   <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a1d2bb8dc96ed2e49d7588600b9182333">IVEndValues</a>[Entry.first], <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>,</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;                   VectorLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>(), Plan);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;  }</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160; </div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  <span class="comment">// Fix LCSSA phis not already fixed earlier. Extracts may need to be generated</span></div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <span class="comment">// in the exit block, so update the builder.</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#a36947e5b1b6b334794cd2cdaa2fcede1">ExitBB</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>());</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;KV : Plan.<a class="code" href="classllvm_1_1VPlan.html#ae856891b0523ef05ad5ede8d70dad25b">getLiveOuts</a>())</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    KV.second-&gt;fixPhi(Plan, State);</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160; </div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PI : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a47eab9fa7cfa73af0b164da3fca49a0f">PredicatedInstructions</a>)</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0a5c60e5cebd520f95b9813fd9807016">sinkScalarOperands</a>(&amp;*PI);</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160; </div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <span class="comment">// Remove redundant induction instructions.</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#acc13ee8b8985399901ac09b51822e21a">cse</a>(VectorLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>());</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160; </div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <span class="comment">// Set/update profile weights for the vector and remainder loops as original</span></div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <span class="comment">// loop iterations are now distributed among them. Note that original loop</span></div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  <span class="comment">// represented by LoopScalarBody becomes remainder loop after vectorization.</span></div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  <span class="comment">// For cases like foldTailByMasking() and requiresScalarEpiloque() we may</span></div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;  <span class="comment">// end up getting slightly roughened result but that should be OK since</span></div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  <span class="comment">// profile is not inherently precise anyway. Note also possible bypass of</span></div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;  <span class="comment">// vector code caused by legality checks is ignored, assigning all the weight</span></div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  <span class="comment">// to the vector loop, optimistically.</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  <span class="comment">// For scalable vectorization we can&#39;t know at compile time how many iterations</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;  <span class="comment">// of the loop are handled in one vector iteration, so instead assume a pessimistic</span></div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <span class="comment">// vscale of &#39;1&#39;.</span></div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;  <a class="code" href="namespacellvm.html#aaf345c258e6fd97a551e4d5b41607e32">setProfileInfoAfterUnrolling</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a07bd7f4b4c433f0197dbdcf68941e5fd">LoopScalarBody</a>), VectorLoop,</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;                               <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a07bd7f4b4c433f0197dbdcf68941e5fd">LoopScalarBody</a>),</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;                               <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>);</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;}</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a9092d12fba0d0d26f3eedf809d7348fe"> 3763</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9092d12fba0d0d26f3eedf809d7348fe">InnerLoopVectorizer::fixCrossIterationPHIs</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;  <span class="comment">// In order to support recurrences we need to be able to vectorize Phi nodes.</span></div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  <span class="comment">// Phi nodes have cycles, so we need to vectorize them in two stages. This is</span></div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  <span class="comment">// stage #2: We now need to fix the recurrences by adding incoming edges to</span></div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  <span class="comment">// the currently empty PHI nodes. At this point every instruction in the</span></div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  <span class="comment">// original loop is widened to a vector form so we can use them to construct</span></div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  <span class="comment">// the incoming edges.</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *Header =</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">Plan</a>-&gt;<a class="code" href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">getVectorLoopRegion</a>()-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">getEntryBasicBlock</a>();</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> &amp;R : Header-&gt;phis()) {</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ReductionPhi = dyn_cast&lt;VPReductionPHIRecipe&gt;(&amp;R))</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af35c2cd70263a0ef121763297ec04fde">fixReduction</a>(ReductionPhi, State);</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86ISD.html#a9441a4f94d36d0f7c0c34aca42e3f76aaabe3cfcecab0e3b2e2ab496a566c8d1c">FOR</a> = dyn_cast&lt;VPFirstOrderRecurrencePHIRecipe&gt;(&amp;R))</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ad8b1b881fbc9264bdb8c54d6f354dafa">fixFixedOrderRecurrence</a>(<a class="code" href="namespacellvm_1_1X86ISD.html#a9441a4f94d36d0f7c0c34aca42e3f76aaabe3cfcecab0e3b2e2ab496a566c8d1c">FOR</a>, State);</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  }</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;}</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160; </div>
<div class="line"><a name="l03780"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ad8b1b881fbc9264bdb8c54d6f354dafa"> 3780</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ad8b1b881fbc9264bdb8c54d6f354dafa">InnerLoopVectorizer::fixFixedOrderRecurrence</a>(</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <a class="code" href="structllvm_1_1VPFirstOrderRecurrencePHIRecipe.html">VPFirstOrderRecurrencePHIRecipe</a> *PhiR, <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;  <span class="comment">// This is the second phase of vectorizing first-order recurrences. An</span></div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  <span class="comment">// overview of the transformation is described below. Suppose we have the</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;  <span class="comment">// following loop.</span></div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  <span class="comment">//   for (int i = 0; i &lt; n; ++i)</span></div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  <span class="comment">//     b[i] = a[i] - a[i - 1];</span></div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="comment">// There is a first-order recurrence on &quot;a&quot;. For this loop, the shorthand</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <span class="comment">// scalar IR looks like:</span></div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <span class="comment">//   scalar.ph:</span></div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <span class="comment">//     s_init = a[-1]</span></div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <span class="comment">//     br scalar.body</span></div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <span class="comment">//   scalar.body:</span></div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <span class="comment">//     i = phi [0, scalar.ph], [i+1, scalar.body]</span></div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;  <span class="comment">//     s1 = phi [s_init, scalar.ph], [s2, scalar.body]</span></div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;  <span class="comment">//     s2 = a[i]</span></div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <span class="comment">//     b[i] = s2 - s1</span></div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  <span class="comment">//     br cond, scalar.body, ...</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;  <span class="comment">// In this example, s1 is a recurrence because it&#39;s value depends on the</span></div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="comment">// previous iteration. In the first phase of vectorization, we created a</span></div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <span class="comment">// vector phi v1 for s1. We now complete the vectorization and produce the</span></div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <span class="comment">// shorthand vector IR shown below (for VF = 4, UF = 1).</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  <span class="comment">//   vector.ph:</span></div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="comment">//     v_init = vector(..., ..., ..., a[-1])</span></div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="comment">//     br vector.body</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;  <span class="comment">//   vector.body</span></div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="comment">//     i = phi [0, vector.ph], [i+4, vector.body]</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  <span class="comment">//     v1 = phi [v_init, vector.ph], [v2, vector.body]</span></div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <span class="comment">//     v2 = a[i, i+1, i+2, i+3];</span></div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  <span class="comment">//     v3 = vector(v1(3), v2(0, 1, 2))</span></div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;  <span class="comment">//     b[i, i+1, i+2, i+3] = v2 - v3</span></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;  <span class="comment">//     br cond, vector.body, middle.block</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <span class="comment">//   middle.block:</span></div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <span class="comment">//     x = v2(3)</span></div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="comment">//     br scalar.ph</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="comment">//   scalar.ph:</span></div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <span class="comment">//     s_init = phi [x, middle.block], [a[-1], otherwise]</span></div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="comment">//     br scalar.body</span></div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <span class="comment">// After execution completes the vector loop, we extract the next value of</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <span class="comment">// the recurrence (x) to use as the initial value in the scalar loop.</span></div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160; </div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <span class="comment">// Extract the last vector element in the middle block. This will be the</span></div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  <span class="comment">// initial value for the recurrence when jumping to the scalar loop.</span></div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *PreviousDef = PhiR-&gt;<a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html#abd2e60d914344d3ae5b98d7965868320">getBackedgeValue</a>();</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Incoming = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(PreviousDef, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a> - 1);</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;  <span class="keyword">auto</span> *ExtractForScalar = Incoming;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  <span class="keyword">auto</span> *IdxTy = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>();</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>()) {</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    <span class="keyword">auto</span> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxTy, 1);</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <span class="keyword">auto</span> *RuntimeVF = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, IdxTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keyword">auto</span> *LastIdx = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(RuntimeVF, One);</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;    ExtractForScalar = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a5c728ddd7890c015533b42cdd7307b0c">CreateExtractElement</a>(ExtractForScalar, LastIdx,</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                                                    <span class="stringliteral">&quot;vector.recur.extract&quot;</span>);</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  }</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  <span class="comment">// Extract the second last element in the middle block if the</span></div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="comment">// Phi is used outside the loop. We need to extract the phi itself</span></div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;  <span class="comment">// and not the last element (the phi update in the current iteration). This</span></div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  <span class="comment">// will be the value when jumping to the exit block from the LoopMiddleBlock,</span></div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;  <span class="comment">// when the scalar loop is not run at all.</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ExtractForPhiUsedOutsideLoop = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>()) {</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    <span class="keyword">auto</span> *RuntimeVF = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, IdxTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    <span class="keyword">auto</span> *Idx = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(RuntimeVF, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxTy, 2));</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    ExtractForPhiUsedOutsideLoop = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a5c728ddd7890c015533b42cdd7307b0c">CreateExtractElement</a>(</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        Incoming, Idx, <span class="stringliteral">&quot;vector.recur.extract.for.phi&quot;</span>);</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a> &gt; 1)</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    <span class="comment">// When loop is unrolled without vectorizing, initialize</span></div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    <span class="comment">// ExtractForPhiUsedOutsideLoop with the value just prior to unrolled value</span></div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    <span class="comment">// of `Incoming`. This is analogous to the vectorized case above: extracting</span></div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;    <span class="comment">// the second last element when VF &gt; 1.</span></div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    ExtractForPhiUsedOutsideLoop = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(PreviousDef, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a> - 2);</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160; </div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;  <span class="comment">// Fix the initial value of the original recurrence in the scalar loop.</span></div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(&amp;*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = cast&lt;PHINode&gt;(PhiR-&gt;<a class="code" href="classllvm_1_1VPValue.html#adba3c433337db6652e3701f9527fd701">getUnderlyingValue</a>());</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  <span class="keyword">auto</span> *Start = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aaba03126d9b8603419e88d63773841b1">CreatePHI</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2, <span class="stringliteral">&quot;scalar.recur.init&quot;</span>);</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  <span class="keyword">auto</span> *ScalarInit = PhiR-&gt;<a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html#afd5f8bd3dc1475110c38a424e4c07d79">getStartValue</a>()-&gt;<a class="code" href="classllvm_1_1VPValue.html#a4b54e2a998e2d123bad3a7e41f071a64">getLiveInIRValue</a>();</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>)) {</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    <span class="keyword">auto</span> *Incoming = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a> ? ExtractForScalar : ScalarInit;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    Start-&gt;addIncoming(Incoming, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;  }</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160; </div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">setIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>, Start);</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;scalar.recur&quot;</span>);</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160; </div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  <span class="comment">// Finally, fix users of the recurrence outside the loop. The users will need</span></div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  <span class="comment">// either the last value of the scalar recurrence or the last value of the</span></div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;  <span class="comment">// vector recurrence we extracted in the middle block. Since the loop is in</span></div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  <span class="comment">// LCSSA form, we just need to find all the phi nodes for the original scalar</span></div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  <span class="comment">// recurrence in the exit block, and then add an edge for the middle block.</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="comment">// Note that LCSSA does not imply single entry when the original scalar loop</span></div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  <span class="comment">// had multiple exiting edges (as we always run the last iteration in the</span></div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  <span class="comment">// scalar epilogue); in that case, there is no edge from middle to exit and</span></div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  <span class="comment">// and thus no phis which needed updated.</span></div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;LCSSAPhi : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>())</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(LCSSAPhi.incoming_values(), Phi)) {</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;        LCSSAPhi.addIncoming(ExtractForPhiUsedOutsideLoop, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>);</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">Plan</a>-&gt;<a class="code" href="classllvm_1_1VPlan.html#a37397a91646330bb54d00429975ff770">removeLiveOut</a>(&amp;LCSSAPhi);</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;      }</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;}</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160; </div>
<div class="line"><a name="l03893"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#af35c2cd70263a0ef121763297ec04fde"> 3893</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af35c2cd70263a0ef121763297ec04fde">InnerLoopVectorizer::fixReduction</a>(<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html">VPReductionPHIRecipe</a> *PhiR,</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;                                       <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OrigPhi = cast&lt;PHINode&gt;(PhiR-&gt;<a class="code" href="classllvm_1_1VPValue.html#adba3c433337db6652e3701f9527fd701">getUnderlyingValue</a>());</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <span class="comment">// Get it&#39;s reduction variable descriptor.</span></div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5c26e54d871c42c42dc62f9d449c633a">isReductionVariable</a>(OrigPhi) &amp;&amp;</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;         <span class="stringliteral">&quot;Unable to find the reduction variable&quot;</span>);</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc = PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a528c64e7841d3cacddf5335f74307a3d">getRecurrenceDescriptor</a>();</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160; </div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830e">RecurKind</a> RK = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">getRecurrenceKind</a>();</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;  <a class="code" href="classllvm_1_1TrackingVH.html">TrackingVH&lt;Value&gt;</a> ReductionStartValue = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a511eda16f9dbdbf7293ea2ba018ffeb7">getRecurrenceStartValue</a>();</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LoopExitInst = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a53aeb820a8f9180fbf7894a987025f35">getLoopExitInstr</a>();</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(ReductionStartValue);</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160; </div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *LoopExitInstDef = PhiR-&gt;<a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html#abd2e60d914344d3ae5b98d7965868320">getBackedgeValue</a>();</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <span class="comment">// This is the vector-clone of the value that leaves the loop.</span></div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VecTy = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(LoopExitInstDef, 0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160; </div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;  <span class="comment">// Wrap flags are in general invalid after vectorization, clear them.</span></div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac4804fc99b4e6fcfe166821970d0dd1c">clearReductionWrapFlags</a>(PhiR, State);</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160; </div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;  <span class="comment">// Before each round, move the insertion point right between</span></div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="comment">// the PHIs and the values we are going to write.</span></div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;  <span class="comment">// This allows us to write both PHINodes and the extractelement</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(&amp;*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160; </div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(LoopExitInst);</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160; </div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *PhiTy = OrigPhi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160; </div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *LatchVPBB =</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;      PhiR-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aa8d857a111e16bb3ab8ca90be69559ca">getParent</a>()-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a7ce23b4d08f0bd28ea1f676d527ae1d3">getEnclosingLoopRegion</a>()-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a33d7fc49dbb786dce0e0c5762f067935">getExitingBasicBlock</a>();</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *VectorLoopLatch = State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#a0741c1fb9535c8e4dcd98d3f1f41474d">VPBB2IRBB</a>[LatchVPBB];</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;  <span class="comment">// If tail is folded by masking, the vector value to leave the loop should be</span></div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;  <span class="comment">// a Select choosing between the vectorized LoopExitInst and vectorized Phi,</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <span class="comment">// instead of the former. For an inloop reduction the reduction will already</span></div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;  <span class="comment">// be predicated, and does not need to be handled here.</span></div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba">foldTailByMasking</a>() &amp;&amp; !PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a9e146bc33d1c57399c7b777576f7768e">isInLoop</a>()) {</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *VecLoopExitInst = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(LoopExitInstDef, Part);</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;      <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *Sel = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : VecLoopExitInst-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;        <span class="keywordflow">if</span> (isa&lt;SelectInst&gt;(U)) {</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Sel &amp;&amp; <span class="stringliteral">&quot;Reduction exit feeding two selects&quot;</span>);</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;          Sel = cast&lt;SelectInst&gt;(U);</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;PHINode&gt;(U) &amp;&amp; <span class="stringliteral">&quot;Reduction exit must feed Phi&#39;s or select&quot;</span>);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      }</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sel &amp;&amp; <span class="stringliteral">&quot;Reduction exit feeds no select&quot;</span>);</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a47d824e6296e81c04858e04a72dde4eb">reset</a>(LoopExitInstDef, Sel, Part);</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160; </div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(Sel))</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;        Sel-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">getFastMathFlags</a>());</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160; </div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <span class="comment">// If the target can create a predicated operator for the reduction at no</span></div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <span class="comment">// extra cost in the loop (for example a predicated vadd), it can be</span></div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;      <span class="comment">// cheaper for the select to remain in the loop than be sunk out of it,</span></div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <span class="comment">// and so use the select value for the phi instead of the old</span></div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      <span class="comment">// LoopExitValue.</span></div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a159b9f91d009fa5484c1cbad8f102c17">PreferPredicatedReductionSelect</a> ||</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a8e8f7af4c35e8c6bc6e9a4f0850a7847">preferPredicatedReductionSelect</a>(</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;              RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>(), PhiTy,</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;              <a class="code" href="structllvm_1_1TargetTransformInfo_1_1ReductionFlags.html">TargetTransformInfo::ReductionFlags</a>())) {</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;        <span class="keyword">auto</span> *VecRdxPhi =</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;            cast&lt;PHINode&gt;(State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(PhiR, Part));</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;        VecRdxPhi-&gt;setIncomingValueForBlock(VectorLoopLatch, Sel);</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      }</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    }</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;  }</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160; </div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;  <span class="comment">// If the vector reduction can be performed in a smaller type, we truncate</span></div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;  <span class="comment">// then extend the loop exit value to enable InstCombine to evaluate the</span></div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;  <span class="comment">// entire expression in the smaller type.</span></div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; PhiTy != RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>()) {</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a9e146bc33d1c57399c7b777576f7768e">isInLoop</a>() &amp;&amp; <span class="stringliteral">&quot;Unexpected truncated inloop reduction!&quot;</span>);</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *RdxVecTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(VectorLoopLatch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">VectorParts</a> RdxParts(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>);</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;      RdxParts[Part] = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(LoopExitInstDef, Part);</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Trunc = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a08230b6650e11747ef33144f1e463064">CreateTrunc</a>(RdxParts[Part], RdxVecTy);</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Extnd = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a855906f5a6f429db8978680fd6de7886">isSigned</a>() ? <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a44103b3442af11ecfd4b86fe6f4b3caf">CreateSExt</a>(Trunc, VecTy)</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                                        : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a9e3a8d42fb905a26e3d71447d754d26e">CreateZExt</a>(Trunc, VecTy);</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(RdxParts[Part]-&gt;<a class="code" href="IVUsers_8cpp.html#ac2f338c3f467b3d09613e190d73044a5">users</a>()))</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;        <span class="keywordflow">if</span> (U != Trunc) {</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;          U-&gt;replaceUsesOfWith(RdxParts[Part], Extnd);</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;          RdxParts[Part] = Extnd;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;        }</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;    }</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(&amp;*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      RdxParts[Part] = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a08230b6650e11747ef33144f1e463064">CreateTrunc</a>(RdxParts[Part], RdxVecTy);</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a47d824e6296e81c04858e04a72dde4eb">reset</a>(LoopExitInstDef, RdxParts[Part], Part);</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    }</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;  }</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160; </div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;  <span class="comment">// Reduce all of the unrolled parts into a single vector.</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ReducedPartRdx = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(LoopExitInstDef, 0);</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a32c8ad694911bf6dcf6cb07824f2823e">RecurrenceDescriptor::getOpcode</a>(RK);</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160; </div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  <span class="comment">// The middle block terminator has already been assigned a DebugLoc here (the</span></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;  <span class="comment">// OrigLoop&#39;s single latch terminator). We want the whole middle block to</span></div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <span class="comment">// appear to execute on this line because: (a) it is all compiler generated,</span></div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <span class="comment">// (b) these instructions are always executed after evaluating the latch</span></div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;  <span class="comment">// conditional branch, and (c) other passes may add new predecessors which</span></div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="comment">// terminate on this line. This is the easiest way to ensure we don&#39;t</span></div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="comment">// accidentally cause an extra step back into the loop while debugging.</span></div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <span class="keywordflow">if</span> (PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a112e27c97277737aa1f032745de25bcd">isOrdered</a>())</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    ReducedPartRdx = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(LoopExitInstDef, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a> - 1);</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;    <span class="comment">// Floating-point operations should have some FMF to enable the reduction.</span></div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    <a class="code" href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">IRBuilderBase::FastMathFlagGuard</a> FMFG(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6370e29617c71c8081bbbc68d6058403">setFastMathFlags</a>(RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">getFastMathFlags</a>());</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 1; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *RdxPart = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(LoopExitInstDef, Part);</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != Instruction::ICmp &amp;&amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != Instruction::FCmp) {</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;        ReducedPartRdx = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            (<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a>)<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, RdxPart, ReducedPartRdx, <span class="stringliteral">&quot;bin.rdx&quot;</span>);</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af1e93b22913d4a49d00f4cee43c004b8">RecurrenceDescriptor::isSelectCmpRecurrenceKind</a>(RK))</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;        ReducedPartRdx = <a class="code" href="namespacellvm.html#a1ebb96529a39f9a193c81b8ea7cfb632">createSelectCmpOp</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, ReductionStartValue, RK,</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                                           ReducedPartRdx, RdxPart);</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;        ReducedPartRdx = <a class="code" href="namespacellvm.html#a52fcded779c8029fdafaa9897cd3b238">createMinMaxOp</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, RK, ReducedPartRdx, RdxPart);</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;    }</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;  }</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160; </div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  <span class="comment">// Create the reduction after the loop. Note that inloop reductions create the</span></div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;  <span class="comment">// target reduction in the loop using a Reduction recipe.</span></div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; !PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a9e146bc33d1c57399c7b777576f7768e">isInLoop</a>()) {</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    ReducedPartRdx =</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;        <a class="code" href="namespacellvm.html#a279281e12df9e915a6a38867097f3eb8">createTargetReduction</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, RdxDesc, ReducedPartRdx, OrigPhi);</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <span class="comment">// If the reduction can be performed in a smaller type, we need to extend</span></div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;    <span class="comment">// the reduction to the wider type before we branch to the original loop.</span></div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;    <span class="keywordflow">if</span> (PhiTy != RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>())</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;      ReducedPartRdx = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a855906f5a6f429db8978680fd6de7886">isSigned</a>()</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                           ? <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a44103b3442af11ecfd4b86fe6f4b3caf">CreateSExt</a>(ReducedPartRdx, PhiTy)</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                           : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a9e3a8d42fb905a26e3d71447d754d26e">CreateZExt</a>(ReducedPartRdx, PhiTy);</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;  }</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160; </div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *ResumePhi =</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;      dyn_cast&lt;PHINode&gt;(PhiR-&gt;<a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html#afd5f8bd3dc1475110c38a424e4c07d79">getStartValue</a>()-&gt;<a class="code" href="classllvm_1_1VPValue.html#adba3c433337db6652e3701f9527fd701">getUnderlyingValue</a>());</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160; </div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;  <span class="comment">// Create a phi node that merges control-flow from the backedge-taken check</span></div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;  <span class="comment">// block and the middle block.</span></div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *BCBlockPhi = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(PhiTy, 2, <span class="stringliteral">&quot;bc.merge.rdx&quot;</span>,</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;                                        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160; </div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;  <span class="comment">// If we are fixing reductions in the epilogue loop then we should already</span></div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;  <span class="comment">// have created a bc.merge.rdx Phi after the main vector body. Ensure that</span></div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;  <span class="comment">// we carry over the incoming values correctly.</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Incoming : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>)) {</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;    <span class="keywordflow">if</span> (Incoming == <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>)</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      BCBlockPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ReducedPartRdx, Incoming);</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ResumePhi &amp;&amp; <a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(ResumePhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88c1c3dd33d232dc889a5d29c75b75f3">blocks</a>(), Incoming))</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      BCBlockPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ResumePhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(Incoming),</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;                              Incoming);</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;      BCBlockPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ReductionStartValue, Incoming);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  }</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160; </div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  <span class="comment">// Set the resume value for this reduction</span></div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a3331ef52e6ae007bfc63ddb9fa44318d">ReductionResumeValues</a>.insert({&amp;RdxDesc, BCBlockPhi});</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160; </div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;  <span class="comment">// If there were stores of the reduction value to a uniform memory address</span></div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;  <span class="comment">// inside the loop, create the final store here.</span></div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a9e4044de402972428a2101b8afcaa1b7">IntermediateStore</a>) {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NewSI =</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7d1a18dc150da601587ccc716e0e4b41">CreateStore</a>(ReducedPartRdx, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <a class="code" href="namespacellvm.html#a48a6deb3e714d54e75caadcf84b0ca76">propagateMetadata</a>(NewSI, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160; </div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <span class="comment">// If the reduction value is used in other places,</span></div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="comment">// then let the code below create PHI&#39;s for that.</span></div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;  }</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160; </div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <span class="comment">// Now, we need to fix the users of the reduction variable</span></div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;  <span class="comment">// inside and outside of the scalar remainder loop.</span></div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <span class="comment">// We know that the loop is in LCSSA form. We need to update the PHI nodes</span></div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;  <span class="comment">// in the exit blocks.  See comment on analogous loop in</span></div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;  <span class="comment">// fixFixedOrderRecurrence for a more complete explaination of the logic.</span></div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;LCSSAPhi : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>())</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(LCSSAPhi.incoming_values(), LoopExitInst)) {</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;        LCSSAPhi.addIncoming(ReducedPartRdx, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">LoopMiddleBlock</a>);</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">Plan</a>-&gt;<a class="code" href="classllvm_1_1VPlan.html#a37397a91646330bb54d00429975ff770">removeLiveOut</a>(&amp;LCSSAPhi);</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;      }</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160; </div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;  <span class="comment">// Fix the scalar loop reduction variable with the incoming reduction sum</span></div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;  <span class="comment">// from the vector body and from the backedge value.</span></div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  <span class="keywordtype">int</span> IncomingEdgeBlockIdx =</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;      OrigPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">getBasicBlockIndex</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IncomingEdgeBlockIdx &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Invalid block index&quot;</span>);</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <span class="comment">// Pick the other block.</span></div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  <span class="keywordtype">int</span> SelfEdgeBlockIdx = (IncomingEdgeBlockIdx ? 0 : 1);</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  OrigPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(SelfEdgeBlockIdx, BCBlockPhi);</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;  OrigPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(IncomingEdgeBlockIdx, LoopExitInst);</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;}</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160; </div>
<div class="line"><a name="l04092"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#ac4804fc99b4e6fcfe166821970d0dd1c"> 4092</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac4804fc99b4e6fcfe166821970d0dd1c">InnerLoopVectorizer::clearReductionWrapFlags</a>(<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html">VPReductionPHIRecipe</a> *PhiR,</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;                                                  <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc = PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a528c64e7841d3cacddf5335f74307a3d">getRecurrenceDescriptor</a>();</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;  <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830e">RecurKind</a> RK = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">getRecurrenceKind</a>();</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;  <span class="keywordflow">if</span> (RK != <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">RecurKind::Add</a> &amp;&amp; RK != <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">RecurKind::Mul</a>)</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160; </div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPValue *, 8&gt;</a> Worklist;</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;VPValue *, 8&gt;</a> Visited;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;  Worklist.push_back(PhiR);</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;  Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PhiR);</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160; </div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Cur = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>; ++Part) {</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(Cur, Part);</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;OverflowingBinaryOperator&gt;(V))</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;      cast&lt;Instruction&gt;(V)-&gt;dropPoisonGeneratingFlags();</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      }</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160; </div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPUser.html">VPUser</a> *U : Cur-&gt;<a class="code" href="classllvm_1_1VPValue.html#af0932bb43954178036c87ea2ee5f112c">users</a>()) {</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;        <span class="keyword">auto</span> *UserRecipe = dyn_cast&lt;VPRecipeBase&gt;(U);</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;        <span class="keywordflow">if</span> (!UserRecipe)</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *V : UserRecipe-&gt;definedValues())</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;          <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(V).second)</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;            Worklist.push_back(V);</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;      }</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;  }</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;}</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160; </div>
<div class="line"><a name="l04124"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a0a5c60e5cebd520f95b9813fd9807016"> 4124</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0a5c60e5cebd520f95b9813fd9807016">InnerLoopVectorizer::sinkScalarOperands</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PredInst) {</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="comment">// The basic block and loop containing the predicated instruction.</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;  <span class="keyword">auto</span> *PredBB = PredInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;  <span class="keyword">auto</span> *VectorLoop = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(PredBB);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160; </div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  <span class="comment">// Initialize a worklist with the operands of the predicated instruction.</span></div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> Worklist(PredInst-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), PredInst-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>());</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160; </div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;  <span class="comment">// Holds instructions that we need to analyze again. An instruction may be</span></div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  <span class="comment">// reanalyzed if we don&#39;t yet know if we can sink it or not.</span></div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> InstsToReanalyze;</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160; </div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;  <span class="comment">// Returns true if a given use occurs in the predicated block. Phi nodes use</span></div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;  <span class="comment">// their operands in their corresponding predecessor blocks.</span></div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;  <span class="keyword">auto</span> isBlockOfUsePredicated = [&amp;](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Phi = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Phi-&gt;getIncomingBlock(</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;          <a class="code" href="classllvm_1_1PHINode.html#aca414c43a6d42c13998208463637a20d">PHINode::getIncomingValueNumForOperand</a>(U.getOperandNo()));</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == PredBB;</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;  };</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160; </div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;  <span class="comment">// Iteratively sink the scalarized operands of the predicated instruction</span></div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;  <span class="comment">// into the block we created for it. When an instruction is sunk, it&#39;s</span></div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;  <span class="comment">// operands are then added to the worklist. The algorithm ends after one pass</span></div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;  <span class="comment">// through the worklist doesn&#39;t sink a single instruction.</span></div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;  <span class="keywordtype">bool</span> Changed;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    <span class="comment">// Add the instructions that need to be reanalyzed to the worklist, and</span></div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;    <span class="comment">// reset the changed indicator.</span></div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(InstsToReanalyze.begin(), InstsToReanalyze.end());</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;    InstsToReanalyze.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160; </div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>()) {</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(Worklist.<a class="code" href="classllvm_1_1SetVector.html#a3499f6a24500afba2c318295ad2d2d05">pop_back_val</a>());</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160; </div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      <span class="comment">// We can&#39;t sink an instruction if it is a phi node, is not in the loop,</span></div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;      <span class="comment">// or may have side effects.</span></div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || !VectorLoop-&gt;contains(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayHaveSideEffects())</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160; </div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;      <span class="comment">// If the instruction is already in PredBB, check if we can sink its</span></div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;      <span class="comment">// operands. In that case, VPlan&#39;s sinkScalarOperands() succeeded in</span></div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;      <span class="comment">// sinking the scalar instruction I, hence it appears in PredBB; but it</span></div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="comment">// may have failed to sink I&#39;s operands (recursively), which we try</span></div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;      <span class="comment">// (again) here.</span></div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() == PredBB) {</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;op_begin(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;op_end());</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;      }</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160; </div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;      <span class="comment">// It&#39;s legal to sink the instruction if all its uses occur in the</span></div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;      <span class="comment">// predicated block. Otherwise, there&#39;s nothing to do yet, and we may</span></div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;      <span class="comment">// need to reanalyze the instruction.</span></div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;uses(), isBlockOfUsePredicated)) {</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;        InstsToReanalyze.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;      }</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160; </div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;      <span class="comment">// Move the instruction to the beginning of the predicated block, and add</span></div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;      <span class="comment">// it&#39;s operands to the worklist.</span></div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;moveBefore(&amp;*PredBB-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;op_begin(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;op_end());</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160; </div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      <span class="comment">// The sinking may have enabled other instructions to be sunk, so we will</span></div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      <span class="comment">// need to iterate.</span></div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    }</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;  } <span class="keywordflow">while</span> (Changed);</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;}</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160; </div>
<div class="line"><a name="l04198"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a8d204031ffe1bcc568fb040aebe5f278"> 4198</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a8d204031ffe1bcc568fb040aebe5f278">InnerLoopVectorizer::fixNonInductionPHIs</a>(<a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan,</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;                                              <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <span class="keyword">auto</span> Iter = <a class="code" href="namespacellvm.html#a4c2438a07fc002678d8d1736e72b2e6b">vp_depth_first_deep</a>(Plan.<a class="code" href="classllvm_1_1VPlan.html#a386bbf298b1f43a45977b7414925f8a3">getEntry</a>());</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB : VPBlockUtils::blocksOnly&lt;VPBasicBlock&gt;(Iter)) {</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : VPBB-&gt;phis()) {</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;      <a class="code" href="classllvm_1_1VPWidenPHIRecipe.html">VPWidenPHIRecipe</a> *VPPhi = dyn_cast&lt;VPWidenPHIRecipe&gt;(&amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;      <span class="keywordflow">if</span> (!VPPhi)</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPhi = cast&lt;PHINode&gt;(State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(VPPhi, 0));</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;      <span class="comment">// Make sure the builder has a valid insert point.</span></div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(NewPhi);</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; VPPhi-&gt;<a class="code" href="classllvm_1_1VPUser.html#a5b21038d9b822b20c59e7ce5b12582e1">getNumOperands</a>(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;        <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Inc = VPPhi-&gt;<a class="code" href="classllvm_1_1VPWidenPHIRecipe.html#ac0bc6d235995fe63bd8050b6cf5db25b">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;        <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB = VPPhi-&gt;<a class="code" href="classllvm_1_1VPWidenPHIRecipe.html#a0fbc95bf03fafffa21d08f0d3049130e">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;        NewPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(Inc, 0), State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#a0741c1fb9535c8e4dcd98d3f1f41474d">VPBB2IRBB</a>[VPBB]);</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;      }</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;    }</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;  }</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;}</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160; </div>
<div class="line"><a name="l04218"></a><span class="lineno"><a class="line" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9"> 4218</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">InnerLoopVectorizer::useOrderedReductions</a>(</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc) {</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ad508b8cfa31c0e7a1ac8f9d733bb8eed">useOrderedReductions</a>(RdxDesc);</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;}</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160; </div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;<span class="keywordtype">void</span> LoopVectorizationCostModel::collectLoopScalars(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  <span class="comment">// We should not collect Scalars more than once per VF. Right now, this</span></div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;  <span class="comment">// function is called from collectUniformsAndScalars(), which already does</span></div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  <span class="comment">// this check. Collecting Scalars for VF=1 does not make any sense.</span></div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; Scalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) == Scalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() &amp;&amp;</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;         <span class="stringliteral">&quot;This function should not be visited twice for the same VF&quot;</span>);</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160; </div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;  <span class="comment">// This avoids any chances of creating a REPLICATE recipe during planning</span></div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;  <span class="comment">// since that would result in generation of scalarized code during execution,</span></div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;  <span class="comment">// which is not supported for scalable vectors.</span></div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;    Scalars[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(Uniforms[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>(), Uniforms[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>());</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;  }</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160; </div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Instruction *, 8&gt;</a> Worklist;</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160; </div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;  <span class="comment">// These sets are used to seed the analysis with pointers used by memory</span></div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;  <span class="comment">// accesses that will remain scalar.</span></div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Instruction *, 8&gt;</a> ScalarPtrs;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a> PossibleNonScalarPtrs;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  <span class="keyword">auto</span> *Latch = TheLoop-&gt;getLoopLatch();</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160; </div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <span class="comment">// A helper that returns true if the use of Ptr by MemAccess will be scalar.</span></div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;  <span class="comment">// The pointer operands of loads and stores will be scalar as long as the</span></div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;  <span class="comment">// memory access is not a gather or scatter operation. The value operand of a</span></div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;  <span class="comment">// store will remain scalar if the store is scalarized.</span></div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  <span class="keyword">auto</span> isScalarUse = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemAccess, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) {</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    InstWidening WideningDecision = getWideningDecision(MemAccess, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WideningDecision != CM_Unknown &amp;&amp;</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;           <span class="stringliteral">&quot;Widening decision should be ready at this moment&quot;</span>);</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(MemAccess))</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> == <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getValueOperand())</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;        <span class="keywordflow">return</span> WideningDecision == CM_Scalarize;</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> == <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(MemAccess) &amp;&amp;</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;           <span class="stringliteral">&quot;Ptr is neither a value or pointer operand&quot;</span>);</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;    <span class="keywordflow">return</span> WideningDecision != CM_GatherScatter;</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  };</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160; </div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;  <span class="comment">// A helper that returns true if the given value is a bitcast or</span></div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="comment">// getelementptr instruction contained in the loop.</span></div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;  <span class="keyword">auto</span> isLoopVaryingBitCastOrGEP = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;    <span class="keywordflow">return</span> ((isa&lt;BitCastInst&gt;(V) &amp;&amp; V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) ||</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;            isa&lt;GetElementPtrInst&gt;(V)) &amp;&amp;</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;           !TheLoop-&gt;isLoopInvariant(V);</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;  };</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160; </div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;  <span class="comment">// A helper that evaluates a memory access&#39;s use of a pointer. If the use will</span></div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;  <span class="comment">// be a scalar use and the pointer is only used by memory accesses, we place</span></div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;  <span class="comment">// the pointer in ScalarPtrs. Otherwise, the pointer is placed in</span></div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;  <span class="comment">// PossibleNonScalarPtrs.</span></div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;  <span class="keyword">auto</span> evaluatePtrUse = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemAccess, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) {</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;    <span class="comment">// We only care about bitcast and getelementptr instructions contained in</span></div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;    <span class="comment">// the loop.</span></div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;    <span class="keywordflow">if</span> (!isLoopVaryingBitCastOrGEP(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160; </div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;    <span class="comment">// If the pointer has already been identified as scalar (e.g., if it was</span></div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;    <span class="comment">// also identified as uniform), there&#39;s nothing to do.</span></div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;    <span class="keywordflow">if</span> (Worklist.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160; </div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <span class="comment">// If the use of the pointer will be a scalar use, and all users of the</span></div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;    <span class="comment">// pointer are memory accesses, place the pointer in ScalarPtrs. Otherwise,</span></div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;    <span class="comment">// place the pointer in PossibleNonScalarPtrs.</span></div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <span class="keywordflow">if</span> (isScalarUse(MemAccess, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &amp;&amp; <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;          return isa&lt;LoadInst&gt;(U) || isa&lt;StoreInst&gt;(U);</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;        }))</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;      ScalarPtrs.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      PossibleNonScalarPtrs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  };</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160; </div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;  <span class="comment">// We seed the scalars analysis with three classes of instructions: (1)</span></div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;  <span class="comment">// instructions marked uniform-after-vectorization and (2) bitcast,</span></div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;  <span class="comment">// getelementptr and (pointer) phi instructions used by memory accesses</span></div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;  <span class="comment">// requiring a scalar use.</span></div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;  <span class="comment">// (1) Add to the worklist all instructions that have been identified as</span></div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;  <span class="comment">// uniform-after-vectorization.</span></div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Uniforms[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>(), Uniforms[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>());</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160; </div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;  <span class="comment">// (2) Add to the worklist all bitcast and getelementptr instructions used by</span></div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;  <span class="comment">// memory accesses requiring a scalar use. The pointer operands of loads and</span></div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;  <span class="comment">// stores will be scalar as long as the memory accesses is not a gather or</span></div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;  <span class="comment">// scatter operation. The value operand of a store will remain scalar if the</span></div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;  <span class="comment">// store is scalarized.</span></div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks())</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = dyn_cast&lt;LoadInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;        evaluatePtrUse(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;        evaluatePtrUse(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;        evaluatePtrUse(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getValueOperand());</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;      }</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;    }</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ScalarPtrs)</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;    <span class="keywordflow">if</span> (!PossibleNonScalarPtrs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found scalar instruction: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    }</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160; </div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;  <span class="comment">// Insert the forced scalars.</span></div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;  <span class="comment">// FIXME: Currently VPWidenPHIRecipe() often creates a dead vector</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;  <span class="comment">// induction variable when the PHI user is scalarized.</span></div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;  <span class="keyword">auto</span> ForcedScalar = ForcedScalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;  <span class="keywordflow">if</span> (ForcedScalar != ForcedScalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ForcedScalar-&gt;second) {</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found (forced) scalar instruction: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    }</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160; </div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;  <span class="comment">// Expand the worklist by looking through any bitcasts and getelementptr</span></div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;  <span class="comment">// instructions we&#39;ve already identified as scalar. This is similar to the</span></div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;  <span class="comment">// expansion step in collectLoopUniforms(); however, here we&#39;re only</span></div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;  <span class="comment">// expanding to include additional bitcasts and getelementptr instructions.</span></div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;  <span class="keywordflow">while</span> (Idx != Worklist.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>()) {</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Dst = Worklist[Idx++];</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <span class="keywordflow">if</span> (!isLoopVaryingBitCastOrGEP(Dst-&gt;getOperand(0)))</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    <span class="keyword">auto</span> *Src = cast&lt;Instruction&gt;(Dst-&gt;getOperand(0));</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(Src-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;          auto *J = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;          return !TheLoop-&gt;contains(J) || Worklist.count(J) ||</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;                 ((isa&lt;LoadInst&gt;(J) || isa&lt;StoreInst&gt;(J)) &amp;&amp;</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;                  isScalarUse(J, Src));</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;        })) {</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Src);</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found scalar instruction: &quot;</span> &lt;&lt; *Src &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    }</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;  }</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160; </div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;  <span class="comment">// An induction variable will remain scalar if all users of the induction</span></div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;  <span class="comment">// variable and induction variable update remain scalar.</span></div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Induction : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">getInductionVars</a>()) {</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;    <span class="keyword">auto</span> *Ind = Induction.first;</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    <span class="keyword">auto</span> *IndUpdate = cast&lt;Instruction&gt;(Ind-&gt;getIncomingValueForBlock(Latch));</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160; </div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;    <span class="comment">// If tail-folding is applied, the primary induction variable will be used</span></div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;    <span class="comment">// to feed a vector compare.</span></div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;    <span class="keywordflow">if</span> (Ind == <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4f213123efd9b8524e1a413c15ed43bf">getPrimaryInduction</a>() &amp;&amp; foldTailByMasking())</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160; </div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;    <span class="comment">// Returns true if \p Indvar is a pointer induction that is used directly by</span></div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;    <span class="comment">// load/store instruction \p I.</span></div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;    <span class="keyword">auto</span> IsDirectLoadStoreFromPtrIndvar = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Indvar,</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;                                              <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="keywordflow">return</span> Induction.second.getKind() ==</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;                 <a class="code" href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccab61689ca7d0a024fc4ff52a74d691ae2">InductionDescriptor::IK_PtrInduction</a> &amp;&amp;</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;             (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;             Indvar == <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; isScalarUse(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Indvar);</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;    };</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160; </div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;    <span class="comment">// Determine if all users of the induction variable are scalar after</span></div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;    <span class="comment">// vectorization.</span></div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    <span class="keyword">auto</span> ScalarInd = <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(Ind-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      auto *I = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      return I == IndUpdate || !TheLoop-&gt;contains(I) || Worklist.count(I) ||</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;             IsDirectLoadStoreFromPtrIndvar(Ind, I);</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;    });</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <span class="keywordflow">if</span> (!ScalarInd)</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160; </div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;    <span class="comment">// Determine if all users of the induction variable update instruction are</span></div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;    <span class="comment">// scalar after vectorization.</span></div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;    <span class="keyword">auto</span> ScalarIndUpdate =</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;        <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(IndUpdate-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;          auto *I = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;          return I == Ind || !TheLoop-&gt;contains(I) || Worklist.count(I) ||</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;                 IsDirectLoadStoreFromPtrIndvar(IndUpdate, I);</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;        });</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <span class="keywordflow">if</span> (!ScalarIndUpdate)</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160; </div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;    <span class="comment">// The induction variable and its update instruction will remain scalar.</span></div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;    Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Ind);</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;    Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(IndUpdate);</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found scalar instruction: &quot;</span> &lt;&lt; *Ind &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found scalar instruction: &quot;</span> &lt;&lt; *IndUpdate</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;  }</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160; </div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;  Scalars[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(Worklist.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>(), Worklist.<a class="code" href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">end</a>());</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;}</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160; </div>
<div class="line"><a name="l04410"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ac864682b9dcdc0ce83df845bf6cfb2e8"> 4410</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ac864682b9dcdc0ce83df845bf6cfb2e8">LoopVectorizationCostModel::isScalarWithPredication</a>(</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;  <span class="keywordflow">if</span> (!isPredicatedInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160; </div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;  <span class="comment">// Do we have a non-scalar lowering for this predicated</span></div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;  <span class="comment">// instruction? No - it is scalar with predication.</span></div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Instruction::Store</a>: {</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;    <span class="keyword">auto</span> *Ty = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy = Ty;</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>())</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;      VTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Ty, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;    <span class="keywordflow">return</span> isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ? !(isLegalMaskedLoad(Ty, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Alignment) ||</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;                                <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a33ac7704be5bd5455f78caf0b5371012">isLegalMaskedGather</a>(VTy, Alignment))</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;                            : !(isLegalMaskedStore(Ty, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Alignment) ||</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;                                <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a0a973aabc3b5429e5e05beee35892de0">isLegalMaskedScatter</a>(VTy, Alignment));</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;  }</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;  <span class="keywordflow">case</span> Instruction::URem: {</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;    <span class="comment">// We have the option to use the safe-divisor idiom to avoid predication.</span></div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    <span class="comment">// The cost based decision here will always select safe-divisor for</span></div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    <span class="comment">// scalable vectors as scalarization isn&#39;t legal.</span></div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> [ScalarCost, SafeDivisorCost] = getDivRemSpeculationCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    <span class="keywordflow">return</span> isDivRemScalarWithPredication(ScalarCost, SafeDivisorCost);</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  }</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;  }</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;}</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160; </div>
<div class="line"><a name="l04446"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a0a96f040b7fc3eae004aa6dc2af8f522"> 4446</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a0a96f040b7fc3eae004aa6dc2af8f522">LoopVectorizationCostModel::isPredicatedInst</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;  <span class="keywordflow">if</span> (!blockNeedsPredicationForAnyReason(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()))</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160; </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;  <span class="comment">// Can we prove this instruction is safe to unconditionally execute?</span></div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;  <span class="comment">// If not, we must use some form of predication.</span></div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Instruction::Store</a>: {</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;    <span class="comment">// When we know the load&#39;s address is loop invariant and the instruction</span></div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <span class="comment">// in the original scalar loop was unconditionally executed then we</span></div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;    <span class="comment">// don&#39;t need to mark it as a predicated instruction. Tail folding may</span></div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;    <span class="comment">// introduce additional predication, but we&#39;re guaranteed to always have</span></div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    <span class="comment">// at least one active lane.  We call Legal-&gt;blockNeedsPredication here</span></div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;    <span class="comment">// because it doesn&#39;t query tail-folding.  For stores, we need to prove</span></div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="comment">// both speculation safety (which follows from the same argument as loads),</span></div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    <span class="comment">// but also must prove the value being stored is correct.  The easiest</span></div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;    <span class="comment">// form of the later is to require that all values stored are the same.</span></div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af593134e27871d44a016de05492a4f41">isUniformMemOp</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;      (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;       (isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;        TheLoop-&gt;isLoopInvariant(cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getValueOperand()))) &amp;&amp;</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;        !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3b78b24a3c241e611957b82cd12640da">blockNeedsPredication</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()))</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;  }</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;  <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;    <span class="comment">// TODO: We can use the loop-preheader as context point here and get</span></div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;    <span class="comment">// context sensitive reasoning</span></div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;  }</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;}</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160; </div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;std::pair&lt;InstructionCost, InstructionCost&gt;</div>
<div class="line"><a name="l04487"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ad8398a35cd187d6a75b460fcf54b5236"> 4487</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ad8398a35cd187d6a75b460fcf54b5236">LoopVectorizationCostModel::getDivRemSpeculationCost</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;                                                    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::UDiv ||</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::SDiv ||</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::SRem ||</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::URem);</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160; </div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160; </div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;  <span class="comment">// Scalarization isn&#39;t legal for scalable vector types</span></div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarizationCost = <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;    <span class="comment">// Get the scalarization cost and scale this amount by the probability of</span></div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    <span class="comment">// executing the predicated block. If the instruction is not predicated,</span></div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    <span class="comment">// we fall through to the next case.</span></div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;    ScalarizationCost = 0;</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160; </div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <span class="comment">// These instructions have a non-void type, so account for the phi nodes</span></div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;    <span class="comment">// that we will create. This cost is likely to be zero. The phi node</span></div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    <span class="comment">// cost, if any, should be scaled by the block probability because it</span></div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;    <span class="comment">// models a copy at the end of each predicated block.</span></div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    ScalarizationCost += <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() *</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160; </div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;    <span class="comment">// The cost of the non-predicated instruction.</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    ScalarizationCost += <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() *</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160; </div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    <span class="comment">// The cost of insertelement and extractelement instructions needed for</span></div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;    <span class="comment">// scalarization.</span></div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    ScalarizationCost += getScalarizationOverhead(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160; </div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;    <span class="comment">// Scale the cost by the probability of executing the predicated blocks.</span></div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <span class="comment">// This assumes the predicated block for each vector lane is equally</span></div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;    <span class="comment">// likely.</span></div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    ScalarizationCost = ScalarizationCost / <a class="code" href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">getReciprocalPredBlockProb</a>();</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;  }</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> SafeDivisorCost = 0;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160; </div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;  <span class="keyword">auto</span> *VecTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160; </div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;  <span class="comment">// The cost of the select guard to ensure all lanes are well defined</span></div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;  <span class="comment">// after we speculate above any internal control flow.</span></div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;  SafeDivisorCost += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af89277d8bd76d6348291e29b6076796a">getCmpSelInstrCost</a>(</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>, VecTy,</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getContext()), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>),</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">CmpInst::BAD_ICMP_PREDICATE</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160; </div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;  <span class="comment">// Certain instructions can be cheaper to vectorize if they have a constant</span></div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;  <span class="comment">// second vector operand. One example of this are shifts on x86.</span></div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op2 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;  <span class="keyword">auto</span> Op2Info = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">getOperandInfo</a>(Op2);</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;  <span class="keywordflow">if</span> (Op2Info.Kind == <a class="code" href="classllvm_1_1TargetTransformInfo.html#afa38851d75434d1476444ac93f94cb4ca9c0eecea29e9fa58e4dac7ee32b9b2ac">TargetTransformInfo::OK_AnyValue</a> &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a81955f0baa44d5e0e564520ceed9c789">isUniform</a>(Op2))</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    Op2Info.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html#a930b0b2be537d928348aa0946f61dcd6">Kind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#afa38851d75434d1476444ac93f94cb4ca7aa61d9e9d33bdf28478754c69c59640">TargetTransformInfo::OK_UniformValue</a>;</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160; </div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 4&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operand_values());</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;  SafeDivisorCost += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VecTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>,</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    {TargetTransformInfo::OK_AnyValue, TargetTransformInfo::OP_None},</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    Op2Info, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;  <span class="keywordflow">return</span> {ScalarizationCost, SafeDivisorCost};</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;}</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160; </div>
<div class="line"><a name="l04551"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a031ea73feba9db1ce058b8ebbd1c4203"> 4551</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a031ea73feba9db1ce058b8ebbd1c4203">LoopVectorizationCostModel::interleavedAccessCanBeWidened</a>(</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isAccessInterleaved(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <span class="stringliteral">&quot;Expecting interleaved access.&quot;</span>);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) == CM_Unknown &amp;&amp;</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;         <span class="stringliteral">&quot;Decision should not be set yet.&quot;</span>);</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;  <span class="keyword">auto</span> *Group = getInterleavedAccessGroup(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Group &amp;&amp; <span class="stringliteral">&quot;Must have a group.&quot;</span>);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160; </div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;  <span class="comment">// If the instruction&#39;s allocated size doesn&#39;t equal it&#39;s type size, it</span></div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;  <span class="comment">// requires padding and will be scalarized.</span></div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getModule()-&gt;getDataLayout();</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;  <span class="keyword">auto</span> *ScalarTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#aa407c2e7d895ed29af8cc68563c03065">hasIrregularType</a>(ScalarTy, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160; </div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;  <span class="comment">// If the group involves a non-integral pointer, we may not be able to</span></div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;  <span class="comment">// losslessly cast all values to a common type.</span></div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;  <span class="keywordtype">unsigned</span> InterleaveFactor = Group-&gt;getFactor();</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;  <span class="keywordtype">bool</span> ScalarNI = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralPointerType(ScalarTy);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; InterleaveFactor; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = Group-&gt;getMember(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;    <span class="keywordflow">if</span> (!Member)</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;    <span class="keyword">auto</span> *MemberTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(Member);</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    <span class="keywordtype">bool</span> MemberNI = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralPointerType(MemberTy);</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;    <span class="comment">// Don&#39;t coerce non-integral pointers to integers or vice versa.</span></div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="keywordflow">if</span> (MemberNI != ScalarNI) {</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      <span class="comment">// TODO: Consider adding special nullptr value case here</span></div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MemberNI &amp;&amp; ScalarNI &amp;&amp;</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;               ScalarTy-&gt;getPointerAddressSpace() !=</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;               MemberTy-&gt;getPointerAddressSpace()) {</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    }</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;  }</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160; </div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;  <span class="comment">// Check if masking is required.</span></div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;  <span class="comment">// A Group may need masking for one of two reasons: it resides in a block that</span></div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;  <span class="comment">// needs predication, or it was decided to use masking to deal with gaps</span></div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;  <span class="comment">// (either a gap at the end of a load-access that may result in a speculative</span></div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;  <span class="comment">// load, or any gaps in a store-access).</span></div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;  <span class="keywordtype">bool</span> PredicatedAccessRequiresMasking =</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;      blockNeedsPredicationForAnyReason(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()) &amp;&amp;</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;  <span class="keywordtype">bool</span> LoadAccessWithGapsRequiresEpilogMasking =</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;      isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; Group-&gt;requiresScalarEpilogue() &amp;&amp;</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      !isScalarEpilogueAllowed();</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;  <span class="keywordtype">bool</span> StoreAccessWithGapsRequiresMasking =</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;      isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; (Group-&gt;getNumMembers() &lt; Group-&gt;getFactor());</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;  <span class="keywordflow">if</span> (!PredicatedAccessRequiresMasking &amp;&amp;</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      !LoadAccessWithGapsRequiresEpilogMasking &amp;&amp;</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      !StoreAccessWithGapsRequiresMasking)</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160; </div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;  <span class="comment">// If masked interleaving is required, we expect that the user/target had</span></div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;  <span class="comment">// enabled it, because otherwise it either wouldn&#39;t have been created or</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;  <span class="comment">// it should have been invalidated by the CostModel.</span></div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) &amp;&amp;</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;         <span class="stringliteral">&quot;Masked interleave-groups for predicated accesses are not enabled.&quot;</span>);</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160; </div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;  <span class="keywordflow">if</span> (Group-&gt;isReverse())</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160; </div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;  <span class="keyword">auto</span> *Ty = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;  <span class="keywordflow">return</span> isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ? <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aff5a70644f05b7731348861016ff2af1">isLegalMaskedLoad</a>(Ty, Alignment)</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;                          : <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ab9bcc7733985bba3ab58e5c2abbc129e">isLegalMaskedStore</a>(Ty, Alignment);</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;}</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160; </div>
<div class="line"><a name="l04620"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a59a6dd7531c8683174f886ff7698cc63"> 4620</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a59a6dd7531c8683174f886ff7698cc63">LoopVectorizationCostModel::memoryInstructionCanBeWidened</a>(</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;  <span class="comment">// Get and ensure we have a valid memory instruction.</span></div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;LoadInst, StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp; <span class="stringliteral">&quot;Invalid memory instruction&quot;</span>);</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160; </div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;  <span class="keyword">auto</span> *ScalarTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160; </div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;  <span class="comment">// In order to be widened, the pointer should be consecutive, first of all.</span></div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4589ea484ebe1919b451fff3948a17cc">isConsecutivePtr</a>(ScalarTy, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160; </div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;  <span class="comment">// If the instruction is a store located in a predicated block, it will be</span></div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;  <span class="comment">// scalarized.</span></div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;  <span class="keywordflow">if</span> (isScalarWithPredication(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160; </div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;  <span class="comment">// If the instruction&#39;s allocated size doesn&#39;t equal it&#39;s type size, it</span></div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;  <span class="comment">// requires padding and will be scalarized.</span></div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getModule()-&gt;getDataLayout();</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#aa407c2e7d895ed29af8cc68563c03065">hasIrregularType</a>(ScalarTy, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160; </div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;}</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160; </div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;<span class="keywordtype">void</span> LoopVectorizationCostModel::collectLoopUniforms(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;  <span class="comment">// We should not collect Uniforms more than once per VF. Right now,</span></div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;  <span class="comment">// this function is called from collectUniformsAndScalars(), which</span></div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;  <span class="comment">// already does this check. Collecting Uniforms for VF=1 does not make any</span></div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;  <span class="comment">// sense.</span></div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160; </div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; Uniforms.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) == Uniforms.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() &amp;&amp;</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;         <span class="stringliteral">&quot;This function should not be visited twice for the same VF&quot;</span>);</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160; </div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;  <span class="comment">// Visit the list of Uniforms. If we&#39;ll not find any uniform value, we&#39;ll</span></div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;  <span class="comment">// not analyze again.  Uniforms.count(VF) will return 1.</span></div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;  Uniforms[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160; </div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;  <span class="comment">// We now know that the loop is vectorizable!</span></div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;  <span class="comment">// Collect instructions inside the loop that will remain uniform after</span></div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;  <span class="comment">// vectorization.</span></div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160; </div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;  <span class="comment">// Global values, params and instructions outside of current loop are out of</span></div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;  <span class="comment">// scope.</span></div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;  <span class="keyword">auto</span> isOutOfScope = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;    <span class="keywordflow">return</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || !TheLoop-&gt;contains(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;  };</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160; </div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;  <span class="comment">// Worklist containing uniform instructions demanding lane 0.</span></div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Instruction *&gt;</a> Worklist;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = TheLoop-&gt;getLoopLatch();</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160; </div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;  <span class="comment">// Add uniform instructions demanding lane 0 to the worklist. Instructions</span></div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;  <span class="comment">// that are scalar with predication must not be considered uniform after</span></div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;  <span class="comment">// vectorization, because that would create an erroneous replicating region</span></div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;  <span class="comment">// where only a single instance out of VF should be formed.</span></div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;  <span class="comment">// TODO: optimize such seldom cases if found important, see PR40816.</span></div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;  <span class="keyword">auto</span> addToWorklistIfAllowed = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;    <span class="keywordflow">if</span> (isOutOfScope(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found not uniform due to scope: &quot;</span></div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;                        &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;    }</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;    <span class="keywordflow">if</span> (isScalarWithPredication(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found not uniform being ScalarWithPredication: &quot;</span></div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;                        &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    }</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found uniform instruction: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    Worklist.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;  };</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160; </div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;  <span class="comment">// Start with the conditional branch. If the branch condition is an</span></div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  <span class="comment">// instruction contained in the loop that is only used by the branch, it is</span></div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;  <span class="comment">// uniform.</span></div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = dyn_cast&lt;Instruction&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  <span class="keywordflow">if</span> (Cmp &amp;&amp; TheLoop-&gt;contains(Cmp) &amp;&amp; <a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;    addToWorklistIfAllowed(Cmp);</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160; </div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;  <span class="comment">// Return true if all lanes perform the same memory operation, and we can</span></div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;  <span class="comment">// thus chose to execute only one.</span></div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;  <span class="keyword">auto</span> isUniformMemOpUse = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af593134e27871d44a016de05492a4f41">isUniformMemOp</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;      <span class="comment">// Loading the same address always produces the same result - at least</span></div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;      <span class="comment">// assuming aliasing and ordering which have already been checked.</span></div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;    <span class="comment">// Storing the same value on every iteration.</span></div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;    <span class="keywordflow">return</span> TheLoop-&gt;isLoopInvariant(cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getValueOperand());</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;  };</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160; </div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;  <span class="keyword">auto</span> isUniformDecision = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;    InstWidening WideningDecision = getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WideningDecision != CM_Unknown &amp;&amp;</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;           <span class="stringliteral">&quot;Widening decision should be ready at this moment&quot;</span>);</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160; </div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    <span class="keywordflow">if</span> (isUniformMemOpUse(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160; </div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    <span class="keywordflow">return</span> (WideningDecision == CM_Widen ||</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;            WideningDecision == CM_Widen_Reverse ||</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;            WideningDecision == CM_Interleave);</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;  };</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160; </div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160; </div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;  <span class="comment">// Returns true if Ptr is the pointer operand of a memory access instruction</span></div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;  <span class="comment">// I, and I is known to not require scalarization.</span></div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;  <span class="keyword">auto</span> isVectorizedMemAccessUse = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) == <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> &amp;&amp; isUniformDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;  };</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160; </div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;  <span class="comment">// Holds a list of values which are known to have at least one uniform use.</span></div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;  <span class="comment">// Note that there may be other uses which aren&#39;t uniform.  A &quot;uniform use&quot;</span></div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;  <span class="comment">// here is something which only demands lane 0 of the unrolled iterations;</span></div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;  <span class="comment">// it does not imply that all lanes produce the same value (e.g. this is not</span></div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;  <span class="comment">// the usual meaning of uniform)</span></div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> HasUniformUse;</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160; </div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;  <span class="comment">// Scan the loop for instructions which are either a) known to have only</span></div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;  <span class="comment">// lane 0 demanded or b) are uses which demand only lane 0 of their operand.</span></div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks())</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;        <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;        <span class="keywordflow">case</span> Intrinsic::sideeffect:</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;        <span class="keywordflow">case</span> Intrinsic::experimental_noalias_scope_decl:</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;        <span class="keywordflow">case</span> Intrinsic::assume:</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;        <span class="keywordflow">case</span> Intrinsic::lifetime_start:</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;        <span class="keywordflow">case</span> Intrinsic::lifetime_end:</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;          <span class="keywordflow">if</span> (TheLoop-&gt;hasLoopInvariantOperands(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;            addToWorklistIfAllowed(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;        }</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;      }</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160; </div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;      <span class="comment">// ExtractValue instructions must be uniform, because the operands are</span></div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;      <span class="comment">// known to be loop-invariant.</span></div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *EVI = dyn_cast&lt;ExtractValueInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isOutOfScope(EVI-&gt;getAggregateOperand()) &amp;&amp;</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;               <span class="stringliteral">&quot;Expected aggregate value to be loop invariant&quot;</span>);</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;        addToWorklistIfAllowed(EVI);</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;      }</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160; </div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;      <span class="comment">// If there&#39;s no pointer operand, there&#39;s nothing to do.</span></div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160; </div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;      <span class="keywordflow">if</span> (isUniformMemOpUse(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;        addToWorklistIfAllowed(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160; </div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;      <span class="keywordflow">if</span> (isUniformDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isVectorizedMemAccessUse(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &amp;&amp; <span class="stringliteral">&quot;consistency check&quot;</span>);</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;        HasUniformUse.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;      }</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    }</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160; </div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;  <span class="comment">// Add to the worklist any operands which have *only* uniform (e.g. lane 0</span></div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;  <span class="comment">// demanding) users.  Since loops are assumed to be in LCSSA form, this</span></div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;  <span class="comment">// disallows uses outside the loop as well.</span></div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *V : HasUniformUse) {</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;    <span class="keywordflow">if</span> (isOutOfScope(V))</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;    <span class="keyword">auto</span> UsersAreMemAccesses =</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;      <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;        return isVectorizedMemAccessUse(cast&lt;Instruction&gt;(U), V);</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;      });</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <span class="keywordflow">if</span> (UsersAreMemAccesses)</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;      addToWorklistIfAllowed(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  }</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160; </div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;  <span class="comment">// Expand Worklist in topological order: whenever a new instruction</span></div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;  <span class="comment">// is added , its users should be already inside Worklist.  It ensures</span></div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;  <span class="comment">// a uniform instruction will only be used by uniform instructions.</span></div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;  <span class="keywordtype">unsigned</span> idx = 0;</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;  <span class="keywordflow">while</span> (idx != Worklist.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>()) {</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist[idx++];</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160; </div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *OV : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operand_values()) {</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      <span class="comment">// isOutOfScope operands cannot be uniform instructions.</span></div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;      <span class="keywordflow">if</span> (isOutOfScope(OV))</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;      <span class="comment">// First order recurrence Phi&#39;s should typically be considered</span></div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;      <span class="comment">// non-uniform.</span></div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="regex2_8h.html#af4408501bd0122c5686327ce657853de">OP</a> = dyn_cast&lt;PHINode&gt;(OV);</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="regex2_8h.html#af4408501bd0122c5686327ce657853de">OP</a> &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5d6b8f1a562e7d26404946de46d3045b">isFixedOrderRecurrence</a>(<a class="code" href="regex2_8h.html#af4408501bd0122c5686327ce657853de">OP</a>))</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;      <span class="comment">// If all the users of the operand are uniform, then add the</span></div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;      <span class="comment">// operand into the uniform worklist.</span></div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;      <span class="keyword">auto</span> *OI = cast&lt;Instruction&gt;(OV);</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(OI-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;            auto *J = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;            return Worklist.count(J) || isVectorizedMemAccessUse(J, OI);</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;          }))</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;        addToWorklistIfAllowed(OI);</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;    }</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;  }</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160; </div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;  <span class="comment">// For an instruction to be added into Worklist above, all its users inside</span></div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;  <span class="comment">// the loop should also be in Worklist. However, this condition cannot be</span></div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;  <span class="comment">// true for phi nodes that form a cyclic dependence. We must process phi</span></div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;  <span class="comment">// nodes separately. An induction variable will remain uniform if all users</span></div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;  <span class="comment">// of the induction variable and induction variable update remain uniform.</span></div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;  <span class="comment">// The code below handles both pointer and non-pointer induction variables.</span></div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Induction : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">getInductionVars</a>()) {</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;    <span class="keyword">auto</span> *Ind = Induction.first;</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;    <span class="keyword">auto</span> *IndUpdate = cast&lt;Instruction&gt;(Ind-&gt;getIncomingValueForBlock(Latch));</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160; </div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    <span class="comment">// Determine if all users of the induction variable are uniform after</span></div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;    <span class="comment">// vectorization.</span></div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;    <span class="keyword">auto</span> UniformInd = <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(Ind-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;      auto *I = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;      return I == IndUpdate || !TheLoop-&gt;contains(I) || Worklist.count(I) ||</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;             isVectorizedMemAccessUse(I, Ind);</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    });</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    <span class="keywordflow">if</span> (!UniformInd)</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160; </div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;    <span class="comment">// Determine if all users of the induction variable update instruction are</span></div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;    <span class="comment">// uniform after vectorization.</span></div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;    <span class="keyword">auto</span> UniformIndUpdate =</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;        <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(IndUpdate-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;          auto *I = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;          return I == Ind || !TheLoop-&gt;contains(I) || Worklist.count(I) ||</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;                 isVectorizedMemAccessUse(I, IndUpdate);</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;        });</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;    <span class="keywordflow">if</span> (!UniformIndUpdate)</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160; </div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;    <span class="comment">// The induction variable and its update instruction will remain uniform.</span></div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;    addToWorklistIfAllowed(Ind);</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;    addToWorklistIfAllowed(IndUpdate);</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  }</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160; </div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;  Uniforms[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(Worklist.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>(), Worklist.<a class="code" href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">end</a>());</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;}</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160; </div>
<div class="line"><a name="l04864"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#aad6239ca8b51657f5ebdbd6e51e6ea90"> 4864</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#aad6239ca8b51657f5ebdbd6e51e6ea90">LoopVectorizationCostModel::runtimeChecksRequired</a>() {</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Performing code size checks.\n&quot;</span>);</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160; </div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a676aa85125366c5b7819845a19baeef0">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a177df4fcdf758fb57ca59102c15d30c3">Need</a>) {</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(<span class="stringliteral">&quot;Runtime ptr check is required with -Os/-Oz&quot;</span>,</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;        <span class="stringliteral">&quot;runtime pointer checks needed. Enable vectorization of this &quot;</span></div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;        <span class="stringliteral">&quot;loop with &#39;#pragma clang loop vectorize(enable)&#39; when &quot;</span></div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;        <span class="stringliteral">&quot;compiling with -Os/-Oz&quot;</span>,</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;        <span class="stringliteral">&quot;CantVersionLoopWithOptForSize&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;  }</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160; </div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a12a8ac8838fb851a2de5dc5275307bb6">getPredicate</a>().<a class="code" href="classllvm_1_1SCEVPredicate.html#ac43f5102232a1e1819b0763536f2937a">isAlwaysTrue</a>()) {</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(<span class="stringliteral">&quot;Runtime SCEV check is required with -Os/-Oz&quot;</span>,</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;        <span class="stringliteral">&quot;runtime SCEV checks needed. Enable vectorization of this &quot;</span></div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;        <span class="stringliteral">&quot;loop with &#39;#pragma clang loop vectorize(enable)&#39; when &quot;</span></div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;        <span class="stringliteral">&quot;compiling with -Os/-Oz&quot;</span>,</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;        <span class="stringliteral">&quot;CantVersionLoopWithOptForSize&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;  }</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160; </div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  <span class="comment">// FIXME: Avoid specializing for stride==1 instead of bailing out.</span></div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae21d46756cd1643894e85c5f78182cb0">getLAI</a>()-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#a503ed6f76fcdca50b3c8b60fa011b8c9">getSymbolicStrides</a>().<a class="code" href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">empty</a>()) {</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(<span class="stringliteral">&quot;Runtime stride check for small trip count&quot;</span>,</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;        <span class="stringliteral">&quot;runtime stride == 1 checks needed. Enable vectorization of &quot;</span></div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;        <span class="stringliteral">&quot;this loop without such check by compiling with -Os/-Oz&quot;</span>,</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;        <span class="stringliteral">&quot;CantVersionLoopWithOptForSize&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;  }</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160; </div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;}</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160; </div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a></div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;LoopVectorizationCostModel::getMaxLegalScalableVF(<span class="keywordtype">unsigned</span> MaxSafeElements) {</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ab0215ddedbe9f8179c491308a56aaceb">supportsScalableVectors</a>() &amp;&amp; !<a class="code" href="LoopVectorize_8cpp.html#ad2af1b354f978aa6964b48c3382f5376">ForceTargetSupportsScalableVectors</a>)</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(0);</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160; </div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;  <span class="keywordflow">if</span> (Hints-&gt;isScalableVectorizationDisabled()) {</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(<span class="stringliteral">&quot;Scalable vectorization is explicitly disabled&quot;</span>,</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;                            <span class="stringliteral">&quot;ScalableVectorizationDisabled&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(0);</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;  }</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160; </div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Scalable vectorization is available\n&quot;</span>);</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160; </div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;  <span class="keyword">auto</span> MaxScalableVF = <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;      <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;ElementCount::ScalarTy&gt;::max</a>());</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160; </div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;  <span class="comment">// Test that the loop-vectorizer can legalize all operations for this MaxVF.</span></div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;  <span class="comment">// FIXME: While for scalable vectors this is currently sufficient, this should</span></div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;  <span class="comment">// be replaced by a more detailed mechanism that filters out specific VFs,</span></div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;  <span class="comment">// instead of invalidating vectorization for a whole set of VFs based on the</span></div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;  <span class="comment">// MaxVF.</span></div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160; </div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;  <span class="comment">// Disable scalable vectorization if the loop contains unsupported reductions.</span></div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;  <span class="keywordflow">if</span> (!canVectorizeReductions(MaxScalableVF)) {</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;    <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        <span class="stringliteral">&quot;Scalable vectorization not supported for the reduction &quot;</span></div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;        <span class="stringliteral">&quot;operations found in this loop.&quot;</span>,</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;        <span class="stringliteral">&quot;ScalableVFUnfeasible&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(0);</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;  }</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;  <span class="comment">// Disable scalable vectorization if the loop contains any instructions</span></div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;  <span class="comment">// with element types not supported for scalable vectors.</span></div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(ElementTypesInLoop, [&amp;](<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;        <span class="keywordflow">return</span> !Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>() &amp;&amp;</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;               !this-&gt;TTI.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a64e28d7d5da07059305e09ff16ee5d0b">isElementTypeLegalForScalableVector</a>(Ty);</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;      })) {</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;    <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(<span class="stringliteral">&quot;Scalable vectorization is not supported &quot;</span></div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;                            <span class="stringliteral">&quot;for all element types found in this loop.&quot;</span>,</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;                            <span class="stringliteral">&quot;ScalableVFUnfeasible&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(0);</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;  }</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160; </div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#aa6717c9edc2614476ebb19bd73e8bcb8">isSafeForAnyVectorWidth</a>())</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="keywordflow">return</span> MaxScalableVF;</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160; </div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;  <span class="comment">// Limit MaxScalableVF by the maximum safe dependence distance.</span></div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;  std::optional&lt;unsigned&gt; MaxVScale = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a3586d4f687e1a068f879bf29b046eb3a">getMaxVScale</a>();</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;  <span class="keywordflow">if</span> (!MaxVScale &amp;&amp; TheFunction-&gt;hasFnAttribute(Attribute::VScaleRange))</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    MaxVScale =</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;        TheFunction-&gt;getFnAttribute(Attribute::VScaleRange).getVScaleRangeMax();</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;  MaxScalableVF =</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;      <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(MaxVScale ? (MaxSafeElements / *MaxVScale) : 0);</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;  <span class="keywordflow">if</span> (!MaxScalableVF)</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;    <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;        <span class="stringliteral">&quot;Max legal vector width too small, scalable vectorization &quot;</span></div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;        <span class="stringliteral">&quot;unfeasible.&quot;</span>,</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        <span class="stringliteral">&quot;ScalableVFUnfeasible&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160; </div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;  <span class="keywordflow">return</span> MaxScalableVF;</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;}</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160; </div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;<a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a> LoopVectorizationCostModel::computeFeasibleMaxVF(</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;    <span class="keywordtype">unsigned</span> ConstTripCount, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF, <span class="keywordtype">bool</span> FoldTailByMasking) {</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  MinBWs = <a class="code" href="namespacellvm.html#af7b6ae12af3578f7a20ccc11a4458f9f">computeMinimumValueSizes</a>(TheLoop-&gt;getBlocks(), *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>, &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;  <span class="keywordtype">unsigned</span> SmallestType, WidestType;</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;  std::tie(SmallestType, WidestType) = getSmallestAndWidestTypes();</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160; </div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;  <span class="comment">// Get the maximum safe dependence distance in bits computed by LAA.</span></div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;  <span class="comment">// It is computed by MaxVF * sizeOf(type) * 8, where type is taken from</span></div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;  <span class="comment">// the memory accesses that is most restrictive (involved in the smallest</span></div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;  <span class="comment">// dependence distance).</span></div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;  <span class="keywordtype">unsigned</span> MaxSafeElements =</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;      <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a2551d678f358fcb0f498224876f58673">getMaxSafeVectorWidthInBits</a>() / WidestType);</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160; </div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;  <span class="keyword">auto</span> MaxSafeFixedVF = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(MaxSafeElements);</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;  <span class="keyword">auto</span> MaxSafeScalableVF = getMaxLegalScalableVF(MaxSafeElements);</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160; </div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: The max safe fixed VF is: &quot;</span> &lt;&lt; MaxSafeFixedVF</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: The max safe scalable VF is: &quot;</span> &lt;&lt; MaxSafeScalableVF</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160; </div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;  <span class="comment">// First analyze the UserVF, fall back if the UserVF should be ignored.</span></div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;  <span class="keywordflow">if</span> (UserVF) {</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    <span class="keyword">auto</span> MaxSafeUserVF =</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;        UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() ? MaxSafeScalableVF : MaxSafeFixedVF;</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160; </div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a338ba7ca7a526243ab1853d07d90fe38">ElementCount::isKnownLE</a>(UserVF, MaxSafeUserVF)) {</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;      <span class="comment">// If `VF=vscale x N` is safe, then so is `VF=N`</span></div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;      <span class="keywordflow">if</span> (UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a>(</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;            <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()), UserVF);</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;        <span class="keywordflow">return</span> UserVF;</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    }</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160; </div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#addaa86bfa4ca26b7f366cbdd868f99bf">ElementCount::isKnownGT</a>(UserVF, MaxSafeUserVF));</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160; </div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;    <span class="comment">// Only clamp if the UserVF is not scalable. If the UserVF is scalable, it</span></div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;    <span class="comment">// is better to ignore the hint and let the compiler choose a suitable VF.</span></div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;    <span class="keywordflow">if</span> (!UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: User VF=&quot;</span> &lt;&lt; UserVF</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; is unsafe, clamping to max safe VF=&quot;</span></div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;                        &lt;&lt; MaxSafeFixedVF &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;VectorizationFactor&quot;</span>,</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;                                          TheLoop-&gt;getStartLoc(),</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;                                          TheLoop-&gt;getHeader())</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;User-specified vectorization factor &quot;</span></div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;UserVectorizationFactor&quot;</span>, UserVF)</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; is unsafe, clamping to maximum safe vectorization factor &quot;</span></div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;VectorizationFactor&quot;</span>, MaxSafeFixedVF);</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      });</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;      <span class="keywordflow">return</span> MaxSafeFixedVF;</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;    }</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160; </div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ab0215ddedbe9f8179c491308a56aaceb">supportsScalableVectors</a>() &amp;&amp; !<a class="code" href="LoopVectorize_8cpp.html#ad2af1b354f978aa6964b48c3382f5376">ForceTargetSupportsScalableVectors</a>) {</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: User VF=&quot;</span> &lt;&lt; UserVF</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; is ignored because scalable vectors are not &quot;</span></div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;                           <span class="stringliteral">&quot;available.\n&quot;</span>);</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;VectorizationFactor&quot;</span>,</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;                                          TheLoop-&gt;getStartLoc(),</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;                                          TheLoop-&gt;getHeader())</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;User-specified vectorization factor &quot;</span></div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;UserVectorizationFactor&quot;</span>, UserVF)</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; is ignored because the target does not support scalable &quot;</span></div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;                  <span class="stringliteral">&quot;vectors. The compiler will pick a more suitable value.&quot;</span>;</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;      });</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: User VF=&quot;</span> &lt;&lt; UserVF</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; is unsafe. Ignoring scalable UserVF.\n&quot;</span>);</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;VectorizationFactor&quot;</span>,</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;                                          TheLoop-&gt;getStartLoc(),</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;                                          TheLoop-&gt;getHeader())</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;User-specified vectorization factor &quot;</span></div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;UserVectorizationFactor&quot;</span>, UserVF)</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; is unsafe. Ignoring the hint to let the compiler pick a &quot;</span></div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;                  <span class="stringliteral">&quot;more suitable value.&quot;</span>;</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      });</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;    }</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;  }</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160; </div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: The Smallest and Widest types: &quot;</span> &lt;&lt; SmallestType</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; WidestType &lt;&lt; <span class="stringliteral">&quot; bits.\n&quot;</span>);</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160; </div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;  <a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1),</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;                             <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(0));</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> MaxVF =</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;          getMaximizedVFForTarget(ConstTripCount, SmallestType, WidestType,</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;                                  MaxSafeFixedVF, FoldTailByMasking))</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.FixedVF = MaxVF;</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160; </div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> MaxVF =</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;          getMaximizedVFForTarget(ConstTripCount, SmallestType, WidestType,</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;                                  MaxSafeScalableVF, FoldTailByMasking))</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <span class="keywordflow">if</span> (MaxVF.isScalable()) {</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;      <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.ScalableVF = MaxVF;</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found feasible scalable VF = &quot;</span> &lt;&lt; MaxVF</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;    }</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160; </div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;}</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160; </div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;<a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a></div>
<div class="line"><a name="l05065"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a65ab4267c6c132d06451b5d97bc9ee83"> 5065</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a65ab4267c6c132d06451b5d97bc9ee83">LoopVectorizationCostModel::computeMaxVF</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF, <span class="keywordtype">unsigned</span> UserIC) {</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a676aa85125366c5b7819845a19baeef0">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a177df4fcdf758fb57ca59102c15d30c3">Need</a> &amp;&amp; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1c0b137bcf194671c30aba4e2fab073d">hasBranchDivergence</a>()) {</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;    <span class="comment">// TODO: It may by useful to do since it&#39;s still likely to be dynamically</span></div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;    <span class="comment">// uniform if the target can skip.</span></div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;        <span class="stringliteral">&quot;Not inserting runtime ptr check for divergent target&quot;</span>,</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;        <span class="stringliteral">&quot;runtime pointer checks needed. Not enabled for divergent target&quot;</span>,</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;        <span class="stringliteral">&quot;CantVersionLoopWithDivergentTarget&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;  }</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160; </div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;  <span class="keywordtype">unsigned</span> TC = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>()-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#abec0c616087c002528fcf80c6583eadd">getSmallConstantTripCount</a>(TheLoop);</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found trip count: &quot;</span> &lt;&lt; TC &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;  <span class="keywordflow">if</span> (TC == 1) {</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(<span class="stringliteral">&quot;Single iteration (non) loop&quot;</span>,</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;        <span class="stringliteral">&quot;loop trip count is one, irrelevant for vectorization&quot;</span>,</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;        <span class="stringliteral">&quot;SingleIterationLoop&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  }</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160; </div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;  <span class="keywordflow">switch</span> (ScalarEpilogueStatus) {</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>:</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;    <span class="keywordflow">return</span> computeFeasibleMaxVF(TC, UserVF, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206">CM_ScalarEpilogueNotAllowedUsePredicate</a>:</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>:</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: vector predicate hint/switch found.\n&quot;</span></div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;LV: Not allowing scalar epilogue, creating predicated &quot;</span></div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;vector loop.\n&quot;</span>);</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da0a5c3a3ea2de39aa77f3e6da8de4d5bd">CM_ScalarEpilogueNotAllowedLowTripLoop</a>:</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;    <span class="comment">// fallthrough as a special case of OptForSize</span></div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7">CM_ScalarEpilogueNotAllowedOptSize</a>:</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;    <span class="keywordflow">if</span> (ScalarEpilogueStatus == <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7">CM_ScalarEpilogueNotAllowedOptSize</a>)</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not allowing scalar epilogue due to -Os/-Oz.\n&quot;</span>);</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not allowing scalar epilogue due to low trip &quot;</span></div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;count.\n&quot;</span>);</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160; </div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;    <span class="comment">// Bail if runtime checks are required, which are not good when optimising</span></div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;    <span class="comment">// for size.</span></div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;    <span class="keywordflow">if</span> (runtimeChecksRequired())</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160; </div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;  }</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160; </div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;  <span class="comment">// The only loops we can vectorize without a scalar epilogue, are loops with</span></div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;  <span class="comment">// a bottom-test and a single exiting block. We&#39;d have to handle the fact</span></div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;  <span class="comment">// that not every instruction executes on the last iteration.  This will</span></div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;  <span class="comment">// require a lane mask which varies through the vector loop body.  (TODO)</span></div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;  <span class="keywordflow">if</span> (TheLoop-&gt;getExitingBlock() != TheLoop-&gt;getLoopLatch()) {</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;    <span class="comment">// If there was a tail-folding hint/switch, but we can&#39;t fold the tail by</span></div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    <span class="comment">// masking, fallback to a vectorization with a scalar epilogue.</span></div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    <span class="keywordflow">if</span> (ScalarEpilogueStatus == <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>) {</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Cannot fold tail by masking: vectorize with a &quot;</span></div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;                           <span class="stringliteral">&quot;scalar epilogue instead.\n&quot;</span>);</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;      ScalarEpilogueStatus = <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;      <span class="keywordflow">return</span> computeFeasibleMaxVF(TC, UserVF, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;    }</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;  }</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160; </div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;  <span class="comment">// Now try the tail folding</span></div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160; </div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;  <span class="comment">// Invalidate interleave groups that require an epilogue if we can&#39;t mask</span></div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;  <span class="comment">// the interleave-group.</span></div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>)) {</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WideningDecisions.empty() &amp;&amp; Uniforms.<a class="code" href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">empty</a>() &amp;&amp; Scalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;           <span class="stringliteral">&quot;No decisions should have been taken at this point&quot;</span>);</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;    <span class="comment">// Note: There is no need to invalidate any cost modeling decisions here, as</span></div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;    <span class="comment">// non where taken so far.</span></div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;    InterleaveInfo.invalidateGroupsRequiringScalarEpilogue();</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;  }</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160; </div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;  <a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a> MaxFactors = computeFeasibleMaxVF(TC, UserVF, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;  <span class="comment">// Avoid tail folding if the trip count is known to be a multiple of any VF</span></div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;  <span class="comment">// we chose.</span></div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;  <span class="comment">// FIXME: The condition below pessimises the case for fixed-width vectors,</span></div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;  <span class="comment">// when scalable VFs are also candidates for vectorization.</span></div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;  <span class="keywordflow">if</span> (MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25a62c28e80eac3b4cc08470ae0770bd">FixedVF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; !MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25f82f8ef3355c335a7ddae4ad0b6965">ScalableVF</a>) {</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxFixedVF = MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25a62c28e80eac3b4cc08470ae0770bd">FixedVF</a>;</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a5cafb166cf7c4937f5647a084c4eaee2">isNonZero</a>() || <a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(MaxFixedVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>())) &amp;&amp;</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;           <span class="stringliteral">&quot;MaxFixedVF must be a power of 2&quot;</span>);</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;    <span class="keywordtype">unsigned</span> MaxVFtimesIC = UserIC ? MaxFixedVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() * UserIC</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;                                   : MaxFixedVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>();</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BackedgeTakenCount = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#ada1db826f3d2266fe2c4d06218d8d342">getBackedgeTakenCount</a>();</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;        BackedgeTakenCount, SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">getOne</a>(BackedgeTakenCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()));</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Rem = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a13b9eb961d35ad9ecb3b633f5703253a">getURemExpr</a>(</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;        SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ad146072469181af4ccb7ef03c28999ba">applyLoopGuards</a>(ExitCount, TheLoop),</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;        SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(BackedgeTakenCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>(), MaxVFtimesIC));</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;    <span class="keywordflow">if</span> (Rem-&gt;<a class="code" href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">isZero</a>()) {</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;      <span class="comment">// Accept MaxFixedVF if we do not have a tail.</span></div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: No tail will remain for any chosen VF.\n&quot;</span>);</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;      <span class="keywordflow">return</span> MaxFactors;</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;    }</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;  }</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160; </div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;  <span class="comment">// If we don&#39;t know the precise trip count, or if the trip count that we</span></div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;  <span class="comment">// found modulo the vectorization factor is not zero, try to fold the tail</span></div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;  <span class="comment">// by masking.</span></div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;  <span class="comment">// FIXME: look for a smaller MaxVF that does divide TC rather than masking.</span></div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#abc31c4cb45dd05eef2bf3f4e76464558">prepareToFoldTailByMasking</a>()) {</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;    CanFoldTailByMasking = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;    <span class="keywordflow">return</span> MaxFactors;</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;  }</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160; </div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;  <span class="comment">// If there was a tail-folding hint/switch, but we can&#39;t fold the tail by</span></div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;  <span class="comment">// masking, fallback to a vectorization with a scalar epilogue.</span></div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;  <span class="keywordflow">if</span> (ScalarEpilogueStatus == <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>) {</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Cannot fold tail by masking: vectorize with a &quot;</span></div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;                         <span class="stringliteral">&quot;scalar epilogue instead.\n&quot;</span>);</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;    ScalarEpilogueStatus = <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;    <span class="keywordflow">return</span> MaxFactors;</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;  }</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160; </div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;  <span class="keywordflow">if</span> (ScalarEpilogueStatus == <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206">CM_ScalarEpilogueNotAllowedUsePredicate</a>) {</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Can&#39;t fold tail by masking: don&#39;t vectorize\n&quot;</span>);</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;  }</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160; </div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;  <span class="keywordflow">if</span> (TC == 0) {</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;        <span class="stringliteral">&quot;Unable to calculate the loop count due to complex control flow&quot;</span>,</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;        <span class="stringliteral">&quot;unable to calculate the loop count due to complex control flow&quot;</span>,</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;        <span class="stringliteral">&quot;UnknownLoopCountComplexCFG&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;  }</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160; </div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;  <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;      <span class="stringliteral">&quot;Cannot optimize for size and vectorize at the same time.&quot;</span>,</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;      <span class="stringliteral">&quot;cannot optimize for size and vectorize at the same time. &quot;</span></div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;      <span class="stringliteral">&quot;Enable vectorization of this loop with &#39;#pragma clang loop &quot;</span></div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      <span class="stringliteral">&quot;vectorize(enable)&#39; when compiling with -Os/-Oz&quot;</span>,</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;      <span class="stringliteral">&quot;NoTailLoopWithOptForSize&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">FixedScalableVFPair::getNone</a>();</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;}</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160; </div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> LoopVectorizationCostModel::getMaximizedVFForTarget(</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;    <span class="keywordtype">unsigned</span> ConstTripCount, <span class="keywordtype">unsigned</span> SmallestType, <span class="keywordtype">unsigned</span> WidestType,</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxSafeVF, <span class="keywordtype">bool</span> FoldTailByMasking) {</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;  <span class="keywordtype">bool</span> ComputeScalableMaxVF = MaxSafeVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>();</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> WidestRegister = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">getRegisterBitWidth</a>(</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;      ComputeScalableMaxVF ? <a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a331413d3887a08546d0973091f6a4993">TargetTransformInfo::RGK_ScalableVector</a></div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;                           : <a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">TargetTransformInfo::RGK_FixedWidthVector</a>);</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160; </div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;  <span class="comment">// Convenience function to return the minimum of two ElementCounts.</span></div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;  <span class="keyword">auto</span> MinVF = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.isScalable() == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isScalable()) &amp;&amp;</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;           <span class="stringliteral">&quot;Scalable flags must match&quot;</span>);</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) ? <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> : <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;  };</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160; </div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;  <span class="comment">// Ensure MaxVF is a power of 2; the dependence distance bound may not be.</span></div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;  <span class="comment">// Note that both WidestRegister and WidestType may not be a powers of 2.</span></div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;  <span class="keyword">auto</span> MaxVectorElementCount = <a class="code" href="classllvm_1_1ElementCount.html#a79ea372f9aa69492fccfafc0e5a1589c">ElementCount::get</a>(</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;      <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(WidestRegister.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() / WidestType),</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;      ComputeScalableMaxVF);</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;  MaxVectorElementCount = MinVF(MaxVectorElementCount, MaxSafeVF);</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: The Widest register safe to use is: &quot;</span></div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;                    &lt;&lt; (MaxVectorElementCount * WidestType) &lt;&lt; <span class="stringliteral">&quot; bits.\n&quot;</span>);</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160; </div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;  <span class="keywordflow">if</span> (!MaxVectorElementCount) {</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: The target has no &quot;</span></div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;                      &lt;&lt; (ComputeScalableMaxVF ? <span class="stringliteral">&quot;scalable&quot;</span> : <span class="stringliteral">&quot;fixed&quot;</span>)</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; vector registers.\n&quot;</span>);</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1);</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;  }</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160; </div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;  <span class="keywordtype">unsigned</span> WidestRegisterMinEC = MaxVectorElementCount.getKnownMinValue();</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;  <span class="keywordflow">if</span> (MaxVectorElementCount.isScalable() &amp;&amp;</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;      TheFunction-&gt;hasFnAttribute(Attribute::VScaleRange)) {</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    <span class="keyword">auto</span> Attr = TheFunction-&gt;getFnAttribute(Attribute::VScaleRange);</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;    <span class="keyword">auto</span> Min = Attr.getVScaleRangeMin();</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;    WidestRegisterMinEC *= Min;</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;  }</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <span class="keywordflow">if</span> (ConstTripCount &amp;&amp; ConstTripCount &lt;= WidestRegisterMinEC &amp;&amp;</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;      (!FoldTailByMasking || <a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(ConstTripCount))) {</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;    <span class="comment">// If loop trip count (TC) is known at compile time there is no point in</span></div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;    <span class="comment">// choosing VF greater than TC (as done in the loop below). Select maximum</span></div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;    <span class="comment">// power of two which doesn&#39;t exceed TC.</span></div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;    <span class="comment">// If MaxVectorElementCount is scalable, we only fall back on a fixed VF</span></div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;    <span class="comment">// when the TC is less than or equal to the known number of lanes.</span></div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;    <span class="keyword">auto</span> ClampedConstTripCount = <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(ConstTripCount);</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Clamping the MaxVF to maximum power of two not &quot;</span></div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;                         <span class="stringliteral">&quot;exceeding the constant trip count: &quot;</span></div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;                      &lt;&lt; ClampedConstTripCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(ClampedConstTripCount);</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;  }</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160; </div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166">TargetTransformInfo::RegisterKind</a> RegKind =</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;      ComputeScalableMaxVF ? <a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a331413d3887a08546d0973091f6a4993">TargetTransformInfo::RGK_ScalableVector</a></div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;                           : <a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">TargetTransformInfo::RGK_FixedWidthVector</a>;</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxVF = MaxVectorElementCount;</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a717c84dccaec7d7928d41106e5c42684">MaximizeBandwidth</a> || (<a class="code" href="LoopVectorize_8cpp.html#a717c84dccaec7d7928d41106e5c42684">MaximizeBandwidth</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() == 0 &amp;&amp;</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;                            <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a525b5174ebf7ac1db045dde5f579ddcb">shouldMaximizeVectorBandwidth</a>(RegKind))) {</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;    <span class="keyword">auto</span> MaxVectorElementCountMaxBW = <a class="code" href="classllvm_1_1ElementCount.html#a79ea372f9aa69492fccfafc0e5a1589c">ElementCount::get</a>(</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;        <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(WidestRegister.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() / SmallestType),</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;        ComputeScalableMaxVF);</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;    MaxVectorElementCountMaxBW = MinVF(MaxVectorElementCountMaxBW, MaxSafeVF);</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160; </div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;    <span class="comment">// Collect all viable vectorization factors larger than the default MaxVF</span></div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;    <span class="comment">// (i.e. MaxVectorElementCount).</span></div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ElementCount, 8&gt;</a> VFs;</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a9f54e5976c204d779cee3d87cabf0b02">VS</a> = MaxVectorElementCount * 2;</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;         <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a338ba7ca7a526243ab1853d07d90fe38">ElementCount::isKnownLE</a>(<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a9f54e5976c204d779cee3d87cabf0b02">VS</a>, MaxVectorElementCountMaxBW); <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a9f54e5976c204d779cee3d87cabf0b02">VS</a> *= 2)</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;      VFs.push_back(<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a9f54e5976c204d779cee3d87cabf0b02">VS</a>);</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160; </div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    <span class="comment">// For each VF calculate its register usage.</span></div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;    <span class="keyword">auto</span> RUs = calculateRegisterUsage(VFs);</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160; </div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    <span class="comment">// Select the largest VF which doesn&#39;t require more registers than existing</span></div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;    <span class="comment">// ones.</span></div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = RUs.size() - 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; --<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;      <span class="keywordtype">bool</span> Selected = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair : RUs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].MaxLocalUsers) {</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;        <span class="keywordtype">unsigned</span> TargetNumRegisters = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aae0e8ca52658f54e5cc6214eb1a291ef">getNumberOfRegisters</a>(pair.first);</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;        <span class="keywordflow">if</span> (pair.second &gt; TargetNumRegisters)</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;          Selected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;      }</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;      <span class="keywordflow">if</span> (Selected) {</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;        MaxVF = VFs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;      }</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;    }</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MinVF =</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;            <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a6a94a8710c9c41b64870559c9098f305">getMinimumVF</a>(SmallestType, ComputeScalableMaxVF)) {</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(MaxVF, MinVF)) {</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Overriding calculated MaxVF(&quot;</span> &lt;&lt; MaxVF</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;) with target&#39;s minimum: &quot;</span> &lt;&lt; MinVF &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;        MaxVF = MinVF;</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;      }</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;    }</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160; </div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;    <span class="comment">// Invalidate any widening decisions we might have made, in case the loop</span></div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;    <span class="comment">// requires prediction (decided later), but we have already made some</span></div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;    <span class="comment">// load/store widening decisions.</span></div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;    invalidateCostModelingDecisions();</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;  }</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;  <span class="keywordflow">return</span> MaxVF;</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;}</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160; </div>
<div class="line"><a name="l05311"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a296732b3ce802a21e7cb738b69e462da"> 5311</a></span>&#160;std::optional&lt;unsigned&gt; <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a296732b3ce802a21e7cb738b69e462da">LoopVectorizationCostModel::getVScaleForTuning</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;  <span class="keywordflow">if</span> (TheFunction-&gt;hasFnAttribute(Attribute::VScaleRange)) {</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;    <span class="keyword">auto</span> Attr = TheFunction-&gt;getFnAttribute(Attribute::VScaleRange);</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;    <span class="keyword">auto</span> Min = Attr.getVScaleRangeMin();</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;    <span class="keyword">auto</span> Max = Attr.getVScaleRangeMax();</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;    <span class="keywordflow">if</span> (Max &amp;&amp; Min == Max)</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;      <span class="keywordflow">return</span> Max;</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;  }</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160; </div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a04394f31b3d57c89fd8211783a12736d">getVScaleForTuning</a>();</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;}</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160; </div>
<div class="line"><a name="l05323"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#adf41dd8f08cb64b24a9dc39c8ca02fa9"> 5323</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#adf41dd8f08cb64b24a9dc39c8ca02fa9">LoopVectorizationCostModel::isMoreProfitable</a>(</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> &amp;A, <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> CostA = A.Cost;</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> CostB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Cost;</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160; </div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;  <span class="keywordtype">unsigned</span> MaxTripCount = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>()-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a3cc216ff1aa29e15999df96770a870bf">getSmallConstantMaxTripCount</a>(TheLoop);</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160; </div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;  <span class="keywordflow">if</span> (!A.Width.isScalable() &amp;&amp; !<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Width.isScalable() &amp;&amp; foldTailByMasking() &amp;&amp;</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;      MaxTripCount) {</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;    <span class="comment">// If we are folding the tail and the trip count is a known (possibly small)</span></div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;    <span class="comment">// constant, the trip count will be rounded up to an integer number of</span></div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;    <span class="comment">// iterations. The total cost will be PerIterationCost*ceil(TripCount/VF),</span></div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;    <span class="comment">// which we compare directly. When not folding the tail, the total cost will</span></div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    <span class="comment">// be PerIterationCost*floor(TC/VF) + Scalar remainder cost, and so is</span></div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;    <span class="comment">// approximated with the per-lane cost below instead of using the tripcount</span></div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;    <span class="comment">// as here.</span></div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;    <span class="keyword">auto</span> RTCostA = CostA * <a class="code" href="namespacellvm.html#a1a14592c2ae220a319c7c85ee545c96f">divideCeil</a>(MaxTripCount, A.Width.getFixedValue());</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;    <span class="keyword">auto</span> RTCostB = CostB * <a class="code" href="namespacellvm.html#a1a14592c2ae220a319c7c85ee545c96f">divideCeil</a>(MaxTripCount, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Width.getFixedValue());</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;    <span class="keywordflow">return</span> RTCostA &lt; RTCostB;</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;  }</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160; </div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;  <span class="comment">// Improve estimate for the vector width if it is scalable.</span></div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;  <span class="keywordtype">unsigned</span> EstimatedWidthA = A.Width.getKnownMinValue();</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;  <span class="keywordtype">unsigned</span> EstimatedWidthB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Width.getKnownMinValue();</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;  <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; VScale = getVScaleForTuning()) {</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;    <span class="keywordflow">if</span> (A.Width.isScalable())</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;      EstimatedWidthA *= *VScale;</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Width.isScalable())</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;      EstimatedWidthB *= *VScale;</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;  }</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160; </div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;  <span class="comment">// Assume vscale may be larger than 1 (or the value being tuned for),</span></div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;  <span class="comment">// so that scalable vectorization is slightly favorable over fixed-width</span></div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;  <span class="comment">// vectorization.</span></div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;  <span class="keywordflow">if</span> (A.Width.isScalable() &amp;&amp; !<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Width.isScalable())</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;    <span class="keywordflow">return</span> (CostA * <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Width.getFixedValue()) &lt;= (CostB * EstimatedWidthA);</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160; </div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;  <span class="comment">// To avoid the need for FP division:</span></div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;  <span class="comment">//      (CostA / A.Width) &lt; (CostB / B.Width)</span></div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;  <span class="comment">// &lt;=&gt;  (CostA * B.Width) &lt; (CostB * A.Width)</span></div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;  <span class="keywordflow">return</span> (CostA * EstimatedWidthB) &lt; (CostB * EstimatedWidthA);</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;}</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160; </div>
<div class="line"><a name="l05366"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a31acd7d747f3379a06c123665c2bdb2f"> 5366</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#a31acd7d747f3379a06c123665c2bdb2f">emitInvalidCostRemarks</a>(<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;InstructionVFPair&gt;</a> InvalidCosts,</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;                                   <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>,</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;                                   <a class="code" href="classllvm_1_1Loop.html">Loop</a> *TheLoop) {</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;  <span class="keywordflow">if</span> (InvalidCosts.empty())</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160; </div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;  <span class="comment">// Emit a report of VFs with invalid costs in the loop.</span></div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160; </div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;  <span class="comment">// Group the remarks per instruction, keeping the instruction order from</span></div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;  <span class="comment">// InvalidCosts.</span></div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;  std::map&lt;Instruction *, unsigned&gt; <a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>;</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0;</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Pair : InvalidCosts)</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>.count(Pair.first))</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;      <a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>[Pair.first] = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160; </div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;  <span class="comment">// Sort the list, first on instruction(number) then on VF.</span></div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;  <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">sort</a>(InvalidCosts, [&amp;<a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>](<a class="code" href="namespacellvm.html#a2d1c8f6c08d3d6f2e5f3354027997a29">InstructionVFPair</a> &amp;A, <a class="code" href="namespacellvm.html#a2d1c8f6c08d3d6f2e5f3354027997a29">InstructionVFPair</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>[A.first] != <a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>[<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.first])</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>[A.first] &lt; <a class="code" href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a>[<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.first];</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;    <a class="code" href="structllvm_1_1ElementCountComparator.html">ElementCountComparator</a> ECC;</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;    <span class="keywordflow">return</span> ECC(A.second, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.second);</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;  });</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160; </div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;  <span class="comment">// For a list of ordered instruction-vf pairs:</span></div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;  <span class="comment">//   [(load, vf1), (load, vf2), (store, vf1)]</span></div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;  <span class="comment">// Group the instructions together to emit separate remarks for:</span></div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;  <span class="comment">//   load  (vf1, vf2)</span></div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;  <span class="comment">//   store (vf1)</span></div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;InstructionVFPair&gt;</a>(InvalidCosts);</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;  <span class="keyword">auto</span> Subset = <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;InstructionVFPair&gt;</a>();</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;    <span class="keywordflow">if</span> (Subset.empty())</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;      Subset = <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>.take_front(1);</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160; </div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Subset.front().first;</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160; </div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;    <span class="comment">// If the next instruction is different, or if there are no other pairs,</span></div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;    <span class="comment">// emit a remark for the collated subset. e.g.</span></div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;    <span class="comment">//   [(load, vf1), (load, vf2))]</span></div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;    <span class="comment">// to emit:</span></div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    <span class="comment">//  remark: invalid costs for &#39;load&#39; at VF=(vf, vf2)</span></div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;    <span class="keywordflow">if</span> (Subset == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> || <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>[Subset.size()].first != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;      std::string OutString;</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;      <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(OutString);</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Subset.empty() &amp;&amp; <span class="stringliteral">&quot;Unexpected empty range&quot;</span>);</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Instruction with invalid costs prevented vectorization at VF=(&quot;</span>;</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : Subset)</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (Pair.second == Subset.front().second ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>) &lt;&lt; Pair.second;</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>;</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;      <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot; call to &quot;</span> &lt;&lt; CI-&gt;getCalledFunction()-&gt;getName();</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcodeName();</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.<a class="code" href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;      <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(OutString, <span class="stringliteral">&quot;InvalidCost&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;      <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>.drop_front(Subset.size());</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;      Subset = {};</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;      <span class="comment">// Grow the subset by one element</span></div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;      Subset = <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>.take_front(Subset.size() + 1);</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;  } <span class="keywordflow">while</span> (!<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>.empty());</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;}</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160; </div>
<div class="line"><a name="l05430"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#acf8c965057e0fe8d1056de211337a7ff"> 5430</a></span>&#160;<a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#acf8c965057e0fe8d1056de211337a7ff">LoopVectorizationCostModel::selectVectorizationFactor</a>(</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">ElementCountSet</a> &amp;VFCandidates) {</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ExpectedCost = expectedCost(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1)).first;</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Scalar loop costs: &quot;</span> &lt;&lt; ExpectedCost &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExpectedCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Unexpected invalid cost for scalar loop&quot;</span>);</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VFCandidates.<a class="code" href="classllvm_1_1SmallSet.html#a2a98f19750ba941ce791b75ca6d77e48">count</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1)) &amp;&amp;</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;         <span class="stringliteral">&quot;Expected Scalar VF to be a candidate&quot;</span>);</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> ScalarCost(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1), ExpectedCost,</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;                                       ExpectedCost);</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;  <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> ChosenFactor = ScalarCost;</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160; </div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;  <span class="keywordtype">bool</span> ForceVectorization = Hints-&gt;getForce() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a>;</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;  <span class="keywordflow">if</span> (ForceVectorization &amp;&amp; VFCandidates.<a class="code" href="classllvm_1_1SmallSet.html#afd7c135e18f2d7253d4f8545cd7b1756">size</a>() &gt; 1) {</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;    <span class="comment">// Ignore scalar width, because the user explicitly wants vectorization.</span></div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;    <span class="comment">// Initialize cost to max so that VF = 2 is, at least, chosen during cost</span></div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;    <span class="comment">// evaluation.</span></div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;    ChosenFactor.<a class="code" href="structllvm_1_1VectorizationFactor.html#a048d568675a5cc69c3fb85206882316d">Cost</a> = <a class="code" href="classllvm_1_1InstructionCost.html#a6de26b938774385a0a4fb0d0b2a32d48">InstructionCost::getMax</a>();</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;  }</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160; </div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;InstructionVFPair&gt;</a> InvalidCosts;</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> : VFCandidates) {</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;    <span class="comment">// The cost for scalar VF=1 is already calculated, so ignore it.</span></div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.isScalar())</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160; </div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;    VectorizationCostTy <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = expectedCost(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;InvalidCosts);</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;    <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> Candidate(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first, ScalarCost.<a class="code" href="structllvm_1_1VectorizationFactor.html#a76f716c04dfa813b98e1c112bc642d34">ScalarCost</a>);</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160; </div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;    <span class="keywordtype">unsigned</span> AssumedMinimumVscale = 1;</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; VScale = getVScaleForTuning())</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;      AssumedMinimumVscale = *VScale;</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> =</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;        Candidate.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;            ? Candidate.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() * AssumedMinimumVscale</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;            : Candidate.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Vector loop of width &quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; costs: &quot;</span> &lt;&lt; (Candidate.<a class="code" href="structllvm_1_1VectorizationFactor.html#a048d568675a5cc69c3fb85206882316d">Cost</a> / <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>));</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.isScalable())</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; (assuming a minimum vscale of &quot;</span></div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;                        &lt;&lt; AssumedMinimumVscale &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160; </div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.second &amp;&amp; !ForceVectorization) {</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not considering vector loop of width &quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; because it will not generate any vector instructions.\n&quot;</span>);</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;    }</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160; </div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;    <span class="comment">// If profitable add it to ProfitableVF list.</span></div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;    <span class="keywordflow">if</span> (isMoreProfitable(Candidate, ScalarCost))</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;      ProfitableVFs.push_back(Candidate);</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160; </div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;    <span class="keywordflow">if</span> (isMoreProfitable(Candidate, ChosenFactor))</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;      ChosenFactor = Candidate;</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;  }</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160; </div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#a31acd7d747f3379a06c123665c2bdb2f">emitInvalidCostRemarks</a>(InvalidCosts, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160; </div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopVectorize_8cpp.html#a089aa34b9791fc488d0cd00f40ddb700">EnableCondStoresVectorization</a> &amp;&amp; NumPredStores) {</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(<span class="stringliteral">&quot;There are conditional stores.&quot;</span>,</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;        <span class="stringliteral">&quot;store that is conditionally executed prevents vectorization&quot;</span>,</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;        <span class="stringliteral">&quot;ConditionalStore&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, TheLoop);</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;    ChosenFactor = ScalarCost;</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;  }</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160; </div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<span class="keywordflow">if</span> (ForceVectorization &amp;&amp; !ChosenFactor.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() &amp;&amp;</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;                 !isMoreProfitable(ChosenFactor, ScalarCost)) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;LV: Vectorization seems to be not beneficial, &quot;</span></div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;but was forced by a user.\n&quot;</span>);</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Selecting VF: &quot;</span> &lt;&lt; ChosenFactor.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a> &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;  <span class="keywordflow">return</span> ChosenFactor;</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;}</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160; </div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;<span class="keywordtype">bool</span> LoopVectorizationCostModel::isCandidateForEpilogueVectorization(</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;  <span class="comment">// Cross iteration phis such as reductions need special handling and are</span></div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;  <span class="comment">// currently unsupported.</span></div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>(),</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;             [&amp;](<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi) { return Legal-&gt;isFixedOrderRecurrence(&amp;Phi); }))</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160; </div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;  <span class="comment">// Phis with uses outside of the loop require special handling and are</span></div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;  <span class="comment">// currently unsupported.</span></div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Entry : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">getInductionVars</a>()) {</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;    <span class="comment">// Look for uses of the value of the induction at the last iteration.</span></div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a1673ee57164ca23d9545b629b55e08d2">PostInc</a> = Entry.first-&gt;getIncomingValueForBlock(L.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a1673ee57164ca23d9545b629b55e08d2">PostInc</a>-&gt;users())</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;      <span class="keywordflow">if</span> (!L.<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(cast&lt;Instruction&gt;(U)))</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;    <span class="comment">// Look for uses of penultimate value of the induction.</span></div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : Entry.first-&gt;users())</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;      <span class="keywordflow">if</span> (!L.<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(cast&lt;Instruction&gt;(U)))</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;  }</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160; </div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;  <span class="comment">// Epilogue vectorization code has not been auditted to ensure it handles</span></div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;  <span class="comment">// non-latch exits properly.  It may be fine, but it needs auditted and</span></div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;  <span class="comment">// tested.</span></div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;  <span class="keywordflow">if</span> (L.<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>() != L.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>())</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160; </div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;}</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160; </div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;<span class="keywordtype">bool</span> LoopVectorizationCostModel::isEpilogueVectorizationProfitable(</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;  <span class="comment">// FIXME: We need a much better cost-model to take different parameters such</span></div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;  <span class="comment">// as register pressure, code size increase and cost of extra branches into</span></div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;  <span class="comment">// account. For now we apply a very crude heuristic and only consider loops</span></div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;  <span class="comment">// with vectorization factors larger than a certain value.</span></div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160; </div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;  <span class="comment">// Allow the target to opt out entirely.</span></div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a987fde1294b059921cb381631fa3747b">preferEpilogueVectorization</a>())</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160; </div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;  <span class="comment">// We also consider epilogue vectorization unprofitable for targets that don&#39;t</span></div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;  <span class="comment">// consider interleaving beneficial (eg. MVE).</span></div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a4ed57eef29fa5e077bd059050c293723">getMaxInterleaveFactor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()) &lt;= 1)</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;  <span class="comment">// FIXME: We should consider changing the threshold for scalable</span></div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;  <span class="comment">// vectors to take VScaleForTuning into account.</span></div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() &gt;= <a class="code" href="LoopVectorize_8cpp.html#a00921df4d41f1947bb823562e2983702">EpilogueVectorizationMinVF</a>)</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;}</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160; </div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;<a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a></div>
<div class="line"><a name="l05561"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#af4c3bb293c6f1702f5df150aca8934c3"> 5561</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af4c3bb293c6f1702f5df150aca8934c3">LoopVectorizationCostModel::selectEpilogueVectorizationFactor</a>(</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MainLoopVF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html">LoopVectorizationPlanner</a> &amp;LVP) {</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;  <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> Result = <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>();</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopVectorize_8cpp.html#a757b134f1de2185cb667e6387b73d650">EnableEpilogueVectorization</a>) {</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LEV: Epilogue vectorization is disabled.\n&quot;</span>;);</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;  }</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160; </div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;  <span class="keywordflow">if</span> (!isScalarEpilogueAllowed()) {</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LEV: Unable to vectorize epilogue because no epilogue is &quot;</span></div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;                  <span class="stringliteral">&quot;allowed.\n&quot;</span>;);</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;  }</div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160; </div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;  <span class="comment">// Not really a cost consideration, but check for unsupported cases here to</span></div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;  <span class="comment">// simplify the logic.</span></div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;  <span class="keywordflow">if</span> (!isCandidateForEpilogueVectorization(*TheLoop, MainLoopVF)) {</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LEV: Unable to vectorize epilogue because the loop is &quot;</span></div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;                  <span class="stringliteral">&quot;not a supported candidate.\n&quot;</span>;);</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;  }</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160; </div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a99a503a2d14911c8bb439fea8e49cdf7">EpilogueVectorizationForceVF</a> &gt; 1) {</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LEV: Epilogue vectorization factor is forced.\n&quot;</span>;);</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> ForcedEC = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a class="code" href="LoopVectorize_8cpp.html#a99a503a2d14911c8bb439fea8e49cdf7">EpilogueVectorizationForceVF</a>);</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;    <span class="keywordflow">if</span> (LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#adce80172b05bc0a227fbd5e3d7bb80f2">hasPlanWithVF</a>(ForcedEC))</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;      <span class="keywordflow">return</span> {ForcedEC, 0, 0};</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;LEV: Epilogue vectorization forced factor is not viable.\n&quot;</span>;);</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;      <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;    }</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;  }</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160; </div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;  <span class="keywordflow">if</span> (TheLoop-&gt;getHeader()-&gt;getParent()-&gt;hasOptSize() ||</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;      TheLoop-&gt;getHeader()-&gt;getParent()-&gt;hasMinSize()) {</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;LEV: Epilogue vectorization skipped due to opt for size.\n&quot;</span>;);</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;  }</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160; </div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;  <span class="keywordflow">if</span> (!isEpilogueVectorizationProfitable(MainLoopVF)) {</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LEV: Epilogue vectorization is not profitable for &quot;</span></div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;                         <span class="stringliteral">&quot;this loop\n&quot;</span>);</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;  }</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160; </div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;  <span class="comment">// If MainLoopVF = vscale x 2, and vscale is expected to be 4, then we know</span></div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;  <span class="comment">// the main loop handles 8 lanes per iteration. We could still benefit from</span></div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;  <span class="comment">// vectorizing the epilogue loop with VF=4.</span></div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> EstimatedRuntimeVF = MainLoopVF;</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;  <span class="keywordflow">if</span> (MainLoopVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;    EstimatedRuntimeVF = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(MainLoopVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;    <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; VScale = getVScaleForTuning())</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;      EstimatedRuntimeVF *= *VScale;</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;  }</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160; </div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;NextVF : ProfitableVFs)</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;    <span class="keywordflow">if</span> (((!NextVF.Width.isScalable() &amp;&amp; MainLoopVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp;</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;          <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(NextVF.Width, EstimatedRuntimeVF)) ||</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;         <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(NextVF.Width, MainLoopVF)) &amp;&amp;</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;        (Result.Width.isScalar() || isMoreProfitable(NextVF, Result)) &amp;&amp;</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;        LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#adce80172b05bc0a227fbd5e3d7bb80f2">hasPlanWithVF</a>(NextVF.Width))</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;      Result = NextVF;</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160; </div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;  <span class="keywordflow">if</span> (Result != <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>())</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LEV: Vectorizing epilogue loop with VF = &quot;</span></div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;                      &lt;&lt; Result.Width &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;}</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160; </div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;std::pair&lt;unsigned, unsigned&gt;</div>
<div class="line"><a name="l05637"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a1fa63b37ad2ac06f289e9962a3703e9e"> 5637</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a1fa63b37ad2ac06f289e9962a3703e9e">LoopVectorizationCostModel::getSmallestAndWidestTypes</a>() {</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;  <span class="keywordtype">unsigned</span> MinWidth = -1U;</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;  <span class="keywordtype">unsigned</span> MaxWidth = 8;</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = TheFunction-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a82dd10b626a629b9bb7d32d53a8e0884">getDataLayout</a>();</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;  <span class="comment">// For in-loop reductions, no element types are added to ElementTypesInLoop</span></div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;  <span class="comment">// if there are no loads/stores in the loop. In this case, check through the</span></div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;  <span class="comment">// reduction variables to determine the maximum width.</span></div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;  <span class="keywordflow">if</span> (ElementTypesInLoop.empty() &amp;&amp; !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a8da97c44f514ad1ae9ccf4518b0f88aa">empty</a>()) {</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;    <span class="comment">// Reset MaxWidth so that we can find the smallest type used by recurrences</span></div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;    <span class="comment">// in the loop.</span></div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;    MaxWidth = -1U;</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;PhiDescriptorPair : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>()) {</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc = PhiDescriptorPair.second;</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;      <span class="comment">// When finding the min width used by the recurrence we need to account</span></div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;      <span class="comment">// for casts on the input operands of the recurrence.</span></div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;      MaxWidth = std::min&lt;unsigned&gt;(</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;          MaxWidth, std::min&lt;unsigned&gt;(</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;                        RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a5f64b98dd7b1371ddda6c24bf2163be6">getMinWidthCastToRecurrenceTypeInBits</a>(),</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;                        RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()));</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    }</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> : ElementTypesInLoop) {</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;      MinWidth = std::min&lt;unsigned&gt;(</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;          MinWidth, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(<a class="code" href="classT.html">T</a>-&gt;getScalarType()).getFixedValue());</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;      MaxWidth = std::max&lt;unsigned&gt;(</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;          MaxWidth, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(<a class="code" href="classT.html">T</a>-&gt;getScalarType()).getFixedValue());</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;    }</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;  }</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;  <span class="keywordflow">return</span> {MinWidth, MaxWidth};</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;}</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160; </div>
<div class="line"><a name="l05668"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a06f5d9725a2b1f7b06e8bf51f7d31417"> 5668</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a06f5d9725a2b1f7b06e8bf51f7d31417">LoopVectorizationCostModel::collectElementTypesForWidening</a>() {</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;  ElementTypesInLoop.clear();</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;  <span class="comment">// For each block.</span></div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks()) {</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;    <span class="comment">// For each instruction in the loop.</span></div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;instructionsWithoutDebug()) {</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160; </div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;      <span class="comment">// Skip ignored values.</span></div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;      <span class="keywordflow">if</span> (ValuesToIgnore.count(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160; </div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;      <span class="comment">// Only examine Loads, Stores and PHINodes.</span></div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160; </div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;      <span class="comment">// Examine PHI nodes that are reduction variables. Update the type to</span></div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;      <span class="comment">// account for the recurrence type.</span></div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5c26e54d871c42c42dc62f9d449c633a">isReductionVariable</a>(PN))</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc =</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(PN)-&gt;second;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#adbab10940d6653d68e6aac48082acb65">PreferInLoopReductions</a> || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">useOrderedReductions</a>(RdxDesc) ||</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;            <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1a2b30bdeffa3fb4a4fd881e25d01817">preferInLoopReduction</a>(RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>(),</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;                                      RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>(),</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;                                      <a class="code" href="structllvm_1_1TargetTransformInfo_1_1ReductionFlags.html">TargetTransformInfo::ReductionFlags</a>()))</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;        <a class="code" href="classT.html">T</a> = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>();</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;      }</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160; </div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;      <span class="comment">// Examine the stored values.</span></div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;        <a class="code" href="classT.html">T</a> = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getValueOperand()-&gt;getType();</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160; </div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classT.html">T</a>-&gt;isSized() &amp;&amp;</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;             <span class="stringliteral">&quot;Expected the load/store/recurrence type to be sized&quot;</span>);</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160; </div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;      ElementTypesInLoop.insert(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    }</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;  }</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;}</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160; </div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;<span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l05712"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#af9f62350ccdebd24858be552f3fc051c"> 5712</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af9f62350ccdebd24858be552f3fc051c">LoopVectorizationCostModel::selectInterleaveCount</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;                                                  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopCost) {</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;  <span class="comment">// -- The interleave heuristics --</span></div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;  <span class="comment">// We interleave the loop in order to expose ILP and reduce the loop overhead.</span></div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;  <span class="comment">// There are many micro-architectural considerations that we can&#39;t predict</span></div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;  <span class="comment">// at this level. For example, frontend pressure (on decode or fetch) due to</span></div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;  <span class="comment">// code size, or the number and capabilities of the execution ports.</span></div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;  <span class="comment">// We use the following heuristics to select the interleave count:</span></div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;  <span class="comment">// 1. If the code has reductions, then we interleave to break the cross</span></div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;  <span class="comment">// iteration dependency.</span></div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;  <span class="comment">// 2. If the loop is really small, then we interleave to reduce the loop</span></div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;  <span class="comment">// overhead.</span></div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;  <span class="comment">// 3. We don&#39;t interleave if we think that we will spill registers to memory</span></div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;  <span class="comment">// due to the increased register pressure.</span></div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160; </div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;  <span class="keywordflow">if</span> (!isScalarEpilogueAllowed())</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160; </div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;  <span class="comment">// We used the distance for the interleave count.</span></div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a37be3438527bbb5e58f5307500c332c5">getMaxSafeDepDistBytes</a>() != -1U)</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160; </div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;  <span class="keyword">auto</span> BestKnownTC = <a class="code" href="LoopVectorize_8cpp.html#a036986770115ea3dbe00153cbeea478e">getSmallBestKnownTC</a>(*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), TheLoop);</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasReductions = !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a8da97c44f514ad1ae9ccf4518b0f88aa">empty</a>();</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;  <span class="comment">// Do not interleave loops with a relatively small known or estimated trip</span></div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;  <span class="comment">// count. But we will interleave when InterleaveSmallLoopScalarReduction is</span></div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;  <span class="comment">// enabled, and the code has scalar reductions(HasReductions &amp;&amp; VF = 1),</span></div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;  <span class="comment">// because with the above conditions interleaving can expose ILP and break</span></div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;  <span class="comment">// cross iteration dependences for reductions.</span></div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;  <span class="keywordflow">if</span> (BestKnownTC &amp;&amp; (*BestKnownTC &lt; <a class="code" href="LoopVectorize_8cpp.html#a7051c657436b4eaefa4d4d00bea4f5af">TinyTripCountInterleaveThreshold</a>) &amp;&amp;</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;      !(<a class="code" href="LoopVectorize_8cpp.html#a5674da6dbea803c20e13f6094e8781cd">InterleaveSmallLoopScalarReduction</a> &amp;&amp; HasReductions &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()))</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160; </div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;  <span class="comment">// If we did not calculate the cost for VF (because the user selected the VF)</span></div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;  <span class="comment">// then we calculate the cost of VF here.</span></div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;  <span class="keywordflow">if</span> (LoopCost == 0) {</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    LoopCost = expectedCost(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>).first;</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoopCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Expected to have chosen a VF with valid cost&quot;</span>);</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160; </div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;    <span class="comment">// Loop body is free and there is no need for interleaving.</span></div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    <span class="keywordflow">if</span> (LoopCost == 0)</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;  }</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160; </div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html">RegisterUsage</a> R = calculateRegisterUsage({<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>})[0];</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;  <span class="comment">// We divide by these constants so assume that we have at least one</span></div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;  <span class="comment">// instruction that uses at least one register.</span></div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; pair : R.MaxLocalUsers) {</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;    pair.second = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(pair.second, 1U);</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;  }</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160; </div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;  <span class="comment">// We calculate the interleave count using the following formula.</span></div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;  <span class="comment">// Subtract the number of loop invariants from the number of available</span></div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;  <span class="comment">// registers. These registers are used by all of the interleaved instances.</span></div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;  <span class="comment">// Next, divide the remaining registers by the number of registers that is</span></div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;  <span class="comment">// required by the loop, in order to estimate how many parallel instances</span></div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;  <span class="comment">// fit without causing spills. All of this is rounded down if necessary to be</span></div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;  <span class="comment">// a power of two. We want power of two interleave count to simplify any</span></div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;  <span class="comment">// addressing operations or alignment considerations.</span></div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;  <span class="comment">// We also want power of two interleave counts to ensure that the induction</span></div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;  <span class="comment">// variable of the vector loop wraps to zero, when tail is folded by masking;</span></div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;  <span class="comment">// this currently happens when OptForSize, in which case IC is set to 1 above.</span></div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;  <span class="keywordtype">unsigned</span> IC = UINT_MAX;</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160; </div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; pair : R.MaxLocalUsers) {</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;    <span class="keywordtype">unsigned</span> TargetNumRegisters = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aae0e8ca52658f54e5cc6214eb1a291ef">getNumberOfRegisters</a>(pair.first);</div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: The target has &quot;</span> &lt;&lt; TargetNumRegisters</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; registers of &quot;</span></div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;                      &lt;&lt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a97503ae3ef00c5f1eaffa5bbeb0a4357">getRegisterClassName</a>(pair.first) &lt;&lt; <span class="stringliteral">&quot; register class\n&quot;</span>);</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()) {</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#ae52dda6f96edd7c80db048491bd8af99">ForceTargetNumScalarRegs</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;        TargetNumRegisters = <a class="code" href="LoopVectorize_8cpp.html#ae52dda6f96edd7c80db048491bd8af99">ForceTargetNumScalarRegs</a>;</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a560142fc3cf3a8e07fa9765f94bc7a4e">ForceTargetNumVectorRegs</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;        TargetNumRegisters = <a class="code" href="LoopVectorize_8cpp.html#a560142fc3cf3a8e07fa9765f94bc7a4e">ForceTargetNumVectorRegs</a>;</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    }</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    <span class="keywordtype">unsigned</span> MaxLocalUsers = pair.second;</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;    <span class="keywordtype">unsigned</span> LoopInvariantRegs = 0;</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    <span class="keywordflow">if</span> (R.LoopInvariantRegs.find(pair.first) != R.LoopInvariantRegs.end())</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;      LoopInvariantRegs = R.LoopInvariantRegs[pair.first];</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160; </div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;    <span class="keywordtype">unsigned</span> TmpIC = <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>((TargetNumRegisters - LoopInvariantRegs) /</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;                                     MaxLocalUsers);</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;    <span class="comment">// Don&#39;t count the induction variable as interleaved.</span></div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a611e3975b0c17413d87c6c5ed2e121ab">EnableIndVarRegisterHeur</a>) {</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;      TmpIC = <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>((TargetNumRegisters - LoopInvariantRegs - 1) /</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;                              <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(1U, (MaxLocalUsers - 1)));</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    }</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160; </div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    IC = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(IC, TmpIC);</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;  }</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160; </div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;  <span class="comment">// Clamp the interleave ranges to reasonable counts.</span></div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;  <span class="keywordtype">unsigned</span> MaxInterleaveCount =</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a4ed57eef29fa5e077bd059050c293723">getMaxInterleaveFactor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160; </div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;  <span class="comment">// Check if the user has overridden the max.</span></div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()) {</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a99463cf52e27f46b31ba55f306e9a8d8">ForceTargetMaxScalarInterleaveFactor</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;      MaxInterleaveCount = <a class="code" href="LoopVectorize_8cpp.html#a99463cf52e27f46b31ba55f306e9a8d8">ForceTargetMaxScalarInterleaveFactor</a>;</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#aadb00ad909c8ae2cf77f5fdf0422eda6">ForceTargetMaxVectorInterleaveFactor</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;      MaxInterleaveCount = <a class="code" href="LoopVectorize_8cpp.html#aadb00ad909c8ae2cf77f5fdf0422eda6">ForceTargetMaxVectorInterleaveFactor</a>;</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;  }</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160; </div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;  <span class="comment">// If trip count is known or estimated compile time constant, limit the</span></div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;  <span class="comment">// interleave count to be less than the trip count divided by VF, provided it</span></div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;  <span class="comment">// is at least 1.</span></div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;  <span class="comment">// For scalable vectors we can&#39;t know if interleaving is beneficial. It may</span></div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;  <span class="comment">// not be beneficial for small loops if none of the lanes in the second vector</span></div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;  <span class="comment">// iterations is enabled. However, for larger loops, there is likely to be a</span></div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;  <span class="comment">// similar benefit as for fixed-width vectors. For now, we choose to leave</span></div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;  <span class="comment">// the InterleaveCount as if vscale is &#39;1&#39;, although if some information about</span></div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;  <span class="comment">// the vector is known (e.g. min vector size), we can make a better decision.</span></div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;  <span class="keywordflow">if</span> (BestKnownTC) {</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;    MaxInterleaveCount =</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;        <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(*BestKnownTC / <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>(), MaxInterleaveCount);</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;    <span class="comment">// Make sure MaxInterleaveCount is greater than 0.</span></div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;    MaxInterleaveCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(1u, MaxInterleaveCount);</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;  }</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160; </div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaxInterleaveCount &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;         <span class="stringliteral">&quot;Maximum interleave count must be greater than 0&quot;</span>);</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160; </div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;  <span class="comment">// Clamp the calculated IC to be between the 1 and the max interleave count</span></div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;  <span class="comment">// that the target and trip count allows.</span></div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;  <span class="keywordflow">if</span> (IC &gt; MaxInterleaveCount)</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;    IC = MaxInterleaveCount;</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;    <span class="comment">// Make sure IC is greater than 0.</span></div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;    IC = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(1u, IC);</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160; </div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IC &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Interleave count must be greater than 0.&quot;</span>);</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160; </div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;  <span class="comment">// Interleave if we vectorized this loop and there is a reduction that could</span></div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;  <span class="comment">// benefit from interleaving.</span></div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; HasReductions) {</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving because of reductions.\n&quot;</span>);</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;    <span class="keywordflow">return</span> IC;</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;  }</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160; </div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;  <span class="comment">// For any scalar loop that either requires runtime checks or predication we</span></div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;  <span class="comment">// are better off leaving this to the unroller. Note that if we&#39;ve already</span></div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;  <span class="comment">// vectorized the loop we will have done the runtime check and so interleaving</span></div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;  <span class="comment">// won&#39;t require further checks.</span></div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;  <span class="keywordtype">bool</span> ScalarInterleavingRequiresPredication =</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;      (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() &amp;&amp; <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(TheLoop-&gt;blocks(), [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;         return Legal-&gt;blockNeedsPredication(BB);</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;       }));</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;  <span class="keywordtype">bool</span> ScalarInterleavingRequiresRuntimePointerCheck =</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;      (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a676aa85125366c5b7819845a19baeef0">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a177df4fcdf758fb57ca59102c15d30c3">Need</a>);</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160; </div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;  <span class="comment">// We want to interleave small loops in order to reduce the loop overhead and</span></div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;  <span class="comment">// potentially expose ILP opportunities.</span></div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Loop cost is &quot;</span> &lt;&lt; LoopCost &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;LV: IC is &quot;</span> &lt;&lt; IC &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;LV: VF is &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> AggressivelyInterleaveReductions =</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a12f25864d2ad4955cb285d871a36345b">enableAggressiveInterleaving</a>(HasReductions);</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;  <span class="keywordflow">if</span> (!ScalarInterleavingRequiresRuntimePointerCheck &amp;&amp;</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;      !ScalarInterleavingRequiresPredication &amp;&amp; LoopCost &lt; <a class="code" href="LoopVectorize_8cpp.html#aa26872ae2e00e13535d1a50baa9f5b5e">SmallLoopCost</a>) {</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;    <span class="comment">// We assume that the cost overhead is 1 and we use the cost model</span></div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;    <span class="comment">// to estimate the cost of the loop and interleave until the cost of the</span></div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;    <span class="comment">// loop overhead is about 5% of the cost of the loop.</span></div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;    <span class="keywordtype">unsigned</span> SmallIC = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(IC, (<span class="keywordtype">unsigned</span>)llvm::bit_floor&lt;uint64_t&gt;(</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;                                        <a class="code" href="LoopVectorize_8cpp.html#aa26872ae2e00e13535d1a50baa9f5b5e">SmallLoopCost</a> / *LoopCost.<a class="code" href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">getValue</a>()));</div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160; </div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;    <span class="comment">// Interleave until store/load ports (estimated by max interleave count) are</span></div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;    <span class="comment">// saturated.</span></div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;    <span class="keywordtype">unsigned</span> NumStores = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a0f59a9c87ede76fde54388f16562a930">getNumStores</a>();</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;    <span class="keywordtype">unsigned</span> NumLoads = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#aa9d35bb02e49c20fcafc8d179559da10">getNumLoads</a>();</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;    <span class="keywordtype">unsigned</span> StoresIC = IC / (NumStores ? NumStores : 1);</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;    <span class="keywordtype">unsigned</span> LoadsIC = IC / (NumLoads ? NumLoads : 1);</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160; </div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;    <span class="comment">// There is little point in interleaving for reductions containing selects</span></div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;    <span class="comment">// and compares when VF=1 since it may just create more overhead than it&#39;s</span></div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;    <span class="comment">// worth for loops with small trip counts. This is because we still have to</span></div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;    <span class="comment">// do the final reduction after the loop.</span></div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;    <span class="keywordtype">bool</span> HasSelectCmpReductions =</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;        HasReductions &amp;&amp;</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;        <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>(), [&amp;](<span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;          const RecurrenceDescriptor &amp;RdxDesc = Reduction.second;</div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;          return RecurrenceDescriptor::isSelectCmpRecurrenceKind(</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;              RdxDesc.getRecurrenceKind());</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;        });</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;    <span class="keywordflow">if</span> (HasSelectCmpReductions) {</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not interleaving select-cmp reductions.\n&quot;</span>);</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;    }</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160; </div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;    <span class="comment">// If we have a scalar reduction (vector reductions are already dealt with</span></div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;    <span class="comment">// by this point), we can increase the critical path length if the loop</span></div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;    <span class="comment">// we&#39;re interleaving is inside another loop. For tree-wise reductions</span></div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;    <span class="comment">// set the limit to 2, and for ordered reductions it&#39;s best to disable</span></div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;    <span class="comment">// interleaving entirely.</span></div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;    <span class="keywordflow">if</span> (HasReductions &amp;&amp; TheLoop-&gt;getLoopDepth() &gt; 1) {</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;      <span class="keywordtype">bool</span> HasOrderedReductions =</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;          <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>(), [&amp;](<span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;            const RecurrenceDescriptor &amp;RdxDesc = Reduction.second;</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;            return RdxDesc.isOrdered();</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;          });</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;      <span class="keywordflow">if</span> (HasOrderedReductions) {</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not interleaving scalar ordered reductions.\n&quot;</span>);</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;      }</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160; </div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="LoopVectorize_8cpp.html#a4ef03b8373b1c532fec839db60118ff5">MaxNestedScalarReductionIC</a>);</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;      SmallIC = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(SmallIC, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;      StoresIC = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(StoresIC, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;      LoadsIC = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(LoadsIC, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;    }</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160; </div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a7a7e3f00efc52b3aedc91687d425617b">EnableLoadStoreRuntimeInterleave</a> &amp;&amp;</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;        <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(StoresIC, LoadsIC) &gt; SmallIC) {</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving to saturate store or load ports.\n&quot;</span>);</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(StoresIC, LoadsIC);</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;    }</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160; </div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;    <span class="comment">// If there are scalar reductions and TTI has enabled aggressive</span></div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;    <span class="comment">// interleaving for reductions, we will interleave to expose ILP.</span></div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a5674da6dbea803c20e13f6094e8781cd">InterleaveSmallLoopScalarReduction</a> &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() &amp;&amp;</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;        AggressivelyInterleaveReductions) {</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving to expose ILP.\n&quot;</span>);</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;      <span class="comment">// Interleave no less than SmallIC but not as aggressive as the normal IC</span></div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;      <span class="comment">// to satisfy the rare situation when resources are too limited.</span></div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(IC / 2, SmallIC);</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving to reduce branch cost.\n&quot;</span>);</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;      <span class="keywordflow">return</span> SmallIC;</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;    }</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;  }</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160; </div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;  <span class="comment">// Interleave if this is a large loop (small loops are already dealt with by</span></div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;  <span class="comment">// this point) that could benefit from interleaving.</span></div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;  <span class="keywordflow">if</span> (AggressivelyInterleaveReductions) {</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving to expose ILP.\n&quot;</span>);</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;    <span class="keywordflow">return</span> IC;</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;  }</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160; </div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not Interleaving.\n&quot;</span>);</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;}</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160; </div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoopVectorizationCostModel::RegisterUsage, 8&gt;</a></div>
<div class="line"><a name="l05960"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a91466f7a82e967ed765e6d876415a3b7"> 5960</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a91466f7a82e967ed765e6d876415a3b7">LoopVectorizationCostModel::calculateRegisterUsage</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ElementCount&gt;</a> VFs) {</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;  <span class="comment">// This function calculates the register usage by measuring the highest number</span></div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;  <span class="comment">// of values that are alive at a single location. Obviously, this is a very</span></div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;  <span class="comment">// rough estimation. We scan the loop in a topological order in order and</span></div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;  <span class="comment">// assign a number to each instruction. We use RPO to ensure that defs are</span></div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;  <span class="comment">// met before their users. We assume that each instruction that has in-loop</span></div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;  <span class="comment">// users starts an interval. We record every time that an in-loop value is</span></div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;  <span class="comment">// used, so we have a list of the first and last occurrences of each</span></div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;  <span class="comment">// instruction. Next, we transpose this data structure into a multi map that</span></div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;  <span class="comment">// holds the list of intervals that *end* at a specific location. This multi</span></div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;  <span class="comment">// map allows us to perform a linear search. We scan the instructions linearly</span></div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;  <span class="comment">// and record each time that a new interval starts, by placing it in a set.</span></div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;  <span class="comment">// If we find this value in the multi-map then we remove it from the set.</span></div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;  <span class="comment">// The max register usage is the maximum size of the set.</span></div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;  <span class="comment">// We also search for instructions that are defined outside the loop, but are</span></div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;  <span class="comment">// used inside the loop. We need this number separately from the max-interval</span></div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;  <span class="comment">// usage number because when we unroll, loop-invariant values do not take</span></div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;  <span class="comment">// more register.</span></div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;  <a class="code" href="classllvm_1_1LoopBlocksDFS.html">LoopBlocksDFS</a> DFS(TheLoop);</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;  DFS.<a class="code" href="classllvm_1_1LoopBlocksDFS.html#ab38fc97602eaec1838f2b86624001ae1">perform</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160; </div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html">RegisterUsage</a> RU;</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160; </div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;  <span class="comment">// Each &#39;key&#39; in the map opens a new interval. The values</span></div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;  <span class="comment">// of the map are the index of the &#39;last seen&#39; usage of the</span></div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;  <span class="comment">// instruction that is the key.</span></div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1IntervalMap.html">IntervalMap</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, unsigned&gt;</a>;</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160; </div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;  <span class="comment">// Maps instruction to its index.</span></div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 64&gt;</a> IdxToInstr;</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;  <span class="comment">// Marks the end of each interval.</span></div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;  <a class="code" href="classllvm_1_1IntervalMap.html">IntervalMap</a> EndPoint;</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;  <span class="comment">// Saves the list of instruction indices that are used in the loop.</span></div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a> Ends;</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;  <span class="comment">// Saves the list of values that are used in the loop but are defined outside</span></div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;  <span class="comment">// the loop (not including non-instruction values such as arguments and</span></div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;  <span class="comment">// constants).</span></div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 8&gt;</a> LoopInvariants;</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160; </div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(DFS.<a class="code" href="classllvm_1_1LoopBlocksDFS.html#a003fe6215d300fc9720b1b056cdf4c23">beginRPO</a>(), DFS.<a class="code" href="classllvm_1_1LoopBlocksDFS.html#aeebda6b0288bea7cd706111624ca73f6">endRPO</a>())) {</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;instructionsWithoutDebug()) {</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;      IdxToInstr.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160; </div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;      <span class="comment">// Save the end location of each USE.</span></div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operands()) {</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;        <span class="keyword">auto</span> *Instr = dyn_cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160; </div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;        <span class="comment">// Ignore non-instruction values such as arguments, constants, etc.</span></div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;        <span class="comment">// FIXME: Might need some motivation why these values are ignored. If</span></div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;        <span class="comment">// for example an argument is used inside the loop it will increase the</span></div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;        <span class="comment">// register pressure (so shouldn&#39;t we add it to LoopInvariants).</span></div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;        <span class="keywordflow">if</span> (!Instr)</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160; </div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;        <span class="comment">// If this instruction is outside the loop then record it and continue.</span></div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;        <span class="keywordflow">if</span> (!TheLoop-&gt;contains(Instr)) {</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;          LoopInvariants.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Instr);</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;        }</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160; </div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;        <span class="comment">// Overwrite previous end points.</span></div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;        EndPoint[Instr] = IdxToInstr.size();</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;        Ends.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Instr);</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;      }</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;    }</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;  }</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160; </div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;  <span class="comment">// Saves the list of intervals that end with the index in &#39;key&#39;.</span></div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacellvm_1_1SPIRV.html#a2337541bc5463462ac9dd28b96875f45">InstrList</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 2&gt;</a>;</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, InstrList&gt;</a> TransposeEnds;</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160; </div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;  <span class="comment">// Transpose the EndPoints to a list of values that end at each index.</span></div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1Interval.html">Interval</a> : EndPoint)</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;    TransposeEnds[<a class="code" href="classllvm_1_1Interval.html">Interval</a>.second].push_back(<a class="code" href="classllvm_1_1Interval.html">Interval</a>.first);</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160; </div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a> OpenIntervals;</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegisterUsage, 8&gt;</a> RUs(VFs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallMapVector&lt;unsigned, unsigned, 4&gt;</a>, 8&gt; MaxUsages(VFs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160; </div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): Calculating max register usage:\n&quot;</span>);</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160; </div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;TTICapture = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a238e95d82d095fec9241f2f5b81db3c5">TTI</a>;</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;  <span class="keyword">auto</span> GetRegUsage = [&amp;TTICapture](<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">unsigned</span> {</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;    <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ac9542ee3a689ae9574b7807c96107d89">isTokenTy</a>() || !<a class="code" href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">VectorType::isValidElementType</a>(Ty))</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;    <span class="keywordflow">return</span> TTICapture.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5a6989eb41033f67be080858c27d840a">getRegUsageForType</a>(<a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Ty, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;  };</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160; </div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a> = IdxToInstr.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = IdxToInstr[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160; </div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;    <span class="comment">// Remove all of the instructions that end at this location.</span></div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;    <a class="code" href="namespacellvm_1_1SPIRV.html#a2337541bc5463462ac9dd28b96875f45">InstrList</a> &amp;<a class="code" href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a> = TransposeEnds[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a> : <a class="code" href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a>)</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;      OpenIntervals.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>);</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160; </div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;    <span class="comment">// Ignore instructions that are never used within the loop.</span></div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;    <span class="keywordflow">if</span> (!Ends.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160; </div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;    <span class="comment">// Skip ignored values.</span></div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;    <span class="keywordflow">if</span> (ValuesToIgnore.count(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160; </div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;    <span class="comment">// For each VF find the maximum usage of registers.</span></div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = VFs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;      <span class="comment">// Count the number of registers used, per register class, given all open</span></div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;      <span class="comment">// intervals.</span></div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;      <span class="comment">// Note that elements in this SmallMapVector will be default constructed</span></div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;      <span class="comment">// as 0. So we can use &quot;RegUsage[ClassID] += n&quot; in the code below even if</span></div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;      <span class="comment">// there is no previous entry for ClassID.</span></div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;      <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;unsigned, unsigned, 4&gt;</a> <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336">RegUsage</a>;</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160; </div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;      <span class="keywordflow">if</span> (VFs[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>].<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">isScalar</a>()) {</div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : OpenIntervals) {</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;          <span class="keywordtype">unsigned</span> ClassID =</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;              <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">getRegisterClassForType</a>(<span class="keyword">false</span>, Inst-&gt;getType());</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;          <span class="comment">// FIXME: The target might use more than one register for the type</span></div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;          <span class="comment">// even in the scalar case.</span></div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;          <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336">RegUsage</a>[ClassID] += 1;</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;        }</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;        collectUniformsAndScalars(VFs[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>]);</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : OpenIntervals) {</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;          <span class="comment">// Skip ignored values for VF &gt; 1.</span></div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;          <span class="keywordflow">if</span> (VecValuesToIgnore.count(Inst))</div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;          <span class="keywordflow">if</span> (isScalarAfterVectorization(Inst, VFs[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>])) {</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;            <span class="keywordtype">unsigned</span> ClassID =</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;                <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">getRegisterClassForType</a>(<span class="keyword">false</span>, Inst-&gt;getType());</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;            <span class="comment">// FIXME: The target might use more than one register for the type</span></div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;            <span class="comment">// even in the scalar case.</span></div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;            <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336">RegUsage</a>[ClassID] += 1;</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;            <span class="keywordtype">unsigned</span> ClassID =</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;                <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">getRegisterClassForType</a>(<span class="keyword">true</span>, Inst-&gt;getType());</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;            <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336">RegUsage</a>[ClassID] += GetRegUsage(Inst-&gt;getType(), VFs[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>]);</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;          }</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;        }</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;      }</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160; </div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; pair : <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336">RegUsage</a>) {</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;        <span class="keyword">auto</span> &amp;Entry = MaxUsages[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>][pair.first];</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;        Entry = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Entry, pair.second);</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;      }</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;    }</div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160; </div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): At #&quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; Interval # &quot;</span></div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;                      &lt;&lt; OpenIntervals.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160; </div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;    <span class="comment">// Add the current instruction to the list of open intervals.</span></div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;    OpenIntervals.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;  }</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160; </div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = VFs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;    <span class="comment">// Note that elements in this SmallMapVector will be default constructed</span></div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;    <span class="comment">// as 0. So we can use &quot;Invariant[ClassID] += n&quot; in the code below even if</span></div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;    <span class="comment">// there is no previous entry for ClassID.</span></div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;    <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;unsigned, unsigned, 4&gt;</a> Invariant;</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160; </div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : LoopInvariants) {</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;      <span class="comment">// FIXME: The target might use more than one register for the type</span></div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;      <span class="comment">// even in the scalar case.</span></div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;      <span class="keywordtype">unsigned</span> Usage =</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;          VFs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].isScalar() ? 1 : GetRegUsage(Inst-&gt;getType(), VFs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;      <span class="keywordtype">unsigned</span> ClassID =</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">getRegisterClassForType</a>(VFs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">isVector</a>(), Inst-&gt;getType());</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;      Invariant[ClassID] += Usage;</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;    }</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160; </div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): VF = &quot;</span> &lt;&lt; VFs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): Found max usage: &quot;</span> &lt;&lt; MaxUsages[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].size()</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; item\n&quot;</span>;</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;pair : MaxUsages[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): RegisterClass: &quot;</span></div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;               &lt;&lt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a97503ae3ef00c5f1eaffa5bbeb0a4357">getRegisterClassName</a>(pair.first) &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; pair.second</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; registers\n&quot;</span>;</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;      }</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): Found invariant usage: &quot;</span> &lt;&lt; Invariant.<a class="code" href="classllvm_1_1MapVector.html#acf4c09e1f30cdd4e0b5b1b8a236ead34">size</a>()</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; item\n&quot;</span>;</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;pair : Invariant) {</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV(REG): RegisterClass: &quot;</span></div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;               &lt;&lt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a97503ae3ef00c5f1eaffa5bbeb0a4357">getRegisterClassName</a>(pair.first) &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; pair.second</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; registers\n&quot;</span>;</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;      }</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;    });</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160; </div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;    RU.<a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a12f1d225b87b9cb583e78478d9ef3b9c">LoopInvariantRegs</a> = Invariant;</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;    RU.<a class="code" href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a0ae3b197ca92417681a2865b605e56a9">MaxLocalUsers</a> = MaxUsages[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;    RUs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = RU;</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;  }</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160; </div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;  <span class="keywordflow">return</span> RUs;</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;}</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160; </div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;<span class="keywordtype">bool</span> LoopVectorizationCostModel::useEmulatedMaskMemRefHack(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;                                                           <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;  <span class="comment">// TODO: Cost model for emulated masked load/store is completely</span></div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;  <span class="comment">// broken. This hack guides the cost model to use an artificially</span></div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;  <span class="comment">// high enough value to practically disable vectorization with such</span></div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;  <span class="comment">// operations, except where previously deployed legality hack allowed</span></div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;  <span class="comment">// using very low cost values. This is to avoid regressions coming simply</span></div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;  <span class="comment">// from moving &quot;masked load/store&quot; check from legality to cost model.</span></div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;  <span class="comment">// Masked Load/Gather emulation was previously never allowed.</span></div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;  <span class="comment">// Limited number of Masked Store/Scatter emulation was allowed.</span></div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isPredicatedInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;         <span class="stringliteral">&quot;Expecting a scalar emulated instruction&quot;</span>);</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;  <span class="keywordflow">return</span> isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;         (isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;          NumPredStores &gt; <a class="code" href="LoopVectorize_8cpp.html#a183a358204f179aa874471fa86e06068">NumberOfStoresToPredicate</a>);</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;}</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160; </div>
<div class="line"><a name="l06173"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#afcbf4a19be078644e784b539379d59b7"> 6173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#afcbf4a19be078644e784b539379d59b7">LoopVectorizationCostModel::collectInstsToScalarize</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;  <span class="comment">// If we aren&#39;t vectorizing the loop, or if we&#39;ve already collected the</span></div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;  <span class="comment">// instructions to scalarize, there&#39;s nothing to do. Collection may already</span></div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;  <span class="comment">// have occurred if we have a user-selected VF and are now computing the</span></div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;  <span class="comment">// expected cost for interleaving.</span></div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">isZero</a>() ||</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;      InstsToScalarize.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) != InstsToScalarize.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160; </div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;  <span class="comment">// Initialize a mapping for VF in InstsToScalalarize. If we find that it&#39;s</span></div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;  <span class="comment">// not profitable to scalarize any instructions, the presence of VF in the</span></div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;  <span class="comment">// map will indicate that we&#39;ve analyzed it already.</span></div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">ScalarCostsTy</a> &amp;ScalarCostsVF = InstsToScalarize[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>];</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160; </div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;  PredicatedBBsAfterVectorization[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160; </div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;  <span class="comment">// Find all the instructions that are scalar with predication in the loop and</span></div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;  <span class="comment">// determine if it would be better to not if-convert the blocks they are in.</span></div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;  <span class="comment">// If so, we also record the instructions to scalarize.</span></div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks()) {</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;    <span class="keywordflow">if</span> (!blockNeedsPredicationForAnyReason(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;      <span class="keywordflow">if</span> (isScalarWithPredication(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">ScalarCostsTy</a> ScalarCosts;</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;        <span class="comment">// Do not apply discount if scalable, because that would lead to</span></div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;        <span class="comment">// invalid scalarization costs.</span></div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;        <span class="comment">// Do not apply discount logic if hacked cost is needed</span></div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;        <span class="comment">// for emulated masked memrefs.</span></div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; !useEmulatedMaskMemRefHack(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) &amp;&amp;</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;            computePredInstDiscount(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ScalarCosts, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) &gt;= 0)</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;          ScalarCostsVF.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(ScalarCosts.<a class="code" href="classllvm_1_1DenseMapBase.html#a50d461a887e200e704e5157d3b21514d">begin</a>(), ScalarCosts.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;        <span class="comment">// Remember that BB will remain after vectorization.</span></div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;        PredicatedBBsAfterVectorization[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;      }</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;  }</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;}</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160; </div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopVectorizationCostModel::computePredInstDiscount(</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PredInst, ScalarCostsTy &amp;ScalarCosts, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm_1_1vputils.html#a0ae36efaf093c35afe18910df9607b98">isUniformAfterVectorization</a>(PredInst, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) &amp;&amp;</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;         <span class="stringliteral">&quot;Instruction marked uniform-after-vectorization will be predicated&quot;</span>);</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160; </div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;  <span class="comment">// Initialize the discount to zero, meaning that the scalar version and the</span></div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;  <span class="comment">// vector version cost the same.</span></div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> Discount = 0;</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160; </div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;  <span class="comment">// Holds instructions to analyze. The instructions we visit are mapped in</span></div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;  <span class="comment">// ScalarCosts. Those instructions are the ones that would be scalarized if</span></div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;  <span class="comment">// we find that the scalar version costs less.</span></div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> Worklist;</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160; </div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;  <span class="comment">// Returns true if the given instruction can be scalarized.</span></div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;  <span class="keyword">auto</span> canBeScalarized = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;    <span class="comment">// We only attempt to scalarize instructions forming a single-use chain</span></div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;    <span class="comment">// from the original predicated block that would otherwise be vectorized.</span></div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;    <span class="comment">// Although not strictly necessary, we give up on instructions we know will</span></div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;    <span class="comment">// already be scalar to avoid traversing chains that are unlikely to be</span></div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;    <span class="comment">// beneficial.</span></div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse() || PredInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() ||</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;        isScalarAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160; </div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;    <span class="comment">// If the instruction is scalar with predication, it will be analyzed</span></div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;    <span class="comment">// separately. We ignore it within the context of PredInst.</span></div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;    <span class="keywordflow">if</span> (isScalarWithPredication(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160; </div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;    <span class="comment">// If any of the instruction&#39;s operands are uniform after vectorization,</span></div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;    <span class="comment">// the instruction cannot be scalarized. This prevents, for example, a</span></div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;    <span class="comment">// masked load from being scalarized.</span></div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;    <span class="comment">// We assume we will only emit a value for lane zero of an instruction</span></div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;    <span class="comment">// marked uniform after vectorization, rather than VF identical values.</span></div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;    <span class="comment">// Thus, if we scalarize an instruction that uses a uniform, we would</span></div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;    <span class="comment">// create uses of values corresponding to the lanes we aren&#39;t emitting code</span></div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;    <span class="comment">// for. This behavior can be changed by allowing getScalarValue to clone</span></div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;    <span class="comment">// the lane zero values for uniforms rather than asserting.</span></div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *J = dyn_cast&lt;Instruction&gt;(U.get()))</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1vputils.html#a0ae36efaf093c35afe18910df9607b98">isUniformAfterVectorization</a>(J, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160; </div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;    <span class="comment">// Otherwise, we can scalarize the instruction.</span></div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;  };</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160; </div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;  <span class="comment">// Compute the expected cost discount from scalarizing the entire expression</span></div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;  <span class="comment">// feeding the predicated instruction. We currently only consider expressions</span></div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;  <span class="comment">// that are single-use instruction chains.</span></div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;  Worklist.push_back(PredInst);</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160; </div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;    <span class="comment">// If we&#39;ve already analyzed the instruction, there&#39;s nothing to do.</span></div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;    <span class="keywordflow">if</span> (ScalarCosts.find(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) != ScalarCosts.end())</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160; </div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;    <span class="comment">// Compute the cost of the vector instruction. Note that this cost already</span></div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;    <span class="comment">// includes the scalarization overhead of the predicated instruction.</span></div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> VectorCost = getInstructionCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>).first;</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160; </div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;    <span class="comment">// Compute the cost of the scalarized instruction. This cost is the cost of</span></div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;    <span class="comment">// the instruction as if it wasn&#39;t if-converted and instead remained in the</span></div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;    <span class="comment">// predicated block. We will scale this cost by block probability after</span></div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;    <span class="comment">// computing the scalarization overhead.</span></div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarCost =</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() *</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;        getInstructionCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1)).first;</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160; </div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;    <span class="comment">// Compute the scalarization overhead of needed insertelement instructions</span></div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    <span class="comment">// and phi nodes.</span></div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;    <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;    <span class="keywordflow">if</span> (isScalarWithPredication(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isVoidTy()) {</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;      ScalarCost += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae7fe2d1bb4f708d68fe7a908ba675d1b">getScalarizationOverhead</a>(</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;          cast&lt;VectorType&gt;(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)),</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;          <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()), <span class="comment">/*Insert*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;          <span class="comment">/*Extract*/</span> <span class="keyword">false</span>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;      ScalarCost +=</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() * <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;    }</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160; </div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;    <span class="comment">// Compute the scalarization overhead of needed extractelement</span></div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;    <span class="comment">// instructions. For each of the instruction&#39;s operands, if the operand can</span></div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;    <span class="comment">// be scalarized, add it to the worklist; otherwise, account for the</span></div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;    <span class="comment">// overhead.</span></div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *J = dyn_cast&lt;Instruction&gt;(U.get())) {</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">VectorType::isValidElementType</a>(J-&gt;getType()) &amp;&amp;</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;               <span class="stringliteral">&quot;Instruction has non-scalar type&quot;</span>);</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;        <span class="keywordflow">if</span> (canBeScalarized(J))</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;          Worklist.push_back(J);</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (needsExtract(J, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;          ScalarCost += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae7fe2d1bb4f708d68fe7a908ba675d1b">getScalarizationOverhead</a>(</div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;              cast&lt;VectorType&gt;(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(J-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)),</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;              <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()), <span class="comment">/*Insert*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;              <span class="comment">/*Extract*/</span> <span class="keyword">true</span>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;        }</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;      }</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160; </div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;    <span class="comment">// Scale the total scalar cost by block probability.</span></div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;    ScalarCost /= <a class="code" href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">getReciprocalPredBlockProb</a>();</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160; </div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;    <span class="comment">// Compute the discount. A non-negative discount means the vector version</span></div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;    <span class="comment">// of the instruction costs more, and scalarizing would be beneficial.</span></div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;    Discount += VectorCost - ScalarCost;</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;    ScalarCosts[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = ScalarCost;</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;  }</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160; </div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;  <span class="keywordflow">return</span> Discount;</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;}</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160; </div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;LoopVectorizationCostModel::VectorizationCostTy</div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;LoopVectorizationCostModel::expectedCost(</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;InstructionVFPair&gt;</a> *Invalid) {</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;  VectorizationCostTy <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160; </div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;  <span class="comment">// For each block.</span></div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks()) {</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;    VectorizationCostTy BlockCost;</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160; </div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;    <span class="comment">// For each instruction in the old loop.</span></div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;instructionsWithoutDebug()) {</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;      <span class="comment">// Skip ignored values.</span></div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;      <span class="keywordflow">if</span> (ValuesToIgnore.count(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;          (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; VecValuesToIgnore.count(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160; </div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;      VectorizationCostTy <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = getInstructionCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160; </div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;      <span class="comment">// Check if we should override the cost.</span></div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first.isValid() &amp;&amp;</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;          <a class="code" href="LoopVectorize_8cpp.html#a436530ecee5235bf4c602c61b846d613">ForceTargetInstructionCost</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first = <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a>(<a class="code" href="LoopVectorize_8cpp.html#a436530ecee5235bf4c602c61b846d613">ForceTargetInstructionCost</a>);</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160; </div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;      <span class="comment">// Keep a list of instructions with invalid costs.</span></div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;      <span class="keywordflow">if</span> (Invalid &amp;&amp; !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first.isValid())</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;        <a class="code" href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a48d53340ae80e1c1862548611e92c864">Invalid</a>-&gt;emplace_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160; </div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;      BlockCost.first += <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first;</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;      BlockCost.second |= <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.second;</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found an estimated cost of &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first</div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; for VF &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> &lt;&lt; <span class="stringliteral">&quot; For instruction: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;                        &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;    }</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160; </div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;    <span class="comment">// If we are vectorizing a predicated block, it will have been</span></div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;    <span class="comment">// if-converted. This means that the block&#39;s instructions (aside from</span></div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;    <span class="comment">// stores and instructions that may divide by zero) will now be</span></div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;    <span class="comment">// unconditionally executed. For the scalar case, we may not always execute</span></div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;    <span class="comment">// the predicated block, if it is an if-else block. Thus, scale the block&#39;s</span></div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;    <span class="comment">// cost by the probability of executing it. blockNeedsPredication from</span></div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;    <span class="comment">// Legal is used so as to not include all blocks in tail folded loops.</span></div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3b78b24a3c241e611957b82cd12640da">blockNeedsPredication</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;      BlockCost.first /= <a class="code" href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">getReciprocalPredBlockProb</a>();</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160; </div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>.first += BlockCost.first;</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>.second |= BlockCost.second;</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;  }</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160; </div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;}</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;<span class="comment">/// Gets Address Access SCEV after verifying that the access pattern</span></div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;<span class="comment">/// is loop invariant except the induction variable dependence.</span></div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;<span class="comment">/// This SCEV can be sent to the Target in order to estimate the address</span></div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;<span class="comment">/// calculation cost.</span></div>
<div class="line"><a name="l06381"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#aabb6223fb71f0311d724a290d292b51d"> 6381</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="LoopVectorize_8cpp.html#aabb6223fb71f0311d724a290d292b51d">getAddressAccessSCEV</a>(</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;              <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;              <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>,</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;              <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>,</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *TheLoop) {</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160; </div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;  <span class="keyword">auto</span> *Gep = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;  <span class="keywordflow">if</span> (!Gep)</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160; </div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;  <span class="comment">// We are looking for a gep with all loop invariant indices except for one</span></div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;  <span class="comment">// which should be an induction variable.</span></div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;  <span class="keyword">auto</span> SE = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>();</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;  <span class="keywordtype">unsigned</span> NumOperands = Gep-&gt;getNumOperands();</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumOperands; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Opd = Gep-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;    <span class="keywordflow">if</span> (!SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(Opd), TheLoop) &amp;&amp;</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;        !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af9f3d6495086eb1a43e829bf045fd073">isInductionVariable</a>(Opd))</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;  }</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160; </div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;  <span class="comment">// Now we know we have a GEP ptr, %inv, %ind, %inv. return the Ptr SCEV.</span></div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#ae0994d8207b94ad22ecebc1a6bc580f1">getSCEV</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;}</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160; </div>
<div class="line"><a name="l06406"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#aff42e6f62f13907a31326c5b58bc10ec"> 6406</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopVectorize_8cpp.html#aff42e6f62f13907a31326c5b58bc10ec">isStrideMul</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>) {</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae75229fc5b4c6de082ff2adaa9817f16">hasStride</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)) ||</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;         <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae75229fc5b4c6de082ff2adaa9817f16">hasStride</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;}</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160; </div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;LoopVectorizationCostModel::getMemInstScalarizationCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;                                                        <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp;</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;         <span class="stringliteral">&quot;Scalarization cost of instruction implies vectorization.&quot;</span>);</div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160; </div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;  <span class="keyword">auto</span> SE = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>();</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160; </div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;  <span class="keywordtype">unsigned</span> AS = <a class="code" href="namespacellvm.html#a25653d1f77f8344fea33cfe180582dc1">getLoadStoreAddressSpace</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;  <span class="comment">// NOTE: PtrTy is a vector to signal `TTI::getAddressComputationCost`</span></div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;  <span class="comment">//       that it is being called from this specific place.</span></div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160; </div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;  <span class="comment">// Figure out whether the access is strided and get the stride value</span></div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;  <span class="comment">// if it&#39;s known in compile time</span></div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *PtrSCEV = <a class="code" href="LoopVectorize_8cpp.html#aabb6223fb71f0311d724a290d292b51d">getAddressAccessSCEV</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, TheLoop);</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160; </div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;  <span class="comment">// Get the cost of the scalar memory instruction and address computation.</span></div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> =</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() * <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a246f298958a4a730bf7d3a64440dd47b">getAddressComputationCost</a>(PtrTy, SE, PtrSCEV);</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160; </div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;  <span class="comment">// Don&#39;t pass *I here, since it is scalar but will actually be part of a</span></div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;  <span class="comment">// vectorized loop where the user of it is a vectorized instruction.</span></div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() * <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a34c987c590db0e5cff66d9869a34c556">getMemoryOpCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(),</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;                                                      ValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>(),</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;                                                      Alignment, AS, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160; </div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;  <span class="comment">// Get the overhead of the extractelement and insertelement instructions</span></div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;  <span class="comment">// we might create due to scalarization.</span></div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += getScalarizationOverhead(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160; </div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;  <span class="comment">// If we have a predicated load/store, it will need extra i1 extracts and</span></div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;  <span class="comment">// conditional branches, but may not be executed for each vector lane. Scale</span></div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;  <span class="comment">// the cost by the probability of executing the predicated block.</span></div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;  <span class="keywordflow">if</span> (isPredicatedInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> /= <a class="code" href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">getReciprocalPredBlockProb</a>();</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160; </div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;    <span class="comment">// Add the cost of an i1 extract and a branch</span></div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;    <span class="keyword">auto</span> *Vec_i1Ty =</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;        <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">IntegerType::getInt1Ty</a>(ValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>()), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae7fe2d1bb4f708d68fe7a908ba675d1b">getScalarizationOverhead</a>(</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;        Vec_i1Ty, <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()),</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;        <span class="comment">/*Insert=*/</span><span class="keyword">false</span>, <span class="comment">/*Extract=*/</span><span class="keyword">true</span>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(Instruction::Br, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160; </div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;    <span class="keywordflow">if</span> (useEmulatedMaskMemRefHack(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;      <span class="comment">// Artificially setting to a high enough value to practically disable</span></div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;      <span class="comment">// vectorization with such operations.</span></div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = 3000000;</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;  }</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160; </div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;}</div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160; </div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;LoopVectorizationCostModel::getConsecutiveMemOpCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;                                                    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;  <span class="keyword">auto</span> *VectorTy = cast&lt;VectorType&gt;(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ValTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;  <span class="keywordtype">unsigned</span> AS = <a class="code" href="namespacellvm.html#a25653d1f77f8344fea33cfe180582dc1">getLoadStoreAddressSpace</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;  <span class="keywordtype">int</span> ConsecutiveStride = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4589ea484ebe1919b451fff3948a17cc">isConsecutivePtr</a>(ValTy, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;  <span class="keyword">enum</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160; </div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((ConsecutiveStride == 1 || ConsecutiveStride == -1) &amp;&amp;</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;         <span class="stringliteral">&quot;Stride should be 1 or -1 for consecutive memory access&quot;</span>);</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = 0;</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a8718d4f9740c67449057887b386fb348">getMaskedMemoryOpCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, Alignment, AS,</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;                                      <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;    <a class="code" href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html">TTI::OperandValueInfo</a> OpInfo = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">TTI::getOperandInfo</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a34c987c590db0e5cff66d9869a34c556">getMemoryOpCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, Alignment, AS,</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;                                <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, OpInfo, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;  }</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160; </div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;  <span class="keywordtype">bool</span> Reverse = ConsecutiveStride &lt; 0;</div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;  <span class="keywordflow">if</span> (Reverse)</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa0519f26bcb15c25ac0ff557061fa7af">getShuffleCost</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f">TargetTransformInfo::SK_Reverse</a>, VectorTy,</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;                               std::nullopt, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, 0);</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;}</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160; </div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;LoopVectorizationCostModel::getUniformMemOpCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;                                                <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af593134e27871d44a016de05492a4f41">isUniformMemOp</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160; </div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;  <span class="keyword">auto</span> *VectorTy = cast&lt;VectorType&gt;(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ValTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;  <span class="keywordtype">unsigned</span> AS = <a class="code" href="namespacellvm.html#a25653d1f77f8344fea33cfe180582dc1">getLoadStoreAddressSpace</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;  <span class="keyword">enum</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a246f298958a4a730bf7d3a64440dd47b">getAddressComputationCost</a>(ValTy) +</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;           <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a34c987c590db0e5cff66d9869a34c556">getMemoryOpCost</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>, ValTy, Alignment, AS,</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;                               <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) +</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;           <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa0519f26bcb15c25ac0ff557061fa7af">getShuffleCost</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796">TargetTransformInfo::SK_Broadcast</a>, VectorTy);</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;  }</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160; </div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;  <span class="keywordtype">bool</span> isLoopInvariantStoreValue = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a81955f0baa44d5e0e564520ceed9c789">isUniform</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand());</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a246f298958a4a730bf7d3a64440dd47b">getAddressComputationCost</a>(ValTy) +</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;         <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a34c987c590db0e5cff66d9869a34c556">getMemoryOpCost</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Instruction::Store</a>, ValTy, Alignment, AS,</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;                             <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) +</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;         (isLoopInvariantStoreValue</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;              ? 0</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;              : <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af37b2842424eb63440bdcacca0af9820">getVectorInstrCost</a>(Instruction::ExtractElement, VectorTy,</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;                                       <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() - 1));</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;}</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160; </div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;LoopVectorizationCostModel::getGatherScatterCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;                                                 <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;  <span class="keyword">auto</span> *VectorTy = cast&lt;VectorType&gt;(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ValTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160; </div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a246f298958a4a730bf7d3a64440dd47b">getAddressComputationCost</a>(VectorTy) +</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;         <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa0f4a801858ac7255f623ca0ec53394f">getGatherScatterOpCost</a>(</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), Alignment,</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;             <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TargetTransformInfo::TCK_RecipThroughput</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;}</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160; </div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;LoopVectorizationCostModel::getInterleaveGroupCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;                                                   <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;  <span class="comment">// TODO: Once we have support for interleaving with scalable vectors</span></div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;  <span class="comment">// we can calculate the cost properly here.</span></div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160; </div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;  <span class="keyword">auto</span> *VectorTy = cast&lt;VectorType&gt;(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ValTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;  <span class="keywordtype">unsigned</span> AS = <a class="code" href="namespacellvm.html#a25653d1f77f8344fea33cfe180582dc1">getLoadStoreAddressSpace</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;  <span class="keyword">enum</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160; </div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;  <span class="keyword">auto</span> Group = getInterleavedAccessGroup(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Group &amp;&amp; <span class="stringliteral">&quot;Fail to get an interleaved access group.&quot;</span>);</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160; </div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;  <span class="keywordtype">unsigned</span> InterleaveFactor = Group-&gt;getFactor();</div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;  <span class="keyword">auto</span> *WideVecTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ValTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> * InterleaveFactor);</div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160; </div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;  <span class="comment">// Holds the indices of existing members in the interleaved group.</span></div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> Indices;</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a> = 0; <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a> &lt; InterleaveFactor; <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a>++)</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;    <span class="keywordflow">if</span> (Group-&gt;getMember(<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a>))</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;      Indices.push_back(<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a>);</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160; </div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;  <span class="comment">// Calculate the cost of the whole interleaved group.</span></div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;  <span class="keywordtype">bool</span> UseMaskForGaps =</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;      (Group-&gt;requiresScalarEpilogue() &amp;&amp; !isScalarEpilogueAllowed()) ||</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;      (isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; (Group-&gt;getNumMembers() &lt; Group-&gt;getFactor()));</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a38000267bdb6bb25b9c33f9fd7053b1d">getInterleavedMemoryOpCost</a>(</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), WideVecTy, Group-&gt;getFactor(), Indices, Group-&gt;getAlign(),</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;      AS, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), UseMaskForGaps);</div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160; </div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;  <span class="keywordflow">if</span> (Group-&gt;isReverse()) {</div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;    <span class="comment">// TODO: Add support for reversed masked interleaved access.</span></div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;           <span class="stringliteral">&quot;Reverse masked interleaved access not supported.&quot;</span>);</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += Group-&gt;getNumMembers() *</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;            <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa0519f26bcb15c25ac0ff557061fa7af">getShuffleCost</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f">TargetTransformInfo::SK_Reverse</a>, VectorTy,</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;                               std::nullopt, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, 0);</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;  }</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;}</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160; </div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;std::optional&lt;InstructionCost&gt;</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;LoopVectorizationCostModel::getReductionPatternCost(</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) {</div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;  <span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;  <span class="comment">// Early exit for no inloop reductions</span></div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;  <span class="keywordflow">if</span> (InLoopReductionChains.empty() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || !isa&lt;VectorType&gt;(Ty))</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;  <span class="keyword">auto</span> *VectorTy = cast&lt;VectorType&gt;(Ty);</div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160; </div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;  <span class="comment">// We are looking for a pattern of, and finding the minimal acceptable cost:</span></div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;  <span class="comment">//  reduce(mul(ext(A), ext(B))) or</span></div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;  <span class="comment">//  reduce(mul(A, B)) or</span></div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;  <span class="comment">//  reduce(ext(A)) or</span></div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;  <span class="comment">//  reduce(A).</span></div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;  <span class="comment">// The basic idea is that we walk down the tree to do that, finding the root</span></div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;  <span class="comment">// reduction instruction in InLoopReductionImmediateChains. From there we find</span></div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;  <span class="comment">// the pattern of mul/ext and test the cost of the entire pattern vs the cost</span></div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;  <span class="comment">// of the components. If the reduction cost is lower then we return it for the</span></div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;  <span class="comment">// reduction instruction and 0 for the other instructions in the pattern. If</span></div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;  <span class="comment">// it is not we return an invalid cost specifying the orignal cost method</span></div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;  <span class="comment">// should be used.</span></div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RetI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RetI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;    <span class="keywordflow">if</span> (!RetI-&gt;<a class="code" href="classllvm_1_1Value.html#a2e987c6af902aad6baa39bd5b7ef322c">hasOneUser</a>())</div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;    RetI = RetI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>();</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;  }</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160; </div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RetI, <a class="code" href="namespacellvm_1_1MIPatternMatch.html#adaaea0309983a4c327ced82a739cf1c4">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) &amp;&amp;</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;      RetI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) {</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;    RetI = RetI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>();</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;  }</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160; </div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;  <span class="comment">// Test if the found instruction is a reduction, and if not return an invalid</span></div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;  <span class="comment">// cost specifying the parent to use the original cost modelling.</span></div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;  <span class="keywordflow">if</span> (!InLoopReductionImmediateChains.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(RetI))</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160; </div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;  <span class="comment">// Find the reduction this chain is a part of and calculate the basic cost of</span></div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;  <span class="comment">// the reduction on its own.</span></div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LastChain = InLoopReductionImmediateChains[RetI];</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ReductionPhi = LastChain;</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;  <span class="keywordflow">while</span> (!isa&lt;PHINode&gt;(ReductionPhi))</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;    ReductionPhi = InLoopReductionImmediateChains[ReductionPhi];</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160; </div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc =</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(cast&lt;PHINode&gt;(ReductionPhi))-&gt;second;</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160; </div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> BaseCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a421ee26483edf3fd0cd1dca34513f45e">getArithmeticReductionCost</a>(</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;      RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>(), VectorTy, RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">getFastMathFlags</a>(), <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160; </div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;  <span class="comment">// For a call to the llvm.fmuladd intrinsic we need to add the cost of a</span></div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;  <span class="comment">// normal fmul instruction to the cost of the fadd reduction.</span></div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;  <span class="keywordflow">if</span> (RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">getRecurrenceKind</a>() == <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c">RecurKind::FMulAdd</a>)</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;    BaseCost +=</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(Instruction::FMul, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160; </div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;  <span class="comment">// If we&#39;re using ordered reductions then we can just return the base cost</span></div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;  <span class="comment">// here, since getArithmeticReductionCost calculates the full ordered</span></div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;  <span class="comment">// reduction cost when FP reassociation is not allowed.</span></div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">useOrderedReductions</a>(RdxDesc))</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;    <span class="keywordflow">return</span> BaseCost;</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160; </div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;  <span class="comment">// Get the operand that was not the reduction chain and match it to one of the</span></div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;  <span class="comment">// patterns, returning the better cost if it is found.</span></div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RedOp = RetI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == LastChain</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;                           ? dyn_cast&lt;Instruction&gt;(RetI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;                           : <a class="code" href="namespacellvm.html#a22eeee01734061ac1b31ccd994c49eef">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(RetI-&gt;getOperand(1));</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160; </div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;  VectorTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType(), VectorTy);</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160; </div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op0, *Op1;</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;  <span class="keywordflow">if</span> (RedOp &amp;&amp; RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> &amp;&amp;</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RedOp,</div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Op1)))) &amp;&amp;</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;      Op0-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Op1-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() &amp;&amp;</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;      Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;      !TheLoop-&gt;isLoopInvariant(Op0) &amp;&amp; !TheLoop-&gt;isLoopInvariant(Op1) &amp;&amp;</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;      (Op0-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == RedOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() || Op0 == Op1)) {</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160; </div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;    <span class="comment">// Matched reduce.add(ext(mul(ext(A), ext(B)))</span></div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;    <span class="comment">// Note that the extend opcodes need to all match, or if A==B they will have</span></div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;    <span class="comment">// been converted to zext(mul(sext(A), sext(A))) as it is known positive,</span></div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;    <span class="comment">// which is equally fine.</span></div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;    <span class="keywordtype">bool</span> IsUnsigned = isa&lt;ZExtInst&gt;(Op0);</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;    <span class="keyword">auto</span> *ExtType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), VectorTy);</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;    <span class="keyword">auto</span> *MulType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), VectorTy);</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160; </div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ExtCost =</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(Op0-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), MulType, ExtType,</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;                             <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, Op0);</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> MulCost =</div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>, MulType, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> Ext2Cost =</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(RedOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), VectorTy, MulType,</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;                             <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, RedOp);</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160; </div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RedCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a61fd571365b64379faf5eb0b3caa1b27">getMulAccReductionCost</a>(</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;        IsUnsigned, RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>(), ExtType, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160; </div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;    <span class="keywordflow">if</span> (RedCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp;</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;        RedCost &lt; ExtCost * 2 + MulCost + Ext2Cost + BaseCost)</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetI ? RedCost : 0;</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RedOp &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RedOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;             !TheLoop-&gt;isLoopInvariant(RedOp)) {</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;    <span class="comment">// Matched reduce(ext(A))</span></div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;    <span class="keywordtype">bool</span> IsUnsigned = isa&lt;ZExtInst&gt;(RedOp);</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;    <span class="keyword">auto</span> *ExtType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(RedOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), VectorTy);</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RedCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5b0e4ed0a8d6cf47df2bf484cbe513a2">getExtendedReductionCost</a>(</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;        RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>(), IsUnsigned, RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>(), ExtType,</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;        RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">getFastMathFlags</a>(), <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160; </div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ExtCost =</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(RedOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), VectorTy, ExtType,</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;                             <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, RedOp);</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;    <span class="keywordflow">if</span> (RedCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp; RedCost &lt; BaseCost + ExtCost)</div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetI ? RedCost : 0;</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RedOp &amp;&amp; RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> &amp;&amp;</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RedOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Op1)))) {</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;        Op0-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Op1-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() &amp;&amp;</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;        !TheLoop-&gt;isLoopInvariant(Op0) &amp;&amp; !TheLoop-&gt;isLoopInvariant(Op1)) {</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;      <span class="keywordtype">bool</span> IsUnsigned = isa&lt;ZExtInst&gt;(Op0);</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Op0Ty = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Op1Ty = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *LargestOpTy =</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;          Op0Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() &lt; Op1Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() ? Op1Ty</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;                                                                    : Op0Ty;</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;      <span class="keyword">auto</span> *ExtType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(LargestOpTy, VectorTy);</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160; </div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;      <span class="comment">// Matched reduce.add(mul(ext(A), ext(B))), where the two ext may be of</span></div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;      <span class="comment">// different sizes. We take the largest type as the ext to reduce, and add</span></div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;      <span class="comment">// the remaining cost as, for example reduce(mul(ext(ext(A)), ext(B))).</span></div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ExtCost0 = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;          Op0-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), VectorTy, <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Op0Ty, VectorTy),</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, Op0);</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ExtCost1 = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;          Op1-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), VectorTy, <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(Op1Ty, VectorTy),</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, Op1);</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> MulCost =</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160; </div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RedCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a61fd571365b64379faf5eb0b3caa1b27">getMulAccReductionCost</a>(</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;          IsUnsigned, RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>(), ExtType, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ExtraExtCost = 0;</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;      <span class="keywordflow">if</span> (Op0Ty != LargestOpTy || Op1Ty != LargestOpTy) {</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExtraExtOp = (Op0Ty != LargestOpTy) ? Op0 : Op1;</div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;        ExtraExtCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;            ExtraExtOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), ExtType,</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;            <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ExtraExtOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), VectorTy),</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;            <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, ExtraExtOp);</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;      }</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160; </div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;      <span class="keywordflow">if</span> (RedCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp;</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;          (RedCost + ExtraExtCost) &lt; (ExtCost0 + ExtCost1 + MulCost + BaseCost))</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetI ? RedCost : 0;</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;      <span class="comment">// Matched reduce.add(mul())</span></div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> MulCost =</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160; </div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RedCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a61fd571365b64379faf5eb0b3caa1b27">getMulAccReductionCost</a>(</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;          <span class="keyword">true</span>, RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>(), VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160; </div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;      <span class="keywordflow">if</span> (RedCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>() &amp;&amp; RedCost &lt; MulCost + BaseCost)</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetI ? RedCost : 0;</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;    }</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;  }</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160; </div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetI ? std::optional&lt;InstructionCost&gt;(BaseCost) : <a class="code" href="namespacestd.html">std</a>::nullopt;</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;}</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160; </div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;LoopVectorizationCostModel::getMemoryInstructionCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;                                                     <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;  <span class="comment">// Calculate scalar cost only. Vectorization cost should be ready at this</span></div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;  <span class="comment">// moment.</span></div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()) {</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;    <span class="keywordtype">unsigned</span> AS = <a class="code" href="namespacellvm.html#a25653d1f77f8344fea33cfe180582dc1">getLoadStoreAddressSpace</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160; </div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;    <a class="code" href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html">TTI::OperandValueInfo</a> OpInfo = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">TTI::getOperandInfo</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a246f298958a4a730bf7d3a64440dd47b">getAddressComputationCost</a>(ValTy) +</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;           <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a34c987c590db0e5cff66d9869a34c556">getMemoryOpCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), ValTy, Alignment, AS,</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;                               <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>, OpInfo, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;  }</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;  <span class="keywordflow">return</span> getWideningCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;}</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160; </div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;LoopVectorizationCostModel::VectorizationCostTy</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;LoopVectorizationCostModel::getInstructionCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;                                               <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;  <span class="comment">// If we know that this instruction will remain uniform, check the cost of</span></div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;  <span class="comment">// the scalar version.</span></div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1vputils.html#a0ae36efaf093c35afe18910df9607b98">isUniformAfterVectorization</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1);</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160; </div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; isProfitableToScalarize(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;    <span class="keywordflow">return</span> VectorizationCostTy(InstsToScalarize[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>][<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], <span class="keyword">false</span>);</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160; </div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;  <span class="comment">// Forced scalars do not have any scalarization overhead.</span></div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;  <span class="keyword">auto</span> ForcedScalar = ForcedScalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; ForcedScalar != ForcedScalars.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;    <span class="keyword">auto</span> InstSet = ForcedScalar-&gt;second;</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;    <span class="keywordflow">if</span> (InstSet.count(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;      <span class="keywordflow">return</span> VectorizationCostTy(</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;          (getInstructionCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1)).first *</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;           <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()),</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;          <span class="keyword">false</span>);</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;  }</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160; </div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VectorTy;</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = getInstructionCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, VectorTy);</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160; </div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;  <span class="keywordtype">bool</span> TypeNotScalarized = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; VectorTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> NumParts = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ad67b7e389a52ada1d5264e23d09f4cbe">getNumberOfParts</a>(VectorTy)) {</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;        <span class="comment">// &lt;vscale x 1 x iN&gt; is assumed to be profitable over iN because</span></div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;        <span class="comment">// scalable registers are a distinct register class from scalar ones.</span></div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;        <span class="comment">// If we ever find a target which wants to lower scalable vectors</span></div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;        <span class="comment">// back to scalars, we&#39;ll need to update this code to explicitly</span></div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;        <span class="comment">// ask TTI about the register class uses for each part.</span></div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;        TypeNotScalarized = NumParts &lt;= <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;        TypeNotScalarized = NumParts &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;  }</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;  <span class="keywordflow">return</span> VectorizationCostTy(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TypeNotScalarized);</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;}</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160; </div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopVectorizationCostModel::getScalarizationOverhead(</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160; </div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;  <span class="comment">// There is no mechanism yet to create a scalable scalarization loop,</span></div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;  <span class="comment">// so this is currently Invalid.</span></div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160; </div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160; </div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = 0;</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;  <span class="keywordflow">if</span> (!RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>() &amp;&amp;</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;      (!isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || !<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1af0805a1dd7afabb0aa6cc1832b5011">supportsEfficientVectorElementLoadStore</a>()))</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae7fe2d1bb4f708d68fe7a908ba675d1b">getScalarizationOverhead</a>(</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;        cast&lt;VectorType&gt;(RetTy), <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()),</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;        <span class="comment">/*Insert*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;        <span class="comment">/*Extract*/</span> <span class="keyword">false</span>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160; </div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;  <span class="comment">// Some targets keep addresses scalar.</span></div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a215ea3605f88c5b21ffbdf76a72a8554">prefersVectorizedAddressing</a>())</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160; </div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;  <span class="comment">// Some targets support efficient element stores.</span></div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;  <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1af0805a1dd7afabb0aa6cc1832b5011">supportsEfficientVectorElementLoadStore</a>())</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160; </div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;  <span class="comment">// Collect operands to consider.</span></div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;  <a class="code" href="classllvm_1_1User.html#a917548288129e24325af275795e4622f">Instruction::op_range</a> Ops = CI ? CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>() : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands();</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160; </div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;  <span class="comment">// Skip operands that do not require extraction/scalarization and do not incur</span></div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;  <span class="comment">// any overhead.</span></div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *&gt;</a> Tys;</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *V : filterExtractingOperands(Ops, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;    Tys.push_back(<a class="code" href="LoopVectorize_8cpp.html#a3dd07e45e737ead315e7e7ad1ae74692">MaybeVectorizeType</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> + <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a296acd14b143ce1e1b0db86f4c221662">getOperandsScalarizationOverhead</a>(</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;                    filterExtractingOperands(Ops, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>), Tys, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;}</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160; </div>
<div class="line"><a name="l06862"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#ae8d11752355845a0e271111de7be7d3a"> 6862</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#ae8d11752355845a0e271111de7be7d3a">LoopVectorizationCostModel::setCostBasedWideningDecision</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;  NumPredStores = 0;</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks()) {</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;    <span class="comment">// For each instruction in the old loop.</span></div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> =  <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160; </div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;      <span class="comment">// TODO: We should generate better code and update the cost model for</span></div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;      <span class="comment">// predicated uniform stores. Today they are treated as any other</span></div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;      <span class="comment">// predicated store (see added test cases in</span></div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;      <span class="comment">// invariant-store-vectorization.ll).</span></div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;      <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; isScalarWithPredication(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;        NumPredStores++;</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160; </div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af593134e27871d44a016de05492a4f41">isUniformMemOp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;        <span class="keyword">auto</span> isLegalToScalarize = [&amp;]() {</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;            <span class="comment">// Scalarization of fixed length vectors &quot;just works&quot;.</span></div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160; </div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;          <span class="comment">// We have dedicated lowering for unpredicated uniform loads and</span></div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;          <span class="comment">// stores.  Note that even with tail folding we know that at least</span></div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;          <span class="comment">// one lane is active (i.e. generalized predication is not possible</span></div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;          <span class="comment">// here), and the logic below depends on this fact.</span></div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;          <span class="keywordflow">if</span> (!foldTailByMasking())</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160; </div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;          <span class="comment">// For scalable vectors, a uniform memop load is always</span></div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;          <span class="comment">// uniform-by-parts  and we know how to scalarize that.</span></div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;          <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160; </div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;          <span class="comment">// A uniform store isn&#39;t neccessarily uniform-by-part</span></div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;          <span class="comment">// and we can&#39;t assume scalarization.</span></div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;          <span class="keyword">auto</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;          <span class="keywordflow">return</span> TheLoop-&gt;isLoopInvariant(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getValueOperand());</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;        };</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160; </div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> GatherScatterCost =</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;          isLegalGatherOrScatter(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ?</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;          getGatherScatterCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) : <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160; </div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;        <span class="comment">// Load: Scalar load + broadcast</span></div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;        <span class="comment">// Store: Scalar store + isLoopInvariantStoreValue ? 0 : extract</span></div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;        <span class="comment">// FIXME: This cost is a significant under-estimate for tail folded</span></div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;        <span class="comment">// memory ops.</span></div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarizationCost = isLegalToScalarize() ?</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;          getUniformMemOpCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) : <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160; </div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;        <span class="comment">// Choose better solution for the current VF,  Note that Invalid</span></div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;        <span class="comment">// costs compare as maximumal large.  If both are invalid, we get</span></div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;        <span class="comment">// scalable invalid which signals a failure and a vectorization abort.</span></div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;        <span class="keywordflow">if</span> (GatherScatterCost &lt; ScalarizationCost)</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;          setWideningDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, CM_GatherScatter, GatherScatterCost);</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;          setWideningDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, CM_Scalarize, ScalarizationCost);</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;      }</div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160; </div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;      <span class="comment">// We assume that widening is the best solution when possible.</span></div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;      <span class="keywordflow">if</span> (memoryInstructionCanBeWidened(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;        <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = getConsecutiveMemOpCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;        <span class="keywordtype">int</span> ConsecutiveStride = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4589ea484ebe1919b451fff3948a17cc">isConsecutivePtr</a>(</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;            <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((ConsecutiveStride == 1 || ConsecutiveStride == -1) &amp;&amp;</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;               <span class="stringliteral">&quot;Expected consecutive stride.&quot;</span>);</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;        <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> Decision =</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;            ConsecutiveStride == 1 ? CM_Widen : CM_Widen_Reverse;</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;        setWideningDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, Decision, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>);</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;      }</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160; </div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;      <span class="comment">// Choose between Interleaving, Gather/Scatter or Scalarization.</span></div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> InterleaveCost = <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;      <span class="keywordtype">unsigned</span> NumAccesses = 1;</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;      <span class="keywordflow">if</span> (isAccessInterleaved(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;        <span class="keyword">auto</span> Group = getInterleavedAccessGroup(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Group &amp;&amp; <span class="stringliteral">&quot;Fail to get an interleaved access group.&quot;</span>);</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160; </div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;        <span class="comment">// Make one decision for the whole group.</span></div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;        <span class="keywordflow">if</span> (getWideningDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) != CM_Unknown)</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160; </div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;        NumAccesses = Group-&gt;getNumMembers();</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;        <span class="keywordflow">if</span> (interleavedAccessCanBeWidened(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;          InterleaveCost = getInterleaveGroupCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;      }</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160; </div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> GatherScatterCost =</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;          isLegalGatherOrScatter(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;              ? getGatherScatterCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) * NumAccesses</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;              : <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160; </div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ScalarizationCost =</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;          getMemInstScalarizationCost(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) * NumAccesses;</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160; </div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;      <span class="comment">// Choose better solution for the current VF,</span></div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;      <span class="comment">// write down this decision and use it during vectorization.</span></div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>;</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;      <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> Decision;</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;      <span class="keywordflow">if</span> (InterleaveCost &lt;= GatherScatterCost &amp;&amp;</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;          InterleaveCost &lt; ScalarizationCost) {</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;        Decision = CM_Interleave;</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = InterleaveCost;</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GatherScatterCost &lt; ScalarizationCost) {</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;        Decision = CM_GatherScatter;</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = GatherScatterCost;</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;        Decision = CM_Scalarize;</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a> = ScalarizationCost;</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;      }</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;      <span class="comment">// If the instructions belongs to an interleave group, the whole group</span></div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;      <span class="comment">// receives the same decision. The whole group receives the cost, but</span></div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;      <span class="comment">// the cost will actually be assigned to one instruction.</span></div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> Group = getInterleavedAccessGroup(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;        setWideningDecision(Group, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, Decision, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>);</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;        setWideningDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, Decision, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>);</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;    }</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;  }</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160; </div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;  <span class="comment">// Make sure that any load of address and any other address computation</span></div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;  <span class="comment">// remains scalar unless there is gather/scatter support. This avoids</span></div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;  <span class="comment">// inevitable extracts into address registers, and also has the benefit of</span></div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;  <span class="comment">// activating LSR more, since that pass can&#39;t optimize vectorized</span></div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;  <span class="comment">// addresses.</span></div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a215ea3605f88c5b21ffbdf76a72a8554">prefersVectorizedAddressing</a>())</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160; </div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;  <span class="comment">// Start with all scalar pointer uses.</span></div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a> AddrDefs;</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks())</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PtrDef =</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;        dyn_cast_or_null&lt;Instruction&gt;(<a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;      <span class="keywordflow">if</span> (PtrDef &amp;&amp; TheLoop-&gt;contains(PtrDef) &amp;&amp;</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;          getWideningDecision(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) != CM_GatherScatter)</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;        AddrDefs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PtrDef);</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;    }</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160; </div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;  <span class="comment">// Add all instructions used to generate the addresses.</span></div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Worklist, AddrDefs);</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *InstOp = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;        <span class="keywordflow">if</span> ((InstOp-&gt;getParent() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()) &amp;&amp; !isa&lt;PHINode&gt;(InstOp) &amp;&amp;</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;            AddrDefs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(InstOp).second)</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;          Worklist.push_back(InstOp);</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;  }</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160; </div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : AddrDefs) {</div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;      <span class="comment">// Setting the desired widening decision should ideally be handled in</span></div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;      <span class="comment">// by cost functions, but since this involves the task of finding out</span></div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;      <span class="comment">// if the loaded register is involved in an address computation, it is</span></div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;      <span class="comment">// instead changed here when we know this is the case.</span></div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;      <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">InstWidening</a> Decision = getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;      <span class="keywordflow">if</span> (Decision == CM_Widen || Decision == CM_Widen_Reverse)</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;        <span class="comment">// Scalarize a widened load of address.</span></div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;        setWideningDecision(</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, CM_Scalarize,</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;            (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() *</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;             getMemoryInstructionCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1))));</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> Group = getInterleavedAccessGroup(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;        <span class="comment">// Scalarize an interleave group of address loads.</span></div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Group-&gt;getFactor(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = Group-&gt;getMember(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;            setWideningDecision(</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;                Member, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, CM_Scalarize,</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;                (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() *</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;                 getMemoryInstructionCost(Member, <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1))));</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;        }</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;      }</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;      <span class="comment">// Make sure I gets scalarized and a cost estimate without</span></div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;      <span class="comment">// scalarization overhead.</span></div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;      ForcedScalars[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;  }</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;}</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160; </div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;LoopVectorizationCostModel::getInstructionCost(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;                                               <a class="code" href="classllvm_1_1Type.html">Type</a> *&amp;VectorTy) {</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType();</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;  <span class="keywordflow">if</span> (canTruncateToMinimalBitwidth(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;    RetTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(), MinBWs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;  <span class="keyword">auto</span> SE = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>();</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>;</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160; </div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;  <span class="keyword">auto</span> hasSingleCopyAfterVectorization = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;                                                <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160; </div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;    <span class="keyword">auto</span> Scalarized = InstsToScalarize.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Scalarized != InstsToScalarize.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() &amp;&amp;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;           <span class="stringliteral">&quot;VF not yet analyzed for scalarization profitability&quot;</span>);</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;    <span class="keywordflow">return</span> !Scalarized-&gt;second.count(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;           <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;             auto *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;             return !Scalarized-&gt;second.count(UI);</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;           });</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;  };</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;  (void) hasSingleCopyAfterVectorization;</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160; </div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;  <span class="keywordflow">if</span> (isScalarAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;    <span class="comment">// With the exception of GEPs and PHIs, after scalarization there should</span></div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;    <span class="comment">// only be one copy of the instruction generated in the loop. This is</span></div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;    <span class="comment">// because the VF is either 1, or any instructions that need scalarizing</span></div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;    <span class="comment">// have already been dealt with by the the time we get here. As a result,</span></div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;    <span class="comment">// it means we don&#39;t have to multiply the instruction cost by VF.</span></div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::GetElementPtr ||</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a> ||</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;           (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::BitCast &amp;&amp;</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isPointerTy()) ||</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;           hasSingleCopyAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;    VectorTy = RetTy;</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;    VectorTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(RetTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160; </div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;  <span class="comment">// TODO: We need to estimate the cost of intrinsic calls.</span></div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;    <span class="comment">// We mark this instruction as zero-cost because the cost of GEPs in</span></div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;    <span class="comment">// vectorized code depends on whether the corresponding memory instruction</span></div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;    <span class="comment">// is scalarized or not. Therefore, we handle GEPs with the memory</span></div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;    <span class="comment">// instruction cost.</span></div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;  <span class="keywordflow">case</span> Instruction::Br: {</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;    <span class="comment">// In cases of scalarized and predicated instructions, there will be VF</span></div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;    <span class="comment">// predicated blocks in the vectorized loop. Each branch around these</span></div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;    <span class="comment">// blocks requires also an extract of its vector compare i1 element.</span></div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;    <span class="keywordtype">bool</span> ScalarPredicatedBB = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp;</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;        (PredicatedBBsAfterVectorization[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].count(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) ||</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;         PredicatedBBsAfterVectorization[<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>].count(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1))))</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;      ScalarPredicatedBB = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160; </div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;    <span class="keywordflow">if</span> (ScalarPredicatedBB) {</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;      <span class="comment">// Not possible to scalarize scalable vector with predicated instructions.</span></div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;      <span class="comment">// Return cost for branches around scalarized and predicated blocks.</span></div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;      <span class="keyword">auto</span> *Vec_i1Ty =</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;          <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">IntegerType::getInt1Ty</a>(RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>()), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;      <span class="keywordflow">return</span> (</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae7fe2d1bb4f708d68fe7a908ba675d1b">getScalarizationOverhead</a>(</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;              Vec_i1Ty, <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()),</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;              <span class="comment">/*Insert*/</span> <span class="keyword">false</span>, <span class="comment">/*Extract*/</span> <span class="keyword">true</span>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) +</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;          (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(Instruction::Br, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>) * <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()));</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() == TheLoop-&gt;getLoopLatch() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>())</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;      <span class="comment">// The back-edge branch will remain, as will all scalar branches.</span></div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(Instruction::Br, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;      <span class="comment">// This branch will be eliminated by if-conversion.</span></div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;    <span class="comment">// Note: We currently assume zero cost for an unconditional branch inside</span></div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;    <span class="comment">// a predicated block since it will become a fall-through, although we</span></div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;    <span class="comment">// may decide in the future to call TTI for all branches.</span></div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;  }</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>: {</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;    <span class="keyword">auto</span> *Phi = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160; </div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;    <span class="comment">// First-order recurrences are replaced by vector shuffles inside the loop.</span></div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5d6b8f1a562e7d26404946de46d3045b">isFixedOrderRecurrence</a>(Phi)) {</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;      std::iota(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.begin(), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.end(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() - 1);</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa0519f26bcb15c25ac0ff557061fa7af">getShuffleCost</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaa9e18b2636661e341804da24971997df">TargetTransformInfo::SK_Splice</a>,</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;                                cast&lt;VectorType&gt;(VectorTy), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>,</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;                                <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() - 1);</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;    }</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160; </div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;    <span class="comment">// Phi nodes in non-header blocks (not inductions, reductions, etc.) are</span></div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;    <span class="comment">// converted into select instructions. We require N - 1 selects per phi</span></div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;    <span class="comment">// node, where N is the number of incoming values.</span></div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != TheLoop-&gt;getHeader())</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;      <span class="keywordflow">return</span> (Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>() - 1) *</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;             <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af89277d8bd76d6348291e29b6076796a">getCmpSelInstrCost</a>(</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;                 <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>, <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>),</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;                 <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>),</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;                 <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">CmpInst::BAD_ICMP_PREDICATE</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160; </div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;  }</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;  <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; isPredicatedInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> [ScalarCost, SafeDivisorCost] = getDivRemSpeculationCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;      <span class="keywordflow">return</span> isDivRemScalarWithPredication(ScalarCost, SafeDivisorCost) ?</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;        ScalarCost : SafeDivisorCost;</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;    }</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;    <span class="comment">// We&#39;ve proven all lanes safe to speculate, fall through.</span></div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;  <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;  <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;  <span class="keywordflow">case</span> Instruction::FMul:</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;  <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;  <span class="keywordflow">case</span> Instruction::FRem:</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor: {</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;    <span class="comment">// Since we will replace the stride by 1 the multiplication should go away.</span></div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a> &amp;&amp; <a class="code" href="LoopVectorize_8cpp.html#aff42e6f62f13907a31326c5b58bc10ec">isStrideMul</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>))</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160; </div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;    <span class="comment">// Detect reduction patterns</span></div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> RedCost = getReductionPatternCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>))</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;      <span class="keywordflow">return</span> *RedCost;</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160; </div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;    <span class="comment">// Certain instructions can be cheaper to vectorize if they have a constant</span></div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;    <span class="comment">// second vector operand. One example of this are shifts on x86.</span></div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op2 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;    <span class="keyword">auto</span> Op2Info = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">getOperandInfo</a>(Op2);</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;    <span class="keywordflow">if</span> (Op2Info.Kind == <a class="code" href="classllvm_1_1TargetTransformInfo.html#afa38851d75434d1476444ac93f94cb4ca9c0eecea29e9fa58e4dac7ee32b9b2ac">TargetTransformInfo::OK_AnyValue</a> &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a81955f0baa44d5e0e564520ceed9c789">isUniform</a>(Op2))</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;      Op2Info.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html#a930b0b2be537d928348aa0946f61dcd6">Kind</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html#afa38851d75434d1476444ac93f94cb4ca7aa61d9e9d33bdf28478754c69c59640">TargetTransformInfo::OK_UniformValue</a>;</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160; </div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 4&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operand_values());</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>,</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;        {TargetTransformInfo::OK_AnyValue, TargetTransformInfo::OP_None},</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;        Op2Info, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;  }</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;  <span class="keywordflow">case</span> Instruction::FNeg: {</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>,</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;        {TargetTransformInfo::OK_AnyValue, TargetTransformInfo::OP_None},</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;        {TargetTransformInfo::OK_AnyValue, TargetTransformInfo::OP_None},</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;  }</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>: {</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *CondSCEV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition());</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;    <span class="keywordtype">bool</span> ScalarCond = (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(CondSCEV, TheLoop));</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160; </div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, *Op1;</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;    <span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;    <span class="keywordflow">if</span> (!ScalarCond &amp;&amp; (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1))) ||</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1))))) {</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;      <span class="comment">// select x, y, false --&gt; x &amp; y</span></div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;      <span class="comment">// select x, true, y --&gt; x | y</span></div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> [Op1VK, Op1VP] = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">TTI::getOperandInfo</a>(Op0);</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> [Op2VK, Op2VP] = <a class="code" href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">TTI::getOperandInfo</a>(Op1);</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;              Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() == 1);</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160; </div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 2&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>{Op0, Op1};</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>()) ? Instruction::Or : Instruction::And, VectorTy,</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;          <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, {Op1VK, Op1VP}, {Op2VK, Op2VP}, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;    }</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160; </div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *CondTy = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition()-&gt;getType();</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;    <span class="keywordflow">if</span> (!ScalarCond)</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;      CondTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(CondTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160; </div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">CmpInst::BAD_ICMP_PREDICATE</a>;</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;CmpInst&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition()))</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;      Pred = <a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;getPredicate();</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af89277d8bd76d6348291e29b6076796a">getCmpSelInstrCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, CondTy, Pred,</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;                                  <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;  }</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;  <span class="keywordflow">case</span> Instruction::ICmp:</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;  <span class="keywordflow">case</span> Instruction::FCmp: {</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ValTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op0AsInstruction = dyn_cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;    <span class="keywordflow">if</span> (canTruncateToMinimalBitwidth(Op0AsInstruction, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;      ValTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(ValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(), MinBWs[Op0AsInstruction]);</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;    VectorTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(ValTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af89277d8bd76d6348291e29b6076796a">getCmpSelInstrCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), VectorTy, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;                                  cast&lt;CmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getPredicate(), <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>,</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;                                  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;  }</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Instruction::Store</a>:</div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>: {</div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>;</div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>.isVector()) {</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;      InstWidening Decision = getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>);</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Decision != CM_Unknown &amp;&amp;</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;             <span class="stringliteral">&quot;CM decision should be taken at this point&quot;</span>);</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;      <span class="keywordflow">if</span> (getWideningCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) == <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>())</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;      <span class="keywordflow">if</span> (Decision == CM_Scalarize)</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1);</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;    }</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;    VectorTy = <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>);</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;    <span class="keywordflow">return</span> getMemoryInstructionCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;  }</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isPointerTy())</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToSI:</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;  <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;  <span class="keywordflow">case</span> Instruction::PtrToInt:</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;  <span class="keywordflow">case</span> Instruction::IntToPtr:</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;  <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;  <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;  <span class="keywordflow">case</span> Instruction::FPTrunc: {</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;    <span class="comment">// Computes the CastContextHint from a Load/Store instruction.</span></div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;    <span class="keyword">auto</span> ComputeCCH = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64">TTI::CastContextHint</a> {</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;             <span class="stringliteral">&quot;Expected a load or a store!&quot;</span>);</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160; </div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || !TheLoop-&gt;contains(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a960b44c579bc2f6818d2daaf9e4c16f0">TTI::CastContextHint::Normal</a>;</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160; </div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;      <span class="keywordflow">switch</span> (getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260ae849d400780f51424bc4e4c26ddf3000">LoopVectorizationCostModel::CM_GatherScatter</a>:</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64afc2e3edeec59afcdc10f55205713f14b">TTI::CastContextHint::GatherScatter</a>;</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971">LoopVectorizationCostModel::CM_Interleave</a>:</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64ad392556b3674a98332cc2938ba0bfeb7">TTI::CastContextHint::Interleave</a>;</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a03c0934d38787b1773c050deee484126">LoopVectorizationCostModel::CM_Scalarize</a>:</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260adc468760c02910f77bad7525bc66c334">LoopVectorizationCostModel::CM_Widen</a>:</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ? <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6864311f985d160ad4bd46a9fbe4a4d4">TTI::CastContextHint::Masked</a></div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;                                        : <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a960b44c579bc2f6818d2daaf9e4c16f0">TTI::CastContextHint::Normal</a>;</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a058eacbd3c28e2ecec2af7db726ce527">LoopVectorizationCostModel::CM_Widen_Reverse</a>:</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a030aa94015bd11d183b897ddb541e4e3">TTI::CastContextHint::Reversed</a>;</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260af974de6a8aba0481a82335fb93471a39">LoopVectorizationCostModel::CM_Unknown</a>:</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Instr did not go through cost modelling?&quot;</span>);</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;      }</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160; </div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled case!&quot;</span>);</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;    };</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160; </div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;    <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode();</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;    <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64">TTI::CastContextHint</a> CCH = <a class="code" href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">TTI::CastContextHint::None</a>;</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;    <span class="comment">// For Trunc, the context is the only user, which must be a StoreInst.</span></div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;    <span class="keywordflow">if</span> (Opcode == Instruction::Trunc || Opcode == Instruction::FPTrunc) {</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;user_begin()))</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;          CCH = ComputeCCH(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>);</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;    }</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;    <span class="comment">// For Z/Sext, the context is the operand, which must be a LoadInst.</span></div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Opcode == Instruction::ZExt || Opcode == Instruction::SExt ||</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;             Opcode == Instruction::FPExt) {</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)))</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;        CCH = ComputeCCH(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>);</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;    }</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160; </div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;    <span class="comment">// We optimize the truncation of induction variables having constant</span></div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;    <span class="comment">// integer steps. The cost of these truncations is the same as the scalar</span></div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;    <span class="comment">// operation.</span></div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;    <span class="keywordflow">if</span> (isOptimizableIVTruncate(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;      <span class="keyword">auto</span> *Trunc = cast&lt;TruncInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(Instruction::Trunc, Trunc-&gt;getDestTy(),</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;                                  Trunc-&gt;getSrcTy(), CCH, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, Trunc);</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;    }</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160; </div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;    <span class="comment">// Detect reduction patterns</span></div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> RedCost = getReductionPatternCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>))</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;      <span class="keywordflow">return</span> *RedCost;</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160; </div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcScalarTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcVecTy =</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;        VectorTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() ? <a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(SrcScalarTy, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) : SrcScalarTy;</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;    <span class="keywordflow">if</span> (canTruncateToMinimalBitwidth(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)) {</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;      <span class="comment">// This cast is going to be shrunk. This may remove the cast or it might</span></div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;      <span class="comment">// turn it into slightly different cast. For example, if MinBW == 16,</span></div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;      <span class="comment">// &quot;zext i8 %1 to i32&quot; becomes &quot;zext i8 %1 to i16&quot;.</span></div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;      <span class="comment">// Calculate the modified src and dest types.</span></div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *MinVecTy = VectorTy;</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;      <span class="keywordflow">if</span> (Opcode == Instruction::Trunc) {</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;        SrcVecTy = <a class="code" href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359">smallestIntegerVectorType</a>(SrcVecTy, MinVecTy);</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;        VectorTy =</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;            <a class="code" href="LoopVectorize_8cpp.html#ab2ebcb0227079343a9a2e53638c1d76e">largestIntegerVectorType</a>(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>), MinVecTy);</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Opcode == Instruction::ZExt || Opcode == Instruction::SExt) {</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;        SrcVecTy = <a class="code" href="LoopVectorize_8cpp.html#ab2ebcb0227079343a9a2e53638c1d76e">largestIntegerVectorType</a>(SrcVecTy, MinVecTy);</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;        VectorTy =</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;            <a class="code" href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359">smallestIntegerVectorType</a>(<a class="code" href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">ToVectorTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>), MinVecTy);</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;      }</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;    }</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160; </div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">getCastInstrCost</a>(Opcode, VectorTy, SrcVecTy, CCH, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;  }</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Instruction::Call</a>: {</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a08416fb970e8c177c7d78452d927c606">RecurrenceDescriptor::isFMulAddIntrinsic</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> RedCost = getReductionPatternCost(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>))</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;        <span class="keywordflow">return</span> *RedCost;</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="namespacellvm_1_1pdb.html#a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a">Variant</a>;</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> CallCost = getVectorCallCost(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, &amp;Variant);</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a11c66d01880f53332fc7ad53f565b039">getVectorIntrinsicIDForCall</a>(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>)) {</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> IntrinsicCost = getVectorIntrinsicCost(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(CallCost, IntrinsicCost);</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;    }</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;    <span class="keywordflow">return</span> CallCost;</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;  }</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;  <span class="keywordflow">case</span> Instruction::ExtractValue:</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">TTI::TCK_RecipThroughput</a>);</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;  <span class="keywordflow">case</span> Instruction::Alloca:</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;    <span class="comment">// We cannot easily widen alloca to a scalable alloca, as</span></div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;    <span class="comment">// the result would need to be a vector of pointers.</span></div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">InstructionCost::getInvalid</a>();</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;    <span class="comment">// This opcode is unknown. Assume that it is the same as &#39;mul&#39;.</span></div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>, VectorTy, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>);</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;  } <span class="comment">// end of switch.</span></div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;}</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160; </div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">LoopVectorize::ID</a> = 0;</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160; </div>
<div class="line"><a name="l07385"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a5ce679c74f9d5aa21d8ea3d1a798f0a9"> 7385</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LoopVectorize_8cpp.html#a5ce679c74f9d5aa21d8ea3d1a798f0a9">lv_name</a>[] = <span class="stringliteral">&quot;Loop Vectorization&quot;</span>;</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160; </div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(LoopVectorize, <a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, <a class="code" href="LoopVectorize_8cpp.html#a5ce679c74f9d5aa21d8ea3d1a798f0a9">lv_name</a>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1BasicAAWrapperPass.html">BasicAAWrapperPass</a>)</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1GlobalsAAWrapperPass.html">GlobalsAAWrapperPass</a>)</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>)</div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1BlockFrequencyInfoWrapperPass.html">BlockFrequencyInfoWrapperPass</a>)</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1ScalarEvolutionWrapperPass.html">ScalarEvolutionWrapperPass</a>)</div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>)</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopAccessLegacyAnalysis.html">LoopAccessLegacyAnalysis</a>)</div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DemandedBitsWrapperPass.html">DemandedBitsWrapperPass</a>)</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>)</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">ProfileSummaryInfoWrapperPass</a>)</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1InjectTLIMappingsLegacy.html">InjectTLIMappingsLegacy</a>)</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LoopVectorize, <a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, <a class="code" href="LoopVectorize_8cpp.html#a5ce679c74f9d5aa21d8ea3d1a798f0a9">lv_name</a>, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160; </div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;namespace <a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160; </div>
<div class="line"><a name="l07405"></a><span class="lineno"><a class="line" href="namespacellvm.html#afbbb84b4e3862dbf87ff3b6966dab634"> 7405</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#afbbb84b4e3862dbf87ff3b6966dab634">createLoopVectorizePass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> LoopVectorize(); }</div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160; </div>
<div class="line"><a name="l07407"></a><span class="lineno"><a class="line" href="namespacellvm.html#a127074e2cffa9a46d1257a22fd695166"> 7407</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#afbbb84b4e3862dbf87ff3b6966dab634">createLoopVectorizePass</a>(<span class="keywordtype">bool</span> InterleaveOnlyWhenForced,</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;                              <span class="keywordtype">bool</span> VectorizeOnlyWhenForced) {</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LoopVectorize(InterleaveOnlyWhenForced, VectorizeOnlyWhenForced);</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;}</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160; </div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160; </div>
<div class="line"><a name="l07414"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a0ac5df8f0304981180d602dacb13512c"> 7414</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a0ac5df8f0304981180d602dacb13512c">LoopVectorizationCostModel::collectValuesToIgnore</a>() {</div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;  <span class="comment">// Ignore ephemeral values.</span></div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;  <a class="code" href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">CodeMetrics::collectEphemeralValues</a>(TheLoop, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, ValuesToIgnore);</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160; </div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;  <span class="comment">// Find all stores to invariant variables. Since they are going to sink</span></div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;  <span class="comment">// outside the loop we do not need calculate cost for them.</span></div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : TheLoop-&gt;blocks())</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a34f384c7ff8e4b23cc79156daf2a5c11">isInvariantAddressOfReduction</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand()))</div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;        ValuesToIgnore.insert(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;    }</div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160; </div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;  <span class="comment">// Ignore type-promoting instructions we identified during reduction</span></div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;  <span class="comment">// detection.</span></div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a> : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>()) {</div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RedDes = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.second;</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;Casts = RedDes.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#ad9ca0236800ea44a81218da33eef0681">getCastInsts</a>();</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;    VecValuesToIgnore.insert(Casts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>(), Casts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>());</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;  }</div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;  <span class="comment">// Ignore type-casting instructions we identified during induction</span></div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;  <span class="comment">// detection.</span></div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Induction : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">getInductionVars</a>()) {</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;IndDes = Induction.second;</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;Casts = IndDes.<a class="code" href="classllvm_1_1InductionDescriptor.html#a532a9520655d94d866172d738875d555">getCastInsts</a>();</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;    VecValuesToIgnore.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">insert</a>(Casts.begin(), Casts.end());</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;  }</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;}</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160; </div>
<div class="line"><a name="l07444"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationCostModel.html#a12d2850f420726c4acb262b626e95b7d"> 7444</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a12d2850f420726c4acb262b626e95b7d">LoopVectorizationCostModel::collectInLoopReductions</a>() {</div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a> : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>()) {</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.first;</div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.second;</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160; </div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;    <span class="comment">// We don&#39;t collect reductions that are type promoted (yet).</span></div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;    <span class="keywordflow">if</span> (RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">getRecurrenceType</a>() != Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160; </div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;    <span class="comment">// If the target would prefer this reduction to happen &quot;in-loop&quot;, then we</span></div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;    <span class="comment">// want to record it as such.</span></div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;    <span class="keywordtype">unsigned</span> Opcode = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>();</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LoopVectorize_8cpp.html#adbab10940d6653d68e6aac48082acb65">PreferInLoopReductions</a> &amp;&amp; !<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">useOrderedReductions</a>(RdxDesc) &amp;&amp;</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;        !<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1a2b30bdeffa3fb4a4fd881e25d01817">preferInLoopReduction</a>(Opcode, Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;                                   <a class="code" href="structllvm_1_1TargetTransformInfo_1_1ReductionFlags.html">TargetTransformInfo::ReductionFlags</a>()))</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160; </div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;    <span class="comment">// Check that we can correctly put the reductions into the loop, by</span></div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;    <span class="comment">// finding the chain of operations that leads from the phi to the loop</span></div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;    <span class="comment">// exit value.</span></div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> ReductionOperations =</div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;        RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a6415fb68bc55f3a316aa414a5c2c0ab2">getReductionOpChain</a>(Phi, TheLoop);</div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    <span class="keywordtype">bool</span> InLoop = !ReductionOperations.empty();</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    <span class="keywordflow">if</span> (InLoop) {</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;      InLoopReductionChains[Phi] = ReductionOperations;</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;      <span class="comment">// Add the elements to InLoopReductionImmediateChains for cost modelling.</span></div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LastChain = Phi;</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReductionOperations) {</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;        InLoopReductionImmediateChains[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = LastChain;</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;        LastChain = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;      }</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;    }</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Using &quot;</span> &lt;&lt; (InLoop ? <span class="stringliteral">&quot;inloop&quot;</span> : <span class="stringliteral">&quot;out of loop&quot;</span>)</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; reduction for phi: &quot;</span> &lt;&lt; *Phi &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;  }</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;}</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160; </div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;<span class="comment">// TODO: we could return a pair of values that specify the max VF and</span></div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;<span class="comment">// min VF, to be used in `buildVPlans(MinVF, MaxVF)` instead of</span></div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;<span class="comment">// `buildVPlans(VF, VF)`. We cannot do it because VPLAN at the moment</span></div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;<span class="comment">// doesn&#39;t have a cost model that can choose which plan to execute if</span></div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;<span class="comment">// more than one is generated.</span></div>
<div class="line"><a name="l07486"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ac2503a7483c928ca9f0629a7d4263fe5"> 7486</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopVectorize_8cpp.html#ac2503a7483c928ca9f0629a7d4263fe5">determineVPlanVF</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> WidestVectorRegBits,</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;                                 <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> &amp;CM) {</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;  <span class="keywordtype">unsigned</span> WidestType;</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;  std::tie(std::ignore, WidestType) = CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a1fa63b37ad2ac06f289e9962a3703e9e">getSmallestAndWidestTypes</a>();</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;  <span class="keywordflow">return</span> WidestVectorRegBits / WidestType;</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;}</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160; </div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;<a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a></div>
<div class="line"><a name="l07494"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#a2206e77c573f4947146faa681ea8855e"> 7494</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a2206e77c573f4947146faa681ea8855e">LoopVectorizationPlanner::planInVPlanNativePath</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF) {</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;scalable vectors not yet supported&quot;</span>);</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = UserVF;</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;  <span class="comment">// Outer loop handling: They may require CFG and instruction level</span></div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;  <span class="comment">// transformations before even evaluating whether vectorization is profitable.</span></div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;  <span class="comment">// Since we cannot modify the incoming IR, we need to build VPlan upfront in</span></div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;  <span class="comment">// the vectorization pipeline.</span></div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>()) {</div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;    <span class="comment">// If the user doesn&#39;t provide a vectorization factor, determine a</span></div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;    <span class="comment">// reasonable one.</span></div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;    <span class="keywordflow">if</span> (UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">isZero</a>()) {</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a class="code" href="LoopVectorize_8cpp.html#ac2503a7483c928ca9f0629a7d4263fe5">determineVPlanVF</a>(</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">getRegisterBitWidth</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">TargetTransformInfo::RGK_FixedWidthVector</a>)</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;              .<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>(),</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;          CM));</div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: VPlan computed VF &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160; </div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;      <span class="comment">// Make sure we have a VF &gt; 1 for stress testing.</span></div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a9aba1a55848dca801709169068b8d264">VPlanBuildStressTest</a> &amp;&amp; (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">isZero</a>())) {</div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: VPlan stress testing: &quot;</span></div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;overriding computed VF.\n&quot;</span>);</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(4);</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;      }</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;    }</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a> &amp;&amp; <span class="stringliteral">&quot;VPlan-native path is not enabled.&quot;</span>);</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()) &amp;&amp;</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;           <span class="stringliteral">&quot;VF needs to be a power of two&quot;</span>);</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Using &quot;</span> &lt;&lt; (!UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">isZero</a>() ? <span class="stringliteral">&quot;user &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;VF &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> &lt;&lt; <span class="stringliteral">&quot; to build VPlans.\n&quot;</span>);</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;    buildVPlans(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160; </div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;    <span class="comment">// For VPlan build stress testing, we bail out after VPlan construction.</span></div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a9aba1a55848dca801709169068b8d264">VPlanBuildStressTest</a>)</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>();</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160; </div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, 0 <span class="comment">/*Cost*/</span>, 0 <span class="comment">/* ScalarCost */</span>};</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;  }</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160; </div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not vectorizing. Inner loops aren&#39;t supported in the &quot;</span></div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;                <span class="stringliteral">&quot;VPlan-native path.\n&quot;</span>);</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>();</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;}</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160; </div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;std::optional&lt;VectorizationFactor&gt;</div>
<div class="line"><a name="l07539"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#a072125b96fcf0ed77465f487c7bf3c25"> 7539</a></span>&#160;<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a072125b96fcf0ed77465f487c7bf3c25">LoopVectorizationPlanner::plan</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF, <span class="keywordtype">unsigned</span> UserIC) {</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() &amp;&amp; <span class="stringliteral">&quot;Inner loop expected.&quot;</span>);</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;  <a class="code" href="structllvm_1_1FixedScalableVFPair.html">FixedScalableVFPair</a> MaxFactors = CM.computeMaxVF(UserVF, UserIC);</div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;  <span class="keywordflow">if</span> (!MaxFactors) <span class="comment">// Cases that should not to be vectorized nor interleaved.</span></div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160; </div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;  <span class="comment">// Invalidate interleave groups if all blocks of loop will be predicated.</span></div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;  <span class="keywordflow">if</span> (CM.blockNeedsPredicationForAnyReason(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) &amp;&amp;</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;      !<a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(*<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>)) {</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;LV: Invalidate all interleaved groups due to fold-tail by masking &quot;</span></div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;           <span class="stringliteral">&quot;which requires masked-interleaved support.\n&quot;</span>);</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;    <span class="keywordflow">if</span> (CM.InterleaveInfo.invalidateGroups())</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;      <span class="comment">// Invalidating interleave groups also requires invalidating all decisions</span></div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;      <span class="comment">// based on them, which includes widening decisions and uniform and scalar</span></div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;      <span class="comment">// values.</span></div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;      CM.invalidateCostModelingDecisions();</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;  }</div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160; </div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxUserVF =</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;      UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() ? MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25f82f8ef3355c335a7ddae4ad0b6965">ScalableVF</a> : MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25a62c28e80eac3b4cc08470ae0770bd">FixedVF</a>;</div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;  <span class="keywordtype">bool</span> UserVFIsLegal = <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a338ba7ca7a526243ab1853d07d90fe38">ElementCount::isKnownLE</a>(UserVF, MaxUserVF);</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;  <span class="keywordflow">if</span> (!UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">isZero</a>() &amp;&amp; UserVFIsLegal) {</div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(UserVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()) &amp;&amp;</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;           <span class="stringliteral">&quot;VF needs to be a power of two&quot;</span>);</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;    <span class="comment">// Collect the instructions (and their associated costs) that will be more</span></div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;    <span class="comment">// profitable to scalarize.</span></div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;    <span class="keywordflow">if</span> (CM.selectUserVectorizationFactor(UserVF)) {</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Using user VF &quot;</span> &lt;&lt; UserVF &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;      CM.collectInLoopReductions();</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;      buildVPlansWithVPRecipes(UserVF, UserVF);</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(printPlans(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;      <span class="keywordflow">return</span> {{UserVF, 0, 0}};</div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;      <a class="code" href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">reportVectorizationInfo</a>(<span class="stringliteral">&quot;UserVF ignored because of invalid costs.&quot;</span>,</div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;                              <span class="stringliteral">&quot;InvalidCost&quot;</span>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>);</div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;  }</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160; </div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;  <span class="comment">// Populate the set of Vectorization Factor Candidates.</span></div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">ElementCountSet</a> VFCandidates;</div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1);</div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;       <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a338ba7ca7a526243ab1853d07d90fe38">ElementCount::isKnownLE</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25a62c28e80eac3b4cc08470ae0770bd">FixedVF</a>); <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> *= 2)</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;    VFCandidates.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(1);</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;       <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a338ba7ca7a526243ab1853d07d90fe38">ElementCount::isKnownLE</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25f82f8ef3355c335a7ddae4ad0b6965">ScalableVF</a>); <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> *= 2)</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;    VFCandidates.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160; </div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> : VFCandidates) {</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;    <span class="comment">// Collect Uniform and Scalar instructions after vectorization with VF.</span></div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;    CM.collectUniformsAndScalars(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160; </div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;    <span class="comment">// Collect the instructions (and their associated costs) that will be more</span></div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;    <span class="comment">// profitable to scalarize.</span></div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>())</div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;      CM.collectInstsToScalarize(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;  }</div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160; </div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;  CM.collectInLoopReductions();</div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;  buildVPlansWithVPRecipes(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(1), MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25a62c28e80eac3b4cc08470ae0770bd">FixedVF</a>);</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;  buildVPlansWithVPRecipes(<a class="code" href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(1), MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a25f82f8ef3355c335a7ddae4ad0b6965">ScalableVF</a>);</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160; </div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(printPlans(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;  <span class="keywordflow">if</span> (!MaxFactors.<a class="code" href="structllvm_1_1FixedScalableVFPair.html#a8b2c87024b1a98ba77b039a0e10e0744">hasVector</a>())</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>();</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160; </div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;  <span class="comment">// Select the optimal vectorization factor.</span></div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;  <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = CM.selectVectorizationFactor(VFCandidates);</div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.ScalarCost &gt; 0) &amp;&amp; <span class="stringliteral">&quot;when vectorizing, the scalar cost must be non-zero.&quot;</span>);</div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>;</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;}</div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160; </div>
<div class="line"><a name="l07611"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55"> 7611</a></span>&#160;<a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">LoopVectorizationPlanner::getBestPlanFor</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#ac214df91cdc242f4710ea5a93939c678">count_if</a>(VPlans,</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;                  [<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>](<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan) { <span class="keywordflow">return</span> Plan-&gt;hasVF(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>); }) ==</div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;             1 &amp;&amp;</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;         <span class="stringliteral">&quot;Best VF has not a single VPlan.&quot;</span>);</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160; </div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan : VPlans) {</div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;    <span class="keywordflow">if</span> (Plan-&gt;hasVF(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;      <span class="keywordflow">return</span> *Plan.get();</div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;  }</div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;No plan found!&quot;</span>);</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;}</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160; </div>
<div class="line"><a name="l07624"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ae32e9a491e0cd889c6490afa72b62154"> 7624</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#ae32e9a491e0cd889c6490afa72b62154">AddRuntimeUnrollDisableMetaData</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *, 4&gt;</a> MDs;</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;  <span class="comment">// Reserve first location for self reference to the LoopID metadata node.</span></div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;  MDs.push_back(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;  <span class="keywordtype">bool</span> IsUnrollMetadata = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *LoopID = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;  <span class="keywordflow">if</span> (LoopID) {</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;    <span class="comment">// First find existing loop unrolling disable metadata.</span></div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, ie = LoopID-&gt;<a class="code" href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">getNumOperands</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ie; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;      <span class="keyword">auto</span> *MD = dyn_cast&lt;MDNode&gt;(LoopID-&gt;<a class="code" href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;      <span class="keywordflow">if</span> (MD) {</div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = dyn_cast&lt;MDString&gt;(MD-&gt;getOperand(0));</div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;        IsUnrollMetadata =</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;            <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> &amp;&amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getString().startswith(<span class="stringliteral">&quot;llvm.loop.unroll.disable&quot;</span>);</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;      }</div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;      MDs.push_back(LoopID-&gt;<a class="code" href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;    }</div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;  }</div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160; </div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;  <span class="keywordflow">if</span> (!IsUnrollMetadata) {</div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;    <span class="comment">// Add runtime unroll disable metadata.</span></div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *, 1&gt;</a> DisableOperands;</div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;    DisableOperands.push_back(</div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;        <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <span class="stringliteral">&quot;llvm.loop.unroll.runtime.disable&quot;</span>));</div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *DisableNode = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, DisableOperands);</div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;    MDs.push_back(DisableNode);</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *NewLoopID = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, MDs);</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;    <span class="comment">// Set operand 0 to refer to the loop id itself.</span></div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;    NewLoopID-&gt;<a class="code" href="classllvm_1_1MDNode.html#a160e9e1a4fd597f83034c8b2ba316984">replaceOperandWith</a>(0, NewLoopID);</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(NewLoopID);</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;  }</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;}</div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160; </div>
<div class="line"><a name="l07658"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c"> 7658</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">LoopVectorizationPlanner::executePlan</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> BestVF, <span class="keywordtype">unsigned</span> BestUF,</div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;                                           <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;BestVPlan,</div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;                                           <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a> &amp;ILV,</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;                                           <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;                                           <span class="keywordtype">bool</span> IsEpilogueVectorization) {</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BestVPlan.<a class="code" href="classllvm_1_1VPlan.html#a633dd97e642c10e8aa1dff2bd2874edb">hasVF</a>(BestVF) &amp;&amp;</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;         <span class="stringliteral">&quot;Trying to execute plan with unsupported VF&quot;</span>);</div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BestVPlan.<a class="code" href="classllvm_1_1VPlan.html#a6e9c2a69cd9bc0e46626f5302a03d3da">hasUF</a>(BestUF) &amp;&amp;</div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;         <span class="stringliteral">&quot;Trying to execute plan with unsupported UF&quot;</span>);</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160; </div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Executing best plan with VF=&quot;</span> &lt;&lt; BestVF &lt;&lt; <span class="stringliteral">&quot;, UF=&quot;</span> &lt;&lt; BestUF</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;                    &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160; </div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;  <span class="comment">// Workaround!  Compute the trip count of the original loop and cache it</span></div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;  <span class="comment">// before we start modifying the CFG.  This code has a systemic problem</span></div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;  <span class="comment">// wherein it tries to run analysis over partially constructed IR; this is</span></div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;  <span class="comment">// wrong, and not simply for SCEV.  The trip count of the original loop</span></div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;  <span class="comment">// simply happens to be prone to hitting this in practice.  In theory, we</span></div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;  <span class="comment">// can hit the same issue for any SCEV, or ValueTracking query done during</span></div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;  <span class="comment">// mutation.  See PR49900.</span></div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;  ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>());</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160; </div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;  <span class="keywordflow">if</span> (!IsEpilogueVectorization)</div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;    <a class="code" href="structllvm_1_1VPlanTransforms.html#af25d938764b8634e70e95ff3f0c35129">VPlanTransforms::optimizeForVFAndUF</a>(BestVPlan, BestVF, BestUF, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>);</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160; </div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;  <span class="comment">// Perform the actual loop transformation.</span></div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160; </div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;  <span class="comment">// 1. Set up the skeleton for vectorization, including vector pre-header and</span></div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;  <span class="comment">// middle block. The vector loop is created during VPlan execution.</span></div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;  <a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> State{BestVF, BestUF, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, &amp;ILV, &amp;BestVPlan};</div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CanonicalIVStartValue;</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;  std::tie(State.CFG.PrevBB, CanonicalIVStartValue) =</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;      ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2822137afbc8a9a1304f1b3b115498db">createVectorizedLoopSkeleton</a>();</div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160; </div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;  <span class="comment">// Only use noalias metadata when using memory checks guaranteeing no overlap</span></div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;  <span class="comment">// across all iterations.</span></div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopAccessInfo.html">LoopAccessInfo</a> *LAI = ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae21d46756cd1643894e85c5f78182cb0">getLAI</a>();</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;  <span class="keywordflow">if</span> (LAI &amp;&amp; !LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#ad9538136df42a114d41ee07f61793c1f">getChecks</a>().empty() &amp;&amp;</div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;      !LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a95d3ed4c96cfee0037005125a7f7f07a">getDiffChecks</a>()) {</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160; </div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;    <span class="comment">//  We currently don&#39;t use LoopVersioning for the actual loop cloning but we</span></div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;    <span class="comment">//  still use it to add the noalias metadata.</span></div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;    <span class="comment">//  TODO: Find a better way to re-use LoopVersioning functionality to add</span></div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;    <span class="comment">//        metadata.</span></div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;    State.LVer = std::make_unique&lt;LoopVersioning&gt;(</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;        *LAI, LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#ad9538136df42a114d41ee07f61793c1f">getChecks</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>());</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;    State.LVer-&gt;prepareNoAliasMetadata();</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;  }</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160; </div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;  ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a287121278d5d3dbbd2a50bc0ee211fa4">collectPoisonGeneratingRecipes</a>(State);</div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160; </div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;  ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a00579d597c88e5f3c51754bcd9ec5658">printDebugTracesAtStart</a>();</div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160; </div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;  <span class="comment">//===------------------------------------------------===//</span></div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;  <span class="comment">// Notice: any optimization or new instruction that go</span></div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;  <span class="comment">// into the code below should also be implemented in</span></div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;  <span class="comment">// the cost-model.</span></div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;  <span class="comment">//===------------------------------------------------===//</span></div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160; </div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;  <span class="comment">// 2. Copy and widen instructions from the old loop into the new loop.</span></div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;  BestVPlan.<a class="code" href="classllvm_1_1VPlan.html#a49d4bfe4d5496d71d503e2e51ba8f6be">prepareToExecute</a>(ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;                             ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">getOrCreateVectorTripCount</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;                             CanonicalIVStartValue, State,</div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;                             IsEpilogueVectorization);</div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160; </div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;  BestVPlan.<a class="code" href="classllvm_1_1VPlan.html#ad80b94848142a7c633976aff96d4c408">execute</a>(&amp;State);</div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160; </div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;  <span class="comment">// Keep all loop hints from the original loop on the vector loop (we&#39;ll</span></div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;  <span class="comment">// replace the vectorizer-specific hints below).</span></div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigLoopID = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160; </div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;  std::optional&lt;MDNode *&gt; VectorizedLoopID =</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;      <a class="code" href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">makeFollowupLoopID</a>(OrigLoopID, {<a class="code" href="LoopVectorize_8cpp.html#a3bf55ccbbeedcfb8cd2a1bd62c0ad91a">LLVMLoopVectorizeFollowupAll</a>,</div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;                                      <a class="code" href="LoopVectorize_8cpp.html#a99050b417d193e1cc1117e5bbd4bfbce">LLVMLoopVectorizeFollowupVectorized</a>});</div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160; </div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *HeaderVPBB =</div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;      BestVPlan.<a class="code" href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">getVectorLoopRegion</a>()-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">getEntryBasicBlock</a>();</div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(State.CFG.VPBB2IRBB[HeaderVPBB]);</div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;  <span class="keywordflow">if</span> (VectorizedLoopID)</div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(*VectorizedLoopID);</div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;    <span class="comment">// Keep all loop hints from the original loop on the vector loop (we&#39;ll</span></div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;    <span class="comment">// replace the vectorizer-specific hints below).</span></div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *LID = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>())</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(LID);</div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160; </div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> Hints(L, <span class="keyword">true</span>, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>);</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#aa2f5ef2d522fb80de283a23d5bed6d86">setAlreadyVectorized</a>();</div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;  }</div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#ae32e9a491e0cd889c6490afa72b62154">AddRuntimeUnrollDisableMetaData</a>(L);</div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160; </div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;  <span class="comment">// 3. Fix the vectorized code: take care of header phi&#39;s, live-outs,</span></div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;  <span class="comment">//    predication, updating analyses.</span></div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;  ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae2a4807be3034c8d65b3195b547f22e5">fixVectorizedLoop</a>(State, BestVPlan);</div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160; </div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;  ILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9e275f16680d4f09dbcc0dd7d323a075">printDebugTracesAtEnd</a>();</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;}</div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160; </div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l07760"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#ac3a6a342405e61ad992020460a530dc4"> 7760</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#ac3a6a342405e61ad992020460a530dc4">LoopVectorizationPlanner::printPlans</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>) {</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Plan : VPlans)</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a363c5daacce6cd5f935f14f969871cdd">PrintVPlansInDotFormat</a>)</div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;      Plan-&gt;printDOT(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>);</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;      Plan-&gt;print(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>);</div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;}</div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160; </div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InnerLoopUnroller::getBroadcastInstrs(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { <span class="keywordflow">return</span> V; }</div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160; </div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;<span class="comment">//===--------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;<span class="comment">// EpilogueVectorizerMainLoop</span></div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;<span class="comment">//===--------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;<span class="comment">/// This function is partially responsible for generating the control flow</span></div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;<span class="comment">/// depicted in https://llvm.org/docs/Vectorizers.html#epilogue-vectorization.</span></div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;<span class="comment"></span>std::pair&lt;BasicBlock *, Value *&gt;</div>
<div class="line"><a name="l07778"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerMainLoop.html#ab976353361314366d6ba4fa1127884fe"> 7778</a></span>&#160;<a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#ab976353361314366d6ba4fa1127884fe">EpilogueVectorizerMainLoop::createEpilogueVectorizedLoopSkeleton</a>() {</div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795">createVectorLoopSkeleton</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160; </div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;  <span class="comment">// Generate the code to check the minimum iteration count of the vector</span></div>
<div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;  <span class="comment">// epilogue (see below).</span></div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a> =</div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;      <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25">emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;iter.check&quot;</span>);</div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160; </div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;  <span class="comment">// Generate the code to check any assumptions that we&#39;ve made for SCEV</span></div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;  <span class="comment">// expressions.</span></div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e">emitSCEVChecks</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160; </div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;  <span class="comment">// Generate the code that checks at runtime if arrays overlap. We put the</span></div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;  <span class="comment">// checks into a separate block to make the more common case of few elements</span></div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;  <span class="comment">// faster.</span></div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca">emitMemRuntimeChecks</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160; </div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;  <span class="comment">// Generate the iteration count check for the main loop, *after* the check</span></div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;  <span class="comment">// for the epilogue loop, so that the path-length is shorter for the case</span></div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;  <span class="comment">// that goes directly through the vector epilogue. The longer-path length for</span></div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;  <span class="comment">// the main loop is compensated for, by the gain from vectorizing the larger</span></div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;  <span class="comment">// trip count. Note: the branch will get updated later on when we vectorize</span></div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;  <span class="comment">// the epilogue.</span></div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a> =</div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;      <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25">emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160; </div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;  <span class="comment">// Generate the induction variable.</span></div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">VectorTripCount</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">getOrCreateVectorTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160; </div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;  <span class="comment">// Skip induction resume value creation here because they will be created in</span></div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;  <span class="comment">// the second pass for the scalar loop. The induction resume values for the</span></div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;  <span class="comment">// inductions in the epilogue loop are created before executing the plan for</span></div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;  <span class="comment">// the epilogue loop.</span></div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160; </div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;  <span class="keywordflow">return</span> {<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253">completeLoopSkeleton</a>(), <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;}</div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160; </div>
<div class="line"><a name="l07816"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aad9eb57dcbd9a2c3fd1993685783d7f7"> 7816</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aad9eb57dcbd9a2c3fd1993685783d7f7">EpilogueVectorizerMainLoop::printDebugTracesAtStart</a>() {</div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Create Skeleton for epilogue vectorized loop (first pass)\n&quot;</span></div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;Main Loop VF:&quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">MainLoopVF</a></div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, Main Loop UF:&quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">MainLoopUF</a></div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, Epilogue Loop VF:&quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a></div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, Epilogue Loop UF:&quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;  });</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;}</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160; </div>
<div class="line"><a name="l07826"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerMainLoop.html#a87a0c8bda4e9e23e896e46d0a2208c17"> 7826</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#a87a0c8bda4e9e23e896e46d0a2208c17">EpilogueVectorizerMainLoop::printDebugTracesAtEnd</a>() {</div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;  <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(<a class="code" href="LoopVectorize_8cpp.html#a8eba8b6f7c3e69bf4d4efd92cd74b5a6">VerboseDebug</a>, {</div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;intermediate fn:\n&quot;</span></div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;           &lt;&lt; *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;  });</div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;}</div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160; </div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *</div>
<div class="line"><a name="l07834"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25"> 7834</a></span>&#160;<a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25">EpilogueVectorizerMainLoop::emitIterationCountCheck</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass,</div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;                                                    <span class="keywordtype">bool</span> ForEpilogue) {</div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Bypass &amp;&amp; <span class="stringliteral">&quot;Expected valid bypass basic block.&quot;</span>);</div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> VFactor = ForEpilogue ? <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a> : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>;</div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;  <span class="keywordtype">unsigned</span> UFactor = ForEpilogue ? <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a> : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">UF</a>;</div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Count = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">getOrCreateTripCount</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;  <span class="comment">// Reuse existing vector loop preheader for TC checks.</span></div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;  <span class="comment">// Note that new preheader block is generated for vector loop.</span></div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">const</span> TCCheckBlock = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>;</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>(TCCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160; </div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;  <span class="comment">// Generate code to check if the loop&#39;s trip count is less than VF * UF of the</span></div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;  <span class="comment">// main vector loop.</span></div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(ForEpilogue ? <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a> : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ?</div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160; </div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CheckMinIters = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">CreateICmp</a>(</div>
<div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, Count, <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, Count-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), VFactor, UFactor),</div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;      <span class="stringliteral">&quot;min.iters.check&quot;</span>);</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160; </div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;  <span class="keywordflow">if</span> (!ForEpilogue)</div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;    TCCheckBlock-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;vector.main.loop.iter.check&quot;</span>);</div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160; </div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;  <span class="comment">// Create new preheader for vector loop.</span></div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a> = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(TCCheckBlock, TCCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(),</div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;                                   <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;vector.ph&quot;</span>);</div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160; </div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;  <span class="keywordflow">if</span> (ForEpilogue) {</div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#ade6d93f9485649bade540a37ec163058">properlyDominates</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(TCCheckBlock),</div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;                                 <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(Bypass)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()) &amp;&amp;</div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;           <span class="stringliteral">&quot;TC check is expected to dominate Bypass&quot;</span>);</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160; </div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;    <span class="comment">// Update dominator for Bypass &amp; LoopExit.</span></div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(Bypass, TCCheckBlock);</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>))</div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;      <span class="comment">// For loops with multiple exits, there&#39;s no edge from the middle block</span></div>
<div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;      <span class="comment">// to exit blocks (as the epilogue must run) and thus no need to update</span></div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;      <span class="comment">// the immediate dominator of the exit blocks.</span></div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>, TCCheckBlock);</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160; </div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(TCCheckBlock);</div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160; </div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;    <span class="comment">// Save the trip count so we don&#39;t have to regenerate it in the</span></div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;    <span class="comment">// vec.epilog.iter.check. This is safe to do because the trip count</span></div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;    <span class="comment">// generated here dominates the vector epilog iter check.</span></div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a> = Count;</div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;  }</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160; </div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;  <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;      TCCheckBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(),</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, CheckMinIters));</div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160; </div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;  <span class="keywordflow">return</span> TCCheckBlock;</div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;}</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160; </div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;<span class="comment">//===--------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;<span class="comment">// EpilogueVectorizerEpilogueLoop</span></div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;<span class="comment">//===--------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;<span class="comment">/// This function is partially responsible for generating the control flow</span></div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;<span class="comment">/// depicted in https://llvm.org/docs/Vectorizers.html#epilogue-vectorization.</span></div>
<div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;<span class="comment"></span>std::pair&lt;BasicBlock *, Value *&gt;</div>
<div class="line"><a name="l07896"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a3792f99fd6877bd752bd78f1fb3e9792"> 7896</a></span>&#160;<a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a3792f99fd6877bd752bd78f1fb3e9792">EpilogueVectorizerEpilogueLoop::createEpilogueVectorizedLoopSkeleton</a>() {</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795">createVectorLoopSkeleton</a>(<span class="stringliteral">&quot;vec.epilog.&quot;</span>);</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160; </div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;  <span class="comment">// Now, compare the remaining count and if there aren&#39;t enough iterations to</span></div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;  <span class="comment">// execute the vectorized epilogue skip to the scalar part.</span></div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *VecEpilogueIterationCountCheck = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>;</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;  VecEpilogueIterationCountCheck-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;vec.epilog.iter.check&quot;</span>);</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a> =</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;                 <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;vec.epilog.ph&quot;</span>);</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;  emitMinimumVectorEpilogueIterCountCheck(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>,</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;                                          VecEpilogueIterationCountCheck);</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160; </div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;  <span class="comment">// Adjust the control flow taking the state info from the main loop</span></div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;  <span class="comment">// vectorization into account.</span></div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a> &amp;&amp; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a> &amp;&amp;</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;         <span class="stringliteral">&quot;expected this to be saved from the previous pass.&quot;</span>);</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;      VecEpilogueIterationCountCheck, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>);</div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160; </div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>,</div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;                               <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a>);</div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160; </div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;      VecEpilogueIterationCountCheck, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160; </div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a>)</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;        VecEpilogueIterationCountCheck, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a>)</div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;        VecEpilogueIterationCountCheck, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>);</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160; </div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;      VecEpilogueIterationCountCheck,</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;      VecEpilogueIterationCountCheck-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>());</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160; </div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">LoopScalarPreHeader</a>,</div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;                               <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a>);</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>))</div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;    <span class="comment">// If there is an epilogue which must run, there&#39;s no edge from the</span></div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;    <span class="comment">// middle block to exit blocks  and thus no need to update the immediate</span></div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;    <span class="comment">// dominator of the exit blocks.</span></div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">LoopExitBlock</a>,</div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;                                 <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a>);</div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160; </div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;  <span class="comment">// Keep track of bypass blocks, as they feed start values to the induction and</span></div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;  <span class="comment">// reduction phis in the scalar loop preheader.</span></div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a>)</div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a>);</div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a>)</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a>);</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a>);</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160; </div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;  <span class="comment">// The vec.epilog.iter.check block may contain Phi nodes from inductions or</span></div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;  <span class="comment">// reductions which merge control-flow from the latch block and the middle</span></div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;  <span class="comment">// block. Update the incoming values here and move the Phi into the preheader.</span></div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 4&gt;</a> PhisInBlock;</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi : VecEpilogueIterationCountCheck-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>())</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;    PhisInBlock.push_back(&amp;Phi);</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160; </div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi : PhisInBlock) {</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>());</div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#ae6c98d2f865894d646b95e8af8176a5d">replaceIncomingBlockWith</a>(</div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;        VecEpilogueIterationCountCheck-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>(),</div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;        VecEpilogueIterationCountCheck);</div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160; </div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;    <span class="comment">// If the phi doesn&#39;t have an incoming value from the</span></div>
<div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;    <span class="comment">// EpilogueIterationCountCheck, we are done. Otherwise remove the incoming</span></div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;    <span class="comment">// value and also those from other check blocks. This is needed for</span></div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;    <span class="comment">// reduction phis only.</span></div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">none_of</a>(Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88c1c3dd33d232dc889a5d29c75b75f3">blocks</a>(), [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IncB) {</div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;          return EPI.EpilogueIterationCountCheck == IncB;</div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;        }))</div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">removeIncomingValue</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">EpilogueIterationCountCheck</a>);</div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a>)</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;      Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">removeIncomingValue</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">SCEVSafetyCheck</a>);</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a>)</div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;      Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">removeIncomingValue</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">MemSafetyCheck</a>);</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;  }</div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160; </div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;  <span class="comment">// Generate a resume induction for the vector epilogue and put it in the</span></div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;  <span class="comment">// vector epilogue preheader</span></div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3ba2418cb3fe3918cd5cfa5f6fdce778">getWidestInductionType</a>();</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *EPResumeVal = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(IdxTy, 2, <span class="stringliteral">&quot;vec.epilog.resume.val&quot;</span>,</div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;                                         <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>());</div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;  EPResumeVal-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">VectorTripCount</a>, VecEpilogueIterationCountCheck);</div>
<div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;  EPResumeVal-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxTy, 0),</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;                           <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a>);</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160; </div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;  <span class="comment">// Generate induction resume values. These variables save the new starting</span></div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;  <span class="comment">// indexes for the scalar loop. They are used to test if there are any tail</span></div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;  <span class="comment">// iterations left once the vector loop has completed.</span></div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;  <span class="comment">// Note that when the vectorized epilogue is skipped due to iteration count</span></div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;  <span class="comment">// check, then the resume value for the induction variable comes from</span></div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;  <span class="comment">// the trip count of the main vector loop, hence passing the AdditionalBypass</span></div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;  <span class="comment">// argument.</span></div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2a6e6e87c238d303539a31eb41d668e3">createInductionResumeValues</a>({VecEpilogueIterationCountCheck,</div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;                               <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">VectorTripCount</a>} <span class="comment">/* AdditionalBypass */</span>);</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160; </div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;  <span class="keywordflow">return</span> {<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253">completeLoopSkeleton</a>(), EPResumeVal};</div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;}</div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160; </div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *</div>
<div class="line"><a name="l08001"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a04c0081718b0f5113134aa563e1a56ca"> 8001</a></span>&#160;<a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a04c0081718b0f5113134aa563e1a56ca">EpilogueVectorizerEpilogueLoop::emitMinimumVectorEpilogueIterCountCheck</a>(</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Bypass, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Insert) {</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160; </div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a> &amp;&amp;</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;         <span class="stringliteral">&quot;Expected trip count to have been safed in the first pass.&quot;</span>);</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;      (!isa&lt;Instruction&gt;(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a>) ||</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;       <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(cast&lt;Instruction&gt;(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a>)-&gt;getParent(), <a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a>)) &amp;&amp;</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;      <span class="stringliteral">&quot;saved trip count does not dominate insertion point.&quot;</span>);</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TC = <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">TripCount</a>;</div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>(<a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a>-&gt;getTerminator());</div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Count = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(TC, <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">VectorTripCount</a>, <span class="stringliteral">&quot;n.vec.remaining&quot;</span>);</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160; </div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;  <span class="comment">// Generate code to check if the loop&#39;s trip count is less than VF * UF of the</span></div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;  <span class="comment">// vector epilogue loop.</span></div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">Cost</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">requiresScalarEpilogue</a>(<a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>) ?</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160; </div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CheckMinIters =</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">CreateICmp</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, Count,</div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;                         <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, Count-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;                                         <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>, <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a>),</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;                         <span class="stringliteral">&quot;min.epilog.iters.check&quot;</span>);</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160; </div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;  <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(</div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;      <a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a>-&gt;getTerminator(),</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Bypass, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">LoopVectorPreHeader</a>, CheckMinIters));</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160; </div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">LoopBypassBlocks</a>.push_back(<a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a>);</div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a>;</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;}</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160; </div>
<div class="line"><a name="l08033"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a9d4052b05414daf596711bada5c5e94b"> 8033</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a9d4052b05414daf596711bada5c5e94b">EpilogueVectorizerEpilogueLoop::printDebugTracesAtStart</a>() {</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Create Skeleton for epilogue vectorized loop (second pass)\n&quot;</span></div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;Epilogue Loop VF:&quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a></div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, Epilogue Loop UF:&quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">EPI</a>.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;  });</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;}</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160; </div>
<div class="line"><a name="l08041"></a><span class="lineno"><a class="line" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a07454ac2b11a89ba60771243779a58e4"> 8041</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a07454ac2b11a89ba60771243779a58e4">EpilogueVectorizerEpilogueLoop::printDebugTracesAtEnd</a>() {</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;  <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(<a class="code" href="LoopVectorize_8cpp.html#a8eba8b6f7c3e69bf4d4efd92cd74b5a6">VerboseDebug</a>, {</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;final fn:\n&quot;</span> &lt;&lt; *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;  });</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;}</div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160; </div>
<div class="line"><a name="l08047"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785"> 8047</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;    <span class="keyword">const</span> <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<span class="keywordtype">bool</span>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a>)&gt; &amp;<a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>, <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range) {</div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Range.isEmpty() &amp;&amp; <span class="stringliteral">&quot;Trying to test an empty VF range.&quot;</span>);</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;  <span class="keywordtype">bool</span> PredicateAtRangeStart = <a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>(Range.Start);</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160; </div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> TmpVF = Range.Start * 2;</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;       <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(TmpVF, Range.End); TmpVF *= 2)</div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>(TmpVF) != PredicateAtRangeStart) {</div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;      Range.End = TmpVF;</div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;    }</div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160; </div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;  <span class="keywordflow">return</span> PredicateAtRangeStart;</div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;}</div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;<span class="comment">/// Build VPlans for the full range of feasible VF&#39;s = {\p MinVF, 2 * \p MinVF,</span></div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;<span class="comment">/// 4 * \p MinVF, ..., \p MaxVF} by repeatedly building a VPlan for a sub-range</span></div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;<span class="comment">/// of VF&#39;s starting at a given VF and extending it as much as possible. Each</span></div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;<span class="comment">/// vectorization decision can potentially shorten this sub-range during</span></div>
<div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;<span class="comment">/// buildVPlan().</span></div>
<div class="line"><a name="l08067"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopVectorizationPlanner.html#a36d6728b8c3cfca0a9bd02c3f0273477"> 8067</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a36d6728b8c3cfca0a9bd02c3f0273477">LoopVectorizationPlanner::buildVPlans</a>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MinVF,</div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;                                           <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxVF) {</div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;  <span class="keyword">auto</span> MaxVFPlusOne = MaxVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a7fe5b99b6520cb29c14b69dcf50d031f">getWithIncrement</a>(1);</div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = MinVF; <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, MaxVFPlusOne);) {</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;    <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> SubRange = {<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, MaxVFPlusOne};</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;    VPlans.push_back(buildVPlan(SubRange));</div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = SubRange.<a class="code" href="structllvm_1_1VFRange.html#a8f3e6ec0ac823874aa93cc9d98081701">End</a>;</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;  }</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;}</div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160; </div>
<div class="line"><a name="l08077"></a><span class="lineno"><a class="line" href="classllvm_1_1VPRecipeBuilder.html#a70641c67b5df6170d455a040508fc2f3"> 8077</a></span>&#160;<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a70641c67b5df6170d455a040508fc2f3">VPRecipeBuilder::createEdgeMask</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst,</div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;                                         <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(<a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(Dst), Src) &amp;&amp; <span class="stringliteral">&quot;Invalid edge&quot;</span>);</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160; </div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;  <span class="comment">// Look for cached value.</span></div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;  std::pair&lt;BasicBlock *, BasicBlock *&gt; Edge(Src, Dst);</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;  <a class="code" href="classllvm_1_1DenseMapIterator.html">EdgeMaskCacheTy::iterator</a> ECEntryIt = EdgeMaskCache.find(Edge);</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;  <span class="keywordflow">if</span> (ECEntryIt != EdgeMaskCache.end())</div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;    <span class="keywordflow">return</span> ECEntryIt-&gt;second;</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160; </div>
<div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *SrcMask = createBlockInMask(Src, Plan);</div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160; </div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;  <span class="comment">// The terminator has to be a branch inst!</span></div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(Src-&gt;getTerminator());</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI &amp;&amp; <span class="stringliteral">&quot;Unexpected terminator found&quot;</span>);</div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160; </div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;  <span class="keywordflow">if</span> (!BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() || BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) == BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1))</div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;    <span class="keywordflow">return</span> EdgeMaskCache[Edge] = SrcMask;</div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160; </div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;  <span class="comment">// If source is an exiting block, we know the exit edge is dynamically dead</span></div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;  <span class="comment">// in the vector loop, and thus we don&#39;t need to restrict the mask.  Avoid</span></div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;  <span class="comment">// adding uses of an otherwise potentially dead instruction.</span></div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(Src))</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;    <span class="keywordflow">return</span> EdgeMaskCache[Edge] = SrcMask;</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160; </div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *EdgeMask = Plan.<a class="code" href="classllvm_1_1VPlan.html#a2ae68d987ea959c535f5c99a39c61417">getOrAddVPValue</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EdgeMask &amp;&amp; <span class="stringliteral">&quot;No Edge Mask found for condition&quot;</span>);</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160; </div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;  <span class="keywordflow">if</span> (BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) != Dst)</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;    EdgeMask = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.createNot(EdgeMask, BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160; </div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;  <span class="keywordflow">if</span> (SrcMask) { <span class="comment">// Otherwise block in-mask is all-one, no need to AND.</span></div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;    <span class="comment">// The condition is &#39;SrcMask &amp;&amp; EdgeMask&#39;, which is equivalent to</span></div>
<div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;    <span class="comment">// &#39;select i1 SrcMask, i1 EdgeMask, i1 false&#39;.</span></div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;    <span class="comment">// The select version does not introduce new UB if SrcMask is false and</span></div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;    <span class="comment">// EdgeMask is poison. Using &#39;and&#39; here introduces undefined behavior.</span></div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *False = Plan.<a class="code" href="classllvm_1_1VPlan.html#a2ae68d987ea959c535f5c99a39c61417">getOrAddVPValue</a>(</div>
<div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;    EdgeMask =</div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.createSelect(SrcMask, EdgeMask, False, BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;  }</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160; </div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;  <span class="keywordflow">return</span> EdgeMaskCache[Edge] = EdgeMask;</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;}</div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160; </div>
<div class="line"><a name="l08122"></a><span class="lineno"><a class="line" href="classllvm_1_1VPRecipeBuilder.html#a449e86217b24e56f372ca02516dd70b8"> 8122</a></span>&#160;<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a449e86217b24e56f372ca02516dd70b8">VPRecipeBuilder::createBlockInMask</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; <span class="stringliteral">&quot;Block is not a part of a loop&quot;</span>);</div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160; </div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;  <span class="comment">// Look for cached value.</span></div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;  <a class="code" href="classllvm_1_1DenseMapIterator.html">BlockMaskCacheTy::iterator</a> BCEntryIt = BlockMaskCache.find(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;  <span class="keywordflow">if</span> (BCEntryIt != BlockMaskCache.end())</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;    <span class="keywordflow">return</span> BCEntryIt-&gt;second;</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160; </div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;  <span class="comment">// All-one mask is modelled as no-mask following the convention for masked</span></div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;  <span class="comment">// load/store/gather/scatter. Initialize BlockMask to no-mask.</span></div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *BlockMask = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160; </div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;    <span class="keywordflow">if</span> (!CM.blockNeedsPredicationForAnyReason(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;      <span class="keywordflow">return</span> BlockMaskCache[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = BlockMask; <span class="comment">// Loop incoming mask is all-one.</span></div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160; </div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CM.foldTailByMasking() &amp;&amp; <span class="stringliteral">&quot;must fold the tail&quot;</span>);</div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160; </div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;    <span class="comment">// If we&#39;re using the active lane mask for control flow, then we get the</span></div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;    <span class="comment">// mask from the active lane mask PHI that is cached in the VPlan.</span></div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;    <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdd">TailFoldingStyle</a> <a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a> = CM.getTailFoldingStyle();</div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a> == <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bddad817e2199b89933da1a3cd7e130cd782">TailFoldingStyle::DataAndControlFlow</a>)</div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;      <span class="keywordflow">return</span> BlockMaskCache[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = Plan.<a class="code" href="classllvm_1_1VPlan.html#adcfda908b42e8dbe6a1cf8c940cb75e6">getActiveLaneMaskPhi</a>();</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160; </div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;    <span class="comment">// Introduce the early-exit compare IV &lt;= BTC to form header block mask.</span></div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;    <span class="comment">// This is used instead of IV &lt; TC because TC may wrap, unlike BTC. Start by</span></div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;    <span class="comment">// constructing the desired canonical IV in the header block as its first</span></div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;    <span class="comment">// non-phi instructions.</span></div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160; </div>
<div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;    <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *HeaderVPBB = Plan.<a class="code" href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">getVectorLoopRegion</a>()-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">getEntryBasicBlock</a>();</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;    <span class="keyword">auto</span> NewInsertionPoint = HeaderVPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a72533c6b54501809628b9daee79b9d18">getFirstNonPhi</a>();</div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenCanonicalIVRecipe.html">VPWidenCanonicalIVRecipe</a>(Plan.<a class="code" href="classllvm_1_1VPlan.html#a78ecb150e3ccce636f6eaaa4f080ada8">getCanonicalIV</a>());</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;    HeaderVPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#adfdd504b078cce3b90e7c5cf1f5164db">insert</a>(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, HeaderVPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a72533c6b54501809628b9daee79b9d18">getFirstNonPhi</a>());</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160; </div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;    <a class="code" href="classllvm_1_1VPBuilder_1_1InsertPointGuard.html">VPBuilder::InsertPointGuard</a> Guard(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.setInsertPoint(HeaderVPBB, NewInsertionPoint);</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a> != <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdda6adf97f83acf6453d4a6a4b1070f3754">TailFoldingStyle::None</a> &amp;&amp;</div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;        <a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a> != <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bddadfca60932ecfe430f86d4ecde04e13ab">TailFoldingStyle::DataWithoutLaneMask</a>) {</div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *TC = Plan.<a class="code" href="classllvm_1_1VPlan.html#ac46a4be911b69c85f5786626ce81569b">getOrCreateTripCount</a>();</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;      BlockMask = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.createNaryOp(<a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a79a53c84dbac24c496a4c9a6cf70596c">VPInstruction::ActiveLaneMask</a>, {<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, TC},</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;                                       <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;active.lane.mask&quot;</span>);</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *BTC = Plan.<a class="code" href="classllvm_1_1VPlan.html#a407e8a22d9626d76411c538b17e9601c">getOrCreateBackedgeTakenCount</a>();</div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;      BlockMask = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.createNaryOp(<a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a7428ca8c9fd96ac1a3243f6e38221314">VPInstruction::ICmpULE</a>, {<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, BTC});</div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;    }</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;    <span class="keywordflow">return</span> BlockMaskCache[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = BlockMask;</div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;  }</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160; </div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;  <span class="comment">// This is the block mask. We OR all incoming edges.</span></div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Predecessor : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *EdgeMask = createEdgeMask(Predecessor, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Plan);</div>
<div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;    <span class="keywordflow">if</span> (!EdgeMask) <span class="comment">// Mask of predecessor is all-one so mask of block is too.</span></div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;      <span class="keywordflow">return</span> BlockMaskCache[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = EdgeMask;</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160; </div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;    <span class="keywordflow">if</span> (!BlockMask) { <span class="comment">// BlockMask has its initialized nullptr value.</span></div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;      BlockMask = EdgeMask;</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;    }</div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160; </div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;    BlockMask = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.createOr(BlockMask, EdgeMask, {});</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;  }</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160; </div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;  <span class="keywordflow">return</span> BlockMaskCache[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = BlockMask;</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;}</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160; </div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *VPRecipeBuilder::tryToWidenMemory(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;                                                <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>,</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;                                                <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range,</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;                                                <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan) {</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;         <span class="stringliteral">&quot;Must be called with either a load or store&quot;</span>);</div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160; </div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;  <span class="keyword">auto</span> willWiden = [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">LoopVectorizationCostModel::InstWidening</a> Decision =</div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;        CM.getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Decision != <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260af974de6a8aba0481a82335fb93471a39">LoopVectorizationCostModel::CM_Unknown</a> &amp;&amp;</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;           <span class="stringliteral">&quot;CM decision should be taken at this point.&quot;</span>);</div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;    <span class="keywordflow">if</span> (Decision == <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971">LoopVectorizationCostModel::CM_Interleave</a>)</div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;    <span class="keywordflow">if</span> (CM.isScalarAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ||</div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;        CM.isProfitableToScalarize(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>))</div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;    <span class="keywordflow">return</span> Decision != <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a03c0934d38787b1773c050deee484126">LoopVectorizationCostModel::CM_Scalarize</a>;</div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;  };</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160; </div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(willWiden, Range))</div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160; </div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">isMaskRequired</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = createBlockInMask(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), *Plan);</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160; </div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;  <span class="comment">// Determine if the pointer operand of the access is either consecutive or</span></div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;  <span class="comment">// reverse consecutive.</span></div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">LoopVectorizationCostModel::InstWidening</a> Decision =</div>
<div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;      CM.getWideningDecision(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Range.Start);</div>
<div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;  <span class="keywordtype">bool</span> Reverse = Decision == <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a058eacbd3c28e2ecec2af7db726ce527">LoopVectorizationCostModel::CM_Widen_Reverse</a>;</div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;  <span class="keywordtype">bool</span> Consecutive =</div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;      Reverse || Decision == <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260adc468760c02910f77bad7525bc66c334">LoopVectorizationCostModel::CM_Widen</a>;</div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160; </div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenMemoryInstructionRecipe.html">VPWidenMemoryInstructionRecipe</a>(*<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0], <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>,</div>
<div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;                                              Consecutive, Reverse);</div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160; </div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenMemoryInstructionRecipe.html">VPWidenMemoryInstructionRecipe</a>(*<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[1], <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0],</div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;                                            <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, Consecutive, Reverse);</div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;}</div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;<span class="comment">/// Creates a VPWidenIntOrFpInductionRecpipe for \p Phi. If needed, it will also</span></div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;<span class="comment">/// insert a recipe to expand the step for the induction recipe.</span></div>
<div class="line"><a name="l08233"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a88c31398385c508ae00dad2313af1811"> 8233</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html">VPWidenIntOrFpInductionRecipe</a> *<a class="code" href="LoopVectorize_8cpp.html#a88c31398385c508ae00dad2313af1811">createWidenInductionRecipes</a>(</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PhiOrTrunc, <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Start,</div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;IndDesc, <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> &amp;CM,</div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;    <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range) {</div>
<div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;  <span class="comment">// Returns true if an instruction \p I should be scalarized instead of</span></div>
<div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;  <span class="comment">// vectorized for the chosen vectorization factor.</span></div>
<div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;  <span class="keyword">auto</span> ShouldScalarizeInstruction = [&amp;CM](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;    <span class="keywordflow">return</span> CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a5f5d6f7a1f29874d1e77a889510c879c">isScalarAfterVectorization</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ||</div>
<div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;           CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a9a6fbca8c965adeb8016a03ca3de2cac">isProfitableToScalarize</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;  };</div>
<div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160; </div>
<div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;  <span class="keywordtype">bool</span> NeedsScalarIVOnly = <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;        <span class="keywordflow">return</span> ShouldScalarizeInstruction(PhiOrTrunc, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;      },</div>
<div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;      Range);</div>
<div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndDesc.<a class="code" href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">getStartValue</a>() ==</div>
<div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;         Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>.<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()));</div>
<div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(IndDesc.<a class="code" href="classllvm_1_1InductionDescriptor.html#aa4d4c780188d04f2d52d48d360ff0a5e">getStep</a>(), &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>) &amp;&amp;</div>
<div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;         <span class="stringliteral">&quot;step must be loop invariant&quot;</span>);</div>
<div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160; </div>
<div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Step =</div>
<div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;      <a class="code" href="namespacellvm_1_1vputils.html#a064976a6c7458b10c24021b7334cec2a">vputils::getOrCreateVPValueForSCEVExpr</a>(Plan, IndDesc.<a class="code" href="classllvm_1_1InductionDescriptor.html#aa4d4c780188d04f2d52d48d360ff0a5e">getStep</a>(), SE);</div>
<div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TruncI = dyn_cast&lt;TruncInst&gt;(PhiOrTrunc)) {</div>
<div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html">VPWidenIntOrFpInductionRecipe</a>(Phi, Start, Step, IndDesc, TruncI,</div>
<div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;                                             !NeedsScalarIVOnly);</div>
<div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;  }</div>
<div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;PHINode&gt;(PhiOrTrunc) &amp;&amp; <span class="stringliteral">&quot;must be a phi node here&quot;</span>);</div>
<div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html">VPWidenIntOrFpInductionRecipe</a>(Phi, Start, Step, IndDesc,</div>
<div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;                                           !NeedsScalarIVOnly);</div>
<div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;}</div>
<div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160; </div>
<div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *VPRecipeBuilder::tryToOptimizeInductionPHI(</div>
<div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range) {</div>
<div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160; </div>
<div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;  <span class="comment">// Check if this is an integer or fp induction. If so, build the recipe that</span></div>
<div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;  <span class="comment">// produces its scalar and vector values.</span></div>
<div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a74bcb5c6d80d9d7fb0eeb1131eeef2dc">getIntOrFpInductionDescriptor</a>(Phi))</div>
<div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopVectorize_8cpp.html#a88c31398385c508ae00dad2313af1811">createWidenInductionRecipes</a>(Phi, Phi, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0], *II, CM, Plan,</div>
<div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;                                       *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, Range);</div>
<div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160; </div>
<div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;  <span class="comment">// Check if this is pointer induction. If so, build the recipe for it.</span></div>
<div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a728069d0bcacf976cbb3764bad749562">getPointerInductionDescriptor</a>(Phi)) {</div>
<div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Step = <a class="code" href="namespacellvm_1_1vputils.html#a064976a6c7458b10c24021b7334cec2a">vputils::getOrCreateVPValueForSCEVExpr</a>(Plan, II-&gt;getStep(),</div>
<div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;                                                           *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>());</div>
<div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;SCEVConstant&gt;(II-&gt;getStep()));</div>
<div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenPointerInductionRecipe.html">VPWidenPointerInductionRecipe</a>(</div>
<div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;        Phi, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0], Step, *II,</div>
<div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;        <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;            [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;              <span class="keywordflow">return</span> CM.isScalarAfterVectorization(Phi, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;            },</div>
<div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;            <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>));</div>
<div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;  }</div>
<div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;}</div>
<div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160; </div>
<div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;<a class="code" href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html">VPWidenIntOrFpInductionRecipe</a> *VPRecipeBuilder::tryToOptimizeInductionTruncate(</div>
<div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;    <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range, <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;  <span class="comment">// Optimize the special case where the source is a constant integer</span></div>
<div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;  <span class="comment">// induction variable. Notice that we can only optimize the &#39;trunc&#39; case</span></div>
<div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;  <span class="comment">// because (a) FP conversions lose precision, (b) sext/zext may wrap, and</span></div>
<div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;  <span class="comment">// (c) other casts depend on pointer size.</span></div>
<div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160; </div>
<div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;  <span class="comment">// Determine whether \p K is a truncation based on an induction variable that</span></div>
<div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;  <span class="comment">// can be optimized.</span></div>
<div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;  <span class="keyword">auto</span> isOptimizableIVTruncate =</div>
<div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K) -&gt; <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<span class="keywordtype">bool</span>(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a>)&gt; {</div>
<div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;    <span class="keywordflow">return</span> [=](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;      <span class="keywordflow">return</span> CM.isOptimizableIVTruncate(K, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;    };</div>
<div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;  };</div>
<div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160; </div>
<div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;          isOptimizableIVTruncate(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>)) {</div>
<div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160; </div>
<div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;    <span class="keyword">auto</span> *Phi = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;II = *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a74bcb5c6d80d9d7fb0eeb1131eeef2dc">getIntOrFpInductionDescriptor</a>(Phi);</div>
<div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Start = Plan.<a class="code" href="classllvm_1_1VPlan.html#a2ae68d987ea959c535f5c99a39c61417">getOrAddVPValue</a>(II.<a class="code" href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">getStartValue</a>());</div>
<div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopVectorize_8cpp.html#a88c31398385c508ae00dad2313af1811">createWidenInductionRecipes</a>(Phi, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Start, II, CM, Plan,</div>
<div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;                                       *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, Range);</div>
<div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;  }</div>
<div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;}</div>
<div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160; </div>
<div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;<a class="code" href="classllvm_1_1PointerUnion.html">VPRecipeOrVPValueTy</a> VPRecipeBuilder::tryToBlend(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi,</div>
<div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;                                                <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>,</div>
<div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;                                                <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan) {</div>
<div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;  <span class="comment">// If all incoming values are equal, the incoming VPValue can be used directly</span></div>
<div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;  <span class="comment">// instead of creating a new VPBlendRecipe.</span></div>
<div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad78da75bd1f157e72100f97d1ecdc756">llvm::all_equal</a>(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>))</div>
<div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0];</div>
<div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160; </div>
<div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;  <span class="keywordtype">unsigned</span> NumIncoming = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>();</div>
<div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;  <span class="comment">// For in-loop reductions, we do not need to create an additional select.</span></div>
<div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *InLoopVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = 0; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> &lt; NumIncoming; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>++) {</div>
<div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PhiOp =</div>
<div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;        dyn_cast_or_null&lt;PHINode&gt;(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>]-&gt;getUnderlyingValue());</div>
<div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;    <span class="keywordflow">if</span> (PhiOp &amp;&amp; CM.isInLoopReduction(PhiOp)) {</div>
<div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!InLoopVal &amp;&amp; <span class="stringliteral">&quot;Found more than one in-loop reduction!&quot;</span>);</div>
<div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;      InLoopVal = <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>];</div>
<div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;    }</div>
<div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;  }</div>
<div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160; </div>
<div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!InLoopVal || NumIncoming == 2) &amp;&amp;</div>
<div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;         <span class="stringliteral">&quot;Found an in-loop reduction for PHI with unexpected number of &quot;</span></div>
<div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;         <span class="stringliteral">&quot;incoming values&quot;</span>);</div>
<div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;  <span class="keywordflow">if</span> (InLoopVal)</div>
<div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0] == InLoopVal ? 1 : 0];</div>
<div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160; </div>
<div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;  <span class="comment">// We know that all PHIs in non-header blocks are converted into selects, so</span></div>
<div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;  <span class="comment">// we don&#39;t have to worry about the insertion order and we can just use the</span></div>
<div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;  <span class="comment">// builder. At this point we generate the predication tree. There may be</span></div>
<div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;  <span class="comment">// duplications since this is a simple recursive scan, but future</span></div>
<div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;  <span class="comment">// optimizations will clean it up.</span></div>
<div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPValue *, 2&gt;</a> OperandsWithMask;</div>
<div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160; </div>
<div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = 0; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> &lt; NumIncoming; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>++) {</div>
<div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *EdgeMask =</div>
<div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;        createEdgeMask(Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>), Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), *Plan);</div>
<div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((EdgeMask || NumIncoming == 1) &amp;&amp;</div>
<div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;           <span class="stringliteral">&quot;Multiple predecessors with one having a full mask&quot;</span>);</div>
<div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;    OperandsWithMask.push_back(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>]);</div>
<div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;    <span class="keywordflow">if</span> (EdgeMask)</div>
<div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;      OperandsWithMask.push_back(EdgeMask);</div>
<div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;  }</div>
<div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;  <span class="keywordflow">return</span> toVPRecipeResult(<span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBlendRecipe.html">VPBlendRecipe</a>(Phi, OperandsWithMask));</div>
<div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;}</div>
<div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160; </div>
<div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;<a class="code" href="classllvm_1_1VPWidenCallRecipe.html">VPWidenCallRecipe</a> *VPRecipeBuilder::tryToWidenCall(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI,</div>
<div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;                                                   <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>,</div>
<div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;                                                   <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range,</div>
<div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;                                                   <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;  <span class="keywordtype">bool</span> IsPredicated = <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;      [<span class="keyword">this</span>, CI](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) {</div>
<div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;        <span class="keywordflow">return</span> CM.isScalarWithPredication(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;      },</div>
<div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;      <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>);</div>
<div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160; </div>
<div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;  <span class="keywordflow">if</span> (IsPredicated)</div>
<div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160; </div>
<div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = <a class="code" href="namespacellvm.html#a11c66d01880f53332fc7ad53f565b039">getVectorIntrinsicIDForCall</a>(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>);</div>
<div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> &amp;&amp; (<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> == Intrinsic::assume || <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> == Intrinsic::lifetime_end ||</div>
<div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;             <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> == Intrinsic::lifetime_start || <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> == Intrinsic::sideeffect ||</div>
<div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;             <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> == Intrinsic::pseudoprobe ||</div>
<div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;             <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> == Intrinsic::experimental_noalias_scope_decl))</div>
<div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160; </div>
<div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPValue *, 4&gt;</a> Ops(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.take_front(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>()));</div>
<div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160; </div>
<div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;  <span class="comment">// Is it beneficial to perform intrinsic call compared to lib call?</span></div>
<div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;  <span class="keywordtype">bool</span> ShouldUseVectorIntrinsic =</div>
<div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;      <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> &amp;&amp; <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;                [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;                  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="namespacellvm_1_1pdb.html#a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a">Variant</a>;</div>
<div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;                  <span class="comment">// Is it beneficial to perform intrinsic call compared to lib</span></div>
<div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;                  <span class="comment">// call?</span></div>
<div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;                  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> CallCost =</div>
<div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;                      CM.getVectorCallCost(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, &amp;Variant);</div>
<div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;                  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> IntrinsicCost =</div>
<div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;                      CM.getVectorIntrinsicCost(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;                  <span class="keywordflow">return</span> IntrinsicCost &lt;= CallCost;</div>
<div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;                },</div>
<div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;                <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>);</div>
<div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;  <span class="keywordflow">if</span> (ShouldUseVectorIntrinsic)</div>
<div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenCallRecipe.html">VPWidenCallRecipe</a>(*CI, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Ops.begin(), Ops.end()), <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>);</div>
<div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160; </div>
<div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="namespacellvm_1_1pdb.html#a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a">Variant</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> VariantVF;</div>
<div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;  <span class="keywordtype">bool</span> NeedsMask = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;  <span class="comment">// Is better to call a vectorized version of the function than to to scalarize</span></div>
<div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;  <span class="comment">// the call?</span></div>
<div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;  <span class="keyword">auto</span> ShouldUseVectorCall = <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;        <span class="comment">// The following case may be scalarized depending on the VF.</span></div>
<div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;        <span class="comment">// The flag shows whether we can use a usual Call for vectorized</span></div>
<div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;        <span class="comment">// version of the instruction.</span></div>
<div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160; </div>
<div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;        <span class="comment">// If we&#39;ve found a variant at a previous VF, then stop looking. A</span></div>
<div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;        <span class="comment">// vectorized variant of a function expects input in a certain shape</span></div>
<div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;        <span class="comment">// -- basically the number of input registers, the number of lanes</span></div>
<div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;        <span class="comment">// per register, and whether there&#39;s a mask required.</span></div>
<div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;        <span class="comment">// We store a pointer to the variant in the VPWidenCallRecipe, so</span></div>
<div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;        <span class="comment">// once we have an appropriate variant it&#39;s only valid for that VF.</span></div>
<div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;        <span class="comment">// This will force a different vplan to be generated for each VF that</span></div>
<div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;        <span class="comment">// finds a valid variant.</span></div>
<div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;        <span class="keywordflow">if</span> (Variant)</div>
<div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;        CM.getVectorCallCost(CI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, &amp;Variant, &amp;NeedsMask);</div>
<div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;        <span class="comment">// If we found a valid vector variant at this VF, then store the VF</span></div>
<div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;        <span class="comment">// in case we need to generate a mask.</span></div>
<div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;        <span class="keywordflow">if</span> (Variant)</div>
<div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;          VariantVF = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>;</div>
<div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1pdb.html#a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a">Variant</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;      },</div>
<div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;      <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>);</div>
<div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;  <span class="keywordflow">if</span> (ShouldUseVectorCall) {</div>
<div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;    <span class="keywordflow">if</span> (NeedsMask) {</div>
<div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;      <span class="comment">// If our vector variant requires a mask, then synthesize an all-true</span></div>
<div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;      <span class="comment">// mask and insert it into the operands vector in the right place.</span></div>
<div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = Plan-&gt;getOrAddVPValue(<a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(</div>
<div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;          <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">IntegerType::getInt1Ty</a>(<a class="code" href="namespacellvm_1_1pdb.html#a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a">Variant</a>-&gt;getFunctionType()-&gt;getContext())));</div>
<div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160; </div>
<div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;      <a class="code" href="structllvm_1_1VFShape.html">VFShape</a> Shape = <a class="code" href="structllvm_1_1VFShape.html#a33df83a8555fc8dd7c7d547576abb354">VFShape::get</a>(*CI, VariantVF, <span class="comment">/*HasGlobalPred=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;      <span class="keywordtype">unsigned</span> MaskPos = 0;</div>
<div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160; </div>
<div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1VFInfo.html">VFInfo</a> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> : <a class="code" href="classllvm_1_1VFDatabase.html#af9abb14ef675e9dee8dd14bd4dd43aac">VFDatabase::getMappings</a>(*CI))</div>
<div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Shape == Shape) {</div>
<div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.isMasked() &amp;&amp; <span class="stringliteral">&quot;Vector function info shape mismatch&quot;</span>);</div>
<div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;          MaskPos = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getParamIndexForOptionalMask().value();</div>
<div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;        }</div>
<div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160; </div>
<div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;      Ops.insert(Ops.begin() + MaskPos, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;    }</div>
<div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160; </div>
<div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenCallRecipe.html">VPWidenCallRecipe</a>(*CI, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Ops.begin(), Ops.end()),</div>
<div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;                                 <a class="code" href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">Intrinsic::not_intrinsic</a>, Variant);</div>
<div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;  }</div>
<div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160; </div>
<div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;}</div>
<div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160; </div>
<div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;<span class="keywordtype">bool</span> VPRecipeBuilder::shouldWiden(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;BranchInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;         !isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <span class="stringliteral">&quot;Instruction should have been handled earlier&quot;</span>);</div>
<div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;  <span class="comment">// Instruction should be widened, unless it is scalar after vectorization,</span></div>
<div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;  <span class="comment">// scalarization is profitable or it is predicated.</span></div>
<div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;  <span class="keyword">auto</span> WillScalarize = [<span class="keyword">this</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;    <span class="keywordflow">return</span> CM.isScalarAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ||</div>
<div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;           CM.isProfitableToScalarize(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ||</div>
<div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;           CM.isScalarWithPredication(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;  };</div>
<div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(WillScalarize,</div>
<div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;                                                             Range);</div>
<div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;}</div>
<div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160; </div>
<div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *VPRecipeBuilder::tryToWiden(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;                                          <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>,</div>
<div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;                                          <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB, <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan) {</div>
<div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;  <span class="keywordflow">case</span> Instruction::URem: {</div>
<div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;    <span class="comment">// If not provably safe, use a select to form a safe divisor before widening the</span></div>
<div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;    <span class="comment">// div/rem operation itself.  Otherwise fall through to general handling below.</span></div>
<div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;    <span class="keywordflow">if</span> (CM.isPredicatedInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPValue *&gt;</a> Ops(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.begin(), <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.end());</div>
<div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = createBlockInMask(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), *Plan);</div>
<div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *One =</div>
<div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;        Plan-&gt;getOrAddExternalDef(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), 1u, <span class="keyword">false</span>));</div>
<div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;      <span class="keyword">auto</span> *SafeRHS =</div>
<div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;         <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>, {<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, Ops[1], One},</div>
<div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;                           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc());</div>
<div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;      VPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(SafeRHS);</div>
<div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;      Ops[1] = SafeRHS;</div>
<div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenRecipe.html">VPWidenRecipe</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Ops.begin(), Ops.end()));</div>
<div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160;    }</div>
<div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;    <a class="code" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div>
<div class="line"><a name="l08497"></a><span class="lineno"> 8497</span>&#160;  }</div>
<div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;  <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;  <span class="keywordflow">case</span> Instruction::FCmp:</div>
<div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;  <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;  <span class="keywordflow">case</span> Instruction::FMul:</div>
<div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;  <span class="keywordflow">case</span> Instruction::FNeg:</div>
<div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;  <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToSI:</div>
<div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;  <span class="keywordflow">case</span> Instruction::FPTrunc:</div>
<div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;  <span class="keywordflow">case</span> Instruction::FRem:</div>
<div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;  <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;  <span class="keywordflow">case</span> Instruction::ICmp:</div>
<div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;  <span class="keywordflow">case</span> Instruction::IntToPtr:</div>
<div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;  <span class="keywordflow">case</span> Instruction::PtrToInt:</div>
<div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>:</div>
<div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;  <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;  <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;  <span class="keywordflow">case</span> Instruction::Freeze:</div>
<div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenRecipe.html">VPWidenRecipe</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.begin(), <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.end()));</div>
<div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;  };</div>
<div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;}</div>
<div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160; </div>
<div class="line"><a name="l08533"></a><span class="lineno"><a class="line" href="classllvm_1_1VPRecipeBuilder.html#a6d8fbabf45554d7d598dc8eb4eca41cf"> 8533</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPRecipeBuilder.html#a6d8fbabf45554d7d598dc8eb4eca41cf">VPRecipeBuilder::fixHeaderPhis</a>() {</div>
<div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigLatch = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html">VPHeaderPHIRecipe</a> *R : PhisToFix) {</div>
<div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;    <span class="keyword">auto</span> *PN = cast&lt;PHINode&gt;(R-&gt;getUnderlyingValue());</div>
<div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;    <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *IncR =</div>
<div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;        getRecipe(cast&lt;Instruction&gt;(PN-&gt;getIncomingValueForBlock(OrigLatch)));</div>
<div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;    R-&gt;addOperand(IncR-&gt;<a class="code" href="classllvm_1_1VPDef.html#a3108e9c1f28b99620c1e92228935e5cb">getVPSingleValue</a>());</div>
<div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;  }</div>
<div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;}</div>
<div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160; </div>
<div class="line"><a name="l08543"></a><span class="lineno"><a class="line" href="classllvm_1_1VPRecipeBuilder.html#aee3b56a46e2674fc6f8c58beacca580e"> 8543</a></span>&#160;<a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *<a class="code" href="classllvm_1_1VPRecipeBuilder.html#aee3b56a46e2674fc6f8c58beacca580e">VPRecipeBuilder::handleReplication</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range,</div>
<div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;                                                 <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB,</div>
<div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;                                                 <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;  <span class="keywordtype">bool</span> IsUniform = <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) { <span class="keywordflow">return</span> CM.isUniformAfterVectorization(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>); },</div>
<div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;      Range);</div>
<div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160; </div>
<div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;  <span class="keywordtype">bool</span> IsPredicated = CM.isPredicatedInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160; </div>
<div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;  <span class="comment">// Even if the instruction is not marked as uniform, there are certain</span></div>
<div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;  <span class="comment">// intrinsic calls that can be effectively treated as such, so we check for</span></div>
<div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;  <span class="comment">// them here. Conservatively, we only do this for scalable vectors, since</span></div>
<div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;  <span class="comment">// for fixed-width VFs we can always fall back on full scalarization.</span></div>
<div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;  <span class="keywordflow">if</span> (!IsUniform &amp;&amp; Range.Start.isScalable() &amp;&amp; isa&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;    <span class="keywordflow">switch</span> (cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;<a class="code" href="AArch64ISelLowering_8cpp.html#a62766c75f88612ffa652342472e755f6">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;    <span class="keywordflow">case</span> Intrinsic::assume:</div>
<div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;    <span class="keywordflow">case</span> Intrinsic::lifetime_start:</div>
<div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;    <span class="keywordflow">case</span> Intrinsic::lifetime_end:</div>
<div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;      <span class="comment">// For scalable vectors if one of the operands is variant then we still</span></div>
<div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;      <span class="comment">// want to mark as uniform, which will generate one instruction for just</span></div>
<div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;      <span class="comment">// the first lane of the vector. We can&#39;t scalarize the call in the same</span></div>
<div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;      <span class="comment">// way as for fixed-width vectors because we don&#39;t know how many lanes</span></div>
<div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;      <span class="comment">// there are.</span></div>
<div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;      <span class="comment">// The reasons for doing it this way for scalable vectors are:</span></div>
<div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;      <span class="comment">//   1. For the assume intrinsic generating the instruction for the first</span></div>
<div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;      <span class="comment">//      lane is still be better than not generating any at all. For</span></div>
<div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;      <span class="comment">//      example, the input may be a splat across all lanes.</span></div>
<div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;      <span class="comment">//   2. For the lifetime start/end intrinsics the pointer operand only</span></div>
<div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;      <span class="comment">//      does anything useful when the input comes from a stack object,</span></div>
<div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160;      <span class="comment">//      which suggests it should always be uniform. For non-stack objects</span></div>
<div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;      <span class="comment">//      the effect is to poison the object, which still allows us to</span></div>
<div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;      <span class="comment">//      remove the call.</span></div>
<div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;      IsUniform = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;    }</div>
<div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;  }</div>
<div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160; </div>
<div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;  <span class="keyword">auto</span> *Recipe = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPReplicateRecipe.html">VPReplicateRecipe</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Plan.<a class="code" href="classllvm_1_1VPlan.html#abe79ac15821aeb8469d0c44845beca30">mapToVPValues</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands()),</div>
<div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;                                       IsUniform, IsPredicated);</div>
<div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160; </div>
<div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;  <span class="comment">// Find if I uses a predicated instruction. If so, it will use its scalar</span></div>
<div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;  <span class="comment">// value. Avoid hoisting the insert-element which packs the scalar value into</span></div>
<div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;  <span class="comment">// a vector value, as that happens iff all users use the vector value.</span></div>
<div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : Recipe-&gt;operands()) {</div>
<div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;    <span class="keyword">auto</span> *PredR =</div>
<div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;        dyn_cast_or_null&lt;VPPredInstPHIRecipe&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getDefiningRecipe());</div>
<div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;    <span class="keywordflow">if</span> (!PredR)</div>
<div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;    <span class="keyword">auto</span> *RepR = cast&lt;VPReplicateRecipe&gt;(</div>
<div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;        PredR-&gt;getOperand(0)-&gt;getDefiningRecipe());</div>
<div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RepR-&gt;isPredicated() &amp;&amp;</div>
<div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;           <span class="stringliteral">&quot;expected Replicate recipe to be predicated&quot;</span>);</div>
<div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;    RepR-&gt;setAlsoPack(<span class="keyword">false</span>);</div>
<div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;  }</div>
<div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160; </div>
<div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;  <span class="comment">// Finalize the recipe for Instr, first if it is not predicated.</span></div>
<div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;  <span class="keywordflow">if</span> (!IsPredicated) {</div>
<div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Scalarizing:&quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;    setRecipe(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Recipe);</div>
<div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;    Plan.<a class="code" href="classllvm_1_1VPlan.html#a8b154f99f67a02253826309af90a005c">addVPValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Recipe);</div>
<div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;    VPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(Recipe);</div>
<div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;    <span class="keywordflow">return</span> VPBB;</div>
<div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;  }</div>
<div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Scalarizing and predicating:&quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160; </div>
<div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;  <a class="code" href="classllvm_1_1VPBlockBase.html">VPBlockBase</a> *SingleSucc = VPBB-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a069e942283ba29dd76593696dd93bf8f">getSingleSuccessor</a>();</div>
<div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SingleSucc &amp;&amp; <span class="stringliteral">&quot;VPBB must have a single successor when handling &quot;</span></div>
<div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;                       <span class="stringliteral">&quot;predicated replication.&quot;</span>);</div>
<div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a61f1451694a3638db85170c7f55d5581">VPBlockUtils::disconnectBlocks</a>(VPBB, SingleSucc);</div>
<div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;  <span class="comment">// Record predicated instructions for above packing optimizations.</span></div>
<div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;  <a class="code" href="classllvm_1_1VPBlockBase.html">VPBlockBase</a> *<a class="code" href="classllvm_1_1Region.html">Region</a> = createReplicateRegion(Recipe, Plan);</div>
<div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">VPBlockUtils::insertBlockAfter</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>, VPBB);</div>
<div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;  <span class="keyword">auto</span> *RegSucc = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>();</div>
<div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">VPBlockUtils::insertBlockAfter</a>(RegSucc, <a class="code" href="classllvm_1_1Region.html">Region</a>);</div>
<div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#abc51f1d1a60a9d62ebe015d72ea11699">VPBlockUtils::connectBlocks</a>(RegSucc, SingleSucc);</div>
<div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;  <span class="keywordflow">return</span> RegSucc;</div>
<div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;}</div>
<div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160; </div>
<div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;<a class="code" href="classllvm_1_1VPRegionBlock.html">VPRegionBlock</a> *</div>
<div class="line"><a name="l08625"></a><span class="lineno"><a class="line" href="classllvm_1_1VPRecipeBuilder.html#a04c3df2a7eefca27fc4a06e2dd47ba93"> 8625</a></span>&#160;<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a04c3df2a7eefca27fc4a06e2dd47ba93">VPRecipeBuilder::createReplicateRegion</a>(<a class="code" href="classllvm_1_1VPReplicateRecipe.html">VPReplicateRecipe</a> *PredRecipe,</div>
<div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;                                       <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr = PredRecipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aed192af325b471afff047cf0f320f1ad">getUnderlyingInstr</a>();</div>
<div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;  <span class="comment">// Instructions marked for predication are replicated and placed under an</span></div>
<div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;  <span class="comment">// if-then construct to prevent side-effects.</span></div>
<div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;  <span class="comment">// Generate recipes to compute the block mask for this region.</span></div>
<div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *BlockInMask = createBlockInMask(Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), Plan);</div>
<div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160; </div>
<div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;  <span class="comment">// Build the triangular if-then region.</span></div>
<div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;  std::string RegionName = (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;pred.&quot;</span>) + Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#af279f7d85885f932c1e7cdc2b77cb4ad">getOpcodeName</a>()).str();</div>
<div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Instr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() &amp;&amp; <span class="stringliteral">&quot;Predicated instruction not in any basic block&quot;</span>);</div>
<div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;  <span class="keyword">auto</span> *BOMRecipe = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBranchOnMaskRecipe.html">VPBranchOnMaskRecipe</a>(BlockInMask);</div>
<div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;  <span class="keyword">auto</span> *Entry = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(RegionName) + <span class="stringliteral">&quot;.entry&quot;</span>, BOMRecipe);</div>
<div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;  <span class="keyword">auto</span> *PHIRecipe = Instr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>()</div>
<div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;                        ? nullptr</div>
<div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;                        : <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPPredInstPHIRecipe.html">VPPredInstPHIRecipe</a>(PredRecipe);</div>
<div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;  <span class="keywordflow">if</span> (PHIRecipe) {</div>
<div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;    setRecipe(Instr, PHIRecipe);</div>
<div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;    Plan.<a class="code" href="classllvm_1_1VPlan.html#a8b154f99f67a02253826309af90a005c">addVPValue</a>(Instr, PHIRecipe);</div>
<div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;    setRecipe(Instr, PredRecipe);</div>
<div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;    Plan.<a class="code" href="classllvm_1_1VPlan.html#a8b154f99f67a02253826309af90a005c">addVPValue</a>(Instr, PredRecipe);</div>
<div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;  }</div>
<div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160; </div>
<div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;  <span class="keyword">auto</span> *Exiting = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(RegionName) + <span class="stringliteral">&quot;.continue&quot;</span>, PHIRecipe);</div>
<div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;  <span class="keyword">auto</span> *Pred = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(RegionName) + <span class="stringliteral">&quot;.if&quot;</span>, PredRecipe);</div>
<div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;  <a class="code" href="classllvm_1_1VPRegionBlock.html">VPRegionBlock</a> *<a class="code" href="classllvm_1_1Region.html">Region</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPRegionBlock.html">VPRegionBlock</a>(Entry, Exiting, RegionName, <span class="keyword">true</span>);</div>
<div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160; </div>
<div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;  <span class="comment">// Note: first set Entry as region entry and then connect successors starting</span></div>
<div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;  <span class="comment">// from it in order, to propagate the &quot;parent&quot; of each VPBasicBlock.</span></div>
<div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a3a43b6445802190031bda62347e97453">VPBlockUtils::insertTwoBlocksAfter</a>(Pred, Exiting, Entry);</div>
<div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#abc51f1d1a60a9d62ebe015d72ea11699">VPBlockUtils::connectBlocks</a>(Pred, Exiting);</div>
<div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160; </div>
<div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Region.html">Region</a>;</div>
<div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;}</div>
<div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160; </div>
<div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;<a class="code" href="classllvm_1_1PointerUnion.html">VPRecipeOrVPValueTy</a></div>
<div class="line"><a name="l08662"></a><span class="lineno"><a class="line" href="classllvm_1_1VPRecipeBuilder.html#af117cd3e7197868b568d922d2d504c04"> 8662</a></span>&#160;<a class="code" href="classllvm_1_1VPRecipeBuilder.html#af117cd3e7197868b568d922d2d504c04">VPRecipeBuilder::tryToCreateWidenRecipe</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr,</div>
<div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;                                        <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;VPValue *&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>,</div>
<div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;                                        <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range, <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB,</div>
<div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;                                        <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan) {</div>
<div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;  <span class="comment">// First, check for specific widening recipes that deal with inductions, Phi</span></div>
<div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;  <span class="comment">// nodes, calls and memory operations.</span></div>
<div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;  <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *Recipe;</div>
<div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Phi = dyn_cast&lt;PHINode&gt;(Instr)) {</div>
<div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;    <span class="keywordflow">if</span> (Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;      <span class="keywordflow">return</span> tryToBlend(Phi, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, Plan);</div>
<div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160; </div>
<div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;    <span class="comment">// Always record recipes for header phis. Later first-order recurrence phis</span></div>
<div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;    <span class="comment">// can have earlier phis as incoming values.</span></div>
<div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;    recordRecipeOf(Phi);</div>
<div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160; </div>
<div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;    <span class="keywordflow">if</span> ((Recipe = tryToOptimizeInductionPHI(Phi, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, *Plan, Range)))</div>
<div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;      <span class="keywordflow">return</span> toVPRecipeResult(Recipe);</div>
<div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160; </div>
<div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;    <a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html">VPHeaderPHIRecipe</a> *PhiRecipe = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5c26e54d871c42c42dc62f9d449c633a">isReductionVariable</a>(Phi) ||</div>
<div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5d6b8f1a562e7d26404946de46d3045b">isFixedOrderRecurrence</a>(Phi)) &amp;&amp;</div>
<div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;           <span class="stringliteral">&quot;can only widen reductions and fixed-order recurrences here&quot;</span>);</div>
<div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *StartV = <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>[0];</div>
<div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a5c26e54d871c42c42dc62f9d449c633a">isReductionVariable</a>(Phi)) {</div>
<div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc =</div>
<div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(Phi)-&gt;second;</div>
<div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a511eda16f9dbdbf7293ea2ba018ffeb7">getRecurrenceStartValue</a>() ==</div>
<div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;             Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()));</div>
<div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;      PhiRecipe = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPReductionPHIRecipe.html">VPReductionPHIRecipe</a>(Phi, RdxDesc, *StartV,</div>
<div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;                                           CM.isInLoopReduction(Phi),</div>
<div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;                                           CM.useOrderedReductions(RdxDesc));</div>
<div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;      <span class="comment">// TODO: Currently fixed-order recurrences are modeled as chains of</span></div>
<div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;      <span class="comment">// first-order recurrences. If there are no users of the intermediate</span></div>
<div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;      <span class="comment">// recurrences in the chain, the fixed order recurrence should be modeled</span></div>
<div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;      <span class="comment">// directly, enabling more efficient codegen.</span></div>
<div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;      PhiRecipe = <span class="keyword">new</span> <a class="code" href="structllvm_1_1VPFirstOrderRecurrencePHIRecipe.html">VPFirstOrderRecurrencePHIRecipe</a>(Phi, *StartV);</div>
<div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;    }</div>
<div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160; </div>
<div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;    <span class="comment">// Record the incoming value from the backedge, so we can add the incoming</span></div>
<div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;    <span class="comment">// value from the backedge after all recipes have been created.</span></div>
<div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;    <span class="keyword">auto</span> *Inc = cast&lt;Instruction&gt;(</div>
<div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;        Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()));</div>
<div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;    <span class="keyword">auto</span> RecipeIter = Ingredient2Recipe.find(Inc);</div>
<div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;    <span class="keywordflow">if</span> (RecipeIter == Ingredient2Recipe.end())</div>
<div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;      recordRecipeOf(Inc);</div>
<div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160; </div>
<div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;    PhisToFix.push_back(PhiRecipe);</div>
<div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;    <span class="keywordflow">return</span> toVPRecipeResult(PhiRecipe);</div>
<div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;  }</div>
<div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160; </div>
<div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;  <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(Instr) &amp;&amp;</div>
<div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;      (Recipe = tryToOptimizeInductionTruncate(cast&lt;TruncInst&gt;(Instr), <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>,</div>
<div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;                                               Range, *Plan)))</div>
<div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;    <span class="keywordflow">return</span> toVPRecipeResult(Recipe);</div>
<div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160; </div>
<div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;  <span class="comment">// All widen recipes below deal only with VF &gt; 1.</span></div>
<div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">LoopVectorizationPlanner::getDecisionAndClampRange</a>(</div>
<div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;          [&amp;](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>(); }, Range))</div>
<div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160; </div>
<div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(Instr))</div>
<div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;    <span class="keywordflow">return</span> toVPRecipeResult(tryToWidenCall(CI, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, Range, Plan));</div>
<div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160; </div>
<div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Instr) || isa&lt;StoreInst&gt;(Instr))</div>
<div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;    <span class="keywordflow">return</span> toVPRecipeResult(tryToWidenMemory(Instr, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, Range, Plan));</div>
<div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160; </div>
<div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;  <span class="keywordflow">if</span> (!shouldWiden(Instr, Range))</div>
<div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160; </div>
<div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(Instr))</div>
<div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;    <span class="keywordflow">return</span> toVPRecipeResult(<span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenGEPRecipe.html">VPWidenGEPRecipe</a>(</div>
<div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;        <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.begin(), <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.end()), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>));</div>
<div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160; </div>
<div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Instr)) {</div>
<div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;    <span class="keywordtype">bool</span> InvariantCond =</div>
<div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>()-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#ae0994d8207b94ad22ecebc1a6bc580f1">getSCEV</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0)), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>);</div>
<div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;    <span class="keywordflow">return</span> toVPRecipeResult(<span class="keyword">new</span> <a class="code" href="classllvm_1_1VPWidenSelectRecipe.html">VPWidenSelectRecipe</a>(</div>
<div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;        *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.begin(), <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.end()), InvariantCond));</div>
<div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;  }</div>
<div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160; </div>
<div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;  <span class="keywordflow">return</span> toVPRecipeResult(tryToWiden(Instr, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, VPBB, Plan));</div>
<div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;}</div>
<div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160; </div>
<div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;<span class="keywordtype">void</span> LoopVectorizationPlanner::buildVPlansWithVPRecipes(<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MinVF,</div>
<div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;                                                        <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MaxVF) {</div>
<div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() &amp;&amp; <span class="stringliteral">&quot;Inner loop expected.&quot;</span>);</div>
<div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160; </div>
<div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;  <span class="comment">// Add assume instructions we need to drop to DeadInstructions, to prevent</span></div>
<div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;  <span class="comment">// them from being added to the VPlan.</span></div>
<div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;  <span class="comment">// TODO: We only need to drop assumes in blocks that get flattend. If the</span></div>
<div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;  <span class="comment">// control flow is preserved, we should keep them.</span></div>
<div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 4&gt;</a> DeadInstructions;</div>
<div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;  <span class="keyword">auto</span> &amp;ConditionalAssumes = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ab8b683081a6c1fd0558fac2fcaa21ccb">getConditionalAssumes</a>();</div>
<div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;  DeadInstructions.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ConditionalAssumes.begin(), ConditionalAssumes.end());</div>
<div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160; </div>
<div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;  <span class="keyword">auto</span> MaxVFPlusOne = MaxVF.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a7fe5b99b6520cb29c14b69dcf50d031f">getWithIncrement</a>(1);</div>
<div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = MinVF; <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, MaxVFPlusOne);) {</div>
<div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;    <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> SubRange = {<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, MaxVFPlusOne};</div>
<div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;    VPlans.push_back(buildVPlanWithVPRecipes(SubRange, DeadInstructions));</div>
<div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = SubRange.<a class="code" href="structllvm_1_1VFRange.html#a8f3e6ec0ac823874aa93cc9d98081701">End</a>;</div>
<div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;  }</div>
<div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;}</div>
<div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160; </div>
<div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;<span class="comment">// Add the necessary canonical IV and branch recipes required to control the</span></div>
<div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;<span class="comment">// loop.</span></div>
<div class="line"><a name="l08768"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ad9ccfd67ade0a19f66ed80f54583ac84"> 8768</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#ad9ccfd67ade0a19f66ed80f54583ac84">addCanonicalIVRecipes</a>(<a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;                                  <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdd">TailFoldingStyle</a> <a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a>) {</div>
<div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StartIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IdxTy, 0);</div>
<div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;  <span class="keyword">auto</span> *StartV = Plan.<a class="code" href="classllvm_1_1VPlan.html#a2ae68d987ea959c535f5c99a39c61417">getOrAddVPValue</a>(StartIdx);</div>
<div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160; </div>
<div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;  <span class="comment">// Add a VPCanonicalIVPHIRecipe starting at 0 to the header.</span></div>
<div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;  <span class="keyword">auto</span> *CanonicalIVPHI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPCanonicalIVPHIRecipe.html">VPCanonicalIVPHIRecipe</a>(StartV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;  <a class="code" href="classllvm_1_1VPRegionBlock.html">VPRegionBlock</a> *TopRegion = Plan.<a class="code" href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">getVectorLoopRegion</a>();</div>
<div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *Header = TopRegion-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">getEntryBasicBlock</a>();</div>
<div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;  Header-&gt;insert(CanonicalIVPHI, Header-&gt;begin());</div>
<div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160; </div>
<div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;  <span class="comment">// Add a CanonicalIVIncrement{NUW} VPInstruction to increment the scalar</span></div>
<div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;  <span class="comment">// IV by VF * UF.</span></div>
<div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;  <span class="keywordtype">bool</span> HasNUW = <a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a> == <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bdda6adf97f83acf6453d4a6a4b1070f3754">TailFoldingStyle::None</a>;</div>
<div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;  <span class="keyword">auto</span> *CanonicalIVIncrement =</div>
<div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(HasNUW ? <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0acb9cad050d376980af6215c2bad710f3">VPInstruction::CanonicalIVIncrementNUW</a></div>
<div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;                               : <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a9cb3d1b401edba8e81b64f7c83a921d0">VPInstruction::CanonicalIVIncrement</a>,</div>
<div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;                        {CanonicalIVPHI}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;index.next&quot;</span>);</div>
<div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;  CanonicalIVPHI-&gt;<a class="code" href="classllvm_1_1VPUser.html#af4a3b471097ab37b1672a0d88869ea51">addOperand</a>(CanonicalIVIncrement);</div>
<div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160; </div>
<div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *EB = TopRegion-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a33d7fc49dbb786dce0e0c5762f067935">getExitingBasicBlock</a>();</div>
<div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;  EB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(CanonicalIVIncrement);</div>
<div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160; </div>
<div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">Style</a> == <a class="code" href="namespacellvm.html#ada31142763d41520644d228c139a4bddad817e2199b89933da1a3cd7e130cd782">TailFoldingStyle::DataAndControlFlow</a>) {</div>
<div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;    <span class="comment">// Create the active lane mask instruction in the vplan preheader.</span></div>
<div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;    <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *Preheader = Plan.<a class="code" href="classllvm_1_1VPlan.html#a386bbf298b1f43a45977b7414925f8a3">getEntry</a>()-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">getEntryBasicBlock</a>();</div>
<div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160; </div>
<div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;    <span class="comment">// We can&#39;t use StartV directly in the ActiveLaneMask VPInstruction, since</span></div>
<div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;    <span class="comment">// we have to take unrolling into account. Each part needs to start at</span></div>
<div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;    <span class="comment">//   Part * VF</span></div>
<div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;    <span class="keyword">auto</span> *CanonicalIVIncrementParts =</div>
<div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;        <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(HasNUW ? <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a3aa58947db2958029d3f000278ad2fb5">VPInstruction::CanonicalIVIncrementForPartNUW</a></div>
<div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;                                 : <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0ad271d9d05bf5644dfa1487b3fc42a131">VPInstruction::CanonicalIVIncrementForPart</a>,</div>
<div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;                          {StartV}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;index.part.next&quot;</span>);</div>
<div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;    Preheader-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(CanonicalIVIncrementParts);</div>
<div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160; </div>
<div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;    <span class="comment">// Create the ActiveLaneMask instruction using the correct start values.</span></div>
<div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *TC = Plan.<a class="code" href="classllvm_1_1VPlan.html#ac46a4be911b69c85f5786626ce81569b">getOrCreateTripCount</a>();</div>
<div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;    <span class="keyword">auto</span> *EntryALM = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(<a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a79a53c84dbac24c496a4c9a6cf70596c">VPInstruction::ActiveLaneMask</a>,</div>
<div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;                                       {CanonicalIVIncrementParts, TC}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;                                       <span class="stringliteral">&quot;active.lane.mask.entry&quot;</span>);</div>
<div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;    Preheader-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(EntryALM);</div>
<div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160; </div>
<div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;    <span class="comment">// Now create the ActiveLaneMaskPhi recipe in the main loop using the</span></div>
<div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;    <span class="comment">// preheader ActiveLaneMask instruction.</span></div>
<div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;    <span class="keyword">auto</span> *LaneMaskPhi = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPActiveLaneMaskPHIRecipe.html">VPActiveLaneMaskPHIRecipe</a>(EntryALM, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>());</div>
<div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;    Header-&gt;insert(LaneMaskPhi, Header-&gt;getFirstNonPhi());</div>
<div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160; </div>
<div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;    <span class="comment">// Create the active lane mask for the next iteration of the loop.</span></div>
<div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;    CanonicalIVIncrementParts =</div>
<div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;        <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(HasNUW ? <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a3aa58947db2958029d3f000278ad2fb5">VPInstruction::CanonicalIVIncrementForPartNUW</a></div>
<div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;                                 : <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0ad271d9d05bf5644dfa1487b3fc42a131">VPInstruction::CanonicalIVIncrementForPart</a>,</div>
<div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;                          {CanonicalIVIncrement}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;    EB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(CanonicalIVIncrementParts);</div>
<div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160; </div>
<div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;    <span class="keyword">auto</span> *ALM = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(<a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a79a53c84dbac24c496a4c9a6cf70596c">VPInstruction::ActiveLaneMask</a>,</div>
<div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;                                  {CanonicalIVIncrementParts, TC}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;                                  <span class="stringliteral">&quot;active.lane.mask.next&quot;</span>);</div>
<div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;    EB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(ALM);</div>
<div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;    LaneMaskPhi-&gt;addOperand(ALM);</div>
<div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160; </div>
<div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;    <span class="comment">// We have to invert the mask here because a true condition means jumping</span></div>
<div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;    <span class="comment">// to the exit block.</span></div>
<div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;    <span class="keyword">auto</span> *NotMask = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(<a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0adc31f61474346e1f42ec58902ee8a48b">VPInstruction::Not</a>, ALM, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;    EB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(NotMask);</div>
<div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160; </div>
<div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;    <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a> *BranchBack =</div>
<div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;        <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(<a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a0062eccdb4956531f7b6a3cf71c3320c">VPInstruction::BranchOnCond</a>, {NotMask}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;    EB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(BranchBack);</div>
<div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;    <span class="comment">// Add the BranchOnCount VPInstruction to the latch.</span></div>
<div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;    <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a> *BranchBack = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(</div>
<div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;        <a class="code" href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a49dcace93798ddd457a9d4e584bbc9a2">VPInstruction::BranchOnCount</a>,</div>
<div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;        {CanonicalIVIncrement, &amp;Plan.<a class="code" href="classllvm_1_1VPlan.html#a9750fe62b7bd8ad0214ab3b58cd1e8e9">getVectorTripCount</a>()}, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;    EB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(BranchBack);</div>
<div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;  }</div>
<div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;}</div>
<div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160; </div>
<div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;<span class="comment">// Add exit values to \p Plan. VPLiveOuts are added for each LCSSA phi in the</span></div>
<div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;<span class="comment">// original exit block.</span></div>
<div class="line"><a name="l08848"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a4db4058a9fd1bcf40c14d688961ed289"> 8848</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#a4db4058a9fd1bcf40c14d688961ed289">addUsersInExitBlock</a>(<a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *HeaderVPBB,</div>
<div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;                                <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *MiddleVPBB, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>,</div>
<div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;                                <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan) {</div>
<div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#afd50c2de451ac9fc0865dc747dd2d485">getUniqueExitBlock</a>();</div>
<div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>();</div>
<div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;  <span class="comment">// Only handle single-exit loops with unique exit blocks for now.</span></div>
<div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;  <span class="keywordflow">if</span> (!ExitBB || !ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() || !ExitingBB)</div>
<div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160; </div>
<div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;  <span class="comment">// Introduce VPUsers modeling the exit values.</span></div>
<div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;ExitPhi : ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>()) {</div>
<div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IncomingValue =</div>
<div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;        ExitPhi.getIncomingValueForBlock(ExitingBB);</div>
<div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;    <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *V = Plan.<a class="code" href="classllvm_1_1VPlan.html#a2ae68d987ea959c535f5c99a39c61417">getOrAddVPValue</a>(IncomingValue, <span class="keyword">true</span>);</div>
<div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;    Plan.<a class="code" href="classllvm_1_1VPlan.html#a46d751f1cb40e1d338a3bca30039e00e">addLiveOut</a>(&amp;ExitPhi, V);</div>
<div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;  }</div>
<div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;}</div>
<div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160; </div>
<div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;<a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> LoopVectorizationPlanner::buildVPlanWithVPRecipes(</div>
<div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;    <a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range, <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;DeadInstructions) {</div>
<div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160; </div>
<div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const InterleaveGroup&lt;Instruction&gt;</a> *, 1&gt; InterleaveGroups;</div>
<div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160; </div>
<div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;  <a class="code" href="classllvm_1_1VPRecipeBuilder.html">VPRecipeBuilder</a> RecipeBuilder(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>, CM, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160; </div>
<div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;  <span class="comment">// ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;  <span class="comment">// Pre-construction: record ingredients whose recipes we&#39;ll need to further</span></div>
<div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;  <span class="comment">// process after constructing the initial VPlan.</span></div>
<div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;  <span class="comment">// ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160; </div>
<div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a> : CM.getInLoopReductionChains()) {</div>
<div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.first;</div>
<div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;    <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830e">RecurKind</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> =</div>
<div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(Phi)-&gt;second.getRecurrenceKind();</div>
<div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> &amp;ReductionOperations = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.second;</div>
<div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160; </div>
<div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;    RecipeBuilder.recordRecipeOf(Phi);</div>
<div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;R : ReductionOperations) {</div>
<div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;      RecipeBuilder.recordRecipeOf(R);</div>
<div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;      <span class="comment">// For min/max reductions, where we have a pair of icmp/select, we also</span></div>
<div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;      <span class="comment">// need to record the ICmp recipe, so it can be removed later.</span></div>
<div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af1e93b22913d4a49d00f4cee43c004b8">RecurrenceDescriptor::isSelectCmpRecurrenceKind</a>(Kind) &amp;&amp;</div>
<div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;             <span class="stringliteral">&quot;Only min/max recurrences allowed for inloop reductions&quot;</span>);</div>
<div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af08d243545b64f4b77161992d0e2366e">RecurrenceDescriptor::isMinMaxRecurrenceKind</a>(Kind))</div>
<div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;        RecipeBuilder.recordRecipeOf(cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getOperand(0)));</div>
<div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;    }</div>
<div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;  }</div>
<div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160; </div>
<div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;  <span class="comment">// For each interleave group which is relevant for this (possibly trimmed)</span></div>
<div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;  <span class="comment">// Range, add it to the set of groups to be later applied to the VPlan and add</span></div>
<div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;  <span class="comment">// placeholders for its members&#39; Recipes which we&#39;ll be replacing with a</span></div>
<div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;  <span class="comment">// single VPInterleaveRecipe.</span></div>
<div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup&lt;Instruction&gt;</a> *IG : IAI.getInterleaveGroups()) {</div>
<div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;    <span class="keyword">auto</span> applyIG = [IG, <span class="keyword">this</span>](<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="comment">// Query is illegal for VF == 1</span></div>
<div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;              CM.getWideningDecision(IG-&gt;getInsertPos(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>) ==</div>
<div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;                  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971">LoopVectorizationCostModel::CM_Interleave</a>);</div>
<div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160;    };</div>
<div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;    <span class="keywordflow">if</span> (!getDecisionAndClampRange(applyIG, Range))</div>
<div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;    InterleaveGroups.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(IG);</div>
<div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; IG-&gt;getFactor(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = IG-&gt;getMember(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div>
<div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;        RecipeBuilder.recordRecipeOf(Member);</div>
<div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;  };</div>
<div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160; </div>
<div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;  <span class="comment">// ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;  <span class="comment">// Build initial VPlan: Scan the body of the loop in a topological order to</span></div>
<div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;  <span class="comment">// visit each basic block after having visited its predecessor basic blocks.</span></div>
<div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;  <span class="comment">// ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160; </div>
<div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;  <span class="comment">// Create initial VPlan skeleton, starting with a block for the pre-header,</span></div>
<div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;  <span class="comment">// followed by a region for the vector loop, followed by the middle block. The</span></div>
<div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;  <span class="comment">// skeleton vector loop region contains a header and latch block.</span></div>
<div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *Preheader = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<span class="stringliteral">&quot;vector.ph&quot;</span>);</div>
<div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;  <span class="keyword">auto</span> Plan = std::make_unique&lt;VPlan&gt;(Preheader);</div>
<div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160; </div>
<div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *HeaderVPBB = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<span class="stringliteral">&quot;vector.body&quot;</span>);</div>
<div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *LatchVPBB = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<span class="stringliteral">&quot;vector.latch&quot;</span>);</div>
<div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">VPBlockUtils::insertBlockAfter</a>(LatchVPBB, HeaderVPBB);</div>
<div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;  <span class="keyword">auto</span> *TopRegion = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPRegionBlock.html">VPRegionBlock</a>(HeaderVPBB, LatchVPBB, <span class="stringliteral">&quot;vector loop&quot;</span>);</div>
<div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">VPBlockUtils::insertBlockAfter</a>(TopRegion, Preheader);</div>
<div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *MiddleVPBB = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(<span class="stringliteral">&quot;middle.block&quot;</span>);</div>
<div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;  <a class="code" href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">VPBlockUtils::insertBlockAfter</a>(MiddleVPBB, TopRegion);</div>
<div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160; </div>
<div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DLInst =</div>
<div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;      <a class="code" href="LoopVectorize_8cpp.html#ae03080593554f2ae8e8aeedec6ab55f6">getDebugLocFromInstOrOperands</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a4f213123efd9b8524e1a413c15ed43bf">getPrimaryInduction</a>());</div>
<div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#ad9ccfd67ade0a19f66ed80f54583ac84">addCanonicalIVRecipes</a>(*Plan, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3ba2418cb3fe3918cd5cfa5f6fdce778">getWidestInductionType</a>(),</div>
<div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160;                        DLInst ? DLInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>() : <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(),</div>
<div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;                        CM.getTailFoldingStyle());</div>
<div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160; </div>
<div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;  <span class="comment">// Scan the body of the loop in a topological order to visit each basic block</span></div>
<div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;  <span class="comment">// after having visited its predecessor basic blocks.</span></div>
<div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;  <a class="code" href="classllvm_1_1LoopBlocksDFS.html">LoopBlocksDFS</a> DFS(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>);</div>
<div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;  DFS.perform(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160; </div>
<div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;  <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *VPBB = HeaderVPBB;</div>
<div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(DFS.beginRPO(), DFS.endRPO())) {</div>
<div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;    <span class="comment">// Relevant instructions from basic block BB will be grouped into VPRecipe</span></div>
<div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;    <span class="comment">// ingredients and fill a new VPBasicBlock.</span></div>
<div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;    <span class="keywordtype">unsigned</span> VPBBsForBB = 0;</div>
<div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;    <span class="keywordflow">if</span> (VPBB != HeaderVPBB)</div>
<div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;      VPBB-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a2bd1c53f9607876b22c6fd3ec1e28a50">setName</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName());</div>
<div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.setInsertPoint(VPBB);</div>
<div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160; </div>
<div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;    <span class="comment">// Introduce each ingredient into VPlan.</span></div>
<div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;    <span class="comment">// TODO: Model and preserve debug intrinsics in VPlan.</span></div>
<div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;instructionsWithoutDebug(<span class="keyword">false</span>)) {</div>
<div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr = &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160; </div>
<div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;      <span class="comment">// First filter out irrelevant instructions, to ensure no recipes are</span></div>
<div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;      <span class="comment">// built for them.</span></div>
<div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;      <span class="keywordflow">if</span> (isa&lt;BranchInst&gt;(Instr) || DeadInstructions.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Instr))</div>
<div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160; </div>
<div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPValue *, 4&gt;</a> <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>;</div>
<div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;      <span class="keyword">auto</span> *Phi = dyn_cast&lt;PHINode&gt;(Instr);</div>
<div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;      <span class="keywordflow">if</span> (Phi &amp;&amp; Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) {</div>
<div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;        <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>.push_back(Plan-&gt;getOrAddVPValue(</div>
<div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;            Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>())));</div>
<div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;        <span class="keyword">auto</span> OpRange = Plan-&gt;mapToVPValues(Instr-&gt;<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>());</div>
<div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;        <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a> = {OpRange.begin(), OpRange.end()};</div>
<div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;      }</div>
<div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160; </div>
<div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;      <span class="comment">// Invariant stores inside loop will be deleted and a single store</span></div>
<div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;      <span class="comment">// with the final reduction value will be added to the exit block</span></div>
<div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a34f384c7ff8e4b23cc79156daf2a5c11">isInvariantAddressOfReduction</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand()))</div>
<div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160; </div>
<div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> RecipeOrValue = RecipeBuilder.tryToCreateWidenRecipe(</div>
<div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;              Instr, <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>, Range, VPBB, Plan)) {</div>
<div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;        <span class="comment">// If Instr can be simplified to an existing VPValue, use it.</span></div>
<div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;        <span class="keywordflow">if</span> (RecipeOrValue.is&lt;<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *&gt;()) {</div>
<div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;          <span class="keyword">auto</span> *VPV = RecipeOrValue.get&lt;<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *&gt;();</div>
<div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;          Plan-&gt;addVPValue(Instr, VPV);</div>
<div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;          <span class="comment">// If the re-used value is a recipe, register the recipe for the</span></div>
<div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;          <span class="comment">// instruction, in case the recipe for Instr needs to be recorded.</span></div>
<div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *R = VPV-&gt;getDefiningRecipe())</div>
<div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;            RecipeBuilder.setRecipe(Instr, R);</div>
<div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;        }</div>
<div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;        <span class="comment">// Otherwise, add the new recipe.</span></div>
<div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;        <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *Recipe = RecipeOrValue.get&lt;<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *&gt;();</div>
<div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> : Recipe-&gt;<a class="code" href="classllvm_1_1VPDef.html#aaf083d927b62b4d6c146386a66f86b42">definedValues</a>()) {</div>
<div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;          <span class="keyword">auto</span> *UV = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getUnderlyingValue();</div>
<div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;          Plan-&gt;addVPValue(UV, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div>
<div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;        }</div>
<div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160; </div>
<div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;        RecipeBuilder.setRecipe(Instr, Recipe);</div>
<div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;        <span class="keywordflow">if</span> (isa&lt;VPWidenIntOrFpInductionRecipe&gt;(Recipe) &amp;&amp;</div>
<div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;            HeaderVPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a72533c6b54501809628b9daee79b9d18">getFirstNonPhi</a>() != VPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a4a7f4b8433e9a788149ffd94a0a07051">end</a>()) {</div>
<div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;          <span class="comment">// Move VPWidenIntOrFpInductionRecipes for optimized truncates to the</span></div>
<div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;          <span class="comment">// phi section of HeaderVPBB.</span></div>
<div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;TruncInst&gt;(Instr));</div>
<div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;          Recipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#a8859e5e8cad5653b278964f47414fd84">insertBefore</a>(*HeaderVPBB, HeaderVPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a72533c6b54501809628b9daee79b9d18">getFirstNonPhi</a>());</div>
<div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;          VPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(Recipe);</div>
<div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;      }</div>
<div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160; </div>
<div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;      <span class="comment">// Otherwise, if all widening options failed, Instruction is to be</span></div>
<div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;      <span class="comment">// replicated. This may create a successor for VPBB.</span></div>
<div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;      <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *NextVPBB =</div>
<div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;          RecipeBuilder.handleReplication(Instr, Range, VPBB, *Plan);</div>
<div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;      <span class="keywordflow">if</span> (NextVPBB != VPBB) {</div>
<div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;        VPBB = NextVPBB;</div>
<div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;        VPBB-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a2bd1c53f9607876b22c6fd3ec1e28a50">setName</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;hasName() ? <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() + <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(VPBBsForBB++)</div>
<div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;                                    : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;      }</div>
<div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;    }</div>
<div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160; </div>
<div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;    <a class="code" href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">VPBlockUtils::insertBlockAfter</a>(<span class="keyword">new</span> <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a>(), VPBB);</div>
<div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;    VPBB = cast&lt;VPBasicBlock&gt;(VPBB-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#a069e942283ba29dd76593696dd93bf8f">getSingleSuccessor</a>());</div>
<div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;  }</div>
<div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160; </div>
<div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;  <span class="comment">// After here, VPBB should not be used.</span></div>
<div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;  VPBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160; </div>
<div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#a4db4058a9fd1bcf40c14d688961ed289">addUsersInExitBlock</a>(HeaderVPBB, MiddleVPBB, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, *Plan);</div>
<div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160; </div>
<div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;VPRegionBlock&gt;(Plan-&gt;getVectorLoopRegion()) &amp;&amp;</div>
<div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;         !Plan-&gt;getVectorLoopRegion()-&gt;getEntryBasicBlock()-&gt;empty() &amp;&amp;</div>
<div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;         <span class="stringliteral">&quot;entry block must be set to a VPRegionBlock having a non-empty entry &quot;</span></div>
<div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;         <span class="stringliteral">&quot;VPBasicBlock&quot;</span>);</div>
<div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;  RecipeBuilder.fixHeaderPhis();</div>
<div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160; </div>
<div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;  <span class="comment">// ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;  <span class="comment">// Transform initial VPlan: Apply previously taken decisions, in order, to</span></div>
<div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;  <span class="comment">// bring the VPlan to its final state.</span></div>
<div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;  <span class="comment">// ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160; </div>
<div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a8ca9e67bff6ba425fa439720e9d44e5a">VPlanTransforms::removeRedundantCanonicalIVs</a>(*Plan);</div>
<div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a43ffab656d74603f3f40ec955daa893c">VPlanTransforms::removeRedundantInductionCasts</a>(*Plan);</div>
<div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160; </div>
<div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;  <span class="comment">// Adjust the recipes for any inloop reductions.</span></div>
<div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;  adjustRecipesForReductions(cast&lt;VPBasicBlock&gt;(TopRegion-&gt;getExiting()), Plan,</div>
<div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;                             RecipeBuilder, <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>.Start);</div>
<div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160; </div>
<div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;  <span class="comment">// Sink users of fixed-order recurrence past the recipe defining the previous</span></div>
<div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;  <span class="comment">// value and introduce FirstOrderRecurrenceSplice VPInstructions.</span></div>
<div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a73e5045d156b614bdd5e04f33b4eb9df">VPlanTransforms::adjustFixedOrderRecurrences</a>(*Plan, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160; </div>
<div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;  <span class="comment">// Interleave memory: for each Interleave Group we marked earlier as relevant</span></div>
<div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;  <span class="comment">// for this VPlan, replace the Recipes widening its memory instructions with a</span></div>
<div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;  <span class="comment">// single VPInterleaveRecipe at its insertion point.</span></div>
<div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *IG : InterleaveGroups) {</div>
<div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;    <span class="keyword">auto</span> *Recipe = cast&lt;VPWidenMemoryInstructionRecipe&gt;(</div>
<div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;        RecipeBuilder.getRecipe(IG-&gt;getInsertPos()));</div>
<div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPValue *, 4&gt;</a> StoredValues;</div>
<div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; IG-&gt;getFactor(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast_or_null&lt;StoreInst&gt;(IG-&gt;getMember(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div>
<div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;        <span class="keyword">auto</span> *StoreR =</div>
<div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;            cast&lt;VPWidenMemoryInstructionRecipe&gt;(RecipeBuilder.getRecipe(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>));</div>
<div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;        StoredValues.push_back(StoreR-&gt;getStoredValue());</div>
<div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;      }</div>
<div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160; </div>
<div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;    <span class="keyword">auto</span> *VPIG = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInterleaveRecipe.html">VPInterleaveRecipe</a>(IG, Recipe-&gt;getAddr(), StoredValues,</div>
<div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;                                        Recipe-&gt;getMask());</div>
<div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;    VPIG-&gt;insertBefore(Recipe);</div>
<div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;    <span class="keywordtype">unsigned</span> J = 0;</div>
<div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; IG-&gt;getFactor(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Member = IG-&gt;getMember(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div>
<div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1pdb.html#a6bb7bf8c85135f7a1ff129776219989ea858ba4765e53c712ef672a9570474b1d">Member</a>-&gt;getType()-&gt;isVoidTy()) {</div>
<div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;          <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *OriginalV = Plan-&gt;getVPValue(Member);</div>
<div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;          Plan-&gt;removeVPValueFor(Member);</div>
<div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;          Plan-&gt;addVPValue(Member, VPIG-&gt;getVPValue(J));</div>
<div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;          OriginalV-&gt;<a class="code" href="classllvm_1_1VPValue.html#abaad22a81f7fa4ce5b60ec619ac14c37">replaceAllUsesWith</a>(VPIG-&gt;getVPValue(J));</div>
<div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;          J++;</div>
<div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;        }</div>
<div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;        RecipeBuilder.getRecipe(Member)-&gt;eraseFromParent();</div>
<div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;      }</div>
<div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;  }</div>
<div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160; </div>
<div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>.Start; <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>.End);</div>
<div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;       <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> *= 2)</div>
<div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;    Plan-&gt;addVF(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;  Plan-&gt;setName(<span class="stringliteral">&quot;Initial VPlan&quot;</span>);</div>
<div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160; </div>
<div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;  <span class="comment">// From this point onwards, VPlan-to-VPlan transformations may change the plan</span></div>
<div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;  <span class="comment">// in ways that accessing values using original IR values is incorrect.</span></div>
<div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;  Plan-&gt;disableValue2VPValue();</div>
<div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160; </div>
<div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a7d40593a66085dda7ff8dae1f69f5e5d">VPlanTransforms::optimizeInductions</a>(*Plan, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>());</div>
<div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#aaca9dd97d4c523d8c65274654abe4eb9">VPlanTransforms::removeDeadRecipes</a>(*Plan);</div>
<div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160; </div>
<div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;  <span class="keywordtype">bool</span> ShouldSimplify = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;  <span class="keywordflow">while</span> (ShouldSimplify) {</div>
<div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;    ShouldSimplify = <a class="code" href="structllvm_1_1VPlanTransforms.html#a863efa04a6b4aceed537250ce6f0311a">VPlanTransforms::sinkScalarOperands</a>(*Plan);</div>
<div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;    ShouldSimplify |=</div>
<div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;        <a class="code" href="structllvm_1_1VPlanTransforms.html#a31cd4004ee02b0e1c3ad932a1d5d25c9">VPlanTransforms::mergeReplicateRegionsIntoSuccessors</a>(*Plan);</div>
<div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;    ShouldSimplify |= <a class="code" href="structllvm_1_1VPlanTransforms.html#a7f747c69642f19f752c81b35e8133142">VPlanTransforms::mergeBlocksIntoPredecessors</a>(*Plan);</div>
<div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;  }</div>
<div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160; </div>
<div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a82183858850c672d28b5a7ee8c334e05">VPlanTransforms::removeRedundantExpandSCEVRecipes</a>(*Plan);</div>
<div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a7f747c69642f19f752c81b35e8133142">VPlanTransforms::mergeBlocksIntoPredecessors</a>(*Plan);</div>
<div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160; </div>
<div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="structllvm_1_1VPlanVerifier.html#a2f9cb7e3f52d06a978b9a77fed34cb34">VPlanVerifier::verifyPlanIsValid</a>(*Plan) &amp;&amp; <span class="stringliteral">&quot;VPlan is invalid&quot;</span>);</div>
<div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;  <span class="keywordflow">return</span> Plan;</div>
<div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;}</div>
<div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160; </div>
<div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;<a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> LoopVectorizationPlanner::buildVPlan(<a class="code" href="structllvm_1_1VFRange.html">VFRange</a> &amp;Range) {</div>
<div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;  <span class="comment">// Outer loop handling: They may require CFG and instruction level</span></div>
<div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;  <span class="comment">// transformations before even evaluating whether vectorization is profitable.</span></div>
<div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;  <span class="comment">// Since we cannot modify the incoming IR, we need to build VPlan upfront in</span></div>
<div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;  <span class="comment">// the vectorization pipeline.</span></div>
<div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>());</div>
<div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a> &amp;&amp; <span class="stringliteral">&quot;VPlan-native path is not enabled.&quot;</span>);</div>
<div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160; </div>
<div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;  <span class="comment">// Create new empty VPlan</span></div>
<div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;  <span class="keyword">auto</span> Plan = std::make_unique&lt;VPlan&gt;();</div>
<div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160; </div>
<div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;  <span class="comment">// Build hierarchical CFG</span></div>
<div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;  <a class="code" href="classllvm_1_1VPlanHCFGBuilder.html">VPlanHCFGBuilder</a> HCFGBuilder(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, *Plan);</div>
<div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;  HCFGBuilder.buildHierarchicalCFG();</div>
<div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160; </div>
<div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>.Start; <a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>, <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a>.End);</div>
<div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;       <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> *= 2)</div>
<div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;    Plan-&gt;addVF(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>);</div>
<div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160; </div>
<div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 1&gt;</a> DeadInstructions;</div>
<div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;  <a class="code" href="structllvm_1_1VPlanTransforms.html#a35fadea2bdc4e330baa26473ea778f43">VPlanTransforms::VPInstructionsToVPRecipes</a>(</div>
<div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>, Plan,</div>
<div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;      [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a74bcb5c6d80d9d7fb0eeb1131eeef2dc">getIntOrFpInductionDescriptor</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>); },</div>
<div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;      DeadInstructions, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>);</div>
<div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160; </div>
<div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;  <span class="comment">// Remove the existing terminator of the exiting block of the top-most region.</span></div>
<div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;  <span class="comment">// A BranchOnCount will be added instead when adding the canonical IV recipes.</span></div>
<div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> =</div>
<div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;      Plan-&gt;getVectorLoopRegion()-&gt;getExitingBasicBlock()-&gt;getTerminator();</div>
<div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;  <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160; </div>
<div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#ad9ccfd67ade0a19f66ed80f54583ac84">addCanonicalIVRecipes</a>(*Plan, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3ba2418cb3fe3918cd5cfa5f6fdce778">getWidestInductionType</a>(), <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(),</div>
<div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;                        CM.getTailFoldingStyle());</div>
<div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;  <span class="keywordflow">return</span> Plan;</div>
<div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;}</div>
<div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160; </div>
<div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;<span class="comment">// Adjust the recipes for reductions. For in-loop reductions the chain of</span></div>
<div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;<span class="comment">// instructions leading from the loop exit instr to the phi need to be converted</span></div>
<div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;<span class="comment">// to reductions, with one operand being vector and the other being the scalar</span></div>
<div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;<span class="comment">// reduction chain. For other reductions, a select is introduced between the phi</span></div>
<div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;<span class="comment">// and live-out recipes when folding the tail.</span></div>
<div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;<span class="keywordtype">void</span> LoopVectorizationPlanner::adjustRecipesForReductions(</div>
<div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;    <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *LatchVPBB, <a class="code" href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">VPlanPtr</a> &amp;Plan, <a class="code" href="classllvm_1_1VPRecipeBuilder.html">VPRecipeBuilder</a> &amp;RecipeBuilder,</div>
<div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;    <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> MinVF) {</div>
<div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a> : CM.getInLoopReductionChains()) {</div>
<div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.first;</div>
<div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RecurrenceDescriptor.html">RecurrenceDescriptor</a> &amp;RdxDesc =</div>
<div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">Legal</a>-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">getReductionVars</a>().<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(Phi)-&gt;second;</div>
<div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> &amp;ReductionOperations = <a class="code" href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a>.second;</div>
<div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160; </div>
<div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;    <span class="keywordflow">if</span> (MinVF.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() &amp;&amp; !CM.useOrderedReductions(RdxDesc))</div>
<div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160; </div>
<div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;    <span class="comment">// ReductionOperations are orders top-down from the phi&#39;s use to the</span></div>
<div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;    <span class="comment">// LoopExitValue. We keep a track of the previous item (the Chain) to tell</span></div>
<div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;    <span class="comment">// which of the two operands will remain scalar and which will be reduced.</span></div>
<div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;    <span class="comment">// For minmax the chain will be the select instructions.</span></div>
<div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Chain = Phi;</div>
<div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R : ReductionOperations) {</div>
<div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;      <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *WidenRecipe = RecipeBuilder.<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a82aa4584d5a9e975821f677489de8dcd">getRecipe</a>(R);</div>
<div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;      <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830e">RecurKind</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = RdxDesc.<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">getRecurrenceKind</a>();</div>
<div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160; </div>
<div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *ChainOp = Plan-&gt;getVPValue(Chain);</div>
<div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;      <span class="keywordtype">unsigned</span> FirstOpId;</div>
<div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af1e93b22913d4a49d00f4cee43c004b8">RecurrenceDescriptor::isSelectCmpRecurrenceKind</a>(Kind) &amp;&amp;</div>
<div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;             <span class="stringliteral">&quot;Only min/max recurrences allowed for inloop reductions&quot;</span>);</div>
<div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;      <span class="comment">// Recognize a call to the llvm.fmuladd intrinsic.</span></div>
<div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;      <span class="keywordtype">bool</span> IsFMulAdd = (<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> == <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c">RecurKind::FMulAdd</a>);</div>
<div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!IsFMulAdd || <a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a08416fb970e8c177c7d78452d927c606">RecurrenceDescriptor::isFMulAddIntrinsic</a>(R)) &amp;&amp;</div>
<div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;             <span class="stringliteral">&quot;Expected instruction to be a call to the llvm.fmuladd intrinsic&quot;</span>);</div>
<div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af08d243545b64f4b77161992d0e2366e">RecurrenceDescriptor::isMinMaxRecurrenceKind</a>(Kind)) {</div>
<div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;VPWidenSelectRecipe&gt;(WidenRecipe) &amp;&amp;</div>
<div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;               <span class="stringliteral">&quot;Expected to replace a VPWidenSelectSC&quot;</span>);</div>
<div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;        FirstOpId = 1;</div>
<div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((MinVF.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>() || isa&lt;VPWidenRecipe&gt;(WidenRecipe) ||</div>
<div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;                (IsFMulAdd &amp;&amp; isa&lt;VPWidenCallRecipe&gt;(WidenRecipe))) &amp;&amp;</div>
<div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;               <span class="stringliteral">&quot;Expected to replace a VPWidenSC&quot;</span>);</div>
<div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;        FirstOpId = 0;</div>
<div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;      }</div>
<div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;      <span class="keywordtype">unsigned</span> VecOpId =</div>
<div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;          <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getOperand(FirstOpId) == Chain ? FirstOpId + 1 : FirstOpId;</div>
<div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *VecOp = Plan-&gt;getVPValue(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getOperand(VecOpId));</div>
<div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160; </div>
<div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *CondOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;      <span class="keywordflow">if</span> (CM.blockNeedsPredicationForAnyReason(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getParent())) {</div>
<div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;        <a class="code" href="classllvm_1_1VPBuilder_1_1InsertPointGuard.html">VPBuilder::InsertPointGuard</a> Guard(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.setInsertPoint(WidenRecipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aa8d857a111e16bb3ab8ca90be69559ca">getParent</a>(),</div>
<div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;                               WidenRecipe-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;        CondOp = RecipeBuilder.<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a449e86217b24e56f372ca02516dd70b8">createBlockInMask</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getParent(), *Plan);</div>
<div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;      }</div>
<div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160; </div>
<div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;      <span class="keywordflow">if</span> (IsFMulAdd) {</div>
<div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;        <span class="comment">// If the instruction is a call to the llvm.fmuladd intrinsic then we</span></div>
<div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;        <span class="comment">// need to create an fmul recipe to use as the vector operand for the</span></div>
<div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;        <span class="comment">// fadd reduction.</span></div>
<div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;        <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a> *FMulRecipe = <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPInstruction.html">VPInstruction</a>(</div>
<div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;            Instruction::FMul, {VecOp, Plan-&gt;getVPValue(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getOperand(1))});</div>
<div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;        FMulRecipe-&gt;<a class="code" href="classllvm_1_1VPInstruction.html#abe4301a1c788a14781614de86da5f057">setFastMathFlags</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getFastMathFlags());</div>
<div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;        WidenRecipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aa8d857a111e16bb3ab8ca90be69559ca">getParent</a>()-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#adfdd504b078cce3b90e7c5cf1f5164db">insert</a>(FMulRecipe,</div>
<div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;                                         WidenRecipe-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;        VecOp = FMulRecipe;</div>
<div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;      }</div>
<div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;      <a class="code" href="classllvm_1_1VPReductionRecipe.html">VPReductionRecipe</a> *RedRecipe =</div>
<div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;          <span class="keyword">new</span> <a class="code" href="classllvm_1_1VPReductionRecipe.html">VPReductionRecipe</a>(&amp;RdxDesc, R, ChainOp, VecOp, CondOp, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;      WidenRecipe-&gt;<a class="code" href="classllvm_1_1VPDef.html#a3108e9c1f28b99620c1e92228935e5cb">getVPSingleValue</a>()-&gt;<a class="code" href="classllvm_1_1VPValue.html#abaad22a81f7fa4ce5b60ec619ac14c37">replaceAllUsesWith</a>(RedRecipe);</div>
<div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;      Plan-&gt;removeVPValueFor(R);</div>
<div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;      Plan-&gt;addVPValue(R, RedRecipe);</div>
<div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;      <span class="comment">// Append the recipe to the end of the VPBasicBlock because we need to</span></div>
<div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;      <span class="comment">// ensure that it comes after all of it&#39;s inputs, including CondOp.</span></div>
<div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;      WidenRecipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aa8d857a111e16bb3ab8ca90be69559ca">getParent</a>()-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">appendRecipe</a>(RedRecipe);</div>
<div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;      WidenRecipe-&gt;<a class="code" href="classllvm_1_1VPDef.html#a3108e9c1f28b99620c1e92228935e5cb">getVPSingleValue</a>()-&gt;<a class="code" href="classllvm_1_1VPValue.html#abaad22a81f7fa4ce5b60ec619ac14c37">replaceAllUsesWith</a>(RedRecipe);</div>
<div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;      WidenRecipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aac9dfb61b37082dca00de284bb3309e8">eraseFromParent</a>();</div>
<div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160; </div>
<div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af08d243545b64f4b77161992d0e2366e">RecurrenceDescriptor::isMinMaxRecurrenceKind</a>(Kind)) {</div>
<div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;        <a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> *CompareRecipe =</div>
<div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;            RecipeBuilder.<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a82aa4584d5a9e975821f677489de8dcd">getRecipe</a>(cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getOperand(0)));</div>
<div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;VPWidenRecipe&gt;(CompareRecipe) &amp;&amp;</div>
<div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;               <span class="stringliteral">&quot;Expected to replace a VPWidenSC&quot;</span>);</div>
<div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;VPWidenRecipe&gt;(CompareRecipe)-&gt;getNumUsers() == 0 &amp;&amp;</div>
<div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;               <span class="stringliteral">&quot;Expected no remaining users&quot;</span>);</div>
<div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;        CompareRecipe-&gt;<a class="code" href="classllvm_1_1VPRecipeBase.html#aac9dfb61b37082dca00de284bb3309e8">eraseFromParent</a>();</div>
<div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;      }</div>
<div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;      Chain = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;    }</div>
<div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;  }</div>
<div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160; </div>
<div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;  <span class="comment">// If tail is folded by masking, introduce selects between the phi</span></div>
<div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;  <span class="comment">// and the live-out instruction of each reduction, at the beginning of the</span></div>
<div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;  <span class="comment">// dedicated latch block.</span></div>
<div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;  <span class="keywordflow">if</span> (CM.foldTailByMasking()) {</div>
<div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.setInsertPoint(LatchVPBB, LatchVPBB-&gt;<a class="code" href="classllvm_1_1VPBasicBlock.html#a4e30ea9d413dd86c802fee94aa8b5805">begin</a>());</div>
<div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> &amp;R :</div>
<div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;         Plan-&gt;getVectorLoopRegion()-&gt;getEntryBasicBlock()-&gt;phis()) {</div>
<div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;      <a class="code" href="classllvm_1_1VPReductionPHIRecipe.html">VPReductionPHIRecipe</a> *PhiR = dyn_cast&lt;VPReductionPHIRecipe&gt;(&amp;R);</div>
<div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;      <span class="keywordflow">if</span> (!PhiR || PhiR-&gt;<a class="code" href="classllvm_1_1VPReductionPHIRecipe.html#a9e146bc33d1c57399c7b777576f7768e">isInLoop</a>())</div>
<div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> =</div>
<div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;          RecipeBuilder.<a class="code" href="classllvm_1_1VPRecipeBuilder.html#a449e86217b24e56f372ca02516dd70b8">createBlockInMask</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">OrigLoop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>(), *Plan);</div>
<div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;      <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *Red = PhiR-&gt;<a class="code" href="classllvm_1_1VPHeaderPHIRecipe.html#abd2e60d914344d3ae5b98d7965868320">getBackedgeValue</a>();</div>
<div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Red-&gt;getDefiningRecipe()-&gt;getParent() != LatchVPBB &amp;&amp;</div>
<div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;             <span class="stringliteral">&quot;reduction recipe must be defined before latch&quot;</span>);</div>
<div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.createNaryOp(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>, {<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Red, PhiR});</div>
<div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;    }</div>
<div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;  }</div>
<div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;}</div>
<div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160; </div>
<div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l09259"></a><span class="lineno"><a class="line" href="classllvm_1_1VPInterleaveRecipe.html#a942db1b770fa4cb70c66a2546d88cfb0"> 9259</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPInterleaveRecipe.html#a942db1b770fa4cb70c66a2546d88cfb0">VPInterleaveRecipe::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Indent,</div>
<div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;                               <a class="code" href="classllvm_1_1VPSlotTracker.html">VPSlotTracker</a> &amp;<a class="code" href="classllvm_1_1SlotTracker.html">SlotTracker</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; Indent &lt;&lt; <span class="stringliteral">&quot;INTERLEAVE-GROUP with factor &quot;</span> &lt;&lt; IG-&gt;getFactor() &lt;&lt; <span class="stringliteral">&quot; at &quot;</span>;</div>
<div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;  IG-&gt;getInsertPos()-&gt;printAsOperand(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;  getAddr()-&gt;printAsOperand(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>, <a class="code" href="classllvm_1_1SlotTracker.html">SlotTracker</a>);</div>
<div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = getMask();</div>
<div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>) {</div>
<div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>-&gt;printAsOperand(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>, <a class="code" href="classllvm_1_1SlotTracker.html">SlotTracker</a>);</div>
<div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;  }</div>
<div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160; </div>
<div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;  <span class="keywordtype">unsigned</span> OpIdx = 0;</div>
<div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; IG-&gt;getFactor(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;    <span class="keywordflow">if</span> (!IG-&gt;getMember(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div>
<div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;    <span class="keywordflow">if</span> (getNumStoreOperands() &gt; 0) {</div>
<div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; Indent &lt;&lt; <span class="stringliteral">&quot;  store &quot;</span>;</div>
<div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;      getOperand(1 + OpIdx)-&gt;printAsOperand(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>, <a class="code" href="classllvm_1_1SlotTracker.html">SlotTracker</a>);</div>
<div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; <span class="stringliteral">&quot; to index &quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; Indent &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;      getVPValue(OpIdx)-&gt;printAsOperand(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>, <a class="code" href="classllvm_1_1SlotTracker.html">SlotTracker</a>);</div>
<div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> &lt;&lt; <span class="stringliteral">&quot; = load from index &quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;    }</div>
<div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;    ++OpIdx;</div>
<div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;  }</div>
<div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;}</div>
<div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160; </div>
<div class="line"><a name="l09289"></a><span class="lineno"><a class="line" href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html#a98d8cca54a99e8b64eb406f898565323"> 9289</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html#a98d8cca54a99e8b64eb406f898565323">VPWidenIntOrFpInductionRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a> &amp;&amp; <span class="stringliteral">&quot;Int or FP induction being replicated.&quot;</span>);</div>
<div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160; </div>
<div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Start = getStartValue()-&gt;getLiveInIRValue();</div>
<div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> &amp;<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = getInductionDescriptor();</div>
<div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;  <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *Trunc = getTruncInst();</div>
<div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>;</div>
<div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getType() == <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getStartValue()-&gt;getType() &amp;&amp; <span class="stringliteral">&quot;Types must match&quot;</span>);</div>
<div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;must have vector VF&quot;</span>);</div>
<div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160; </div>
<div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;  <span class="comment">// The value from the original loop to which we are mapping the new induction</span></div>
<div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;  <span class="comment">// variable.</span></div>
<div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryVal = Trunc ? cast&lt;Instruction&gt;(Trunc) : <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>;</div>
<div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160; </div>
<div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;  <span class="comment">// Fast-math-flags propagate from the original induction instruction.</span></div>
<div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>);</div>
<div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionBinOp() &amp;&amp; isa&lt;FPMathOperator&gt;(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionBinOp()))</div>
<div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6370e29617c71c8081bbbc68d6058403">setFastMathFlags</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionBinOp()-&gt;getFastMathFlags());</div>
<div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160; </div>
<div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;  <span class="comment">// Now do the actual transformations, and start with fetching the step value.</span></div>
<div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Step = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getStepValue(), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160; </div>
<div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;PHINode&gt;(EntryVal) || isa&lt;TruncInst&gt;(EntryVal)) &amp;&amp;</div>
<div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;         <span class="stringliteral">&quot;Expected either an induction phi-node or a truncate of it!&quot;</span>);</div>
<div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160; </div>
<div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;  <span class="comment">// Construct the initial value of the vector IV in the vector loop preheader</span></div>
<div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;  <span class="keyword">auto</span> CurrIP = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a79479229269c1abc7dba0840d19b97cf">saveIP</a>();</div>
<div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *VectorPH = State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#aabeafaaaee1bdb12f5e2aeac9a1c2c32">getPreheaderBBFor</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(VectorPH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;  <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(EntryVal)) {</div>
<div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Start-&gt;getType()-&gt;isIntegerTy() &amp;&amp;</div>
<div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;           <span class="stringliteral">&quot;Truncation requires an integer type&quot;</span>);</div>
<div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;    <span class="keyword">auto</span> *TruncType = cast&lt;IntegerType&gt;(EntryVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;    Step = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a08230b6650e11747ef33144f1e463064">CreateTrunc</a>(Step, TruncType);</div>
<div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;    Start = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#af281aa07f9af9601ed68cc9e0468516f">CreateCast</a>(Instruction::Trunc, Start, TruncType);</div>
<div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;  }</div>
<div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160; </div>
<div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="LoopVectorize_8cpp.html#a41355f2c2a12e043fa98f666dff27cc3">getSignedIntOrFpConstant</a>(Start-&gt;getType(), 0);</div>
<div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SplatStart = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, Start);</div>
<div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SteppedStart = <a class="code" href="LoopVectorize_8cpp.html#ac7423cc1aa92a399ed2921544c456c82">getStepVector</a>(</div>
<div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;      SplatStart, Zero, Step, <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionOpcode(), State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>);</div>
<div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160; </div>
<div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;  <span class="comment">// We create vector phi nodes for both integer and floating-point induction</span></div>
<div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;  <span class="comment">// variables. Here, we determine the kind of arithmetic we will perform.</span></div>
<div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> AddOp;</div>
<div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> MulOp;</div>
<div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;  <span class="keywordflow">if</span> (Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;    AddOp = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>;</div>
<div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;    MulOp = <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>;</div>
<div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;    AddOp = <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>.getInductionOpcode();</div>
<div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;    MulOp = Instruction::FMul;</div>
<div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;  }</div>
<div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160; </div>
<div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;  <span class="comment">// Multiply the vectorization factor by the step using integer or</span></div>
<div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;  <span class="comment">// floating-point arithmetic as appropriate.</span></div>
<div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *StepType = Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RuntimeVF;</div>
<div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;  <span class="keywordflow">if</span> (Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>())</div>
<div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;    RuntimeVF = <a class="code" href="namespacellvm.html#ab4ab56724794d299f76a8fada309a727">getRuntimeVFAsFloat</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, StepType, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;    RuntimeVF = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, StepType, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(MulOp, Step, RuntimeVF);</div>
<div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160; </div>
<div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;  <span class="comment">// Create a vector splat to use in the induction update.</span></div>
<div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;  <span class="comment">// FIXME: If the step is non-constant, we create the vector splat with</span></div>
<div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;  <span class="comment">//        IRBuilder. IRBuilder can constant-fold the multiply, but it doesn&#39;t</span></div>
<div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;  <span class="comment">//        handle a constant vector splat.</span></div>
<div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SplatVF = isa&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>)</div>
<div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;                       ? <a class="code" href="classllvm_1_1ConstantVector.html#aa3b241b35b0039b413faf1ef4e873eb7">ConstantVector::getSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, cast&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>))</div>
<div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;                       : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac8778dcbd35e8ae5902050117feb57a0">restoreIP</a>(CurrIP);</div>
<div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160; </div>
<div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;  <span class="comment">// We may need to add the step a number of times, depending on the unroll</span></div>
<div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;  <span class="comment">// factor. The last of those goes into the PHI.</span></div>
<div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *VecInd = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(SteppedStart-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2, <span class="stringliteral">&quot;vec.ind&quot;</span>,</div>
<div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;                                    &amp;*State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#a061d9589bb7761e43240335084adab45">PrevBB</a>-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;  VecInd-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(EntryVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LastInduction = VecInd;</div>
<div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part) {</div>
<div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, LastInduction, Part);</div>
<div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160; </div>
<div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;    <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(EntryVal))</div>
<div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a21efa9b2b01be2288fc1eff59e332091">addMetadata</a>(LastInduction, EntryVal);</div>
<div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160; </div>
<div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;    LastInduction = cast&lt;Instruction&gt;(</div>
<div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(AddOp, LastInduction, SplatVF, <span class="stringliteral">&quot;step.add&quot;</span>));</div>
<div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;    LastInduction-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(EntryVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;  }</div>
<div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160; </div>
<div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;  LastInduction-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;vec.ind.next&quot;</span>);</div>
<div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;  VecInd-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(SteppedStart, VectorPH);</div>
<div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;  <span class="comment">// Add induction update using an incorrect block temporarily. The phi node</span></div>
<div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;  <span class="comment">// will be fixed after VPlan execution. Note that at this point the latch</span></div>
<div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;  <span class="comment">// block cannot be used, as it does not exist yet.</span></div>
<div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;  <span class="comment">// TODO: Model increment value in VPlan, by turning the recipe into a</span></div>
<div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;  <span class="comment">// multi-def and a subclass of VPHeaderPHIRecipe.</span></div>
<div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;  VecInd-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(LastInduction, VectorPH);</div>
<div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;}</div>
<div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160; </div>
<div class="line"><a name="l09390"></a><span class="lineno"><a class="line" href="classllvm_1_1VPWidenPointerInductionRecipe.html#ac53a5d033ba641288b6e15344d880186"> 9390</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPWidenPointerInductionRecipe.html#ac53a5d033ba641288b6e15344d880186">VPWidenPointerInductionRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndDesc.getKind() == <a class="code" href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccab61689ca7d0a024fc4ff52a74d691ae2">InductionDescriptor::IK_PtrInduction</a> &amp;&amp;</div>
<div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;         <span class="stringliteral">&quot;Not a pointer induction according to InductionDescriptor!&quot;</span>);</div>
<div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(getUnderlyingInstr())-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>()-&gt;isPointerTy() &amp;&amp;</div>
<div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;         <span class="stringliteral">&quot;Unexpected type.&quot;</span>);</div>
<div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160; </div>
<div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;  <span class="keyword">auto</span> *IVR = <a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>()-&gt;getPlan()-&gt;getCanonicalIV();</div>
<div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CanonicalIV = cast&lt;PHINode&gt;(State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(IVR, 0));</div>
<div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160; </div>
<div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;  <span class="keywordflow">if</span> (onlyScalarsGenerated(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>)) {</div>
<div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;    <span class="comment">// This is the normalized GEP that starts counting at zero.</span></div>
<div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrInd = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6208690fd9f10a8728554ad68d33d18a">CreateSExtOrTrunc</a>(</div>
<div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;        CanonicalIV, IndDesc.getStep()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;    <span class="comment">// Determine the number of scalars we need to generate for each unroll</span></div>
<div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;    <span class="comment">// iteration. If the instruction is uniform, we only need to generate the</span></div>
<div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;    <span class="comment">// first lane. Otherwise, we generate all VF values.</span></div>
<div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;    <span class="keywordtype">bool</span> IsUniform = <a class="code" href="namespacellvm_1_1vputils.html#aacc20e63a2f2d234ec139ed94e6384ce">vputils::onlyFirstLaneUsed</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((IsUniform || !State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) &amp;&amp;</div>
<div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;           <span class="stringliteral">&quot;Cannot scalarize a scalable VF&quot;</span>);</div>
<div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;    <span class="keywordtype">unsigned</span> Lanes = IsUniform ? 1 : State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</div>
<div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160; </div>
<div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part) {</div>
<div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *PartStart =</div>
<div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;          <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, PtrInd-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, Part);</div>
<div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160; </div>
<div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Lane = 0; Lane &lt; Lanes; ++Lane) {</div>
<div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(</div>
<div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;            PartStart, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(PtrInd-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Lane));</div>
<div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *GlobalIdx = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(PtrInd, Idx);</div>
<div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160; </div>
<div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Step = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getOperand(1), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, Part));</div>
<div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SclrGep = <a class="code" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a>(</div>
<div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;            State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, GlobalIdx, IndDesc.getStartValue(), Step, IndDesc);</div>
<div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;        SclrGep-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;next.gep&quot;</span>);</div>
<div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, SclrGep, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(Part, Lane));</div>
<div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;      }</div>
<div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;    }</div>
<div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;  }</div>
<div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160; </div>
<div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;SCEVConstant&gt;(IndDesc.getStep()) &amp;&amp;</div>
<div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;         <span class="stringliteral">&quot;Induction step not a SCEV constant!&quot;</span>);</div>
<div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *PhiType = IndDesc.getStep()-&gt;getType();</div>
<div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160; </div>
<div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;  <span class="comment">// Build a pointer phi</span></div>
<div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarStartValue = getStartValue()-&gt;getLiveInIRValue();</div>
<div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ScStValueType = ScalarStartValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPointerPhi =</div>
<div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(ScStValueType, 2, <span class="stringliteral">&quot;pointer.phi&quot;</span>, CanonicalIV);</div>
<div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160; </div>
<div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *VectorPH = State.<a class="code" href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">CFG</a>.<a class="code" href="structllvm_1_1VPTransformState_1_1CFGState.html#aabeafaaaee1bdb12f5e2aeac9a1c2c32">getPreheaderBBFor</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;  NewPointerPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ScalarStartValue, VectorPH);</div>
<div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160; </div>
<div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;  <span class="comment">// A pointer induction, performed by using a gep</span></div>
<div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InductionLoc = &amp;*State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>();</div>
<div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160; </div>
<div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarStepValue = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getOperand(1), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RuntimeVF = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, PhiType, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NumUnrolledElems =</div>
<div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">CreateMul</a>(RuntimeVF, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(PhiType, State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>));</div>
<div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *InductionGEP = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(</div>
<div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;      IndDesc.getElementType(), NewPointerPhi,</div>
<div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">CreateMul</a>(ScalarStepValue, NumUnrolledElems), <span class="stringliteral">&quot;ptr.ind&quot;</span>,</div>
<div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;      InductionLoc);</div>
<div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;  <span class="comment">// Add induction update using an incorrect block temporarily. The phi node</span></div>
<div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;  <span class="comment">// will be fixed after VPlan execution. Note that at this point the latch</span></div>
<div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;  <span class="comment">// block cannot be used, as it does not exist yet.</span></div>
<div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;  <span class="comment">// TODO: Model increment value in VPlan, by turning the recipe into a</span></div>
<div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;  <span class="comment">// multi-def and a subclass of VPHeaderPHIRecipe.</span></div>
<div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;  NewPointerPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InductionGEP, VectorPH);</div>
<div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160; </div>
<div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;  <span class="comment">// Create UF many actual address geps that use the pointer</span></div>
<div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;  <span class="comment">// phi as base and a vectorized version of the step value</span></div>
<div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;  <span class="comment">// (&lt;step*0, ..., step*N&gt;) as offset.</span></div>
<div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part) {</div>
<div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *VecPhiType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(PhiType, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StartOffsetScalar =</div>
<div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">CreateMul</a>(RuntimeVF, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(PhiType, Part));</div>
<div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StartOffset =</div>
<div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, StartOffsetScalar);</div>
<div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;    <span class="comment">// Create a vector of consecutive numbers from zero to VF.</span></div>
<div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;    StartOffset = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">CreateAdd</a>(</div>
<div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;        StartOffset, State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae934d6e99e0516d606ae8e65ff6aed63">CreateStepVector</a>(VecPhiType));</div>
<div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160; </div>
<div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ScalarStepValue == State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getOperand(1), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, Part)) &amp;&amp;</div>
<div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;           <span class="stringliteral">&quot;scalar step must be the same across all parts&quot;</span>);</div>
<div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afb5c46a140e1b7f08de54d9c035a8adc">CreateGEP</a>(</div>
<div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;        IndDesc.getElementType(), NewPointerPhi,</div>
<div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">CreateMul</a>(</div>
<div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;            StartOffset,</div>
<div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;            State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, ScalarStepValue),</div>
<div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;            <span class="stringliteral">&quot;vector.gep&quot;</span>));</div>
<div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, Part);</div>
<div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;  }</div>
<div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;}</div>
<div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160; </div>
<div class="line"><a name="l09486"></a><span class="lineno"><a class="line" href="classllvm_1_1VPDerivedIVRecipe.html#a0f37fe11b57d14686c7ca5e7a3846174"> 9486</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPDerivedIVRecipe.html#a0f37fe11b57d14686c7ca5e7a3846174">VPDerivedIVRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a> &amp;&amp; <span class="stringliteral">&quot;VPDerivedIVRecipe being replicated.&quot;</span>);</div>
<div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160; </div>
<div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;  <span class="comment">// Fast-math-flags propagate from the original induction instruction.</span></div>
<div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>);</div>
<div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;  <span class="keywordflow">if</span> (IndDesc.getInductionBinOp() &amp;&amp;</div>
<div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;      isa&lt;FPMathOperator&gt;(IndDesc.getInductionBinOp()))</div>
<div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6370e29617c71c8081bbbc68d6058403">setFastMathFlags</a>(</div>
<div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;        IndDesc.getInductionBinOp()-&gt;getFastMathFlags());</div>
<div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160; </div>
<div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Step = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getStepValue(), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CanonicalIV = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getCanonicalIV(), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *DerivedIV =</div>
<div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;      <a class="code" href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, CanonicalIV,</div>
<div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;                           getStartValue()-&gt;getLiveInIRValue(), Step, IndDesc);</div>
<div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;  DerivedIV-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;offset.idx&quot;</span>);</div>
<div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;  <span class="keywordflow">if</span> (ResultTy != DerivedIV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;           <span class="stringliteral">&quot;Truncation requires an integer step&quot;</span>);</div>
<div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;    DerivedIV = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a08230b6650e11747ef33144f1e463064">CreateTrunc</a>(DerivedIV, ResultTy);</div>
<div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;  }</div>
<div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DerivedIV != CanonicalIV &amp;&amp; <span class="stringliteral">&quot;IV didn&#39;t need transforming?&quot;</span>);</div>
<div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160; </div>
<div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, DerivedIV, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;}</div>
<div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160; </div>
<div class="line"><a name="l09512"></a><span class="lineno"><a class="line" href="classllvm_1_1VPScalarIVStepsRecipe.html#acdd340f122251b99aaee3308d31f1230"> 9512</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPScalarIVStepsRecipe.html#acdd340f122251b99aaee3308d31f1230">VPScalarIVStepsRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;  <span class="comment">// Fast-math-flags propagate from the original induction instruction.</span></div>
<div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>);</div>
<div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;  <span class="keywordflow">if</span> (IndDesc.getInductionBinOp() &amp;&amp;</div>
<div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;      isa&lt;FPMathOperator&gt;(IndDesc.getInductionBinOp()))</div>
<div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6370e29617c71c8081bbbc68d6058403">setFastMathFlags</a>(</div>
<div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;        IndDesc.getInductionBinOp()-&gt;getFastMathFlags());</div>
<div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160; </div>
<div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BaseIV = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getOperand(0), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Step = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getStepValue(), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0));</div>
<div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160; </div>
<div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;  <a class="code" href="LoopVectorize_8cpp.html#a7ea774676c15ac86f21bfccd434728db">buildScalarSteps</a>(BaseIV, Step, IndDesc, <span class="keyword">this</span>, State);</div>
<div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;}</div>
<div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160; </div>
<div class="line"><a name="l09526"></a><span class="lineno"><a class="line" href="classllvm_1_1VPInterleaveRecipe.html#ab0d48fabf61af227821d568b1c3aa4ca"> 9526</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPInterleaveRecipe.html#ab0d48fabf61af227821d568b1c3aa4ca">VPInterleaveRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a> &amp;&amp; <span class="stringliteral">&quot;Interleave group being replicated.&quot;</span>);</div>
<div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#abb6b4f5c0e1dad90fe7bc7a920c4b1bf">vectorizeInterleaveGroup</a>(IG, definedValues(), State, getAddr(),</div>
<div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;                                      getStoredValues(), getMask());</div>
<div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;}</div>
<div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160; </div>
<div class="line"><a name="l09532"></a><span class="lineno"><a class="line" href="classllvm_1_1VPReductionRecipe.html#ac66885d3ce04a263a03746461eac12b1"> 9532</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPReductionRecipe.html#ac66885d3ce04a263a03746461eac12b1">VPReductionRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a> &amp;&amp; <span class="stringliteral">&quot;Reduction being replicated.&quot;</span>);</div>
<div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PrevInChain = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getChainOp(), 0);</div>
<div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;  <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830e">RecurKind</a> Kind = RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">getRecurrenceKind</a>();</div>
<div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;  <span class="keywordtype">bool</span> IsOrdered = State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">useOrderedReductions</a>(*RdxDesc);</div>
<div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;  <span class="comment">// Propagate the fast-math flags carried by the underlying instruction.</span></div>
<div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">IRBuilderBase::FastMathFlagGuard</a> FMFGuard(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>);</div>
<div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6370e29617c71c8081bbbc68d6058403">setFastMathFlags</a>(RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">getFastMathFlags</a>());</div>
<div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part) {</div>
<div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVecOp = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getVecOp(), Part);</div>
<div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = getCondOp()) {</div>
<div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCond = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Part);</div>
<div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;      <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VecTy = cast&lt;VectorType&gt;(NewVecOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Iden = RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a95f4b9ff2de954cd083d6f251ecb5826">getRecurrenceIdentity</a>(</div>
<div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;          Kind, VecTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>(), RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">getFastMathFlags</a>());</div>
<div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IdenVec =</div>
<div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;          State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(VecTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a59632c5deb0423a518ad984bdd04d41f">getElementCount</a>(), Iden);</div>
<div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(NewCond, NewVecOp, IdenVec);</div>
<div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;      NewVecOp = <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>;</div>
<div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;    }</div>
<div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRed;</div>
<div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NextInChain;</div>
<div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;    <span class="keywordflow">if</span> (IsOrdered) {</div>
<div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;      <span class="keywordflow">if</span> (State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>())</div>
<div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;        NewRed = <a class="code" href="namespacellvm.html#a7f987d5b55845b1a4658e7998a3ecefb">createOrderedReduction</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, *RdxDesc, NewVecOp,</div>
<div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;                                        PrevInChain);</div>
<div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;        NewRed = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(</div>
<div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;            (<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a>)RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>(Kind), PrevInChain,</div>
<div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;            NewVecOp);</div>
<div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;      PrevInChain = NewRed;</div>
<div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;      PrevInChain = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getChainOp(), Part);</div>
<div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;      NewRed = <a class="code" href="namespacellvm.html#a279281e12df9e915a6a38867097f3eb8">createTargetReduction</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, *RdxDesc, NewVecOp);</div>
<div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;    }</div>
<div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#af08d243545b64f4b77161992d0e2366e">RecurrenceDescriptor::isMinMaxRecurrenceKind</a>(Kind)) {</div>
<div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;      NextInChain =</div>
<div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;          <a class="code" href="namespacellvm.html#a52fcded779c8029fdafaa9897cd3b238">createMinMaxOp</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>, RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">getRecurrenceKind</a>(),</div>
<div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;                         NewRed, PrevInChain);</div>
<div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsOrdered)</div>
<div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;      NextInChain = NewRed;</div>
<div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;      NextInChain = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">CreateBinOp</a>(</div>
<div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;          (<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a>)RdxDesc-&gt;<a class="code" href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">getOpcode</a>(Kind), NewRed,</div>
<div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;          PrevInChain);</div>
<div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, NextInChain, Part);</div>
<div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;  }</div>
<div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;}</div>
<div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160; </div>
<div class="line"><a name="l09581"></a><span class="lineno"><a class="line" href="classllvm_1_1VPReplicateRecipe.html#a2ed5b7b284097278ee4e550897b1f057"> 9581</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPReplicateRecipe.html#a2ed5b7b284097278ee4e550897b1f057">VPReplicateRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = getUnderlyingInstr();</div>
<div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;  <span class="keywordflow">if</span> (State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>) { <span class="comment">// Generate a single instance.</span></div>
<div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t scalarize a scalable vector&quot;</span>);</div>
<div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">scalarizeInstruction</a>(UI, <span class="keyword">this</span>, *State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>,</div>
<div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;                                    IsPredicated, State);</div>
<div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;    <span class="comment">// Insert scalar instance packing it into a vector.</span></div>
<div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;    <span class="keywordflow">if</span> (AlsoPack &amp;&amp; State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>()) {</div>
<div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;      <span class="comment">// If we&#39;re constructing lane 0, initialize to start from poison.</span></div>
<div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;      <span class="keywordflow">if</span> (State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>-&gt;Lane.isFirstLane()) {</div>
<div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;VF is assumed to be non scalable.&quot;</span>);</div>
<div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Poison = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(</div>
<div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;            <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(UI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>));</div>
<div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;        State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, Poison, State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>-&gt;Part);</div>
<div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;      }</div>
<div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae26a2cbdb26b960379cca81872a10dc1">packScalarIntoVectorValue</a>(<span class="keyword">this</span>, *State.<a class="code" href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">Instance</a>, State);</div>
<div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;    }</div>
<div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;  }</div>
<div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160; </div>
<div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;  <span class="keywordflow">if</span> (IsUniform) {</div>
<div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;    <span class="comment">// If the recipe is uniform across all parts (instead of just per VF), only</span></div>
<div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;    <span class="comment">// generate a single instance.</span></div>
<div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;    <span class="keywordflow">if</span> ((isa&lt;LoadInst&gt;(UI) || isa&lt;StoreInst&gt;(UI)) &amp;&amp;</div>
<div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;        <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(operands(), [](<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) {</div>
<div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;isDefinedOutsideVectorRegions();</div>
<div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;        })) {</div>
<div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">scalarizeInstruction</a>(UI, <span class="keyword">this</span>, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0), IsPredicated,</div>
<div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;                                      State);</div>
<div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;      <span class="keywordflow">if</span> (user_begin() != user_end()) {</div>
<div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 1; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part)</div>
<div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;          State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(<span class="keyword">this</span>, State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(<span class="keyword">this</span>, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0)),</div>
<div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;                    <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(Part, 0));</div>
<div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;      }</div>
<div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;    }</div>
<div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160; </div>
<div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;    <span class="comment">// Uniform within VL means we need to generate lane 0 only for each</span></div>
<div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;    <span class="comment">// unrolled copy.</span></div>
<div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part)</div>
<div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">scalarizeInstruction</a>(UI, <span class="keyword">this</span>, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(Part, 0),</div>
<div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;                                      IsPredicated, State);</div>
<div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;  }</div>
<div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160; </div>
<div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;  <span class="comment">// A store of a loop varying value to a loop invariant address only</span></div>
<div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;  <span class="comment">// needs only the last copy of the store.</span></div>
<div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;  <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(UI) &amp;&amp; !getOperand(1)-&gt;hasDefiningRecipe()) {</div>
<div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;    <span class="keyword">auto</span> Lane = <a class="code" href="classllvm_1_1VPLane.html#a0e95bf2235bec4b650114e87c75e072c">VPLane::getLastLaneForVF</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">scalarizeInstruction</a>(UI, <span class="keyword">this</span>, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a> - 1, Lane), IsPredicated,</div>
<div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;                                    State);</div>
<div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;  }</div>
<div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160; </div>
<div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;  <span class="comment">// Generate scalar instances for all VF lanes of all UF parts.</span></div>
<div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t scalarize a scalable vector&quot;</span>);</div>
<div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> EndLane = State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</div>
<div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part)</div>
<div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Lane = 0; Lane &lt; EndLane; ++Lane)</div>
<div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">ILV</a>-&gt;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">scalarizeInstruction</a>(UI, <span class="keyword">this</span>, <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(Part, Lane),</div>
<div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;                                      IsPredicated, State);</div>
<div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;}</div>
<div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160; </div>
<div class="line"><a name="l09644"></a><span class="lineno"><a class="line" href="classllvm_1_1VPWidenMemoryInstructionRecipe.html#ab00477be715adae00996f4ad93b125dd"> 9644</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1VPWidenMemoryInstructionRecipe.html#ab00477be715adae00996f4ad93b125dd">VPWidenMemoryInstructionRecipe::execute</a>(<a class="code" href="structllvm_1_1VPTransformState.html">VPTransformState</a> &amp;State) {</div>
<div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;  <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *StoredValue = <a class="code" href="ARCInstrInfo_8cpp.html#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>() ? <a class="code" href="namespacellvm.html#a2c184773989d9b05fcc2bf4f5840c1db">getStoredValue</a>() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160; </div>
<div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;  <span class="comment">// Attempt to issue a wide load.</span></div>
<div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> = dyn_cast&lt;LoadInst&gt;(&amp;Ingredient);</div>
<div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(&amp;Ingredient);</div>
<div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160; </div>
<div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> || <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) &amp;&amp; <span class="stringliteral">&quot;Invalid Load/Store instruction&quot;</span>);</div>
<div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> || StoredValue) &amp;&amp; <span class="stringliteral">&quot;No stored value provided for widened store&quot;</span>);</div>
<div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> || !StoredValue) &amp;&amp; <span class="stringliteral">&quot;Stored value provided for widened load&quot;</span>);</div>
<div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160; </div>
<div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ScalarDataTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(&amp;Ingredient);</div>
<div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160; </div>
<div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;  <span class="keyword">auto</span> *DataTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(ScalarDataTy, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">getLoadStoreAlignment</a>(&amp;Ingredient);</div>
<div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;  <span class="keywordtype">bool</span> CreateGatherScatter = !Consecutive;</div>
<div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160; </div>
<div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a> = State.<a class="code" href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">Builder</a>;</div>
<div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">InnerLoopVectorizer::VectorParts</a> BlockInMaskParts(State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>);</div>
<div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;  <span class="keywordtype">bool</span> isMaskRequired = getMask();</div>
<div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;  <span class="keywordflow">if</span> (isMaskRequired)</div>
<div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part)</div>
<div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;      BlockInMaskParts[Part] = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getMask(), Part);</div>
<div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160; </div>
<div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> CreateVecPtr = [&amp;](<span class="keywordtype">unsigned</span> Part, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;    <span class="comment">// Calculate the pointer for the specific unroll-part.</span></div>
<div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;    <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *PartPtr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160; </div>
<div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;    <span class="comment">// Use i32 for the gep index type when the value is constant,</span></div>
<div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;    <span class="comment">// or query DataLayout for a more suitable index type otherwise.</span></div>
<div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> =</div>
<div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae3f9633c349ede5341aa376d9c97dd8f">GetInsertBlock</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IndexTy = State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; (Reverse || Part &gt; 0)</div>
<div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;                        ? <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexType(ScalarDataTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>())</div>
<div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;                        : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>();</div>
<div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;    <span class="keywordtype">bool</span> InBounds = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SeparateConstOffsetFromGEP_8cpp.html#a589d62ce2ac872ff25beaad782d27235">gep</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;stripPointerCasts()))</div>
<div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;      InBounds = <a class="code" href="SeparateConstOffsetFromGEP_8cpp.html#a589d62ce2ac872ff25beaad782d27235">gep</a>-&gt;isInBounds();</div>
<div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;    <span class="keywordflow">if</span> (Reverse) {</div>
<div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;      <span class="comment">// If the address is consecutive but reversed, then the</span></div>
<div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;      <span class="comment">// wide store needs to start at the last vector element.</span></div>
<div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;      <span class="comment">// RunTimeVF =  VScale * VF.getKnownMinValue()</span></div>
<div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;      <span class="comment">// For fixed-width VScale is 1, then RunTimeVF = VF.getKnownMinValue()</span></div>
<div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *RunTimeVF = <a class="code" href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">getRuntimeVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, IndexTy, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>);</div>
<div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;      <span class="comment">// NumElt = -Part * RunTimeVF</span></div>
<div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NumElt =</div>
<div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">CreateMul</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndexTy, -(int64_t)Part), RunTimeVF);</div>
<div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;      <span class="comment">// LastLane = 1 - RunTimeVF</span></div>
<div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LastLane =</div>
<div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">CreateSub</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndexTy, 1), RunTimeVF);</div>
<div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;      PartPtr =</div>
<div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160;          cast&lt;GetElementPtrInst&gt;(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afb5c46a140e1b7f08de54d9c035a8adc">CreateGEP</a>(ScalarDataTy, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, NumElt));</div>
<div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;      PartPtr-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">setIsInBounds</a>(InBounds);</div>
<div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;      PartPtr = cast&lt;GetElementPtrInst&gt;(</div>
<div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afb5c46a140e1b7f08de54d9c035a8adc">CreateGEP</a>(ScalarDataTy, PartPtr, LastLane));</div>
<div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;      PartPtr-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">setIsInBounds</a>(InBounds);</div>
<div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160;      <span class="keywordflow">if</span> (isMaskRequired) <span class="comment">// Reverse of a null all-one mask is a null mask.</span></div>
<div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;        BlockInMaskParts[Part] =</div>
<div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a69d0103b83202f0339cfb6b018b3c78a">CreateVectorReverse</a>(BlockInMaskParts[Part], <span class="stringliteral">&quot;reverse&quot;</span>);</div>
<div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Increment = <a class="code" href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">createStepForVF</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>, IndexTy, State.<a class="code" href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">VF</a>, Part);</div>
<div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;      PartPtr = cast&lt;GetElementPtrInst&gt;(</div>
<div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;          <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afb5c46a140e1b7f08de54d9c035a8adc">CreateGEP</a>(ScalarDataTy, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Increment));</div>
<div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;      PartPtr-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">setIsInBounds</a>(InBounds);</div>
<div class="line"><a name="l09708"></a><span class="lineno"> 9708</span>&#160;    }</div>
<div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160; </div>
<div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a> = <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()-&gt;getPointerAddressSpace();</div>
<div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">CreateBitCast</a>(PartPtr, DataTy-&gt;getPointerTo(<a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>));</div>
<div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;  };</div>
<div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160; </div>
<div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;  <span class="comment">// Handle Stores:</span></div>
<div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160; </div>
<div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part) {</div>
<div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredVal = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(StoredValue, Part);</div>
<div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;      <span class="keywordflow">if</span> (CreateGatherScatter) {</div>
<div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *MaskPart = isMaskRequired ? BlockInMaskParts[Part] : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *VectorGep = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getAddr(), Part);</div>
<div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;        NewSI = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aee07a8623893cdad858a3b5f77354375">CreateMaskedScatter</a>(StoredVal, VectorGep, Alignment,</div>
<div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;                                            MaskPart);</div>
<div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;        <span class="keywordflow">if</span> (Reverse) {</div>
<div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;          <span class="comment">// If we store to reverse consecutive memory locations, then we need</span></div>
<div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;          <span class="comment">// to reverse the order of elements in the stored value.</span></div>
<div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;          StoredVal = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a69d0103b83202f0339cfb6b018b3c78a">CreateVectorReverse</a>(StoredVal, <span class="stringliteral">&quot;reverse&quot;</span>);</div>
<div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;          <span class="comment">// We don&#39;t want to update the value in the map as it might be used in</span></div>
<div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;          <span class="comment">// another expression. So don&#39;t call resetVectorValue(StoredVal).</span></div>
<div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160;        }</div>
<div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;        <span class="keyword">auto</span> *VecPtr =</div>
<div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160;            CreateVecPtr(Part, State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getAddr(), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0)));</div>
<div class="line"><a name="l09736"></a><span class="lineno"> 9736</span>&#160;        <span class="keywordflow">if</span> (isMaskRequired)</div>
<div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;          NewSI = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aad07e3e0fa03f6c780e13d924325d8d0">CreateMaskedStore</a>(StoredVal, VecPtr, Alignment,</div>
<div class="line"><a name="l09738"></a><span class="lineno"> 9738</span>&#160;                                            BlockInMaskParts[Part]);</div>
<div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160;          NewSI = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">CreateAlignedStore</a>(StoredVal, VecPtr, Alignment);</div>
<div class="line"><a name="l09741"></a><span class="lineno"> 9741</span>&#160;      }</div>
<div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a21efa9b2b01be2288fc1eff59e332091">addMetadata</a>(NewSI, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;    }</div>
<div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160;  }</div>
<div class="line"><a name="l09746"></a><span class="lineno"> 9746</span>&#160; </div>
<div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;  <span class="comment">// Handle loads.</span></div>
<div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a> &amp;&amp; <span class="stringliteral">&quot;Must have a load instruction&quot;</span>);</div>
<div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160;  State.<a class="code" href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">setDebugLocFromInst</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l09750"></a><span class="lineno"> 9750</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; State.<a class="code" href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">UF</a>; ++Part) {</div>
<div class="line"><a name="l09751"></a><span class="lineno"> 9751</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLI;</div>
<div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;    <span class="keywordflow">if</span> (CreateGatherScatter) {</div>
<div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *MaskPart = isMaskRequired ? BlockInMaskParts[Part] : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *VectorGep = State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getAddr(), Part);</div>
<div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160;      NewLI = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#afa922043d31aa2d3410fe0be8791b795">CreateMaskedGather</a>(DataTy, VectorGep, Alignment, MaskPart,</div>
<div class="line"><a name="l09756"></a><span class="lineno"> 9756</span>&#160;                                         <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;wide.masked.gather&quot;</span>);</div>
<div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a21efa9b2b01be2288fc1eff59e332091">addMetadata</a>(NewLI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;      <span class="keyword">auto</span> *VecPtr =</div>
<div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160;          CreateVecPtr(Part, State.<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">get</a>(getAddr(), <a class="code" href="structllvm_1_1VPIteration.html">VPIteration</a>(0, 0)));</div>
<div class="line"><a name="l09761"></a><span class="lineno"> 9761</span>&#160;      <span class="keywordflow">if</span> (isMaskRequired)</div>
<div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;        NewLI = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a483f68557374e8fc58f8a294e7f1268e">CreateMaskedLoad</a>(</div>
<div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;            DataTy, VecPtr, Alignment, BlockInMaskParts[Part],</div>
<div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;            <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(DataTy), <span class="stringliteral">&quot;wide.masked.load&quot;</span>);</div>
<div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;        NewLI =</div>
<div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160;            <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a1e0fea1b88c314ecffb18922c6be5e70">CreateAlignedLoad</a>(DataTy, VecPtr, Alignment, <span class="stringliteral">&quot;wide.load&quot;</span>);</div>
<div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160; </div>
<div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160;      <span class="comment">// Add metadata to the load, but setVectorValue to the reverse shuffle.</span></div>
<div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;      State.<a class="code" href="structllvm_1_1VPTransformState.html#a21efa9b2b01be2288fc1eff59e332091">addMetadata</a>(NewLI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>);</div>
<div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160;      <span class="keywordflow">if</span> (Reverse)</div>
<div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;        NewLI = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a69d0103b83202f0339cfb6b018b3c78a">CreateVectorReverse</a>(NewLI, <span class="stringliteral">&quot;reverse&quot;</span>);</div>
<div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;    }</div>
<div class="line"><a name="l09774"></a><span class="lineno"> 9774</span>&#160; </div>
<div class="line"><a name="l09775"></a><span class="lineno"> 9775</span>&#160;    State.<a class="code" href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">set</a>(getVPSingleValue(), NewLI, Part);</div>
<div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;  }</div>
<div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160;}</div>
<div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160; </div>
<div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160;<span class="comment">// Determine how to lower the scalar epilogue, which depends on 1) optimising</span></div>
<div class="line"><a name="l09780"></a><span class="lineno"> 9780</span>&#160;<span class="comment">// for minimum code-size, 2) predicate compiler options, 3) loop hints forcing</span></div>
<div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;<span class="comment">// predication, and 4) a TTI hook that analyses whether the loop is suitable</span></div>
<div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;<span class="comment">// for predication.</span></div>
<div class="line"><a name="l09783"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#ac4678731b93ef8681e7fd6a589d38f1e"> 9783</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">ScalarEpilogueLowering</a> <a class="code" href="LoopVectorize_8cpp.html#ac4678731b93ef8681e7fd6a589d38f1e">getScalarEpilogueLowering</a>(</div>
<div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> &amp;Hints, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>,</div>
<div class="line"><a name="l09785"></a><span class="lineno"> 9785</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>,</div>
<div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> &amp;LVL, <a class="code" href="classllvm_1_1InterleavedAccessInfo.html">InterleavedAccessInfo</a> *IAI) {</div>
<div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;  <span class="comment">// 1) OptSize takes precedence over all other options, i.e. if this is set,</span></div>
<div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160;  <span class="comment">// don&#39;t look at hints or options, and don&#39;t request a scalar epilogue.</span></div>
<div class="line"><a name="l09790"></a><span class="lineno"> 9790</span>&#160;  <span class="comment">// (For PGSO, as shouldOptimizeForSize isn&#39;t currently accessible from</span></div>
<div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160;  <span class="comment">// LoopAccessInfo (due to code dependency and not being able to reliably get</span></div>
<div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;  <span class="comment">// PSI/BFI from a loop analysis under NPM), we cannot suppress the collection</span></div>
<div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160;  <span class="comment">// of strides in LoopAccessInfo::analyzeLoop() and vectorize without</span></div>
<div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;  <span class="comment">// versioning when the vectorization is forced, unlike hasOptSize. So revert</span></div>
<div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160;  <span class="comment">// back to the old way and vectorize with versioning when forced. See D81345.)</span></div>
<div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasOptSize() || (<a class="code" href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>,</div>
<div class="line"><a name="l09797"></a><span class="lineno"> 9797</span>&#160;                                                      <a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">PGSOQueryType::IRPass</a>) &amp;&amp;</div>
<div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160;                          Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() != <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a>))</div>
<div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7">CM_ScalarEpilogueNotAllowedOptSize</a>;</div>
<div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160; </div>
<div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;  <span class="comment">// 2) If set, obey the directives</span></div>
<div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a4560cb303f08f288db125b0b213ab06a">PreferPredicateOverEpilogue</a>.getNumOccurrences()) {</div>
<div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="LoopVectorize_8cpp.html#a4560cb303f08f288db125b0b213ab06a">PreferPredicateOverEpilogue</a>) {</div>
<div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7">PreferPredicateTy::ScalarEpilogue</a>:</div>
<div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa3111b239a92c1674cea87d025e818091">PreferPredicateTy::PredicateElseScalarEpilogue</a>:</div>
<div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>;</div>
<div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa5e6f0abe1c426939c61d8924cfa02e5a">PreferPredicateTy::PredicateOrDontVectorize</a>:</div>
<div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206">CM_ScalarEpilogueNotAllowedUsePredicate</a>;</div>
<div class="line"><a name="l09810"></a><span class="lineno"> 9810</span>&#160;    };</div>
<div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;  }</div>
<div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160; </div>
<div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160;  <span class="comment">// 3) If set, obey the hints</span></div>
<div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;  <span class="keywordflow">switch</span> (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a7592f6d851162d7f66f26408f40e9388">getPredicate</a>()) {</div>
<div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a>:</div>
<div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>;</div>
<div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea980c2c6e59ca5dcf413baa325d8bc385">LoopVectorizeHints::FK_Disabled</a>:</div>
<div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;  };</div>
<div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160; </div>
<div class="line"><a name="l09821"></a><span class="lineno"> 9821</span>&#160;  <span class="comment">// 4) if the TTI hook indicates this is profitable, request predication.</span></div>
<div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a3cb9f282c6b4cec07b020e0639fba681">preferPredicateOverEpilogue</a>(L, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, *SE, *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, &amp;LVL, IAI))</div>
<div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">CM_ScalarEpilogueNotNeededUsePredicate</a>;</div>
<div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160; </div>
<div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">CM_ScalarEpilogueAllowed</a>;</div>
<div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;}</div>
<div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160; </div>
<div class="line"><a name="l09828"></a><span class="lineno"><a class="line" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49"> 9828</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">VPTransformState::get</a>(<a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <span class="keywordtype">unsigned</span> Part) {</div>
<div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160;  <span class="comment">// If Values have been set for this Def return the one relevant for \p Part.</span></div>
<div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;  <span class="keywordflow">if</span> (hasVectorValue(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Part))</div>
<div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>.PerPartOutput[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>][Part];</div>
<div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160; </div>
<div class="line"><a name="l09833"></a><span class="lineno"> 9833</span>&#160;  <span class="keywordflow">if</span> (!hasScalarValue(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, {Part, 0})) {</div>
<div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IRV = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getLiveInIRValue();</div>
<div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = ILV-&gt;getBroadcastInstrs(IRV);</div>
<div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Part);</div>
<div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160;  }</div>
<div class="line"><a name="l09839"></a><span class="lineno"> 9839</span>&#160; </div>
<div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarValue = <a class="code" href="namespacellvm.html#a73257f51950d9ea50955e3fb9c724a25">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, {Part, 0});</div>
<div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;  <span class="comment">// If we aren&#39;t vectorizing, we can just copy the scalar map values over</span></div>
<div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;  <span class="comment">// to the vector map.</span></div>
<div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()) {</div>
<div class="line"><a name="l09844"></a><span class="lineno"> 9844</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, ScalarValue, Part);</div>
<div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;    <span class="keywordflow">return</span> ScalarValue;</div>
<div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;  }</div>
<div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160; </div>
<div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160;  <span class="keywordtype">bool</span> IsUniform = <a class="code" href="namespacellvm_1_1vputils.html#a0ae36efaf093c35afe18910df9607b98">vputils::isUniformAfterVectorization</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div>
<div class="line"><a name="l09849"></a><span class="lineno"> 9849</span>&#160; </div>
<div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;  <span class="keywordtype">unsigned</span> LastLane = IsUniform ? 0 : <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() - 1;</div>
<div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;  <span class="comment">// Check if there is a scalar value for the selected lane.</span></div>
<div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160;  <span class="keywordflow">if</span> (!hasScalarValue(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, {Part, LastLane})) {</div>
<div class="line"><a name="l09853"></a><span class="lineno"> 9853</span>&#160;    <span class="comment">// At the moment, VPWidenIntOrFpInductionRecipes and VPScalarIVStepsRecipes can also be uniform.</span></div>
<div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;VPWidenIntOrFpInductionRecipe&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getDefiningRecipe()) ||</div>
<div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160;            isa&lt;VPScalarIVStepsRecipe&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getDefiningRecipe())) &amp;&amp;</div>
<div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;           <span class="stringliteral">&quot;unexpected recipe found to be invariant&quot;</span>);</div>
<div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160;    IsUniform = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09858"></a><span class="lineno"> 9858</span>&#160;    LastLane = 0;</div>
<div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;  }</div>
<div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160; </div>
<div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;  <span class="keyword">auto</span> *LastInst = cast&lt;Instruction&gt;(<a class="code" href="namespacellvm.html#a73257f51950d9ea50955e3fb9c724a25">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, {Part, LastLane}));</div>
<div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160;  <span class="comment">// Set the insert point after the last scalarized instruction or after the</span></div>
<div class="line"><a name="l09863"></a><span class="lineno"> 9863</span>&#160;  <span class="comment">// last PHI, if LastInst is a PHI. This ensures the insertelement sequence</span></div>
<div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;  <span class="comment">// will directly follow the scalar definitions.</span></div>
<div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160;  <span class="keyword">auto</span> OldIP = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a79479229269c1abc7dba0840d19b97cf">saveIP</a>();</div>
<div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;  <span class="keyword">auto</span> NewIP =</div>
<div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160;      isa&lt;PHINode&gt;(LastInst)</div>
<div class="line"><a name="l09868"></a><span class="lineno"> 9868</span>&#160;          ? <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a>(LastInst-&gt;getParent()-&gt;getFirstNonPHI())</div>
<div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;          : std::next(<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a>(LastInst));</div>
<div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(&amp;*NewIP);</div>
<div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160; </div>
<div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160;  <span class="comment">// However, if we are vectorizing, we need to construct the vector values.</span></div>
<div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160;  <span class="comment">// If the value is known to be uniform after vectorization, we can just</span></div>
<div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;  <span class="comment">// broadcast the scalar value corresponding to lane zero for each unroll</span></div>
<div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160;  <span class="comment">// iteration. Otherwise, we construct the vector values using</span></div>
<div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160;  <span class="comment">// insertelement instructions. Since the resulting vectors are stored in</span></div>
<div class="line"><a name="l09877"></a><span class="lineno"> 9877</span>&#160;  <span class="comment">// State, we will only generate the insertelements once.</span></div>
<div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VectorValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;  <span class="keywordflow">if</span> (IsUniform) {</div>
<div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;    VectorValue = ILV-&gt;getBroadcastInstrs(ScalarValue);</div>
<div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, VectorValue, Part);</div>
<div class="line"><a name="l09882"></a><span class="lineno"> 9882</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;    <span class="comment">// Initialize packing with insertelements to start from undef.</span></div>
<div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; <span class="stringliteral">&quot;VF is assumed to be non scalable.&quot;</span>);</div>
<div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(LastInst-&gt;getType(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>));</div>
<div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>, Part);</div>
<div class="line"><a name="l09887"></a><span class="lineno"> 9887</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Lane = 0; Lane &lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>(); ++Lane)</div>
<div class="line"><a name="l09888"></a><span class="lineno"> 9888</span>&#160;      ILV-&gt;packScalarIntoVectorValue(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, {Part, Lane}, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160;    VectorValue = <a class="code" href="namespacellvm.html#a73257f51950d9ea50955e3fb9c724a25">get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, Part);</div>
<div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;  }</div>
<div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac8778dcbd35e8ae5902050117feb57a0">restoreIP</a>(OldIP);</div>
<div class="line"><a name="l09892"></a><span class="lineno"> 9892</span>&#160;  <span class="keywordflow">return</span> VectorValue;</div>
<div class="line"><a name="l09893"></a><span class="lineno"> 9893</span>&#160;}</div>
<div class="line"><a name="l09894"></a><span class="lineno"> 9894</span>&#160; </div>
<div class="line"><a name="l09895"></a><span class="lineno"> 9895</span>&#160;<span class="comment">// Process the loop in the VPlan-native vectorization path. This path builds</span></div>
<div class="line"><a name="l09896"></a><span class="lineno"> 9896</span>&#160;<span class="comment">// VPlan upfront in the vectorization pipeline, which allows to apply</span></div>
<div class="line"><a name="l09897"></a><span class="lineno"> 9897</span>&#160;<span class="comment">// VPlan-to-VPlan transformations from the very beginning without modifying the</span></div>
<div class="line"><a name="l09898"></a><span class="lineno"> 9898</span>&#160;<span class="comment">// input LLVM IR.</span></div>
<div class="line"><a name="l09899"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#adeb41c907ebde15846bc643325909f95"> 9899</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopVectorize_8cpp.html#adeb41c907ebde15846bc643325909f95">processLoopInVPlanNativePath</a>(</div>
<div class="line"><a name="l09900"></a><span class="lineno"> 9900</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>,</div>
<div class="line"><a name="l09901"></a><span class="lineno"> 9901</span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> *LVL, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l09902"></a><span class="lineno"> 9902</span>&#160;    <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1DemandedBits.html">DemandedBits</a> *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>,</div>
<div class="line"><a name="l09903"></a><span class="lineno"> 9903</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>,</div>
<div class="line"><a name="l09904"></a><span class="lineno"> 9904</span>&#160;    <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> &amp;Hints,</div>
<div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160;    <a class="code" href="classllvm_1_1LoopVectorizationRequirements.html">LoopVectorizationRequirements</a> &amp;Requirements) {</div>
<div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160; </div>
<div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#ada1db826f3d2266fe2c4d06218d8d342">getBackedgeTakenCount</a>())) {</div>
<div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: cannot compute the outer-loop trip count\n&quot;</span>);</div>
<div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09910"></a><span class="lineno"> 9910</span>&#160;  }</div>
<div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a> &amp;&amp; <span class="stringliteral">&quot;VPlan-native path is disabled.&quot;</span>);</div>
<div class="line"><a name="l09912"></a><span class="lineno"> 9912</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l09913"></a><span class="lineno"> 9913</span>&#160;  <a class="code" href="classllvm_1_1InterleavedAccessInfo.html">InterleavedAccessInfo</a> IAI(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, L, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, LVL-&gt;<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae21d46756cd1643894e85c5f78182cb0">getLAI</a>());</div>
<div class="line"><a name="l09914"></a><span class="lineno"> 9914</span>&#160; </div>
<div class="line"><a name="l09915"></a><span class="lineno"> 9915</span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">ScalarEpilogueLowering</a> <span class="keywordtype">SEL</span> = <a class="code" href="LoopVectorize_8cpp.html#ac4678731b93ef8681e7fd6a589d38f1e">getScalarEpilogueLowering</a>(</div>
<div class="line"><a name="l09916"></a><span class="lineno"> 9916</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, L, Hints, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, *LVL, &amp;IAI);</div>
<div class="line"><a name="l09917"></a><span class="lineno"> 9917</span>&#160; </div>
<div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> CM(<span class="keywordtype">SEL</span>, L, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, LVL, *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160;                                &amp;Hints, IAI);</div>
<div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;  <span class="comment">// Use the planner for outer loop vectorization.</span></div>
<div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160;  <span class="comment">// TODO: CM is not used at this point inside the planner. Turn CM into an</span></div>
<div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;  <span class="comment">// optional argument if we don&#39;t need it in the future.</span></div>
<div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html">LoopVectorizationPlanner</a> LVP(L, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, LVL, CM, IAI, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, Hints, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>);</div>
<div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160; </div>
<div class="line"><a name="l09925"></a><span class="lineno"> 9925</span>&#160;  <span class="comment">// Get user vectorization factor.</span></div>
<div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF = Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a50cae5c2df432357d50f182d310ce7b7">getWidth</a>();</div>
<div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160; </div>
<div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;  CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a06f5d9725a2b1f7b06e8bf51f7d31417">collectElementTypesForWidening</a>();</div>
<div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160; </div>
<div class="line"><a name="l09930"></a><span class="lineno"> 9930</span>&#160;  <span class="comment">// Plan how to best vectorize, return the best VF and its cost.</span></div>
<div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a> = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a2206e77c573f4947146faa681ea8855e">planInVPlanNativePath</a>(UserVF);</div>
<div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160; </div>
<div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;  <span class="comment">// If we are stress testing VPlan builds, do not attempt to generate vector</span></div>
<div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160;  <span class="comment">// code. Masked vector code generation support will follow soon.</span></div>
<div class="line"><a name="l09935"></a><span class="lineno"> 9935</span>&#160;  <span class="comment">// Also, do not attempt to vectorize if no vector code will be produced.</span></div>
<div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#a9aba1a55848dca801709169068b8d264">VPlanBuildStressTest</a> || <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>() == <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>)</div>
<div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160; </div>
<div class="line"><a name="l09939"></a><span class="lineno"> 9939</span>&#160;  <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;BestPlan = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">getBestPlanFor</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width);</div>
<div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160; </div>
<div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;  {</div>
<div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160;    GeneratedRTChecks Checks(*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l09943"></a><span class="lineno"> 9943</span>&#160;                             <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()-&gt;getDataLayout());</div>
<div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160;    <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a> LB(L, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">PSE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">LI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">AC</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width,</div>
<div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;                           <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width, 1, LVL, &amp;CM, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">BFI</a>, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">PSI</a>, Checks);</div>
<div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Vectorizing outer loop in \&quot;&quot;</span></div>
<div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160;                      &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09948"></a><span class="lineno"> 9948</span>&#160;    LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">executePlan</a>(<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width, 1, BestPlan, LB, <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">DT</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;  }</div>
<div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160; </div>
<div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;  <span class="comment">// Mark the loop as already vectorized to avoid vectorizing again.</span></div>
<div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160;  Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#aa2f5ef2d522fb80de283a23d5bed6d86">setAlreadyVectorized</a>();</div>
<div class="line"><a name="l09953"></a><span class="lineno"> 9953</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm.html#a26389c546573f058ad8ecbdc5c1933cf">verifyFunction</a>(*L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(), &amp;<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</div>
<div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;}</div>
<div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160; </div>
<div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160;<span class="comment">// Emit a remark if there are stores to floats that required a floating point</span></div>
<div class="line"><a name="l09958"></a><span class="lineno"> 9958</span>&#160;<span class="comment">// extension. If the vectorized loop was generated with floating point there</span></div>
<div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160;<span class="comment">// will be a performance penalty from the conversion overhead and the change in</span></div>
<div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;<span class="comment">// the vector width.</span></div>
<div class="line"><a name="l09961"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#af1fba45879c49d4839b11ec30afd7532"> 9961</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopVectorize_8cpp.html#af1fba45879c49d4839b11ec30afd7532">checkMixedPrecision</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>) {</div>
<div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l09963"></a><span class="lineno"> 9963</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>()) {</div>
<div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = dyn_cast&lt;StoreInst&gt;(&amp;Inst)) {</div>
<div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getValueOperand()-&gt;getType()-&gt;isFloatTy())</div>
<div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160;          Worklist.push_back(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l09968"></a><span class="lineno"> 9968</span>&#160;      }</div>
<div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;    }</div>
<div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160;  }</div>
<div class="line"><a name="l09971"></a><span class="lineno"> 9971</span>&#160; </div>
<div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160;  <span class="comment">// Traverse the floating point stores upwards searching, for floating point</span></div>
<div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160;  <span class="comment">// conversions.</span></div>
<div class="line"><a name="l09974"></a><span class="lineno"> 9974</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Instruction *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Instruction *, 4&gt;</a> EmittedRemark;</div>
<div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).second)</div>
<div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160; </div>
<div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160;    <span class="comment">// Emit a remark if the floating point store required a floating</span></div>
<div class="line"><a name="l09984"></a><span class="lineno"> 9984</span>&#160;    <span class="comment">// point conversion.</span></div>
<div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;    <span class="comment">// TODO: More work could be done to identify the root cause such as a</span></div>
<div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;    <span class="comment">// constant or a function return type and point the user to it.</span></div>
<div class="line"><a name="l09987"></a><span class="lineno"> 9987</span>&#160;    <span class="keywordflow">if</span> (isa&lt;FPExtInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; EmittedRemark.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).second)</div>
<div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l09989"></a><span class="lineno"> 9989</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, <span class="stringliteral">&quot;VectorMixedPrecision&quot;</span>,</div>
<div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;                                          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;floating point conversion changes vector width. &quot;</span></div>
<div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;Mixed floating point precision requires an up/down &quot;</span></div>
<div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;cast that will negatively impact performance.&quot;</span>;</div>
<div class="line"><a name="l09994"></a><span class="lineno"> 9994</span>&#160;      });</div>
<div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160; </div>
<div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OpI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160;        Worklist.push_back(OpI);</div>
<div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;  }</div>
<div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;}</div>
<div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160; </div>
<div class="line"><a name="l10002"></a><span class="lineno"><a class="line" href="LoopVectorize_8cpp.html#a402fb219059e7a914ae0541fbea17df5">10002</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopVectorize_8cpp.html#a402fb219059e7a914ae0541fbea17df5">areRuntimeChecksProfitable</a>(GeneratedRTChecks &amp;Checks,</div>
<div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;                                       <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> &amp;<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>,</div>
<div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160;                                       std::optional&lt;unsigned&gt; VScale, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;                                       <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> CheckCost = Checks.getCost();</div>
<div class="line"><a name="l10007"></a><span class="lineno">10007</span>&#160;  <span class="keywordflow">if</span> (!CheckCost.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>())</div>
<div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160; </div>
<div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160;  <span class="comment">// When interleaving only scalar and vector cost will be equal, which in turn</span></div>
<div class="line"><a name="l10011"></a><span class="lineno">10011</span>&#160;  <span class="comment">// would lead to a divide by 0. Fall back to hard threshold.</span></div>
<div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()) {</div>
<div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;    <span class="keywordflow">if</span> (CheckCost &gt; <a class="code" href="LoopVectorize_8cpp.html#a81cab9f3e7e0225e565699792e125012">VectorizeMemoryCheckThreshold</a>) {</div>
<div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving only is not profitable due to runtime checks\n&quot;</span>);</div>
<div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160;    }</div>
<div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160;  }</div>
<div class="line"><a name="l10021"></a><span class="lineno">10021</span>&#160; </div>
<div class="line"><a name="l10022"></a><span class="lineno">10022</span>&#160;  <span class="comment">// The scalar cost should only be 0 when vectorizing with a user specified VF/IC. In those cases, runtime checks should always be generated.</span></div>
<div class="line"><a name="l10023"></a><span class="lineno">10023</span>&#160;  <span class="keywordtype">double</span> ScalarC = *<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.ScalarCost.getValue();</div>
<div class="line"><a name="l10024"></a><span class="lineno">10024</span>&#160;  <span class="keywordflow">if</span> (ScalarC == 0)</div>
<div class="line"><a name="l10025"></a><span class="lineno">10025</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10026"></a><span class="lineno">10026</span>&#160; </div>
<div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160;  <span class="comment">// First, compute the minimum iteration count required so that the vector</span></div>
<div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;  <span class="comment">// loop outperforms the scalar loop.</span></div>
<div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;  <span class="comment">//  The total cost of the scalar loop is</span></div>
<div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160;  <span class="comment">//   ScalarC * TC</span></div>
<div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;  <span class="comment">//  where</span></div>
<div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160;  <span class="comment">//  * TC is the actual trip count of the loop.</span></div>
<div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;  <span class="comment">//  * ScalarC is the cost of a single scalar iteration.</span></div>
<div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;  <span class="comment">//  The total cost of the vector loop is</span></div>
<div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;  <span class="comment">//    RtC + VecC * (TC / VF) + EpiC</span></div>
<div class="line"><a name="l10037"></a><span class="lineno">10037</span>&#160;  <span class="comment">//  where</span></div>
<div class="line"><a name="l10038"></a><span class="lineno">10038</span>&#160;  <span class="comment">//  * RtC is the cost of the generated runtime checks</span></div>
<div class="line"><a name="l10039"></a><span class="lineno">10039</span>&#160;  <span class="comment">//  * VecC is the cost of a single vector iteration.</span></div>
<div class="line"><a name="l10040"></a><span class="lineno">10040</span>&#160;  <span class="comment">//  * TC is the actual trip count of the loop</span></div>
<div class="line"><a name="l10041"></a><span class="lineno">10041</span>&#160;  <span class="comment">//  * VF is the vectorization factor</span></div>
<div class="line"><a name="l10042"></a><span class="lineno">10042</span>&#160;  <span class="comment">//  * EpiCost is the cost of the generated epilogue, including the cost</span></div>
<div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;  <span class="comment">//    of the remaining scalar operations.</span></div>
<div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l10045"></a><span class="lineno">10045</span>&#160;  <span class="comment">// Vectorization is profitable once the total vector cost is less than the</span></div>
<div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160;  <span class="comment">// total scalar cost:</span></div>
<div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;  <span class="comment">//   RtC + VecC * (TC / VF) + EpiC &lt;  ScalarC * TC</span></div>
<div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;  <span class="comment">// Now we can compute the minimum required trip count TC as</span></div>
<div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;  <span class="comment">//   (RtC + EpiC) / (ScalarC - (VecC / VF)) &lt; TC</span></div>
<div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;  <span class="comment">// For now we assume the epilogue cost EpiC = 0 for simplicity. Note that</span></div>
<div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160;  <span class="comment">// the computations are performed on doubles, not integers and the result</span></div>
<div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;  <span class="comment">// is rounded up, hence we get an upper estimate of the TC.</span></div>
<div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;  <span class="keywordtype">unsigned</span> IntVF = <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</div>
<div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Width.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) {</div>
<div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;    <span class="keywordtype">unsigned</span> AssumedMinimumVscale = 1;</div>
<div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;    <span class="keywordflow">if</span> (VScale)</div>
<div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;      AssumedMinimumVscale = *VScale;</div>
<div class="line"><a name="l10060"></a><span class="lineno">10060</span>&#160;    IntVF *= AssumedMinimumVscale;</div>
<div class="line"><a name="l10061"></a><span class="lineno">10061</span>&#160;  }</div>
<div class="line"><a name="l10062"></a><span class="lineno">10062</span>&#160;  <span class="keywordtype">double</span> VecCOverVF = <a class="code" href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a>(*<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.Cost.getValue()) / IntVF;</div>
<div class="line"><a name="l10063"></a><span class="lineno">10063</span>&#160;  <span class="keywordtype">double</span> RtC = *CheckCost.<a class="code" href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">getValue</a>();</div>
<div class="line"><a name="l10064"></a><span class="lineno">10064</span>&#160;  <span class="keywordtype">double</span> MinTC1 = RtC / (ScalarC - VecCOverVF);</div>
<div class="line"><a name="l10065"></a><span class="lineno">10065</span>&#160; </div>
<div class="line"><a name="l10066"></a><span class="lineno">10066</span>&#160;  <span class="comment">// Second, compute a minimum iteration count so that the cost of the</span></div>
<div class="line"><a name="l10067"></a><span class="lineno">10067</span>&#160;  <span class="comment">// runtime checks is only a fraction of the total scalar loop cost. This</span></div>
<div class="line"><a name="l10068"></a><span class="lineno">10068</span>&#160;  <span class="comment">// adds a loop-dependent bound on the overhead incurred if the runtime</span></div>
<div class="line"><a name="l10069"></a><span class="lineno">10069</span>&#160;  <span class="comment">// checks fail. In case the runtime checks fail, the cost is RtC + ScalarC</span></div>
<div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160;  <span class="comment">// * TC. To bound the runtime check to be a fraction 1/X of the scalar</span></div>
<div class="line"><a name="l10071"></a><span class="lineno">10071</span>&#160;  <span class="comment">// cost, compute</span></div>
<div class="line"><a name="l10072"></a><span class="lineno">10072</span>&#160;  <span class="comment">//   RtC &lt; ScalarC * TC * (1 / X)  ==&gt;  RtC * X / ScalarC &lt; TC</span></div>
<div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160;  <span class="keywordtype">double</span> MinTC2 = RtC * 10 / ScalarC;</div>
<div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160; </div>
<div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160;  <span class="comment">// Now pick the larger minimum. If it is not a multiple of VF, choose the</span></div>
<div class="line"><a name="l10076"></a><span class="lineno">10076</span>&#160;  <span class="comment">// next closest multiple of VF. This should partly compensate for ignoring</span></div>
<div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;  <span class="comment">// the epilogue cost.</span></div>
<div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MinTC = <a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">std::ceil</a>(<a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(MinTC1, MinTC2));</div>
<div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160;  <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.MinProfitableTripCount = <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(MinTC, IntVF));</div>
<div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160; </div>
<div class="line"><a name="l10081"></a><span class="lineno">10081</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Minimum required TC for runtime checks to be profitable:&quot;</span></div>
<div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160;             &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.MinProfitableTripCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160; </div>
<div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160;  <span class="comment">// Skip vectorization if the expected trip count is less than the minimum</span></div>
<div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;  <span class="comment">// required trip count.</span></div>
<div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ExpectedTC = <a class="code" href="LoopVectorize_8cpp.html#a036986770115ea3dbe00153cbeea478e">getSmallBestKnownTC</a>(SE, L)) {</div>
<div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">ElementCount::isKnownLT</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(*ExpectedTC),</div>
<div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;                                <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.MinProfitableTripCount)) {</div>
<div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Vectorization is not beneficial: expected &quot;</span></div>
<div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;                           <span class="stringliteral">&quot;trip count &lt; minimum profitable VF (&quot;</span></div>
<div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160;                        &lt;&lt; *ExpectedTC &lt;&lt; <span class="stringliteral">&quot; &lt; &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">VF</a>.MinProfitableTripCount</div>
<div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160; </div>
<div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10096"></a><span class="lineno">10096</span>&#160;    }</div>
<div class="line"><a name="l10097"></a><span class="lineno">10097</span>&#160;  }</div>
<div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;}</div>
<div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160; </div>
<div class="line"><a name="l10101"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizePass.html#a51be961763c595602654e8d825f26b59">10101</a></span>&#160;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a51be961763c595602654e8d825f26b59">LoopVectorizePass::LoopVectorizePass</a>(<a class="code" href="structllvm_1_1LoopVectorizeOptions.html">LoopVectorizeOptions</a> Opts)</div>
<div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160;    : InterleaveOnlyWhenForced(Opts.InterleaveOnlyWhenForced ||</div>
<div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;                               !<a class="code" href="namespacellvm.html#af98e93062e9f33018307ffc64d4b009e">EnableLoopInterleaving</a>),</div>
<div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160;      VectorizeOnlyWhenForced(Opts.VectorizeOnlyWhenForced ||</div>
<div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;                              !<a class="code" href="namespacellvm.html#a7f386d38a2c6c22a343243e9e48f7532">EnableLoopVectorization</a>) {}</div>
<div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160; </div>
<div class="line"><a name="l10107"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizePass.html#a160afa01e95095aa0c8115b6e0e6f4a6">10107</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1LoopVectorizePass.html#a160afa01e95095aa0c8115b6e0e6f4a6">LoopVectorizePass::processLoop</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a> || L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>()) &amp;&amp;</div>
<div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;         <span class="stringliteral">&quot;VPlan-native path is not enabled. Only process inner loops.&quot;</span>);</div>
<div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160; </div>
<div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l10112"></a><span class="lineno">10112</span>&#160;  <span class="keyword">const</span> std::string DebugLocStr = <a class="code" href="LoopVectorize_8cpp.html#aa74e864ddfcd1582f11672ed11958ad5">getDebugLocString</a>(L);</div>
<div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* NDEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160; </div>
<div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nLV: Checking a loop in &#39;&quot;</span></div>
<div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;                    &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; from &quot;</span></div>
<div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160;                    &lt;&lt; DebugLocStr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160; </div>
<div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizeHints.html">LoopVectorizeHints</a> Hints(L, InterleaveOnlyWhenForced, *<a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160; </div>
<div class="line"><a name="l10121"></a><span class="lineno">10121</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Loop hints:&quot;</span></div>
<div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; force=&quot;</span></div>
<div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;             &lt;&lt; (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea980c2c6e59ca5dcf413baa325d8bc385">LoopVectorizeHints::FK_Disabled</a></div>
<div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160;                     ? <span class="stringliteral">&quot;disabled&quot;</span></div>
<div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;                     : (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a></div>
<div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;                            ? <span class="stringliteral">&quot;enabled&quot;</span></div>
<div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;                            : <span class="stringliteral">&quot;?&quot;</span>))</div>
<div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; width=&quot;</span> &lt;&lt; Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a50cae5c2df432357d50f182d310ce7b7">getWidth</a>()</div>
<div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; interleave=&quot;</span> &lt;&lt; Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#ad98353127dbeb649d41ca07da5074b49">getInterleave</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160; </div>
<div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;  <span class="comment">// Function containing loop</span></div>
<div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160; </div>
<div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160;  <span class="comment">// Looking at the diagnostic output is the only way to determine if a loop</span></div>
<div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;  <span class="comment">// was vectorized (other than looking at the IR or machine code), so it</span></div>
<div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;  <span class="comment">// is important to generate an optimization remark for each loop. Most of</span></div>
<div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160;  <span class="comment">// these messages are generated as OptimizationRemarkAnalysis. Remarks</span></div>
<div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;  <span class="comment">// generated as OptimizationRemark and OptimizationRemarkMissed are</span></div>
<div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160;  <span class="comment">// less verbose reporting vectorized loops and unvectorized loops that may</span></div>
<div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160;  <span class="comment">// benefit from vectorization, respectively.</span></div>
<div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160; </div>
<div class="line"><a name="l10143"></a><span class="lineno">10143</span>&#160;  <span class="keywordflow">if</span> (!Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a21b6d9e2aa12c8c68d8e2f122ec7ecec">allowVectorization</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, L, VectorizeOnlyWhenForced)) {</div>
<div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Loop hints prevent vectorization.\n&quot;</span>);</div>
<div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160;  }</div>
<div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160; </div>
<div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;  <a class="code" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> PSE(*<a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a>, *L);</div>
<div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160; </div>
<div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;  <span class="comment">// Check if it is legal to vectorize the loop.</span></div>
<div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationRequirements.html">LoopVectorizationRequirements</a> Requirements;</div>
<div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationLegality.html">LoopVectorizationLegality</a> LVL(L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *<a class="code" href="structllvm_1_1LoopVectorizePass.html#a38ff83df2a3ad17de50157ed09a1c259">LAIs</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>,</div>
<div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;                                &amp;Requirements, &amp;Hints, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">DB</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>);</div>
<div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160;  <span class="keywordflow">if</span> (!LVL.<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a3ce10d1174bdfcac2b73ed7efa352b7f">canVectorize</a>(<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>)) {</div>
<div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Not vectorizing: Cannot prove legality.\n&quot;</span>);</div>
<div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160;  }</div>
<div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160; </div>
<div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160;  <span class="comment">// Entrance to the VPlan-native vectorization path. Outer loops are processed</span></div>
<div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;  <span class="comment">// here. They may require CFG and instruction level transformations before</span></div>
<div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;  <span class="comment">// even evaluating whether vectorization is profitable. Since we cannot modify</span></div>
<div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160;  <span class="comment">// the incoming IR, we need to build VPlan upfront in the vectorization</span></div>
<div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;  <span class="comment">// pipeline.</span></div>
<div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>())</div>
<div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopVectorize_8cpp.html#adeb41c907ebde15846bc643325909f95">processLoopInVPlanNativePath</a>(L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, &amp;LVL, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">DB</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>,</div>
<div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;                                        <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>, Hints, Requirements);</div>
<div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160; </div>
<div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() &amp;&amp; <span class="stringliteral">&quot;Inner loop expected.&quot;</span>);</div>
<div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160; </div>
<div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;  <a class="code" href="classllvm_1_1InterleavedAccessInfo.html">InterleavedAccessInfo</a> IAI(PSE, L, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, LVL.<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae21d46756cd1643894e85c5f78182cb0">getLAI</a>());</div>
<div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;  <span class="keywordtype">bool</span> UseInterleaved = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac501bf52c07df51c9e1242117cfc7b2f">enableInterleavedAccessVectorization</a>();</div>
<div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160; </div>
<div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160;  <span class="comment">// If an override option has been passed in for interleaved accesses, use it.</span></div>
<div class="line"><a name="l10175"></a><span class="lineno">10175</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#ac2ea855ca5fe5b7adb059e3305b9c755">EnableInterleavedMemAccesses</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160;    UseInterleaved = <a class="code" href="LoopVectorize_8cpp.html#ac2ea855ca5fe5b7adb059e3305b9c755">EnableInterleavedMemAccesses</a>;</div>
<div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160; </div>
<div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;  <span class="comment">// Analyze interleaved memory accesses.</span></div>
<div class="line"><a name="l10179"></a><span class="lineno">10179</span>&#160;  <span class="keywordflow">if</span> (UseInterleaved)</div>
<div class="line"><a name="l10180"></a><span class="lineno">10180</span>&#160;    IAI.<a class="code" href="classllvm_1_1InterleavedAccessInfo.html#af587d7218fa15a456103c3d2125a1fc8">analyzeInterleaving</a>(<a class="code" href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a>(*<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>));</div>
<div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160; </div>
<div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;  <span class="comment">// Check the function attributes and profiles to find out if this function</span></div>
<div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160;  <span class="comment">// should be optimized for size.</span></div>
<div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;  <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">ScalarEpilogueLowering</a> <span class="keywordtype">SEL</span> = <a class="code" href="LoopVectorize_8cpp.html#ac4678731b93ef8681e7fd6a589d38f1e">getScalarEpilogueLowering</a>(</div>
<div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, L, Hints, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, PSE.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, LVL, &amp;IAI);</div>
<div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160; </div>
<div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160;  <span class="comment">// Check the loop for a trip count threshold: vectorize loops with a tiny trip</span></div>
<div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160;  <span class="comment">// count by optimizing for size, to minimize overheads.</span></div>
<div class="line"><a name="l10189"></a><span class="lineno">10189</span>&#160;  <span class="keyword">auto</span> ExpectedTC = <a class="code" href="LoopVectorize_8cpp.html#a036986770115ea3dbe00153cbeea478e">getSmallBestKnownTC</a>(*<a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a>, L);</div>
<div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;  <span class="keywordflow">if</span> (ExpectedTC &amp;&amp; *ExpectedTC &lt; <a class="code" href="LoopVectorize_8cpp.html#a367c00b94d19dddb8a87f5d80840770d">TinyTripCountVectorThreshold</a>) {</div>
<div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found a loop with a very small trip count. &quot;</span></div>
<div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;This loop is worth vectorizing only if no scalar &quot;</span></div>
<div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;iteration overheads are incurred.&quot;</span>);</div>
<div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160;    <span class="keywordflow">if</span> (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a>)</div>
<div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; But vectorizing was explicitly forced.\n&quot;</span>);</div>
<div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160;      <span class="keywordflow">if</span> (*ExpectedTC &gt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac50791ac3dd33dc3dc522df16116a27b">getMinTripCountTailFoldingThreshold</a>()) {</div>
<div class="line"><a name="l10198"></a><span class="lineno">10198</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;        <span class="keywordtype">SEL</span> = <a class="code" href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da0a5c3a3ea2de39aa77f3e6da8de4d5bd">CM_ScalarEpilogueNotAllowedLowTripLoop</a>;</div>
<div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; But the target considers the trip count too &quot;</span></div>
<div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;                             <span class="stringliteral">&quot;small to consider vectorizing.\n&quot;</span>);</div>
<div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;        <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(</div>
<div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;            <span class="stringliteral">&quot;The trip count is below the minial threshold value.&quot;</span>,</div>
<div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160;            <span class="stringliteral">&quot;loop trip count is too low, avoiding vectorization&quot;</span>,</div>
<div class="line"><a name="l10206"></a><span class="lineno">10206</span>&#160;            <span class="stringliteral">&quot;LowTripCount&quot;</span>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, L);</div>
<div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;        Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;      }</div>
<div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;    }</div>
<div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160;  }</div>
<div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160; </div>
<div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;  <span class="comment">// Check the function attributes to see if implicit floats or vectors are</span></div>
<div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;  <span class="comment">// allowed.</span></div>
<div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(Attribute::NoImplicitFloat)) {</div>
<div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(</div>
<div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;        <span class="stringliteral">&quot;Can&#39;t vectorize when the NoImplicitFloat attribute is used&quot;</span>,</div>
<div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160;        <span class="stringliteral">&quot;loop not vectorized due to NoImplicitFloat attribute&quot;</span>,</div>
<div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;        <span class="stringliteral">&quot;NoImplicitFloat&quot;</span>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, L);</div>
<div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10222"></a><span class="lineno">10222</span>&#160;  }</div>
<div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160; </div>
<div class="line"><a name="l10224"></a><span class="lineno">10224</span>&#160;  <span class="comment">// Check if the target supports potentially unsafe FP vectorization.</span></div>
<div class="line"><a name="l10225"></a><span class="lineno">10225</span>&#160;  <span class="comment">// FIXME: Add a check for the type of safety issue (denormal, signaling)</span></div>
<div class="line"><a name="l10226"></a><span class="lineno">10226</span>&#160;  <span class="comment">// for the target we&#39;re vectorizing for, to make sure none of the</span></div>
<div class="line"><a name="l10227"></a><span class="lineno">10227</span>&#160;  <span class="comment">// additional fp-math flags can help.</span></div>
<div class="line"><a name="l10228"></a><span class="lineno">10228</span>&#160;  <span class="keywordflow">if</span> (Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a475b1d2223ddab6c0ab44dfcea7dcba7">isPotentiallyUnsafe</a>() &amp;&amp;</div>
<div class="line"><a name="l10229"></a><span class="lineno">10229</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ab75d51988243f8ea9086b110401f8758">isFPVectorizationPotentiallyUnsafe</a>()) {</div>
<div class="line"><a name="l10230"></a><span class="lineno">10230</span>&#160;    <a class="code" href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">reportVectorizationFailure</a>(</div>
<div class="line"><a name="l10231"></a><span class="lineno">10231</span>&#160;        <span class="stringliteral">&quot;Potentially unsafe FP op prevents vectorization&quot;</span>,</div>
<div class="line"><a name="l10232"></a><span class="lineno">10232</span>&#160;        <span class="stringliteral">&quot;loop not vectorized due to unsafe FP support.&quot;</span>,</div>
<div class="line"><a name="l10233"></a><span class="lineno">10233</span>&#160;        <span class="stringliteral">&quot;UnsafeFP&quot;</span>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, L);</div>
<div class="line"><a name="l10234"></a><span class="lineno">10234</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l10235"></a><span class="lineno">10235</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;  }</div>
<div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160; </div>
<div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;  <span class="keywordtype">bool</span> AllowOrderedReductions;</div>
<div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160;  <span class="comment">// If the flag is set, use that instead and override the TTI behaviour.</span></div>
<div class="line"><a name="l10240"></a><span class="lineno">10240</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopVectorize_8cpp.html#ac050a91bc264472b58f2144ff8638b4c">ForceOrderedReductions</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;    AllowOrderedReductions = <a class="code" href="LoopVectorize_8cpp.html#ac050a91bc264472b58f2144ff8638b4c">ForceOrderedReductions</a>;</div>
<div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160;    AllowOrderedReductions = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a3e034d813ec5b7818252ac121d20a5aa">enableOrderedReductions</a>();</div>
<div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;  <span class="keywordflow">if</span> (!LVL.<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#a552a158f5a673da0a26461d1471cea41">canVectorizeFPMath</a>(AllowOrderedReductions)) {</div>
<div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160;    <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;      <span class="keyword">auto</span> *ExactFPMathInst = Requirements.<a class="code" href="classllvm_1_1LoopVectorizationRequirements.html#ae7795838121055002ab03a649ee1906c">getExactFPInst</a>();</div>
<div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysisFPCommute.html">OptimizationRemarkAnalysisFPCommute</a>(<a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;CantReorderFPOps&quot;</span>,</div>
<div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160;                                                 ExactFPMathInst-&gt;getDebugLoc(),</div>
<div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160;                                                 ExactFPMathInst-&gt;getParent())</div>
<div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;loop not vectorized: cannot prove it is safe to reorder &quot;</span></div>
<div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160;                <span class="stringliteral">&quot;floating-point operations&quot;</span>;</div>
<div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;    });</div>
<div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: loop not vectorized: cannot prove it is safe to &quot;</span></div>
<div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;                         <span class="stringliteral">&quot;reorder floating-point operations\n&quot;</span>);</div>
<div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160;  }</div>
<div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160; </div>
<div class="line"><a name="l10259"></a><span class="lineno">10259</span>&#160;  <span class="comment">// Use the cost model.</span></div>
<div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationCostModel.html">LoopVectorizationCostModel</a> CM(<span class="keywordtype">SEL</span>, L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, &amp;LVL, *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">DB</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>,</div>
<div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;                                <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;Hints, IAI);</div>
<div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;  CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a0ac5df8f0304981180d602dacb13512c">collectValuesToIgnore</a>();</div>
<div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;  CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a06f5d9725a2b1f7b06e8bf51f7d31417">collectElementTypesForWidening</a>();</div>
<div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160; </div>
<div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160;  <span class="comment">// Use the planner for vectorization.</span></div>
<div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160;  <a class="code" href="classllvm_1_1LoopVectorizationPlanner.html">LoopVectorizationPlanner</a> LVP(L, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, &amp;LVL, CM, IAI, PSE, Hints, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>);</div>
<div class="line"><a name="l10267"></a><span class="lineno">10267</span>&#160; </div>
<div class="line"><a name="l10268"></a><span class="lineno">10268</span>&#160;  <span class="comment">// Get user vectorization factor and interleave count.</span></div>
<div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;  <a class="code" href="classllvm_1_1ElementCount.html">ElementCount</a> UserVF = Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a50cae5c2df432357d50f182d310ce7b7">getWidth</a>();</div>
<div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160;  <span class="keywordtype">unsigned</span> UserIC = Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#ad98353127dbeb649d41ca07da5074b49">getInterleave</a>();</div>
<div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160; </div>
<div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;  <span class="comment">// Plan how to best vectorize, return the best VF and its cost.</span></div>
<div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160;  std::optional&lt;VectorizationFactor&gt; MaybeVF = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a072125b96fcf0ed77465f487c7bf3c25">plan</a>(UserVF, UserIC);</div>
<div class="line"><a name="l10274"></a><span class="lineno">10274</span>&#160; </div>
<div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160;  <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> VF = <a class="code" href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">VectorizationFactor::Disabled</a>();</div>
<div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;  <span class="keywordtype">unsigned</span> IC = 1;</div>
<div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160; </div>
<div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;  GeneratedRTChecks Checks(*PSE.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>(), <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;                           <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()-&gt;getDataLayout());</div>
<div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160;  <span class="keywordflow">if</span> (MaybeVF) {</div>
<div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;    VF = *MaybeVF;</div>
<div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;    <span class="comment">// Select the interleave count.</span></div>
<div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;    IC = CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af9f62350ccdebd24858be552f3fc051c">selectInterleaveCount</a>(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a048d568675a5cc69c3fb85206882316d">Cost</a>);</div>
<div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160; </div>
<div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;    <span class="keywordtype">unsigned</span> SelectedIC = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(IC, UserIC);</div>
<div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160;    <span class="comment">//  Optimistically generate runtime checks if they are needed. Drop them if</span></div>
<div class="line"><a name="l10287"></a><span class="lineno">10287</span>&#160;    <span class="comment">//  they turn out to not be profitable.</span></div>
<div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;    <span class="keywordflow">if</span> (VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>() || SelectedIC &gt; 1)</div>
<div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;      Checks.Create(L, *LVL.<a class="code" href="classllvm_1_1LoopVectorizationLegality.html#ae21d46756cd1643894e85c5f78182cb0">getLAI</a>(), PSE.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a12a8ac8838fb851a2de5dc5275307bb6">getPredicate</a>(), VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, SelectedIC);</div>
<div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160; </div>
<div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;    <span class="comment">// Check if it is profitable to vectorize with runtime checks.</span></div>
<div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;    <span class="keywordtype">bool</span> ForceVectorization =</div>
<div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160;        Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">getForce</a>() == <a class="code" href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">LoopVectorizeHints::FK_Enabled</a>;</div>
<div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;    <span class="keywordflow">if</span> (!ForceVectorization &amp;&amp;</div>
<div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160;        !<a class="code" href="LoopVectorize_8cpp.html#a402fb219059e7a914ae0541fbea17df5">areRuntimeChecksProfitable</a>(Checks, VF, CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#a296732b3ce802a21e7cb738b69e462da">getVScaleForTuning</a>(), L,</div>
<div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;                                    *PSE.<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">getSE</a>())) {</div>
<div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;      <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysisAliasing.html">OptimizationRemarkAnalysisAliasing</a>(</div>
<div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;                   <a class="code" href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;CantReorderMemOps&quot;</span>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(),</div>
<div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;                   L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;loop not vectorized: cannot prove it is safe to reorder &quot;</span></div>
<div class="line"><a name="l10302"></a><span class="lineno">10302</span>&#160;                  <span class="stringliteral">&quot;memory operations&quot;</span>;</div>
<div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;      });</div>
<div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Too many memory checks needed.\n&quot;</span>);</div>
<div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;      Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">emitRemarkWithHints</a>();</div>
<div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160;    }</div>
<div class="line"><a name="l10308"></a><span class="lineno">10308</span>&#160;  }</div>
<div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160; </div>
<div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160;  <span class="comment">// Identify the diagnostic messages that should be produced.</span></div>
<div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;  std::pair&lt;StringRef, std::string&gt; VecDiagMsg, IntDiagMsg;</div>
<div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160;  <span class="keywordtype">bool</span> VectorizeLoop = <span class="keyword">true</span>, InterleaveLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10313"></a><span class="lineno">10313</span>&#160;  <span class="keywordflow">if</span> (VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">isScalar</a>()) {</div>
<div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Vectorization is possible but not beneficial.\n&quot;</span>);</div>
<div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;    VecDiagMsg = std::make_pair(</div>
<div class="line"><a name="l10316"></a><span class="lineno">10316</span>&#160;        <span class="stringliteral">&quot;VectorizationNotBeneficial&quot;</span>,</div>
<div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;        <span class="stringliteral">&quot;the cost-model indicates that vectorization is not beneficial&quot;</span>);</div>
<div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160;    VectorizeLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;  }</div>
<div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160; </div>
<div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160;  <span class="keywordflow">if</span> (!MaybeVF &amp;&amp; UserIC &gt; 1) {</div>
<div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;    <span class="comment">// Tell the user interleaving was avoided up-front, despite being explicitly</span></div>
<div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160;    <span class="comment">// requested.</span></div>
<div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Ignoring UserIC, because vectorization and &quot;</span></div>
<div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;                         <span class="stringliteral">&quot;interleaving should be avoided up front\n&quot;</span>);</div>
<div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;    IntDiagMsg = std::make_pair(</div>
<div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160;        <span class="stringliteral">&quot;InterleavingAvoided&quot;</span>,</div>
<div class="line"><a name="l10328"></a><span class="lineno">10328</span>&#160;        <span class="stringliteral">&quot;Ignoring UserIC, because interleaving was avoided up front&quot;</span>);</div>
<div class="line"><a name="l10329"></a><span class="lineno">10329</span>&#160;    InterleaveLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10330"></a><span class="lineno">10330</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IC == 1 &amp;&amp; UserIC &lt;= 1) {</div>
<div class="line"><a name="l10331"></a><span class="lineno">10331</span>&#160;    <span class="comment">// Tell the user interleaving is not beneficial.</span></div>
<div class="line"><a name="l10332"></a><span class="lineno">10332</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving is not beneficial.\n&quot;</span>);</div>
<div class="line"><a name="l10333"></a><span class="lineno">10333</span>&#160;    IntDiagMsg = std::make_pair(</div>
<div class="line"><a name="l10334"></a><span class="lineno">10334</span>&#160;        <span class="stringliteral">&quot;InterleavingNotBeneficial&quot;</span>,</div>
<div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;        <span class="stringliteral">&quot;the cost-model indicates that interleaving is not beneficial&quot;</span>);</div>
<div class="line"><a name="l10336"></a><span class="lineno">10336</span>&#160;    InterleaveLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160;    <span class="keywordflow">if</span> (UserIC == 1) {</div>
<div class="line"><a name="l10338"></a><span class="lineno">10338</span>&#160;      IntDiagMsg.first = <span class="stringliteral">&quot;InterleavingNotBeneficialAndDisabled&quot;</span>;</div>
<div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;      IntDiagMsg.second +=</div>
<div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;          <span class="stringliteral">&quot; and is explicitly disabled or interleave count is set to 1&quot;</span>;</div>
<div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160;    }</div>
<div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IC &gt; 1 &amp;&amp; UserIC == 1) {</div>
<div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160;    <span class="comment">// Tell the user interleaving is beneficial, but it explicitly disabled.</span></div>
<div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleaving is beneficial but is explicitly disabled.&quot;</span>);</div>
<div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;    IntDiagMsg = std::make_pair(</div>
<div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;        <span class="stringliteral">&quot;InterleavingBeneficialButDisabled&quot;</span>,</div>
<div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160;        <span class="stringliteral">&quot;the cost-model indicates that interleaving is beneficial &quot;</span></div>
<div class="line"><a name="l10349"></a><span class="lineno">10349</span>&#160;        <span class="stringliteral">&quot;but is explicitly disabled or interleave count is set to 1&quot;</span>);</div>
<div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;    InterleaveLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160;  }</div>
<div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160; </div>
<div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160;  <span class="comment">// Override IC if user provided an interleave count.</span></div>
<div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;  IC = UserIC &gt; 0 ? UserIC : IC;</div>
<div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160; </div>
<div class="line"><a name="l10356"></a><span class="lineno">10356</span>&#160;  <span class="comment">// Emit diagnostic messages, if any.</span></div>
<div class="line"><a name="l10357"></a><span class="lineno">10357</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *VAPassName = Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#abcf8c2b35316773f1ab0ba70aeb2a6de">vectorizeAnalysisPassName</a>();</div>
<div class="line"><a name="l10358"></a><span class="lineno">10358</span>&#160;  <span class="keywordflow">if</span> (!VectorizeLoop &amp;&amp; !InterleaveLoop) {</div>
<div class="line"><a name="l10359"></a><span class="lineno">10359</span>&#160;    <span class="comment">// Do not vectorize or interleaving the loop.</span></div>
<div class="line"><a name="l10360"></a><span class="lineno">10360</span>&#160;    <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10361"></a><span class="lineno">10361</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(VAPassName, VecDiagMsg.first,</div>
<div class="line"><a name="l10362"></a><span class="lineno">10362</span>&#160;                                      L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10363"></a><span class="lineno">10363</span>&#160;             &lt;&lt; VecDiagMsg.second;</div>
<div class="line"><a name="l10364"></a><span class="lineno">10364</span>&#160;    });</div>
<div class="line"><a name="l10365"></a><span class="lineno">10365</span>&#160;    <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10366"></a><span class="lineno">10366</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(<a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, IntDiagMsg.first,</div>
<div class="line"><a name="l10367"></a><span class="lineno">10367</span>&#160;                                      L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10368"></a><span class="lineno">10368</span>&#160;             &lt;&lt; IntDiagMsg.second;</div>
<div class="line"><a name="l10369"></a><span class="lineno">10369</span>&#160;    });</div>
<div class="line"><a name="l10370"></a><span class="lineno">10370</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10371"></a><span class="lineno">10371</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!VectorizeLoop &amp;&amp; InterleaveLoop) {</div>
<div class="line"><a name="l10372"></a><span class="lineno">10372</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleave Count is &quot;</span> &lt;&lt; IC &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l10373"></a><span class="lineno">10373</span>&#160;    <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10374"></a><span class="lineno">10374</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(VAPassName, VecDiagMsg.first,</div>
<div class="line"><a name="l10375"></a><span class="lineno">10375</span>&#160;                                        L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10376"></a><span class="lineno">10376</span>&#160;             &lt;&lt; VecDiagMsg.second;</div>
<div class="line"><a name="l10377"></a><span class="lineno">10377</span>&#160;    });</div>
<div class="line"><a name="l10378"></a><span class="lineno">10378</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (VectorizeLoop &amp;&amp; !InterleaveLoop) {</div>
<div class="line"><a name="l10379"></a><span class="lineno">10379</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found a vectorizable loop (&quot;</span> &lt;&lt; VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a></div>
<div class="line"><a name="l10380"></a><span class="lineno">10380</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; DebugLocStr &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l10381"></a><span class="lineno">10381</span>&#160;    <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10382"></a><span class="lineno">10382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, IntDiagMsg.first,</div>
<div class="line"><a name="l10383"></a><span class="lineno">10383</span>&#160;                                        L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10384"></a><span class="lineno">10384</span>&#160;             &lt;&lt; IntDiagMsg.second;</div>
<div class="line"><a name="l10385"></a><span class="lineno">10385</span>&#160;    });</div>
<div class="line"><a name="l10386"></a><span class="lineno">10386</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (VectorizeLoop &amp;&amp; InterleaveLoop) {</div>
<div class="line"><a name="l10387"></a><span class="lineno">10387</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Found a vectorizable loop (&quot;</span> &lt;&lt; VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a></div>
<div class="line"><a name="l10388"></a><span class="lineno">10388</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; DebugLocStr &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l10389"></a><span class="lineno">10389</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: Interleave Count is &quot;</span> &lt;&lt; IC &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l10390"></a><span class="lineno">10390</span>&#160;  }</div>
<div class="line"><a name="l10391"></a><span class="lineno">10391</span>&#160; </div>
<div class="line"><a name="l10392"></a><span class="lineno">10392</span>&#160;  <span class="keywordtype">bool</span> DisableRuntimeUnroll = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10393"></a><span class="lineno">10393</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigLoopID = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l10394"></a><span class="lineno">10394</span>&#160;  {</div>
<div class="line"><a name="l10395"></a><span class="lineno">10395</span>&#160;    <span class="keyword">using namespace </span>ore;</div>
<div class="line"><a name="l10396"></a><span class="lineno">10396</span>&#160;    <span class="keywordflow">if</span> (!VectorizeLoop) {</div>
<div class="line"><a name="l10397"></a><span class="lineno">10397</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IC &gt; 1 &amp;&amp; <span class="stringliteral">&quot;interleave count should not be 1 or 0&quot;</span>);</div>
<div class="line"><a name="l10398"></a><span class="lineno">10398</span>&#160;      <span class="comment">// If we decided that it is not legal to vectorize the loop, then</span></div>
<div class="line"><a name="l10399"></a><span class="lineno">10399</span>&#160;      <span class="comment">// interleave it.</span></div>
<div class="line"><a name="l10400"></a><span class="lineno">10400</span>&#160;      <a class="code" href="classllvm_1_1InnerLoopUnroller.html">InnerLoopUnroller</a> Unroller(L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, IC, &amp;LVL,</div>
<div class="line"><a name="l10401"></a><span class="lineno">10401</span>&#160;                                 &amp;CM, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>, Checks);</div>
<div class="line"><a name="l10402"></a><span class="lineno">10402</span>&#160; </div>
<div class="line"><a name="l10403"></a><span class="lineno">10403</span>&#160;      <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;BestPlan = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">getBestPlanFor</a>(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>);</div>
<div class="line"><a name="l10404"></a><span class="lineno">10404</span>&#160;      LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">executePlan</a>(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, IC, BestPlan, Unroller, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l10405"></a><span class="lineno">10405</span>&#160; </div>
<div class="line"><a name="l10406"></a><span class="lineno">10406</span>&#160;      <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10407"></a><span class="lineno">10407</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, <span class="stringliteral">&quot;Interleaved&quot;</span>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(),</div>
<div class="line"><a name="l10408"></a><span class="lineno">10408</span>&#160;                                  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10409"></a><span class="lineno">10409</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;interleaved loop (interleaved count: &quot;</span></div>
<div class="line"><a name="l10410"></a><span class="lineno">10410</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;InterleaveCount&quot;</span>, IC) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l10411"></a><span class="lineno">10411</span>&#160;      });</div>
<div class="line"><a name="l10412"></a><span class="lineno">10412</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10413"></a><span class="lineno">10413</span>&#160;      <span class="comment">// If we decided that it is *legal* to vectorize the loop, then do it.</span></div>
<div class="line"><a name="l10414"></a><span class="lineno">10414</span>&#160; </div>
<div class="line"><a name="l10415"></a><span class="lineno">10415</span>&#160;      <span class="comment">// Consider vectorizing the epilogue too if it&#39;s profitable.</span></div>
<div class="line"><a name="l10416"></a><span class="lineno">10416</span>&#160;      <a class="code" href="structllvm_1_1VectorizationFactor.html">VectorizationFactor</a> EpilogueVF =</div>
<div class="line"><a name="l10417"></a><span class="lineno">10417</span>&#160;          CM.<a class="code" href="classllvm_1_1LoopVectorizationCostModel.html#af4c3bb293c6f1702f5df150aca8934c3">selectEpilogueVectorizationFactor</a>(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, LVP);</div>
<div class="line"><a name="l10418"></a><span class="lineno">10418</span>&#160;      <span class="keywordflow">if</span> (EpilogueVF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>.<a class="code" href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">isVector</a>()) {</div>
<div class="line"><a name="l10419"></a><span class="lineno">10419</span>&#160; </div>
<div class="line"><a name="l10420"></a><span class="lineno">10420</span>&#160;        <span class="comment">// The first pass vectorizes the main loop and creates a scalar epilogue</span></div>
<div class="line"><a name="l10421"></a><span class="lineno">10421</span>&#160;        <span class="comment">// to be vectorized by executing the plan (potentially with a different</span></div>
<div class="line"><a name="l10422"></a><span class="lineno">10422</span>&#160;        <span class="comment">// factor) again shortly afterwards.</span></div>
<div class="line"><a name="l10423"></a><span class="lineno">10423</span>&#160;        <a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html">EpilogueLoopVectorizationInfo</a> EPI(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, IC, EpilogueVF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, 1);</div>
<div class="line"><a name="l10424"></a><span class="lineno">10424</span>&#160;        <a class="code" href="classllvm_1_1EpilogueVectorizerMainLoop.html">EpilogueVectorizerMainLoop</a> MainILV(L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>,</div>
<div class="line"><a name="l10425"></a><span class="lineno">10425</span>&#160;                                           EPI, &amp;LVL, &amp;CM, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>, Checks);</div>
<div class="line"><a name="l10426"></a><span class="lineno">10426</span>&#160; </div>
<div class="line"><a name="l10427"></a><span class="lineno">10427</span>&#160;        <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;BestMainPlan = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">getBestPlanFor</a>(EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">MainLoopVF</a>);</div>
<div class="line"><a name="l10428"></a><span class="lineno">10428</span>&#160;        LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">executePlan</a>(EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">MainLoopVF</a>, EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">MainLoopUF</a>, BestMainPlan, MainILV,</div>
<div class="line"><a name="l10429"></a><span class="lineno">10429</span>&#160;                        <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l10430"></a><span class="lineno">10430</span>&#160;        ++LoopsVectorized;</div>
<div class="line"><a name="l10431"></a><span class="lineno">10431</span>&#160; </div>
<div class="line"><a name="l10432"></a><span class="lineno">10432</span>&#160;        <span class="comment">// Second pass vectorizes the epilogue and adjusts the control flow</span></div>
<div class="line"><a name="l10433"></a><span class="lineno">10433</span>&#160;        <span class="comment">// edges from the first pass.</span></div>
<div class="line"><a name="l10434"></a><span class="lineno">10434</span>&#160;        EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">MainLoopVF</a> = EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>;</div>
<div class="line"><a name="l10435"></a><span class="lineno">10435</span>&#160;        EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">MainLoopUF</a> = EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a>;</div>
<div class="line"><a name="l10436"></a><span class="lineno">10436</span>&#160;        <a class="code" href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html">EpilogueVectorizerEpilogueLoop</a> EpilogILV(L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>,</div>
<div class="line"><a name="l10437"></a><span class="lineno">10437</span>&#160;                                                 <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, EPI, &amp;LVL, &amp;CM, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>,</div>
<div class="line"><a name="l10438"></a><span class="lineno">10438</span>&#160;                                                 Checks);</div>
<div class="line"><a name="l10439"></a><span class="lineno">10439</span>&#160; </div>
<div class="line"><a name="l10440"></a><span class="lineno">10440</span>&#160;        <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;BestEpiPlan = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">getBestPlanFor</a>(EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>);</div>
<div class="line"><a name="l10441"></a><span class="lineno">10441</span>&#160;        <a class="code" href="classllvm_1_1VPRegionBlock.html">VPRegionBlock</a> *VectorLoop = BestEpiPlan.<a class="code" href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">getVectorLoopRegion</a>();</div>
<div class="line"><a name="l10442"></a><span class="lineno">10442</span>&#160;        <a class="code" href="classllvm_1_1VPBasicBlock.html">VPBasicBlock</a> *Header = VectorLoop-&gt;<a class="code" href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">getEntryBasicBlock</a>();</div>
<div class="line"><a name="l10443"></a><span class="lineno">10443</span>&#160;        Header-&gt;setName(<span class="stringliteral">&quot;vec.epilog.vector.body&quot;</span>);</div>
<div class="line"><a name="l10444"></a><span class="lineno">10444</span>&#160; </div>
<div class="line"><a name="l10445"></a><span class="lineno">10445</span>&#160;        <span class="comment">// Ensure that the start values for any VPWidenIntOrFpInductionRecipe,</span></div>
<div class="line"><a name="l10446"></a><span class="lineno">10446</span>&#160;        <span class="comment">// VPWidenPointerInductionRecipe and VPReductionPHIRecipes are updated</span></div>
<div class="line"><a name="l10447"></a><span class="lineno">10447</span>&#160;        <span class="comment">// before vectorizing the epilogue loop.</span></div>
<div class="line"><a name="l10448"></a><span class="lineno">10448</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VPRecipeBase.html">VPRecipeBase</a> &amp;R : Header-&gt;phis()) {</div>
<div class="line"><a name="l10449"></a><span class="lineno">10449</span>&#160;          <span class="keywordflow">if</span> (isa&lt;VPCanonicalIVPHIRecipe&gt;(&amp;R))</div>
<div class="line"><a name="l10450"></a><span class="lineno">10450</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10451"></a><span class="lineno">10451</span>&#160; </div>
<div class="line"><a name="l10452"></a><span class="lineno">10452</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *ResumeV = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l10453"></a><span class="lineno">10453</span>&#160;          <span class="comment">// TODO: Move setting of resume values to prepareToExecute.</span></div>
<div class="line"><a name="l10454"></a><span class="lineno">10454</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ReductionPhi = dyn_cast&lt;VPReductionPHIRecipe&gt;(&amp;R)) {</div>
<div class="line"><a name="l10455"></a><span class="lineno">10455</span>&#160;            ResumeV = MainILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a4d6937e8333699792612fd75586a9538">getReductionResumeValue</a>(</div>
<div class="line"><a name="l10456"></a><span class="lineno">10456</span>&#160;                ReductionPhi-&gt;getRecurrenceDescriptor());</div>
<div class="line"><a name="l10457"></a><span class="lineno">10457</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10458"></a><span class="lineno">10458</span>&#160;            <span class="comment">// Create induction resume values for both widened pointer and</span></div>
<div class="line"><a name="l10459"></a><span class="lineno">10459</span>&#160;            <span class="comment">// integer/fp inductions and update the start value of the induction</span></div>
<div class="line"><a name="l10460"></a><span class="lineno">10460</span>&#160;            <span class="comment">// recipes to use the resume value.</span></div>
<div class="line"><a name="l10461"></a><span class="lineno">10461</span>&#160;            <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndPhi = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l10462"></a><span class="lineno">10462</span>&#160;            <span class="keyword">const</span> <a class="code" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l10463"></a><span class="lineno">10463</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Ind = dyn_cast&lt;VPWidenPointerInductionRecipe&gt;(&amp;R)) {</div>
<div class="line"><a name="l10464"></a><span class="lineno">10464</span>&#160;              IndPhi = cast&lt;PHINode&gt;(Ind-&gt;getUnderlyingValue());</div>
<div class="line"><a name="l10465"></a><span class="lineno">10465</span>&#160;              <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = &amp;Ind-&gt;getInductionDescriptor();</div>
<div class="line"><a name="l10466"></a><span class="lineno">10466</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10467"></a><span class="lineno">10467</span>&#160;              <span class="keyword">auto</span> *WidenInd = cast&lt;VPWidenIntOrFpInductionRecipe&gt;(&amp;R);</div>
<div class="line"><a name="l10468"></a><span class="lineno">10468</span>&#160;              IndPhi = WidenInd-&gt;getPHINode();</div>
<div class="line"><a name="l10469"></a><span class="lineno">10469</span>&#160;              <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = &amp;WidenInd-&gt;getInductionDescriptor();</div>
<div class="line"><a name="l10470"></a><span class="lineno">10470</span>&#160;            }</div>
<div class="line"><a name="l10471"></a><span class="lineno">10471</span>&#160; </div>
<div class="line"><a name="l10472"></a><span class="lineno">10472</span>&#160;            ResumeV = MainILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#ae7137d6863a9184da04c18725908e413">createInductionResumeValue</a>(</div>
<div class="line"><a name="l10473"></a><span class="lineno">10473</span>&#160;                IndPhi, *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, {EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">MainLoopIterationCountCheck</a>});</div>
<div class="line"><a name="l10474"></a><span class="lineno">10474</span>&#160;          }</div>
<div class="line"><a name="l10475"></a><span class="lineno">10475</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ResumeV &amp;&amp; <span class="stringliteral">&quot;Must have a resume value&quot;</span>);</div>
<div class="line"><a name="l10476"></a><span class="lineno">10476</span>&#160;          <a class="code" href="classllvm_1_1VPValue.html">VPValue</a> *StartVal = BestEpiPlan.<a class="code" href="classllvm_1_1VPlan.html#af36064f4b316a511f5d1d9058ec76569">getOrAddExternalDef</a>(ResumeV);</div>
<div class="line"><a name="l10477"></a><span class="lineno">10477</span>&#160;          cast&lt;VPHeaderPHIRecipe&gt;(&amp;R)-&gt;setStartValue(StartVal);</div>
<div class="line"><a name="l10478"></a><span class="lineno">10478</span>&#160;        }</div>
<div class="line"><a name="l10479"></a><span class="lineno">10479</span>&#160; </div>
<div class="line"><a name="l10480"></a><span class="lineno">10480</span>&#160;        LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">executePlan</a>(EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">EpilogueVF</a>, EPI.<a class="code" href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">EpilogueUF</a>, BestEpiPlan, EpilogILV,</div>
<div class="line"><a name="l10481"></a><span class="lineno">10481</span>&#160;                        <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l10482"></a><span class="lineno">10482</span>&#160;        ++LoopsEpilogueVectorized;</div>
<div class="line"><a name="l10483"></a><span class="lineno">10483</span>&#160; </div>
<div class="line"><a name="l10484"></a><span class="lineno">10484</span>&#160;        <span class="keywordflow">if</span> (!MainILV.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2e066ef7bc9673cbb2a825189491577d">areSafetyChecksAdded</a>())</div>
<div class="line"><a name="l10485"></a><span class="lineno">10485</span>&#160;          DisableRuntimeUnroll = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10486"></a><span class="lineno">10486</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10487"></a><span class="lineno">10487</span>&#160;        <a class="code" href="classllvm_1_1InnerLoopVectorizer.html">InnerLoopVectorizer</a> LB(L, PSE, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>,</div>
<div class="line"><a name="l10488"></a><span class="lineno">10488</span>&#160;                               VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a0c1900dc8fe6b998c1de1880f300dcfa">MinProfitableTripCount</a>, IC, &amp;LVL, &amp;CM, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>,</div>
<div class="line"><a name="l10489"></a><span class="lineno">10489</span>&#160;                               <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>, Checks);</div>
<div class="line"><a name="l10490"></a><span class="lineno">10490</span>&#160; </div>
<div class="line"><a name="l10491"></a><span class="lineno">10491</span>&#160;        <a class="code" href="classllvm_1_1VPlan.html">VPlan</a> &amp;BestPlan = LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">getBestPlanFor</a>(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>);</div>
<div class="line"><a name="l10492"></a><span class="lineno">10492</span>&#160;        LVP.<a class="code" href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">executePlan</a>(VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>, IC, BestPlan, LB, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l10493"></a><span class="lineno">10493</span>&#160;        ++LoopsVectorized;</div>
<div class="line"><a name="l10494"></a><span class="lineno">10494</span>&#160; </div>
<div class="line"><a name="l10495"></a><span class="lineno">10495</span>&#160;        <span class="comment">// Add metadata to disable runtime unrolling a scalar loop when there</span></div>
<div class="line"><a name="l10496"></a><span class="lineno">10496</span>&#160;        <span class="comment">// are no runtime checks about strides and memory. A scalar loop that is</span></div>
<div class="line"><a name="l10497"></a><span class="lineno">10497</span>&#160;        <span class="comment">// rarely used is not worth unrolling.</span></div>
<div class="line"><a name="l10498"></a><span class="lineno">10498</span>&#160;        <span class="keywordflow">if</span> (!LB.<a class="code" href="classllvm_1_1InnerLoopVectorizer.html#a2e066ef7bc9673cbb2a825189491577d">areSafetyChecksAdded</a>())</div>
<div class="line"><a name="l10499"></a><span class="lineno">10499</span>&#160;          DisableRuntimeUnroll = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10500"></a><span class="lineno">10500</span>&#160;      }</div>
<div class="line"><a name="l10501"></a><span class="lineno">10501</span>&#160;      <span class="comment">// Report the vectorization decision.</span></div>
<div class="line"><a name="l10502"></a><span class="lineno">10502</span>&#160;      <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l10503"></a><span class="lineno">10503</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>, <span class="stringliteral">&quot;Vectorized&quot;</span>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(),</div>
<div class="line"><a name="l10504"></a><span class="lineno">10504</span>&#160;                                  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l10505"></a><span class="lineno">10505</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;vectorized loop (vectorization width: &quot;</span></div>
<div class="line"><a name="l10506"></a><span class="lineno">10506</span>&#160;               &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;VectorizationFactor&quot;</span>, VF.<a class="code" href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">Width</a>)</div>
<div class="line"><a name="l10507"></a><span class="lineno">10507</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;, interleaved count: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;InterleaveCount&quot;</span>, IC) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l10508"></a><span class="lineno">10508</span>&#160;      });</div>
<div class="line"><a name="l10509"></a><span class="lineno">10509</span>&#160;    }</div>
<div class="line"><a name="l10510"></a><span class="lineno">10510</span>&#160; </div>
<div class="line"><a name="l10511"></a><span class="lineno">10511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#a74b26949a0dd7a5fab2ba1b0da204e50">allowExtraAnalysis</a>(<a class="code" href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a>))</div>
<div class="line"><a name="l10512"></a><span class="lineno">10512</span>&#160;      <a class="code" href="LoopVectorize_8cpp.html#af1fba45879c49d4839b11ec30afd7532">checkMixedPrecision</a>(L, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>);</div>
<div class="line"><a name="l10513"></a><span class="lineno">10513</span>&#160;  }</div>
<div class="line"><a name="l10514"></a><span class="lineno">10514</span>&#160; </div>
<div class="line"><a name="l10515"></a><span class="lineno">10515</span>&#160;  std::optional&lt;MDNode *&gt; RemainderLoopID =</div>
<div class="line"><a name="l10516"></a><span class="lineno">10516</span>&#160;      <a class="code" href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">makeFollowupLoopID</a>(OrigLoopID, {<a class="code" href="LoopVectorize_8cpp.html#a3bf55ccbbeedcfb8cd2a1bd62c0ad91a">LLVMLoopVectorizeFollowupAll</a>,</div>
<div class="line"><a name="l10517"></a><span class="lineno">10517</span>&#160;                                      <a class="code" href="LoopVectorize_8cpp.html#aadedae9de069f3bcef6fa7a90ce4a630">LLVMLoopVectorizeFollowupEpilogue</a>});</div>
<div class="line"><a name="l10518"></a><span class="lineno">10518</span>&#160;  <span class="keywordflow">if</span> (RemainderLoopID) {</div>
<div class="line"><a name="l10519"></a><span class="lineno">10519</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(*RemainderLoopID);</div>
<div class="line"><a name="l10520"></a><span class="lineno">10520</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10521"></a><span class="lineno">10521</span>&#160;    <span class="keywordflow">if</span> (DisableRuntimeUnroll)</div>
<div class="line"><a name="l10522"></a><span class="lineno">10522</span>&#160;      <a class="code" href="LoopVectorize_8cpp.html#ae32e9a491e0cd889c6490afa72b62154">AddRuntimeUnrollDisableMetaData</a>(L);</div>
<div class="line"><a name="l10523"></a><span class="lineno">10523</span>&#160; </div>
<div class="line"><a name="l10524"></a><span class="lineno">10524</span>&#160;    <span class="comment">// Mark the loop as already vectorized to avoid vectorizing again.</span></div>
<div class="line"><a name="l10525"></a><span class="lineno">10525</span>&#160;    Hints.<a class="code" href="classllvm_1_1LoopVectorizeHints.html#aa2f5ef2d522fb80de283a23d5bed6d86">setAlreadyVectorized</a>();</div>
<div class="line"><a name="l10526"></a><span class="lineno">10526</span>&#160;  }</div>
<div class="line"><a name="l10527"></a><span class="lineno">10527</span>&#160; </div>
<div class="line"><a name="l10528"></a><span class="lineno">10528</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm.html#a26389c546573f058ad8ecbdc5c1933cf">verifyFunction</a>(*L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(), &amp;<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</div>
<div class="line"><a name="l10529"></a><span class="lineno">10529</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10530"></a><span class="lineno">10530</span>&#160;}</div>
<div class="line"><a name="l10531"></a><span class="lineno">10531</span>&#160; </div>
<div class="line"><a name="l10532"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizePass.html#a525145697638ba4415e19d92a4946b30">10532</a></span>&#160;<a class="code" href="structllvm_1_1LoopVectorizeResult.html">LoopVectorizeResult</a> <a class="code" href="structllvm_1_1LoopVectorizePass.html#a525145697638ba4415e19d92a4946b30">LoopVectorizePass::runImpl</a>(</div>
<div class="line"><a name="l10533"></a><span class="lineno">10533</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE_, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI_, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI_,</div>
<div class="line"><a name="l10534"></a><span class="lineno">10534</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT_, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;BFI_, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI_,</div>
<div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;    <a class="code" href="classllvm_1_1DemandedBits.html">DemandedBits</a> &amp;DB_, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;AC_, <a class="code" href="classllvm_1_1LoopAccessInfoManager.html">LoopAccessInfoManager</a> &amp;LAIs_,</div>
<div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE_, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI_) {</div>
<div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a> = &amp;SE_;</div>
<div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a> = &amp;LI_;</div>
<div class="line"><a name="l10539"></a><span class="lineno">10539</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = &amp;TTI_;</div>
<div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a> = &amp;DT_;</div>
<div class="line"><a name="l10541"></a><span class="lineno">10541</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a> = &amp;BFI_;</div>
<div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a> = TLI_;</div>
<div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a> = &amp;AC_;</div>
<div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a38ff83df2a3ad17de50157ed09a1c259">LAIs</a> = &amp;LAIs_;</div>
<div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">DB</a> = &amp;DB_;</div>
<div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a> = &amp;ORE_;</div>
<div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160;  <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a> = PSI_;</div>
<div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160; </div>
<div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160;  <span class="comment">// Don&#39;t attempt if</span></div>
<div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;  <span class="comment">// 1. the target claims to have no vector registers, and</span></div>
<div class="line"><a name="l10551"></a><span class="lineno">10551</span>&#160;  <span class="comment">// 2. interleaving won&#39;t help ILP.</span></div>
<div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160;  <span class="comment">// The second condition is necessary because, even if the target has no</span></div>
<div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160;  <span class="comment">// vector registers, loop vectorization may still enable scalar</span></div>
<div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160;  <span class="comment">// interleaving.</span></div>
<div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aae0e8ca52658f54e5cc6214eb1a291ef">getNumberOfRegisters</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">getRegisterClassForType</a>(<span class="keyword">true</span>)) &amp;&amp;</div>
<div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a4ed57eef29fa5e077bd059050c293723">getMaxInterleaveFactor</a>(1) &lt; 2)</div>
<div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1LoopVectorizeResult.html">LoopVectorizeResult</a>(<span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160; </div>
<div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>, CFGChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160; </div>
<div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;  <span class="comment">// The vectorizer requires loops to be in simplified form.</span></div>
<div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;  <span class="comment">// Since simplification may add new inner loops, it has to run before the</span></div>
<div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;  <span class="comment">// legality and profitability checks. This means running the loop vectorizer</span></div>
<div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160;  <span class="comment">// will simplify all loops, regardless of whether anything end up being</span></div>
<div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;  <span class="comment">// vectorized.</span></div>
<div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;L : *<a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>)</div>
<div class="line"><a name="l10568"></a><span class="lineno">10568</span>&#160;    Changed |= CFGChanged |=</div>
<div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;        <a class="code" href="namespacellvm.html#a0083a69883e0f97e111dbff064c60f42">simplifyLoop</a>(L, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <span class="keyword">nullptr</span>, <span class="keyword">false</span> <span class="comment">/* PreserveLCSSA */</span>);</div>
<div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160; </div>
<div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;  <span class="comment">// Build up a worklist of inner-loops to vectorize. This is necessary as</span></div>
<div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160;  <span class="comment">// the act of vectorizing or partially unrolling a loop creates new loops</span></div>
<div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;  <span class="comment">// and can invalidate iterators across the loops.</span></div>
<div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Loop *, 8&gt;</a> Worklist;</div>
<div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160; </div>
<div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L : *<a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>)</div>
<div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160;    <a class="code" href="LoopVectorize_8cpp.html#a00315ff11c9068aab97e5780bdfa5eef">collectSupportedLoops</a>(*L, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, Worklist);</div>
<div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160; </div>
<div class="line"><a name="l10579"></a><span class="lineno">10579</span>&#160;  LoopsAnalyzed += Worklist.size();</div>
<div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160; </div>
<div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;  <span class="comment">// Now walk the identified inner loops.</span></div>
<div class="line"><a name="l10582"></a><span class="lineno">10582</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l10583"></a><span class="lineno">10583</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l10584"></a><span class="lineno">10584</span>&#160; </div>
<div class="line"><a name="l10585"></a><span class="lineno">10585</span>&#160;    <span class="comment">// For the inner loops we actually process, form LCSSA to simplify the</span></div>
<div class="line"><a name="l10586"></a><span class="lineno">10586</span>&#160;    <span class="comment">// transform.</span></div>
<div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;    Changed |= <a class="code" href="namespacellvm.html#a30e47ae014eb35bea24e45097c2bd731">formLCSSARecursively</a>(*L, *<a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a>);</div>
<div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160; </div>
<div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;    Changed |= CFGChanged |= <a class="code" href="structllvm_1_1LoopVectorizePass.html#a160afa01e95095aa0c8115b6e0e6f4a6">processLoop</a>(L);</div>
<div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160; </div>
<div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160;    <span class="keywordflow">if</span> (Changed)</div>
<div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;      <a class="code" href="structllvm_1_1LoopVectorizePass.html#a38ff83df2a3ad17de50157ed09a1c259">LAIs</a>-&gt;<a class="code" href="classllvm_1_1LoopAccessInfoManager.html#a806f5100fd6d2d12ff0c7ad0ac6928e0">clear</a>();</div>
<div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;  }</div>
<div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160; </div>
<div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;  <span class="comment">// Process each loop nest in the function.</span></div>
<div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1LoopVectorizeResult.html">LoopVectorizeResult</a>(Changed, CFGChanged);</div>
<div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160;}</div>
<div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160; </div>
<div class="line"><a name="l10599"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizePass.html#af3b0e58cfdb2c6c663cd47a8808ba70a">10599</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="structllvm_1_1LoopVectorizePass.html#af3b0e58cfdb2c6c663cd47a8808ba70a">LoopVectorizePass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160;                                         <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;    <span class="comment">// There are no loops in the function. Return before computing other expensive</span></div>
<div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160;    <span class="comment">// analyses.</span></div>
<div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>.<a class="code" href="classllvm_1_1LoopInfoBase.html#a83d8036930a033b196409ced5c9409e5">empty</a>())</div>
<div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolutionAnalysis.html">ScalarEvolutionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AssumptionAnalysis.html">AssumptionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">DB</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DemandedBitsAnalysis.html">DemandedBitsAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">OptimizationRemarkEmitterAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160; </div>
<div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;    <a class="code" href="classllvm_1_1LoopAccessInfoManager.html">LoopAccessInfoManager</a> &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a38ff83df2a3ad17de50157ed09a1c259">LAIs</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAccessAnalysis.html">LoopAccessAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160;    <span class="keyword">auto</span> &amp;MAMProxy = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">ModuleAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10617"></a><span class="lineno">10617</span>&#160;    <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *<a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a> =</div>
<div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160;        MAMProxy.getCachedResult&lt;<a class="code" href="classllvm_1_1ProfileSummaryAnalysis.html">ProfileSummaryAnalysis</a>&gt;(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;    <a class="code" href="structllvm_1_1LoopVectorizeResult.html">LoopVectorizeResult</a> Result =</div>
<div class="line"><a name="l10620"></a><span class="lineno">10620</span>&#160;        <a class="code" href="structllvm_1_1LoopVectorizePass.html#a525145697638ba4415e19d92a4946b30">runImpl</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">SE</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">LI</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">DT</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">BFI</a>, &amp;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">TLI</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">DB</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">AC</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a38ff83df2a3ad17de50157ed09a1c259">LAIs</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">ORE</a>, <a class="code" href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">PSI</a>);</div>
<div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;    <span class="keywordflow">if</span> (!Result.MadeAnyChange)</div>
<div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160; </div>
<div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;    <span class="comment">// We currently do not preserve loopinfo/dominator analyses with outer loop</span></div>
<div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;    <span class="comment">// vectorization. Until this is addressed, mark these analyses as preserved</span></div>
<div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;    <span class="comment">// only for non-VPlan-native path.</span></div>
<div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160;    <span class="comment">// TODO: Preserve Loop and Dominator analyses for VPlan-native path.</span></div>
<div class="line"><a name="l10629"></a><span class="lineno">10629</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">EnableVPlanNativePath</a>) {</div>
<div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;();</div>
<div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;    }</div>
<div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160; </div>
<div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;    <span class="keywordflow">if</span> (Result.MadeCFGChange) {</div>
<div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;      <span class="comment">// Making CFG changes likely means a loop got vectorized. Indicate that</span></div>
<div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;      <span class="comment">// extra simplification passes should be run.</span></div>
<div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160;      <span class="comment">// TODO: MadeCFGChanges is not a prefect proxy. Extra passes should only</span></div>
<div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;      <span class="comment">// be run if runtime checks have been added.</span></div>
<div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="structllvm_1_1ShouldRunExtraVectorPasses.html">ShouldRunExtraVectorPasses</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l10640"></a><span class="lineno">10640</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="structllvm_1_1ShouldRunExtraVectorPasses.html">ShouldRunExtraVectorPasses</a>&gt;();</div>
<div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">preserveSet</a>&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;();</div>
<div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;    }</div>
<div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;    <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;}</div>
<div class="line"><a name="l10646"></a><span class="lineno">10646</span>&#160; </div>
<div class="line"><a name="l10647"></a><span class="lineno"><a class="line" href="structllvm_1_1LoopVectorizePass.html#a4fa1898352e5014c447a589398c94595">10647</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1LoopVectorizePass.html#a4fa1898352e5014c447a589398c94595">LoopVectorizePass::printPipeline</a>(</div>
<div class="line"><a name="l10648"></a><span class="lineno">10648</span>&#160;    <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>)&gt; MapClassName2PassName) {</div>
<div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160;  <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1PassInfoMixin.html">PassInfoMixin&lt;LoopVectorizePass&gt;</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="structllvm_1_1LoopVectorizePass.html#a4fa1898352e5014c447a589398c94595">printPipeline</a>(</div>
<div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, MapClassName2PassName);</div>
<div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160; </div>
<div class="line"><a name="l10652"></a><span class="lineno">10652</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span>;</div>
<div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (InterleaveOnlyWhenForced ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;interleave-forced-only;&quot;</span>;</div>
<div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (VectorizeOnlyWhenForced ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;vectorize-forced-only;&quot;</span>;</div>
<div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aLoopVectorize_8cpp_html_ab2ebcb0227079343a9a2e53638c1d76e"><div class="ttname"><a href="LoopVectorize_8cpp.html#ab2ebcb0227079343a9a2e53638c1d76e">largestIntegerVectorType</a></div><div class="ttdeci">static Type * largestIntegerVectorType(Type *T1, Type *T2)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03554">LoopVectorize.cpp:3554</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64afc2e3edeec59afcdc10f55205713f14b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64afc2e3edeec59afcdc10f55205713f14b">llvm::TargetTransformInfo::CastContextHint::GatherScatter</a></div><div class="ttdeci">@ GatherScatter</div><div class="ttdoc">The cast is used with a gather/scatter.</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdeci">@ Undef</div><div class="ttdoc">Value of the register doesn't matter.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00052">MachineInstrBuilder.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_aa311eadfce08b1fa5cf55c6c2008bb47"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#aa311eadfce08b1fa5cf55c6c2008bb47">llvm::InterleaveGroup::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00655">VectorUtils.h:655</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a472c49074b0d81970f8eea07de4d7ad4"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a472c49074b0d81970f8eea07de4d7ad4">llvm::LoopVectorizationCostModel::isLegalMaskedLoad</a></div><div class="ttdeci">bool isLegalMaskedLoad(Type *DataType, Value *Ptr, Align Alignment) const</div><div class="ttdoc">Returns true if the target machine supports masked load operation for the given DataType and kind of ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01448">LoopVectorize.cpp:1448</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab102f0f12dd38aeea5906b1d80c792ff"><div class="ttname"><a href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">llvm::alignTo</a></div><div class="ttdeci">uint64_t alignTo(uint64_t Size, Align A)</div><div class="ttdoc">Returns a multiple of A needed to store Size bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00155">Alignment.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_af4c3bb293c6f1702f5df150aca8934c3"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#af4c3bb293c6f1702f5df150aca8934c3">llvm::LoopVectorizationCostModel::selectEpilogueVectorizationFactor</a></div><div class="ttdeci">VectorizationFactor selectEpilogueVectorizationFactor(const ElementCount MaxVF, const LoopVectorizationPlanner &amp;LVP)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05561">LoopVectorize.cpp:5561</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ac3679e1fff2d21c2034c7ce14df24bf7"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ac3679e1fff2d21c2034c7ce14df24bf7">llvm::InnerLoopVectorizer::Builder</a></div><div class="ttdeci">IRBuilder Builder</div><div class="ttdoc">The builder that we use.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00686">LoopVectorize.cpp:686</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64a6864311f985d160ad4bd46a9fbe4a4d4"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6864311f985d160ad4bd46a9fbe4a4d4">llvm::TargetTransformInfo::CastContextHint::Masked</a></div><div class="ttdeci">@ Masked</div><div class="ttdoc">The cast is used with a masked load/store.</div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_a9a315d042512705500b545a6c6acb2bd"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a></div><div class="ttdeci">We currently generate a but we really shouldn eax ecx xorl edx divl ecx eax divl ecx movl eax ret A similar code sequence works for division We currently compile i32 v2 eax eax jo LBB1_2 atomic and others It is also currently not done for read modify write instructions It is also current not done if the OF or CF flags are needed The shift operators have the complication that when the shift count is EFLAGS is not set</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01277">README.txt:1277</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpander_html_a64ee7daceb7bcfa5f42af2835c914ad2"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#a64ee7daceb7bcfa5f42af2835c914ad2">llvm::SCEVExpander::getSE</a></div><div class="ttdeci">ScalarEvolution * getSE()</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00195">ScalarEvolutionExpander.h:195</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a296acd14b143ce1e1b0db86f4c221662"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a296acd14b143ce1e1b0db86f4c221662">llvm::TargetTransformInfo::getOperandsScalarizationOverhead</a></div><div class="ttdeci">InstructionCost getOperandsScalarizationOverhead(ArrayRef&lt; const Value * &gt; Args, ArrayRef&lt; Type * &gt; Tys, TTI::TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the overhead of scalarizing an instructions unique non-constant operands.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00530">TargetTransformInfo.cpp:530</a></div></div>
<div class="ttc" id="aclassllvm_1_1OuterAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1OuterAnalysisManagerProxy.html">llvm::OuterAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;inner&quot; IR unit that provides access to an analysis manager over a &quot;outer&quot; IR uni...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l01056">PassManager.h:1056</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_adcfda908b42e8dbe6a1cf8c940cb75e6"><div class="ttname"><a href="classllvm_1_1VPlan.html#adcfda908b42e8dbe6a1cf8c940cb75e6">llvm::VPlan::getActiveLaneMaskPhi</a></div><div class="ttdeci">VPActiveLaneMaskPHIRecipe * getActiveLaneMaskPhi()</div><div class="ttdoc">Find and return the VPActiveLaneMaskPHIRecipe from the header - there be only one at most.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00602">VPlan.cpp:602</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a426976cfd81411f49f7e5fe77ee4e3a4"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a426976cfd81411f49f7e5fe77ee4e3a4">llvm::ScalarEvolution::getTruncateOrNoop</a></div><div class="ttdeci">const SCEV * getTruncateOrNoop(const SCEV *V, Type *Ty)</div><div class="ttdoc">Return a SCEV corresponding to a conversion of the input value to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04753">ScalarEvolution.cpp:4753</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ab4a3f06ac8f2aff57b864c2d8ace97d8"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ab4a3f06ac8f2aff57b864c2d8ace97d8">llvm::LoopVectorizationCostModel::collectUniformsAndScalars</a></div><div class="ttdeci">void collectUniformsAndScalars(ElementCount VF)</div><div class="ttdoc">Collect Uniform and Scalar values for the given VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01430">LoopVectorize.cpp:1430</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a6ee1d1e7a13072ef579558d64b208d3c"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">llvm::IRBuilderBase::getInt32Ty</a></div><div class="ttdeci">IntegerType * getInt32Ty()</div><div class="ttdoc">Fetch the type representing a 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00512">IRBuilder.h:512</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ac8778dcbd35e8ae5902050117feb57a0"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac8778dcbd35e8ae5902050117feb57a0">llvm::IRBuilderBase::restoreIP</a></div><div class="ttdeci">void restoreIP(InsertPoint IP)</div><div class="ttdoc">Sets the current insert point to a previously-saved location.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00275">IRBuilder.h:275</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a31acd7d747f3379a06c123665c2bdb2f"><div class="ttname"><a href="LoopVectorize_8cpp.html#a31acd7d747f3379a06c123665c2bdb2f">emitInvalidCostRemarks</a></div><div class="ttdeci">static void emitInvalidCostRemarks(SmallVector&lt; InstructionVFPair &gt; InvalidCosts, OptimizationRemarkEmitter *ORE, Loop *TheLoop)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05366">LoopVectorize.cpp:5366</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkMissed_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkMissed.html">llvm::OptimizationRemarkMissed</a></div><div class="ttdoc">Diagnostic information for missed-optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00734">DiagnosticInfo.h:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">llvm::TargetTransformInfo::TargetCostKind</a></div><div class="ttdeci">TargetCostKind</div><div class="ttdoc">The kind of cost model.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00241">TargetTransformInfo.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a7d1a18dc150da601587ccc716e0e4b41"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7d1a18dc150da601587ccc716e0e4b41">llvm::IRBuilderBase::CreateStore</a></div><div class="ttdeci">StoreInst * CreateStore(Value *Val, Value *Ptr, bool isVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01718">IRBuilder.h:1718</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a991f269cde2e7fbcb254ef371efc8d1a"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a991f269cde2e7fbcb254ef371efc8d1a">llvm::ElementCount::isScalar</a></div><div class="ttdeci">constexpr bool isScalar() const</div><div class="ttdoc">Exactly one element.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00302">TypeSize.h:302</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4ab56724794d299f76a8fada309a727"><div class="ttname"><a href="namespacellvm.html#ab4ab56724794d299f76a8fada309a727">llvm::getRuntimeVFAsFloat</a></div><div class="ttdeci">static Value * getRuntimeVFAsFloat(IRBuilderBase &amp;B, Type *FTy, ElementCount VF)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00989">LoopVectorize.cpp:989</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a837e9f272fd070a5f8fc79c07a951106"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">llvm::GetElementPtrInst::setIsInBounds</a></div><div class="ttdeci">void setIsInBounds(bool b=true)</div><div class="ttdoc">Set or clear the inbounds flag on this GEP instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01938">Instructions.cpp:1938</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a6cb6a58fb0ded82b4c7755fc4c27c86d"><div class="ttname"><a href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">llvm::Loop::isLoopInvariant</a></div><div class="ttdeci">bool isLoopInvariant(const Value *V) const</div><div class="ttdoc">Return true if the specified value is loop invariant.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00060">LoopInfo.cpp:60</a></div></div>
<div class="ttc" id="anamespacellvm_html_ada31142763d41520644d228c139a4bdda6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm.html#ada31142763d41520644d228c139a4bdda6adf97f83acf6453d4a6a4b1070f3754">llvm::TailFoldingStyle::None</a></div><div class="ttdeci">@ None</div><div class="ttdoc">Don't use tail folding.</div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolutionAnalysis_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolutionAnalysis.html">llvm::ScalarEvolutionAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the ScalarEvolution for a function.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02219">ScalarEvolution.h:2219</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_af49cf566ea4419d8bb29960c6ad1c8e2"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#af49cf566ea4419d8bb29960c6ad1c8e2">llvm::LoopVectorizationLegality::getReductionVars</a></div><div class="ttdeci">const ReductionList &amp; getReductionVars() const</div><div class="ttdoc">Returns the reduction variables found in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00288">LoopVectorizationLegality.h:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ad8b1b881fbc9264bdb8c54d6f354dafa"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ad8b1b881fbc9264bdb8c54d6f354dafa">llvm::InnerLoopVectorizer::fixFixedOrderRecurrence</a></div><div class="ttdeci">void fixFixedOrderRecurrence(VPFirstOrderRecurrencePHIRecipe *PhiR, VPTransformState &amp;State)</div><div class="ttdoc">Create the exit value of first order recurrences in the middle block and update their users.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03780">LoopVectorize.cpp:3780</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerMainLoop_html"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerMainLoop.html">llvm::EpilogueVectorizerMainLoop</a></div><div class="ttdoc">A specialized derived class of inner loop vectorizer that performs vectorization of main loops in the...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00837">LoopVectorize.cpp:837</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a7d4ba65978a0ecb42764cb2b25edc071"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a7d4ba65978a0ecb42764cb2b25edc071">llvm::InnerLoopVectorizer::LI</a></div><div class="ttdeci">LoopInfo * LI</div><div class="ttdoc">Loop Info.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00658">LoopVectorize.cpp:658</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessLegacyAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAccessLegacyAnalysis.html">llvm::LoopAccessLegacyAnalysis</a></div><div class="ttdoc">This analysis provides dependence information for the memory accesses of a loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00797">LoopAccessAnalysis.h:797</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a38e6f65b6ccbdebbf2c7a8b078936115"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a38e6f65b6ccbdebbf2c7a8b078936115">llvm::InnerLoopVectorizer::LoopMiddleBlock</a></div><div class="ttdeci">BasicBlock * LoopMiddleBlock</div><div class="ttdoc">Middle Block between the vector and the scalar.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00697">LoopVectorize.cpp:697</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ac864682b9dcdc0ce83df845bf6cfb2e8"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ac864682b9dcdc0ce83df845bf6cfb2e8">llvm::LoopVectorizationCostModel::isScalarWithPredication</a></div><div class="ttdeci">bool isScalarWithPredication(Instruction *I, ElementCount VF) const</div><div class="ttdoc">Returns true if I is an instruction which requires predication and for which our chosen predication s...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04410">LoopVectorize.cpp:4410</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00180">IRBuilder.h:180</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a1fb374eb65dcf7cd3d1671efb2616f76"><div class="ttname"><a href="classllvm_1_1CallBase.html#a1fb374eb65dcf7cd3d1671efb2616f76">llvm::CallBase::isNoBuiltin</a></div><div class="ttdeci">bool isNoBuiltin() const</div><div class="ttdoc">Return true if the call should not be treated as a call to a builtin.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01858">InstrTypes.h:1858</a></div></div>
<div class="ttc" id="aLoopSimplify_8h_html"><div class="ttname"><a href="LoopSimplify_8h.html">LoopSimplify.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1ReductionFlags_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1ReductionFlags.html">llvm::TargetTransformInfo::ReductionFlags</a></div><div class="ttdoc">Flags describing the kind of vector reduction.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l01481">TargetTransformInfo.h:1481</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdeci">@ Def</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a657e5d1f0907b46daf10219e2b9b5ae5"><div class="ttname"><a href="classllvm_1_1Instruction.html#a657e5d1f0907b46daf10219e2b9b5ae5">llvm::Instruction::replaceSuccessorWith</a></div><div class="ttdeci">void replaceSuccessorWith(BasicBlock *OldBB, BasicBlock *NewBB)</div><div class="ttdoc">Replace specified successor OldBB to point at the provided block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00859">Instruction.cpp:859</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBase_html_aed192af325b471afff047cf0f320f1ad"><div class="ttname"><a href="classllvm_1_1VPRecipeBase.html#aed192af325b471afff047cf0f320f1ad">llvm::VPRecipeBase::getUnderlyingInstr</a></div><div class="ttdeci">Instruction * getUnderlyingInstr()</div><div class="ttdoc">Returns the underlying instruction, if the recipe is a VPValue or nullptr otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00721">VPlan.h:721</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanVerifier_html_a2f9cb7e3f52d06a978b9a77fed34cb34"><div class="ttname"><a href="structllvm_1_1VPlanVerifier.html#a2f9cb7e3f52d06a978b9a77fed34cb34">llvm::VPlanVerifier::verifyPlanIsValid</a></div><div class="ttdeci">static bool verifyPlanIsValid(const VPlan &amp;Plan)</div><div class="ttdoc">Verify invariants for general VPlans.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanVerifier_8cpp_source.html#l00233">VPlanVerifier.cpp:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_afd50c2de451ac9fc0865dc747dd2d485"><div class="ttname"><a href="classllvm_1_1LoopBase.html#afd50c2de451ac9fc0865dc747dd2d485">llvm::LoopBase::getUniqueExitBlock</a></div><div class="ttdeci">BlockT * getUniqueExitBlock() const</div><div class="ttdoc">If getUniqueExitBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00158">LoopInfoImpl.h:158</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a4fa1898352e5014c447a589398c94595"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a4fa1898352e5014c447a589398c94595">llvm::LoopVectorizePass::printPipeline</a></div><div class="ttdeci">void printPipeline(raw_ostream &amp;OS, function_ref&lt; StringRef(StringRef)&gt; MapClassName2PassName)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l10647">LoopVectorize.cpp:10647</a></div></div>
<div class="ttc" id="astructllvm_1_1FixedScalableVFPair_html"><div class="ttname"><a href="structllvm_1_1FixedScalableVFPair.html">llvm::FixedScalableVFPair</a></div><div class="ttdoc">A class that represents two vectorization factors (initialized with 0 by default).</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00225">LoopVectorizationPlanner.h:225</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac77dbedcfd916a5c9b58e753b2678a98"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">llvm::TargetTransformInfo::getInstructionCost</a></div><div class="ttdeci">InstructionCost getInstructionCost(const User *U, ArrayRef&lt; const Value * &gt; Operands, TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the cost of a given IR user when lowered.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00230">TargetTransformInfo.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPCanonicalIVPHIRecipe_html"><div class="ttname"><a href="classllvm_1_1VPCanonicalIVPHIRecipe.html">llvm::VPCanonicalIVPHIRecipe</a></div><div class="ttdoc">Canonical scalar induction phi of the vector loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01764">VPlan.h:1764</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_aa9d35bb02e49c20fcafc8d179559da10"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#aa9d35bb02e49c20fcafc8d179559da10">llvm::LoopVectorizationLegality::getNumLoads</a></div><div class="ttdeci">unsigned getNumLoads() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00383">LoopVectorizationLegality.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a1bddc4949ab247dd1474f79b9bc6e34e"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a1bddc4949ab247dd1474f79b9bc6e34e">llvm::ElementCount::getScalable</a></div><div class="ttdeci">static constexpr ElementCount getScalable(ScalarTy MinVal)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00294">TypeSize.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a854358d393ec8943df9757b4e5e6c388"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a854358d393ec8943df9757b4e5e6c388">llvm::EpilogueLoopVectorizationInfo::MainLoopIterationCountCheck</a></div><div class="ttdeci">BasicBlock * MainLoopIterationCountCheck</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00776">LoopVectorize.cpp:776</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7dc3069afa2ce5ea62ac2eb183e51c00"><div class="ttname"><a href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none_of</a></div><div class="ttdeci">bool none_of(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::none_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01749">STLExtras.h:1749</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a4b7320d132cc4de25e10a3a040930dcf"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a4b7320d132cc4de25e10a3a040930dcf">llvm::VPTransformState::CFG</a></div><div class="ttdeci">struct llvm::VPTransformState::CFGState CFG</div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBase_html_aac9dfb61b37082dca00de284bb3309e8"><div class="ttname"><a href="classllvm_1_1VPRecipeBase.html#aac9dfb61b37082dca00de284bb3309e8">llvm::VPRecipeBase::eraseFromParent</a></div><div class="ttdeci">iplist&lt; VPRecipeBase &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanRecipes_8cpp_source.html#l00187">VPlanRecipes.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a933eb87303a6ce51c8894e431fbc389b"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a933eb87303a6ce51c8894e431fbc389b">llvm::ScalarEvolution::getNoopOrZeroExtend</a></div><div class="ttdeci">const SCEV * getNoopOrZeroExtend(const SCEV *V, Type *Ty)</div><div class="ttdoc">Return a SCEV corresponding to a conversion of the input value to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04717">ScalarEvolution.cpp:4717</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPLane_html_af6be7b0459911799a13a8174138c7020"><div class="ttname"><a href="classllvm_1_1VPLane.html#af6be7b0459911799a13a8174138c7020">llvm::VPLane::getFirstLane</a></div><div class="ttdeci">static VPLane getFirstLane()</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00137">VPlan.h:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aa49ebc2d87162ef011b1648bca33bbeb"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aa49ebc2d87162ef011b1648bca33bbeb">llvm::IRBuilderBase::CreateAlignedStore</a></div><div class="ttdeci">StoreInst * CreateAlignedStore(Value *Val, Value *Ptr, MaybeAlign Align, bool isVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01741">IRBuilder.h:1741</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredicatedScalarEvolution_html_a12a8ac8838fb851a2de5dc5275307bb6"><div class="ttname"><a href="classllvm_1_1PredicatedScalarEvolution.html#a12a8ac8838fb851a2de5dc5275307bb6">llvm::PredicatedScalarEvolution::getPredicate</a></div><div class="ttdeci">const SCEVPredicate &amp; getPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l14758">ScalarEvolution.cpp:14758</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a363c5daacce6cd5f935f14f969871cdd"><div class="ttname"><a href="LoopVectorize_8cpp.html#a363c5daacce6cd5f935f14f969871cdd">PrintVPlansInDotFormat</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintVPlansInDotFormat(&quot;vplan-print-in-dot-format&quot;, cl::Hidden, cl::desc(&quot;Use dot format instead of plain text when dumping VPlans&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a111d43f8be3b83c9087b11878f581c09"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a111d43f8be3b83c9087b11878f581c09">llvm::InnerLoopVectorizer::getBroadcastInstrs</a></div><div class="ttdeci">virtual Value * getBroadcastInstrs(Value *V)</div><div class="ttdoc">Create a broadcast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02296">LoopVectorize.cpp:2296</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfoManager_html"><div class="ttname"><a href="classllvm_1_1LoopAccessInfoManager.html">llvm::LoopAccessInfoManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00769">LoopAccessAnalysis.h:769</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aadb00ad909c8ae2cf77f5fdf0422eda6"><div class="ttname"><a href="LoopVectorize_8cpp.html#aadb00ad909c8ae2cf77f5fdf0422eda6">ForceTargetMaxVectorInterleaveFactor</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ForceTargetMaxVectorInterleaveFactor(&quot;force-target-max-vector-interleave&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;A flag that overrides the target's max interleave factor for &quot; &quot;vectorized loops.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_af494038e310bd942f44e66bee50ce632"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#af494038e310bd942f44e66bee50ce632">llvm::LoopVectorizePass::ORE</a></div><div class="ttdeci">OptimizationRemarkEmitter * ORE</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00182">LoopVectorize.h:182</a></div></div>
<div class="ttc" id="anamespacellvm_html_a016a85f7487f995fe80141e102a7a5ae"><div class="ttname"><a href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">llvm::ReplaceInstWithInst</a></div><div class="ttdeci">void ReplaceInstWithInst(BasicBlock *BB, BasicBlock::iterator &amp;BI, Instruction *I)</div><div class="ttdoc">Replace the instruction specified by BI with the instruction specified by I.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00576">BasicBlockUtils.cpp:576</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_aa6ae6629458ff4ccac821618d1677af4"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#aa6ae6629458ff4ccac821618d1677af4">llvm::DominatorTreeBase::eraseNode</a></div><div class="ttdeci">void eraseNode(NodeT *BB)</div><div class="ttdoc">eraseNode - Removes a node from the dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00686">GenericDomTree.h:686</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_aa793083a95c48c23abfa352d4335685a"><div class="ttname"><a href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a></div><div class="ttdeci">Vector Rotate Left Mask Mask Insert</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00112">README_P9.txt:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a9c44a42299ed9e7e97200271b00e0c7a"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a9c44a42299ed9e7e97200271b00e0c7a">llvm::LoopVectorizationCostModel::setWideningDecision</a></div><div class="ttdeci">void setWideningDecision(const InterleaveGroup&lt; Instruction &gt; *Grp, ElementCount VF, InstWidening W, InstructionCost Cost)</div><div class="ttdoc">Save vectorization decision W and Cost taken by the cost model for interleaving group Grp and vector ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01354">LoopVectorize.cpp:1354</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a0b931781aa589c6ebe64a76c1447e5b2"><div class="ttname"><a href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">llvm::User::operands</a></div><div class="ttdeci">op_range operands()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00242">User.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_aa8a293d9d0bf609e45f591ce4bd55bb3"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#aa8a293d9d0bf609e45f591ce4bd55bb3">llvm::VPTransformState::Builder</a></div><div class="ttdeci">IRBuilderBase &amp; Builder</div><div class="ttdoc">Hold a reference to the IRBuilder used to generate output IR code.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00360">VPlan.h:360</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a4db4058a9fd1bcf40c14d688961ed289"><div class="ttname"><a href="LoopVectorize_8cpp.html#a4db4058a9fd1bcf40c14d688961ed289">addUsersInExitBlock</a></div><div class="ttdeci">static void addUsersInExitBlock(VPBasicBlock *HeaderVPBB, VPBasicBlock *MiddleVPBB, Loop *OrigLoop, VPlan &amp;Plan)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08848">LoopVectorize.cpp:8848</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a2ae68d987ea959c535f5c99a39c61417"><div class="ttname"><a href="classllvm_1_1VPlan.html#a2ae68d987ea959c535f5c99a39c61417">llvm::VPlan::getOrAddVPValue</a></div><div class="ttdeci">VPValue * getOrAddVPValue(Value *V, bool OverrideAllowed=false)</div><div class="ttdoc">Gets the VPValue or adds a new one (if none exists yet) for V.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02322">VPlan.h:2322</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aScalarEvolutionExpander_8h_html"><div class="ttname"><a href="ScalarEvolutionExpander_8h.html">ScalarEvolutionExpander.h</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_a9209b9930d4d7750a6b8b38b3b4ddd6a"><div class="ttname"><a href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">ceil</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g ceil</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a97503ae3ef00c5f1eaffa5bbeb0a4357"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a97503ae3ef00c5f1eaffa5bbeb0a4357">llvm::TargetTransformInfo::getRegisterClassName</a></div><div class="ttdeci">const char * getRegisterClassName(unsigned ClassID) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00653">TargetTransformInfo.cpp:653</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae9880a8edd20b3b9b1527ecd5a03ac8c"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae9880a8edd20b3b9b1527ecd5a03ac8c">llvm::InnerLoopVectorizer::RTChecks</a></div><div class="ttdeci">GeneratedRTChecks &amp; RTChecks</div><div class="ttdoc">Structure to hold information about generated runtime checks, responsible for cleaning the checks,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00741">LoopVectorize.cpp:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html"><div class="ttname"><a href="classllvm_1_1ElementCount.html">llvm::ElementCount</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00279">TypeSize.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkAnalysisAliasing_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkAnalysisAliasing.html">llvm::OptimizationRemarkAnalysisAliasing</a></div><div class="ttdoc">Diagnostic information for optimization analysis remarks related to pointer aliasing.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00895">DiagnosticInfo.h:895</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a58fd764accfd06df487cc6ec43d4f5fc"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a58fd764accfd06df487cc6ec43d4f5fc">llvm::LoopVectorizationCostModel::DB</a></div><div class="ttdeci">DemandedBits * DB</div><div class="ttdoc">Demanded bits analysis.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01859">LoopVectorize.cpp:1859</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdeci">@ Prefix</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00159">CommandLine.h:159</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a6bb7bf8c85135f7a1ff129776219989ea858ba4765e53c712ef672a9570474b1d"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a6bb7bf8c85135f7a1ff129776219989ea858ba4765e53c712ef672a9570474b1d">llvm::pdb::PDB_DataKind::Member</a></div><div class="ttdeci">@ Member</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_afa38851d75434d1476444ac93f94cb4ca7aa61d9e9d33bdf28478754c69c59640"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#afa38851d75434d1476444ac93f94cb4ca7aa61d9e9d33bdf28478754c69c59640">llvm::TargetTransformInfo::OK_UniformValue</a></div><div class="ttdeci">@ OK_UniformValue</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00932">TargetTransformInfo.h:932</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a12d2850f420726c4acb262b626e95b7d"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a12d2850f420726c4acb262b626e95b7d">llvm::LoopVectorizationCostModel::collectInLoopReductions</a></div><div class="ttdeci">void collectInLoopReductions()</div><div class="ttdoc">Split reductions into those that happen in the loop, and those that happen outside.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07444">LoopVectorize.cpp:7444</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af89277d8bd76d6348291e29b6076796a"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af89277d8bd76d6348291e29b6076796a">llvm::TargetTransformInfo::getCmpSelInstrCost</a></div><div class="ttdeci">InstructionCost getCmpSelInstrCost(unsigned Opcode, Type *ValTy, Type *CondTy, CmpInst::Predicate VecPred, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00897">TargetTransformInfo.cpp:897</a></div></div>
<div class="ttc" id="astructllvm_1_1PassInfoMixin_html"><div class="ttname"><a href="structllvm_1_1PassInfoMixin.html">llvm::PassInfoMixin&lt; LoopVectorizePass &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a11c66d01880f53332fc7ad53f565b039"><div class="ttname"><a href="namespacellvm.html#a11c66d01880f53332fc7ad53f565b039">llvm::getVectorIntrinsicIDForCall</a></div><div class="ttdeci">Intrinsic::ID getVectorIntrinsicIDForCall(const CallInst *CI, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Returns intrinsic ID for call.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00135">VectorUtils.cpp:135</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad4f572b4f4bf6aa2dbf10a0bd160280d"><div class="ttname"><a href="namespacellvm.html#ad4f572b4f4bf6aa2dbf10a0bd160280d">llvm::addDiffRuntimeChecks</a></div><div class="ttdeci">Value * addDiffRuntimeChecks(Instruction *Loc, ArrayRef&lt; PointerDiffInfo &gt; Checks, SCEVExpander &amp;Expander, function_ref&lt; Value *(IRBuilderBase &amp;, unsigned)&gt; GetVF, unsigned IC)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01668">LoopUtils.cpp:1668</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a436530ecee5235bf4c602c61b846d613"><div class="ttname"><a href="LoopVectorize_8cpp.html#a436530ecee5235bf4c602c61b846d613">ForceTargetInstructionCost</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ForceTargetInstructionCost(&quot;force-target-instruction-cost&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;A flag that overrides the target's expected cost for &quot; &quot;an instruction to a single constant value. Mostly &quot; &quot;useful for getting consistent testing.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html">llvm::VPBasicBlock</a></div><div class="ttdoc">VPBasicBlock serves as the leaf of the Hierarchical Control-Flow Graph.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01945">VPlan.h:1945</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a5d6b8f1a562e7d26404946de46d3045b"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a5d6b8f1a562e7d26404946de46d3045b">llvm::LoopVectorizationLegality::isFixedOrderRecurrence</a></div><div class="ttdeci">bool isFixedOrderRecurrence(const PHINode *Phi) const</div><div class="ttdoc">Returns True if Phi is a fixed-order recurrence in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01100">LoopVectorizationLegality.cpp:1100</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a78472ee88ead39b42e99ce633c22428d"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a78472ee88ead39b42e99ce633c22428d">llvm::InnerLoopVectorizer::truncateToMinimalBitwidths</a></div><div class="ttdeci">void truncateToMinimalBitwidths(VPTransformState &amp;State)</div><div class="ttdoc">Shrinks vector element sizes to the smallest bitwidth they can be legally represented as.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03560">LoopVectorize.cpp:3560</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="astructllvm_1_1FixedScalableVFPair_html_aa2acd0d0943f4e488516ad21848f9be3"><div class="ttname"><a href="structllvm_1_1FixedScalableVFPair.html#aa2acd0d0943f4e488516ad21848f9be3">llvm::FixedScalableVFPair::getNone</a></div><div class="ttdeci">static FixedScalableVFPair getNone()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00242">LoopVectorizationPlanner.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0b2ca98dc28c61793ff5c90d23e5f14e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, 4, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00197">DenseMap.h:197</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aad2cabd453be4d9c91e47d9ee61a578e"><div class="ttname"><a href="LoopVectorize_8cpp.html#aad2cabd453be4d9c91e47d9ee61a578e">LoopVectorizeWithBlockFrequency</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; LoopVectorizeWithBlockFrequency(&quot;loop-vectorize-with-block-frequency&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable the use of the block frequency analysis to access PGO &quot; &quot;heuristics minimizing code growth in cold regions and being more &quot; &quot;aggressive in hot regions.&quot;))</div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a208c011242ca3423a05a6db01b29910c"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a208c011242ca3423a05a6db01b29910c">llvm::InnerLoopVectorizer::createBitOrPointerCast</a></div><div class="ttdeci">Value * createBitOrPointerCast(Value *V, VectorType *DstVTy, const DataLayout &amp;DL)</div><div class="ttdoc">Returns a bitcasted value to the requested vector type.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02949">LoopVectorize.cpp:2949</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef"><div class="ttname"><a href="namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef">llvm::cl::BOU_FALSE</a></div><div class="ttdeci">@ BOU_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00629">CommandLine.h:629</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenPHIRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenPHIRecipe.html">llvm::VPWidenPHIRecipe</a></div><div class="ttdoc">A recipe for handling header phis that are widened in the vector loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01215">VPlan.h:1215</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_ae21d46756cd1643894e85c5f78182cb0"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#ae21d46756cd1643894e85c5f78182cb0">llvm::LoopVectorizationLegality::getLAI</a></div><div class="ttdeci">const LoopAccessInfo * getLAI() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00362">LoopVectorizationLegality.h:362</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aVPlanHCFGBuilder_8h_html"><div class="ttname"><a href="VPlanHCFGBuilder_8h.html">VPlanHCFGBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a2d30dd50c6b2d64ca3bc2826ca229fdb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">llvm::TargetTransformInfo::getRegisterBitWidth</a></div><div class="ttdeci">TypeSize getRegisterBitWidth(RegisterKind K) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00657">TargetTransformInfo.cpp:657</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a69d0103b83202f0339cfb6b018b3c78a"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a69d0103b83202f0339cfb6b018b3c78a">llvm::IRBuilderBase::CreateVectorReverse</a></div><div class="ttdeci">Value * CreateVectorReverse(Value *V, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Return a vector value that contains the vector V reversed.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l01205">IRBuilder.cpp:1205</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_aaca9dd97d4c523d8c65274654abe4eb9"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#aaca9dd97d4c523d8c65274654abe4eb9">llvm::VPlanTransforms::removeDeadRecipes</a></div><div class="ttdeci">static void removeDeadRecipes(VPlan &amp;Plan)</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00409">VPlanTransforms.cpp:409</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaf345c258e6fd97a551e4d5b41607e32"><div class="ttname"><a href="namespacellvm.html#aaf345c258e6fd97a551e4d5b41607e32">llvm::setProfileInfoAfterUnrolling</a></div><div class="ttdeci">void setProfileInfoAfterUnrolling(Loop *OrigLoop, Loop *UnrolledLoop, Loop *RemainderLoop, uint64_t UF)</div><div class="ttdoc">Set weights for UnrolledLoop and RemainderLoop based on weights for OrigLoop and the following distri...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01471">LoopUtils.cpp:1471</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPHeaderPHIRecipe_html"><div class="ttname"><a href="classllvm_1_1VPHeaderPHIRecipe.html">llvm::VPHeaderPHIRecipe</a></div><div class="ttdoc">A pure virtual base class for all recipes modeling header phis, including phis for first order recurr...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01119">VPlan.h:1119</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a9188f84e1dd67530330dcab9cae787d7"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">llvm::details::FixedOrScalableQuantity::isScalable</a></div><div class="ttdeci">constexpr bool isScalable() const</div><div class="ttdoc">Returns whether the quantity is scaled by a runtime quantity (vscale).</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00166">TypeSize.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a59a6dd7531c8683174f886ff7698cc63"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a59a6dd7531c8683174f886ff7698cc63">llvm::LoopVectorizationCostModel::memoryInstructionCanBeWidened</a></div><div class="ttdeci">bool memoryInstructionCanBeWidened(Instruction *I, ElementCount VF)</div><div class="ttdoc">Returns true if I is a memory instruction with consecutive memory access that can be widened.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04620">LoopVectorize.cpp:4620</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfoWrapperPass.html">llvm::BlockFrequencyInfoWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00138">BlockFrequencyInfo.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpander_html"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html">llvm::SCEVExpander</a></div><div class="ttdoc">This class uses information about analyze scalars to rewrite expressions in canonical form.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00050">ScalarEvolutionExpander.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerMainLoop_html_ab976353361314366d6ba4fa1127884fe"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerMainLoop.html#ab976353361314366d6ba4fa1127884fe">llvm::EpilogueVectorizerMainLoop::createEpilogueVectorizedLoopSkeleton</a></div><div class="ttdeci">std::pair&lt; BasicBlock *, Value * &gt; createEpilogueVectorizedLoopSkeleton() final</div><div class="ttdoc">Implements the interface for creating a vectorized skeleton using the main loop strategy (ie the firs...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07778">LoopVectorize.cpp:7778</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae4d1c664dbe29b322f71cf32c641bc0c"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae4d1c664dbe29b322f71cf32c641bc0c">llvm::InnerLoopVectorizer::LoopExitBlock</a></div><div class="ttdeci">BasicBlock * LoopExitBlock</div><div class="ttdoc">The unique ExitBlock of the scalar loop if one exists.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00701">LoopVectorize.cpp:701</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a7592f6d851162d7f66f26408f40e9388"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a7592f6d851162d7f66f26408f40e9388">llvm::LoopVectorizeHints::getPredicate</a></div><div class="ttdeci">unsigned getPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00153">LoopVectorizationLegality.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00642">raw_ostream.h:642</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a73e5045d156b614bdd5e04f33b4eb9df"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a73e5045d156b614bdd5e04f33b4eb9df">llvm::VPlanTransforms::adjustFixedOrderRecurrences</a></div><div class="ttdeci">static void adjustFixedOrderRecurrences(VPlan &amp;Plan, VPBuilder &amp;Builder)</div><div class="ttdoc">Sink users of fixed-order recurrences after the recipe defining their previous value.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00675">VPlanTransforms.cpp:675</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPValue_html_a4b54e2a998e2d123bad3a7e41f071a64"><div class="ttname"><a href="classllvm_1_1VPValue.html#a4b54e2a998e2d123bad3a7e41f071a64">llvm::VPValue::getLiveInIRValue</a></div><div class="ttdeci">Value * getLiveInIRValue()</div><div class="ttdoc">Returns the underlying IR value, if this VPValue is defined outside the scope of VPlan.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00177">VPlanValue.h:177</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a698e4bd87a8adc0c042ae6b6e10ee6e1"><div class="ttname"><a href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in and only one load from a constant double</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00085">README-SSE.txt:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a338ba7ca7a526243ab1853d07d90fe38"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a338ba7ca7a526243ab1853d07d90fe38">llvm::details::FixedOrScalableQuantity&lt; ElementCount, unsigned &gt;::isKnownLE</a></div><div class="ttdeci">static constexpr bool isKnownLE(const FixedOrScalableQuantity &amp;LHS, const FixedOrScalableQuantity &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00212">TypeSize.h:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a9e275f16680d4f09dbcc0dd7d323a075"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a9e275f16680d4f09dbcc0dd7d323a075">llvm::InnerLoopVectorizer::printDebugTracesAtEnd</a></div><div class="ttdeci">virtual void printDebugTracesAtEnd()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00647">LoopVectorize.cpp:647</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredicatedScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1PredicatedScalarEvolution.html">llvm::PredicatedScalarEvolution</a></div><div class="ttdoc">An interface layer with SCEV used to manage how we see SCEV expressions for values in the context of ...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02280">ScalarEvolution.h:2280</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_af86aec7d66264b623dd7efde226749b9"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#af86aec7d66264b623dd7efde226749b9">llvm::LoopVectorizationCostModel::getTailFoldingStyle</a></div><div class="ttdeci">TailFoldingStyle getTailFoldingStyle() const</div><div class="ttdoc">Returns the TailFoldingStyle that is best for the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01552">LoopVectorize.cpp:1552</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a246f298958a4a730bf7d3a64440dd47b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a246f298958a4a730bf7d3a64440dd47b">llvm::TargetTransformInfo::getAddressComputationCost</a></div><div class="ttdeci">InstructionCost getAddressComputationCost(Type *Ty, ScalarEvolution *SE=nullptr, const SCEV *Ptr=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01004">TargetTransformInfo.cpp:1004</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; Value *, 2 &gt;</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInterleaveRecipe_html_a942db1b770fa4cb70c66a2546d88cfb0"><div class="ttname"><a href="classllvm_1_1VPInterleaveRecipe.html#a942db1b770fa4cb70c66a2546d88cfb0">llvm::VPInterleaveRecipe::print</a></div><div class="ttdeci">void print(raw_ostream &amp;O, const Twine &amp;Indent, VPSlotTracker &amp;SlotTracker) const override</div><div class="ttdoc">Print the recipe.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09259">LoopVectorize.cpp:9259</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0a9cb3d1b401edba8e81b64f7c83a921d0"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a9cb3d1b401edba8e81b64f7c83a921d0">llvm::VPInstruction::CanonicalIVIncrement</a></div><div class="ttdeci">@ CanonicalIVIncrement</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00793">VPlan.h:793</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00279">RISCVBaseInfo.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a3586d4f687e1a068f879bf29b046eb3a"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a3586d4f687e1a068f879bf29b046eb3a">llvm::TargetTransformInfo::getMaxVScale</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getMaxVScale() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00666">TargetTransformInfo.cpp:666</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a885ad9ea73b97e3154433e5c37fefa99"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a885ad9ea73b97e3154433e5c37fefa99">llvm::LoopVectorizationCostModel::selectUserVectorizationFactor</a></div><div class="ttdeci">bool selectUserVectorizationFactor(ElementCount UserVF)</div><div class="ttdoc">Setup cost-based decisions for user vectorization factor.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01204">LoopVectorize.cpp:1204</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPDef_html_a3108e9c1f28b99620c1e92228935e5cb"><div class="ttname"><a href="classllvm_1_1VPDef.html#a3108e9c1f28b99620c1e92228935e5cb">llvm::VPDef::getVPSingleValue</a></div><div class="ttdeci">VPValue * getVPSingleValue()</div><div class="ttdoc">Returns the only VPValue defined by the VPDef.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00381">VPlanValue.h:381</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a238436913e2ce2107764a543e60e2e49"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a238436913e2ce2107764a543e60e2e49">llvm::VPTransformState::get</a></div><div class="ttdeci">Value * get(VPValue *Def, unsigned Part)</div><div class="ttdoc">Get the generated Value for a given VPValue and a given Part.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09828">LoopVectorize.cpp:9828</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_af36064f4b316a511f5d1d9058ec76569"><div class="ttname"><a href="classllvm_1_1VPlan.html#af36064f4b316a511f5d1d9058ec76569">llvm::VPlan::getOrAddExternalDef</a></div><div class="ttdeci">VPValue * getOrAddExternalDef(Value *V)</div><div class="ttdoc">Get the existing or add a new external definition for V.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02285">VPlan.h:2285</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02264">STLExtras.h:2264</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a9092d12fba0d0d26f3eedf809d7348fe"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a9092d12fba0d0d26f3eedf809d7348fe">llvm::InnerLoopVectorizer::fixCrossIterationPHIs</a></div><div class="ttdeci">void fixCrossIterationPHIs(VPTransformState &amp;State)</div><div class="ttdoc">Handle all cross-iteration phis in the header.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03763">LoopVectorize.cpp:3763</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">llvm::AMDGPUISD::IF</a></div><div class="ttdeci">@ IF</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00370">AMDGPUISelLowering.h:370</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_aa7526ec0b5613cd07130c3d097799534"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#aa7526ec0b5613cd07130c3d097799534">llvm::InnerLoopVectorizer::AC</a></div><div class="ttdeci">AssumptionCache * AC</div><div class="ttdoc">Assumption Cache.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00670">LoopVectorize.cpp:670</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a089aa34b9791fc488d0cd00f40ddb700"><div class="ttname"><a href="LoopVectorize_8cpp.html#a089aa34b9791fc488d0cd00f40ddb700">EnableCondStoresVectorization</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableCondStoresVectorization(&quot;enable-cond-stores-vec&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable if predication of stores during vectorization.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_acf8c965057e0fe8d1056de211337a7ff"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#acf8c965057e0fe8d1056de211337a7ff">llvm::LoopVectorizationCostModel::selectVectorizationFactor</a></div><div class="ttdeci">VectorizationFactor selectVectorizationFactor(const ElementCountSet &amp;CandidateVFs)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05430">LoopVectorize.cpp:5430</a></div></div>
<div class="ttc" id="aVPRecipeBuilder_8h_html"><div class="ttname"><a href="VPRecipeBuilder_8h.html">VPRecipeBuilder.h</a></div></div>
<div class="ttc" id="aSizeOpts_8h_html"><div class="ttname"><a href="SizeOpts_8h.html">SizeOpts.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredicatedScalarEvolution_html_ada1db826f3d2266fe2c4d06218d8d342"><div class="ttname"><a href="classllvm_1_1PredicatedScalarEvolution.html#ada1db826f3d2266fe2c4d06218d8d342">llvm::PredicatedScalarEvolution::getBackedgeTakenCount</a></div><div class="ttdeci">const SCEV * getBackedgeTakenCount()</div><div class="ttdoc">Get the (predicated) backedge count for the analyzed loop.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l14737">ScalarEvolution.cpp:14737</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aff42e6f62f13907a31326c5b58bc10ec"><div class="ttname"><a href="LoopVectorize_8cpp.html#aff42e6f62f13907a31326c5b58bc10ec">isStrideMul</a></div><div class="ttdeci">static bool isStrideMul(Instruction *I, LoopVectorizationLegality *Legal)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l06406">LoopVectorize.cpp:6406</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a6370e29617c71c8081bbbc68d6058403"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6370e29617c71c8081bbbc68d6058403">llvm::IRBuilderBase::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags NewFMF)</div><div class="ttdoc">Set the fast-math flags to be used with generated fp-math operators.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00297">IRBuilder.h:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a8d204031ffe1bcc568fb040aebe5f278"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a8d204031ffe1bcc568fb040aebe5f278">llvm::InnerLoopVectorizer::fixNonInductionPHIs</a></div><div class="ttdeci">void fixNonInductionPHIs(VPlan &amp;Plan, VPTransformState &amp;State)</div><div class="ttdoc">Fix the non-induction PHIs in Plan.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04198">LoopVectorize.cpp:4198</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aLoopAccessAnalysis_8h_html"><div class="ttname"><a href="LoopAccessAnalysis_8h.html">LoopAccessAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00729">DerivedTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae7cdd6a7370c1f81936d1b17a6f7c701"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae7cdd6a7370c1f81936d1b17a6f7c701">llvm::InnerLoopVectorizer::LoopBypassBlocks</a></div><div class="ttdeci">SmallVector&lt; BasicBlock *, 4 &gt; LoopBypassBlocks</div><div class="ttdoc">A list of all bypass blocks. The first block is the entry of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00707">LoopVectorize.cpp:707</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a61375f5189558cc261186f388d31fe92"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a61375f5189558cc261186f388d31fe92">llvm::LoopVectorizationCostModel::isOptimizableIVTruncate</a></div><div class="ttdeci">bool isOptimizableIVTruncate(Instruction *I, ElementCount VF)</div><div class="ttdoc">Return True if instruction I is an optimizable truncate whose operand is an induction variable.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01400">LoopVectorize.cpp:1400</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a3bf42baf773b375802538951c88d8e12"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a></div><div class="ttdeci">ReachingDefAnalysis InstSet &amp; ToRemove</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00547">ARMLowOverheadLoops.cpp:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0a79a53c84dbac24c496a4c9a6cf70596c"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a79a53c84dbac24c496a4c9a6cf70596c">llvm::VPInstruction::ActiveLaneMask</a></div><div class="ttdeci">@ ActiveLaneMask</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00792">VPlan.h:792</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a615131659002c10601eef598d42d025e"><div class="ttname"><a href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">llvm::Loop::getStartLoc</a></div><div class="ttdeci">DebugLoc getStartLoc() const</div><div class="ttdoc">Return the debug location of the start of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00631">LoopInfo.cpp:631</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a183a358204f179aa874471fa86e06068"><div class="ttname"><a href="LoopVectorize_8cpp.html#a183a358204f179aa874471fa86e06068">NumberOfStoresToPredicate</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; NumberOfStoresToPredicate(&quot;vectorize-num-stores-pred&quot;, cl::init(1), cl::Hidden, cl::desc(&quot;Max number of stores to be predicated behind an if.&quot;))</div><div class="ttdoc">The number of stores in a loop that are allowed to need predication.</div></div>
<div class="ttc" id="aMapVector_8h_html"><div class="ttname"><a href="MapVector_8h.html">MapVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a4218f47749d093473e680ad0199fb239"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a4218f47749d093473e680ad0199fb239">llvm::TargetTransformInfo::getIntrinsicInstrCost</a></div><div class="ttdeci">InstructionCost getIntrinsicInstrCost(const IntrinsicCostAttributes &amp;ICA, TTI::TargetCostKind CostKind) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00983">TargetTransformInfo.cpp:983</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a6f01dbe965b38186b1a78378689d4105"><div class="ttname"><a href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">llvm::PHINode::removeIncomingValue</a></div><div class="ttdeci">Value * removeIncomingValue(unsigned Idx, bool DeletePHIIfEmpty=true)</div><div class="ttdoc">Remove an incoming value.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00124">Instructions.cpp:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_abe4301a1c788a14781614de86da5f057"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#abe4301a1c788a14781614de86da5f057">llvm::VPInstruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMFNew)</div><div class="ttdoc">Set the fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanRecipes_8cpp_source.html#l00441">VPlanRecipes.cpp:441</a></div></div>
<div class="ttc" id="aAArch64ISelLowering_8cpp_html_a62766c75f88612ffa652342472e755f6"><div class="ttname"><a href="AArch64ISelLowering_8cpp.html#a62766c75f88612ffa652342472e755f6">getIntrinsicID</a></div><div class="ttdeci">static unsigned getIntrinsicID(const SDNode *N)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8cpp_source.html#l06202">AArch64ISelLowering.cpp:6202</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ad508b8cfa31c0e7a1ac8f9d733bb8eed"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ad508b8cfa31c0e7a1ac8f9d733bb8eed">llvm::LoopVectorizationCostModel::useOrderedReductions</a></div><div class="ttdeci">bool useOrderedReductions(const RecurrenceDescriptor &amp;RdxDesc) const</div><div class="ttdoc">Returns true if we should use strict in-order reductions for the given RdxDesc.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01260">LoopVectorize.cpp:1260</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html">llvm::LoopVectorizationLegality</a></div><div class="ttdoc">LoopVectorizationLegality checks if it is legal to vectorize a loop, and to what vectorization factor...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00241">LoopVectorizationLegality.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReductionPHIRecipe_html"><div class="ttname"><a href="classllvm_1_1VPReductionPHIRecipe.html">llvm::VPReductionPHIRecipe</a></div><div class="ttdoc">A recipe for handling reduction phis.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01278">VPlan.h:1278</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a29a5bdf367e3f74df9228dfce2c93a6fa492f18b60811bf85ce118c0c6a1a5c4a">llvm::pdb::PDB_BuiltinType::Variant</a></div><div class="ttdeci">@ Variant</div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a625caa931f0d8ef201041febbfe42cca"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a625caa931f0d8ef201041febbfe42cca">llvm::InnerLoopVectorizer::emitMemRuntimeChecks</a></div><div class="ttdeci">BasicBlock * emitMemRuntimeChecks(BasicBlock *Bypass)</div><div class="ttdoc">Emit bypass checks to check any memory assumptions we may have made.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03078">LoopVectorize.cpp:3078</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_aebc6eec1144f1c940a3587d06167d82c"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#aebc6eec1144f1c940a3587d06167d82c">llvm::VPTransformState::set</a></div><div class="ttdeci">void set(VPValue *Def, Value *V, unsigned Part)</div><div class="ttdoc">Set the generated Value for a given VPValue and a given Part.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00265">VPlan.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MachO_html_a11849daa1b55a8c00390b349546112e7a48d53340ae80e1c1862548611e92c864"><div class="ttname"><a href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a48d53340ae80e1c1862548611e92c864">llvm::MachO::Invalid</a></div><div class="ttdeci">@ Invalid</div><div class="ttdoc">Invalid file type.</div><div class="ttdef"><b>Definition:</b> <a href="InterfaceFile_8h_source.html#l00055">InterfaceFile.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPIRV_html_a2337541bc5463462ac9dd28b96875f45"><div class="ttname"><a href="namespacellvm_1_1SPIRV.html#a2337541bc5463462ac9dd28b96875f45">llvm::SPIRV::InstrList</a></div><div class="ttdeci">SmallVector&lt; MachineInstr * &gt; InstrList</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVModuleAnalysis_8h_source.html#l00115">SPIRVModuleAnalysis.h:115</a></div></div>
<div class="ttc" id="aGlobalsModRef_8h_html"><div class="ttname"><a href="GlobalsModRef_8h.html">GlobalsModRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_a74b26949a0dd7a5fab2ba1b0da204e50"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#a74b26949a0dd7a5fab2ba1b0da204e50">llvm::OptimizationRemarkEmitter::allowExtraAnalysis</a></div><div class="ttdeci">bool allowExtraAnalysis(StringRef PassName) const</div><div class="ttdoc">Whether we allow for extra compile-time budget to perform more analysis to produce fewer false positi...</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00098">OptimizationRemarkEmitter.h:98</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage_html"><div class="ttname"><a href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html">llvm::LoopVectorizationCostModel::RegisterUsage</a></div><div class="ttdoc">A struct that represents some properties of the register usage of a loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01232">LoopVectorize.cpp:1232</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ae7fe2d1bb4f708d68fe7a908ba675d1b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ae7fe2d1bb4f708d68fe7a908ba675d1b">llvm::TargetTransformInfo::getScalarizationOverhead</a></div><div class="ttdeci">InstructionCost getScalarizationOverhead(VectorType *Ty, const APInt &amp;DemandedElts, bool Insert, bool Extract, TTI::TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the overhead of scalarizing an instruction.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00523">TargetTransformInfo.cpp:523</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a2c96114e89e8cf2122ebe8bc4d929c7c"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">llvm::ScalarEvolution::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const</div><div class="ttdoc">Return the size in bits of the specified type, for which isSCEVable must return true.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04427">ScalarEvolution.cpp:4427</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26389c546573f058ad8ecbdc5c1933cf"><div class="ttname"><a href="namespacellvm.html#a26389c546573f058ad8ecbdc5c1933cf">llvm::verifyFunction</a></div><div class="ttdeci">bool verifyFunction(const Function &amp;F, raw_ostream *OS=nullptr)</div><div class="ttdoc">Check a function for errors, useful for use when debugging a pass.</div><div class="ttdef"><b>Definition:</b> <a href="Verifier_8cpp_source.html#l06428">Verifier.cpp:6428</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a30ee597b72598bc7939d3a40d2a5ba20"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a30ee597b72598bc7939d3a40d2a5ba20">llvm::RecurrenceDescriptor::getOpcode</a></div><div class="ttdeci">static unsigned getOpcode(RecurKind Kind)</div><div class="ttdoc">Returns the opcode corresponding to the RecurrenceKind.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8cpp_source.html#l01136">IVDescriptors.cpp:1136</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAccessAnalysis.html">llvm::LoopAccessAnalysis</a></div><div class="ttdoc">This analysis provides dependence information for the memory accesses of a loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00829">LoopAccessAnalysis.h:829</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a35e67974daa692cfd961904c151ad33d"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a35e67974daa692cfd961904c151ad33d">llvm::LoopVectorizationCostModel::Hints</a></div><div class="ttdeci">const LoopVectorizeHints * Hints</div><div class="ttdoc">Loop Vectorize Hint.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01870">LoopVectorize.cpp:1870</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_1_1CFGState_html_aabeafaaaee1bdb12f5e2aeac9a1c2c32"><div class="ttname"><a href="structllvm_1_1VPTransformState_1_1CFGState.html#aabeafaaaee1bdb12f5e2aeac9a1c2c32">llvm::VPTransformState::CFGState::getPreheaderBBFor</a></div><div class="ttdeci">BasicBlock * getPreheaderBBFor(VPRecipeBase *R)</div><div class="ttdoc">Returns the BasicBlock* mapped to the pre-header of the loop region containing R.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00235">VPlan.cpp:235</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7b6ae12af3578f7a20ccc11a4458f9f"><div class="ttname"><a href="namespacellvm.html#af7b6ae12af3578f7a20ccc11a4458f9f">llvm::computeMinimumValueSizes</a></div><div class="ttdeci">MapVector&lt; Instruction *, uint64_t &gt; computeMinimumValueSizes(ArrayRef&lt; BasicBlock * &gt; Blocks, DemandedBits &amp;DB, const TargetTransformInfo *TTI=nullptr)</div><div class="ttdoc">Compute a map of integer instructions to their minimum legal type size.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00666">VectorUtils.cpp:666</a></div></div>
<div class="ttc" id="anamespacellvm_html_a48b30f2688526d0f45900a47cd6b6654"><div class="ttname"><a href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">llvm::getLoadStoreType</a></div><div class="ttdeci">Type * getLoadStoreType(Value *I)</div><div class="ttdoc">A helper function that returns the type of a load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05408">Instructions.h:5408</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a50d461a887e200e704e5157d3b21514d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a50d461a887e200e704e5157d3b21514d">llvm::DenseMapBase::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00075">DenseMap.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a06f5d9725a2b1f7b06e8bf51f7d31417"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a06f5d9725a2b1f7b06e8bf51f7d31417">llvm::LoopVectorizationCostModel::collectElementTypesForWidening</a></div><div class="ttdeci">void collectElementTypesForWidening()</div><div class="ttdoc">Collect all element types in the loop for which widening is needed.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05668">LoopVectorize.cpp:5668</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af37b2842424eb63440bdcacca0af9820"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af37b2842424eb63440bdcacca0af9820">llvm::TargetTransformInfo::getVectorInstrCost</a></div><div class="ttdeci">InstructionCost getVectorInstrCost(unsigned Opcode, Type *Val, TTI::TargetCostKind CostKind, unsigned Index=-1, Value *Op0=nullptr, Value *Op1=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00908">TargetTransformInfo.cpp:908</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ae32e9a491e0cd889c6490afa72b62154"><div class="ttname"><a href="LoopVectorize_8cpp.html#ae32e9a491e0cd889c6490afa72b62154">AddRuntimeUnrollDisableMetaData</a></div><div class="ttdeci">static void AddRuntimeUnrollDisableMetaData(Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07624">LoopVectorize.cpp:7624</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_acc13ee8b8985399901ac09b51822e21a"><div class="ttname"><a href="LoopVectorize_8cpp.html#acc13ee8b8985399901ac09b51822e21a">cse</a></div><div class="ttdeci">static void cse(BasicBlock *BB)</div><div class="ttdoc">Perform cse of induction variable instructions.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03433">LoopVectorize.cpp:3433</a></div></div>
<div class="ttc" id="aclassllvm_1_1DemandedBitsAnalysis_html"><div class="ttname"><a href="classllvm_1_1DemandedBitsAnalysis.html">llvm::DemandedBitsAnalysis</a></div><div class="ttdoc">An analysis that produces DemandedBits for a function.</div><div class="ttdef"><b>Definition:</b> <a href="DemandedBits_8h_source.html#l00123">DemandedBits.h:123</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aa74e864ddfcd1582f11672ed11958ad5"><div class="ttname"><a href="LoopVectorize_8cpp.html#aa74e864ddfcd1582f11672ed11958ad5">getDebugLocString</a></div><div class="ttdeci">static std::string getDebugLocString(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01022">LoopVectorize.cpp:1022</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPPredInstPHIRecipe_html"><div class="ttname"><a href="classllvm_1_1VPPredInstPHIRecipe.html">llvm::VPPredInstPHIRecipe</a></div><div class="ttdoc">VPPredInstPHIRecipe is a recipe for generating the phi nodes needed when control converges back from ...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01609">VPlan.h:1609</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a5cafb166cf7c4937f5647a084c4eaee2"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a5cafb166cf7c4937f5647a084c4eaee2">llvm::details::FixedOrScalableQuantity::isNonZero</a></div><div class="ttdeci">constexpr bool isNonZero() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00153">TypeSize.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_ac2d32589e2e153088b8a35db1a9eabccaf0191e822c9708e106d7bb58aa9ec947"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccaf0191e822c9708e106d7bb58aa9ec947">llvm::InductionDescriptor::IK_IntInduction</a></div><div class="ttdeci">@ IK_IntInduction</div><div class="ttdoc">Integer induction variable. Step = C.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00311">IVDescriptors.h:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a52cb018f4f53613b5369ddb5d9873286"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a52cb018f4f53613b5369ddb5d9873286">llvm::LoopInfoBase::removeBlock</a></div><div class="ttdeci">void removeBlock(BlockT *BB)</div><div class="ttdoc">This method completely removes BB from all data structures, including all of the Loop objects it is n...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01057">LoopInfo.h:1057</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a098a514da47d00e1176aa2e16eacfb70"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a098a514da47d00e1176aa2e16eacfb70">llvm::ElementCount::isVector</a></div><div class="ttdeci">constexpr bool isVector() const</div><div class="ttdoc">One or more elements.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00306">TypeSize.h:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a78ecb150e3ccce636f6eaaa4f080ada8"><div class="ttname"><a href="classllvm_1_1VPlan.html#a78ecb150e3ccce636f6eaaa4f080ada8">llvm::VPlan::getCanonicalIV</a></div><div class="ttdeci">VPCanonicalIVPHIRecipe * getCanonicalIV()</div><div class="ttdoc">Returns the canonical induction recipe of the vector loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02367">VPlan.h:2367</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a2e066ef7bc9673cbb2a825189491577d"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a2e066ef7bc9673cbb2a825189491577d">llvm::InnerLoopVectorizer::areSafetyChecksAdded</a></div><div class="ttdeci">bool areSafetyChecksAdded()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00489">LoopVectorize.cpp:489</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a50cae5c2df432357d50f182d310ce7b7"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a50cae5c2df432357d50f182d310ce7b7">llvm::LoopVectorizeHints::getWidth</a></div><div class="ttdeci">ElementCount getWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00138">LoopVectorizationLegality.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a10886c0492c6195902a91bb3ace8ac2e"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a10886c0492c6195902a91bb3ace8ac2e">llvm::IRBuilderBase::CreateShuffleVector</a></div><div class="ttdeci">Value * CreateShuffleVector(Value *V1, Value *V2, Value *Mask, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02375">IRBuilder.h:2375</a></div></div>
<div class="ttc" id="astructllvm_1_1VPIteration_html_af6b2c977def935b6b1b9a061281df6f3"><div class="ttname"><a href="structllvm_1_1VPIteration.html#af6b2c977def935b6b1b9a061281df6f3">llvm::VPIteration::isFirstIteration</a></div><div class="ttdeci">bool isFirstIteration() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00201">VPlan.h:201</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a783ee2076d6b2986b8c54287d871e5fe"><div class="ttname"><a href="namespacellvm.html#a783ee2076d6b2986b8c54287d871e5fe">llvm::VPlanPtr</a></div><div class="ttdeci">std::unique_ptr&lt; VPlan &gt; VPlanPtr</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00104">VPlan.h:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_acf19842e86bf39eaeb4bc6982223f5f8"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#acf19842e86bf39eaeb4bc6982223f5f8">llvm::InductionDescriptor::getInductionBinOp</a></div><div class="ttdeci">BinaryOperator * getInductionBinOp() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00323">IVDescriptors.h:323</a></div></div>
<div class="ttc" id="aInjectTLIMappings_8h_html"><div class="ttname"><a href="InjectTLIMappings_8h.html">InjectTLIMappings.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a584cb8dfa0090b33a969c4dda27337f6"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">llvm::ElementCount::getFixed</a></div><div class="ttdeci">static constexpr ElementCount getFixed(ScalarTy MinVal)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00291">TypeSize.h:291</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">llvm::tgtok::Bits</a></div><div class="ttdeci">@ Bits</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_af7844564539b9f0f917e8f2380a064b3"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#af7844564539b9f0f917e8f2380a064b3">llvm::LoopVectorizationCostModel::getWideningCost</a></div><div class="ttdeci">InstructionCost getWideningCost(Instruction *I, ElementCount VF)</div><div class="ttdoc">Return the vectorization cost for the given instruction I and vector width VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01389">LoopVectorize.cpp:1389</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1LoopInfoWrapperPass.html">llvm::LoopInfoWrapperPass</a></div><div class="ttdoc">The legacy pass manager's analysis pass to compute loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01293">LoopInfo.h:1293</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a552a158f5a673da0a26461d1471cea41"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a552a158f5a673da0a26461d1471cea41">llvm::LoopVectorizationLegality::canVectorizeFPMath</a></div><div class="ttdeci">bool canVectorizeFPMath(bool EnableStrictReductions)</div><div class="ttdoc">Returns true if it is legal to vectorize the FP math operations in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01014">LoopVectorizationLegality.cpp:1014</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_ac16509a75e3d3fc46b9df1726be486ec"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a></div><div class="ttdeci">#define T1</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00340">Mips16ISelLowering.cpp:340</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00367">GenericDomTree.h:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockUtils_html_a3a43b6445802190031bda62347e97453"><div class="ttname"><a href="classllvm_1_1VPBlockUtils.html#a3a43b6445802190031bda62347e97453">llvm::VPBlockUtils::insertTwoBlocksAfter</a></div><div class="ttdeci">static void insertTwoBlocksAfter(VPBlockBase *IfTrue, VPBlockBase *IfFalse, VPBlockBase *BlockPtr)</div><div class="ttdoc">Insert disconnected VPBlockBases IfTrue and IfFalse after BlockPtr.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02507">VPlan.h:2507</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5d4f35a197e7b0f2320bdbbf518bd9d"><div class="ttname"><a href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9d">llvm::ScalarEpilogueLowering</a></div><div class="ttdeci">ScalarEpilogueLowering</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01127">LoopVectorize.cpp:1127</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a9dd3b826858e2830f89aa99b46fb166f"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a9dd3b826858e2830f89aa99b46fb166f">llvm::IRBuilderBase::CreateBinaryIntrinsic</a></div><div class="ttdeci">CallInst * CreateBinaryIntrinsic(Intrinsic::ID ID, Value *LHS, Value *RHS, Instruction *FMFSource=nullptr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Create a call to intrinsic ID with 2 operands which is mangled on the first type.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00956">IRBuilder.cpp:956</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a2e987c6af902aad6baa39bd5b7ef322c"><div class="ttname"><a href="classllvm_1_1Value.html#a2e987c6af902aad6baa39bd5b7ef322c">llvm::Value::hasOneUser</a></div><div class="ttdeci">bool hasOneUser() const</div><div class="ttdoc">Return true if there is exactly one user of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00156">Value.cpp:156</a></div></div>
<div class="ttc" id="anamespacellvm_html_a30e47ae014eb35bea24e45097c2bd731"><div class="ttname"><a href="namespacellvm.html#a30e47ae014eb35bea24e45097c2bd731">llvm::formLCSSARecursively</a></div><div class="ttdeci">bool formLCSSARecursively(Loop &amp;L, const DominatorTree &amp;DT, const LoopInfo *LI, ScalarEvolution *SE)</div><div class="ttdoc">Put a loop nest into LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LCSSA_8cpp_source.html#l00410">LCSSA.cpp:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0acb9cad050d376980af6215c2bad710f3"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0acb9cad050d376980af6215c2bad710f3">llvm::VPInstruction::CanonicalIVIncrementNUW</a></div><div class="ttdeci">@ CanonicalIVIncrementNUW</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00794">VPlan.h:794</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPScalarIVStepsRecipe_html_acdd340f122251b99aaee3308d31f1230"><div class="ttname"><a href="classllvm_1_1VPScalarIVStepsRecipe.html#acdd340f122251b99aaee3308d31f1230">llvm::VPScalarIVStepsRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate the scalarized versions of the phi node as needed by their users.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09512">LoopVectorize.cpp:9512</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a266653d74b7082b0c2cfbef0d7b5a9e3"><div class="ttname"><a href="LoopVectorize_8cpp.html#a266653d74b7082b0c2cfbef0d7b5a9e3">EnableMaskedInterleavedMemAccesses</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableMaskedInterleavedMemAccesses(&quot;enable-masked-interleaved-mem-accesses&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Enable vectorization on masked interleaved memory accesses in a loop&quot;))</div><div class="ttdoc">An interleave-group may need masking if it resides in a block that needs predication,...</div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a4d6937e8333699792612fd75586a9538"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a4d6937e8333699792612fd75586a9538">llvm::InnerLoopVectorizer::getReductionResumeValue</a></div><div class="ttdeci">PHINode * getReductionResumeValue(const RecurrenceDescriptor &amp;RdxDesc)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01115">LoopVectorize.cpp:1115</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af7b131843b386c6e3cc39bd6f8141357"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">llvm::TargetTransformInfo::getCFInstrCost</a></div><div class="ttdeci">InstructionCost getCFInstrCost(unsigned Opcode, TTI::TargetCostKind CostKind=TTI::TCK_SizeAndLatency, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00888">TargetTransformInfo.cpp:888</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_ad146072469181af4ccb7ef03c28999ba"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ad146072469181af4ccb7ef03c28999ba">llvm::ScalarEvolution::applyLoopGuards</a></div><div class="ttdeci">const SCEV * applyLoopGuards(const SCEV *Expr, const Loop *L)</div><div class="ttdoc">Try to apply information from loop guards for L to Expr.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l14970">ScalarEvolution.cpp:14970</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a917548288129e24325af275795e4622f"><div class="ttname"><a href="classllvm_1_1User.html#a917548288129e24325af275795e4622f">llvm::User::op_range</a></div><div class="ttdeci">iterator_range&lt; op_iterator &gt; op_range</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00231">User.h:231</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab425bb10a0f4af749bbb29aa07fc6854"><div class="ttname"><a href="namespacellvm.html#ab425bb10a0f4af749bbb29aa07fc6854">llvm::reportVectorizationFailure</a></div><div class="ttdeci">void reportVectorizationFailure(const StringRef DebugMsg, const StringRef OREMsg, const StringRef ORETag, OptimizationRemarkEmitter *ORE, Loop *TheLoop, Instruction *I=nullptr)</div><div class="ttdoc">Reports a vectorization failure: print DebugMsg for debugging purposes along with the corresponding o...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00997">LoopVectorize.cpp:997</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenCallRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenCallRecipe.html">llvm::VPWidenCallRecipe</a></div><div class="ttdoc">A recipe for widening Call instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00930">VPlan.h:930</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a39b5a72b70df94211893c7fc6bbfe1f5"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a39b5a72b70df94211893c7fc6bbfe1f5">llvm::IRBuilderBase::CreateInsertElement</a></div><div class="ttdeci">Value * CreateInsertElement(Type *VecTy, Value *NewElt, Value *Idx, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02353">IRBuilder.h:2353</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0a0062eccdb4956531f7b6a3cf71c3320c"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a0062eccdb4956531f7b6a3cf71c3320c">llvm::VPInstruction::BranchOnCond</a></div><div class="ttdeci">@ BranchOnCond</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00800">VPlan.h:800</a></div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a12e23c3d619db313388fe11dc76eb23f"><div class="ttname"><a href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">llvm::VectorType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00422">DerivedTypes.h:422</a></div></div>
<div class="ttc" id="aHashing_8h_html"><div class="ttname"><a href="Hashing_8h.html">Hashing.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a0e1902405fb476065f5fd61c563f3567"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a0e1902405fb476065f5fd61c563f3567">llvm::InnerLoopVectorizer::TLI</a></div><div class="ttdeci">const TargetLibraryInfo * TLI</div><div class="ttdoc">Target Library Info.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00664">LoopVectorize.cpp:664</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_ad96fee81c3174ef427bf779d73fb1ef2"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ad96fee81c3174ef427bf779d73fb1ef2">llvm::details::FixedOrScalableQuantity::isZero</a></div><div class="ttdeci">constexpr bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00151">TypeSize.h:151</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_af1fba45879c49d4839b11ec30afd7532"><div class="ttname"><a href="LoopVectorize_8cpp.html#af1fba45879c49d4839b11ec30afd7532">checkMixedPrecision</a></div><div class="ttdeci">static void checkMixedPrecision(Loop *L, OptimizationRemarkEmitter *ORE)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09961">LoopVectorize.cpp:9961</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1ebb96529a39f9a193c81b8ea7cfb632"><div class="ttname"><a href="namespacellvm.html#a1ebb96529a39f9a193c81b8ea7cfb632">llvm::createSelectCmpOp</a></div><div class="ttdeci">Value * createSelectCmpOp(IRBuilderBase &amp;Builder, Value *StartVal, RecurKind RK, Value *Left, Value *Right)</div><div class="ttdoc">See RecurrenceDescriptor::isSelectCmpPattern for a description of the pattern we are trying to match.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00902">LoopUtils.cpp:902</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">llvm::Intrinsic::not_intrinsic</a></div><div class="ttdeci">@ not_intrinsic</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00044">Intrinsics.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a2a6e6e87c238d303539a31eb41d668e3"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a2a6e6e87c238d303539a31eb41d668e3">llvm::InnerLoopVectorizer::createInductionResumeValues</a></div><div class="ttdeci">void createInductionResumeValues(std::pair&lt; BasicBlock *, Value * &gt; AdditionalBypass={nullptr, nullptr})</div><div class="ttdoc">Create new phi nodes for the induction variables to resume iteration count in the scalar epilogue,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03215">LoopVectorize.cpp:3215</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a6bb946cd99f8c37f0145265914aea778"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a6bb946cd99f8c37f0145265914aea778">llvm::InnerLoopVectorizer::Legal</a></div><div class="ttdeci">LoopVectorizationLegality * Legal</div><div class="ttdoc">The legality analysis.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00719">LoopVectorize.cpp:719</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="astructllvm_1_1VectorizationFactor_html_a0c1900dc8fe6b998c1de1880f300dcfa"><div class="ttname"><a href="structllvm_1_1VectorizationFactor.html#a0c1900dc8fe6b998c1de1880f300dcfa">llvm::VectorizationFactor::MinProfitableTripCount</a></div><div class="ttdeci">ElementCount MinProfitableTripCount</div><div class="ttdoc">The minimum trip count required to make vectorization profitable, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00200">LoopVectorizationPlanner.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html">llvm::VPRecipeBuilder</a></div><div class="ttdoc">Helper class to create VPRecipies from IR instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPRecipeBuilder_8h_source.html#l00027">VPRecipeBuilder.h:27</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPUser_html_a11d83265a9e4ff6c6ecd3cf222ad0208"><div class="ttname"><a href="classllvm_1_1VPUser.html#a11d83265a9e4ff6c6ecd3cf222ad0208">llvm::VPUser::operands</a></div><div class="ttdeci">operand_range operands()</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00276">VPlanValue.h:276</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a48a6deb3e714d54e75caadcf84b0ca76"><div class="ttname"><a href="namespacellvm.html#a48a6deb3e714d54e75caadcf84b0ca76">llvm::propagateMetadata</a></div><div class="ttdeci">Instruction * propagateMetadata(Instruction *I, ArrayRef&lt; Value * &gt; VL)</div><div class="ttdoc">Specifically, let Kinds = [MD_tbaa, MD_alias_scope, MD_noalias, MD_fpmath, MD_nontemporal,...</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00889">VectorUtils.cpp:889</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00292">MathExtras.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a1e0fea1b88c314ecffb18922c6be5e70"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a1e0fea1b88c314ecffb18922c6be5e70">llvm::IRBuilderBase::CreateAlignedLoad</a></div><div class="ttdeci">LoadInst * CreateAlignedLoad(Type *Ty, Value *Ptr, MaybeAlign Align, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01722">IRBuilder.h:1722</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage_html_a12f1d225b87b9cb583e78478d9ef3b9c"><div class="ttname"><a href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a12f1d225b87b9cb583e78478d9ef3b9c">llvm::LoopVectorizationCostModel::RegisterUsage::LoopInvariantRegs</a></div><div class="ttdeci">SmallMapVector&lt; unsigned, unsigned, 4 &gt; LoopInvariantRegs</div><div class="ttdoc">Holds the number of loop invariant values that are used in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01235">LoopVectorize.cpp:1235</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a96d25fa6a3a7f93741ce1c948b24e0f4"><div class="ttname"><a href="LoopVectorize_8cpp.html#a96d25fa6a3a7f93741ce1c948b24e0f4">CreateStepValue</a></div><div class="ttdeci">static Value * CreateStepValue(const SCEV *Step, ScalarEvolution &amp;SE, Instruction *InsertBefore, Loop *OrigLoop=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02459">LoopVectorize.cpp:2459</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00090">GenericDomTree.h:90</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LoopVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00157">LoopVectorize.cpp:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_abc31c4cb45dd05eef2bf3f4e76464558"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#abc31c4cb45dd05eef2bf3f4e76464558">llvm::LoopVectorizationLegality::prepareToFoldTailByMasking</a></div><div class="ttdeci">bool prepareToFoldTailByMasking()</div><div class="ttdoc">Return true if we can vectorize this loop while folding its tail by masking, and mark all respective ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01383">LoopVectorizationLegality.cpp:1383</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a79ea372f9aa69492fccfafc0e5a1589c"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a79ea372f9aa69492fccfafc0e5a1589c">llvm::ElementCount::get</a></div><div class="ttdeci">static constexpr ElementCount get(ScalarTy MinVal, bool Scalable)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00297">TypeSize.h:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00021">FMF.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerEpilogueLoop_html_a9d4052b05414daf596711bada5c5e94b"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a9d4052b05414daf596711bada5c5e94b">llvm::EpilogueVectorizerEpilogueLoop::printDebugTracesAtStart</a></div><div class="ttdeci">void printDebugTracesAtStart() override</div><div class="ttdoc">Allow subclasses to override and print debug traces before/after vplan execution, when trace informat...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08033">LoopVectorize.cpp:8033</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">llvm::Sched::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00105">TargetLowering.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aac5759c83abd6a4af236401a7cfe7a0f"><div class="ttname"><a href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const</div><div class="ttdoc">Return true if this is one of the floating-point types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00185">Type.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a866b987577621ecd4c7adfebaa57de15"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a866b987577621ecd4c7adfebaa57de15">llvm::InnerLoopVectorizer::PSI</a></div><div class="ttdeci">ProfileSummaryInfo * PSI</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00733">LoopVectorize.cpp:733</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1OperandValueInfo_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html">llvm::TargetTransformInfo::OperandValueInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00947">TargetTransformInfo.h:947</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a2cdf0e50c64c0c677e7b8c9ed9aec38e"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a2cdf0e50c64c0c677e7b8c9ed9aec38e">llvm::InnerLoopVectorizer::scalarizeInstruction</a></div><div class="ttdeci">void scalarizeInstruction(const Instruction *Instr, VPReplicateRecipe *RepRecipe, const VPIteration &amp;Instance, bool IfPredicateInstr, VPTransformState &amp;State)</div><div class="ttdoc">A helper function to scalarize a single Instruction in the innermost loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02812">LoopVectorize.cpp:2812</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac501bf52c07df51c9e1242117cfc7b2f"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac501bf52c07df51c9e1242117cfc7b2f">llvm::TargetTransformInfo::enableInterleavedAccessVectorization</a></div><div class="ttdeci">bool enableInterleavedAccessVectorization() const</div><div class="ttdoc">Enable matching of interleaved access groups.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00562">TargetTransformInfo.cpp:562</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8h_html"><div class="ttname"><a href="BasicAliasAnalysis_8h.html">BasicAliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a036986770115ea3dbe00153cbeea478e"><div class="ttname"><a href="LoopVectorize_8cpp.html#a036986770115ea3dbe00153cbeea478e">getSmallBestKnownTC</a></div><div class="ttdeci">static std::optional&lt; unsigned &gt; getSmallBestKnownTC(ScalarEvolution &amp;SE, Loop *L)</div><div class="ttdoc">Returns &quot;best known&quot; trip count for the specified loop L as defined by the following procedure: 1) Re...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00406">LoopVectorize.cpp:406</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02797">Instructions.h:2797</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac214df91cdc242f4710ea5a93939c678"><div class="ttname"><a href="namespacellvm.html#ac214df91cdc242f4710ea5a93939c678">llvm::count_if</a></div><div class="ttdeci">auto count_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Wrapper function around std::count_if to count the number of times an element satisfying a given pred...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01903">STLExtras.h:1903</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html">llvm::InterleaveGroup</a></div><div class="ttdoc">The group of interleaved loads/stores sharing the same stride and close to each other.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00300">VectorUtils.h:300</a></div></div>
<div class="ttc" id="aUse_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d"><div class="ttname"><a href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">llvm::Data</a></div><div class="ttdeci">@ Data</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00055">SIMachineScheduler.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html_a7ce23b4d08f0bd28ea1f676d527ae1d3"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html#a7ce23b4d08f0bd28ea1f676d527ae1d3">llvm::VPBasicBlock::getEnclosingLoopRegion</a></div><div class="ttdeci">VPRegionBlock * getEnclosingLoopRegion()</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00427">VPlan.cpp:427</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReductionRecipe_html"><div class="ttname"><a href="classllvm_1_1VPReductionRecipe.html">llvm::VPReductionRecipe</a></div><div class="ttdoc">A recipe to represent inloop reduction operations, performing a reduction on a vector operand into a ...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01456">VPlan.h:1456</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a1a2b30bdeffa3fb4a4fd881e25d01817"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a1a2b30bdeffa3fb4a4fd881e25d01817">llvm::TargetTransformInfo::preferInLoopReduction</a></div><div class="ttdeci">bool preferInLoopReduction(unsigned Opcode, Type *Ty, ReductionFlags Flags) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01154">TargetTransformInfo.cpp:1154</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0f0d66fa63bebb53ddd51f1cc4def0f8"><div class="ttname"><a href="namespacellvm.html#a0f0d66fa63bebb53ddd51f1cc4def0f8">llvm::isEqual</a></div><div class="ttdeci">bool isEqual(const GCNRPTracker::LiveRegSet &amp;S1, const GCNRPTracker::LiveRegSet &amp;S2)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00021">GCNRegPressure.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopAndEpilogueVectorizer_html"><div class="ttname"><a href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html">llvm::InnerLoopAndEpilogueVectorizer</a></div><div class="ttdoc">An extension of the inner loop vectorizer that creates a skeleton for a vectorized loop that has its ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00798">LoopVectorize.cpp:798</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_a449e86217b24e56f372ca02516dd70b8"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#a449e86217b24e56f372ca02516dd70b8">llvm::VPRecipeBuilder::createBlockInMask</a></div><div class="ttdeci">VPValue * createBlockInMask(BasicBlock *BB, VPlan &amp;Plan)</div><div class="ttdoc">A helper function that computes the predicate of the block BB, assuming that the header block of the ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08122">LoopVectorize.cpp:8122</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPValue_html_af0932bb43954178036c87ea2ee5f112c"><div class="ttname"><a href="classllvm_1_1VPValue.html#af0932bb43954178036c87ea2ee5f112c">llvm::VPValue::users</a></div><div class="ttdeci">user_range users()</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00147">VPlanValue.h:147</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a13b9eb961d35ad9ecb3b633f5703253a"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a13b9eb961d35ad9ecb3b633f5703253a">llvm::ScalarEvolution::getURemExpr</a></div><div class="ttdeci">const SCEV * getURemExpr(const SCEV *LHS, const SCEV *RHS)</div><div class="ttdoc">Represents an unsigned remainder expression based on unsigned division.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l03398">ScalarEvolution.cpp:3398</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a0ac5df8f0304981180d602dacb13512c"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a0ac5df8f0304981180d602dacb13512c">llvm::LoopVectorizationCostModel::collectValuesToIgnore</a></div><div class="ttdeci">void collectValuesToIgnore()</div><div class="ttdoc">Collect values we want to ignore in the cost model.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07414">LoopVectorize.cpp:7414</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796">llvm::TargetTransformInfo::SK_Broadcast</a></div><div class="ttdeci">@ SK_Broadcast</div><div class="ttdoc">Broadcast element 0 to all other elements.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00911">TargetTransformInfo.h:911</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a5abced3ab870d7abf57f2b35a02cd041"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a5abced3ab870d7abf57f2b35a02cd041">llvm::LoopVectorizationCostModel::getVectorIntrinsicCost</a></div><div class="ttdeci">InstructionCost getVectorIntrinsicCost(CallInst *CI, ElementCount VF) const</div><div class="ttdoc">Estimate cost of an intrinsic call instruction CI if it were vectorized with factor VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03526">LoopVectorize.cpp:3526</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_a003fe6215d300fc9720b1b056cdf4c23"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#a003fe6215d300fc9720b1b056cdf4c23">llvm::LoopBlocksDFS::beginRPO</a></div><div class="ttdeci">RPOIterator beginRPO() const</div><div class="ttdoc">Reverse iterate over the cached postorder blocks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00136">LoopIterator.h:136</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a88c1c3dd33d232dc889a5d29c75b75f3"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88c1c3dd33d232dc889a5d29c75b75f3">llvm::PHINode::blocks</a></div><div class="ttdeci">iterator_range&lt; const_block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02780">Instructions.h:2780</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_ab9ba33b1dd671be4bc212c442516409f"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#ab9ba33b1dd671be4bc212c442516409f">llvm::LoopVectorizePass::AC</a></div><div class="ttdeci">AssumptionCache * AC</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00180">LoopVectorize.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a6332d31d71917ede8e7c557a226947f3"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6332d31d71917ede8e7c557a226947f3">llvm::IRBuilderBase::CreateBinOp</a></div><div class="ttdeci">Value * CreateBinOp(Instruction::BinaryOps Opc, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, MDNode *FPMathTag=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01581">IRBuilder.h:1581</a></div></div>
<div class="ttc" id="astructllvm_1_1VFRange_html"><div class="ttname"><a href="structllvm_1_1VFRange.html">llvm::VFRange</a></div><div class="ttdoc">A range of powers-of-2 vectorization factors with fixed start and adjustable end.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00084">VPlan.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVPredicate_html"><div class="ttname"><a href="classllvm_1_1SCEVPredicate.html">llvm::SCEVPredicate</a></div><div class="ttdoc">This class represents an assumption made using SCEV expressions which can be checked at run-time.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00218">ScalarEvolution.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html">llvm::LoopVectorizationCostModel</a></div><div class="ttdoc">LoopVectorizationCostModel - estimates the expected speedups due to vectorization.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01167">LoopVectorize.cpp:1167</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_af67062c22dbf5e0ab35164a778768476"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#af67062c22dbf5e0ab35164a778768476">llvm::LoopVectorizationCostModel::isScalarEpilogueAllowed</a></div><div class="ttdeci">bool isScalarEpilogueAllowed() const</div><div class="ttdoc">Returns true if a scalar epilogue is not allowed due to optsize or a loop hint annotation.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01547">LoopVectorize.cpp:1547</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationRequirements_html"><div class="ttname"><a href="classllvm_1_1LoopVectorizationRequirements.html">llvm::LoopVectorizationRequirements</a></div><div class="ttdoc">This holds vectorization requirements that must be verified late in the process.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00214">LoopVectorizationLegality.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_aa4068e37ec583962685e3567dc102ae5"><div class="ttname"><a href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">llvm::MDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Return number of MDNode operands.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01297">Metadata.h:1297</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a8c62d3e36a2d815cbfac5a1579ccbb01"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a8c62d3e36a2d815cbfac5a1579ccbb01">llvm::LoopVectorizationCostModel::LI</a></div><div class="ttdeci">LoopInfo * LI</div><div class="ttdoc">Loop Info analysis.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01847">LoopVectorize.cpp:1847</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ac2503a7483c928ca9f0629a7d4263fe5"><div class="ttname"><a href="LoopVectorize_8cpp.html#ac2503a7483c928ca9f0629a7d4263fe5">determineVPlanVF</a></div><div class="ttdeci">static unsigned determineVPlanVF(const unsigned WidestVectorRegBits, LoopVectorizationCostModel &amp;CM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07486">LoopVectorize.cpp:7486</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">llvm::AArch64PACKey::DB</a></div><div class="ttdeci">@ DB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00794">AArch64BaseInfo.h:794</a></div></div>
<div class="ttc" id="aLoopAnalysisManager_8h_html"><div class="ttname"><a href="LoopAnalysisManager_8h.html">LoopAnalysisManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksRPO_html"><div class="ttname"><a href="classllvm_1_1LoopBlocksRPO.html">llvm::LoopBlocksRPO</a></div><div class="ttdoc">Wrapper class to LoopBlocksDFS that provides a standard begin()/end() interface for the DFS reverse p...</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00172">LoopIterator.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830e"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830e">llvm::RecurKind</a></div><div class="ttdeci">RecurKind</div><div class="ttdoc">These are the kinds of recurrences that we support.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00035">IVDescriptors.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1InjectTLIMappingsLegacy_html"><div class="ttname"><a href="classllvm_1_1InjectTLIMappingsLegacy.html">llvm::InjectTLIMappingsLegacy</a></div><div class="ttdef"><b>Definition:</b> <a href="InjectTLIMappings_8h_source.html#l00028">InjectTLIMappings.h:28</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a00579d597c88e5f3c51754bcd9ec5658"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a00579d597c88e5f3c51754bcd9ec5658">llvm::InnerLoopVectorizer::printDebugTracesAtStart</a></div><div class="ttdeci">virtual void printDebugTracesAtStart()</div><div class="ttdoc">Allow subclasses to override and print debug traces before/after vplan execution, when trace informat...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00646">LoopVectorize.cpp:646</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a55ab1072c44295ad279535d714a0f33ea8914fe2dbf82d457456e8e4faa201b87"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea8914fe2dbf82d457456e8e4faa201b87">llvm::LoopVectorizeHints::FK_Undefined</a></div><div class="ttdeci">@ FK_Undefined</div><div class="ttdoc">Not selected.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00109">LoopVectorizationLegality.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInterleaveRecipe_html_ab0d48fabf61af227821d568b1c3aa4ca"><div class="ttname"><a href="classllvm_1_1VPInterleaveRecipe.html#ab0d48fabf61af227821d568b1c3aa4ca">llvm::VPInterleaveRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate the wide load or store, and shuffles.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09526">LoopVectorize.cpp:9526</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerEpilogueLoop_html_a04c0081718b0f5113134aa563e1a56ca"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a04c0081718b0f5113134aa563e1a56ca">llvm::EpilogueVectorizerEpilogueLoop::emitMinimumVectorEpilogueIterCountCheck</a></div><div class="ttdeci">BasicBlock * emitMinimumVectorEpilogueIterCountCheck(BasicBlock *Bypass, BasicBlock *Insert)</div><div class="ttdoc">Emits an iteration count bypass check after the main vector loop has finished to see if there are any...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08001">LoopVectorize.cpp:8001</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a0a973aabc3b5429e5e05beee35892de0"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a0a973aabc3b5429e5e05beee35892de0">llvm::TargetTransformInfo::isLegalMaskedScatter</a></div><div class="ttdeci">bool isLegalMaskedScatter(Type *DataType, Align Alignment) const</div><div class="ttdoc">Return true if the target supports masked scatter.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00435">TargetTransformInfo.cpp:435</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a07bd7f4b4c433f0197dbdcf68941e5fd"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a07bd7f4b4c433f0197dbdcf68941e5fd">llvm::InnerLoopVectorizer::LoopScalarBody</a></div><div class="ttdeci">BasicBlock * LoopScalarBody</div><div class="ttdoc">The scalar loop body.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00704">LoopVectorize.cpp:704</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_ad9ca0236800ea44a81218da33eef0681"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#ad9ca0236800ea44a81218da33eef0681">llvm::RecurrenceDescriptor::getCastInsts</a></div><div class="ttdeci">const SmallPtrSet&lt; Instruction *, 8 &gt; &amp; getCastInsts() const</div><div class="ttdoc">Returns a reference to the instructions used for type-promoting the recurrence.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00249">IVDescriptors.h:249</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a529385ab333b24f1f2c2dd8525ad52a8"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a529385ab333b24f1f2c2dd8525ad52a8">llvm::EpilogueLoopVectorizationInfo::EpilogueVF</a></div><div class="ttdeci">ElementCount EpilogueVF</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00774">LoopVectorize.cpp:774</a></div></div>
<div class="ttc" id="anamespacellvm_html_a73257f51950d9ea50955e3fb9c724a25"><div class="ttname"><a href="namespacellvm.html#a73257f51950d9ea50955e3fb9c724a25">llvm::get</a></div><div class="ttdeci">decltype(auto) get(const PointerIntPair&lt; PointerTy, IntBits, IntType, PtrTraits, Info &gt; &amp;Pair)</div><div class="ttdef"><b>Definition:</b> <a href="PointerIntPair_8h_source.html#l00234">PointerIntPair.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReplicateRecipe_html"><div class="ttname"><a href="classllvm_1_1VPReplicateRecipe.html">llvm::VPReplicateRecipe</a></div><div class="ttdoc">VPReplicateRecipe replicates a given instruction producing multiple scalar copies of the original sca...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01499">VPlan.h:1499</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336"><div class="ttname"><a href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06aefdc051657574f00e43b0fa1f87e7336">llvm::RegUsage</a></div><div class="ttdeci">@ RegUsage</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00033">SIMachineScheduler.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerMainLoop_html_a0c93ba172c5dbd2e1e76718981ac1b1e"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerMainLoop.html#a0c93ba172c5dbd2e1e76718981ac1b1e">llvm::EpilogueVectorizerMainLoop::EpilogueVectorizerMainLoop</a></div><div class="ttdeci">EpilogueVectorizerMainLoop(Loop *OrigLoop, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, DominatorTree *DT, const TargetLibraryInfo *TLI, const TargetTransformInfo *TTI, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, EpilogueLoopVectorizationInfo &amp;EPI, LoopVectorizationLegality *LVL, llvm::LoopVectorizationCostModel *CM, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, GeneratedRTChecks &amp;Check)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00839">LoopVectorize.cpp:839</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_af281aa07f9af9601ed68cc9e0468516f"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#af281aa07f9af9601ed68cc9e0468516f">llvm::IRBuilderBase::CreateCast</a></div><div class="ttdeci">Value * CreateCast(Instruction::CastOps Op, Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02045">IRBuilder.h:2045</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html"><div class="ttname"><a href="structllvm_1_1VPTransformState.html">llvm::VPTransformState</a></div><div class="ttdoc">VPTransformState holds information passed down when &quot;executing&quot; a VPlan, needed for generating the ou...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00206">VPlan.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a34df1386ff3adb63b4b4bf65409e716b"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a34df1386ff3adb63b4b4bf65409e716b">llvm::InnerLoopVectorizer::BFI</a></div><div class="ttdeci">BlockFrequencyInfo * BFI</div><div class="ttdoc">BFI and PSI are used to check for profile guided size optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00732">LoopVectorize.cpp:732</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a2ea9cfa48f5e86a4fc258e924756d0e2"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a2ea9cfa48f5e86a4fc258e924756d0e2">llvm::InnerLoopVectorizer::InnerLoopVectorizer</a></div><div class="ttdeci">InnerLoopVectorizer(Loop *OrigLoop, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, DominatorTree *DT, const TargetLibraryInfo *TLI, const TargetTransformInfo *TTI, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, ElementCount VecWidth, ElementCount MinProfitableTripCount, unsigned UnrollFactor, LoopVectorizationLegality *LVL, LoopVectorizationCostModel *CM, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, GeneratedRTChecks &amp;RTChecks)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00449">LoopVectorize.cpp:449</a></div></div>
<div class="ttc" id="anamespacellvm_html_ada31142763d41520644d228c139a4bdd"><div class="ttname"><a href="namespacellvm.html#ada31142763d41520644d228c139a4bdd">llvm::TailFoldingStyle</a></div><div class="ttdeci">TailFoldingStyle</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00165">TargetTransformInfo.h:165</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aCodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockBase_html"><div class="ttname"><a href="classllvm_1_1VPBlockBase.html">llvm::VPBlockBase</a></div><div class="ttdoc">VPBlockBase is the building block of the Hierarchical Control-Flow Graph.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00390">VPlan.h:390</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a8ca9e67bff6ba425fa439720e9d44e5a"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a8ca9e67bff6ba425fa439720e9d44e5a">llvm::VPlanTransforms::removeRedundantCanonicalIVs</a></div><div class="ttdeci">static void removeRedundantCanonicalIVs(VPlan &amp;Plan)</div><div class="ttdoc">Try to replace VPWidenCanonicalIVRecipes with a widened canonical IV recipe, if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00376">VPlanTransforms.cpp:376</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a490a5df5a9f49b5648d251cda2f7c428"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a490a5df5a9f49b5648d251cda2f7c428">llvm::IRBuilderBase::CreateFMul</a></div><div class="ttdeci">Value * CreateFMul(Value *L, Value *R, const Twine &amp;Name=&quot;&quot;, MDNode *FPMD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01502">IRBuilder.h:1502</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a20f8969b812a491714c8181ff736e000"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a20f8969b812a491714c8181ff736e000">llvm::EpilogueLoopVectorizationInfo::TripCount</a></div><div class="ttdeci">Value * TripCount</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00780">LoopVectorize.cpp:780</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a00315ff11c9068aab97e5780bdfa5eef"><div class="ttname"><a href="LoopVectorize_8cpp.html#a00315ff11c9068aab97e5780bdfa5eef">collectSupportedLoops</a></div><div class="ttdeci">static void collectSupportedLoops(Loop &amp;L, LoopInfo *LI, OptimizationRemarkEmitter *ORE, SmallVectorImpl&lt; Loop * &gt; &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02199">LoopVectorize.cpp:2199</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html_a23773e962f9a56c9bdf13f7668b063a5"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html#a23773e962f9a56c9bdf13f7668b063a5">llvm::VPBasicBlock::appendRecipe</a></div><div class="ttdeci">void appendRecipe(VPRecipeBase *Recipe)</div><div class="ttdoc">Augment the existing recipes of a VPBasicBlock with an additional Recipe as the last recipe.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02013">VPlan.h:2013</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo</a></div><div class="ttdoc">An information struct used to provide DenseMap with the various necessary components for a given valu...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00034">APInt.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a633dd97e642c10e8aa1dff2bd2874edb"><div class="ttname"><a href="classllvm_1_1VPlan.html#a633dd97e642c10e8aa1dff2bd2874edb">llvm::VPlan::hasVF</a></div><div class="ttdeci">bool hasVF(ElementCount VF)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02267">VPlan.h:2267</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReductionPHIRecipe_html_a9e146bc33d1c57399c7b777576f7768e"><div class="ttname"><a href="classllvm_1_1VPReductionPHIRecipe.html#a9e146bc33d1c57399c7b777576f7768e">llvm::VPReductionPHIRecipe::isInLoop</a></div><div class="ttdeci">bool isInLoop() const</div><div class="ttdoc">Returns true, if the phi is part of an in-loop reduction.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01324">VPlan.h:1324</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a6a94a8710c9c41b64870559c9098f305"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a6a94a8710c9c41b64870559c9098f305">llvm::TargetTransformInfo::getMinimumVF</a></div><div class="ttdeci">ElementCount getMinimumVF(unsigned ElemWidth, bool IsScalable) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00679">TargetTransformInfo.cpp:679</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3af72f14ea20f2c762c751d2d49e5ea3"><div class="ttname"><a href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a></div><div class="ttdeci">bool shouldOptimizeForSize(const MachineFunction *MF, ProfileSummaryInfo *PSI, const MachineBlockFrequencyInfo *BFI, PGSOQueryType QueryType=PGSOQueryType::Other)</div><div class="ttdoc">Returns true if machine function MF is suggested to be size-optimized based on the profile.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSizeOpts_8cpp_source.html#l00183">MachineSizeOpts.cpp:183</a></div></div>
<div class="ttc" id="aDebug_8h_html_a0e760853102aabaceef5ef82347c593c"><div class="ttname"><a href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a></div><div class="ttdeci">#define DEBUG_WITH_TYPE(TYPE, X)</div><div class="ttdoc">DEBUG_WITH_TYPE macro - This macro should be used by passes to emit debug information.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00064">Debug.h:64</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a4d748f0a6d8a5086dbf568d39c03b674"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a4d748f0a6d8a5086dbf568d39c03b674">llvm::IRBuilderBase::CreateMul</a></div><div class="ttdeci">Value * CreateMul(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01276">IRBuilder.h:1276</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html">llvm::InductionDescriptor</a></div><div class="ttdoc">A struct for saving information about induction variables.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00306">IVDescriptors.h:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_a701cf99899d3bdbbac8d9ca306d7d57c"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#a701cf99899d3bdbbac8d9ca306d7d57c">llvm::LoopVectorizationPlanner::executePlan</a></div><div class="ttdeci">void executePlan(ElementCount VF, unsigned UF, VPlan &amp;BestPlan, InnerLoopVectorizer &amp;LB, DominatorTree *DT, bool IsEpilogueVectorization)</div><div class="ttdoc">Generate the IR code for the body of the vectorized loop according to the best selected VF,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07658">LoopVectorize.cpp:7658</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a79a00ec9570d7ae0b7fd17387e3d151f"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a79a00ec9570d7ae0b7fd17387e3d151f">llvm::InnerLoopVectorizer::PSE</a></div><div class="ttdeci">PredicatedScalarEvolution &amp; PSE</div><div class="ttdoc">A wrapper around ScalarEvolution used to add runtime SCEV checks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00655">LoopVectorize.cpp:655</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a32cea93d587825e715e63f5d58834cd3"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a32cea93d587825e715e63f5d58834cd3">llvm::LoopVectorizePass::LI</a></div><div class="ttdeci">LoopInfo * LI</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00174">LoopVectorize.h:174</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a99a503a2d14911c8bb439fea8e49cdf7"><div class="ttname"><a href="LoopVectorize_8cpp.html#a99a503a2d14911c8bb439fea8e49cdf7">EpilogueVectorizationForceVF</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; EpilogueVectorizationForceVF(&quot;epilogue-vectorization-force-VF&quot;, cl::init(1), cl::Hidden, cl::desc(&quot;When epilogue vectorization is enabled, and a value greater than &quot; &quot;1 is specified, forces the given VF for all applicable epilogue &quot; &quot;loops.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a9679969ae87f8a08d5f6948be6cf7210"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">llvm::TargetTransformInfo::getArithmeticInstrCost</a></div><div class="ttdeci">InstructionCost getArithmeticInstrCost(unsigned Opcode, Type *Ty, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, TTI::OperandValueInfo Opd1Info={TTI::OK_AnyValue, TTI::OP_None}, TTI::OperandValueInfo Opd2Info={TTI::OK_AnyValue, TTI::OP_None}, ArrayRef&lt; const Value * &gt; Args=ArrayRef&lt; const Value * &gt;(), const Instruction *CxtI=nullptr) const</div><div class="ttdoc">This is an approximation of reciprocal throughput of a math/logic op.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00803">TargetTransformInfo.cpp:803</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a5f64b98dd7b1371ddda6c24bf2163be6"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a5f64b98dd7b1371ddda6c24bf2163be6">llvm::RecurrenceDescriptor::getMinWidthCastToRecurrenceTypeInBits</a></div><div class="ttdeci">unsigned getMinWidthCastToRecurrenceTypeInBits() const</div><div class="ttdoc">Returns the minimum width used by the recurrence in bits.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00252">IVDescriptors.h:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a72c491cdf8cf0283d87008831431f917"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a72c491cdf8cf0283d87008831431f917">llvm::InnerLoopVectorizer::emitIterationCountCheck</a></div><div class="ttdeci">void emitIterationCountCheck(BasicBlock *Bypass)</div><div class="ttdoc">Emit a bypass check to see if the vector trip count is zero, including if it overflows.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02980">LoopVectorize.cpp:2980</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenPHIRecipe_html_a0fbc95bf03fafffa21d08f0d3049130e"><div class="ttname"><a href="classllvm_1_1VPWidenPHIRecipe.html#a0fbc95bf03fafffa21d08f0d3049130e">llvm::VPWidenPHIRecipe::getIncomingBlock</a></div><div class="ttdeci">VPBasicBlock * getIncomingBlock(unsigned I)</div><div class="ttdoc">Returns the I th incoming VPBasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01247">VPlan.h:1247</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html"><div class="ttname"><a href="classllvm_1_1VPInstruction.html">llvm::VPInstruction</a></div><div class="ttdoc">This is a concrete Recipe that models a single VPlan-level instruction.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00779">VPlan.h:779</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab4ac3afe77847f88a5bec4ef29e68fa"><div class="ttname"><a href="namespacellvm.html#aab4ac3afe77847f88a5bec4ef29e68fa">llvm::createInterleaveMask</a></div><div class="ttdeci">llvm::SmallVector&lt; int, 16 &gt; createInterleaveMask(unsigned VF, unsigned NumVecs)</div><div class="ttdoc">Create an interleave shuffle mask.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00964">VectorUtils.cpp:964</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260af974de6a8aba0481a82335fb93471a39"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260af974de6a8aba0481a82335fb93471a39">llvm::LoopVectorizationCostModel::CM_Unknown</a></div><div class="ttdeci">@ CM_Unknown</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01336">LoopVectorize.cpp:1336</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_af9f62350ccdebd24858be552f3fc051c"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#af9f62350ccdebd24858be552f3fc051c">llvm::LoopVectorizationCostModel::selectInterleaveCount</a></div><div class="ttdeci">unsigned selectInterleaveCount(ElementCount VF, InstructionCost LoopCost)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05712">LoopVectorize.cpp:5712</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_adb13793b98ab59209a5309d26f831850"><div class="ttname"><a href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Get an iterator to the beginning of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00082">SetVector.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ad0fe11db5d339b9eb4830b54eda769e0"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ad0fe11db5d339b9eb4830b54eda769e0">llvm::IRBuilderBase::CreateUIToFP</a></div><div class="ttdeci">Value * CreateUIToFP(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01968">IRBuilder.h:1968</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1VFDatabase_html"><div class="ttname"><a href="classllvm_1_1VFDatabase.html">llvm::VFDatabase</a></div><div class="ttdoc">The Vector Function Database.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00224">VectorUtils.h:224</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_ac1c0c61b215e77a1ccb1d7e413be42d1"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#ac1c0c61b215e77a1ccb1d7e413be42d1">llvm::VPTransformState::ILV</a></div><div class="ttdeci">InnerLoopVectorizer * ILV</div><div class="ttdoc">Hold a pointer to InnerLoopVectorizer to reuse its IR generation methods.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00368">VPlan.h:368</a></div></div>
<div class="ttc" id="anamespacellvm_html_a22eeee01734061ac1b31ccd994c49eef"><div class="ttname"><a href="namespacellvm.html#a22eeee01734061ac1b31ccd994c49eef">llvm::dyn_cast</a></div><div class="ttdeci">decltype(auto) dyn_cast(const From &amp;Val)</div><div class="ttdoc">dyn_cast&lt;X&gt; - Return the argument parameter cast to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00650">Casting.h:650</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a7fe5b99b6520cb29c14b69dcf50d031f"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a7fe5b99b6520cb29c14b69dcf50d031f">llvm::details::FixedOrScalableQuantity::getWithIncrement</a></div><div class="ttdeci">constexpr LeafTy getWithIncrement(ScalarTy RHS) const</div><div class="ttdoc">Add RHS to the underlying quantity.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00158">TypeSize.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_ac93dd46031b1e2f9fdb0cee7a99681df"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">llvm::ScalarEvolution::getOne</a></div><div class="ttdeci">const SCEV * getOne(Type *Ty)</div><div class="ttdoc">Return a SCEV for the constant 1 of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00656">ScalarEvolution.h:656</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a247b6987d634040b8aa6fb9c5887b703"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">llvm::PatternMatch::m_ZExtOrSExt</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, CastClass_match&lt; OpTy, Instruction::SExt &gt; &gt; m_ZExtOrSExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01648">PatternMatch.h:1648</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a1d2bb8dc96ed2e49d7588600b9182333"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a1d2bb8dc96ed2e49d7588600b9182333">llvm::InnerLoopVectorizer::IVEndValues</a></div><div class="ttdeci">DenseMap&lt; PHINode *, Value * &gt; IVEndValues</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00729">LoopVectorize.cpp:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a6415fb68bc55f3a316aa414a5c2c0ab2"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a6415fb68bc55f3a316aa414a5c2c0ab2">llvm::RecurrenceDescriptor::getReductionOpChain</a></div><div class="ttdeci">SmallVector&lt; Instruction *, 4 &gt; getReductionOpChain(PHINode *Phi, Loop *L) const</div><div class="ttdoc">Attempts to find a chain of operations from Phi to LoopExitInst that can be treated as a set of reduc...</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8cpp_source.html#l01169">IVDescriptors.cpp:1169</a></div></div>
<div class="ttc" id="anamespacellvm_html_ada31142763d41520644d228c139a4bddadfca60932ecfe430f86d4ecde04e13ab"><div class="ttname"><a href="namespacellvm.html#ada31142763d41520644d228c139a4bddadfca60932ecfe430f86d4ecde04e13ab">llvm::TailFoldingStyle::DataWithoutLaneMask</a></div><div class="ttdeci">@ DataWithoutLaneMask</div><div class="ttdoc">Same as Data, but avoids using the get.active.lane.mask intrinsic to calculate the mask and instead i...</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="anamespacellvm_1_1vputils_html_a064976a6c7458b10c24021b7334cec2a"><div class="ttname"><a href="namespacellvm_1_1vputils.html#a064976a6c7458b10c24021b7334cec2a">llvm::vputils::getOrCreateVPValueForSCEVExpr</a></div><div class="ttdeci">VPValue * getOrCreateVPValueForSCEVExpr(VPlan &amp;Plan, const SCEV *Expr, ScalarEvolution &amp;SE)</div><div class="ttdoc">Get or create a VPValue that corresponds to the expansion of Expr.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l01119">VPlan.cpp:1119</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c184773989d9b05fcc2bf4f5840c1db"><div class="ttname"><a href="namespacellvm.html#a2c184773989d9b05fcc2bf4f5840c1db">llvm::getStoredValue</a></div><div class="ttdeci">SDValue getStoredValue(SDValue Op)</div><div class="ttdef"><b>Definition:</b> <a href="VECustomDAG_8cpp_source.html#l00332">VECustomDAG.cpp:332</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_ac2d32589e2e153088b8a35db1a9eabccab61689ca7d0a024fc4ff52a74d691ae2"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccab61689ca7d0a024fc4ff52a74d691ae2">llvm::InductionDescriptor::IK_PtrInduction</a></div><div class="ttdeci">@ IK_PtrInduction</div><div class="ttdoc">Pointer induction var. Step = C / sizeof(elem).</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00312">IVDescriptors.h:312</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac4156fb8bcc6a7e29ee021b01d22551e"><div class="ttname"><a href="namespacellvm.html#ac4156fb8bcc6a7e29ee021b01d22551e">llvm::createStepForVF</a></div><div class="ttdeci">Value * createStepForVF(IRBuilderBase &amp;B, Type *Ty, ElementCount VF, int64_t Step)</div><div class="ttdoc">Return a value for Step multiplied by VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00955">LoopVectorize.cpp:955</a></div></div>
<div class="ttc" id="astructllvm_1_1VFInfo_html"><div class="ttname"><a href="structllvm_1_1VFInfo.html">llvm::VFInfo</a></div><div class="ttdoc">Holds the VFShape for a specific scalar to vector function mapping.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00123">VectorUtils.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abcf928a0b41395ea7aad52c702fcb8b8"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abcf928a0b41395ea7aad52c702fcb8b8">llvm::LoopVectorizationCostModel::getInterleavedAccessGroup</a></div><div class="ttdeci">const InterleaveGroup&lt; Instruction &gt; * getInterleavedAccessGroup(Instruction *Instr)</div><div class="ttdoc">Get the interleaved access group that Instr belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01529">LoopVectorize.cpp:1529</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="astructllvm_1_1VPIteration_html_a67ae6a50eeac60108e45fe4088944f9f"><div class="ttname"><a href="structllvm_1_1VPIteration.html#a67ae6a50eeac60108e45fe4088944f9f">llvm::VPIteration::Lane</a></div><div class="ttdeci">VPLane Lane</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00193">VPlan.h:193</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_afb5c46a140e1b7f08de54d9c035a8adc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#afb5c46a140e1b7f08de54d9c035a8adc">llvm::IRBuilderBase::CreateGEP</a></div><div class="ttdeci">Value * CreateGEP(Type *Ty, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;Name=&quot;&quot;, bool IsInBounds=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01781">IRBuilder.h:1781</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64">llvm::TargetTransformInfo::CastContextHint</a></div><div class="ttdeci">CastContextHint</div><div class="ttdoc">Represents a hint about the context in which a cast is used.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l01163">TargetTransformInfo.h:1163</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac8fcd48e86416eb13190ccfd43d9c50d"><div class="ttname"><a href="namespacellvm.html#ac8fcd48e86416eb13190ccfd43d9c50d">llvm::reportVectorizationInfo</a></div><div class="ttdeci">void reportVectorizationInfo(const StringRef OREMsg, const StringRef ORETag, OptimizationRemarkEmitter *ORE, Loop *TheLoop, Instruction *I=nullptr)</div><div class="ttdoc">Reports an informative message: print Msg for debugging purposes as well as an optimization remark.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01008">LoopVectorize.cpp:1008</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a47eab9fa7cfa73af0b164da3fca49a0f"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a47eab9fa7cfa73af0b164da3fca49a0f">llvm::InnerLoopVectorizer::PredicatedInstructions</a></div><div class="ttdeci">SmallVector&lt; Instruction *, 4 &gt; PredicatedInstructions</div><div class="ttdoc">Store instructions that were predicated.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00710">LoopVectorize.cpp:710</a></div></div>
<div class="ttc" id="astructllvm_1_1ElementCountComparator_html"><div class="ttname"><a href="structllvm_1_1ElementCountComparator.html">llvm::ElementCountComparator</a></div><div class="ttdoc">ElementCountComparator creates a total ordering for ElementCount for the purposes of using it in a se...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01150">LoopVectorize.cpp:1150</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_af1e93b22913d4a49d00f4cee43c004b8"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#af1e93b22913d4a49d00f4cee43c004b8">llvm::RecurrenceDescriptor::isSelectCmpRecurrenceKind</a></div><div class="ttdeci">static bool isSelectCmpRecurrenceKind(RecurKind Kind)</div><div class="ttdoc">Returns true if the recurrence kind is of the form select(cmp(),x,y) where one of (x,...</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00239">IVDescriptors.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a31435e9d8a095ec60c132989b257e6ed"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a31435e9d8a095ec60c132989b257e6ed">llvm::LoopVectorizationCostModel::requiresScalarEpilogue</a></div><div class="ttdeci">bool requiresScalarEpilogue(ElementCount VF) const</div><div class="ttdoc">Returns true if we're required to use a scalar epilogue for at least the final iteration of the origi...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01535">LoopVectorize.cpp:1535</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_aeae69a459419ec0bb738cdc73f4fc2a1"><div class="ttname"><a href="classllvm_1_1FunctionType.html#aeae69a459419ec0bb738cdc73f4fc2a1">llvm::FunctionType::param_end</a></div><div class="ttdeci">param_iterator param_end() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00129">DerivedTypes.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_aca823225f151529aee5d893ca9de45ca"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#aca823225f151529aee5d893ca9de45ca">llvm::InnerLoopVectorizer::getOrCreateTripCount</a></div><div class="ttdeci">Value * getOrCreateTripCount(BasicBlock *InsertBlock)</div><div class="ttdoc">Returns (and creates if needed) the original loop trip count.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02869">LoopVectorize.cpp:2869</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a7e207263ca75f2bfc5eb562a213bc575"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a7e207263ca75f2bfc5eb562a213bc575">llvm::LoopVectorizationCostModel::ValuesToIgnore</a></div><div class="ttdeci">SmallPtrSet&lt; const Value *, 16 &gt; ValuesToIgnore</div><div class="ttdoc">Values to ignore in the cost model.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01877">LoopVectorize.cpp:1877</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a38ff83df2a3ad17de50157ed09a1c259"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a38ff83df2a3ad17de50157ed09a1c259">llvm::LoopVectorizePass::LAIs</a></div><div class="ttdeci">LoopAccessInfoManager * LAIs</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00181">LoopVectorize.h:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockUtils_html_a1f625b90be26a131061ab1e43740cc81"><div class="ttname"><a href="classllvm_1_1VPBlockUtils.html#a1f625b90be26a131061ab1e43740cc81">llvm::VPBlockUtils::insertBlockAfter</a></div><div class="ttdeci">static void insertBlockAfter(VPBlockBase *NewBlock, VPBlockBase *BlockPtr)</div><div class="ttdoc">Insert disconnected VPBlockBase NewBlock after BlockPtr.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02488">VPlan.h:2488</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae2a4807be3034c8d65b3195b547f22e5"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae2a4807be3034c8d65b3195b547f22e5">llvm::InnerLoopVectorizer::fixVectorizedLoop</a></div><div class="ttdeci">void fixVectorizedLoop(VPTransformState &amp;State, VPlan &amp;Plan)</div><div class="ttdoc">Fix the vectorized code, taking care of header phi's, live-outs, and more.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03693">LoopVectorize.cpp:3693</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenPointerInductionRecipe_html_ac53a5d033ba641288b6e15344d880186"><div class="ttname"><a href="classllvm_1_1VPWidenPointerInductionRecipe.html#ac53a5d033ba641288b6e15344d880186">llvm::VPWidenPointerInductionRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate vector values for the pointer induction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09390">LoopVectorize.cpp:9390</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="anamespacellvm_html_a273a0d00c32d9201b643a8e36822191c"><div class="ttname"><a href="namespacellvm.html#a273a0d00c32d9201b643a8e36822191c">llvm::ToVectorTy</a></div><div class="ttdeci">Type * ToVectorTy(Type *Scalar, ElementCount EC)</div><div class="ttdoc">A helper function for converting Scalar types to vector types.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00315">VectorUtils.h:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a93a8f97a1e57c3bce2e7c3473d592c01"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a93a8f97a1e57c3bce2e7c3473d592c01">llvm::InnerLoopVectorizer::OptForSizeBasedOnProfile</a></div><div class="ttdeci">bool OptForSizeBasedOnProfile</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00737">LoopVectorize.cpp:737</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a1c0b137bcf194671c30aba4e2fab073d"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a1c0b137bcf194671c30aba4e2fab073d">llvm::TargetTransformInfo::hasBranchDivergence</a></div><div class="ttdeci">bool hasBranchDivergence() const</div><div class="ttdoc">Return true if branch divergence exists.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00245">TargetTransformInfo.cpp:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_aee3b56a46e2674fc6f8c58beacca580e"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#aee3b56a46e2674fc6f8c58beacca580e">llvm::VPRecipeBuilder::handleReplication</a></div><div class="ttdeci">VPBasicBlock * handleReplication(Instruction *I, VFRange &amp;Range, VPBasicBlock *VPBB, VPlan &amp;Plan)</div><div class="ttdoc">Build a VPReplicationRecipe for I and enclose it within a Region if it is predicated.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08543">LoopVectorize.cpp:8543</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_aafbe07bc08f554d12e4f679eea837ac7"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#aafbe07bc08f554d12e4f679eea837ac7">llvm::RecurrenceDescriptor::getRecurrenceType</a></div><div class="ttdeci">Type * getRecurrenceType() const</div><div class="ttdoc">Returns the type of the recurrence.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00245">IVDescriptors.h:245</a></div></div>
<div class="ttc" id="astructllvm_1_1FixedScalableVFPair_html_a8b2c87024b1a98ba77b039a0e10e0744"><div class="ttname"><a href="structllvm_1_1FixedScalableVFPair.html#a8b2c87024b1a98ba77b039a0e10e0744">llvm::FixedScalableVFPair::hasVector</a></div><div class="ttdeci">bool hasVector() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00248">LoopVectorizationPlanner.h:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_a532a9520655d94d866172d738875d555"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#a532a9520655d94d866172d738875d555">llvm::InductionDescriptor::getCastInsts</a></div><div class="ttdeci">const SmallVectorImpl&lt; Instruction * &gt; &amp; getCastInsts() const</div><div class="ttdoc">Returns a reference to the type cast instructions in the induction update chain, that are redundant w...</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00378">IVDescriptors.h:378</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ae03080593554f2ae8e8aeedec6ab55f6"><div class="ttname"><a href="LoopVectorize_8cpp.html#ae03080593554f2ae8e8aeedec6ab55f6">getDebugLocFromInstOrOperands</a></div><div class="ttdeci">static Instruction * getDebugLocFromInstOrOperands(Instruction *I)</div><div class="ttdoc">Look for a meaningful debug location on the instruction or it's operands.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00897">LoopVectorize.cpp:897</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_abcf8c2b35316773f1ab0ba70aeb2a6de"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#abcf8c2b35316773f1ab0ba70aeb2a6de">llvm::LoopVectorizeHints::vectorizeAnalysisPassName</a></div><div class="ttdeci">const char * vectorizeAnalysisPassName() const</div><div class="ttdoc">If hints are provided that force vectorization, use the AlwaysPrint pass name to force the frontend t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00231">LoopVectorizationLegality.cpp:231</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_af6c277f93322363a61d8ba68204137f6"><div class="ttname"><a href="classllvm_1_1VPlan.html#af6c277f93322363a61d8ba68204137f6">llvm::VPlan::getVPValue</a></div><div class="ttdeci">VPValue * getVPValue(Value *V, bool OverrideAllowed=false)</div><div class="ttdoc">Returns the VPValue for V.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02311">VPlan.h:2311</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a664dc60e31d9203d66c9d7a49787b63f"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a664dc60e31d9203d66c9d7a49787b63f">llvm::LoopVectorizationCostModel::TheLoop</a></div><div class="ttdeci">Loop * TheLoop</div><div class="ttdoc">The loop that we evaluate.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01841">LoopVectorize.cpp:1841</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a58931f2bf23c97dfb6cb6982b226ef8d"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a58931f2bf23c97dfb6cb6982b226ef8d">llvm::LoopVectorizationCostModel::ProfitableVFs</a></div><div class="ttdeci">SmallVector&lt; VectorizationFactor, 8 &gt; ProfitableVFs</div><div class="ttdoc">Profitable vector factors.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01886">LoopVectorize.cpp:1886</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0a7428ca8c9fd96ac1a3243f6e38221314"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a7428ca8c9fd96ac1a3243f6e38221314">llvm::VPInstruction::ICmpULE</a></div><div class="ttdeci">@ ICmpULE</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00789">VPlan.h:789</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ad67b7e389a52ada1d5264e23d09f4cbe"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ad67b7e389a52ada1d5264e23d09f4cbe">llvm::TargetTransformInfo::getNumberOfParts</a></div><div class="ttdeci">unsigned getNumberOfParts(Type *Tp) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00999">TargetTransformInfo.cpp:999</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_addaa86bfa4ca26b7f366cbdd868f99bf"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#addaa86bfa4ca26b7f366cbdd868f99bf">llvm::details::FixedOrScalableQuantity&lt; ElementCount, unsigned &gt;::isKnownGT</a></div><div class="ttdeci">static constexpr bool isKnownGT(const FixedOrScalableQuantity &amp;LHS, const FixedOrScalableQuantity &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00205">TypeSize.h:205</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a2bb73b5d562083dde29e9091dd81bef3"><div class="ttname"><a href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a></div><div class="ttdeci">#define Check(C,...)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00170">Lint.cpp:170</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInterleaveRecipe_html"><div class="ttname"><a href="classllvm_1_1VPInterleaveRecipe.html">llvm::VPInterleaveRecipe</a></div><div class="ttdoc">VPInterleaveRecipe is a recipe for transforming an interleave group of load or stores into one wide l...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01380">VPlan.h:1380</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_a36d6728b8c3cfca0a9bd02c3f0273477"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#a36d6728b8c3cfca0a9bd02c3f0273477">llvm::LoopVectorizationPlanner::buildVPlans</a></div><div class="ttdeci">void buildVPlans(ElementCount MinVF, ElementCount MaxVF)</div><div class="ttdoc">Build VPlans for power-of-2 VF's between MinVF and MaxVF inclusive, according to the information gath...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08067">LoopVectorize.cpp:8067</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae7137d6863a9184da04c18725908e413"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae7137d6863a9184da04c18725908e413">llvm::InnerLoopVectorizer::createInductionResumeValue</a></div><div class="ttdeci">PHINode * createInductionResumeValue(PHINode *OrigPhi, const InductionDescriptor &amp;ID, ArrayRef&lt; BasicBlock * &gt; BypassBlocks, std::pair&lt; BasicBlock *, Value * &gt; AdditionalBypass={nullptr, nullptr})</div><div class="ttdoc">Create a new phi node for the induction variable OrigPhi to resume iteration count in the scalar epil...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03156">LoopVectorize.cpp:3156</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a071e8d814b2b30b02544fad964227b8e"><div class="ttname"><a href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">llvm::APInt::getAllOnes</a></div><div class="ttdeci">static APInt getAllOnes(unsigned numBits)</div><div class="ttdoc">Return an APInt of a specified width with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00214">APInt.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a32c8ad694911bf6dcf6cb07824f2823e"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a32c8ad694911bf6dcf6cb07824f2823e">llvm::RecurrenceDescriptor::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00200">IVDescriptors.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ab0215ddedbe9f8179c491308a56aaceb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ab0215ddedbe9f8179c491308a56aaceb">llvm::TargetTransformInfo::supportsScalableVectors</a></div><div class="ttdeci">bool supportsScalableVectors() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01185">TargetTransformInfo.cpp:1185</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7"><div class="ttname"><a href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da65f7ef37c3a0cd826b5e361e8cf32cf7">llvm::CM_ScalarEpilogueAllowed</a></div><div class="ttdeci">@ CM_ScalarEpilogueAllowed</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01130">LoopVectorize.cpp:1130</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a3b78b24a3c241e611957b82cd12640da"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a3b78b24a3c241e611957b82cd12640da">llvm::LoopVectorizationLegality::blockNeedsPredication</a></div><div class="ttdeci">bool blockNeedsPredication(BasicBlock *BB) const</div><div class="ttdoc">Return true if the block BB needs to be predicated in order for the loop to be vectorized.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01105">LoopVectorizationLegality.cpp:1105</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae1d8518bd0c514e739180737faf538be"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae1d8518bd0c514e739180737faf538be">llvm::InnerLoopVectorizer::UF</a></div><div class="ttdeci">unsigned UF</div><div class="ttdoc">The vectorization unroll factor to use.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00683">LoopVectorize.cpp:683</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64ad392556b3674a98332cc2938ba0bfeb7"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64ad392556b3674a98332cc2938ba0bfeb7">llvm::TargetTransformInfo::CastContextHint::Interleave</a></div><div class="ttdeci">@ Interleave</div><div class="ttdoc">The cast is used with an interleaved load/store.</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00716">PatternMatch.h:716</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdeci">@ Store</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00033">SparcInstrInfo.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ae26a2cbdb26b960379cca81872a10dc1"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ae26a2cbdb26b960379cca81872a10dc1">llvm::InnerLoopVectorizer::packScalarIntoVectorValue</a></div><div class="ttdeci">void packScalarIntoVectorValue(VPValue *Def, const VPIteration &amp;Instance, VPTransformState &amp;State)</div><div class="ttdoc">Construct the vector value of a scalarized value V one lane at a time.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02560">LoopVectorize.cpp:2560</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ac050a91bc264472b58f2144ff8638b4c"><div class="ttname"><a href="LoopVectorize_8cpp.html#ac050a91bc264472b58f2144ff8638b4c">ForceOrderedReductions</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ForceOrderedReductions(&quot;force-ordered-reductions&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Enable the vectorisation of loops with in-order (strict) &quot; &quot;FP reductions&quot;))</div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a91945cb39ed4c6676d991a9528dcd2d0"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a91945cb39ed4c6676d991a9528dcd2d0">llvm::LoopVectorizationCostModel::VecValuesToIgnore</a></div><div class="ttdeci">SmallPtrSet&lt; const Value *, 16 &gt; VecValuesToIgnore</div><div class="ttdoc">Values to ignore in the cost model when VF &gt; 1.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01880">LoopVectorize.cpp:1880</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a59632c5deb0423a518ad984bdd04d41f"><div class="ttname"><a href="classllvm_1_1VectorType.html#a59632c5deb0423a518ad984bdd04d41f">llvm::VectorType::getElementCount</a></div><div class="ttdeci">ElementCount getElementCount() const</div><div class="ttdoc">Return an ElementCount instance to represent the (possibly scalable) number of elements in the vector...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00627">DerivedTypes.h:627</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ae6c98d2f865894d646b95e8af8176a5d"><div class="ttname"><a href="classllvm_1_1PHINode.html#ae6c98d2f865894d646b95e8af8176a5d">llvm::PHINode::replaceIncomingBlockWith</a></div><div class="ttdeci">void replaceIncomingBlockWith(const BasicBlock *Old, BasicBlock *New)</div><div class="ttdoc">Replace every incoming basic block Old to basic block New.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02845">Instructions.h:2845</a></div></div>
<div class="ttc" id="astructllvm_1_1FixedScalableVFPair_html_a25a62c28e80eac3b4cc08470ae0770bd"><div class="ttname"><a href="structllvm_1_1FixedScalableVFPair.html#a25a62c28e80eac3b4cc08470ae0770bd">llvm::FixedScalableVFPair::FixedVF</a></div><div class="ttdeci">ElementCount FixedVF</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00226">LoopVectorizationPlanner.h:226</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a728069d0bcacf976cbb3764bad749562"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a728069d0bcacf976cbb3764bad749562">llvm::LoopVectorizationLegality::getPointerInductionDescriptor</a></div><div class="ttdeci">const InductionDescriptor * getPointerInductionDescriptor(PHINode *Phi) const</div><div class="ttdoc">Returns a pointer to the induction descriptor, if Phi is pointer induction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01081">LoopVectorizationLegality.cpp:1081</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenPHIRecipe_html_ac0bc6d235995fe63bd8050b6cf5db25b"><div class="ttname"><a href="classllvm_1_1VPWidenPHIRecipe.html#ac0bc6d235995fe63bd8050b6cf5db25b">llvm::VPWidenPHIRecipe::getIncomingValue</a></div><div class="ttdeci">VPValue * getIncomingValue(unsigned I)</div><div class="ttdoc">Returns the I th incoming VPValue.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01250">VPlan.h:1250</a></div></div>
<div class="ttc" id="anamespacellvm_html_adda962906fa6521f6794e5af3bf06c71"><div class="ttname"><a href="namespacellvm.html#adda962906fa6521f6794e5af3bf06c71">llvm::createTripCountSCEV</a></div><div class="ttdeci">const SCEV * createTripCountSCEV(Type *IdxTy, PredicatedScalarEvolution &amp;PSE)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00968">LoopVectorize.cpp:968</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizeResult_html_a36b3635888f4d5263ae7179034879c62"><div class="ttname"><a href="structllvm_1_1LoopVectorizeResult.html#a36b3635888f4d5263ae7179034879c62">llvm::LoopVectorizeResult::MadeAnyChange</a></div><div class="ttdeci">bool MadeAnyChange</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00152">LoopVectorize.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_adfb61ffe25c950c75c86310245b3ef39"><div class="ttname"><a href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02889">Instructions.h:2889</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_af593134e27871d44a016de05492a4f41"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#af593134e27871d44a016de05492a4f41">llvm::LoopVectorizationLegality::isUniformMemOp</a></div><div class="ttdeci">bool isUniformMemOp(Instruction &amp;I) const</div><div class="ttdoc">A uniform memory op is a load or store which accesses the same memory location on all lanes.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00469">LoopVectorizationLegality.cpp:469</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af279f7d85885f932c1e7cdc2b77cb4ad"><div class="ttname"><a href="classllvm_1_1Instruction.html#af279f7d85885f932c1e7cdc2b77cb4ad">llvm::Instruction::getOpcodeName</a></div><div class="ttdeci">const char * getOpcodeName() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00170">Instruction.h:170</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00188">LoopInfo.h:188</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage_html_a0ae3b197ca92417681a2865b605e56a9"><div class="ttname"><a href="structllvm_1_1LoopVectorizationCostModel_1_1RegisterUsage.html#a0ae3b197ca92417681a2865b605e56a9">llvm::LoopVectorizationCostModel::RegisterUsage::MaxLocalUsers</a></div><div class="ttdeci">SmallMapVector&lt; unsigned, unsigned, 4 &gt; MaxLocalUsers</div><div class="ttdoc">Holds the maximum number of concurrent live intervals in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01238">LoopVectorize.cpp:1238</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a6ec74a5afe1cfb93444b9f8988ed4c12"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6ec74a5afe1cfb93444b9f8988ed4c12">llvm::EpilogueLoopVectorizationInfo::EpilogueUF</a></div><div class="ttdeci">unsigned EpilogueUF</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00775">LoopVectorize.cpp:775</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a95f4b9ff2de954cd083d6f251ecb5826"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a95f4b9ff2de954cd083d6f251ecb5826">llvm::RecurrenceDescriptor::getRecurrenceIdentity</a></div><div class="ttdeci">Value * getRecurrenceIdentity(RecurKind K, Type *Tp, FastMathFlags FMF) const</div><div class="ttdoc">Returns identity corresponding to the RecurrenceKind.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8cpp_source.html#l01081">IVDescriptors.cpp:1081</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac9542ee3a689ae9574b7807c96107d89"><div class="ttname"><a href="classllvm_1_1Type.html#ac9542ee3a689ae9574b7807c96107d89">llvm::Type::isTokenTy</a></div><div class="ttdeci">bool isTokenTy() const</div><div class="ttdoc">Return true if this is 'token'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00219">Type.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a05d5616e1422394b4d350c008b0cc5e0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a05d5616e1422394b4d350c008b0cc5e0">llvm::FunctionType::param_begin</a></div><div class="ttdeci">param_iterator param_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00128">DerivedTypes.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_aeebda6b0288bea7cd706111624ca73f6"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#aeebda6b0288bea7cd706111624ca73f6">llvm::LoopBlocksDFS::endRPO</a></div><div class="ttdeci">RPOIterator endRPO() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00140">LoopIterator.h:140</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleavedAccessInfo_html"><div class="ttname"><a href="classllvm_1_1InterleavedAccessInfo.html">llvm::InterleavedAccessInfo</a></div><div class="ttdoc">Drive the analysis of interleaved memory accesses in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00780">VectorUtils.h:780</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="anamespacellvm_html_aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb"><div class="ttname"><a href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">llvm::PGSOQueryType::IRPass</a></div><div class="ttdeci">@ IRPass</div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a20ecacbd54e401685d798d86161af6cf"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a20ecacbd54e401685d798d86161af6cf">llvm::LoopVectorizeHints::getForce</a></div><div class="ttdeci">enum ForceKind getForce() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00154">LoopVectorizationLegality.h:154</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4c2438a07fc002678d8d1736e72b2e6b"><div class="ttname"><a href="namespacellvm.html#a4c2438a07fc002678d8d1736e72b2e6b">llvm::vp_depth_first_deep</a></div><div class="ttdeci">iterator_range&lt; df_iterator&lt; VPBlockDeepTraversalWrapper&lt; VPBlockBase * &gt; &gt; &gt; vp_depth_first_deep(VPBlockBase *G)</div><div class="ttdoc">Returns an iterator range to traverse the graph starting at G in depth-first order while traversing t...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanCFG_8h_source.html#l00225">VPlanCFG.h:225</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a7d40593a66085dda7ff8dae1f69f5e5d"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a7d40593a66085dda7ff8dae1f69f5e5d">llvm::VPlanTransforms::optimizeInductions</a></div><div class="ttdeci">static void optimizeInductions(VPlan &amp;Plan, ScalarEvolution &amp;SE)</div><div class="ttdoc">If any user of a VPWidenIntOrFpInductionRecipe needs scalar values, provide them by building scalar s...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00426">VPlanTransforms.cpp:426</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPValue_html_abaad22a81f7fa4ce5b60ec619ac14c37"><div class="ttname"><a href="classllvm_1_1VPValue.html#abaad22a81f7fa4ce5b60ec619ac14c37">llvm::VPValue::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(VPValue *New)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l01001">VPlan.cpp:1001</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aff5a70644f05b7731348861016ff2af1"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aff5a70644f05b7731348861016ff2af1">llvm::TargetTransformInfo::isLegalMaskedLoad</a></div><div class="ttdeci">bool isLegalMaskedLoad(Type *DataType, Align Alignment) const</div><div class="ttdoc">Return true if the target supports masked load.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00405">TargetTransformInfo.cpp:405</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a89e9d5a5838c63159df1aed56f600ef1"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a89e9d5a5838c63159df1aed56f600ef1">llvm::RecurrenceDescriptor::getRecurrenceKind</a></div><div class="ttdeci">RecurKind getRecurrenceKind() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00198">IVDescriptors.h:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReductionRecipe_html_ac66885d3ce04a263a03746461eac12b1"><div class="ttname"><a href="classllvm_1_1VPReductionRecipe.html#ac66885d3ce04a263a03746461eac12b1">llvm::VPReductionRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate the reduction in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09532">LoopVectorize.cpp:9532</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a4ef03b8373b1c532fec839db60118ff5"><div class="ttname"><a href="LoopVectorize_8cpp.html#a4ef03b8373b1c532fec839db60118ff5">MaxNestedScalarReductionIC</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxNestedScalarReductionIC(&quot;max-nested-scalar-reduction-interleave&quot;, cl::init(2), cl::Hidden, cl::desc(&quot;The maximum interleave count to use when interleaving a scalar &quot; &quot;reduction in a nested loop.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a72516971c5734dc0f7546e64affca425"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00372">BasicBlock.h:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a0ab984ebf7756adea3f3dc454d7bc96a"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a0ab984ebf7756adea3f3dc454d7bc96a">llvm::LoopVectorizationCostModel::useActiveLaneMaskForControlFlow</a></div><div class="ttdeci">bool useActiveLaneMaskForControlFlow() const</div><div class="ttdoc">Returns true if were tail-folding and want to use the active lane mask for vector loop control flow.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01566">LoopVectorize.cpp:1566</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html_aa3b241b35b0039b413faf1ef4e873eb7"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#aa3b241b35b0039b413faf1ef4e873eb7">llvm::ConstantVector::getSplat</a></div><div class="ttdeci">static Constant * getSplat(ElementCount EC, Constant *Elt)</div><div class="ttdoc">Return a ConstantVector with the specified constant in each element.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01399">Constants.cpp:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_afa922043d31aa2d3410fe0be8791b795"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#afa922043d31aa2d3410fe0be8791b795">llvm::IRBuilderBase::CreateMaskedGather</a></div><div class="ttdeci">CallInst * CreateMaskedGather(Type *Ty, Value *Ptrs, Align Alignment, Value *Mask=nullptr, Value *PassThru=nullptr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Create a call to Masked Gather intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00642">IRBuilder.cpp:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00375">Value.cpp:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_a70641c67b5df6170d455a040508fc2f3"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#a70641c67b5df6170d455a040508fc2f3">llvm::VPRecipeBuilder::createEdgeMask</a></div><div class="ttdeci">VPValue * createEdgeMask(BasicBlock *Src, BasicBlock *Dst, VPlan &amp;Plan)</div><div class="ttdoc">A helper function that computes the predicate of the edge between SRC and DST.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08077">LoopVectorize.cpp:8077</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPValue_html"><div class="ttname"><a href="classllvm_1_1VPValue.html">llvm::VPValue</a></div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00044">VPlanValue.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html_a520bdf57dfe3e73abb53d482893f0a27"><div class="ttname"><a href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">llvm::raw_ostream::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00185">raw_ostream.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1Option_html_a2dc75fafb68e7669e776e19da7857cdf"><div class="ttname"><a href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">llvm::cl::Option::getNumOccurrences</a></div><div class="ttdeci">int getNumOccurrences() const</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00401">CommandLine.h:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopUnroller_html_a1b8e7c1c617e1c5286e2912cdb118401"><div class="ttname"><a href="classllvm_1_1InnerLoopUnroller.html#a1b8e7c1c617e1c5286e2912cdb118401">llvm::InnerLoopUnroller::InnerLoopUnroller</a></div><div class="ttdeci">InnerLoopUnroller(Loop *OrigLoop, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, DominatorTree *DT, const TargetLibraryInfo *TLI, const TargetTransformInfo *TTI, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, unsigned UnrollFactor, LoopVectorizationLegality *LVL, LoopVectorizationCostModel *CM, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, GeneratedRTChecks &amp;Check)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00751">LoopVectorize.cpp:751</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a08416fb970e8c177c7d78452d927c606"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a08416fb970e8c177c7d78452d927c606">llvm::RecurrenceDescriptor::isFMulAddIntrinsic</a></div><div class="ttdeci">static bool isFMulAddIntrinsic(Instruction *I)</div><div class="ttdoc">Returns true if the instruction is a call to the llvm.fmuladd intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00268">IVDescriptors.h:268</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64a030aa94015bd11d183b897ddb541e4e3"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a030aa94015bd11d183b897ddb541e4e3">llvm::TargetTransformInfo::CastContextHint::Reversed</a></div><div class="ttdeci">@ Reversed</div><div class="ttdoc">The cast is used with a reversed load/store.</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a04394f31b3d57c89fd8211783a12736d"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a04394f31b3d57c89fd8211783a12736d">llvm::TargetTransformInfo::getVScaleForTuning</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getVScaleForTuning() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00670">TargetTransformInfo.cpp:670</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPDerivedIVRecipe_html_a0f37fe11b57d14686c7ca5e7a3846174"><div class="ttname"><a href="classllvm_1_1VPDerivedIVRecipe.html#a0f37fe11b57d14686c7ca5e7a3846174">llvm::VPDerivedIVRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate the transformed value of the induction at offset StartValue (1.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09486">LoopVectorize.cpp:9486</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a5b3c2afaad5594cd0eedd58a78a91baf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a5b3c2afaad5594cd0eedd58a78a91baf">llvm::AArch64CC::PL</a></div><div class="ttdeci">@ PL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00260">AArch64BaseInfo.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpander_html_aab1d5fe8452ef0d6995904efe86ef9ff"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#aab1d5fe8452ef0d6995904efe86ef9ff">llvm::SCEVExpander::isInsertedInstruction</a></div><div class="ttdeci">bool isInsertedInstruction(Instruction *I) const</div><div class="ttdoc">Return true if the specified instruction was inserted by the code rewriter.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00371">ScalarEvolutionExpander.h:371</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a44ff684e8c8fa502d0238de8907acfd3"><div class="ttname"><a href="classllvm_1_1VPlan.html#a44ff684e8c8fa502d0238de8907acfd3">llvm::VPlan::clearLiveOuts</a></div><div class="ttdeci">void clearLiveOuts()</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02382">VPlan.h:2382</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html_a7e174506b52ad46ea1f746a7f727d999"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">llvm::CodeMetrics::collectEphemeralValues</a></div><div class="ttdeci">static void collectEphemeralValues(const Loop *L, AssumptionCache *AC, SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues)</div><div class="ttdoc">Collect a loop's ephemeral values (those used only by an assume or similar intrinsics in the loop).</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00070">CodeMetrics.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolutionWrapperPass_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolutionWrapperPass.html">llvm::ScalarEvolutionWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02249">ScalarEvolution.h:2249</a></div></div>
<div class="ttc" id="aDebugLoc_8h_html"><div class="ttname"><a href="DebugLoc_8h.html">DebugLoc.h</a></div></div>
<div class="ttc" id="aARCInstrInfo_8cpp_html_a5d6e37f3d036496321824378223ad718a1673ee57164ca23d9545b629b55e08d2"><div class="ttname"><a href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a1673ee57164ca23d9545b629b55e08d2">PostInc</a></div><div class="ttdeci">@ PostInc</div><div class="ttdef"><b>Definition:</b> <a href="ARCInstrInfo_8cpp_source.html#l00034">ARCInstrInfo.cpp:34</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6ef0a19ea2267182eb0da4f6e191b59b"><div class="ttname"><a href="namespacellvm.html#a6ef0a19ea2267182eb0da4f6e191b59b">llvm::EnableVPlanNativePath</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableVPlanNativePath(&quot;enable-vplan-native-path&quot;, cl::Hidden, cl::desc(&quot;Enable VPlan-native vectorization path with &quot; &quot;support for outer loop vectorization.&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00051">VPlan.cpp:51</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_1_1CFGState_html_a36947e5b1b6b334794cd2cdaa2fcede1"><div class="ttname"><a href="structllvm_1_1VPTransformState_1_1CFGState.html#a36947e5b1b6b334794cd2cdaa2fcede1">llvm::VPTransformState::CFGState::ExitBB</a></div><div class="ttdeci">BasicBlock * ExitBB</div><div class="ttdoc">The last IR BasicBlock in the output IR.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00340">VPlan.h:340</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenCanonicalIVRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenCanonicalIVRecipe.html">llvm::VPWidenCanonicalIVRecipe</a></div><div class="ttdoc">A Recipe for widening the canonical induction variable of the vector loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01836">VPlan.h:1836</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopAndEpilogueVectorizer_html_a823c6809d079aeeab3510ee8287c75bf"><div class="ttname"><a href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#a823c6809d079aeeab3510ee8287c75bf">llvm::InnerLoopAndEpilogueVectorizer::createEpilogueVectorizedLoopSkeleton</a></div><div class="ttdeci">virtual std::pair&lt; BasicBlock *, Value * &gt; createEpilogueVectorizedLoopSkeleton()=0</div><div class="ttdoc">The interface for creating a vectorized skeleton using one of two different strategies,...</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afc70e919c88c86159cc94cea29b6c210"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">llvm::BasicBlock::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this basic block belongs to, or nullptr if the function does no...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00146">BasicBlock.cpp:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a2881c226e1c102190d54c3b664330aba"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">llvm::DominatorTreeBase::changeImmediateDominator</a></div><div class="ttdeci">void changeImmediateDominator(DomTreeNodeBase&lt; NodeT &gt; *N, DomTreeNodeBase&lt; NodeT &gt; *NewIDom)</div><div class="ttdoc">changeImmediateDominator - This method is used to update the dominator tree information when a node's...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00672">GenericDomTree.h:672</a></div></div>
<div class="ttc" id="aVPlan_8h_html"><div class="ttname"><a href="VPlan_8h.html">VPlan.h</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a560142fc3cf3a8e07fa9765f94bc7a4e"><div class="ttname"><a href="LoopVectorize_8cpp.html#a560142fc3cf3a8e07fa9765f94bc7a4e">ForceTargetNumVectorRegs</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ForceTargetNumVectorRegs(&quot;force-target-num-vector-regs&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;A flag that overrides the target's number of vector registers.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a4384debcd154f44445005e6866afba4a"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a4384debcd154f44445005e6866afba4a">llvm::LoopVectorizationCostModel::TheFunction</a></div><div class="ttdeci">const Function * TheFunction</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01867">LoopVectorize.cpp:1867</a></div></div>
<div class="ttc" id="astructllvm_1_1VFShape_html"><div class="ttname"><a href="structllvm_1_1VFShape.html">llvm::VFShape</a></div><div class="ttdoc">Contains the information about the kind of vectorization available.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00082">VectorUtils.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_adf6f53d7652b471c995b7d10f3dd2729"><div class="ttname"><a href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const</div><div class="ttdoc">If getExitingBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00048">LoopInfoImpl.h:48</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a37397a91646330bb54d00429975ff770"><div class="ttname"><a href="classllvm_1_1VPlan.html#a37397a91646330bb54d00429975ff770">llvm::VPlan::removeLiveOut</a></div><div class="ttdeci">void removeLiveOut(PHINode *PN)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02388">VPlan.h:2388</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html">llvm::InnerLoopVectorizer</a></div><div class="ttdoc">InnerLoopVectorizer vectorizes loops which contain only one basic block to a specified vectorization ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00447">LoopVectorize.cpp:447</a></div></div>
<div class="ttc" id="anamespacePreferPredicateTy_html_ab00d54c73f16daa1e1f9f65f77db0cdaa5e6f0abe1c426939c61d8924cfa02e5a"><div class="ttname"><a href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa5e6f0abe1c426939c61d8924cfa02e5a">PreferPredicateTy::PredicateOrDontVectorize</a></div><div class="ttdeci">@ PredicateOrDontVectorize</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00212">LoopVectorize.cpp:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a46ef6115027606b67adcf4d28f3dac17"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">const Instruction * getFirstNonPHI() const</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00208">BasicBlock.cpp:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">llvm::TargetTransformInfo::RGK_FixedWidthVector</a></div><div class="ttdeci">@ RGK_FixedWidthVector</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00988">TargetTransformInfo.h:988</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_a776b9e4e25dda6aff28a94e69a7533e6"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#a776b9e4e25dda6aff28a94e69a7533e6">llvm::InterleaveGroup::isReverse</a></div><div class="ttdeci">bool isReverse() const</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00653">VectorUtils.h:653</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html_a4a7f4b8433e9a788149ffd94a0a07051"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html#a4a7f4b8433e9a788149ffd94a0a07051">llvm::VPBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01976">VPlan.h:1976</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html_af9a870d5df50fe0133a410b7c9114c80"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">llvm::FixedVectorType::get</a></div><div class="ttdeci">static FixedVectorType * get(Type *ElementType, unsigned NumElts)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00686">Type.cpp:686</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1OperandValueInfo_html_a930b0b2be537d928348aa0946f61dcd6"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html#a930b0b2be537d928348aa0946f61dcd6">llvm::TargetTransformInfo::OperandValueInfo::Kind</a></div><div class="ttdeci">OperandValueKind Kind</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00948">TargetTransformInfo.h:948</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_ab945330dc19d757dfe310145636b370c"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#ab945330dc19d757dfe310145636b370c">llvm::InterleaveGroup::getMember</a></div><div class="ttdeci">InstTy * getMember(uint32_t Index) const</div><div class="ttdoc">Get the member with the given index Index.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00708">VectorUtils.h:708</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c3c18bffdc25d969233c5448bdfe7eb"><div class="ttname"><a href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">llvm::AddressSpace</a></div><div class="ttdeci">AddressSpace</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXBaseInfo_8h_source.html#l00021">NVPTXBaseInfo.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaa7128a88e182950e0881573bb55f079"><div class="ttname"><a href="namespacellvm.html#aaa7128a88e182950e0881573bb55f079">llvm::addRuntimeChecks</a></div><div class="ttdeci">Value * addRuntimeChecks(Instruction *Loc, Loop *TheLoop, const SmallVectorImpl&lt; RuntimePointerCheck &gt; &amp;PointerChecks, SCEVExpander &amp;Expander)</div><div class="ttdoc">Add code that checks at runtime if the accessed arrays in PointerChecks overlap.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01613">LoopUtils.cpp:1613</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f386d38a2c6c22a343243e9e48f7532"><div class="ttname"><a href="namespacellvm.html#a7f386d38a2c6c22a343243e9e48f7532">llvm::EnableLoopVectorization</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableLoopVectorization</div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a5e719da4709193fd5b4632da4bc69795"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a5e719da4709193fd5b4632da4bc69795">llvm::InnerLoopVectorizer::createVectorLoopSkeleton</a></div><div class="ttdeci">void createVectorLoopSkeleton(StringRef Prefix)</div><div class="ttdoc">Emit basic blocks (prefixed with Prefix) for the iteration check, vector loop preheader,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03114">LoopVectorize.cpp:3114</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPUser_html_a5b21038d9b822b20c59e7ce5b12582e1"><div class="ttname"><a href="classllvm_1_1VPUser.html#a5b21038d9b822b20c59e7ce5b12582e1">llvm::VPUser::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00250">VPlanValue.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a5f16c1f526ec46c231d2bbab4aeb8253"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a5f16c1f526ec46c231d2bbab4aeb8253">llvm::InnerLoopVectorizer::completeLoopSkeleton</a></div><div class="ttdeci">BasicBlock * completeLoopSkeleton()</div><div class="ttdoc">Complete the loop skeleton by adding debug MDs, creating appropriate conditional branches in the midd...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03236">LoopVectorize.cpp:3236</a></div></div>
<div class="ttc" id="aLoopIterator_8h_html"><div class="ttname"><a href="LoopIterator_8h.html">LoopIterator.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00097">DerivedTypes.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html">llvm::LoopVectorizationPlanner</a></div><div class="ttdoc">Planner drives the vectorization process after having passed Legality checks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00253">LoopVectorizationPlanner.h:253</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerMainLoop_html_aeeb47f904372b9e25b9f7ba606158b25"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerMainLoop.html#aeeb47f904372b9e25b9f7ba606158b25">llvm::EpilogueVectorizerMainLoop::emitIterationCountCheck</a></div><div class="ttdeci">BasicBlock * emitIterationCountCheck(BasicBlock *Bypass, bool ForEpilogue)</div><div class="ttdoc">Emits an iteration count bypass check once for the main loop (when ForEpilogue is false) and once for...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07834">LoopVectorize.cpp:7834</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicCostAttributes_html"><div class="ttname"><a href="classllvm_1_1IntrinsicCostAttributes.html">llvm::IntrinsicCostAttributes</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00119">TargetTransformInfo.h:119</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="astructllvm_1_1VectorizationFactor_html_a048d568675a5cc69c3fb85206882316d"><div class="ttname"><a href="structllvm_1_1VectorizationFactor.html#a048d568675a5cc69c3fb85206882316d">llvm::VectorizationFactor::Cost</a></div><div class="ttdeci">InstructionCost Cost</div><div class="ttdoc">Cost of the loop with that width.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00193">LoopVectorizationPlanner.h:193</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ab9a873b7d011645b5b649c65f4be21ec"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ab9a873b7d011645b5b649c65f4be21ec">llvm::IRBuilderBase::CreateURem</a></div><div class="ttdeci">Value * CreateURem(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01319">IRBuilder.h:1319</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRegionBlock_html"><div class="ttname"><a href="classllvm_1_1VPRegionBlock.html">llvm::VPRegionBlock</a></div><div class="ttdoc">VPRegionBlock represents a collection of VPBasicBlocks and VPRegionBlocks which form a Single-Entry-S...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02069">VPlan.h:2069</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfoManager_html_a806f5100fd6d2d12ff0c7ad0ac6928e0"><div class="ttname"><a href="classllvm_1_1LoopAccessInfoManager.html#a806f5100fd6d2d12ff0c7ad0ac6928e0">llvm::LoopAccessInfoManager::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00787">LoopAccessAnalysis.h:787</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a031ea73feba9db1ce058b8ebbd1c4203"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a031ea73feba9db1ce058b8ebbd1c4203">llvm::LoopVectorizationCostModel::interleavedAccessCanBeWidened</a></div><div class="ttdeci">bool interleavedAccessCanBeWidened(Instruction *I, ElementCount VF)</div><div class="ttdoc">Returns true if I is a memory instruction in an interleaved-group of memory accesses that can be vect...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04551">LoopVectorize.cpp:4551</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_af7e8a35e9864ca6848ceeac1a326df93"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#af7e8a35e9864ca6848ceeac1a326df93">llvm::EpilogueLoopVectorizationInfo::EpilogueIterationCountCheck</a></div><div class="ttdeci">BasicBlock * EpilogueIterationCountCheck</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00777">LoopVectorize.cpp:777</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ac2ea855ca5fe5b7adb059e3305b9c755"><div class="ttname"><a href="LoopVectorize_8cpp.html#ac2ea855ca5fe5b7adb059e3305b9c755">EnableInterleavedMemAccesses</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableInterleavedMemAccesses(&quot;enable-interleaved-mem-accesses&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Enable vectorization on interleaved memory accesses in a loop&quot;))</div></div>
<div class="ttc" id="aMIRNamerPass_8cpp_html_a05e4be4ec3e2c3587dda0e376bb6822c"><div class="ttname"><a href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a></div><div class="ttdeci">mir Rename Register Operands</div><div class="ttdef"><b>Definition:</b> <a href="MIRNamerPass_8cpp_source.html#l00074">MIRNamerPass.cpp:74</a></div></div>
<div class="ttc" id="astructllvm_1_1VectorizationFactor_html_a76f716c04dfa813b98e1c112bc642d34"><div class="ttname"><a href="structllvm_1_1VectorizationFactor.html#a76f716c04dfa813b98e1c112bc642d34">llvm::VectorizationFactor::ScalarCost</a></div><div class="ttdeci">InstructionCost ScalarCost</div><div class="ttdoc">Cost of the scalar loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00196">LoopVectorizationPlanner.h:196</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad78da75bd1f157e72100f97d1ecdc756"><div class="ttname"><a href="namespacellvm.html#ad78da75bd1f157e72100f97d1ecdc756">llvm::all_equal</a></div><div class="ttdeci">bool all_equal(std::initializer_list&lt; T &gt; Values)</div><div class="ttdoc">Returns true if all Values in the initializer lists are equal or the list.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01986">STLExtras.h:1986</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdeci">@ IE</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00027">ARMBaseInfo.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a30bd18ac905eacf3601bc6a553a9ff49"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">llvm::ScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdoc">Return a SCEV expression for the full generality of the specified expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04534">ScalarEvolution.cpp:4534</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aca414c43a6d42c13998208463637a20d"><div class="ttname"><a href="classllvm_1_1PHINode.html#aca414c43a6d42c13998208463637a20d">llvm::PHINode::getIncomingValueNumForOperand</a></div><div class="ttdeci">static unsigned getIncomingValueNumForOperand(unsigned i)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02808">Instructions.h:2808</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a9e3a8d42fb905a26e3d71447d754d26e"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a9e3a8d42fb905a26e3d71447d754d26e">llvm::IRBuilderBase::CreateZExt</a></div><div class="ttdeci">Value * CreateZExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01916">IRBuilder.h:1916</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_aac206f570f599e8832d28a15bddb12d5"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#aac206f570f599e8832d28a15bddb12d5">llvm::InterleaveGroup::getInsertPos</a></div><div class="ttdeci">InstTy * getInsertPos() const</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00724">VectorUtils.h:724</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReplicateRecipe_html_a2ed5b7b284097278ee4e550897b1f057"><div class="ttname"><a href="classllvm_1_1VPReplicateRecipe.html#a2ed5b7b284097278ee4e550897b1f057">llvm::VPReplicateRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate replicas of the desired Ingredient.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09581">LoopVectorize.cpp:9581</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a3dfa67eb67a32ca048b4af8fae5c898d"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a3dfa67eb67a32ca048b4af8fae5c898d">llvm::LoopVectorizationCostModel::TTI</a></div><div class="ttdeci">const TargetTransformInfo &amp; TTI</div><div class="ttdoc">Vector target information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01853">LoopVectorize.cpp:1853</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f">llvm::TargetTransformInfo::SK_Reverse</a></div><div class="ttdeci">@ SK_Reverse</div><div class="ttdoc">Reverse the order of the vector.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00912">TargetTransformInfo.h:912</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_abec0c616087c002528fcf80c6583eadd"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#abec0c616087c002528fcf80c6583eadd">llvm::ScalarEvolution::getSmallConstantTripCount</a></div><div class="ttdeci">unsigned getSmallConstantTripCount(const Loop *L)</div><div class="ttdoc">Returns the exact trip count of the loop if we can compute it, and the result is a small constant.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08105">ScalarEvolution.cpp:8105</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a3c56b0c7adc51174cf6babd20ba0725b"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a3c56b0c7adc51174cf6babd20ba0725b">llvm::VPTransformState::setDebugLocFromInst</a></div><div class="ttdeci">void setDebugLocFromInst(const Value *V)</div><div class="ttdoc">Set the debug location in the builder using the debug location in V.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00260">VPlan.cpp:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a6cbc0453586a25c057a32161b38b8ce4"><div class="ttname"><a href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">llvm::MDNode::getOperand</a></div><div class="ttdeci">const MDOperand &amp; getOperand(unsigned I) const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01291">Metadata.h:1291</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a3cb9f282c6b4cec07b020e0639fba681"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a3cb9f282c6b4cec07b020e0639fba681">llvm::TargetTransformInfo::preferPredicateOverEpilogue</a></div><div class="ttdeci">bool preferPredicateOverEpilogue(Loop *L, LoopInfo *LI, ScalarEvolution &amp;SE, AssumptionCache &amp;AC, TargetLibraryInfo *TLI, DominatorTree *DT, LoopVectorizationLegality *LVL, InterleavedAccessInfo *IAI) const</div><div class="ttdoc">Query the target whether it would be prefered to create a predicated vector loop, which can avoid the...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00308">TargetTransformInfo.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html">llvm::LoopBlocksDFS</a></div><div class="ttdoc">Store the result of a depth first search within basic blocks contained by a single loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00097">LoopIterator.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a071e25c5c6eae5299b1cdc3350c6d55c"><div class="ttname"><a href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">llvm::VectorType::isValidElementType</a></div><div class="ttdeci">static bool isValidElementType(Type *ElemTy)</div><div class="ttdoc">Return true if the specified type is valid as a element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00677">Type.cpp:677</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a402fb219059e7a914ae0541fbea17df5"><div class="ttname"><a href="LoopVectorize_8cpp.html#a402fb219059e7a914ae0541fbea17df5">areRuntimeChecksProfitable</a></div><div class="ttdeci">static bool areRuntimeChecksProfitable(GeneratedRTChecks &amp;Checks, VectorizationFactor &amp;VF, std::optional&lt; unsigned &gt; VScale, Loop *L, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l10002">LoopVectorize.cpp:10002</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a855906f5a6f429db8978680fd6de7886"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a855906f5a6f429db8978680fd6de7886">llvm::RecurrenceDescriptor::isSigned</a></div><div class="ttdeci">bool isSigned() const</div><div class="ttdoc">Returns true if all source operands of the recurrence are SExtInsts.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00257">IVDescriptors.h:257</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdoc">Base class of all SIMD vector types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00389">DerivedTypes.h:389</a></div></div>
<div class="ttc" id="astructllvm_1_1SmallMapVector_html"><div class="ttname"><a href="structllvm_1_1SmallMapVector.html">llvm::SmallMapVector</a></div><div class="ttdoc">A MapVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00233">MapVector.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_a226f495f2497f639b80d21ccfe196854"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#a226f495f2497f639b80d21ccfe196854">llvm::InductionDescriptor::getStartValue</a></div><div class="ttdeci">Value * getStartValue() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00320">IVDescriptors.h:320</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1FastMathFlagGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">llvm::IRBuilderBase::FastMathFlagGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00383">IRBuilder.h:383</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">llvm::tgtok::In</a></div><div class="ttdeci">@ In</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00051">TGLexer.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a2a688f3783d789aabf7bd9a938ed0c1f"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a2a688f3783d789aabf7bd9a938ed0c1f">llvm::TargetTransformInfo::getPreferredTailFoldingStyle</a></div><div class="ttdeci">TailFoldingStyle getPreferredTailFoldingStyle() const</div><div class="ttdoc">Query the target what the preferred style of tail folding is.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00315">TargetTransformInfo.cpp:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64a960b44c579bc2f6818d2daaf9e4c16f0"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a960b44c579bc2f6818d2daaf9e4c16f0">llvm::TargetTransformInfo::CastContextHint::Normal</a></div><div class="ttdeci">@ Normal</div><div class="ttdoc">The cast is used with a normal load/store.</div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_a5bb08a7480808cec4d5b9e1d0a3012c6"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#a5bb08a7480808cec4d5b9e1d0a3012c6">llvm::InterleaveGroup::getIndex</a></div><div class="ttdeci">uint32_t getIndex(const InstTy *Instr) const</div><div class="ttdoc">Get the index for the given member.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00715">VectorUtils.h:715</a></div></div>
<div class="ttc" id="aVectorUtils_8h_html"><div class="ttname"><a href="VectorUtils_8h.html">VectorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a0037e4c509dde63e30ae3e0287c5ee69"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a0037e4c509dde63e30ae3e0287c5ee69">llvm::IRBuilderBase::CreateFAdd</a></div><div class="ttdeci">Value * CreateFAdd(Value *L, Value *R, const Twine &amp;Name=&quot;&quot;, MDNode *FPMD=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01448">IRBuilder.h:1448</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_aba357162dc28acb3a399731e1e397614"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#aba357162dc28acb3a399731e1e397614">llvm::LoopVectorizationCostModel::AC</a></div><div class="ttdeci">AssumptionCache * AC</div><div class="ttdoc">Assumption cache.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01862">LoopVectorize.cpp:1862</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_ae75229fc5b4c6de082ff2adaa9817f16"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#ae75229fc5b4c6de082ff2adaa9817f16">llvm::LoopVectorizationLegality::hasStride</a></div><div class="ttdeci">bool hasStride(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00374">LoopVectorizationLegality.h:374</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a7a98f0c17229446d76997f158d896aad"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a7a98f0c17229446d76997f158d896aad">llvm::LoopVectorizationCostModel::InterleaveInfo</a></div><div class="ttdeci">InterleavedAccessInfo &amp; InterleaveInfo</div><div class="ttdoc">The interleave access information contains groups of interleaved accesses with the same stride and cl...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01874">LoopVectorize.cpp:1874</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a909bc9150f12c6ee1f276b2bb58508ff"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a909bc9150f12c6ee1f276b2bb58508ff">llvm::InnerLoopVectorizer::DT</a></div><div class="ttdeci">DominatorTree * DT</div><div class="ttdoc">Dominator Tree.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00661">LoopVectorize.cpp:661</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdoc">This class represents an analyzed expression in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00075">ScalarEvolution.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">llvm::RISCVFenceField::O</a></div><div class="ttdeci">@ O</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00277">RISCVBaseInfo.h:277</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a0eff4a8bccb143ae91e197e6a59d4692"><div class="ttname"><a href="LoopVectorize_8cpp.html#a0eff4a8bccb143ae91e197e6a59d4692">LV_NAME</a></div><div class="ttdeci">#define LV_NAME</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00156">LoopVectorize.cpp:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a06d64f226fabd94d694d6abd82e3c7b3"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">llvm::IRBuilderBase::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02008">IRBuilder.h:2008</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PPC_html_a14028f7fe73a11dabc6583510cc0a355"><div class="ttname"><a href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">llvm::PPC::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">Predicate - These are &quot;(BI &lt;&lt; 5) | BO&quot; for various predicates.</div><div class="ttdef"><b>Definition:</b> <a href="PPCPredicates_8h_source.html#l00026">PPCPredicates.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_ab8b683081a6c1fd0558fac2fcaa21ccb"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#ab8b683081a6c1fd0558fac2fcaa21ccb">llvm::LoopVectorizationLegality::getConditionalAssumes</a></div><div class="ttdeci">const SmallPtrSetImpl&lt; Instruction * &gt; &amp; getConditionalAssumes() const</div><div class="ttdoc">Returns all assume calls in predicated blocks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00387">LoopVectorizationLegality.h:387</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_a503ed6f76fcdca50b3c8b60fa011b8c9"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#a503ed6f76fcdca50b3c8b60fa011b8c9">llvm::LoopAccessInfo::getSymbolicStrides</a></div><div class="ttdeci">const ValueToValueMap &amp; getSymbolicStrides() const</div><div class="ttdoc">If an access has a symbolic strides, this maps the pointer value to the stride symbol.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00615">LoopAccessAnalysis.h:615</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1a14592c2ae220a319c7c85ee545c96f"><div class="ttname"><a href="namespacellvm.html#a1a14592c2ae220a319c7c85ee545c96f">llvm::divideCeil</a></div><div class="ttdeci">uint64_t divideCeil(uint64_t Numerator, uint64_t Denominator)</div><div class="ttdoc">Returns the integer ceil(Numerator / Denominator).</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00522">MathExtras.h:522</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html">llvm::LoopVectorizeHints</a></div><div class="ttdoc">Utility class for getting and setting loop vectorizer hints in the form of loop metadata.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00061">LoopVectorizationLegality.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a81955f0baa44d5e0e564520ceed9c789"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a81955f0baa44d5e0e564520ceed9c789">llvm::LoopVectorizationLegality::isUniform</a></div><div class="ttdeci">bool isUniform(Value *V) const</div><div class="ttdoc">Returns true if the value V is uniform within the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00465">LoopVectorizationLegality.cpp:465</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerMainLoop_html_a87a0c8bda4e9e23e896e46d0a2208c17"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerMainLoop.html#a87a0c8bda4e9e23e896e46d0a2208c17">llvm::EpilogueVectorizerMainLoop::printDebugTracesAtEnd</a></div><div class="ttdeci">void printDebugTracesAtEnd() override</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07826">LoopVectorize.cpp:7826</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a2a98f19750ba941ce791b75ca6d77e48"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a2a98f19750ba941ce791b75ca6d77e48">llvm::SmallSet::count</a></div><div class="ttdeci">size_type count(const T &amp;V) const</div><div class="ttdoc">count - Return 1 if the element is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00164">SmallSet.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a4e5c1b91bf5e2860398e3fa35c96b5af"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a4e5c1b91bf5e2860398e3fa35c96b5af">llvm::IRBuilderBase::GetInsertPoint</a></div><div class="ttdeci">BasicBlock::iterator GetInsertPoint() const</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00175">IRBuilder.h:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a07515d0542b797be2d1c87d4359ff8f6"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a07515d0542b797be2d1c87d4359ff8f6">llvm::LoopVectorizationCostModel::canVectorizeReductions</a></div><div class="ttdeci">bool canVectorizeReductions(ElementCount VF) const</div><div class="ttdoc">Returns true if the target machine supports all of the reduction variables found for the given VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01471">LoopVectorize.cpp:1471</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a8fa743aa76b6902028f8a643dfb87171"><div class="ttname"><a href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">llvm::cl::values</a></div><div class="ttdeci">ValuesClass values(OptsTy... Options)</div><div class="ttdoc">Helper to build a ValuesClass by forwarding a variable number of arguments as an initializer list to ...</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00703">CommandLine.h:703</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a91466f7a82e967ed765e6d876415a3b7"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a91466f7a82e967ed765e6d876415a3b7">llvm::LoopVectorizationCostModel::calculateRegisterUsage</a></div><div class="ttdeci">SmallVector&lt; RegisterUsage, 8 &gt; calculateRegisterUsage(ArrayRef&lt; ElementCount &gt; VFs)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05960">LoopVectorize.cpp:5960</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43"><div class="ttname"><a href="namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43">llvm::cl::BOU_UNSET</a></div><div class="ttdeci">@ BOU_UNSET</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00629">CommandLine.h:629</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_a177df4fcdf758fb57ca59102c15d30c3"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#a177df4fcdf758fb57ca59102c15d30c3">llvm::RuntimePointerChecking::Need</a></div><div class="ttdeci">bool Need</div><div class="ttdoc">This flag indicates if we need to add the runtime check.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00480">LoopAccessAnalysis.h:480</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a7ca3b58ad6dc93128afd44fbe61a1174"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">llvm::IRBuilderBase::CreateICmp</a></div><div class="ttdeci">Value * CreateICmp(CmpInst::Predicate P, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02232">IRBuilder.h:2232</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPLane_html_a2855a09c41f64a31ab555a9ab7ec9c5f"><div class="ttname"><a href="classllvm_1_1VPLane.html#a2855a09c41f64a31ab555a9ab7ec9c5f">llvm::VPLane::getAsRuntimeExpr</a></div><div class="ttdeci">Value * getAsRuntimeExpr(IRBuilderBase &amp;Builder, const ElementCount &amp;VF) const</div><div class="ttdoc">Returns an expression describing the lane index that can be used at runtime.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00066">VPlan.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0adc31f61474346e1f42ec58902ee8a48b"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0adc31f61474346e1f42ec58902ee8a48b">llvm::VPInstruction::Not</a></div><div class="ttdeci">@ Not</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00788">VPlan.h:788</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a6b0c3e15c351ba9682837c29b0a141b6"><div class="ttname"><a href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">llvm::MapVector::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Key)</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00148">MapVector.h:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00110">DenseMap.h:110</a></div></div>
<div class="ttc" id="astructllvm_1_1ShouldRunExtraVectorPasses_html"><div class="ttname"><a href="structllvm_1_1ShouldRunExtraVectorPasses.html">llvm::ShouldRunExtraVectorPasses</a></div><div class="ttdoc">A marker to determine if extra passes after loop vectorization should be run.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00084">LoopVectorize.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260a03c0934d38787b1773c050deee484126"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a03c0934d38787b1773c050deee484126">llvm::LoopVectorizationCostModel::CM_Scalarize</a></div><div class="ttdeci">@ CM_Scalarize</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01341">LoopVectorize.cpp:1341</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_af0ced1e23ba4d4a56286b5f17f448ed7"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#af0ced1e23ba4d4a56286b5f17f448ed7">llvm::LoopVectorizationLegality::isMaskRequired</a></div><div class="ttdeci">bool isMaskRequired(const Instruction *I) const</div><div class="ttdoc">Returns true if vector representation of the instruction I requires mask.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00378">LoopVectorizationLegality.h:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a9819226a3ff242635fd99bf22b50bd97"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a9819226a3ff242635fd99bf22b50bd97">llvm::LoopVectorizationCostModel::isInLoopReduction</a></div><div class="ttdeci">bool isInLoopReduction(PHINode *Phi) const</div><div class="ttdoc">Returns true if the Phi is part of an inloop reduction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01589">LoopVectorize.cpp:1589</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a7a7e3f00efc52b3aedc91687d425617b"><div class="ttname"><a href="LoopVectorize_8cpp.html#a7a7e3f00efc52b3aedc91687d425617b">EnableLoadStoreRuntimeInterleave</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableLoadStoreRuntimeInterleave(&quot;enable-loadstore-runtime-interleave&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable runtime interleaving until load/store ports are saturated&quot;))</div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a33ac7704be5bd5455f78caf0b5371012"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a33ac7704be5bd5455f78caf0b5371012">llvm::TargetTransformInfo::isLegalMaskedGather</a></div><div class="ttdeci">bool isLegalMaskedGather(Type *DataType, Align Alignment) const</div><div class="ttdoc">Return true if the target supports masked gather.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00424">TargetTransformInfo.cpp:424</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a8e8f7af4c35e8c6bc6e9a4f0850a7847"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a8e8f7af4c35e8c6bc6e9a4f0850a7847">llvm::TargetTransformInfo::preferPredicatedReductionSelect</a></div><div class="ttdeci">bool preferPredicatedReductionSelect(unsigned Opcode, Type *Ty, ReductionFlags Flags) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01159">TargetTransformInfo.cpp:1159</a></div></div>
<div class="ttc" id="aclassllvm_1_1VFDatabase_html_af9abb14ef675e9dee8dd14bd4dd43aac"><div class="ttname"><a href="classllvm_1_1VFDatabase.html#af9abb14ef675e9dee8dd14bd4dd43aac">llvm::VFDatabase::getMappings</a></div><div class="ttdeci">static SmallVector&lt; VFInfo, 8 &gt; getMappings(const CallInst &amp;CI)</div><div class="ttdoc">Retrieve all the VFInfo instances associated to the CallInst CI.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00265">VectorUtils.h:265</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1a06b1cff93069d7403ea03e6150e386"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">llvm::PatternMatch::m_LogicalOr</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::Or &gt; m_LogicalOr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L || R either in the form of L | R or L ? true : R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02574">PatternMatch.h:2574</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenIntOrFpInductionRecipe_html_a98d8cca54a99e8b64eb406f898565323"><div class="ttname"><a href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html#a98d8cca54a99e8b64eb406f898565323">llvm::VPWidenIntOrFpInductionRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate the vectorized and scalarized versions of the phi node as needed by their users.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09289">LoopVectorize.cpp:9289</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenRecipe.html">llvm::VPWidenRecipe</a></div><div class="ttdoc">VPWidenRecipe is a recipe for producing a copy of vector type its ingredient.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00909">VPlan.h:909</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a7004354fbee1c8cd74ed9001915e1db5"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00408">SmallPtrSet.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_a46f3b431a3121fdf53608a283bf4efec"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#a46f3b431a3121fdf53608a283bf4efec">llvm::InterleaveGroup::getFactor</a></div><div class="ttdeci">uint32_t getFactor() const</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00654">VectorUtils.h:654</a></div></div>
<div class="ttc" id="aclassllvm_1_1Interval_html"><div class="ttname"><a href="classllvm_1_1Interval.html">llvm::Interval</a></div><div class="ttdoc">Interval Class - An Interval is a set of nodes defined such that every node in the interval has all o...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00036">Interval.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea278ca681847fb2bad9707f76d899b231">llvm::LoopVectorizeHints::FK_Enabled</a></div><div class="ttdeci">@ FK_Enabled</div><div class="ttdoc">Forcing enabled.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00111">LoopVectorizationLegality.h:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdoc">Specialize the methods defined in Value, as we know that an instruction can only be used by other ins...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a38000267bdb6bb25b9c33f9fd7053b1d"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a38000267bdb6bb25b9c33f9fd7053b1d">llvm::TargetTransformInfo::getInterleavedMemoryOpCost</a></div><div class="ttdeci">InstructionCost getInterleavedMemoryOpCost(unsigned Opcode, Type *VecTy, unsigned Factor, ArrayRef&lt; unsigned &gt; Indices, Align Alignment, unsigned AddressSpace, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, bool UseMaskForCond=false, bool UseMaskForGaps=false) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00971">TargetTransformInfo.cpp:971</a></div></div>
<div class="ttc" id="aclassllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04813">Instructions.h:4813</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionAnalysis_html"><div class="ttname"><a href="classllvm_1_1AssumptionAnalysis.html">llvm::AssumptionAnalysis</a></div><div class="ttdoc">A function analysis which provides an AssumptionCache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00173">AssumptionCache.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_abf313eff420b7c6c8e322a2e9c53cd90"><div class="ttname"><a href="classllvm_1_1Type.html#abf313eff420b7c6c8e322a2e9c53cd90">llvm::Type::isIntOrPtrTy</a></div><div class="ttdeci">bool isIntOrPtrTy() const</div><div class="ttdoc">Return true if this is an integer type or a pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00237">Type.h:237</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ad8398a35cd187d6a75b460fcf54b5236"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ad8398a35cd187d6a75b460fcf54b5236">llvm::LoopVectorizationCostModel::getDivRemSpeculationCost</a></div><div class="ttdeci">std::pair&lt; InstructionCost, InstructionCost &gt; getDivRemSpeculationCost(Instruction *I, ElementCount VF) const</div><div class="ttdoc">Return the costs for our two available strategies for lowering a div/rem operation which requires spe...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04487">LoopVectorize.cpp:4487</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00173">PassManager.h:173</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1BasicAAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1BasicAAWrapperPass.html">llvm::BasicAAWrapperPass</a></div><div class="ttdoc">Legacy wrapper pass to provide the BasicAAResult object.</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8h_source.html#l00160">BasicAliasAnalysis.h:160</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86ISD_html_a9441a4f94d36d0f7c0c34aca42e3f76aaabe3cfcecab0e3b2e2ab496a566c8d1c"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#a9441a4f94d36d0f7c0c34aca42e3f76aaabe3cfcecab0e3b2e2ab496a566c8d1c">llvm::X86ISD::FOR</a></div><div class="ttdeci">@ FOR</div><div class="ttdoc">Bitwise logical OR of floating point values.</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00048">X86ISelLowering.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00472">IRBuilder.h:472</a></div></div>
<div class="ttc" id="anamespacellvm_html_a368216c9c116e3f30d8dd352ce1370fc"><div class="ttname"><a href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">llvm::makeFollowupLoopID</a></div><div class="ttdeci">std::optional&lt; MDNode * &gt; makeFollowupLoopID(MDNode *OrigLoopID, ArrayRef&lt; StringRef &gt; FollowupAttrs, const char *InheritOptionsAttrsPrefix=&quot;&quot;, bool AlwaysNew=false)</div><div class="ttdoc">Create a new loop identifier for a loop created from a loop transformation.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00263">LoopUtils.cpp:263</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a5a6a05b7d9e9efb3f7b098c20fa0088a"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a></div><div class="ttdeci">multiplies can be turned into SHL s</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00370">README.txt:370</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a0a96f040b7fc3eae004aa6dc2af8f522"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a0a96f040b7fc3eae004aa6dc2af8f522">llvm::LoopVectorizationCostModel::isPredicatedInst</a></div><div class="ttdeci">bool isPredicatedInst(Instruction *I) const</div><div class="ttdoc">Returns true if I is an instruction that needs to be predicated at runtime.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04446">LoopVectorize.cpp:4446</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a4ed57eef29fa5e077bd059050c293723"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a4ed57eef29fa5e077bd059050c293723">llvm::TargetTransformInfo::getMaxInterleaveFactor</a></div><div class="ttdeci">unsigned getMaxInterleaveFactor(unsigned VF) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00738">TargetTransformInfo.cpp:738</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260a058eacbd3c28e2ecec2af7db726ce527"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a058eacbd3c28e2ecec2af7db726ce527">llvm::LoopVectorizationCostModel::CM_Widen_Reverse</a></div><div class="ttdeci">@ CM_Widen_Reverse</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01338">LoopVectorize.cpp:1338</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_ad9538136df42a114d41ee07f61793c1f"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#ad9538136df42a114d41ee07f61793c1f">llvm::RuntimePointerChecking::getChecks</a></div><div class="ttdeci">const SmallVectorImpl&lt; RuntimePointerCheck &gt; &amp; getChecks() const</div><div class="ttdoc">Returns the checks that generateChecks created.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00447">LoopAccessAnalysis.h:447</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a623cced59353f83cc5eaba4068c57694"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">llvm::TargetTransformInfo::getRegisterClassForType</a></div><div class="ttdeci">unsigned getRegisterClassForType(bool Vector, Type *Ty=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00648">TargetTransformInfo.cpp:648</a></div></div>
<div class="ttc" id="agroup__VFDatabase_html_ga66862f50dead385e61e416b35110c5f1"><div class="ttname"><a href="group__VFDatabase.html#ga66862f50dead385e61e416b35110c5f1">llvm::VFDatabase::getVectorizedFunction</a></div><div class="ttdeci">Function * getVectorizedFunction(const VFShape &amp;Shape) const</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00284">VectorUtils.h:284</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a8eba8b6f7c3e69bf4d4efd92cd74b5a6"><div class="ttname"><a href="LoopVectorize_8cpp.html#a8eba8b6f7c3e69bf4d4efd92cd74b5a6">VerboseDebug</a></div><div class="ttdeci">const char VerboseDebug[]</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00160">LoopVectorize.cpp:160</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_ad98353127dbeb649d41ca07da5074b49"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#ad98353127dbeb649d41ca07da5074b49">llvm::LoopVectorizeHints::getInterleave</a></div><div class="ttdeci">unsigned getInterleave() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00143">LoopVectorizationLegality.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a21b6d9e2aa12c8c68d8e2f122ec7ecec"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a21b6d9e2aa12c8c68d8e2f122ec7ecec">llvm::LoopVectorizeHints::allowVectorization</a></div><div class="ttdeci">bool allowVectorization(Function *F, Loop *L, bool VectorizeOnlyWhenForced) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00172">LoopVectorizationLegality.cpp:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPLane_html_a0e95bf2235bec4b650114e87c75e072c"><div class="ttname"><a href="classllvm_1_1VPLane.html#a0e95bf2235bec4b650114e87c75e072c">llvm::VPLane::getLastLaneForVF</a></div><div class="ttdeci">static VPLane getLastLaneForVF(const ElementCount &amp;VF)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00139">VPlan.h:139</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a65ab4267c6c132d06451b5d97bc9ee83"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a65ab4267c6c132d06451b5d97bc9ee83">llvm::LoopVectorizationCostModel::computeMaxVF</a></div><div class="ttdeci">FixedScalableVFPair computeMaxVF(ElementCount UserVF, unsigned UserIC)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05065">LoopVectorize.cpp:5065</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a987fde1294b059921cb381631fa3747b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a987fde1294b059921cb381631fa3747b">llvm::TargetTransformInfo::preferEpilogueVectorization</a></div><div class="ttdeci">bool preferEpilogueVectorization() const</div><div class="ttdoc">Return true if the loop vectorizer should consider vectorizing an otherwise scalar epilogue loop.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01164">TargetTransformInfo.cpp:1164</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03195">Instructions.h:3195</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_ab45172054a59f0e124ceb3b2628c3fc2"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#ab45172054a59f0e124ceb3b2628c3fc2">llvm::VPTransformState::UF</a></div><div class="ttdeci">unsigned UF</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00215">VPlan.h:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a3cc216ff1aa29e15999df96770a870bf"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a3cc216ff1aa29e15999df96770a870bf">llvm::ScalarEvolution::getSmallConstantMaxTripCount</a></div><div class="ttdeci">unsigned getSmallConstantMaxTripCount(const Loop *L)</div><div class="ttdoc">Returns the upper bound of the loop trip count as a normal unsigned value.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08121">ScalarEvolution.cpp:8121</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a863efa04a6b4aceed537250ce6f0311a"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a863efa04a6b4aceed537250ce6f0311a">llvm::VPlanTransforms::sinkScalarOperands</a></div><div class="ttdeci">static bool sinkScalarOperands(VPlan &amp;Plan)</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00111">VPlanTransforms.cpp:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a5b0e4ed0a8d6cf47df2bf484cbe513a2"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a5b0e4ed0a8d6cf47df2bf484cbe513a2">llvm::TargetTransformInfo::getExtendedReductionCost</a></div><div class="ttdeci">InstructionCost getExtendedReductionCost(unsigned Opcode, bool IsUnsigned, Type *ResTy, VectorType *Ty, std::optional&lt; FastMathFlags &gt; FMF, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput) const</div><div class="ttdoc">Calculate the cost of an extended reduction pattern, similar to getArithmeticReductionCost of a reduc...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01035">TargetTransformInfo.cpp:1035</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00069">PassManager.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1DemandedBits_html"><div class="ttname"><a href="classllvm_1_1DemandedBits.html">llvm::DemandedBits</a></div><div class="ttdef"><b>Definition:</b> <a href="DemandedBits_8h_source.html#l00040">DemandedBits.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a0a5c60e5cebd520f95b9813fd9807016"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a0a5c60e5cebd520f95b9813fd9807016">llvm::InnerLoopVectorizer::sinkScalarOperands</a></div><div class="ttdeci">void sinkScalarOperands(Instruction *PredInst)</div><div class="ttdoc">Iteratively sink the scalarized operands of a predicated instruction into the block that was created ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04124">LoopVectorize.cpp:4124</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_adb954e9d6470002f8ebd563b9d611bb7"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">llvm::LoopAccessInfo::getRuntimePointerChecking</a></div><div class="ttdeci">const RuntimePointerChecking * getRuntimePointerChecking() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00576">LoopAccessAnalysis.h:576</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="astructllvm_1_1VPIteration_html"><div class="ttname"><a href="structllvm_1_1VPIteration.html">llvm::VPIteration</a></div><div class="ttdoc">VPIteration represents a single point in the iteration space of the output (vectorized and/or unrolle...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00189">VPlan.h:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockUtils_html_abc51f1d1a60a9d62ebe015d72ea11699"><div class="ttname"><a href="classllvm_1_1VPBlockUtils.html#abc51f1d1a60a9d62ebe015d72ea11699">llvm::VPBlockUtils::connectBlocks</a></div><div class="ttdeci">static void connectBlocks(VPBlockBase *From, VPBlockBase *To)</div><div class="ttdoc">Connect VPBlockBases From and To bi-directionally.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02524">VPlan.h:2524</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPHeaderPHIRecipe_html_afd5f8bd3dc1475110c38a424e4c07d79"><div class="ttname"><a href="classllvm_1_1VPHeaderPHIRecipe.html#afd5f8bd3dc1475110c38a424e4c07d79">llvm::VPHeaderPHIRecipe::getStartValue</a></div><div class="ttdeci">VPValue * getStartValue()</div><div class="ttdoc">Returns the start value of the phi, if one is set.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01152">VPlan.h:1152</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a41355f2c2a12e043fa98f666dff27cc3"><div class="ttname"><a href="LoopVectorize_8cpp.html#a41355f2c2a12e043fa98f666dff27cc3">getSignedIntOrFpConstant</a></div><div class="ttdeci">static Constant * getSignedIntOrFpConstant(Type *Ty, int64_t C)</div><div class="ttdoc">A helper function that returns an integer or floating-point constant with value C.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00395">LoopVectorize.cpp:395</a></div></div>
<div class="ttc" id="aLoopVectorizationPlanner_8h_html"><div class="ttname"><a href="LoopVectorizationPlanner_8h.html">LoopVectorizationPlanner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ae9562b96f6f3fa41bd36538c080035ee"><div class="ttname"><a href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const</div><div class="ttdoc">Return the first index of the specified basic block in the value list for this PHI.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02882">Instructions.h:2882</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a35fadea2bdc4e330baa26473ea778f43"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a35fadea2bdc4e330baa26473ea778f43">llvm::VPlanTransforms::VPInstructionsToVPRecipes</a></div><div class="ttdeci">static void VPInstructionsToVPRecipes(Loop *OrigLoop, VPlanPtr &amp;Plan, function_ref&lt; const InductionDescriptor *(PHINode *)&gt; GetIntOrFpInductionDescriptor, SmallPtrSetImpl&lt; Instruction * &gt; &amp;DeadInstructions, ScalarEvolution &amp;SE, const TargetLibraryInfo &amp;TLI)</div><div class="ttdoc">Replaces the VPInstructions in Plan with corresponding widen recipes.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00026">VPlanTransforms.cpp:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a49b228f797f9b3563256da446100c3ac"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a49b228f797f9b3563256da446100c3ac">llvm::IRBuilderBase::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l01126">IRBuilder.cpp:1126</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">llvm::RecurKind::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdoc">Sum of integers.</div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html">llvm::LoopAccessInfo</a></div><div class="ttdoc">Drive the analysis of memory accesses in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00562">LoopAccessAnalysis.h:562</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4288169d91ab0f0f01405115fd2931a7"><div class="ttname"><a href="namespacellvm.html#a4288169d91ab0f0f01405115fd2931a7">llvm::concatenateVectors</a></div><div class="ttdeci">Value * concatenateVectors(IRBuilderBase &amp;Builder, ArrayRef&lt; Value * &gt; Vecs)</div><div class="ttdoc">Concatenate a list of vectors.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l01038">VectorUtils.cpp:1038</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">llvm::ProfileSummaryInfoWrapperPass</a></div><div class="ttdoc">An analysis pass based on legacy pass manager to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00194">ProfileSummaryInfo.h:194</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerEpilogueLoop_html_a1b2c87aa19d1f80725542eb9348a6742"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a1b2c87aa19d1f80725542eb9348a6742">llvm::EpilogueVectorizerEpilogueLoop::EpilogueVectorizerEpilogueLoop</a></div><div class="ttdeci">EpilogueVectorizerEpilogueLoop(Loop *OrigLoop, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, DominatorTree *DT, const TargetLibraryInfo *TLI, const TargetTransformInfo *TTI, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, EpilogueLoopVectorizationInfo &amp;EPI, LoopVectorizationLegality *LVL, llvm::LoopVectorizationCostModel *CM, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, GeneratedRTChecks &amp;Checks)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00867">LoopVectorize.cpp:867</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_abf73a826b5d6f739eb4af48ddf14c5b4"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00403">SmallPtrSet.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a34f384c7ff8e4b23cc79156daf2a5c11"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a34f384c7ff8e4b23cc79156daf2a5c11">llvm::LoopVectorizationLegality::isInvariantAddressOfReduction</a></div><div class="ttdeci">bool isInvariantAddressOfReduction(Value *V)</div><div class="ttdoc">Returns True if given address is invariant and is used to store recurrent expression.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01047">LoopVectorizationLegality.cpp:1047</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a8b154f99f67a02253826309af90a005c"><div class="ttname"><a href="classllvm_1_1VPlan.html#a8b154f99f67a02253826309af90a005c">llvm::VPlan::addVPValue</a></div><div class="ttdeci">void addVPValue(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02292">VPlan.h:2292</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="anamespacellvm_1_1HexStyle_html_a2ff7bb0072f1202f7b06bb426d6ecda0"><div class="ttname"><a href="namespacellvm_1_1HexStyle.html#a2ff7bb0072f1202f7b06bb426d6ecda0">llvm::HexStyle::Style</a></div><div class="ttdeci">Style</div><div class="ttdef"><b>Definition:</b> <a href="MCInstPrinter_8h_source.html#l00033">MCInstPrinter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a928603739e0e70713566011d44052a4f"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a928603739e0e70713566011d44052a4f">llvm::IRBuilderBase::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01242">IRBuilder.h:1242</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a00a28a503636abdbedf080f3896b937c"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a00a28a503636abdbedf080f3896b937c">llvm::LoopVectorizationCostModel::ElementTypesInLoop</a></div><div class="ttdeci">SmallPtrSet&lt; Type *, 16 &gt; ElementTypesInLoop</div><div class="ttdoc">All element types found in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01883">LoopVectorize.cpp:1883</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a804545e5b568edec8b970da32cd37359"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">llvm::ScalarEvolution::forgetValue</a></div><div class="ttdeci">void forgetValue(Value *V)</div><div class="ttdoc">This method should be called by the client when it has changed a value in a way that may effect its v...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08523">ScalarEvolution.cpp:8523</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a822e8ad6b7b1af54dcad80db1cf96b87"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a822e8ad6b7b1af54dcad80db1cf96b87">llvm::VPTransformState::hasAnyVectorValue</a></div><div class="ttdeci">bool hasAnyVectorValue(VPValue *Def) const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00250">VPlan.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1TrackingVH_html"><div class="ttname"><a href="classllvm_1_1TrackingVH.html">llvm::TrackingVH&lt; Value &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html_affbb7e2e9ad8d18114816f2443d672b9"><div class="ttname"><a href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">llvm::MDString::get</a></div><div class="ttdeci">static MDString * get(LLVMContext &amp;Context, StringRef Str)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00497">Metadata.cpp:497</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_ab38fc97602eaec1838f2b86624001ae1"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#ab38fc97602eaec1838f2b86624001ae1">llvm::LoopBlocksDFS::perform</a></div><div class="ttdeci">void perform(LoopInfo *LI)</div><div class="ttdoc">Traverse the loop blocks and store the DFS result.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01222">LoopInfo.cpp:1222</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a33f0a5678a72641d093734ca31ec43d2"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a33f0a5678a72641d093734ca31ec43d2">llvm::EpilogueLoopVectorizationInfo::SCEVSafetyCheck</a></div><div class="ttdeci">BasicBlock * SCEVSafetyCheck</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00778">LoopVectorize.cpp:778</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockUtils_html_a61f1451694a3638db85170c7f55d5581"><div class="ttname"><a href="classllvm_1_1VPBlockUtils.html#a61f1451694a3638db85170c7f55d5581">llvm::VPBlockUtils::disconnectBlocks</a></div><div class="ttdeci">static void disconnectBlocks(VPBlockBase *From, VPBlockBase *To)</div><div class="ttdoc">Disconnect VPBlockBases From and To bi-directionally.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02535">VPlan.h:2535</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ab8c8de8f62b5d2b27c4878d3effd7273"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ab8c8de8f62b5d2b27c4878d3effd7273">llvm::LoopVectorizationCostModel::blockNeedsPredicationForAnyReason</a></div><div class="ttdeci">bool blockNeedsPredicationForAnyReason(BasicBlock *BB) const</div><div class="ttdoc">Returns true if the instructions in this block requires predication for any reason,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01573">LoopVectorize.cpp:1573</a></div></div>
<div class="ttc" id="anamespacellvm_html_a279281e12df9e915a6a38867097f3eb8"><div class="ttname"><a href="namespacellvm.html#a279281e12df9e915a6a38867097f3eb8">llvm::createTargetReduction</a></div><div class="ttdeci">Value * createTargetReduction(IRBuilderBase &amp;B, const TargetTransformInfo *TTI, const RecurrenceDescriptor &amp;Desc, Value *Src, PHINode *OrigPhi=nullptr)</div><div class="ttdoc">Create a generic target reduction using a recurrence descriptor Desc The target is queried to determi...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01063">LoopUtils.cpp:1063</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a88c31398385c508ae00dad2313af1811"><div class="ttname"><a href="LoopVectorize_8cpp.html#a88c31398385c508ae00dad2313af1811">createWidenInductionRecipes</a></div><div class="ttdeci">static VPWidenIntOrFpInductionRecipe * createWidenInductionRecipes(PHINode *Phi, Instruction *PhiOrTrunc, VPValue *Start, const InductionDescriptor &amp;IndDesc, LoopVectorizationCostModel &amp;CM, VPlan &amp;Plan, ScalarEvolution &amp;SE, Loop &amp;OrigLoop, VFRange &amp;Range)</div><div class="ttdoc">Creates a VPWidenIntOrFpInductionRecpipe for Phi.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08233">LoopVectorize.cpp:8233</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleavedAccessInfo_html_af587d7218fa15a456103c3d2125a1fc8"><div class="ttname"><a href="classllvm_1_1InterleavedAccessInfo.html#af587d7218fa15a456103c3d2125a1fc8">llvm::InterleavedAccessInfo::analyzeInterleaving</a></div><div class="ttdeci">void analyzeInterleaving(bool EnableMaskedInterleavedGroup)</div><div class="ttdoc">Analyze the interleaved accesses and collect them in interleave groups.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l01221">VectorUtils.cpp:1221</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a386bbf298b1f43a45977b7414925f8a3"><div class="ttname"><a href="classllvm_1_1VPlan.html#a386bbf298b1f43a45977b7414925f8a3">llvm::VPlan::getEntry</a></div><div class="ttdeci">VPBlockBase * getEntry()</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02229">VPlan.h:2229</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1PredicatedScalarEvolution_html_ae0994d8207b94ad22ecebc1a6bc580f1"><div class="ttname"><a href="classllvm_1_1PredicatedScalarEvolution.html#ae0994d8207b94ad22ecebc1a6bc580f1">llvm::PredicatedScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdoc">Returns the SCEV expression of V, in the context of the current SCEV predicate.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l14718">ScalarEvolution.cpp:14718</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_abb6b4f5c0e1dad90fe7bc7a920c4b1bf"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#abb6b4f5c0e1dad90fe7bc7a920c4b1bf">llvm::InnerLoopVectorizer::vectorizeInterleaveGroup</a></div><div class="ttdeci">void vectorizeInterleaveGroup(const InterleaveGroup&lt; Instruction &gt; *Group, ArrayRef&lt; VPValue * &gt; VPDefs, VPTransformState &amp;State, VPValue *Addr, ArrayRef&lt; VPValue * &gt; StoredValues, VPValue *BlockInMask=nullptr)</div><div class="ttdoc">Try to vectorize interleaved access group Group with the base address given in Addr,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02610">LoopVectorize.cpp:2610</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a5ce679c74f9d5aa21d8ea3d1a798f0a9"><div class="ttname"><a href="LoopVectorize_8cpp.html#a5ce679c74f9d5aa21d8ea3d1a798f0a9">lv_name</a></div><div class="ttdeci">static const char lv_name[]</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07385">LoopVectorize.cpp:7385</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aa0f4a801858ac7255f623ca0ec53394f"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aa0f4a801858ac7255f623ca0ec53394f">llvm::TargetTransformInfo::getGatherScatterOpCost</a></div><div class="ttdeci">InstructionCost getGatherScatterOpCost(unsigned Opcode, Type *DataTy, const Value *Ptr, bool VariableMask, Align Alignment, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00962">TargetTransformInfo.cpp:962</a></div></div>
<div class="ttc" id="aVPlanTransforms_8h_html"><div class="ttname"><a href="VPlanTransforms_8h.html">VPlanTransforms.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_a072125b96fcf0ed77465f487c7bf3c25"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#a072125b96fcf0ed77465f487c7bf3c25">llvm::LoopVectorizationPlanner::plan</a></div><div class="ttdeci">std::optional&lt; VectorizationFactor &gt; plan(ElementCount UserVF, unsigned UserIC)</div><div class="ttdoc">Plan how to best vectorize, return the best VF and its cost, or std::nullopt if vectorization and int...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07539">LoopVectorize.cpp:7539</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBuilder_1_1InsertPointGuard_html"><div class="ttname"><a href="classllvm_1_1VPBuilder_1_1InsertPointGuard.html">llvm::VPBuilder::InsertPointGuard</a></div><div class="ttdoc">RAII object that stores the current insertion point and restores it when the object is destroyed.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00166">LoopVectorizationPlanner.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenIntOrFpInductionRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenIntOrFpInductionRecipe.html">llvm::VPWidenIntOrFpInductionRecipe</a></div><div class="ttdoc">A recipe for handling phi nodes of integer and floating-point inductions, producing their vector valu...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01026">VPlan.h:1026</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a3dd07e45e737ead315e7e7ad1ae74692"><div class="ttname"><a href="LoopVectorize_8cpp.html#a3dd07e45e737ead315e7e7ad1ae74692">MaybeVectorizeType</a></div><div class="ttdeci">static Type * MaybeVectorizeType(Type *Elt, ElementCount VF)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03519">LoopVectorize.cpp:3519</a></div></div>
<div class="ttc" id="anamespacePreferPredicateTy_html_ab00d54c73f16daa1e1f9f65f77db0cdaa3111b239a92c1674cea87d025e818091"><div class="ttname"><a href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa3111b239a92c1674cea87d025e818091">PreferPredicateTy::PredicateElseScalarEpilogue</a></div><div class="ttdeci">@ PredicateElseScalarEpilogue</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00211">LoopVectorize.cpp:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a0f59a9c87ede76fde54388f16562a930"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a0f59a9c87ede76fde54388f16562a930">llvm::LoopVectorizationLegality::getNumStores</a></div><div class="ttdeci">unsigned getNumStores() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00382">LoopVectorizationLegality.h:382</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_af9f3d6495086eb1a43e829bf045fd073"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#af9f3d6495086eb1a43e829bf045fd073">llvm::LoopVectorizationLegality::isInductionVariable</a></div><div class="ttdeci">bool isInductionVariable(const Value *V) const</div><div class="ttdoc">Returns True if V can be considered as an induction variable in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01096">LoopVectorizationLegality.cpp:1096</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a9aba1a55848dca801709169068b8d264"><div class="ttname"><a href="LoopVectorize_8cpp.html#a9aba1a55848dca801709169068b8d264">VPlanBuildStressTest</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; VPlanBuildStressTest(&quot;vplan-build-stress-test&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Build VPlan for every supported loop nest in the function and bail &quot; &quot;out right after the build (stress test the VPlan H-CFG construction &quot; &quot;in the VPlan-native vectorization path).&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a35372cc43a297f286fc6c679b14c61d2"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a35372cc43a297f286fc6c679b14c61d2">llvm::LoopVectorizationCostModel::PSE</a></div><div class="ttdeci">PredicatedScalarEvolution &amp; PSE</div><div class="ttdoc">Predicated scalar evolution analysis.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01844">LoopVectorize.cpp:1844</a></div></div>
<div class="ttc" id="anamespacePreferPredicateTy_html_ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7"><div class="ttname"><a href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cdaa114bc9020d046f551b06f41f6f4539f7">PreferPredicateTy::ScalarEpilogue</a></div><div class="ttdeci">@ ScalarEpilogue</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00210">LoopVectorize.cpp:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a506bcfb6f92a2184453e1fa9655f62a1"><div class="ttname"><a href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">llvm::PHINode::setIncomingValueForBlock</a></div><div class="ttdeci">void setIncomingValueForBlock(const BasicBlock *BB, Value *V)</div><div class="ttdoc">Set every incoming value(s) for block BB to V.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02896">Instructions.h:2896</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260">llvm::LoopVectorizationCostModel::InstWidening</a></div><div class="ttdeci">InstWidening</div><div class="ttdoc">Decision that was taken during cost calculation for memory instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01335">LoopVectorize.cpp:1335</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenGEPRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenGEPRecipe.html">llvm::VPWidenGEPRecipe</a></div><div class="ttdoc">A recipe for handling GEP instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00990">VPlan.h:990</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aea45123dc92604e7354b7ef87cd7adb5"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aea45123dc92604e7354b7ef87cd7adb5">llvm::IRBuilderBase::CreateSIToFP</a></div><div class="ttdeci">Value * CreateSIToFP(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01975">IRBuilder.h:1975</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9a167f91db810097d281b1ed627f4575"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const LLVM_READONLY</div><div class="ttdoc">Convenience function for getting all the fast-math flags, which must be an operator which supports th...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00339">Instruction.cpp:339</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a5c728ddd7890c015533b42cdd7307b0c"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a5c728ddd7890c015533b42cdd7307b0c">llvm::IRBuilderBase::CreateExtractElement</a></div><div class="ttdeci">Value * CreateExtractElement(Value *Vec, Value *Idx, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02341">IRBuilder.h:2341</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVPredicate_html_ac43f5102232a1e1819b0763536f2937a"><div class="ttname"><a href="classllvm_1_1SCEVPredicate.html#ac43f5102232a1e1819b0763536f2937a">llvm::SCEVPredicate::isAlwaysTrue</a></div><div class="ttdeci">virtual bool isAlwaysTrue() const =0</div><div class="ttdoc">Returns true if the predicate is always true.</div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_ac2d32589e2e153088b8a35db1a9eabccab0b71801de025f26b088a8cb22825f79"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabccab0b71801de025f26b088a8cb22825f79">llvm::InductionDescriptor::IK_FpInduction</a></div><div class="ttdeci">@ IK_FpInduction</div><div class="ttdoc">Floating point induction variable.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00313">IVDescriptors.h:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a168fb8190f7a201fd0c85b276cac268f"><div class="ttname"><a href="classllvm_1_1Module.html#a168fb8190f7a201fd0c85b276cac268f">llvm::Module::getModuleIdentifier</a></div><div class="ttdeci">const std::string &amp; getModuleIdentifier() const</div><div class="ttdoc">Get the module identifier which is, essentially, the name of the module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00228">Module.h:228</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_adf41dd8f08cb64b24a9dc39c8ca02fa9"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#adf41dd8f08cb64b24a9dc39c8ca02fa9">llvm::LoopVectorizationCostModel::isMoreProfitable</a></div><div class="ttdeci">bool isMoreProfitable(const VectorizationFactor &amp;A, const VectorizationFactor &amp;B) const</div><div class="ttdoc">Returns true if the per-lane cost of VectorizationFactor A is lower than that of B.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05323">LoopVectorize.cpp:5323</a></div></div>
<div class="ttc" id="anamespacePreferPredicateTy_html_ab00d54c73f16daa1e1f9f65f77db0cda"><div class="ttname"><a href="namespacePreferPredicateTy.html#ab00d54c73f16daa1e1f9f65f77db0cda">PreferPredicateTy::Option</a></div><div class="ttdeci">Option</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00209">LoopVectorize.cpp:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">llvm::CmpInst::BAD_ICMP_PREDICATE</a></div><div class="ttdeci">@ BAD_ICMP_PREDICATE</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00751">InstrTypes.h:751</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpanderCleaner_html"><div class="ttname"><a href="classllvm_1_1SCEVExpanderCleaner.html">llvm::SCEVExpanderCleaner</a></div><div class="ttdoc">Helper to remove instructions inserted during SCEV expansion, unless they are marked as used.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00510">ScalarEvolutionExpander.h:510</a></div></div>
<div class="ttc" id="aMemDepPrinter_8cpp_html_a470d8721ad7c3b718e9daeabdaeb4700"><div class="ttname"><a href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a></div><div class="ttdeci">print Print MemDeps of function</div><div class="ttdef"><b>Definition:</b> <a href="MemDepPrinter_8cpp_source.html#l00082">MemDepPrinter.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationRequirements_html_ae7795838121055002ab03a649ee1906c"><div class="ttname"><a href="classllvm_1_1LoopVectorizationRequirements.html#ae7795838121055002ab03a649ee1906c">llvm::LoopVectorizationRequirements::getExactFPInst</a></div><div class="ttdeci">Instruction * getExactFPInst()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00222">LoopVectorizationLegality.h:222</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae8eaa0b4eeac52a2b2282cb1bfd981ae"><div class="ttname"><a href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const</div><div class="ttdoc">Return true if this is 'void'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_aefaba3912f52186ea896035ea0f5b00c"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">llvm::InstructionCost::getValue</a></div><div class="ttdeci">std::optional&lt; CostType &gt; getValue() const</div><div class="ttdoc">This function is intended to be used as sparingly as possible, since the class provides the full rang...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00087">InstructionCost.h:87</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a74facc922f5c9b96ee958fff171c02cf"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a74facc922f5c9b96ee958fff171c02cf">llvm::EpilogueLoopVectorizationInfo::MemSafetyCheck</a></div><div class="ttdeci">BasicBlock * MemSafetyCheck</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00779">LoopVectorize.cpp:779</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_af550e4457b9c8a2840a80627713611a9"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#af550e4457b9c8a2840a80627713611a9">llvm::InnerLoopVectorizer::OrigLoop</a></div><div class="ttdeci">Loop * OrigLoop</div><div class="ttdoc">The original loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00647">LoopVectorize.cpp:647</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af46433d0e36d3f80afc3a8c67b5c53ecaa9e18b2636661e341804da24971997df"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaa9e18b2636661e341804da24971997df">llvm::TargetTransformInfo::SK_Splice</a></div><div class="ttdeci">@ SK_Splice</div><div class="ttdoc">Concatenates elements from the first input vector with elements of the second input vector.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00923">TargetTransformInfo.h:923</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html_a7f02822253b078960693acc2f30d4817"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html#a7f02822253b078960693acc2f30d4817">llvm::AssumptionCache::registerAssumption</a></div><div class="ttdeci">void registerAssumption(CondGuardInst *CI)</div><div class="ttdoc">Add an @llvm.assume intrinsic to this function's cache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8cpp_source.html#l00231">AssumptionCache.cpp:231</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenPointerInductionRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenPointerInductionRecipe.html">llvm::VPWidenPointerInductionRecipe</a></div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01174">VPlan.h:1174</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0ad271d9d05bf5644dfa1487b3fc42a131"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0ad271d9d05bf5644dfa1487b3fc42a131">llvm::VPInstruction::CanonicalIVIncrementForPart</a></div><div class="ttdeci">@ CanonicalIVIncrementForPart</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00797">VPlan.h:797</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a414e874f68f2400a42f68317c97c79a2"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a414e874f68f2400a42f68317c97c79a2">llvm::IRBuilderBase::getTrue</a></div><div class="ttdeci">ConstantInt * getTrue()</div><div class="ttdoc">Get the constant value for i1 true.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00452">IRBuilder.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenMemoryInstructionRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenMemoryInstructionRecipe.html">llvm::VPWidenMemoryInstructionRecipe</a></div><div class="ttdoc">A Recipe for widening load/store operations.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01642">VPlan.h:1642</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a425eab58717b81784602a0b169dd9ff8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a425eab58717b81784602a0b169dd9ff8">llvm::TargetTransformInfo::getCastInstrCost</a></div><div class="ttdeci">InstructionCost getCastInstrCost(unsigned Opcode, Type *Dst, Type *Src, TTI::CastContextHint CCH, TTI::TargetCostKind CostKind=TTI::TCK_SizeAndLatency, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00869">TargetTransformInfo.cpp:869</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ad2af1b354f978aa6964b48c3382f5376"><div class="ttname"><a href="LoopVectorize_8cpp.html#ad2af1b354f978aa6964b48c3382f5376">ForceTargetSupportsScalableVectors</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ForceTargetSupportsScalableVectors(&quot;force-target-supports-scalable-vectors&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Pretend that scalable vectors are supported, even if the target does &quot; &quot;not support them. This flag should only be used for testing.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a25653d1f77f8344fea33cfe180582dc1"><div class="ttname"><a href="namespacellvm.html#a25653d1f77f8344fea33cfe180582dc1">llvm::getLoadStoreAddressSpace</a></div><div class="ttdeci">unsigned getLoadStoreAddressSpace(Value *I)</div><div class="ttdoc">A helper function that returns the address space of the pointer operand of load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05399">Instructions.h:5399</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a49c487a9395a6c384be8544cfb2cfccf"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">llvm::DenseMapBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00098">DenseMap.h:98</a></div></div>
<div class="ttc" id="aregex2_8h_html_af4408501bd0122c5686327ce657853de"><div class="ttname"><a href="regex2_8h.html#af4408501bd0122c5686327ce657853de">OP</a></div><div class="ttdeci">#define OP(n)</div><div class="ttdef"><b>Definition:</b> <a href="regex2_8h_source.html#l00073">regex2.h:73</a></div></div>
<div class="ttc" id="anamespacellvm_html_a673cf7e3d4e84d3e3dfa9dc000499cba"><div class="ttname"><a href="namespacellvm.html#a673cf7e3d4e84d3e3dfa9dc000499cba">llvm::createBitMaskForGaps</a></div><div class="ttdeci">Constant * createBitMaskForGaps(IRBuilderBase &amp;Builder, unsigned VF, const InterleaveGroup&lt; Instruction &gt; &amp;Group)</div><div class="ttdoc">Create a mask that filters the members of an interleave group where there are gaps.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00935">VectorUtils.cpp:935</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a5797d36eb67fb263b8c111e12e9818aa"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a5797d36eb67fb263b8c111e12e9818aa">llvm::VPTransformState::addNewMetadata</a></div><div class="ttdeci">void addNewMetadata(Instruction *To, const Instruction *Orig)</div><div class="ttdoc">Add additional metadata to To that was not present on Orig.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00240">VPlan.cpp:240</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a51d9710fffc66dd4c9aab84af5978e1e"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a51d9710fffc66dd4c9aab84af5978e1e">llvm::ScalarEvolution::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Return the DataLayout associated with the module this SCEV instance is operating on.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l01248">ScalarEvolution.h:1248</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a18939d452d993dd7ddd465c5c11535a4"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a18939d452d993dd7ddd465c5c11535a4">llvm::EpilogueLoopVectorizationInfo::MainLoopUF</a></div><div class="ttdeci">unsigned MainLoopUF</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00773">LoopVectorize.cpp:773</a></div></div>
<div class="ttc" id="aARCInstrInfo_8cpp_html_aab5329eaa9a958adfa2c8de4d24e16cc"><div class="ttname"><a href="ARCInstrInfo_8cpp.html#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a></div><div class="ttdeci">static bool isStore(int Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="ARCInstrInfo_8cpp_source.html#l00058">ARCInstrInfo.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a4a2f293d45c29130bf71bfa9680c5e40"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a4a2f293d45c29130bf71bfa9680c5e40">llvm::InnerLoopVectorizer::fixupIVUsers</a></div><div class="ttdeci">void fixupIVUsers(PHINode *OrigPhi, const InductionDescriptor &amp;II, Value *VectorTripCount, Value *EndValue, BasicBlock *MiddleBlock, BasicBlock *VectorHeader, VPlan &amp;Plan)</div><div class="ttdoc">Set up the values of the IVs correctly when exiting the vector loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03335">LoopVectorize.cpp:3335</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a00921df4d41f1947bb823562e2983702"><div class="ttname"><a href="LoopVectorize_8cpp.html#a00921df4d41f1947bb823562e2983702">EpilogueVectorizationMinVF</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; EpilogueVectorizationMinVF(&quot;epilogue-vectorization-minimum-VF&quot;, cl::init(16), cl::Hidden, cl::desc(&quot;Only loops with vectorization factor equal to or larger than &quot; &quot;the specified value are considered for epilogue vectorization.&quot;))</div></div>
<div class="ttc" id="astructllvm_1_1ElementCountComparator_html_aee3431839d5c0c1a22a7d45ff5fc45da"><div class="ttname"><a href="structllvm_1_1ElementCountComparator.html#aee3431839d5c0c1a22a7d45ff5fc45da">llvm::ElementCountComparator::operator()</a></div><div class="ttdeci">bool operator()(const ElementCount &amp;LHS, const ElementCount &amp;RHS) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01151">LoopVectorize.cpp:1151</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a3331ef52e6ae007bfc63ddb9fa44318d"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a3331ef52e6ae007bfc63ddb9fa44318d">llvm::InnerLoopVectorizer::ReductionResumeValues</a></div><div class="ttdeci">SmallMapVector&lt; const RecurrenceDescriptor *, PHINode *, 4 &gt; ReductionResumeValues</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00746">LoopVectorize.cpp:746</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenSelectRecipe_html"><div class="ttname"><a href="classllvm_1_1VPWidenSelectRecipe.html">llvm::VPWidenSelectRecipe</a></div><div class="ttdoc">A recipe for widening select instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00963">VPlan.h:963</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a5f5d6f7a1f29874d1e77a889510c879c"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a5f5d6f7a1f29874d1e77a889510c879c">llvm::LoopVectorizationCostModel::isScalarAfterVectorization</a></div><div class="ttdeci">bool isScalarAfterVectorization(Instruction *I, ElementCount VF) const</div><div class="ttdoc">Returns true if I is known to be scalar after vectorization.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01311">LoopVectorize.cpp:1311</a></div></div>
<div class="ttc" id="aInstructionCost_8h_html"><div class="ttname"><a href="InstructionCost_8h.html">InstructionCost.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a405e73f32c9044b8b14648b62cb2ef30"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a405e73f32c9044b8b14648b62cb2ef30">llvm::LoopVectorizationCostModel::LoopVectorizationCostModel</a></div><div class="ttdeci">LoopVectorizationCostModel(ScalarEpilogueLowering SEL, Loop *L, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, LoopVectorizationLegality *Legal, const TargetTransformInfo &amp;TTI, const TargetLibraryInfo *TLI, DemandedBits *DB, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, const Function *F, const LoopVectorizeHints *Hints, InterleavedAccessInfo &amp;IAI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01169">LoopVectorize.cpp:1169</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04852">Instructions.h:4852</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a5c67d5cf4fc57aedeb5a25941354c3dc"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a5c67d5cf4fc57aedeb5a25941354c3dc">llvm::LoopVectorizationCostModel::isLegalGatherOrScatter</a></div><div class="ttdeci">bool isLegalGatherOrScatter(Value *V, ElementCount VF=ElementCount::getFixed(1))</div><div class="ttdoc">Returns true if the target machine can represent V as a masked gather or scatter operation.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01455">LoopVectorize.cpp:1455</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_aaf371382a45e4756dbc1753d162324ba"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#aaf371382a45e4756dbc1753d162324ba">llvm::LoopVectorizationCostModel::foldTailByMasking</a></div><div class="ttdeci">bool foldTailByMasking() const</div><div class="ttdoc">Returns true if all loop blocks should be masked to fold tail loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01560">LoopVectorize.cpp:1560</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ae3e55cf13c60a8b90145f1411367b975"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ae3e55cf13c60a8b90145f1411367b975">llvm::TargetTransformInfo::isTruncateFree</a></div><div class="ttdeci">bool isTruncateFree(Type *Ty1, Type *Ty2) const</div><div class="ttdoc">Return true if it's free to truncate a value of type Ty1 to type Ty2.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00488">TargetTransformInfo.cpp:488</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a215ea3605f88c5b21ffbdf76a72a8554"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a215ea3605f88c5b21ffbdf76a72a8554">llvm::TargetTransformInfo::prefersVectorizedAddressing</a></div><div class="ttdeci">bool prefersVectorizedAddressing() const</div><div class="ttdoc">Return true if target doesn't mind addresses in vectors.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00471">TargetTransformInfo.cpp:471</a></div></div>
<div class="ttc" id="aAnalysis_2CFG_8h_html"><div class="ttname"><a href="Analysis_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a74c47d18ecd4ca3399785e6ae07134dc"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00966">Instructions.h:966</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryAnalysis_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryAnalysis.html">llvm::ProfileSummaryAnalysis</a></div><div class="ttdoc">An analysis pass based on the new PM to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00212">ProfileSummaryInfo.h:212</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aa26872ae2e00e13535d1a50baa9f5b5e"><div class="ttname"><a href="LoopVectorize_8cpp.html#aa26872ae2e00e13535d1a50baa9f5b5e">SmallLoopCost</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; SmallLoopCost(&quot;small-loop-cost&quot;, cl::init(20), cl::Hidden, cl::desc(&quot;The cost of a loop that is considered 'small' by the interleaver.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260adc468760c02910f77bad7525bc66c334"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260adc468760c02910f77bad7525bc66c334">llvm::LoopVectorizationCostModel::CM_Widen</a></div><div class="ttdeci">@ CM_Widen</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01337">LoopVectorize.cpp:1337</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aaba03126d9b8603419e88d63773841b1"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aaba03126d9b8603419e88d63773841b1">llvm::IRBuilderBase::CreatePHI</a></div><div class="ttdeci">PHINode * CreatePHI(Type *Ty, unsigned NumReservedValues, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02278">IRBuilder.h:2278</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_ab979aba6ac619479c6387779528e1fbb"><div class="ttname"><a href="classllvm_1_1VPlan.html#ab979aba6ac619479c6387779528e1fbb">llvm::VPlan::getVectorLoopRegion</a></div><div class="ttdeci">VPRegionBlock * getVectorLoopRegion()</div><div class="ttdoc">Returns the VPRegionBlock of the vector loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02359">VPlan.h:2359</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a1af0805a1dd7afabb0aa6cc1832b5011"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a1af0805a1dd7afabb0aa6cc1832b5011">llvm::TargetTransformInfo::supportsEfficientVectorElementLoadStore</a></div><div class="ttdeci">bool supportsEfficientVectorElementLoadStore() const</div><div class="ttdoc">If target has efficient vector element load/store instructions, it can return true here so that inser...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00536">TargetTransformInfo.cpp:536</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0a4d51e372293abe5e5f6dac133e80a6"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const</div><div class="ttdoc">Create a copy of 'this' instruction that is identical in all ways except the following:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00903">Instruction.cpp:903</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a47d824e6296e81c04858e04a72dde4eb"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a47d824e6296e81c04858e04a72dde4eb">llvm::VPTransformState::reset</a></div><div class="ttdeci">void reset(VPValue *Def, Value *V, unsigned Part)</div><div class="ttdoc">Reset an existing vector value for Def and a given Part.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00273">VPlan.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a2822137afbc8a9a1304f1b3b115498db"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a2822137afbc8a9a1304f1b3b115498db">llvm::InnerLoopVectorizer::createVectorizedLoopSkeleton</a></div><div class="ttdeci">virtual std::pair&lt; BasicBlock *, Value * &gt; createVectorizedLoopSkeleton()</div><div class="ttdoc">Create a new empty loop that will contain vectorized instructions later on, while the old loop will b...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03272">LoopVectorize.cpp:3272</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_ac2d32589e2e153088b8a35db1a9eabcca85d6fca1e5ba292e9d884797aa73f545"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#ac2d32589e2e153088b8a35db1a9eabcca85d6fca1e5ba292e9d884797aa73f545">llvm::InductionDescriptor::IK_NoInduction</a></div><div class="ttdeci">@ IK_NoInduction</div><div class="ttdoc">Not an induction variable.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00310">IVDescriptors.h:310</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a21efa9b2b01be2288fc1eff59e332091"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a21efa9b2b01be2288fc1eff59e332091">llvm::VPTransformState::addMetadata</a></div><div class="ttdeci">void addMetadata(Instruction *To, Instruction *From)</div><div class="ttdoc">Add metadata from one instruction to another.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00248">VPlan.cpp:248</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2f777e2b1044ba7971766097fdd56579"><div class="ttname"><a href="namespacellvm.html#a2f777e2b1044ba7971766097fdd56579">llvm::getRuntimeVF</a></div><div class="ttdeci">Value * getRuntimeVF(IRBuilderBase &amp;B, Type *Ty, ElementCount VF)</div><div class="ttdoc">Return the runtime value for VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00963">LoopVectorize.cpp:963</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCacheTracker_html"><div class="ttname"><a href="classllvm_1_1AssumptionCacheTracker.html">llvm::AssumptionCacheTracker</a></div><div class="ttdoc">An immutable pass that tracks lazily created AssumptionCache objects.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00202">AssumptionCache.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a3499f6a24500afba2c318295ad2d2d05"><div class="ttname"><a href="classllvm_1_1SetVector.html#a3499f6a24500afba2c318295ad2d2d05">llvm::SetVector::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00225">SetVector.h:225</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a9a6fbca8c965adeb8016a03ca3de2cac"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a9a6fbca8c965adeb8016a03ca3de2cac">llvm::LoopVectorizationCostModel::isProfitableToScalarize</a></div><div class="ttdeci">bool isProfitableToScalarize(Instruction *I, ElementCount VF) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01273">LoopVectorize.cpp:1273</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a9e4044de402972428a2101b8afcaa1b7"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a9e4044de402972428a2101b8afcaa1b7">llvm::RecurrenceDescriptor::IntermediateStore</a></div><div class="ttdeci">StoreInst * IntermediateStore</div><div class="ttdoc">Reductions may store temporary or final result to an invariant address.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00276">IVDescriptors.h:276</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a4589ea484ebe1919b451fff3948a17cc"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a4589ea484ebe1919b451fff3948a17cc">llvm::LoopVectorizationLegality::isConsecutivePtr</a></div><div class="ttdeci">int isConsecutivePtr(Type *AccessTy, Value *Ptr) const</div><div class="ttdoc">Check if this pointer is consecutive when vectorizing.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00448">LoopVectorizationLegality.cpp:448</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a3161602a616c472f8ec39bd0bd58e680"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a3161602a616c472f8ec39bd0bd58e680">llvm::LoopVectorizationCostModel::getInLoopReductionChains</a></div><div class="ttdeci">const ReductionChainMap &amp; getInLoopReductionChains() const</div><div class="ttdoc">Return the chain of instructions representing an inloop reduction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01584">LoopVectorize.cpp:1584</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockBase_html_a069e942283ba29dd76593696dd93bf8f"><div class="ttname"><a href="classllvm_1_1VPBlockBase.html#a069e942283ba29dd76593696dd93bf8f">llvm::VPBlockBase::getSingleSuccessor</a></div><div class="ttdeci">VPBlockBase * getSingleSuccessor() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00497">VPlan.h:497</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_ac4ab9dd9440c55bee1aa4a1195cee759"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">llvm::details::FixedOrScalableQuantity::getKnownMinValue</a></div><div class="ttdeci">constexpr ScalarTy getKnownMinValue() const</div><div class="ttdoc">Returns the minimum value this quantity can represent.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00163">TypeSize.h:163</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a20d7c96738b8f59692aec029895f8eb9"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a20d7c96738b8f59692aec029895f8eb9">llvm::LoopVectorizationCostModel::isUniformAfterVectorization</a></div><div class="ttdeci">bool isUniformAfterVectorization(Instruction *I, ElementCount VF) const</div><div class="ttdoc">Returns true if I is known to be uniform after vectorization.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01289">LoopVectorize.cpp:1289</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">llvm::logicalview::LVAttributeKind::Range</a></div><div class="ttdeci">@ Range</div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_aa22b873ceebeeaae4b6384da2b8683c3"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#aa22b873ceebeeaae4b6384da2b8683c3">llvm::EpilogueLoopVectorizationInfo::EpilogueLoopVectorizationInfo</a></div><div class="ttdeci">EpilogueLoopVectorizationInfo(ElementCount MVF, unsigned MUF, ElementCount EVF, unsigned EUF)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00783">LoopVectorize.cpp:783</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlanHCFGBuilder_html"><div class="ttname"><a href="classllvm_1_1VPlanHCFGBuilder.html">llvm::VPlanHCFGBuilder</a></div><div class="ttdoc">Main class to build the VPlan H-CFG for an incoming IR.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanHCFGBuilder_8h_source.html#l00039">VPlanHCFGBuilder.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopUnroller_html"><div class="ttname"><a href="classllvm_1_1InnerLoopUnroller.html">llvm::InnerLoopUnroller</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00749">LoopVectorize.cpp:749</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a0d5c759e770c1c6032d077a1b9cf7172"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a0d5c759e770c1c6032d077a1b9cf7172">llvm::RecurrenceDescriptor::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00202">IVDescriptors.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPUser_html_af4a3b471097ab37b1672a0d88869ea51"><div class="ttname"><a href="classllvm_1_1VPUser.html#af4a3b471097ab37b1672a0d88869ea51">llvm::VPUser::addOperand</a></div><div class="ttdeci">void addOperand(VPValue *Operand)</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00245">VPlanValue.h:245</a></div></div>
<div class="ttc" id="astructllvm_1_1ShouldRunExtraVectorPasses_html_a42f51564a150e5ecd40230fad2368ee9"><div class="ttname"><a href="structllvm_1_1ShouldRunExtraVectorPasses.html#a42f51564a150e5ecd40230fad2368ee9">llvm::ShouldRunExtraVectorPasses::Key</a></div><div class="ttdeci">static AnalysisKey Key</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00086">LoopVectorize.h:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a2eb94d079d8416118f4aaed865ab05d7"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">llvm::ScalarEvolution::getConstant</a></div><div class="ttdeci">const SCEV * getConstant(ConstantInt *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00497">ScalarEvolution.cpp:497</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a6d536d11651c11a778ea9fe9332a4a2e"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a6d536d11651c11a778ea9fe9332a4a2e">llvm::EpilogueLoopVectorizationInfo::MainLoopVF</a></div><div class="ttdeci">ElementCount MainLoopVF</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00772">LoopVectorize.cpp:772</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a31cd4004ee02b0e1c3ad932a1d5d25c9"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a31cd4004ee02b0e1c3ad932a1d5d25c9">llvm::VPlanTransforms::mergeReplicateRegionsIntoSuccessors</a></div><div class="ttdeci">static bool mergeReplicateRegionsIntoSuccessors(VPlan &amp;Plan)</div><div class="ttdoc">Merge replicate regions in their successor region, if a replicate region is connected to a successor ...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00229">VPlanTransforms.cpp:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a64e28d7d5da07059305e09ff16ee5d0b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a64e28d7d5da07059305e09ff16ee5d0b">llvm::TargetTransformInfo::isElementTypeLegalForScalableVector</a></div><div class="ttdeci">bool isElementTypeLegalForScalableVector(Type *Ty) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01136">TargetTransformInfo.cpp:1136</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ab9bcc7733985bba3ab58e5c2abbc129e"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ab9bcc7733985bba3ab58e5c2abbc129e">llvm::TargetTransformInfo::isLegalMaskedStore</a></div><div class="ttdeci">bool isLegalMaskedStore(Type *DataType, Align Alignment) const</div><div class="ttdoc">Return true if the target supports masked store.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00400">TargetTransformInfo.cpp:400</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a86d9ee5c4a2560ea49adf705ffa0e63a"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a86d9ee5c4a2560ea49adf705ffa0e63a">llvm::IRBuilderBase::CreateICmpEQ</a></div><div class="ttdeci">Value * CreateICmpEQ(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02122">IRBuilder.h:2122</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a296732b3ce802a21e7cb738b69e462da"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a296732b3ce802a21e7cb738b69e462da">llvm::LoopVectorizationCostModel::getVScaleForTuning</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getVScaleForTuning() const</div><div class="ttdoc">Convenience function that returns the value of vscale_range iff vscale_range.min == vscale_range....</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05311">LoopVectorize.cpp:5311</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_af3ab15d9c94890e913009977bae315ce"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#af3ab15d9c94890e913009977bae315ce">llvm::InnerLoopVectorizer::VF</a></div><div class="ttdeci">ElementCount VF</div><div class="ttdoc">The vectorization SIMD factor to use.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00677">LoopVectorize.cpp:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1InductionDescriptor_html_aa4d4c780188d04f2d52d48d360ff0a5e"><div class="ttname"><a href="classllvm_1_1InductionDescriptor.html#aa4d4c780188d04f2d52d48d360ff0a5e">llvm::InductionDescriptor::getStep</a></div><div class="ttdeci">const SCEV * getStep() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00322">IVDescriptors.h:322</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206"><div class="ttname"><a href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9dab8edd8f39c728bd8b0045b64768ef206">llvm::CM_ScalarEpilogueNotAllowedUsePredicate</a></div><div class="ttdeci">@ CM_ScalarEpilogueNotAllowedUsePredicate</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01145">LoopVectorize.cpp:1145</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aadedae9de069f3bcef6fa7a90ce4a630"><div class="ttname"><a href="LoopVectorize_8cpp.html#aadedae9de069f3bcef6fa7a90ce4a630">LLVMLoopVectorizeFollowupEpilogue</a></div><div class="ttdeci">const char LLVMLoopVectorizeFollowupEpilogue[]</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00168">LoopVectorize.cpp:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aCostModel_8cpp_html_a263d4048026a7c0a91393b998181f16e"><div class="ttname"><a href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a></div><div class="ttdeci">static cl::opt&lt; TargetTransformInfo::TargetCostKind &gt; CostKind(&quot;cost-kind&quot;, cl::desc(&quot;Target cost kind&quot;), cl::init(TargetTransformInfo::TCK_RecipThroughput), cl::values(clEnumValN(TargetTransformInfo::TCK_RecipThroughput, &quot;throughput&quot;, &quot;Reciprocal throughput&quot;), clEnumValN(TargetTransformInfo::TCK_Latency, &quot;latency&quot;, &quot;Instruction latency&quot;), clEnumValN(TargetTransformInfo::TCK_CodeSize, &quot;code-size&quot;, &quot;Code size&quot;), clEnumValN(TargetTransformInfo::TCK_SizeAndLatency, &quot;size-latency&quot;, &quot;Code size and latency&quot;)))</div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00806">BasicAliasAnalysis.cpp:806</a></div></div>
<div class="ttc" id="aCompiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBase_html_aa8d857a111e16bb3ab8ca90be69559ca"><div class="ttname"><a href="classllvm_1_1VPRecipeBase.html#aa8d857a111e16bb3ab8ca90be69559ca">llvm::VPRecipeBase::getParent</a></div><div class="ttdeci">VPBasicBlock * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00683">VPlan.h:683</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html">llvm::IRBuilderBase</a></div><div class="ttdoc">Common base class shared among various IRBuilders.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00094">IRBuilder.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a8b0171a0d29e72189ffad26b9770c464"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a8b0171a0d29e72189ffad26b9770c464">llvm::LoopVectorizationCostModel::ORE</a></div><div class="ttdeci">OptimizationRemarkEmitter * ORE</div><div class="ttdoc">Interface to emit optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01865">LoopVectorize.cpp:1865</a></div></div>
<div class="ttc" id="astructllvm_1_1VPIteration_html_a323bf7200480600790f48e5a9cdf2ed2"><div class="ttname"><a href="structllvm_1_1VPIteration.html#a323bf7200480600790f48e5a9cdf2ed2">llvm::VPIteration::Part</a></div><div class="ttdeci">unsigned Part</div><div class="ttdoc">in [0..UF)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00191">VPlan.h:191</a></div></div>
<div class="ttc" id="aCommandLine_8h_html_a187fd767976b311c09dff5e05ac0c1bc"><div class="ttname"><a href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a></div><div class="ttdeci">#define clEnumValN(ENUMVAL, FLAGNAME, DESC)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00678">CommandLine.h:678</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aa407c2e7d895ed29af8cc68563c03065"><div class="ttname"><a href="LoopVectorize_8cpp.html#aa407c2e7d895ed29af8cc68563c03065">hasIrregularType</a></div><div class="ttdeci">static bool hasIrregularType(Type *Ty, const DataLayout &amp;DL)</div><div class="ttdoc">A helper function that returns true if the given type is irregular.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00378">LoopVectorize.cpp:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_aecacb69b3a2334317cce2a7856f7d30d"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#aecacb69b3a2334317cce2a7856f7d30d">llvm::InnerLoopVectorizer::~InnerLoopVectorizer</a></div><div class="ttdeci">virtual ~InnerLoopVectorizer()=default</div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a94f850488e8bda1d1b400821d6d61bd1"><div class="ttname"><a href="classllvm_1_1CastInst.html#a94f850488e8bda1d1b400821d6d61bd1">llvm::CastInst::isBitOrNoopPointerCastable</a></div><div class="ttdeci">static bool isBitOrNoopPointerCastable(Type *SrcTy, Type *DestTy, const DataLayout &amp;DL)</div><div class="ttdoc">Check whether a bitcast, inttoptr, or ptrtoint cast between these types is valid and a no-op.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03614">Instructions.cpp:3614</a></div></div>
<div class="ttc" id="astructllvm_1_1VPFirstOrderRecurrencePHIRecipe_html"><div class="ttname"><a href="structllvm_1_1VPFirstOrderRecurrencePHIRecipe.html">llvm::VPFirstOrderRecurrencePHIRecipe</a></div><div class="ttdoc">A recipe for handling first-order recurrence phis.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01256">VPlan.h:1256</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a440979b6103588bef39bd2d62065d5ff"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a440979b6103588bef39bd2d62065d5ff">llvm::LoopVectorizeHints::emitRemarkWithHints</a></div><div class="ttdeci">void emitRemarkWithHints() const</div><div class="ttdoc">Dumps all the hint information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00205">LoopVectorizationLegality.cpp:205</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a676aa85125366c5b7819845a19baeef0"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a676aa85125366c5b7819845a19baeef0">llvm::LoopVectorizationLegality::getRuntimePointerChecking</a></div><div class="ttdeci">const RuntimePointerChecking * getRuntimePointerChecking() const</div><div class="ttdoc">Returns the information that we collected about runtime memory check.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00358">LoopVectorizationLegality.h:358</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">llvm::RecurKind::Mul</a></div><div class="ttdeci">@ Mul</div><div class="ttdoc">Product of integers.</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aae0e8ca52658f54e5cc6214eb1a291ef"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aae0e8ca52658f54e5cc6214eb1a291ef">llvm::TargetTransformInfo::getNumberOfRegisters</a></div><div class="ttdeci">unsigned getNumberOfRegisters(unsigned ClassID) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00644">TargetTransformInfo.cpp:644</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a74bcb5c6d80d9d7fb0eeb1131eeef2dc"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a74bcb5c6d80d9d7fb0eeb1131eeef2dc">llvm::LoopVectorizationLegality::getIntOrFpInductionDescriptor</a></div><div class="ttdeci">const InductionDescriptor * getIntOrFpInductionDescriptor(PHINode *Phi) const</div><div class="ttdoc">Returns a pointer to the induction descriptor, if Phi is an integer or floating point induction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01070">LoopVectorizationLegality.cpp:1070</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_af117cd3e7197868b568d922d2d504c04"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#af117cd3e7197868b568d922d2d504c04">llvm::VPRecipeBuilder::tryToCreateWidenRecipe</a></div><div class="ttdeci">VPRecipeOrVPValueTy tryToCreateWidenRecipe(Instruction *Instr, ArrayRef&lt; VPValue * &gt; Operands, VFRange &amp;Range, VPBasicBlock *VPBB, VPlanPtr &amp;Plan)</div><div class="ttdoc">Check if an existing VPValue can be used for Instr or a recipe can be create for I withing the given ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08662">LoopVectorize.cpp:8662</a></div></div>
<div class="ttc" id="anamespacellvm_html_ada31142763d41520644d228c139a4bddad817e2199b89933da1a3cd7e130cd782"><div class="ttname"><a href="namespacellvm.html#ada31142763d41520644d228c139a4bddad817e2199b89933da1a3cd7e130cd782">llvm::TailFoldingStyle::DataAndControlFlow</a></div><div class="ttdeci">@ DataAndControlFlow</div><div class="ttdoc">Use predicate to control both data and control flow.</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_ade6d93f9485649bade540a37ec163058"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#ade6d93f9485649bade540a37ec163058">llvm::DominatorTreeBase::properlyDominates</a></div><div class="ttdeci">bool properlyDominates(const DomTreeNodeBase&lt; NodeT &gt; *A, const DomTreeNodeBase&lt; NodeT &gt; *B) const</div><div class="ttdoc">properlyDominates - Returns true iff A dominates B and A != B.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00408">GenericDomTree.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBranchOnMaskRecipe_html"><div class="ttname"><a href="classllvm_1_1VPBranchOnMaskRecipe.html">llvm::VPBranchOnMaskRecipe</a></div><div class="ttdoc">A recipe for generating conditional branches on the bits of a mask.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01562">VPlan.h:1562</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_ae01c5ced9fe2fe50f421ae121483ef04"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">llvm::InstructionCost::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00079">InstructionCost.h:79</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ab5b8091a19cca626ebffdbc2d9b54359"><div class="ttname"><a href="LoopVectorize_8cpp.html#ab5b8091a19cca626ebffdbc2d9b54359">smallestIntegerVectorType</a></div><div class="ttdeci">static Type * smallestIntegerVectorType(Type *T1, Type *T2)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03548">LoopVectorize.cpp:3548</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html">llvm::EpilogueLoopVectorizationInfo</a></div><div class="ttdoc">Encapsulate information regarding vectorization of a loop and its epilogue.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00771">LoopVectorize.cpp:771</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aee07a8623893cdad858a3b5f77354375"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aee07a8623893cdad858a3b5f77354375">llvm::IRBuilderBase::CreateMaskedScatter</a></div><div class="ttdeci">CallInst * CreateMaskedScatter(Value *Val, Value *Ptrs, Align Alignment, Value *Mask=nullptr)</div><div class="ttdoc">Create a call to Masked Scatter intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00678">IRBuilder.cpp:678</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0a49dcace93798ddd457a9d4e584bbc9a2"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a49dcace93798ddd457a9d4e584bbc9a2">llvm::VPInstruction::BranchOnCount</a></div><div class="ttdeci">@ BranchOnCount</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00799">VPlan.h:799</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkAnalysis.html">llvm::OptimizationRemarkAnalysis</a></div><div class="ttdoc">Diagnostic information for optimization analysis remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00780">DiagnosticInfo.h:780</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a81cab9f3e7e0225e565699792e125012"><div class="ttname"><a href="LoopVectorize_8cpp.html#a81cab9f3e7e0225e565699792e125012">VectorizeMemoryCheckThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; VectorizeMemoryCheckThreshold(&quot;vectorize-memory-check-threshold&quot;, cl::init(128), cl::Hidden, cl::desc(&quot;The maximum allowed number of runtime memory checks&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_afa38851d75434d1476444ac93f94cb4ca9c0eecea29e9fa58e4dac7ee32b9b2ac"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#afa38851d75434d1476444ac93f94cb4ca9c0eecea29e9fa58e4dac7ee32b9b2ac">llvm::TargetTransformInfo::OK_AnyValue</a></div><div class="ttdeci">@ OK_AnyValue</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00931">TargetTransformInfo.h:931</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_ad80b94848142a7c633976aff96d4c408"><div class="ttname"><a href="classllvm_1_1VPlan.html#ad80b94848142a7c633976aff96d4c408">llvm::VPlan::execute</a></div><div class="ttdeci">void execute(VPTransformState *State)</div><div class="ttdoc">Generate the IR code for this VPlan.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00665">VPlan.cpp:665</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_adeaf44a788c3e001582a71790894b78d"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#adeaf44a788c3e001582a71790894b78d">llvm::VPTransformState::VF</a></div><div class="ttdeci">ElementCount VF</div><div class="ttdoc">The chosen Vectorization and Unroll Factors of the loop being vectorized.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00214">VPlan.h:214</a></div></div>
<div class="ttc" id="aCompiler_8h_html_a9579881de06b1560d242d15171ca1b86"><div class="ttname"><a href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a></div><div class="ttdeci">#define LLVM_FALLTHROUGH</div><div class="ttdoc">LLVM_FALLTHROUGH - Mark fallthrough cases in switch statements.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00270">Compiler.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizeOptions_html"><div class="ttname"><a href="structllvm_1_1LoopVectorizeOptions.html">llvm::LoopVectorizeOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00114">LoopVectorize.h:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a0566221f10834bfcea70965379745a20"><div class="ttname"><a href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Return the LLVMContext in which this type was uniqued.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00129">Type.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a238e95d82d095fec9241f2f5b81db3c5"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a238e95d82d095fec9241f2f5b81db3c5">llvm::InnerLoopVectorizer::TTI</a></div><div class="ttdeci">const TargetTransformInfo * TTI</div><div class="ttdoc">Target Transform Info.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00667">LoopVectorize.cpp:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7504dd988bee776d391c05231515297d"><div class="ttname"><a href="namespacellvm.html#a7504dd988bee776d391c05231515297d">llvm::createReplicatedMask</a></div><div class="ttdeci">llvm::SmallVector&lt; int, 16 &gt; createReplicatedMask(unsigned ReplicationFactor, unsigned VF)</div><div class="ttdoc">Create a mask with replicated elements.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00955">VectorUtils.cpp:955</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a46d751f1cb40e1d338a3bca30039e00e"><div class="ttname"><a href="classllvm_1_1VPlan.html#a46d751f1cb40e1d338a3bca30039e00e">llvm::VPlan::addLiveOut</a></div><div class="ttdeci">void addLiveOut(PHINode *PN, VPValue *V)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00814">VPlan.cpp:814</a></div></div>
<div class="ttc" id="anamespacellvm_html_a943f22024cba236f495239754ca3c74b"><div class="ttname"><a href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">llvm::make_filter_range</a></div><div class="ttdeci">iterator_range&lt; filter_iterator&lt; detail::IterOfRange&lt; RangeT &gt;, PredicateT &gt; &gt; make_filter_range(RangeT &amp;&amp;Range, PredicateT Pred)</div><div class="ttdoc">Convenience function that takes a range of elements and a predicate, and return a new filter_iterator...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00637">STLExtras.h:637</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockBase_html_abd0dc34472b46064bb2d46bb75e281bb"><div class="ttname"><a href="classllvm_1_1VPBlockBase.html#abd0dc34472b46064bb2d46bb75e281bb">llvm::VPBlockBase::getEntryBasicBlock</a></div><div class="ttdeci">const VPBasicBlock * getEntryBasicBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00151">VPlan.cpp:151</a></div></div>
<div class="ttc" id="anamespacellvm_1_1vputils_html_aacc20e63a2f2d234ec139ed94e6384ce"><div class="ttname"><a href="namespacellvm_1_1vputils.html#aacc20e63a2f2d234ec139ed94e6384ce">llvm::vputils::onlyFirstLaneUsed</a></div><div class="ttdeci">bool onlyFirstLaneUsed(VPValue *Def)</div><div class="ttdoc">Returns true if only the first lane of Def is used.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l01114">VPlan.cpp:1114</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a1600c7959045cb6b6a5f5a1d427ec67e"><div class="ttname"><a href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">bool replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdoc">Replace uses of one Value with another.</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00021">User.cpp:21</a></div></div>
<div class="ttc" id="aSeparateConstOffsetFromGEP_8cpp_html_a589d62ce2ac872ff25beaad782d27235"><div class="ttname"><a href="SeparateConstOffsetFromGEP_8cpp.html#a589d62ce2ac872ff25beaad782d27235">gep</a></div><div class="ttdeci">separate const offset from gep</div><div class="ttdef"><b>Definition:</b> <a href="SeparateConstOffsetFromGEP_8cpp_source.html#l00494">SeparateConstOffsetFromGEP.cpp:494</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4d417f72d43729d07de3b3d2f58893cc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">llvm::DominatorTreeBase::addNewBlock</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * addNewBlock(NodeT *BB, NodeT *DomBB)</div><div class="ttdoc">Add a new node to the dominator tree information.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00636">GenericDomTree.h:636</a></div></div>
<div class="ttc" id="aIVUsers_8cpp_html_ac2f338c3f467b3d09613e190d73044a5"><div class="ttname"><a href="IVUsers_8cpp.html#ac2f338c3f467b3d09613e190d73044a5">users</a></div><div class="ttdeci">iv users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00048">IVUsers.cpp:48</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a511eda16f9dbdbf7293ea2ba018ffeb7"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a511eda16f9dbdbf7293ea2ba018ffeb7">llvm::RecurrenceDescriptor::getRecurrenceStartValue</a></div><div class="ttdeci">TrackingVH&lt; Value &gt; getRecurrenceStartValue() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00204">IVDescriptors.h:204</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af84cce349a77262269fd3f6756f37a64a6adf97f83acf6453d4a6a4b1070f3754">llvm::TargetTransformInfo::CastContextHint::None</a></div><div class="ttdeci">@ None</div><div class="ttdoc">The cast is not used with a load/store of any kind.</div></div>
<div class="ttc" id="aclassllvm_1_1PointerUnion_html"><div class="ttname"><a href="classllvm_1_1PointerUnion.html">llvm::PointerUnion</a></div><div class="ttdoc">A discriminated union of two or more pointer types, with the discriminator in the low bit of the poin...</div><div class="ttdef"><b>Definition:</b> <a href="PointerUnion_8h_source.html#l00112">PointerUnion.h:112</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_a8bdf93368bc45fa2d59e7e59bb78c36c"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#a8bdf93368bc45fa2d59e7e59bb78c36c">llvm::VPTransformState::Instance</a></div><div class="ttdeci">std::optional&lt; VPIteration &gt; Instance</div><div class="ttdoc">Hold the indices to generate specific scalar instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00220">VPlan.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="anamespacellvm_1_1vputils_html_a0ae36efaf093c35afe18910df9607b98"><div class="ttname"><a href="namespacellvm_1_1vputils.html#a0ae36efaf093c35afe18910df9607b98">llvm::vputils::isUniformAfterVectorization</a></div><div class="ttdeci">bool isUniformAfterVectorization(VPValue *VPV)</div><div class="ttdoc">Returns true if VPV is uniform after vectorization.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02709">VPlan.h:2709</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a9b3ef1e4629c651f8b2992f33ae4a5c9"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a9b3ef1e4629c651f8b2992f33ae4a5c9">llvm::InnerLoopVectorizer::useOrderedReductions</a></div><div class="ttdeci">bool useOrderedReductions(const RecurrenceDescriptor &amp;RdxDesc)</div><div class="ttdoc">Returns true if the reordering of FP operations is not allowed, but we are able to vectorize with str...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04218">LoopVectorize.cpp:4218</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6feec53bc62dc3b5677f0b7c066535d3"><div class="ttname"><a href="namespacellvm.html#a6feec53bc62dc3b5677f0b7c066535d3">llvm::initializeLoopVectorizePass</a></div><div class="ttdeci">void initializeLoopVectorizePass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1c455e007178a24dfb18ac0e200ea02c"><div class="ttname"><a href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">llvm::Function::hasOptSize</a></div><div class="ttdeci">bool hasOptSize() const</div><div class="ttdoc">Optimize this function for size (-Os) or minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00644">Function.h:644</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a5a19768af81df7e5fe571bc08dcd48b3"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">llvm::ScalarEvolution::isLoopInvariant</a></div><div class="ttdeci">bool isLoopInvariant(const SCEV *S, const Loop *L)</div><div class="ttdoc">Return true if the value of the given SCEV is unchanging in the specified loop.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l13775">ScalarEvolution.cpp:13775</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a287121278d5d3dbbd2a50bc0ee211fa4"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a287121278d5d3dbbd2a50bc0ee211fa4">llvm::InnerLoopVectorizer::collectPoisonGeneratingRecipes</a></div><div class="ttdeci">void collectPoisonGeneratingRecipes(VPTransformState &amp;State)</div><div class="ttdoc">Collect poison-generating recipes that may generate a poison value that is used after vectorization,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01037">LoopVectorize.cpp:1037</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a082316e51330aeb051eaed458a9f8304"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">llvm::LegalityPredicates::isScalar</a></div><div class="ttdeci">LegalityPredicate isScalar(unsigned TypeIdx)</div><div class="ttdoc">True iff the specified type index is a scalar.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00067">LegalityPredicates.cpp:67</a></div></div>
<div class="ttc" id="aLoopVectorize_8h_html"><div class="ttname"><a href="LoopVectorize_8h.html">LoopVectorize.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a08230b6650e11747ef33144f1e463064"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a08230b6650e11747ef33144f1e463064">llvm::IRBuilderBase::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01912">IRBuilder.h:1912</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a5c26e54d871c42c42dc62f9d449c633a"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a5c26e54d871c42c42dc62f9d449c633a">llvm::LoopVectorizationLegality::isReductionVariable</a></div><div class="ttdeci">bool isReductionVariable(PHINode *PN) const</div><div class="ttdoc">Returns True if PN is a reduction variable in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00329">LoopVectorizationLegality.h:329</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_ad7fab8522e49be1b20c4db4fc431bd3c"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">llvm::AMDGPU::SendMsg::Msg</a></div><div class="ttdeci">const CustomOperand&lt; const MCSubtargetInfo &amp; &gt; Msg[]</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAsmUtils_8cpp_source.html#l00039">AMDGPUAsmUtils.cpp:39</a></div></div>
<div class="ttc" id="aDemandedBits_8h_html"><div class="ttname"><a href="DemandedBits_8h.html">DemandedBits.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPReductionPHIRecipe_html_a528c64e7841d3cacddf5335f74307a3d"><div class="ttname"><a href="classllvm_1_1VPReductionPHIRecipe.html#a528c64e7841d3cacddf5335f74307a3d">llvm::VPReductionPHIRecipe::getRecurrenceDescriptor</a></div><div class="ttdeci">const RecurrenceDescriptor &amp; getRecurrenceDescriptor() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01316">VPlan.h:1316</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a7ea774676c15ac86f21bfccd434728db"><div class="ttname"><a href="LoopVectorize_8cpp.html#a7ea774676c15ac86f21bfccd434728db">buildScalarSteps</a></div><div class="ttdeci">static void buildScalarSteps(Value *ScalarIV, Value *Step, const InductionDescriptor &amp;ID, VPValue *Def, VPTransformState &amp;State)</div><div class="ttdoc">Compute scalar induction steps.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02370">LoopVectorize.cpp:2370</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_a3c0ed6567fafd374da72087409959b75"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#a3c0ed6567fafd374da72087409959b75">llvm::InterleaveGroup::requiresScalarEpilogue</a></div><div class="ttdeci">bool requiresScalarEpilogue() const</div><div class="ttdoc">Returns true if this Group requires a scalar iteration to handle gaps.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00736">VectorUtils.h:736</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7"><div class="ttname"><a href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da4f61afe29426363c5cf62d4ee93199b7">llvm::CM_ScalarEpilogueNotAllowedOptSize</a></div><div class="ttdeci">@ CM_ScalarEpilogueNotAllowedOptSize</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01133">LoopVectorize.cpp:1133</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00035">BasicBlock.cpp:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a3e034d813ec5b7818252ac121d20a5aa"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a3e034d813ec5b7818252ac121d20a5aa">llvm::TargetTransformInfo::enableOrderedReductions</a></div><div class="ttdeci">bool enableOrderedReductions() const</div><div class="ttdoc">Return true if we should be enabling ordered reductions for the target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00458">TargetTransformInfo.cpp:458</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_add43c346a11ae1deb49142ba968eb07e"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#add43c346a11ae1deb49142ba968eb07e">llvm::LoopVectorizationCostModel::isDivRemScalarWithPredication</a></div><div class="ttdeci">bool isDivRemScalarWithPredication(InstructionCost ScalarCost, InstructionCost SafeDivisorCost) const</div><div class="ttdoc">Given costs for both strategies, return true if the scalar predication lowering should be used for di...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01481">LoopVectorize.cpp:1481</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c">llvm::RecurKind::FMulAdd</a></div><div class="ttdeci">@ FMulAdd</div><div class="ttdoc">Fused multiply-add of floats (a * b + c).</div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div></div>
<div class="ttc" id="aEntryExitInstrumenter_8cpp_html_a3985f1f39349428d17f0d2b81ebc6349"><div class="ttname"><a href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a></div><div class="ttdeci">static bool runOnFunction(Function &amp;F, bool PostInlining)</div><div class="ttdef"><b>Definition:</b> <a href="EntryExitInstrumenter_8cpp_source.html#l00085">EntryExitInstrumenter.cpp:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a83e6442f8ebefccdb5e089732fe397ac"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a83e6442f8ebefccdb5e089732fe397ac">llvm::details::FixedOrScalableQuantity&lt; ElementCount, unsigned &gt;::isKnownLT</a></div><div class="ttdeci">static constexpr bool isKnownLT(const FixedOrScalableQuantity &amp;LHS, const FixedOrScalableQuantity &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00198">TypeSize.h:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a8da97c44f514ad1ae9ccf4518b0f88aa"><div class="ttname"><a href="classllvm_1_1MapVector.html#a8da97c44f514ad1ae9ccf4518b0f88aa">llvm::MapVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00080">MapVector.h:80</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a325b208d89f2e70ee7b565dbc671fbfd"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a325b208d89f2e70ee7b565dbc671fbfd">llvm::InnerLoopVectorizer::Cost</a></div><div class="ttdeci">LoopVectorizationCostModel * Cost</div><div class="ttdoc">The profitablity analysis.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00722">LoopVectorize.cpp:722</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a16165c1e5da45acaa086c3a54a188d34"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">llvm::LoopBase::isInnermost</a></div><div class="ttdeci">bool isInnermost() const</div><div class="ttdoc">Return true if the loop does not contain any (natural) loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00182">LoopInfo.h:182</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a5674da6dbea803c20e13f6094e8781cd"><div class="ttname"><a href="LoopVectorize_8cpp.html#a5674da6dbea803c20e13f6094e8781cd">InterleaveSmallLoopScalarReduction</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; InterleaveSmallLoopScalarReduction(&quot;interleave-small-loop-scalar-reduction&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Enable interleaving for loops with small iteration counts that &quot; &quot;contain scalar reductions to expose ILP.&quot;))</div><div class="ttdoc">Interleave small loops with scalar reductions.</div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_abe79ac15821aeb8469d0c44845beca30"><div class="ttname"><a href="classllvm_1_1VPlan.html#abe79ac15821aeb8469d0c44845beca30">llvm::VPlan::mapToVPValues</a></div><div class="ttdeci">iterator_range&lt; mapped_iterator&lt; Use *, std::function&lt; VPValue *(Value *)&gt; &gt; &gt; mapToVPValues(User::op_range Operands)</div><div class="ttdoc">Returns a range mapping the values the range Operands to their corresponding VPValues.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02351">VPlan.h:2351</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_aabb6223fb71f0311d724a290d292b51d"><div class="ttname"><a href="LoopVectorize_8cpp.html#aabb6223fb71f0311d724a290d292b51d">getAddressAccessSCEV</a></div><div class="ttdeci">static const SCEV * getAddressAccessSCEV(Value *Ptr, LoopVectorizationLegality *Legal, PredicatedScalarEvolution &amp;PSE, const Loop *TheLoop)</div><div class="ttdoc">Gets Address Access SCEV after verifying that the access pattern is loop invariant except the inducti...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l06381">LoopVectorize.cpp:6381</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">llvm::Instruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMF)</div><div class="ttdoc">Convenience function for setting multiple fast-math flags on this instruction, which must be an opera...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00289">Instruction.cpp:289</a></div></div>
<div class="ttc" id="anamespacellvm_1_1APIntOps_html_a071b3581888d9e3b0b05cec58f152a91"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a071b3581888d9e3b0b05cec58f152a91">llvm::APIntOps::umax</a></div><div class="ttdeci">const APInt &amp; umax(const APInt &amp;A, const APInt &amp;B)</div><div class="ttdoc">Determine the larger of two APInts considered to be unsigned.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02190">APInt.h:2190</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a421ee26483edf3fd0cd1dca34513f45e"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a421ee26483edf3fd0cd1dca34513f45e">llvm::TargetTransformInfo::getArithmeticReductionCost</a></div><div class="ttdeci">InstructionCost getArithmeticReductionCost(unsigned Opcode, VectorType *Ty, std::optional&lt; FastMathFlags &gt; FMF, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput) const</div><div class="ttdoc">Calculate the cost of vector reduction intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01017">TargetTransformInfo.cpp:1017</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a99050b417d193e1cc1117e5bbd4bfbce"><div class="ttname"><a href="LoopVectorize_8cpp.html#a99050b417d193e1cc1117e5bbd4bfbce">LLVMLoopVectorizeFollowupVectorized</a></div><div class="ttdeci">const char LLVMLoopVectorizeFollowupVectorized[]</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00166">LoopVectorize.cpp:166</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a82183858850c672d28b5a7ee8c334e05"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a82183858850c672d28b5a7ee8c334e05">llvm::VPlanTransforms::removeRedundantExpandSCEVRecipes</a></div><div class="ttdeci">static void removeRedundantExpandSCEVRecipes(VPlan &amp;Plan)</div><div class="ttdoc">Remove redundant EpxandSCEVRecipes in Plan's entry block by replacing them with already existing reci...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00472">VPlanTransforms.cpp:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a337deb4326c2dbbe852f77d2d213a9fb"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a337deb4326c2dbbe852f77d2d213a9fb">llvm::IRBuilderBase::getFalse</a></div><div class="ttdeci">ConstantInt * getFalse()</div><div class="ttdoc">Get the constant value for i1 false.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00457">IRBuilder.h:457</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPSlotTracker_html"><div class="ttname"><a href="classllvm_1_1VPSlotTracker.html">llvm::VPSlotTracker</a></div><div class="ttdoc">This class can be used to assign consecutive numbers to all VPValues in a VPlan and allows querying t...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00431">VPlanValue.h:431</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterWrapperPass_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">llvm::OptimizationRemarkEmitterWrapperPass</a></div><div class="ttdoc">OptimizationRemarkEmitter legacy analysis pass.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00146">OptimizationRemarkEmitter.h:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerEpilogueLoop_html_a3792f99fd6877bd752bd78f1fb3e9792"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a3792f99fd6877bd752bd78f1fb3e9792">llvm::EpilogueVectorizerEpilogueLoop::createEpilogueVectorizedLoopSkeleton</a></div><div class="ttdeci">std::pair&lt; BasicBlock *, Value * &gt; createEpilogueVectorizedLoopSkeleton() final</div><div class="ttdoc">Implements the interface for creating a vectorized skeleton using the epilogue loop strategy (ie the ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07896">LoopVectorize.cpp:7896</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_adeb41c907ebde15846bc643325909f95"><div class="ttname"><a href="LoopVectorize_8cpp.html#adeb41c907ebde15846bc643325909f95">processLoopInVPlanNativePath</a></div><div class="ttdeci">static bool processLoopInVPlanNativePath(Loop *L, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, DominatorTree *DT, LoopVectorizationLegality *LVL, TargetTransformInfo *TTI, TargetLibraryInfo *TLI, DemandedBits *DB, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, LoopVectorizeHints &amp;Hints, LoopVectorizationRequirements &amp;Requirements)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09899">LoopVectorize.cpp:9899</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_ac3a6a342405e61ad992020460a530dc4"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#ac3a6a342405e61ad992020460a530dc4">llvm::LoopVectorizationPlanner::printPlans</a></div><div class="ttdeci">void printPlans(raw_ostream &amp;O)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07760">LoopVectorize.cpp:7760</a></div></div>
<div class="ttc" id="aVerifier_8h_html"><div class="ttname"><a href="Verifier_8h.html">Verifier.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aa0519f26bcb15c25ac0ff557061fa7af"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aa0519f26bcb15c25ac0ff557061fa7af">llvm::TargetTransformInfo::getShuffleCost</a></div><div class="ttdeci">InstructionCost getShuffleCost(ShuffleKind Kind, VectorType *Tp, ArrayRef&lt; int &gt; Mask=std::nullopt, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, int Index=0, VectorType *SubTp=nullptr, ArrayRef&lt; const Value * &gt; Args=std::nullopt) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00815">TargetTransformInfo.cpp:815</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a592bdd7731b14ff4ff5d646f6f399900"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a592bdd7731b14ff4ff5d646f6f399900">llvm::ScalarEvolution::forgetLoop</a></div><div class="ttdeci">void forgetLoop(const Loop *L)</div><div class="ttdoc">This method should be called by the client when it has changed a loop in a way that may effect Scalar...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08463">ScalarEvolution.cpp:8463</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a2ebb635fa802cbd7f8b4962b03d49c33"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a2ebb635fa802cbd7f8b4962b03d49c33">llvm::IRBuilderBase::CreateBitOrPointerCast</a></div><div class="ttdeci">Value * CreateBitOrPointerCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02086">IRBuilder.h:2086</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPInstruction_html_a9ccd98ba5679e4659a9990fa63f418f0a3aa58947db2958029d3f000278ad2fb5"><div class="ttname"><a href="classllvm_1_1VPInstruction.html#a9ccd98ba5679e4659a9990fa63f418f0a3aa58947db2958029d3f000278ad2fb5">llvm::VPInstruction::CanonicalIVIncrementForPartNUW</a></div><div class="ttdeci">@ CanonicalIVIncrementForPartNUW</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00798">VPlan.h:798</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a9f54e5976c204d779cee3d87cabf0b02"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a9f54e5976c204d779cee3d87cabf0b02">llvm::AArch64CC::VS</a></div><div class="ttdeci">@ VS</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00261">AArch64BaseInfo.h:261</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a6b0734de892207738014317d233c72ad"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a6b0734de892207738014317d233c72ad">llvm::TargetTransformInfo::enableMaskedInterleavedAccessVectorization</a></div><div class="ttdeci">bool enableMaskedInterleavedAccessVectorization() const</div><div class="ttdoc">Enable matching of interleaved access groups that contain predicated accesses or gaps and therefore v...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00566">TargetTransformInfo.cpp:566</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_acaf8e4c3e40e01e848c1fad5f05b81cd"><div class="ttname"><a href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">llvm::Type::getIntNTy</a></div><div class="ttdeci">static IntegerType * getIntNTy(LLVMContext &amp;C, unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00245">Type.cpp:245</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a160afa01e95095aa0c8115b6e0e6f4a6"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a160afa01e95095aa0c8115b6e0e6f4a6">llvm::LoopVectorizePass::processLoop</a></div><div class="ttdeci">bool processLoop(Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l10107">LoopVectorize.cpp:10107</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_adf4be757fa30ca7fe3e8b119438100f0"><div class="ttname"><a href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">llvm::Loop::setLoopID</a></div><div class="ttdeci">void setLoopID(MDNode *LoopID) const</div><div class="ttdoc">Set the llvm.loop loop id metadata for this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00525">LoopInfo.cpp:525</a></div></div>
<div class="ttc" id="astructllvm_1_1VectorizationFactor_html"><div class="ttname"><a href="structllvm_1_1VectorizationFactor.html">llvm::VectorizationFactor</a></div><div class="ttdoc">TODO: The following VectorizationFactor was pulled out of LoopVectorizationCostModel class.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00188">LoopVectorizationPlanner.h:188</a></div></div>
<div class="ttc" id="astructllvm_1_1FixedScalableVFPair_html_a25f82f8ef3355c335a7ddae4ad0b6965"><div class="ttname"><a href="structllvm_1_1FixedScalableVFPair.html#a25f82f8ef3355c335a7ddae4ad0b6965">llvm::FixedScalableVFPair::ScalableVF</a></div><div class="ttdeci">ElementCount ScalableVF</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00227">LoopVectorizationPlanner.h:227</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_af01e065313d5fcaba9570458faf32429"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#af01e065313d5fcaba9570458faf32429">llvm::LoopVectorizationCostModel::getWideningDecision</a></div><div class="ttdeci">InstWidening getWideningDecision(Instruction *I, ElementCount VF) const</div><div class="ttdoc">Return the cost model decision for the given instruction I and vector width VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01373">LoopVectorize.cpp:1373</a></div></div>
<div class="ttc" id="aclassllvm_1_1DemandedBitsWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DemandedBitsWrapperPass.html">llvm::DemandedBitsWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="DemandedBits_8h_source.html#l00102">DemandedBits.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_a6de26b938774385a0a4fb0d0b2a32d48"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#a6de26b938774385a0a4fb0d0b2a32d48">llvm::InstructionCost::getMax</a></div><div class="ttdeci">static InstructionCost getMax()</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00071">InstructionCost.h:71</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2d1c8f6c08d3d6f2e5f3354027997a29"><div class="ttname"><a href="namespacellvm.html#a2d1c8f6c08d3d6f2e5f3354027997a29">llvm::InstructionVFPair</a></div><div class="ttdeci">std::pair&lt; Instruction *, ElementCount &gt; InstructionVFPair</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01158">LoopVectorize.cpp:1158</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerMainLoop_html_aad9eb57dcbd9a2c3fd1993685783d7f7"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerMainLoop.html#aad9eb57dcbd9a2c3fd1993685783d7f7">llvm::EpilogueVectorizerMainLoop::printDebugTracesAtStart</a></div><div class="ttdeci">void printDebugTracesAtStart() override</div><div class="ttdoc">Allow subclasses to override and print debug traces before/after vplan execution, when trace informat...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07816">LoopVectorize.cpp:7816</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a0937fe0c707a3cd1198cea4467fa37c0"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a0937fe0c707a3cd1198cea4467fa37c0">llvm::InnerLoopVectorizer::TripCount</a></div><div class="ttdeci">Value * TripCount</div><div class="ttdoc">Trip count of the original loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00713">LoopVectorize.cpp:713</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_aad6239ca8b51657f5ebdbd6e51e6ea90"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#aad6239ca8b51657f5ebdbd6e51e6ea90">llvm::LoopVectorizationCostModel::runtimeChecksRequired</a></div><div class="ttdeci">bool runtimeChecksRequired()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04864">LoopVectorize.cpp:4864</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a3d2ab7c2a128f7e20765d0bd0ac745ea"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a3d2ab7c2a128f7e20765d0bd0ac745ea">llvm::LoopVectorizationCostModel::getMinimalBitwidths</a></div><div class="ttdeci">const MapVector&lt; Instruction *, uint64_t &gt; &amp; getMinimalBitwidths() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01267">LoopVectorize.cpp:1267</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_a04c3df2a7eefca27fc4a06e2dd47ba93"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#a04c3df2a7eefca27fc4a06e2dd47ba93">llvm::VPRecipeBuilder::createReplicateRegion</a></div><div class="ttdeci">VPRegionBlock * createReplicateRegion(VPReplicateRecipe *PredRecipe, VPlan &amp;Plan)</div><div class="ttdoc">Create a replicating region for PredRecipe.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08625">LoopVectorize.cpp:8625</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a966bd95f68b2df47061387f8d169db54"><div class="ttname"><a href="LoopVectorize_8cpp.html#a966bd95f68b2df47061387f8d169db54">createLVAnalysis</a></div><div class="ttdeci">static OptimizationRemarkAnalysis createLVAnalysis(const char *PassName, StringRef RemarkName, Loop *TheLoop, Instruction *I)</div><div class="ttdoc">Create an analysis remark that explains why vectorization failed.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00936">LoopVectorize.cpp:936</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_aae693bb6dc12250b068ab60efde5f99e"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#aae693bb6dc12250b068ab60efde5f99e">llvm::VPTransformState::MayGeneratePoisonRecipes</a></div><div class="ttdeci">SmallPtrSet&lt; VPRecipeBase *, 16 &gt; MayGeneratePoisonRecipes</div><div class="ttdoc">Holds recipes that may generate a poison value that is used after vectorization, even when their oper...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00375">VPlan.h:375</a></div></div>
<div class="ttc" id="astructllvm_1_1EpilogueLoopVectorizationInfo_html_a63a7b18fae2eec1be9b81d461dc7ebe8"><div class="ttname"><a href="structllvm_1_1EpilogueLoopVectorizationInfo.html#a63a7b18fae2eec1be9b81d461dc7ebe8">llvm::EpilogueLoopVectorizationInfo::VectorTripCount</a></div><div class="ttdeci">Value * VectorTripCount</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00781">LoopVectorize.cpp:781</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e"><div class="ttname"><a href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">llvm::X86::FirstMacroFusionInstKind::Cmp</a></div><div class="ttdeci">@ Cmp</div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a8e8c64d5e4955e6d65ae25cc9dddf560"><div class="ttname"><a href="LoopVectorize_8cpp.html#a8e8c64d5e4955e6d65ae25cc9dddf560">emitTransformedIndex</a></div><div class="ttdeci">static Value * emitTransformedIndex(IRBuilderBase &amp;B, Value *Index, Value *StartValue, Value *Step, const InductionDescriptor &amp;ID)</div><div class="ttdoc">Compute the transformed value of Index at offset StartValue using step StepValue.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02478">LoopVectorize.cpp:2478</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a645c5c5c1e89cb56be66db8db877001d"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a645c5c5c1e89cb56be66db8db877001d">llvm::InnerLoopVectorizer::AddedSafetyChecks</a></div><div class="ttdeci">bool AddedSafetyChecks</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00725">LoopVectorize.cpp:725</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_acc72050d863c3dbd1d98426c6f97d7de"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#acc72050d863c3dbd1d98426c6f97d7de">llvm::IRBuilderBase::Insert</a></div><div class="ttdeci">InstTy * Insert(InstTy *I, const Twine &amp;Name=&quot;&quot;) const</div><div class="ttdoc">Insert and return the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00145">IRBuilder.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_adde2ea00dd2613ee41bfe91908e4e68e"><div class="ttname"><a href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">llvm::CallBase::arg_size</a></div><div class="ttdeci">unsigned arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01349">InstrTypes.h:1349</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a61fd571365b64379faf5eb0b3caa1b27"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a61fd571365b64379faf5eb0b3caa1b27">llvm::TargetTransformInfo::getMulAccReductionCost</a></div><div class="ttdeci">InstructionCost getMulAccReductionCost(bool IsUnsigned, Type *ResTy, VectorType *Ty, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput) const</div><div class="ttdoc">Calculate the cost of an extended reduction pattern, similar to getArithmeticReductionCost of an Add ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01042">TargetTransformInfo.cpp:1042</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae22967d11b695d268992470debfae4b2"><div class="ttname"><a href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a></div><div class="ttdeci">T bit_floor(T Value)</div><div class="ttdoc">Returns the largest integral power of two no greater than Value if Value is nonzero.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00291">bit.h:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a5fecba95c1ba20950ea8e2139127e621"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a5fecba95c1ba20950ea8e2139127e621">llvm::TargetTransformInfo::getOperandInfo</a></div><div class="ttdeci">static OperandValueInfo getOperandInfo(const Value *V)</div><div class="ttdoc">Collect properties of V used in cost analysis, e.g. OP_PowerOf2.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00743">TargetTransformInfo.cpp:743</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBase_html"><div class="ttname"><a href="classllvm_1_1VPRecipeBase.html">llvm::VPRecipeBase</a></div><div class="ttdoc">VPRecipeBase is a base class modeling a sequence of one or more output IR instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00664">VPlan.h:664</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ae3f9633c349ede5341aa376d9c97dd8f"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ae3f9633c349ede5341aa376d9c97dd8f">llvm::IRBuilderBase::GetInsertBlock</a></div><div class="ttdeci">BasicBlock * GetInsertBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00174">IRBuilder.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdoc">This returns a ConstantFP, or a vector containing a splat of a ConstantFP, for the specified value in...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00934">Constants.cpp:934</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_afbcd78588d5235f99698b5c30f591382"><div class="ttname"><a href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">llvm::Loop::getLoopID</a></div><div class="ttdeci">MDNode * getLoopID() const</div><div class="ttdoc">Return the llvm.loop loop id metadata node for this loop if it is present.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00501">LoopInfo.cpp:501</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354"><div class="ttname"><a href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da34c20b2dbd2edddfd1b013f073a32354">llvm::CM_ScalarEpilogueNotNeededUsePredicate</a></div><div class="ttdeci">@ CM_ScalarEpilogueNotNeededUsePredicate</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01142">LoopVectorize.cpp:1142</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ad736fb9b585509388546c12617def38f"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">llvm::ConstantInt::getSigned</a></div><div class="ttdeci">static ConstantInt * getSigned(IntegerType *Ty, int64_t V)</div><div class="ttdoc">Return a ConstantInt with the specified value for the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopAndEpilogueVectorizer_html_ade960d0214d8579239e68d98a7242a2d"><div class="ttname"><a href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ade960d0214d8579239e68d98a7242a2d">llvm::InnerLoopAndEpilogueVectorizer::createVectorizedLoopSkeleton</a></div><div class="ttdeci">std::pair&lt; BasicBlock *, Value * &gt; createVectorizedLoopSkeleton() final</div><div class="ttdoc">Create a new empty loop that will contain vectorized instructions later on, while the old loop will b...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00815">LoopVectorize.cpp:815</a></div></div>
<div class="ttc" id="aDiagnosticInfo_8h_html"><div class="ttname"><a href="DiagnosticInfo_8h.html">DiagnosticInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a6208690fd9f10a8728554ad68d33d18a"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6208690fd9f10a8728554ad68d33d18a">llvm::IRBuilderBase::CreateSExtOrTrunc</a></div><div class="ttdeci">Value * CreateSExtOrTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Create a SExt or Trunc from the integer value V to DestTy.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01941">IRBuilder.h:1941</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a07ce98f749d234136ba025ecbf174b53"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a07ce98f749d234136ba025ecbf174b53">llvm::LoopVectorizePass::TLI</a></div><div class="ttdeci">TargetLibraryInfo * TLI</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00178">LoopVectorize.h:178</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a525b5174ebf7ac1db045dde5f579ddcb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a525b5174ebf7ac1db045dde5f579ddcb">llvm::TargetTransformInfo::shouldMaximizeVectorBandwidth</a></div><div class="ttdeci">bool shouldMaximizeVectorBandwidth(TargetTransformInfo::RegisterKind K) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00674">TargetTransformInfo.cpp:674</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a68ebc27127cd32d3fa276621fb69342b"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a68ebc27127cd32d3fa276621fb69342b">llvm::InnerLoopVectorizer::LoopScalarPreHeader</a></div><div class="ttdeci">BasicBlock * LoopScalarPreHeader</div><div class="ttdoc">The scalar-loop preheader.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00694">LoopVectorize.cpp:694</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_aa8c00664c6be2042407f13e4fcad950b"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#aa8c00664c6be2042407f13e4fcad950b">llvm::LoopVectorizationCostModel::canTruncateToMinimalBitwidth</a></div><div class="ttdeci">bool canTruncateToMinimalBitwidth(Instruction *I, ElementCount VF) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01328">LoopVectorize.cpp:1328</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ab75d51988243f8ea9086b110401f8758"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ab75d51988243f8ea9086b110401f8758">llvm::TargetTransformInfo::isFPVectorizationPotentiallyUnsafe</a></div><div class="ttdeci">bool isFPVectorizationPotentiallyUnsafe() const</div><div class="ttdoc">Indicate that it is potentially unsafe to automatically vectorize floating-point operations because t...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00570">TargetTransformInfo.cpp:570</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ae8d11752355845a0e271111de7be7d3a"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ae8d11752355845a0e271111de7be7d3a">llvm::LoopVectorizationCostModel::setCostBasedWideningDecision</a></div><div class="ttdeci">void setCostBasedWideningDecision(ElementCount VF)</div><div class="ttdoc">Memory access instruction may be vectorized in more than one way.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l06862">LoopVectorize.cpp:6862</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a2551d678f358fcb0f498224876f58673"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a2551d678f358fcb0f498224876f58673">llvm::LoopVectorizationLegality::getMaxSafeVectorWidthInBits</a></div><div class="ttdeci">uint64_t getMaxSafeVectorWidthInBits() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00370">LoopVectorizationLegality.h:370</a></div></div>
<div class="ttc" id="aAMDGPULowerKernelArguments_8cpp_html_a1161e5a4e753384aaba3a8e4533c4261"><div class="ttname"><a href="AMDGPULowerKernelArguments_8cpp.html#a1161e5a4e753384aaba3a8e4533c4261">Arguments</a></div><div class="ttdeci">AMDGPU Lower Kernel Arguments</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULowerKernelArguments_8cpp_source.html#l00240">AMDGPULowerKernelArguments.cpp:240</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a21c2c6ae5ec23004dc4020eacf83bbce"><div class="ttname"><a href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of elements of a given key in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00208">SetVector.h:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_acf4c09e1f30cdd4e0b5b1b8a236ead34"><div class="ttname"><a href="classllvm_1_1MapVector.html#acf4c09e1f30cdd4e0b5b1b8a236ead34">llvm::MapVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00061">MapVector.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_af3b0e58cfdb2c6c663cd47a8808ba70a"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#af3b0e58cfdb2c6c663cd47a8808ba70a">llvm::LoopVectorizePass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l10599">LoopVectorize.cpp:10599</a></div></div>
<div class="ttc" id="aLoopVectorizationLegality_8h_html"><div class="ttname"><a href="LoopVectorizationLegality_8h.html">LoopVectorizationLegality.h</a></div></div>
<div class="ttc" id="aNewGVN_8cpp_html_a3802ce53978393ea3d2d69b646cd49f9"><div class="ttname"><a href="NewGVN_8cpp.html#a3802ce53978393ea3d2d69b646cd49f9">Numbering</a></div><div class="ttdeci">Global Value Numbering</div><div class="ttdef"><b>Definition:</b> <a href="NewGVN_8cpp_source.html#l04260">NewGVN.cpp:4260</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizeResult_html"><div class="ttname"><a href="structllvm_1_1LoopVectorizeResult.html">llvm::LoopVectorizeResult</a></div><div class="ttdoc">Storage for information about made changes.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00151">LoopVectorize.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotTracker_html"><div class="ttname"><a href="classllvm_1_1SlotTracker.html">llvm::SlotTracker</a></div><div class="ttdoc">This class provides computation of slot numbers for LLVM Assembly writing.</div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l00678">AsmWriter.cpp:678</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00174">Function.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a34c987c590db0e5cff66d9869a34c556"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a34c987c590db0e5cff66d9869a34c556">llvm::TargetTransformInfo::getMemoryOpCost</a></div><div class="ttdeci">InstructionCost getMemoryOpCost(unsigned Opcode, Type *Src, Align Alignment, unsigned AddressSpace, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, OperandValueInfo OpdInfo={OK_AnyValue, OP_None}, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00941">TargetTransformInfo.cpp:941</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0083a69883e0f97e111dbff064c60f42"><div class="ttname"><a href="namespacellvm.html#a0083a69883e0f97e111dbff064c60f42">llvm::simplifyLoop</a></div><div class="ttdeci">bool simplifyLoop(Loop *L, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, MemorySSAUpdater *MSSAU, bool PreserveLCSSA)</div><div class="ttdoc">Simplify each loop in a loop nest recursively.</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00708">LoopSimplify.cpp:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a9750fe62b7bd8ad0214ab3b58cd1e8e9"><div class="ttname"><a href="classllvm_1_1VPlan.html#a9750fe62b7bd8ad0214ab3b58cd1e8e9">llvm::VPlan::getVectorTripCount</a></div><div class="ttdeci">VPValue &amp; getVectorTripCount()</div><div class="ttdoc">The vector trip count.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02253">VPlan.h:2253</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a69955d334349c9adad86cd95171dce4c"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a69955d334349c9adad86cd95171dce4c">transform</a></div><div class="ttdeci">instcombine should handle this transform</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00262">README.txt:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_a76ffc71fcd432b9a2a15b11c3144397d"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#a76ffc71fcd432b9a2a15b11c3144397d">llvm::LoopAccessInfo::getNumRuntimePointerChecks</a></div><div class="ttdeci">unsigned getNumRuntimePointerChecks() const</div><div class="ttdoc">Number of memchecks required to prove independence of otherwise may-alias pointers.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00582">LoopAccessAnalysis.h:582</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopAndEpilogueVectorizer_html_ae920fcb4fb4b5099acbbf972af04447e"><div class="ttname"><a href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#ae920fcb4fb4b5099acbbf972af04447e">llvm::InnerLoopAndEpilogueVectorizer::EPI</a></div><div class="ttdeci">EpilogueLoopVectorizationInfo &amp; EPI</div><div class="ttdoc">Holds and updates state information required to vectorize the main loop and its epilogue in two separ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00831">LoopVectorize.cpp:831</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a42f4c06af5cd58b1f8a7e54b3ae4316a"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a42f4c06af5cd58b1f8a7e54b3ae4316a">llvm::InnerLoopVectorizer::ORE</a></div><div class="ttdeci">OptimizationRemarkEmitter * ORE</div><div class="ttdoc">Interface to emit optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00673">LoopVectorize.cpp:673</a></div></div>
<div class="ttc" id="anamespacePreferPredicateTy_html"><div class="ttname"><a href="namespacePreferPredicateTy.html">PreferPredicateTy</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00208">LoopVectorize.cpp:208</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a5604ee7cd98afbb8b5a581e9c3dd7dff"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a5604ee7cd98afbb8b5a581e9c3dd7dff">llvm::LoopVectorizePass::BFI</a></div><div class="ttdeci">BlockFrequencyInfo * BFI</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00177">LoopVectorize.h:177</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a427352f0eda31223a0b25d9f143ce0b1"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a427352f0eda31223a0b25d9f143ce0b1">llvm::LoopVectorizePass::DB</a></div><div class="ttdeci">DemandedBits * DB</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00179">LoopVectorize.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockBase_html_a2bd1c53f9607876b22c6fd3ec1e28a50"><div class="ttname"><a href="classllvm_1_1VPBlockBase.html#a2bd1c53f9607876b22c6fd3ec1e28a50">llvm::VPBlockBase::setName</a></div><div class="ttdeci">void setName(const Twine &amp;newName)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00455">VPlan.h:455</a></div></div>
<div class="ttc" id="aLoopVersioning_8h_html"><div class="ttname"><a href="LoopVersioning_8h.html">LoopVersioning.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_aa83b181aa14d5afe1390faad388f91a4"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#aa83b181aa14d5afe1390faad388f91a4">llvm::InnerLoopVectorizer::getOrCreateVectorTripCount</a></div><div class="ttdeci">Value * getOrCreateVectorTripCount(BasicBlock *InsertBlock)</div><div class="ttdoc">Returns (and creates if needed) the trip count of the widened loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02899">LoopVectorize.cpp:2899</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a367c00b94d19dddb8a87f5d80840770d"><div class="ttname"><a href="LoopVectorize_8cpp.html#a367c00b94d19dddb8a87f5d80840770d">TinyTripCountVectorThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TinyTripCountVectorThreshold(&quot;vectorizer-min-trip-count&quot;, cl::init(16), cl::Hidden, cl::desc(&quot;Loops with a constant trip count that is smaller than this &quot; &quot;value are vectorized only if no scalar iteration overheads &quot; &quot;are incurred.&quot;))</div><div class="ttdoc">Loops with a known constant trip count below this number are vectorized only if no scalar iteration o...</div></div>
<div class="ttc" id="anamespacellvm_html_a52fcded779c8029fdafaa9897cd3b238"><div class="ttname"><a href="namespacellvm.html#a52fcded779c8029fdafaa9897cd3b238">llvm::createMinMaxOp</a></div><div class="ttdeci">Value * createMinMaxOp(IRBuilderBase &amp;Builder, RecurKind RK, Value *Left, Value *Right)</div><div class="ttdoc">Returns a Min/Max operation corresponding to MinMaxRecurrenceKind.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00911">LoopUtils.cpp:911</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00449">SIDefines.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html_adfdd504b078cce3b90e7c5cf1f5164db"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html#adfdd504b078cce3b90e7c5cf1f5164db">llvm::VPBasicBlock::insert</a></div><div class="ttdeci">void insert(VPRecipeBase *Recipe, iterator InsertPt)</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02004">VPlan.h:2004</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a8718d4f9740c67449057887b386fb348"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a8718d4f9740c67449057887b386fb348">llvm::TargetTransformInfo::getMaskedMemoryOpCost</a></div><div class="ttdeci">InstructionCost getMaskedMemoryOpCost(unsigned Opcode, Type *Src, Align Alignment, unsigned AddressSpace, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00953">TargetTransformInfo.cpp:953</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a806ec23d6f44b02ad8cf3b1e61c05495"><div class="ttname"><a href="LoopVectorize_8cpp.html#a806ec23d6f44b02ad8cf3b1e61c05495">isExplicitVecOuterLoop</a></div><div class="ttdeci">static bool isExplicitVecOuterLoop(Loop *OuterLp, OptimizationRemarkEmitter *ORE)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02171">LoopVectorize.cpp:2171</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a8bb3b1ccf19b8c85429b777dfa4a0166a331413d3887a08546d0973091f6a4993"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a331413d3887a08546d0973091f6a4993">llvm::TargetTransformInfo::RGK_ScalableVector</a></div><div class="ttdeci">@ RGK_ScalableVector</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00988">TargetTransformInfo.h:988</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_adf8d8fb6f39b9c0cf21d55b7229d35e2"><div class="ttname"><a href="LoopVectorize_8cpp.html#adf8d8fb6f39b9c0cf21d55b7229d35e2">useMaskedInterleavedAccesses</a></div><div class="ttdeci">static bool useMaskedInterleavedAccesses(const TargetTransformInfo &amp;TTI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02574">LoopVectorize.cpp:2574</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a160e9e1a4fd597f83034c8b2ba316984"><div class="ttname"><a href="classllvm_1_1MDNode.html#a160e9e1a4fd597f83034c8b2ba316984">llvm::MDNode::replaceOperandWith</a></div><div class="ttdeci">void replaceOperandWith(unsigned I, Metadata *New)</div><div class="ttdoc">Replace a specific operand.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00968">Metadata.cpp:968</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac50791ac3dd33dc3dc522df16116a27b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac50791ac3dd33dc3dc522df16116a27b">llvm::TargetTransformInfo::getMinTripCountTailFoldingThreshold</a></div><div class="ttdeci">unsigned getMinTripCountTailFoldingThreshold() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01181">TargetTransformInfo.cpp:1181</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a3b4a54b076454fec43b13554b28252a9"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">llvm::CmpInst::Create</a></div><div class="ttdeci">static CmpInst * Create(OtherOps Op, Predicate predicate, Value *S1, Value *S2, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a compare instruction, given the opcode, the predicate and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04025">Instructions.cpp:4025</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_a57207993e2fe6ec98912e8072e4600bc"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#a57207993e2fe6ec98912e8072e4600bc">llvm::InstructionCost::getInvalid</a></div><div class="ttdeci">static InstructionCost getInvalid(CostType Val=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00073">InstructionCost.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlendRecipe_html"><div class="ttname"><a href="classllvm_1_1VPBlendRecipe.html">llvm::VPBlendRecipe</a></div><div class="ttdoc">A recipe for vectorizing a phi-node as a sequence of mask-based select instructions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01329">VPlan.h:1329</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPUser_html"><div class="ttname"><a href="classllvm_1_1VPUser.html">llvm::VPUser</a></div><div class="ttdoc">This class augments VPValue with operands which provide the inverse def-use edges from VPValue's user...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00201">VPlanValue.h:201</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a43ffab656d74603f3f40ec955daa893c"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a43ffab656d74603f3f40ec955daa893c">llvm::VPlanTransforms::removeRedundantInductionCasts</a></div><div class="ttdeci">static void removeRedundantInductionCasts(VPlan &amp;Plan)</div><div class="ttdoc">Remove redundant casts of inductions.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00344">VPlanTransforms.cpp:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a79479229269c1abc7dba0840d19b97cf"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a79479229269c1abc7dba0840d19b97cf">llvm::IRBuilderBase::saveIP</a></div><div class="ttdeci">InsertPoint saveIP() const</div><div class="ttdoc">Returns the current insert point.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00263">IRBuilder.h:263</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a611e3975b0c17413d87c6c5ed2e121ab"><div class="ttname"><a href="LoopVectorize_8cpp.html#a611e3975b0c17413d87c6c5ed2e121ab">EnableIndVarRegisterHeur</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableIndVarRegisterHeur(&quot;enable-ind-var-reg-heur&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Count the induction variable only once when interleaving&quot;))</div></div>
<div class="ttc" id="aScalarEvolutionExpressions_8h_html"><div class="ttname"><a href="ScalarEvolutionExpressions_8h.html">ScalarEvolutionExpressions.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f987d5b55845b1a4658e7998a3ecefb"><div class="ttname"><a href="namespacellvm.html#a7f987d5b55845b1a4658e7998a3ecefb">llvm::createOrderedReduction</a></div><div class="ttdeci">Value * createOrderedReduction(IRBuilderBase &amp;B, const RecurrenceDescriptor &amp;Desc, Value *Src, Value *Start)</div><div class="ttdoc">Create an ordered reduction intrinsic using the given recurrence descriptor Desc.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01080">LoopUtils.cpp:1080</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00809">Instruction.h:809</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a757b134f1de2185cb667e6387b73d650"><div class="ttname"><a href="LoopVectorize_8cpp.html#a757b134f1de2185cb667e6387b73d650">EnableEpilogueVectorization</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableEpilogueVectorization(&quot;enable-epilogue-vectorization&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable vectorization of epilogue loops.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html">llvm::RecurrenceDescriptor</a></div><div class="ttdoc">The RecurrenceDescriptor is used to identify recurrences variables in a loop.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00069">IVDescriptors.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_a95d3ed4c96cfee0037005125a7f7f07a"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#a95d3ed4c96cfee0037005125a7f7f07a">llvm::RuntimePointerChecking::getDiffChecks</a></div><div class="ttdeci">std::optional&lt; ArrayRef&lt; PointerDiffInfo &gt; &gt; getDiffChecks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00456">LoopAccessAnalysis.h:456</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736"><div class="ttname"><a href="namespacellvm_1_1cl.html#a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736">llvm::cl::BOU_TRUE</a></div><div class="ttdeci">@ BOU_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00629">CommandLine.h:629</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_affac0dc3d407ef3dee29b8bc9a4836bc"><div class="ttname"><a href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdoc">Get an iterator to the end of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00092">SetVector.h:92</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ab8c6d0c31153197f492410b3c0a37248"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">llvm::LegalityPredicates::isVector</a></div><div class="ttdeci">LegalityPredicate isVector(unsigned TypeIdx)</div><div class="ttdoc">True iff the specified type index is a vector.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00073">LegalityPredicates.cpp:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a44103b3442af11ecfd4b86fe6f4b3caf"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a44103b3442af11ecfd4b86fe6f4b3caf">llvm::IRBuilderBase::CreateSExt</a></div><div class="ttdeci">Value * CreateSExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01920">IRBuilder.h:1920</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260a3a2a7904b0c4a7f4c55939e457bcc971">llvm::LoopVectorizationCostModel::CM_Interleave</a></div><div class="ttdeci">@ CM_Interleave</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01339">LoopVectorize.cpp:1339</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="astructllvm_1_1VectorizationFactor_html_a3a4e23fea2c7cec4fd3c2bf27351679c"><div class="ttname"><a href="structllvm_1_1VectorizationFactor.html#a3a4e23fea2c7cec4fd3c2bf27351679c">llvm::VectorizationFactor::Width</a></div><div class="ttdeci">ElementCount Width</div><div class="ttdoc">Vector width with best cost.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00190">LoopVectorizationPlanner.h:190</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a49d4bfe4d5496d71d503e2e51ba8f6be"><div class="ttname"><a href="classllvm_1_1VPlan.html#a49d4bfe4d5496d71d503e2e51ba8f6be">llvm::VPlan::prepareToExecute</a></div><div class="ttdeci">void prepareToExecute(Value *TripCount, Value *VectorTripCount, Value *CanonicalIVStartValue, VPTransformState &amp;State, bool IsEpilogueVectorization)</div><div class="ttdoc">Prepare the plan for execution, setting up the required live-in values.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00611">VPlan.cpp:611</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a7803d6f1162773c3b1a61e3ff441fcb8"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a7803d6f1162773c3b1a61e3ff441fcb8">llvm::LoopVectorizationLegality::isInductionPhi</a></div><div class="ttdeci">bool isInductionPhi(const Value *V) const</div><div class="ttdoc">Returns True if V is a Phi node of an induction variable in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01060">LoopVectorizationLegality.cpp:1060</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a99463cf52e27f46b31ba55f306e9a8d8"><div class="ttname"><a href="LoopVectorize_8cpp.html#a99463cf52e27f46b31ba55f306e9a8d8">ForceTargetMaxScalarInterleaveFactor</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ForceTargetMaxScalarInterleaveFactor(&quot;force-target-max-scalar-interleave&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;A flag that overrides the target's max interleave factor for &quot; &quot;scalar loops.&quot;))</div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a937c42f77e161349ce0f999e448c7027"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">llvm::PreservedAnalyses::preserveSet</a></div><div class="ttdeci">void preserveSet()</div><div class="ttdoc">Mark an analysis set as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00188">PassManager.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_a2206e77c573f4947146faa681ea8855e"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#a2206e77c573f4947146faa681ea8855e">llvm::LoopVectorizationPlanner::planInVPlanNativePath</a></div><div class="ttdeci">VectorizationFactor planInVPlanNativePath(ElementCount UserVF)</div><div class="ttdoc">Use the VPlan-native path to plan how to best vectorize, return the best VF and its cost.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07494">LoopVectorize.cpp:7494</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00052">PassSupport.h:52</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpander_html_aab89200a9867fdf7476cf0c09e80ef78"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#aab89200a9867fdf7476cf0c09e80ef78">llvm::SCEVExpander::expandCodeForPredicate</a></div><div class="ttdeci">Value * expandCodeForPredicate(const SCEVPredicate *Pred, Instruction *Loc)</div><div class="ttdoc">Generates a code sequence that evaluates this predicate.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l02326">ScalarEvolutionExpander.cpp:2326</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a8bb3b1ccf19b8c85429b777dfa4a0166"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166">llvm::TargetTransformInfo::RegisterKind</a></div><div class="ttdeci">RegisterKind</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00988">TargetTransformInfo.h:988</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a30c4bcea7beb42c7eb075a578bc3bc3e"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a30c4bcea7beb42c7eb075a578bc3bc3e">llvm::InnerLoopVectorizer::emitSCEVChecks</a></div><div class="ttdeci">BasicBlock * emitSCEVChecks(BasicBlock *Bypass)</div><div class="ttdoc">Emit a bypass check to see if all of the SCEV assumptions we've had to make are correct.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03051">LoopVectorize.cpp:3051</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopAndEpilogueVectorizer_html_a38cf9efacb031a3c5937226fe180d9ca"><div class="ttname"><a href="classllvm_1_1InnerLoopAndEpilogueVectorizer.html#a38cf9efacb031a3c5937226fe180d9ca">llvm::InnerLoopAndEpilogueVectorizer::InnerLoopAndEpilogueVectorizer</a></div><div class="ttdeci">InnerLoopAndEpilogueVectorizer(Loop *OrigLoop, PredicatedScalarEvolution &amp;PSE, LoopInfo *LI, DominatorTree *DT, const TargetLibraryInfo *TLI, const TargetTransformInfo *TTI, AssumptionCache *AC, OptimizationRemarkEmitter *ORE, EpilogueLoopVectorizationInfo &amp;EPI, LoopVectorizationLegality *LVL, llvm::LoopVectorizationCostModel *CM, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, GeneratedRTChecks &amp;Checks)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00800">LoopVectorize.cpp:800</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html_a4e30ea9d413dd86c802fee94aa8b5805"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html#a4e30ea9d413dd86c802fee94aa8b5805">llvm::VPBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Recipe iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01974">VPlan.h:1974</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_add71474638430694c84640146383fc44"><div class="ttname"><a href="namespacellvm.html#add71474638430694c84640146383fc44">llvm::hash_combine</a></div><div class="ttdeci">hash_code hash_combine(const Ts &amp;...args)</div><div class="ttdoc">Combine values into a single hash_code.</div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00613">Hashing.h:613</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ac4678731b93ef8681e7fd6a589d38f1e"><div class="ttname"><a href="LoopVectorize_8cpp.html#ac4678731b93ef8681e7fd6a589d38f1e">getScalarEpilogueLowering</a></div><div class="ttdeci">static ScalarEpilogueLowering getScalarEpilogueLowering(Function *F, Loop *L, LoopVectorizeHints &amp;Hints, ProfileSummaryInfo *PSI, BlockFrequencyInfo *BFI, TargetTransformInfo *TTI, TargetLibraryInfo *TLI, AssumptionCache *AC, LoopInfo *LI, ScalarEvolution *SE, DominatorTree *DT, LoopVectorizationLegality &amp;LVL, InterleavedAccessInfo *IAI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09783">LoopVectorize.cpp:9783</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_aa2f5ef2d522fb80de283a23d5bed6d86"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#aa2f5ef2d522fb80de283a23d5bed6d86">llvm::LoopVectorizeHints::setAlreadyVectorized</a></div><div class="ttdeci">void setAlreadyVectorized()</div><div class="ttdoc">Mark the loop L as already vectorized by setting the width to 1.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l00153">LoopVectorizationLegality.cpp:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_ae856891b0523ef05ad5ede8d70dad25b"><div class="ttname"><a href="classllvm_1_1VPlan.html#ae856891b0523ef05ad5ede8d70dad25b">llvm::VPlan::getLiveOuts</a></div><div class="ttdeci">const MapVector&lt; PHINode *, VPLiveOut * &gt; &amp; getLiveOuts() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02393">VPlan.h:2393</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPWidenMemoryInstructionRecipe_html_ab00477be715adae00996f4ad93b125dd"><div class="ttname"><a href="classllvm_1_1VPWidenMemoryInstructionRecipe.html#ab00477be715adae00996f4ad93b125dd">llvm::VPWidenMemoryInstructionRecipe::execute</a></div><div class="ttdeci">void execute(VPTransformState &amp;State) override</div><div class="ttdoc">Generate the wide load/store.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l09644">LoopVectorize.cpp:9644</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_afd7c135e18f2d7253d4f8545cd7b1756"><div class="ttname"><a href="classllvm_1_1SmallSet.html#afd7c135e18f2d7253d4f8545cd7b1756">llvm::SmallSet::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00159">SmallSet.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00234">User.h:234</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPActiveLaneMaskPHIRecipe_html"><div class="ttname"><a href="classllvm_1_1VPActiveLaneMaskPHIRecipe.html">llvm::VPActiveLaneMaskPHIRecipe</a></div><div class="ttdoc">A recipe for generating the active lane mask for the vector loop that is used to predicate the vector...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01809">VPlan.h:1809</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_a361dad1df3e6d9b5610d40dcf49204c5"><div class="ttname"><a href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a></div><div class="ttdeci">const NodeList &amp; List</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00199">RDFGraph.cpp:199</a></div></div>
<div class="ttc" id="aclassDataType_html"><div class="ttname"><a href="classDataType.html">DataType</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a99d1430a4b51d71f77d78febb40f9d32"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a99d1430a4b51d71f77d78febb40f9d32">llvm::InnerLoopVectorizer::LoopVectorPreHeader</a></div><div class="ttdeci">BasicBlock * LoopVectorPreHeader</div><div class="ttdoc">The vector-loop preheader.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00691">LoopVectorize.cpp:691</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abc1b952dd1661ccba4f999610bf9732e"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abc1b952dd1661ccba4f999610bf9732e">llvm::LoopVectorizationCostModel::setWideningDecision</a></div><div class="ttdeci">void setWideningDecision(Instruction *I, ElementCount VF, InstWidening W, InstructionCost Cost)</div><div class="ttdoc">Save vectorization decision W and Cost taken by the cost model for instruction I and vector width VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01346">LoopVectorize.cpp:1346</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aad07e3e0fa03f6c780e13d924325d8d0"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aad07e3e0fa03f6c780e13d924325d8d0">llvm::IRBuilderBase::CreateMaskedStore</a></div><div class="ttdeci">CallInst * CreateMaskedStore(Value *Val, Value *Ptr, Align Alignment, Value *Mask)</div><div class="ttdoc">Create a call to Masked Store intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00609">IRBuilder.cpp:609</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_abe860e1e952cdc501c96210be5e00805"><div class="ttname"><a href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a></div><div class="ttdeci">static BinaryOperator * CreateMul(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00253">Reassociate.cpp:253</a></div></div>
<div class="ttc" id="anamespacellvm_html_af80edfc5e42059e045aa7bf7fe42bee3"><div class="ttname"><a href="namespacellvm.html#af80edfc5e42059e045aa7bf7fe42bee3">llvm::hash_combine_range</a></div><div class="ttdeci">hash_code hash_combine_range(InputIteratorT first, InputIteratorT last)</div><div class="ttdoc">Compute a hash_code for a sequence of values.</div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00491">Hashing.h:491</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_a82aa4584d5a9e975821f677489de8dcd"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#a82aa4584d5a9e975821f677489de8dcd">llvm::VPRecipeBuilder::getRecipe</a></div><div class="ttdeci">VPRecipeBase * getRecipe(Instruction *I)</div><div class="ttdoc">Return the recipe created for given ingredient.</div><div class="ttdef"><b>Definition:</b> <a href="VPRecipeBuilder_8h_source.html#l00154">VPRecipeBuilder.h:154</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a407e8a22d9626d76411c538b17e9601c"><div class="ttname"><a href="classllvm_1_1VPlan.html#a407e8a22d9626d76411c538b17e9601c">llvm::VPlan::getOrCreateBackedgeTakenCount</a></div><div class="ttdeci">VPValue * getOrCreateBackedgeTakenCount()</div><div class="ttdoc">The backedge taken count of the original loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02246">VPlan.h:2246</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalsAAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1GlobalsAAWrapperPass.html">llvm::GlobalsAAWrapperPass</a></div><div class="ttdoc">Legacy wrapper pass to provide the GlobalsAAResult object.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalsModRef_8h_source.html#l00142">GlobalsModRef.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_adbab10940d6653d68e6aac48082acb65"><div class="ttname"><a href="LoopVectorize_8cpp.html#adbab10940d6653d68e6aac48082acb65">PreferInLoopReductions</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PreferInLoopReductions(&quot;prefer-inloop-reductions&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Prefer in-loop vector reductions, &quot; &quot;overriding the targets preference.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a1f08f2925fec05b265e540d29066b9c8"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">llvm::DominatorTreeBase::verify</a></div><div class="ttdeci">bool verify(VerificationLevel VL=VerificationLevel::Full) const</div><div class="ttdoc">verify - checks if the tree is correct.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00819">GenericDomTree.h:819</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntervalMap_html"><div class="ttname"><a href="classllvm_1_1IntervalMap.html">llvm::IntervalMap</a></div><div class="ttdef"><b>Definition:</b> <a href="IntervalMap_8h_source.html#l00936">IntervalMap.h:936</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a4560cb303f08f288db125b0b213ab06a"><div class="ttname"><a href="LoopVectorize_8cpp.html#a4560cb303f08f288db125b0b213ab06a">PreferPredicateOverEpilogue</a></div><div class="ttdeci">static cl::opt&lt; PreferPredicateTy::Option &gt; PreferPredicateOverEpilogue(&quot;prefer-predicate-over-epilogue&quot;, cl::init(PreferPredicateTy::ScalarEpilogue), cl::Hidden, cl::desc(&quot;Tail-folding and predication preferences over creating a scalar &quot; &quot;epilogue loop.&quot;), cl::values(clEnumValN(PreferPredicateTy::ScalarEpilogue, &quot;scalar-epilogue&quot;, &quot;Don't tail-predicate loops, create scalar epilogue&quot;), clEnumValN(PreferPredicateTy::PredicateElseScalarEpilogue, &quot;predicate-else-scalar-epilogue&quot;, &quot;prefer tail-folding, create scalar epilogue if tail &quot; &quot;folding fails.&quot;), clEnumValN(PreferPredicateTy::PredicateOrDontVectorize, &quot;predicate-dont-vectorize&quot;, &quot;prefers tail-folding, don't attempt vectorization if &quot; &quot;tail-folding fails.&quot;)))</div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1VFShape_html_a33df83a8555fc8dd7c7d547576abb354"><div class="ttname"><a href="structllvm_1_1VFShape.html#a33df83a8555fc8dd7c7d547576abb354">llvm::VFShape::get</a></div><div class="ttdeci">static VFShape get(const CallInst &amp;CI, ElementCount EC, bool HasGlobalPred)</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00108">VectorUtils.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a82dd10b626a629b9bb7d32d53a8e0884"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a82dd10b626a629b9bb7d32d53a8e0884">llvm::MachineFunction::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Return the DataLayout attached to the Module associated to this MF.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00292">MachineFunction.cpp:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_aa6717c9edc2614476ebb19bd73e8bcb8"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#aa6717c9edc2614476ebb19bd73e8bcb8">llvm::LoopVectorizationLegality::isSafeForAnyVectorWidth</a></div><div class="ttdeci">bool isSafeForAnyVectorWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00364">LoopVectorizationLegality.h:364</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00047">PatternMatch.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a83d8036930a033b196409ced5c9409e5"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a83d8036930a033b196409ced5c9409e5">llvm::LoopInfoBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00971">LoopInfo.h:971</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPDef_html_aaf083d927b62b4d6c146386a66f86b42"><div class="ttname"><a href="classllvm_1_1VPDef.html#aaf083d927b62b4d6c146386a66f86b42">llvm::VPDef::definedValues</a></div><div class="ttdeci">ArrayRef&lt; VPValue * &gt; definedValues()</div><div class="ttdoc">Returns an ArrayRef of the values defined by the VPDef.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00403">VPlanValue.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPBlockBase_html_a33d7fc49dbb786dce0e0c5762f067935"><div class="ttname"><a href="classllvm_1_1VPBlockBase.html#a33d7fc49dbb786dce0e0c5762f067935">llvm::VPBlockBase::getExitingBasicBlock</a></div><div class="ttdeci">const VPBasicBlock * getExitingBasicBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00172">VPlan.cpp:172</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_1_1CFGState_html_a0741c1fb9535c8e4dcd98d3f1f41474d"><div class="ttname"><a href="structllvm_1_1VPTransformState_1_1CFGState.html#a0741c1fb9535c8e4dcd98d3f1f41474d">llvm::VPTransformState::CFGState::VPBB2IRBB</a></div><div class="ttdeci">SmallDenseMap&lt; VPBasicBlock *, BasicBlock * &gt; VPBB2IRBB</div><div class="ttdoc">A mapping of each VPBasicBlock to the corresponding BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00344">VPlan.h:344</a></div></div>
<div class="ttc" id="aDenseMapInfo_8h_html"><div class="ttname"><a href="DenseMapInfo_8h.html">DenseMapInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_html_ac0b363a134c3bfac25ba209704ef3ee3"><div class="ttname"><a href="structllvm_1_1VPTransformState.html#ac0b363a134c3bfac25ba209704ef3ee3">llvm::VPTransformState::Plan</a></div><div class="ttdeci">VPlan * Plan</div><div class="ttdoc">Pointer to the VPlan code is generated for.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00371">VPlan.h:371</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a8c25146329f69e026508656cfb1280fa"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a8c25146329f69e026508656cfb1280fa">llvm::LoopVectorizationCostModel::isLegalMaskedStore</a></div><div class="ttdeci">bool isLegalMaskedStore(Type *DataType, Value *Ptr, Align Alignment) const</div><div class="ttdoc">Returns true if the target machine supports masked store operation for the given DataType and kind of...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01441">LoopVectorize.cpp:1441</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_adce80172b05bc0a227fbd5e3d7bb80f2"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#adce80172b05bc0a227fbd5e3d7bb80f2">llvm::LoopVectorizationPlanner::hasPlanWithVF</a></div><div class="ttdeci">bool hasPlanWithVF(ElementCount VF) const</div><div class="ttdoc">Look through the existing plans and return true if we have one with all the vectorization factors in ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00324">LoopVectorizationPlanner.h:324</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ae934d6e99e0516d606ae8e65ff6aed63"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ae934d6e99e0516d606ae8e65ff6aed63">llvm::IRBuilderBase::CreateStepVector</a></div><div class="ttdeci">Value * CreateStepVector(Type *DstType, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Creates a vector of type DstType with the linear sequence &lt;0, 1, ...&gt;</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00110">IRBuilder.cpp:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a40ed7274ff11f079e5b5eae34c818c51"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">llvm::IRBuilderBase::CreateVectorSplat</a></div><div class="ttdeci">Value * CreateVectorSplat(unsigned NumElts, Value *V, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Return a vector value that contains.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l01249">IRBuilder.cpp:1249</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a1833d18292c92e20a003f7074e518060"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a1833d18292c92e20a003f7074e518060">llvm::LoopVectorizePass::PSI</a></div><div class="ttdeci">ProfileSummaryInfo * PSI</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00183">LoopVectorize.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a12f25864d2ad4955cb285d871a36345b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a12f25864d2ad4955cb285d871a36345b">llvm::TargetTransformInfo::enableAggressiveInterleaving</a></div><div class="ttdeci">bool enableAggressiveInterleaving(bool LoopHasReductions) const</div><div class="ttdoc">Don't restrict interleaved unrolling to small loops.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00548">TargetTransformInfo.cpp:548</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html_aefeda9454a5e8dfcec3deb106964832a"><div class="ttname"><a href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">llvm::SCEV::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">Return the LLVM type of this SCEV expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00401">ScalarEvolution.cpp:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_aee44336886a06f3c1b8c35c701ba8316"><div class="ttname"><a href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">llvm::getLoadStorePointerOperand</a></div><div class="ttdeci">const Value * getLoadStorePointerOperand(const Value *V)</div><div class="ttdoc">A helper function that returns the pointer operand of a load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05363">Instructions.h:5363</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPHeaderPHIRecipe_html_abd2e60d914344d3ae5b98d7965868320"><div class="ttname"><a href="classllvm_1_1VPHeaderPHIRecipe.html#abd2e60d914344d3ae5b98d7965868320">llvm::VPHeaderPHIRecipe::getBackedgeValue</a></div><div class="ttdeci">VPValue * getBackedgeValue()</div><div class="ttdoc">Returns the incoming value from the loop backedge.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01163">VPlan.h:1163</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_aef6d2bea715d1793e956f41ddeea2320"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">llvm::ScalarEvolution::getAddExpr</a></div><div class="ttdeci">const SCEV * getAddExpr(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap, unsigned Depth=0)</div><div class="ttdoc">Get a canonical add expression, or something simpler if possible.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02537">ScalarEvolution.cpp:2537</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_acd365b8b4ea77d1a2c7bb1eabdd7d4f6"><div class="ttname"><a href="LoopVectorize_8cpp.html#acd365b8b4ea77d1a2c7bb1eabdd7d4f6">getReciprocalPredBlockProb</a></div><div class="ttdeci">static unsigned getReciprocalPredBlockProb()</div><div class="ttdoc">A helper function that returns the reciprocal of the block probability of predicated blocks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00391">LoopVectorize.cpp:391</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a8dad5abc2bd929acd8391643b2dbe4c5"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a8dad5abc2bd929acd8391643b2dbe4c5">llvm::RecurrenceDescriptor::isOrdered</a></div><div class="ttdeci">bool isOrdered() const</div><div class="ttdoc">Expose an ordered FP reduction to the instance users.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00260">IVDescriptors.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00313">Type.cpp:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af691775d5a45e28afbdb3e97cab22eee"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">llvm::LoopBase::isLoopExiting</a></div><div class="ttdeci">bool isLoopExiting(const BlockT *BB) const</div><div class="ttdoc">True if terminator in the block can branch to another block that is outside of the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00242">LoopInfo.h:242</a></div></div>
<div class="ttc" id="anamespacellvm_html_a689f785bfa4f3650dc44d519df0406fd"><div class="ttname"><a href="namespacellvm.html#a689f785bfa4f3650dc44d519df0406fd">llvm::createStrideMask</a></div><div class="ttdeci">llvm::SmallVector&lt; int, 16 &gt; createStrideMask(unsigned Start, unsigned Stride, unsigned VF)</div><div class="ttdoc">Create a stride shuffle mask.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00975">VectorUtils.cpp:975</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a4714bf2e30b65997d553264e047245f1"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a4714bf2e30b65997d553264e047245f1">llvm::LoopVectorizationCostModel::Legal</a></div><div class="ttdeci">LoopVectorizationLegality * Legal</div><div class="ttdoc">Vectorization legality.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01850">LoopVectorize.cpp:1850</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a64cd54bcf6a18f67300e34ef9deeb4fc"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a64cd54bcf6a18f67300e34ef9deeb4fc">llvm::LoopVectorizationLegality::getInductionVars</a></div><div class="ttdeci">const InductionList &amp; getInductionVars() const</div><div class="ttdoc">Returns the induction variables found in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00291">LoopVectorizationLegality.h:291</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a4f213123efd9b8524e1a413c15ed43bf"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a4f213123efd9b8524e1a413c15ed43bf">llvm::LoopVectorizationLegality::getPrimaryInduction</a></div><div class="ttdeci">PHINode * getPrimaryInduction()</div><div class="ttdoc">Returns the primary induction variable.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00285">LoopVectorizationLegality.h:285</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">llvm::CallingConv::Tail</a></div><div class="ttdeci">@ Tail</div><div class="ttdoc">Attemps to make calls as fast as possible while guaranteeing that tail call optimization can always b...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00076">CallingConv.h:76</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a525145697638ba4415e19d92a4946b30"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a525145697638ba4415e19d92a4946b30">llvm::LoopVectorizePass::runImpl</a></div><div class="ttdeci">LoopVectorizeResult runImpl(Function &amp;F, ScalarEvolution &amp;SE_, LoopInfo &amp;LI_, TargetTransformInfo &amp;TTI_, DominatorTree &amp;DT_, BlockFrequencyInfo &amp;BFI_, TargetLibraryInfo *TLI_, DemandedBits &amp;DB_, AssumptionCache &amp;AC_, LoopAccessInfoManager &amp;LAIs_, OptimizationRemarkEmitter &amp;ORE_, ProfileSummaryInfo *PSI_)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l10532">LoopVectorize.cpp:10532</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdoc">This function has undefined behavior.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04773">Instructions.h:4773</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerEpilogueLoop_html_a07454ac2b11a89ba60771243779a58e4"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html#a07454ac2b11a89ba60771243779a58e4">llvm::EpilogueVectorizerEpilogueLoop::printDebugTracesAtEnd</a></div><div class="ttdeci">void printDebugTracesAtEnd() override</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08041">LoopVectorize.cpp:8041</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8cbe006c6c069502d37891c438847c23"><div class="ttname"><a href="classllvm_1_1Type.html#a8cbe006c6c069502d37891c438847c23">llvm::Type::isAggregateType</a></div><div class="ttdeci">bool isAggregateType() const</div><div class="ttdoc">Return true if the type is an aggregate type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00288">Type.h:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af67833027bb46ddb390684a6f0b75398"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af67833027bb46ddb390684a6f0b75398">llvm::TargetTransformInfo::getCallInstrCost</a></div><div class="ttdeci">InstructionCost getCallInstrCost(Function *F, Type *RetTy, ArrayRef&lt; Type * &gt; Tys, TTI::TargetCostKind CostKind=TTI::TCK_SizeAndLatency) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00991">TargetTransformInfo.cpp:991</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_a53aeb820a8f9180fbf7894a987025f35"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#a53aeb820a8f9180fbf7894a987025f35">llvm::RecurrenceDescriptor::getLoopExitInstr</a></div><div class="ttdeci">Instruction * getLoopExitInstr() const</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00206">IVDescriptors.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_acd347d07162a5a80dac61e5bdea9616c"><div class="ttname"><a href="classllvm_1_1CastInst.html#acd347d07162a5a80dac61e5bdea9616c">llvm::CastInst::CreatePointerCast</a></div><div class="ttdeci">static CastInst * CreatePointerCast(Value *S, Type *Ty, const Twine &amp;Name, BasicBlock *InsertAtEnd)</div><div class="ttdoc">Create a BitCast AddrSpaceCast, or a PtrToInt cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03446">Instructions.cpp:3446</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_ac4804fc99b4e6fcfe166821970d0dd1c"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#ac4804fc99b4e6fcfe166821970d0dd1c">llvm::InnerLoopVectorizer::clearReductionWrapFlags</a></div><div class="ttdeci">void clearReductionWrapFlags(VPReductionPHIRecipe *PhiR, VPTransformState &amp;State)</div><div class="ttdoc">Clear NSW/NUW flags from reduction instructions if necessary.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l04092">LoopVectorize.cpp:4092</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkAnalysisFPCommute_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkAnalysisFPCommute.html">llvm::OptimizationRemarkAnalysisFPCommute</a></div><div class="ttdoc">Diagnostic information for optimization analysis remarks related to floating-point non-commutativity.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00853">DiagnosticInfo.h:853</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ae6726acc1703b8e5e7e9688621c67c33"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ae6726acc1703b8e5e7e9688621c67c33">llvm::IRBuilderBase::CreateSub</a></div><div class="ttdeci">Value * CreateSub(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01259">IRBuilder.h:1259</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_a680ae08c1b9b93cebdd6cbb726fe8f3d"><div class="ttname"><a href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a></div><div class="ttdeci">static BinaryOperator * CreateAdd(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00241">Reassociate.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1EpilogueVectorizerEpilogueLoop_html"><div class="ttname"><a href="classllvm_1_1EpilogueVectorizerEpilogueLoop.html">llvm::EpilogueVectorizerEpilogueLoop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00865">LoopVectorize.cpp:865</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1Region_html"><div class="ttname"><a href="classllvm_1_1Region.html">llvm::Region</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00889">RegionInfo.h:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a1f52585230b8a3cb8bf4a30f8e51bfb4"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a1f52585230b8a3cb8bf4a30f8e51bfb4">llvm::InnerLoopVectorizer::MinProfitableTripCount</a></div><div class="ttdeci">ElementCount MinProfitableTripCount</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00679">LoopVectorize.cpp:679</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a37be3438527bbb5e58f5307500c332c5"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a37be3438527bbb5e58f5307500c332c5">llvm::LoopVectorizationLegality::getMaxSafeDepDistBytes</a></div><div class="ttdeci">unsigned getMaxSafeDepDistBytes()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00368">LoopVectorizationLegality.h:368</a></div></div>
<div class="ttc" id="astructllvm_1_1VFRange_html_a8f3e6ec0ac823874aa93cc9d98081701"><div class="ttname"><a href="structllvm_1_1VFRange.html#a8f3e6ec0ac823874aa93cc9d98081701">llvm::VFRange::End</a></div><div class="ttdeci">ElementCount End</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00089">VPlan.h:89</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_a7f747c69642f19f752c81b35e8133142"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#a7f747c69642f19f752c81b35e8133142">llvm::VPlanTransforms::mergeBlocksIntoPredecessors</a></div><div class="ttdeci">static bool mergeBlocksIntoPredecessors(VPlan &amp;Plan)</div><div class="ttdoc">Remove redundant VPBasicBlocks by merging them into their predecessor if the predecessor has a single...</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00317">VPlanTransforms.cpp:317</a></div></div>
<div class="ttc" id="aclassllvm_1_1RecurrenceDescriptor_html_af08d243545b64f4b77161992d0e2366e"><div class="ttname"><a href="classllvm_1_1RecurrenceDescriptor.html#af08d243545b64f4b77161992d0e2366e">llvm::RecurrenceDescriptor::isMinMaxRecurrenceKind</a></div><div class="ttdeci">static bool isMinMaxRecurrenceKind(RecurKind Kind)</div><div class="ttdoc">Returns true if the recurrence kind is any min/max kind.</div><div class="ttdef"><b>Definition:</b> <a href="IVDescriptors_8h_source.html#l00233">IVDescriptors.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_a6e9c2a69cd9bc0e46626f5302a03d3da"><div class="ttname"><a href="classllvm_1_1VPlan.html#a6e9c2a69cd9bc0e46626f5302a03d3da">llvm::VPlan::hasUF</a></div><div class="ttdeci">bool hasUF(unsigned UF) const</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02271">VPlan.h:2271</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00090">M68kBaseInfo.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5d4f35a197e7b0f2320bdbbf518bd9da0a5c3a3ea2de39aa77f3e6da8de4d5bd"><div class="ttname"><a href="namespacellvm.html#ab5d4f35a197e7b0f2320bdbbf518bd9da0a5c3a3ea2de39aa77f3e6da8de4d5bd">llvm::CM_ScalarEpilogueNotAllowedLowTripLoop</a></div><div class="ttdeci">@ CM_ScalarEpilogueNotAllowedLowTripLoop</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01139">LoopVectorize.cpp:1139</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksRPO_html_ad75769a81e0bebc6db0793566a4486fb"><div class="ttname"><a href="classllvm_1_1LoopBlocksRPO.html#ad75769a81e0bebc6db0793566a4486fb">llvm::LoopBlocksRPO::perform</a></div><div class="ttdeci">void perform(LoopInfo *LI)</div><div class="ttdoc">Traverse the loop blocks and store the DFS result.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00180">LoopIterator.h:180</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ae52dda6f96edd7c80db048491bd8af99"><div class="ttname"><a href="LoopVectorize_8cpp.html#ae52dda6f96edd7c80db048491bd8af99">ForceTargetNumScalarRegs</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ForceTargetNumScalarRegs(&quot;force-target-num-scalar-regs&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;A flag that overrides the target's number of scalar registers.&quot;))</div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a623732b7467b6516344dec814819f258"><div class="ttname"><a href="LoopVectorize_8cpp.html#a623732b7467b6516344dec814819f258">ForceSafeDivisor</a></div><div class="ttdeci">static cl::opt&lt; cl::boolOrDefault &gt; ForceSafeDivisor(&quot;force-widen-divrem-via-safe-divisor&quot;, cl::Hidden, cl::desc(&quot;Override cost based safe divisor widening for div/rem instructions&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1VPBasicBlock_html_a72533c6b54501809628b9daee79b9d18"><div class="ttname"><a href="classllvm_1_1VPBasicBlock.html#a72533c6b54501809628b9daee79b9d18">llvm::VPBasicBlock::getFirstNonPhi</a></div><div class="ttdeci">iterator getFirstNonPhi()</div><div class="ttdoc">Return the position of the first non-phi node recipe in the block.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8cpp_source.html#l00207">VPlan.cpp:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a12f564436f7f84cd23ee0653c9eef13a"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a12f564436f7f84cd23ee0653c9eef13a">llvm::LoopVectorizationCostModel::isAccessInterleaved</a></div><div class="ttdeci">bool isAccessInterleaved(Instruction *Instr)</div><div class="ttdoc">Check if Instr belongs to any interleaved access group.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01523">LoopVectorize.cpp:1523</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a85afe07533e500a31222b17f80b540fe"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a85afe07533e500a31222b17f80b540fe">llvm::LoopVectorizationCostModel::invalidateCostModelingDecisions</a></div><div class="ttdeci">void invalidateCostModelingDecisions()</div><div class="ttdoc">Invalidates decisions already taken by the cost model.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01613">LoopVectorize.cpp:1613</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; Value * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredicatedScalarEvolution_html_a872704344573663359494dca7554c198"><div class="ttname"><a href="classllvm_1_1PredicatedScalarEvolution.html#a872704344573663359494dca7554c198">llvm::PredicatedScalarEvolution::getSE</a></div><div class="ttdeci">ScalarEvolution * getSE() const</div><div class="ttdoc">Returns the ScalarEvolution analysis used.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02312">ScalarEvolution.h:2312</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBuilder_html_a6d8fbabf45554d7d598dc8eb4eca41cf"><div class="ttname"><a href="classllvm_1_1VPRecipeBuilder.html#a6d8fbabf45554d7d598dc8eb4eca41cf">llvm::VPRecipeBuilder::fixHeaderPhis</a></div><div class="ttdeci">void fixHeaderPhis()</div><div class="ttdoc">Add the incoming values from the backedge to reduction &amp; first-order recurrence cross-iteration phis.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08533">LoopVectorize.cpp:8533</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a55ab1072c44295ad279535d714a0f33ea980c2c6e59ca5dcf413baa325d8bc385"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a55ab1072c44295ad279535d714a0f33ea980c2c6e59ca5dcf413baa325d8bc385">llvm::LoopVectorizeHints::FK_Disabled</a></div><div class="ttdeci">@ FK_Disabled</div><div class="ttdoc">Forcing disabled.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00110">LoopVectorizationLegality.h:110</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_a2c95f95757d9c56b7a89d7f8b3278581"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#a2c95f95757d9c56b7a89d7f8b3278581">llvm::InnerLoopVectorizer::VectorTripCount</a></div><div class="ttdeci">Value * VectorTripCount</div><div class="ttdoc">Trip count of the widened loop (TripCount - TripCount % (VF*UF))</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00716">LoopVectorize.cpp:716</a></div></div>
<div class="ttc" id="aLoopStrengthReduce_8cpp_html_a175f1f53cc9c3619505ffbd13aca087f"><div class="ttname"><a href="LoopStrengthReduce_8cpp.html#a175f1f53cc9c3619505ffbd13aca087f">Reduction</a></div><div class="ttdeci">loop Loop Strength Reduction</div><div class="ttdef"><b>Definition:</b> <a href="LoopStrengthReduce_8cpp_source.html#l07017">LoopStrengthReduce.cpp:7017</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a5a6989eb41033f67be080858c27d840a"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a5a6989eb41033f67be080858c27d840a">llvm::TargetTransformInfo::getRegUsageForType</a></div><div class="ttdeci">unsigned getRegUsageForType(Type *Ty) const</div><div class="ttdoc">Returns the estimated number of registers required to represent Ty.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00502">TargetTransformInfo.cpp:502</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00935">BasicBlockUtils.cpp:935</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPValue_html_adba3c433337db6652e3701f9527fd701"><div class="ttname"><a href="classllvm_1_1VPValue.html#adba3c433337db6652e3701f9527fd701">llvm::VPValue::getUnderlyingValue</a></div><div class="ttdeci">Value * getUnderlyingValue()</div><div class="ttdoc">Return the underlying Value attached to this VPValue.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanValue_8h_source.html#l00084">VPlanValue.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_adaaea0309983a4c327ced82a739cf1c4"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#adaaea0309983a4c327ced82a739cf1c4">llvm::MIPatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; SubPat &gt; m_OneUse(const SubPat &amp;SP)</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00047">MIPatternMatch.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0b3c6dc8e7df65d2385acfe9657abd03"><div class="ttname"><a href="namespacellvm.html#a0b3c6dc8e7df65d2385acfe9657abd03">llvm::getLoopEstimatedTripCount</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getLoopEstimatedTripCount(Loop *L, unsigned *EstimatedLoopInvocationWeight=nullptr)</div><div class="ttdoc">Returns a loop's estimated trip count based on branch weight metadata.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00811">LoopUtils.cpp:811</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html_a4541962f9c18aacceb7243520eb15e1f"><div class="ttname"><a href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">llvm::SCEV::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Return true if the expression is a constant zero.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00460">ScalarEvolution.cpp:460</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html"><div class="ttname"><a href="classllvm_1_1VPlan.html">llvm::VPlan</a></div><div class="ttdoc">VPlan models a candidate for vectorization, encoding various decisions take to produce efficient outp...</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02166">VPlan.h:2166</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">llvm::OptimizationRemarkEmitterAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00164">OptimizationRemarkEmitter.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a3ce10d1174bdfcac2b73ed7efa352b7f"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a3ce10d1174bdfcac2b73ed7efa352b7f">llvm::LoopVectorizationLegality::canVectorize</a></div><div class="ttdeci">bool canVectorize(bool UseVPlanNativePath)</div><div class="ttdoc">Returns true if it is legal to vectorize this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8cpp_source.html#l01289">LoopVectorizationLegality.cpp:1289</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a51be961763c595602654e8d825f26b59"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a51be961763c595602654e8d825f26b59">llvm::LoopVectorizePass::LoopVectorizePass</a></div><div class="ttdeci">LoopVectorizePass(LoopVectorizeOptions Opts={})</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l10101">LoopVectorize.cpp:10101</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerLoopVectorizer_html_af35c2cd70263a0ef121763297ec04fde"><div class="ttname"><a href="classllvm_1_1InnerLoopVectorizer.html#af35c2cd70263a0ef121763297ec04fde">llvm::InnerLoopVectorizer::fixReduction</a></div><div class="ttdeci">void fixReduction(VPReductionPHIRecipe *Phi, VPTransformState &amp;State)</div><div class="ttdoc">Create code for the loop exit value of the reduction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03893">LoopVectorize.cpp:3893</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPRecipeBase_html_a8859e5e8cad5653b278964f47414fd84"><div class="ttname"><a href="classllvm_1_1VPRecipeBase.html#a8859e5e8cad5653b278964f47414fd84">llvm::VPRecipeBase::insertBefore</a></div><div class="ttdeci">void insertBefore(VPRecipeBase *InsertPos)</div><div class="ttdoc">Insert an unlinked recipe into a basic block immediately before the specified recipe.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanRecipes_8cpp_source.html#l00157">VPlanRecipes.cpp:157</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ad9ccfd67ade0a19f66ed80f54583ac84"><div class="ttname"><a href="LoopVectorize_8cpp.html#ad9ccfd67ade0a19f66ed80f54583ac84">addCanonicalIVRecipes</a></div><div class="ttdeci">static void addCanonicalIVRecipes(VPlan &amp;Plan, Type *IdxTy, DebugLoc DL, TailFoldingStyle Style)</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08768">LoopVectorize.cpp:8768</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationLegality_html_a3ba2418cb3fe3918cd5cfa5f6fdce778"><div class="ttname"><a href="classllvm_1_1LoopVectorizationLegality.html#a3ba2418cb3fe3918cd5cfa5f6fdce778">llvm::LoopVectorizationLegality::getWidestInductionType</a></div><div class="ttdeci">Type * getWidestInductionType()</div><div class="ttdoc">Returns the widest induction type.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00297">LoopVectorizationLegality.h:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba59b32ea7b6f10564abd40ad90602ca5b">llvm::TargetTransformInfo::TCK_RecipThroughput</a></div><div class="ttdeci">@ TCK_RecipThroughput</div><div class="ttdoc">Reciprocal throughput.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00242">TargetTransformInfo.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_abe3531f2a6e2a86c1d35958794805785"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#abe3531f2a6e2a86c1d35958794805785">llvm::LoopVectorizationPlanner::getDecisionAndClampRange</a></div><div class="ttdeci">static bool getDecisionAndClampRange(const std::function&lt; bool(ElementCount)&gt; &amp;Predicate, VFRange &amp;Range)</div><div class="ttdoc">Test a Predicate on a Range of VF's.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l08047">LoopVectorize.cpp:8047</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a8c90e6c50e795b17466482a04947690e"><div class="ttname"><a href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, ElementCount EC)</div><div class="ttdoc">This static method is the primary way to construct an VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00670">Type.cpp:670</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_ac7423cc1aa92a399ed2921544c456c82"><div class="ttname"><a href="LoopVectorize_8cpp.html#ac7423cc1aa92a399ed2921544c456c82">getStepVector</a></div><div class="ttdeci">static Value * getStepVector(Value *Val, Value *StartIdx, Value *Step, Instruction::BinaryOps BinOp, ElementCount VF, IRBuilderBase &amp;Builder)</div><div class="ttdoc">This function adds (StartIdx * Step, (StartIdx + 1) * Step, (StartIdx + 2) * Step,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l02319">LoopVectorize.cpp:2319</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ad4613def4002aa69721553e567ca4187"><div class="ttname"><a href="classllvm_1_1Instruction.html#ad4613def4002aa69721553e567ca4187">llvm::Instruction::dropPoisonGeneratingFlags</a></div><div class="ttdeci">void dropPoisonGeneratingFlags()</div><div class="ttdoc">Drops flags that may cause this instruction to evaluate to poison despite having non-poison inputs.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00185">Instruction.cpp:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a598f8ca344de1cfac7a7985b212bb66b"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a598f8ca344de1cfac7a7985b212bb66b">llvm::LoopVectorizationCostModel::TLI</a></div><div class="ttdeci">const TargetLibraryInfo * TLI</div><div class="ttdoc">Target Library Info.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01856">LoopVectorize.cpp:1856</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html">llvm::LoopVectorizePass</a></div><div class="ttdoc">The LoopVectorize Pass.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00160">LoopVectorize.h:160</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a7051c657436b4eaefa4d4d00bea4f5af"><div class="ttname"><a href="LoopVectorize_8cpp.html#a7051c657436b4eaefa4d4d00bea4f5af">TinyTripCountInterleaveThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TinyTripCountInterleaveThreshold(&quot;tiny-trip-count-interleave-threshold&quot;, cl::init(128), cl::Hidden, cl::desc(&quot;We don't interleave loops with a estimated constant trip count &quot; &quot;below this number&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1VPReductionPHIRecipe_html_a112e27c97277737aa1f032745de25bcd"><div class="ttname"><a href="classllvm_1_1VPReductionPHIRecipe.html#a112e27c97277737aa1f032745de25bcd">llvm::VPReductionPHIRecipe::isOrdered</a></div><div class="ttdeci">bool isOrdered() const</div><div class="ttdoc">Returns true, if the phi is part of an ordered reduction.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l01321">VPlan.h:1321</a></div></div>
<div class="ttc" id="aX86LowerAMXIntrinsics_8cpp_html_adb9257105a403ef9d0773b87693f7779"><div class="ttname"><a href="X86LowerAMXIntrinsics_8cpp.html#adb9257105a403ef9d0773b87693f7779">PassName</a></div><div class="ttdeci">static const char PassName[]</div><div class="ttdef"><b>Definition:</b> <a href="X86LowerAMXIntrinsics_8cpp_source.html#l00671">X86LowerAMXIntrinsics.cpp:671</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a159b9f91d009fa5484c1cbad8f102c17"><div class="ttname"><a href="LoopVectorize_8cpp.html#a159b9f91d009fa5484c1cbad8f102c17">PreferPredicatedReductionSelect</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PreferPredicatedReductionSelect(&quot;prefer-predicated-reduction-select&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Prefer predicating a reduction operation over an after loop select.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a87d85287259123dfc6486631084f94b6"><div class="ttname"><a href="namespacellvm.html#a87d85287259123dfc6486631084f94b6">llvm::getLoadStoreAlignment</a></div><div class="ttdeci">Align getLoadStoreAlignment(Value *I)</div><div class="ttdoc">A helper function that returns the alignment of load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05389">Instructions.h:5389</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_abd75237965fb9548c506a19549c4a260ae849d400780f51424bc4e4c26ddf3000"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#abd75237965fb9548c506a19549c4a260ae849d400780f51424bc4e4c26ddf3000">llvm::LoopVectorizationCostModel::CM_GatherScatter</a></div><div class="ttdeci">@ CM_GatherScatter</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l01340">LoopVectorize.cpp:1340</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a213e6c0ca6e838157373b9a6018c0769"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">llvm::PatternMatch::m_LogicalAnd</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::And &gt; m_LogicalAnd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L &amp;&amp; R either in the form of L &amp; R or L ? R : false.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02556">PatternMatch.h:2556</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizeHints_html_a475b1d2223ddab6c0ab44dfcea7dcba7"><div class="ttname"><a href="classllvm_1_1LoopVectorizeHints.html#a475b1d2223ddab6c0ab44dfcea7dcba7">llvm::LoopVectorizeHints::isPotentiallyUnsafe</a></div><div class="ttdeci">bool isPotentiallyUnsafe() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationLegality_8h_source.html#l00177">LoopVectorizationLegality.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac63dbb4994494c46f025715272cdb81e"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">llvm::CallBase::args</a></div><div class="ttdeci">iterator_range&lt; User::op_iterator &gt; args()</div><div class="ttdoc">Iteration adapter for range-for loops.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01342">InstrTypes.h:1342</a></div></div>
<div class="ttc" id="astructllvm_1_1VPTransformState_1_1CFGState_html_a061d9589bb7761e43240335084adab45"><div class="ttname"><a href="structllvm_1_1VPTransformState_1_1CFGState.html#a061d9589bb7761e43240335084adab45">llvm::VPTransformState::CFGState::PrevBB</a></div><div class="ttdeci">BasicBlock * PrevBB</div><div class="ttdoc">The previous IR BasicBlock created or used.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l00336">VPlan.h:336</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a483f68557374e8fc58f8a294e7f1268e"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a483f68557374e8fc58f8a294e7f1268e">llvm::IRBuilderBase::CreateMaskedLoad</a></div><div class="ttdeci">CallInst * CreateMaskedLoad(Type *Ty, Value *Ptr, Align Alignment, Value *Mask, Value *PassThru=nullptr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Create a call to Masked Load intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00588">IRBuilder.cpp:588</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a971522b36bf432ad69a0083581ab4108"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">llvm::PatternMatch::m_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul &gt; m_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01045">PatternMatch.h:1045</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_afcbf4a19be078644e784b539379d59b7"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#afcbf4a19be078644e784b539379d59b7">llvm::LoopVectorizationCostModel::collectInstsToScalarize</a></div><div class="ttdeci">void collectInstsToScalarize(ElementCount VF)</div><div class="ttdoc">Collects the instructions to scalarize for each predicated instruction in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l06173">LoopVectorize.cpp:6173</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a3bf55ccbbeedcfb8cd2a1bd62c0ad91a"><div class="ttname"><a href="LoopVectorize_8cpp.html#a3bf55ccbbeedcfb8cd2a1bd62c0ad91a">LLVMLoopVectorizeFollowupAll</a></div><div class="ttdeci">const char LLVMLoopVectorizeFollowupAll[]</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00165">LoopVectorize.cpp:165</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_af4e171d085c0c20949584a32ee65acce"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#af4e171d085c0c20949584a32ee65acce">llvm::LoopVectorizePass::DT</a></div><div class="ttdeci">DominatorTree * DT</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00176">LoopVectorize.h:176</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_af81c826ee51addc3321e4ef1c1934696"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#af81c826ee51addc3321e4ef1c1934696">llvm::InterleaveGroup::getNumMembers</a></div><div class="ttdeci">uint32_t getNumMembers() const</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8h_source.html#l00656">VectorUtils.h:656</a></div></div>
<div class="ttc" id="anamespacellvm_html_afbbb84b4e3862dbf87ff3b6966dab634"><div class="ttname"><a href="namespacellvm.html#afbbb84b4e3862dbf87ff3b6966dab634">llvm::createLoopVectorizePass</a></div><div class="ttdeci">Pass * createLoopVectorizePass()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07405">LoopVectorize.cpp:7405</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_ad5180469a22eefe055d29c1cef4d47a3"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#ad5180469a22eefe055d29c1cef4d47a3">llvm::LoopVectorizationCostModel::getVectorCallCost</a></div><div class="ttdeci">InstructionCost getVectorCallCost(CallInst *CI, ElementCount VF, Function **Variant, bool *NeedsMask=nullptr) const</div><div class="ttdoc">Estimate cost of a call instruction CI if it were vectorized with factor VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l03452">LoopVectorize.cpp:3452</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00108">Instruction.cpp:108</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a717c84dccaec7d7928d41106e5c42684"><div class="ttname"><a href="LoopVectorize_8cpp.html#a717c84dccaec7d7928d41106e5c42684">MaximizeBandwidth</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; MaximizeBandwidth(&quot;vectorizer-maximize-bandwidth&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Maximize bandwidth when selecting vectorization factor which &quot; &quot;will be determined by the smallest type in loop.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationCostModel_html_a1fa63b37ad2ac06f289e9962a3703e9e"><div class="ttname"><a href="classllvm_1_1LoopVectorizationCostModel.html#a1fa63b37ad2ac06f289e9962a3703e9e">llvm::LoopVectorizationCostModel::getSmallestAndWidestTypes</a></div><div class="ttdeci">std::pair&lt; unsigned, unsigned &gt; getSmallestAndWidestTypes()</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l05637">LoopVectorize.cpp:5637</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdoc">Class to represent function types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00103">DerivedTypes.h:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopVectorizePass_html_a7e7c40b0a986979535eddeb2bb6eae05"><div class="ttname"><a href="structllvm_1_1LoopVectorizePass.html#a7e7c40b0a986979535eddeb2bb6eae05">llvm::LoopVectorizePass::SE</a></div><div class="ttdeci">ScalarEvolution * SE</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8h_source.html#l00173">LoopVectorize.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVectorizationPlanner_html_a80f7a8ac8893c6bbd8d5a17805485e55"><div class="ttname"><a href="classllvm_1_1LoopVectorizationPlanner.html#a80f7a8ac8893c6bbd8d5a17805485e55">llvm::LoopVectorizationPlanner::getBestPlanFor</a></div><div class="ttdeci">VPlan &amp; getBestPlanFor(ElementCount VF) const</div><div class="ttdoc">Return the best VPlan for VF.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l07611">LoopVectorize.cpp:7611</a></div></div>
<div class="ttc" id="aclassllvm_1_1VPlan_html_ac46a4be911b69c85f5786626ce81569b"><div class="ttname"><a href="classllvm_1_1VPlan.html#ac46a4be911b69c85f5786626ce81569b">llvm::VPlan::getOrCreateTripCount</a></div><div class="ttdeci">VPValue * getOrCreateTripCount()</div><div class="ttdoc">The trip count of the original loop.</div><div class="ttdef"><b>Definition:</b> <a href="VPlan_8h_source.html#l02239">VPlan.h:2239</a></div></div>
<div class="ttc" id="astructllvm_1_1VectorizationFactor_html_acd24dfdad4f887e1f7b10c9039a05930"><div class="ttname"><a href="structllvm_1_1VectorizationFactor.html#acd24dfdad4f887e1f7b10c9039a05930">llvm::VectorizationFactor::Disabled</a></div><div class="ttdeci">static VectorizationFactor Disabled()</div><div class="ttdoc">Width 1 means no vectorization, cost 0 means uncomputed cost.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorizationPlanner_8h_source.html#l00207">LoopVectorizationPlanner.h:207</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1InterleaveGroup_html_a9c748347f137d9e3d6c51833e6882272"><div class="ttname"><a href="classllvm_1_1InterleaveGroup.html#a9c748347f137d9e3d6c51833e6882272">llvm::InterleaveGroup::addMetadata</a></div><div class="ttdeci">void addMetadata(InstTy *NewInst) const</div><div class="ttdoc">Add metadata (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l01516">VectorUtils.cpp:1516</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="aLoopVectorize_8cpp_html_a1a861c376095fff2ee736b0a743cc44e"><div class="ttname"><a href="LoopVectorize_8cpp.html#a1a861c376095fff2ee736b0a743cc44e">debugVectorizationMessage</a></div><div class="ttdeci">static void debugVectorizationMessage(const StringRef Prefix, const StringRef DebugMsg, Instruction *I)</div><div class="ttdoc">Write a DebugMsg about vectorization to the debug output stream.</div><div class="ttdef"><b>Definition:</b> <a href="LoopVectorize_8cpp_source.html#l00917">LoopVectorize.cpp:917</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00236">User.h:236</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a94d23373106467003722f7d6c17b1528"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, T &amp;&amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00809">SmallVector.h:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<div class="ttc" id="astructllvm_1_1VPlanTransforms_html_af25d938764b8634e70e95ff3f0c35129"><div class="ttname"><a href="structllvm_1_1VPlanTransforms.html#af25d938764b8634e70e95ff3f0c35129">llvm::VPlanTransforms::optimizeForVFAndUF</a></div><div class="ttdeci">static void optimizeForVFAndUF(VPlan &amp;Plan, ElementCount BestVF, unsigned BestUF, PredicatedScalarEvolution &amp;PSE)</div><div class="ttdoc">Optimize Plan based on BestVF and BestUF.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanTransforms_8cpp_source.html#l00498">VPlanTransforms.cpp:498</a></div></div>
<div class="ttc" id="anamespacellvm_html_af98e93062e9f33018307ffc64d4b009e"><div class="ttname"><a href="namespacellvm.html#af98e93062e9f33018307ffc64d4b009e">llvm::EnableLoopInterleaving</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableLoopInterleaving</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:38:56 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

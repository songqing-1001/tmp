<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/ARM/ARMLowOverheadLoops.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_4394675d1fa84070817ace1e93b57e8a.html">ARM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ARMLowOverheadLoops.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ARMLowOverheadLoops_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- ARMLowOverheadLoops.cpp - CodeGen Low-overhead Loops ---*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// Finalize v8.1-m low-overhead loops by converting the associated pseudo</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// instructions into machine operations.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// The expectation is that the loop contains three pseudo instructions:</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/// - t2*LoopStart - placed in the preheader or pre-preheader. The do-loop</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">///   form should be in the preheader, whereas the while form should be in the</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">///   preheaders only predecessor.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/// - t2LoopDec - placed within in the loop body.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/// - t2LoopEnd - the loop latch terminator.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/// In addition to this, we also look for the presence of the VCTP instruction,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/// which determines whether we can generated the tail-predicated low-overhead</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/// loop form.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/// Assumptions and Dependencies:</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/// Low-overhead loops are constructed and executed using a setup instruction:</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/// DLS, WLS, DLSTP or WLSTP and an instruction that loops back: LE or LETP.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/// WLS(TP) and LE(TP) are branching instructions with a (large) limited range</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/// but fixed polarity: WLS can only branch forwards and LE can only branch</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// backwards. These restrictions mean that this pass is dependent upon block</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// layout and block sizes, which is why it&#39;s the last pass to run. The same is</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// true for ConstantIslands, but this pass does not increase the size of the</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// basic blocks, nor does it change the CFG. Instructions are mainly removed</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// during the transform and pseudo instructions are replaced by real ones. In</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/// some cases, when we have to revert to a &#39;normal&#39; loop, we have to introduce</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/// multiple instructions for a single pseudo (see RevertWhile and</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// RevertLoopEnd). To handle this situation, t2WhileLoopStartLR and t2LoopEnd</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/// are defined to be as large as this maximum sequence of replacement</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/// instructions.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/// A note on VPR.P0 (the lane mask):</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// VPT, VCMP, VPNOT and VCTP won&#39;t overwrite VPR.P0 when they update it in a</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/// &quot;VPT Active&quot; context (which includes low-overhead loops and vpt blocks).</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/// They will simply &quot;and&quot; the result of their calculation with the current</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// value of VPR.P0. You can think of it like this:</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/// \verbatim</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/// if VPT active:    ; Between a DLSTP/LETP, or for predicated instrs</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">///   VPR.P0 &amp;= Value</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/// else</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">///   VPR.P0 = Value</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/// \endverbatim</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// When we&#39;re inside the low-overhead loop (between DLSTP and LETP), we always</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// fall in the &quot;VPT active&quot; case, so we can consider that all VPR writes by</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// one of those instruction is actually a &quot;and&quot;.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ARM_8h.html">ARM.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ARMBaseInstrInfo_8h.html">ARMBaseInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ARMBaseRegisterInfo_8h.html">ARMBaseRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ARMBasicBlockInfo_8h.html">ARMBasicBlockInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ARMSubtarget_8h.html">ARMSubtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MVETailPredUtils_8h.html">MVETailPredUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Thumb2InstrInfo_8h.html">Thumb2InstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetOperations_8h.html">llvm/ADT/SetOperations.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LivePhysRegs_8h.html">llvm/CodeGen/LivePhysRegs.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopUtils_8h.html">llvm/CodeGen/MachineLoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ReachingDefAnalysis_8h.html">llvm/CodeGen/ReachingDefAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCInstrDesc_8h.html">llvm/MC/MCInstrDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   76</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;arm-low-overhead-loops&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">   77</a></span>&#160;<span class="preprocessor">#define ARM_LOW_OVERHEAD_LOOPS_NAME &quot;ARM Low Overhead Loops pass&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<a class="code" href="ARMLowOverheadLoops_8cpp.html#ae4be1491d9372bf9fb8a4ce158eb1421">DisableTailPredication</a>(<span class="stringliteral">&quot;arm-loloops-disable-tailpred&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable tail-predication in the ARM LowOverheadLoop pass&quot;</span>),</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a4c7cdd1a3013aaecff34dad81e4fefc7">DisableOmitDLS</a>(<span class="stringliteral">&quot;arm-disable-omit-dls&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable omitting &#39;dls lr, lr&#39; instructions&quot;</span>),</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                   <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">   89</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">isVectorPredicated</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">int</span> PIdx = <a class="code" href="namespacellvm.html#a0833f10a51730f325a49f05d5bc1d327">llvm::findFirstVPTPredOperandIdx</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> PIdx != -1 &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(PIdx + 1).getReg() == ARM::VPR;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">   94</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">isVectorPredicate</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;findRegisterDefOperandIdx(ARM::VPR) != -1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a57802d669faf5aa67bf5eea374072858">   98</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a57802d669faf5aa67bf5eea374072858">hasVPRUse</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.findRegisterUseOperandIdx(ARM::VPR) != -1;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a00f72b50a86f27bb8b126906a164f8ba">  102</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a00f72b50a86f27bb8b126906a164f8ba">isDomainMVE</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="CorrelatedValuePropagation_8cpp.html#aad75d6f4f14a7b791076c6785aa59be4">Domain</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDesc().TSFlags &amp; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a96db53f04326f6421725b16e4ee7a596">ARMII::DomainMask</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="CorrelatedValuePropagation_8cpp.html#aad75d6f4f14a7b791076c6785aa59be4">Domain</a> == <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305ab5112bfba90c616984021580dd1131b8">ARMII::DomainMVE</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#ad84c5ccc73435217f046a6fe26d547f9">  107</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#ad84c5ccc73435217f046a6fe26d547f9">getVecSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;MCID = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Flags = MCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">TSFlags</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> (Flags &amp; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea">ARMII::VecSize</a>) &gt;&gt; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a07023b4966d755e56b328349ef01a237">ARMII::VecSizeShift</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a9df1ebcc0b9226f9cfda9d5f73a21526">  113</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a9df1ebcc0b9226f9cfda9d5f73a21526">shouldInspect</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugInstr())</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a00f72b50a86f27bb8b126906a164f8ba">isDomainMVE</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a class="code" href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">isVectorPredicate</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a class="code" href="ARMLowOverheadLoops_8cpp.html#a57802d669faf5aa67bf5eea374072858">hasVPRUse</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">using</span> InstSet = <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;MachineInstr *&gt;</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">class </span>PostOrderLoopTraversal {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> &amp;<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;MLI;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock*, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock*, 4&gt;</a> Order;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    PostOrderLoopTraversal(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> &amp;ML, <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;MLI)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      : <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>), MLI(MLI) { }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock*&gt;</a> &amp;getOrder()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">return</span> Order;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// Visit all the blocks within the loop, as well as exit blocks and any</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// blocks properly dominating the header.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">void</span> ProcessLoop() {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;void(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*)&gt; Search = [<span class="keyword">this</span>, &amp;Search]</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>))</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Succ : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>()) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.contains(Succ))</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;          Search(Succ);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        Order.push_back(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      };</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="comment">// Insert exit blocks.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock*, 2&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getExitBlocks(ExitBlocks);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Order, ExitBlocks);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="comment">// Then add the loop body.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      Search(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getHeader());</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="comment">// Then try the preheader and its predecessors.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;void(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*)&gt; GetPredecessor =</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        [<span class="keyword">this</span>, &amp;GetPredecessor] (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        Order.push_back(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a03936a9b37da541420049422204ab206">pred_size</a>() == 1)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          GetPredecessor(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>());</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      };</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Preheader = <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getLoopPreheader())</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        GetPredecessor(Preheader);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Preheader = MLI.<a class="code" href="classllvm_1_1MachineLoopInfo.html#a80b0e6e28849491c5b267be8ffc909b4">findLoopPreheader</a>(&amp;ML, <span class="keyword">true</span>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        GetPredecessor(Preheader);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  };</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">struct </span>PredicatedMI {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;MachineInstr*&gt;</a> Predicates;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    PredicatedMI(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;MachineInstr *&gt;</a> &amp;Preds) : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &amp;&amp; <span class="stringliteral">&quot;Instruction must not be null!&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      Predicates.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Preds.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>(), Preds.<a class="code" href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">end</a>());</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  };</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// Represent the current state of the VPR and hold all instances which</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// represent a VPT block, which is a list of instructions that begins with a</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// VPT/VPST and has a maximum of four proceeding instructions. All</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// instructions within the block are predicated upon the vpr and we allow</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// instructions to define the vpr within in the block too.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keyword">class </span>VPTState {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">friend</span> <span class="keyword">struct </span>LowOverheadLoop;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 4&gt;</a> Insts;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">static</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPTState, 4&gt;</a> Blocks;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">static</span> <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;MachineInstr *&gt;</a> CurrentPredicates;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">static</span> std::map&lt;<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      std::unique_ptr&lt;PredicatedMI&gt;&gt; PredicatedInsts;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MVEVPTBlockPass_8cpp.html#a173df60eae8081683241de7888b84be8">CreateVPTBlock</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((CurrentPredicates.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent()-&gt;isLiveIn(ARM::VPR))</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;             &amp;&amp; <span class="stringliteral">&quot;Can&#39;t begin VPT without predicate&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      Blocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">// The execution of MI is predicated upon the current set of instructions</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="comment">// that are AND&#39;ed together to form the VPR predicate value. In the case</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="comment">// that MI is a VPT, CurrentPredicates will also just be MI.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      PredicatedInsts.emplace(</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, std::make_unique&lt;PredicatedMI&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CurrentPredicates));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> reset() {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      Blocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      PredicatedInsts.clear();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      CurrentPredicates.<a class="code" href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">clear</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> addInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      Blocks.back().<a class="code" href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      PredicatedInsts.emplace(</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, std::make_unique&lt;PredicatedMI&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CurrentPredicates));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> addPredicate(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Adding VPT Predicate: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      CurrentPredicates.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> resetPredicate(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Resetting VPT Predicate: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      CurrentPredicates.<a class="code" href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">clear</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      CurrentPredicates.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// Have we found an instruction within the block which defines the vpr? If</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// so, not all the instructions in the block will have the same predicate.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> hasUniformPredicate(VPTState &amp;Block) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">return</span> getDivergent(Block) == <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// If it exists, return the first internal instruction which modifies the</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// VPR.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *getDivergent(VPTState &amp;Block) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;Insts = <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.getInsts();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Insts.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Next = Insts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">isVectorPredicate</a>(Next))</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;          <span class="keywordflow">return</span> Next; <span class="comment">// Found an instruction altering the vpr.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// Return whether the given instruction is predicated upon a VCTP.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> isPredicatedOnVCTP(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">bool</span> Exclusive = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;MachineInstr *&gt;</a> &amp;Predicates = PredicatedInsts[<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>]-&gt;Predicates;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">if</span> (Exclusive &amp;&amp; Predicates.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>() != 1)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(Predicates, <a class="code" href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">isVCTP</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Is the VPST, controlling the block entry, predicated upon a VCTP.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> isEntryPredicatedOnVCTP(VPTState &amp;Block,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                        <span class="keywordtype">bool</span> Exclusive = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;Insts = <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.getInsts();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">return</span> isPredicatedOnVCTP(Insts.front(), Exclusive);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// If this block begins with a VPT, we can check whether it&#39;s using</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// at least one predicated input(s), as well as possible loop invariant</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// which would result in it being implicitly predicated.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> hasImplicitlyValidVPT(VPTState &amp;Block,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                      <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;Insts = <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.getInsts();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *VPT = Insts.front();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a32fb714dc42507917fed431c24b79020">isVPTOpcode</a>(VPT-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>()) &amp;&amp;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;             <span class="stringliteral">&quot;Expected VPT block to begin with VPT/VPST&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">if</span> (VPT-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() == ARM::MVE_VPST)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keyword">auto</span> IsOperandPredicated = [&amp;](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> Idx) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a36f4fc1556edfb50cca3fe85fcc05e93">getMIOperand</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(Idx));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> &amp;&amp; PredicatedInsts.count(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) &amp;&amp; isPredicatedOnVCTP(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      };</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keyword">auto</span> IsOperandInvariant = [&amp;](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> Idx) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(Idx);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>())</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> Defs;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a80f7d9c4184a1f142229021d46b9433e">getGlobalReachingDefs</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>(), Defs);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> (Defs.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>())</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> : Defs)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getParent() == VPT-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>())</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      };</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">// Check that at least one of the operands is directly predicated on a</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">// vctp and allow an invariant value too.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> (IsOperandPredicated(VPT, 1) || IsOperandPredicated(VPT, 2)) &amp;&amp;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;             (IsOperandPredicated(VPT, 1) || IsOperandInvariant(VPT, 1)) &amp;&amp;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;             (IsOperandPredicated(VPT, 2) || IsOperandInvariant(VPT, 2));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>(<a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="comment">// All predication within the loop should be based on vctp. If the block</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// isn&#39;t predicated on entry, check whether the vctp is within the block</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">// and that all other instructions are then predicated on it.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Block : Blocks) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (isEntryPredicatedOnVCTP(Block, <span class="keyword">false</span>) ||</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            hasImplicitlyValidVPT(Block, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>))</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;Insts = <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.getInsts();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// We don&#39;t know how to convert a block with just a VPT;VCTP into</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// anything valid once we remove the VCTP. For now just bail out.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a32fb714dc42507917fed431c24b79020">isVPTOpcode</a>(Insts.front()-&gt;getOpcode()) &amp;&amp;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;               <span class="stringliteral">&quot;Expected VPT block to start with a VPST or VPT!&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> (Insts.size() == 2 &amp;&amp; Insts.front()-&gt;getOpcode() != ARM::MVE_VPST &amp;&amp;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <a class="code" href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">isVCTP</a>(Insts.back()))</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : Insts) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          <span class="comment">// Check that any internal VCTPs are &#39;Then&#39; predicated.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">isVCTP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; <a class="code" href="namespacellvm.html#a0cc2ece7c17666da02150434a0e91992">getVPTInstrPredicate</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) != <a class="code" href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba52ebc8bde3b53664af68aae0023e35d8">ARMVCC::Then</a>)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          <span class="comment">// Skip other instructions that build up the predicate.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MVE_VPST || <a class="code" href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">isVectorPredicate</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;          <span class="comment">// Check that any other instructions are predicated upon a vctp.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          <span class="comment">// TODO: We could infer when VPTs are implicitly predicated on the</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          <span class="comment">// vctp (when the operands are predicated).</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          <span class="keywordflow">if</span> (!isPredicatedOnVCTP(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Can&#39;t convert: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    VPTState(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) { Insts.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>); }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">void</span> insert(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      Insts.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="comment">// VPT/VPST + 4 predicated instructions.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Insts.size() &lt;= 5 &amp;&amp; <span class="stringliteral">&quot;Too many instructions in VPT block!&quot;</span>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">bool</span> containsVCTP()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(Insts, <a class="code" href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">isVCTP</a>);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Insts.size(); }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;getInsts() { <span class="keywordflow">return</span> Insts; }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  };</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keyword">struct </span>LowOverheadLoop {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> &amp;<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;MLI;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ARMBaseInstrInfo.html">ARMBaseInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> StartInsertPt;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *StartInsertBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Start = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Dec = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *End = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> TPNumElements;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 4&gt;</a> VCTPs;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> BlockMasksToRecompute;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> DoubleWidthResultInstrs;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> VMOVCopies;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">bool</span> Revert = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">bool</span> CannotTailPredicate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    LowOverheadLoop(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> &amp;ML, <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;MLI,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ARMBaseInstrInfo.html">ARMBaseInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        : <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>), MLI(MLI), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>), <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>),</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          TPNumElements(<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a>::CreateImm(0)) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      MF = <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getHeader()-&gt;getParent();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getLoopPreheader())</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        Preheader = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = MLI.<a class="code" href="classllvm_1_1MachineLoopInfo.html#a80b0e6e28849491c5b267be8ffc909b4">findLoopPreheader</a>(&amp;ML, <span class="keyword">true</span>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        Preheader = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      VPTState::reset();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// If this is an MVE instruction, check that we know how to use tail</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// predication with it. Record VPT blocks and return whether the</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// instruction is valid for tail predication.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">bool</span> ValidateMVEInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">void</span> AnalyseMVEInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      CannotTailPredicate = !ValidateMVEInst(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordtype">bool</span> IsTailPredicationLegal()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="comment">// For now, let&#39;s keep things really simple and only support a single</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="comment">// block for tail predication.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">return</span> !Revert &amp;&amp; FoundAllComponents() &amp;&amp; !VCTPs.empty() &amp;&amp;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;             !CannotTailPredicate &amp;&amp; <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getNumBlocks() == 1;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// Given that MI is a VCTP, check that is equivalent to any other VCTPs</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// found.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">bool</span> AddVCTP(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// Check that the predication in the loop will be equivalent once we</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// perform the conversion. Also ensure that we can provide the number</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// of elements to the loop start instruction.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">bool</span> ValidateTailPredicate();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Check that any values available outside of the loop will be the same</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// after tail predication conversion.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">bool</span> ValidateLiveOuts();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Is it safe to define LR with DLS/WLS?</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// LR can be defined if it is the operand to start, because it&#39;s the same</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// value, or if it&#39;s going to be equivalent to the operand to Start.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *isSafeToDefineLR();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Check the branch targets are within range and we satisfy our</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// restrictions.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordtype">void</span> Validate(<a class="code" href="classllvm_1_1ARMBasicBlockUtils.html">ARMBasicBlockUtils</a> *BBUtils);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">bool</span> FoundAllComponents()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">return</span> Start &amp;&amp; Dec &amp;&amp; End;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;VPTState&gt;</a> &amp;getVPTBlocks() {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">return</span> VPTState::Blocks;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Return the operand for the loop start instruction. This will be the loop</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// iteration count, or the number of elements if we&#39;re tail predicating.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;getLoopStartOperand() {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">if</span> (IsTailPredicationLegal())</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span> TPNumElements;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">return</span> Start-&gt;getOperand(1);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordtype">unsigned</span> getStartOpcode()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordtype">bool</span> IsDo = <a class="code" href="namespacellvm.html#a022cded702d737077e735b1eb79f8a28">isDoLoopStart</a>(*Start);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span> (!IsTailPredicationLegal())</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">return</span> IsDo ? ARM::t2DLS : ARM::t2WLS;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aa66305962c0042c0ef4d8f881a282d72">VCTPOpcodeToLSTP</a>(VCTPs.back()-&gt;getOpcode(), IsDo);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">if</span> (Start) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found Loop Start: &quot;</span> &lt;&lt; *Start;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">if</span> (Dec) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found Loop Dec: &quot;</span> &lt;&lt; *Dec;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">if</span> (End) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found Loop End: &quot;</span> &lt;&lt; *End;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> (!VCTPs.empty()) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found VCTP(s):\n&quot;</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : VCTPs)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">if</span> (!FoundAllComponents())</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Not a low-overhead loop.\n&quot;</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(Start &amp;&amp; Dec &amp;&amp; End))</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Failed to find all loop components.\n&quot;</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  };</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keyword">class </span>ARMLowOverheadLoops : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a>           *MF = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>           *MLI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a>       *<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ARMBaseInstrInfo.html">ARMBaseInstrInfo</a>    *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a>       *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a>  *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    std::unique_ptr&lt;ARMBasicBlockUtils&gt; BBUtils = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    ARMLowOverheadLoops() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) { }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a>&gt;();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionProperties.html">MachineFunctionProperties</a> getRequiredProperties()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MachineFunctionProperties.html">MachineFunctionProperties</a>().<a class="code" href="classllvm_1_1MachineFunctionProperties.html#aa0f2b6097642894ce79ff3e15c896206">set</a>(</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          <a class="code" href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a72f7d830dd5ddb30f06d8e9639558ac3">MachineFunctionProperties::Property::NoVRegs</a>).<a class="code" href="classllvm_1_1MachineFunctionProperties.html#aa0f2b6097642894ce79ff3e15c896206">set</a>(</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          <a class="code" href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a0020348b08bb4cccecf3241eac999d8a">MachineFunctionProperties::Property::TracksLiveness</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">ARM_LOW_OVERHEAD_LOOPS_NAME</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordtype">bool</span> ProcessLoop(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *ML);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordtype">bool</span> RevertNonLoops();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordtype">void</span> RevertWhile(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">void</span> RevertDo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#abd46906c25e4d5703a8e422283d03bde">RevertLoopDec</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#abaa69285a8e74b69f9d178c1b7a8c1cd">RevertLoopEnd</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">bool</span> SkipCmp = <span class="keyword">false</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordtype">void</span> RevertLoopEndDec(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordtype">void</span> ConvertVPTBlocks(LowOverheadLoop &amp;LoLoop);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *ExpandLoopStart(LowOverheadLoop &amp;LoLoop);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordtype">void</span> Expand(LowOverheadLoop &amp;LoLoop);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordtype">void</span> IterationCountDCE(LowOverheadLoop &amp;LoLoop);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  };</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">ARMLowOverheadLoops::ID</a> = 0;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VPTState, 4&gt;</a> VPTState::Blocks;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;MachineInstr *&gt;</a> VPTState::CurrentPredicates;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;std::map&lt;<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;         std::unique_ptr&lt;PredicatedMI&gt;&gt; VPTState::PredicatedInsts;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a6390597185c559f28ec61cc95a8ab606">INITIALIZE_PASS</a>(ARMLowOverheadLoops, <a class="code" href="ARMLowOverheadLoops_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">ARM_LOW_OVERHEAD_LOOPS_NAME</a>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">  546</a></span>&#160;static <span class="keywordtype">bool</span> TryRemove(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>,</div>
<div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">  547</a></span>&#160;                      InstSet &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>, InstSet &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Check that we can remove all of Killed without having to modify any IT</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// blocks.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keyword">auto</span> WontCorruptITs = [](InstSet &amp;Killed, <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// Collect the dead code and the MBBs in which they reside.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock*, 2&gt;</a> BasicBlocks;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a> : Killed)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      BasicBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>-&gt;getParent());</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// Collect IT blocks in all affected basic blocks.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    std::map&lt;MachineInstr *, SmallPtrSet&lt;MachineInstr *, 2&gt;&gt; ITBlocks;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : BasicBlocks) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a> : *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>.getOpcode() != ARM::t2IT)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a376f2f9d5ff928037a2ef34d804509bf">getReachingLocalUses</a>(&amp;<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>, <a class="code" href="classllvm_1_1MCRegister.html#a822cab8661beb03276b0566d33e41592">MCRegister::from</a>(ARM::ITSTATE),</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                                 ITBlocks[&amp;<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>]);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// If we&#39;re removing all of the instructions within an IT block, then</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// also remove the IT instruction.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> ModifiedITs;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> RemoveITs;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a> : Killed) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *MO = <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>-&gt;findRegisterUseOperand(ARM::ITSTATE)) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a36f4fc1556edfb50cca3fe85fcc05e93">getMIOperand</a>(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>, *MO);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        RemoveITs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keyword">auto</span> &amp;CurrentBlock = ITBlocks[<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>];</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        CurrentBlock.erase(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (CurrentBlock.empty())</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          ModifiedITs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          ModifiedITs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">if</span> (!ModifiedITs.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>())</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    Killed.insert(RemoveITs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>(), RemoveITs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>());</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  };</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">  590</a></span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a2f90013f33dac170acc9c62907d99e44">isSafeToRemove</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>))</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a14d72f43eb0c681f84fc9a00c9621941">  594</a></span>&#160;  <span class="keywordflow">if</span> (WontCorruptITs(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>)) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>.insert(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.begin(), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.end());</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Able to remove: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; - can also remove:\n&quot;</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;               <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1Use.html">Use</a> : <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                 <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   - &quot;</span> &lt;&lt; *<a class="code" href="classllvm_1_1Use.html">Use</a>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 4&gt;</a> Killed;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a67391278875db8d144d4b6bb6e6a09b8">collectKilledOperands</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Killed);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (WontCorruptITs(Killed, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>)) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>.insert(Killed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>(), Killed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>());</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a> : Killed)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                   <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   - &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  }</div>
<div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a5df37b7f02e5cdc7d9412b7f872b8e01">  610</a></span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="keywordtype">bool</span> LowOverheadLoop::ValidateTailPredicate() {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (!IsTailPredicationLegal()) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<span class="keywordflow">if</span> (VCTPs.empty())</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                 <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Didn&#39;t find a VCTP instruction.\n&quot;</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Tail-predication is not valid.\n&quot;</span>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!VCTPs.empty() &amp;&amp; <span class="stringliteral">&quot;VCTP instruction expected but is not set&quot;</span>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getBlocks().size() == 1 &amp;&amp;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;         <span class="stringliteral">&quot;Shouldn&#39;t be processing a loop with more than one block&quot;</span>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#ae4be1491d9372bf9fb8a4ce158eb1421">DisableTailPredication</a>) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: tail-predication is disabled\n&quot;</span>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">VPTState::isValid</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>)) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Invalid VPT state.\n&quot;</span>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">if</span> (!ValidateLiveOuts()) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Invalid live outs.\n&quot;</span>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// For tail predication, we need to provide the number of elements, instead</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// of the iteration count, to the loop start instruction. The number of</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// elements is provided to the vctp instruction, so we need to check that</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// we can use this register at InsertPt.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *VCTP = VCTPs.back();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (Start-&gt;getOpcode() == ARM::t2DoLoopStartTP ||</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      Start-&gt;getOpcode() == ARM::t2WhileLoopStartTP) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    TPNumElements = Start-&gt;getOperand(2);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    StartInsertPt = Start;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    StartInsertBB = Start-&gt;getParent();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    TPNumElements = VCTP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> NumElements = TPNumElements.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>().<a class="code" href="classllvm_1_1Register.html#a49effcc0d9e7a321043ade70145d11f6">asMCReg</a>();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// If the register is defined within loop, then we can&#39;t perform TP.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// TODO: Check whether this is just a mov of a register that would be</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// available.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a4a14a60645d8de4b2d06b6ebf0d89fa0">hasLocalDefBefore</a>(VCTP, NumElements)) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: VCTP operand is defined in the loop.\n&quot;</span>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// The element count register maybe defined after InsertPt, in which case we</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// need to try to move either InsertPt or the def so that the [w|d]lstp can</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// use the value.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (StartInsertPt != StartInsertBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        !<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#acd9233060e5c22ac0ca9aaa7dd994d52">isReachingDefLiveOut</a>(&amp;*StartInsertPt, NumElements)) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ElemDef =</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;              <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a3242b5c8db0ce6956c921f225055c3a8">getLocalLiveOutMIDef</a>(StartInsertBB, NumElements)) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a09e2271431de53cc4cc5057148c18c93">isSafeToMoveForwards</a>(ElemDef, &amp;*StartInsertPt)) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;          ElemDef-&gt;removeFromParent();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;          StartInsertBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">insert</a>(StartInsertPt, ElemDef);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Moved element count def: &quot;</span> &lt;&lt; *ElemDef);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a7bc46cb4bc77e9715066c204bd98e309">isSafeToMoveBackwards</a>(&amp;*StartInsertPt, ElemDef)) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;          StartInsertPt-&gt;removeFromParent();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;          StartInsertBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">insertAfter</a>(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(ElemDef),</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                     &amp;*StartInsertPt);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Moved start past: &quot;</span> &lt;&lt; *ElemDef);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          <span class="comment">// If we fail to move an instruction and the element count is provided</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          <span class="comment">// by a mov, use the mov operand if it will have the same value at the</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;          <span class="comment">// insertion point</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;          <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> Operand = ElemDef-&gt;getOperand(1);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a51c2a3a98a4139250a74ecae0bec5c65">isMovRegOpcode</a>(ElemDef-&gt;getOpcode()) &amp;&amp;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;              <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">getUniqueReachingMIDef</a>(ElemDef, Operand.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>().<a class="code" href="classllvm_1_1Register.html#a49effcc0d9e7a321043ade70145d11f6">asMCReg</a>()) ==</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                  <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">getUniqueReachingMIDef</a>(&amp;*StartInsertPt,</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                             Operand.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>().<a class="code" href="classllvm_1_1Register.html#a49effcc0d9e7a321043ade70145d11f6">asMCReg</a>())) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            TPNumElements = Operand;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            NumElements = TPNumElements.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Unable to move element count to loop &quot;</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;start instruction.\n&quot;</span>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// Especially in the case of while loops, InsertBB may not be the</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// preheader, so we need to check that the register isn&#39;t redefined</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// before entering the loop.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keyword">auto</span> CannotProvideElements = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                        <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> NumElements) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">empty</a>())</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="comment">// NumElements is redefined in this block.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a4a14a60645d8de4b2d06b6ebf0d89fa0">hasLocalDefBefore</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a>(), NumElements))</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="comment">// Don&#39;t continue searching up through multiple predecessors.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a03936a9b37da541420049422204ab206">pred_size</a>() &gt; 1)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    };</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// Search backwards for a def, until we get to InsertBB.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = Preheader;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> != StartInsertBB) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">if</span> (CannotProvideElements(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, NumElements)) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Unable to provide element count.\n&quot;</span>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// Could inserting the [W|D]LSTP cause some unintended affects? In a perfect</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// world the [w|d]lstp instruction would be last instruction in the preheader</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// and so it would only affect instructions within the loop body. But due to</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// scheduling, and/or the logic in this pass (above), the insertion point can</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">// be moved earlier. So if the Loop Start isn&#39;t the last instruction in the</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// preheader, and if the initial element count is smaller than the vector</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// width, the Loop Start instruction will immediately generate one or more</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// false lane mask which can, incorrectly, affect the proceeding MVE</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// instructions in the preheader.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">std::any_of</a>(StartInsertPt, StartInsertBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a9df1ebcc0b9226f9cfda9d5f73a21526">shouldInspect</a>)) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Instruction blocks [W|D]LSTP\n&quot;</span>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// For any DoubleWidthResultInstrs we found whilst scanning instructions, they</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// need to compute an output size that is smaller than the VCTP mask operates</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// on. The VecSize of the DoubleWidthResult is the larger vector size - the</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// size it extends into, so any VCTP VecSize &lt;= is valid.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordtype">unsigned</span> VCTPVecSize = <a class="code" href="ARMLowOverheadLoops_8cpp.html#ad84c5ccc73435217f046a6fe26d547f9">getVecSize</a>(*VCTP);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : DoubleWidthResultInstrs) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordtype">unsigned</span> InstrVecSize = <a class="code" href="ARMLowOverheadLoops_8cpp.html#ad84c5ccc73435217f046a6fe26d547f9">getVecSize</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (InstrVecSize &gt; VCTPVecSize) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Double width result larger than VCTP &quot;</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;VecSize:\n&quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// Check that the value change of the element count is what we expect and</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// that the predication will be equivalent. For this we need:</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// NumElements = NumElements - VectorWidth. The sub will be a sub immediate</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">// and we can also allow register copies within the chain too.</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keyword">auto</span> IsValidSub = [](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">int</span> ExpectedVecWidth) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">return</span> -<a class="code" href="namespacellvm.html#ae1158b6031fe51c293913bcd9a3353e5">getAddSubImmediate</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) == ExpectedVecWidth;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  };</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = VCTP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// Remove modifications to the element count since they have no purpose in a</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// tail predicated loop. Explicitly refer to the vctp operand no matter which</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// register NumElements has been assigned to, since that is what the</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// modifications will be using</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">getUniqueReachingMIDef</a>(</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a>(), VCTP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>().<a class="code" href="classllvm_1_1Register.html#a49effcc0d9e7a321043ade70145d11f6">asMCReg</a>())) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 2&gt;</a> ElementChain;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordtype">unsigned</span> ExpectedVectorWidth = <a class="code" href="namespacellvm.html#a469e94cf2a0777a0bb92dfb2f6fa5b12">getTailPredVectorWidth</a>(VCTP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>());</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>.insert(VCTPs.begin(), VCTPs.end());</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (TryRemove(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>, ElementChain, <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>)) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordtype">bool</span> FoundSub = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : ElementChain) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a51c2a3a98a4139250a74ecae0bec5c65">isMovRegOpcode</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode()))</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5fc054f5fba4582092c2761201b57519">isSubImmOpcode</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode())) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;          <span class="keywordflow">if</span> (FoundSub || !IsValidSub(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, ExpectedVectorWidth)) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Unexpected instruction in element&quot;</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                       <span class="stringliteral">&quot; count: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;          }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          FoundSub = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Unexpected instruction in element&quot;</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                     <span class="stringliteral">&quot; count: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>.insert(ElementChain.begin(), ElementChain.end());</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="comment">// If we converted the LoopStart to a t2DoLoopStartTP/t2WhileLoopStartTP, we</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// can also remove any extra instructions in the preheader, which often</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// includes a now unused MOV.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">if</span> ((Start-&gt;getOpcode() == ARM::t2DoLoopStartTP ||</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;       Start-&gt;getOpcode() == ARM::t2WhileLoopStartTP) &amp;&amp;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      Preheader &amp;&amp; !Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      !<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a4a14a60645d8de4b2d06b6ebf0d89fa0">hasLocalDefBefore</a>(VCTP, VCTP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>())) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">getUniqueReachingMIDef</a>(</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            &amp;Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a>(), VCTP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>().<a class="code" href="classllvm_1_1Register.html#a49effcc0d9e7a321043ade70145d11f6">asMCReg</a>())) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>.insert(VCTPs.begin(), VCTPs.end());</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      TryRemove(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>, <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a5898b6ed934ad744eefecc5d5297a3a8">  821</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a5898b6ed934ad744eefecc5d5297a3a8">isRegInClass</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *Class) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">return</span> MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() &amp;&amp; Class-&gt;contains(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">// MVE &#39;narrowing&#39; operate on half a lane, reading from half and writing</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">// to half, which are referred to has the top and bottom half. The other</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">// half retains its previous value.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a8af4c9dee593e1e883a0d3509c25d1d0">  829</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a8af4c9dee593e1e883a0d3509c25d1d0">retainsPreviousHalfElement</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;MCID = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Flags = MCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">TSFlags</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">return</span> (Flags &amp; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305aa25c5be216c7a89861b0ef6822601465">ARMII::RetainsPreviousHalfElement</a>) != 0;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">// Some MVE instructions read from the top/bottom halves of their operand(s)</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">// and generate a vector result with result elements that are double the</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">// width of the input.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a46ef4c167cadd485c1e39881969bc2d5">  838</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a46ef4c167cadd485c1e39881969bc2d5">producesDoubleWidthResult</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;MCID = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Flags = MCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">TSFlags</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">return</span> (Flags &amp; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a1d1ee0a18b878ed2571430f0b9ba7441">ARMII::DoubleWidthResult</a>) != 0;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a33871fd2a06a8af436f0cb548798ec5d">  844</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a33871fd2a06a8af436f0cb548798ec5d">isHorizontalReduction</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;MCID = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Flags = MCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">TSFlags</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">return</span> (Flags &amp; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a9e2a02c8e15c43cfe03fee48f85f76cf">ARMII::HorizontalReduction</a>) != 0;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">// Can this instruction generate a non-zero result when given only zeroed</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">// operands? This allows us to know that, given operands with false bytes</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">// zeroed by masked loads, that the result will also contain zeros in those</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">// bytes.</span></div>
<div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a2765f2d6b072f973ae4e6aba772836c7">  854</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a2765f2d6b072f973ae4e6aba772836c7">canGenerateNonZeros</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// Check for instructions which can write into a larger element size,</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// possibly writing into a previous zero&#39;d lane.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a46ef4c167cadd485c1e39881969bc2d5">producesDoubleWidthResult</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// FIXME: VNEG FP and -0? I think we&#39;ll need to handle this once we allow</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// fp16 -&gt; fp32 vector conversions.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// Instructions that perform a NOT will generate 1s from 0s.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">case</span> ARM::MVE_VMVN:</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">case</span> ARM::MVE_VORN:</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// Count leading zeros will do just that!</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">case</span> ARM::MVE_VCLZs8:</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">case</span> ARM::MVE_VCLZs16:</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">case</span> ARM::MVE_VCLZs32:</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;}</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">// Look at its register uses to see if it only can only receive zeros</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">// into its false lanes which would then produce zeros. Also check that</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">// the output register is also defined by an FalseLanesZero instruction</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">// so that if tail-predication happens, the lanes that aren&#39;t updated will</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">// still be zeros.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#ad6f25f6a5125ee4d8f6e01e85ebf836e">  883</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#ad6f25f6a5125ee4d8f6e01e85ebf836e">producesFalseLanesZero</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *QPRs,</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>,</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                   InstSet &amp;<a class="code" href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">FalseLanesZero</a>) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a2765f2d6b072f973ae4e6aba772836c7">canGenerateNonZeros</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">isVectorPredicated</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// Predicated loads will write zeros to the falsely predicated bytes of the</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// destination register.</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoad())</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keyword">auto</span> IsZeroInit = [](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">isVectorPredicated</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>) &amp;&amp;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;           <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOpcode() == ARM::MVE_VMOVimmi32 &amp;&amp;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;           <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOperand(1).getImm() == 0;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  };</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordtype">bool</span> AllowScalars = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a33871fd2a06a8af436f0cb548798ec5d">isHorizontalReduction</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>())</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a5898b6ed934ad744eefecc5d5297a3a8">isRegInClass</a>(MO, QPRs) &amp;&amp; AllowScalars)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="comment">// Skip the lr predicate reg</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">int</span> PIdx = <a class="code" href="namespacellvm.html#a0833f10a51730f325a49f05d5bc1d327">llvm::findFirstVPTPredOperandIdx</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span> (PIdx != -1 &amp;&amp; (<span class="keywordtype">int</span>)MO.<a class="code" href="classllvm_1_1MachineOperand.html#a0c893675dfd5d1b1e4aea1e8211217c7">getOperandNo</a>() == PIdx + 2)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// Check that this instruction will produce zeros in its false lanes:</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// - If it only consumes false lanes zero or constant 0 (vmov #0)</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// - If it&#39;s predicated, it only matters that it&#39;s def register already has</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="comment">//   false lane zeros, so we can ignore the uses.</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> Defs;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a80f7d9c4184a1f142229021d46b9433e">getGlobalReachingDefs</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>(), Defs);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (Defs.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>())</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> : Defs) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> == &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> || <a class="code" href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">FalseLanesZero</a>.count(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>) || IsZeroInit(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>))</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a>)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Always False Zeros: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;}</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="keywordtype">bool</span> LowOverheadLoop::ValidateLiveOuts() {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// We want to find out if the tail-predicated version of this loop will</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// produce the same values as the loop in its original form. For this to</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// be true, the newly inserted implicit predication must not change the</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// the (observable) results.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="comment">// We&#39;re doing this because many instructions in the loop will not be</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// predicated and so the conversion from VPT predication to tail-predication</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">// can result in different values being produced; due to the tail-predication</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="comment">// preventing many instructions from updating their falsely predicated</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">// lanes. This analysis assumes that all the instructions perform lane-wise</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="comment">// operations and don&#39;t perform any exchanges.</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// A masked load, whether through VPT or tail predication, will write zeros</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// to any of the falsely predicated bytes. So, from the loads, we know that</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// the false lanes are zeroed and here we&#39;re trying to track that those false</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// lanes remain zero, or where they change, the differences are masked away</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// by their user(s).</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// All MVE stores have to be predicated, so we know that any predicate load</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// operands, or stored results are equivalent already. Other explicitly</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// predicated instructions will perform the same operation in the original</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// loop and the tail-predicated form too. Because of this, we can insert</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// loads, stores and other predicated instructions into our Predicated</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="comment">// set and build from there.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *QPRs = <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a55ad07e4cbe29bea4cb69b78472b690e">getRegClass</a>(ARM::MQPRRegClassID);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;MachineInstr *&gt;</a> FalseLanesUnknown;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> <a class="code" href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">FalseLanesZero</a>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> Predicated;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Header = <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getHeader();</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Validating Live outs\n&quot;</span>);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *Header) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a9df1ebcc0b9226f9cfda9d5f73a21526">shouldInspect</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">isVCTP</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a class="code" href="namespacellvm.html#a32fb714dc42507917fed431c24b79020">isVPTOpcode</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()))</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">isVectorPredicated</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordtype">bool</span> retainsOrReduces =</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a8af4c9dee593e1e883a0d3509c25d1d0">retainsPreviousHalfElement</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a class="code" href="ARMLowOverheadLoops_8cpp.html#a33871fd2a06a8af436f0cb548798ec5d">isHorizontalReduction</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a>)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      Predicated.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#ad6f25f6a5125ee4d8f6e01e85ebf836e">producesFalseLanesZero</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, QPRs, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>, <a class="code" href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">FalseLanesZero</a>))</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">FalseLanesZero</a>.insert(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumDefs() == 0)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a> &amp;&amp; retainsOrReduces) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Unpredicated instruction that retainsOrReduces: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">isPredicated</a> &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() != ARM::MQPRCopy)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      FalseLanesUnknown.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Predicated:\n&quot;</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : Predicated)</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  FalseLanesZero:\n&quot;</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">FalseLanesZero</a>)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  FalseLanesUnknown:\n&quot;</span>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : FalseLanesUnknown)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  });</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keyword">auto</span> HasPredicatedUsers = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO,</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                              <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;MachineInstr *&gt;</a> &amp;Predicated) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a63072b50a2bbaf2a289625cd3f7958ad">getGlobalUses</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MO.getReg().asMCReg(), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1Use.html">Use</a> : <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> &amp;&amp; !Predicated.count(<a class="code" href="classllvm_1_1Use.html">Use</a>))</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  };</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// Visit the unknowns in reverse so that we can start at the values being</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// stored and then we can work towards the leaves, hopefully adding more</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">// instructions to Predicated. Successfully terminating the loop means that</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="comment">// all the unknown values have to found to be masked by predicated user(s).</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// For any unpredicated values, we store them in NonPredicated so that we</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="comment">// can later check whether these form a reduction.</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 2&gt;</a> NonPredicated;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(FalseLanesUnknown)) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;operands()) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a5898b6ed934ad744eefecc5d5297a3a8">isRegInClass</a>(MO, QPRs) || !MO.isDef())</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">if</span> (!HasPredicatedUsers(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MO, Predicated)) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Found an unknown def of : &quot;</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                          &lt;&lt; <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ad4f8f1aca0bb01f65be1d7dee43f7f83">getRegAsmName</a>(MO.getReg()) &lt;&lt; <span class="stringliteral">&quot; at &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        NonPredicated.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">// Any unknown false lanes have been masked away by the user(s).</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">if</span> (!NonPredicated.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      Predicated.insert(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> LiveOutMIs;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock *, 2&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getExitBlocks(ExitBlocks);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getNumBlocks() == 1 &amp;&amp; <span class="stringliteral">&quot;Expected single block loop!&quot;</span>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitBlocks.size() == 1 &amp;&amp; <span class="stringliteral">&quot;Expected a single exit block&quot;</span>);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ExitBB = ExitBlocks.front();</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineBasicBlock_1_1RegisterMaskPair.html">MachineBasicBlock::RegisterMaskPair</a> &amp;RegMask : ExitBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a98d240595236bf85bf1a5c5ba594bdba">liveins</a>()) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="comment">// TODO: Instead of blocking predication, we could move the vctp to the exit</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">// block and calculate it&#39;s operand there in or the preheader.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span> (RegMask.PhysReg == ARM::VPR) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  VPR is live in to the exit block.&quot;</span>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">// Check Q-regs that are live in the exit blocks. We don&#39;t collect scalars</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// because they won&#39;t be affected by lane predication.</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (QPRs-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#a60b6974966381f08079722f2258a0039">contains</a>(RegMask.PhysReg))</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a3242b5c8db0ce6956c921f225055c3a8">getLocalLiveOutMIDef</a>(Header, RegMask.PhysReg))</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        LiveOutMIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// We&#39;ve already validated that any VPT predication within the loop will be</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// equivalent when we perform the predication transformation; so we know that</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// any VPT predicated instruction is predicated upon VCTP. Any live-out</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// instruction needs to be predicated, so check this here. The instructions</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="comment">// in NonPredicated have been found to be a reduction that we can ensure its</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">// legality. Any MQPRCopy found will need to validate its input as if it was</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">// live out.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *&gt;</a> Worklist(LiveOutMIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>(), LiveOutMIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>());</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = Worklist.pop_back_val();</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MQPRCopy) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      VMOVCopies.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CopySrc =</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;          <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">getUniqueReachingMIDef</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">if</span> (CopySrc)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        Worklist.push_back(CopySrc);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NonPredicated.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; FalseLanesUnknown.<a class="code" href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">contains</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; Unable to handle live out: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      VMOVCopies.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;}</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="keywordtype">void</span> LowOverheadLoop::Validate(<a class="code" href="classllvm_1_1ARMBasicBlockUtils.html">ARMBasicBlockUtils</a> *BBUtils) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (Revert)</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// Check branch target ranges: WLS[TP] can only branch forwards and LE[TP]</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// can only jump back.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keyword">auto</span> ValidateRanges = [](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Start, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *End,</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                           <a class="code" href="classllvm_1_1ARMBasicBlockUtils.html">ARMBasicBlockUtils</a> *BBUtils, <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> &amp;<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TgtBB = End-&gt;getOpcode() == ARM::t2LoopEnd</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                                   ? End-&gt;getOperand(1).getMBB()</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                   : End-&gt;getOperand(2).getMBB();</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="comment">// TODO Maybe there&#39;s cases where the target doesn&#39;t have to be the header,</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// but for now be safe and revert.</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">if</span> (TgtBB != <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getHeader()) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: LoopEnd is not targeting header.\n&quot;</span>);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="comment">// The WLS and LE instructions have 12-bits for the label offset. WLS</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="comment">// requires a positive offset, while LE uses negative.</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">if</span> (BBUtils-&gt;getOffsetOf(End) &lt; BBUtils-&gt;getOffsetOf(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getHeader()) ||</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        !BBUtils-&gt;isBBInRange(End, <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>.getHeader(), 4094)) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: LE offset is out-of-range\n&quot;</span>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ace27fc73322204af1d8dbd05dea927bc">isWhileLoopStart</a>(*Start)) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TargetBB = <a class="code" href="namespacellvm.html#a96ffcb6b61041f2af86695a16e92ef58">getWhileLoopStartTargetBB</a>(*Start);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">if</span> (BBUtils-&gt;getOffsetOf(Start) &gt; BBUtils-&gt;getOffsetOf(TargetBB) ||</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;          !BBUtils-&gt;isBBInRange(Start, TargetBB, 4094)) {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: WLS offset is out-of-range!\n&quot;</span>);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  };</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  StartInsertPt = <a class="code" href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a>(Start);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  StartInsertBB = Start-&gt;getParent();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Will insert LoopStart at &quot;</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                    &lt;&lt; *StartInsertPt);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  Revert = !ValidateRanges(Start, End, BBUtils, ML);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  CannotTailPredicate = !ValidateTailPredicate();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="keywordtype">bool</span> LowOverheadLoop::AddVCTP(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Adding VCTP: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="keywordflow">if</span> (VCTPs.empty()) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    VCTPs.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// If we find another VCTP, check whether it uses the same value as the main VCTP.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// If it does, store it in the VCTPs set, else refuse it.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Prev = VCTPs.back();</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">if</span> (!Prev-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ad7f2dc64214551418f486026ffc95fa4">isIdenticalTo</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1)) ||</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      !<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>.<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a6008c55d6eafd62e1c6dcdd9d26f90fc">hasSameReachingDef</a>(Prev, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getReg().asMCReg())) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found VCTP with a different reaching &quot;</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                         <span class="stringliteral">&quot;definition from the main VCTP&quot;</span>);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  VCTPs.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="ARMLowOverheadLoops_8cpp.html#a5d85b8fd4787153b0ade229c616b7562"> 1145</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a5d85b8fd4787153b0ade229c616b7562">ValidateMVEStore</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *ML) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keyword">auto</span> GetFrameIndex = [](<a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *Operand) {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1PseudoSourceValue.html">PseudoSourceValue</a> *PseudoValue = Operand-&gt;getPseudoValue();</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">if</span> (PseudoValue &amp;&amp; PseudoValue-&gt;<a class="code" href="classllvm_1_1PseudoSourceValue.html#ab1969256cc373d72874932779a45b46c">kind</a>() == <a class="code" href="classllvm_1_1PseudoSourceValue.html#a9959ffdc41bc31cf2211b8824f79259eaf38d1857511c3f0404c95f65664b36ab">PseudoSourceValue::FixedStack</a>) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FixedStackPseudoSourceValue&gt;(PseudoValue)) {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;getFrameIndex();</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  };</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keyword">auto</span> IsStackOp = [GetFrameIndex](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">case</span> ARM::MVE_VSTRWU32:</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">case</span> ARM::MVE_VLDRWU32: {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1).getReg() == ARM::SP &amp;&amp;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;memoperands().size() == 1 &amp;&amp;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;             GetFrameIndex(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;memoperands().front()) &gt;= 0;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  };</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// An unpredicated vector register spill is allowed if all of the uses of the</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// stack slot are within the loop</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() != ARM::MVE_VSTRWU32 || !IsStackOp(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// Search all blocks after the loop for accesses to the same stack slot.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// ReachingDefAnalysis doesn&#39;t work for sp as it relies on registers being</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="comment">// live-out (which sp never is) to know what blocks to look in</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;memoperands().size() == 0)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordtype">int</span> FI = GetFrameIndex(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;memoperands().front());</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keyword">auto</span> &amp;FrameInfo = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent()-&gt;getParent()-&gt;getFrameInfo();</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">if</span> (FI == -1 || !FrameInfo.isSpillSlotObjectIndex(FI))</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock *&gt;</a> Frontier;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>-&gt;getExitBlocks(Frontier);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock *, 4&gt;</a> Visited{<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent()};</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">while</span> (Idx &lt; Frontier.size()) {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Frontier[Idx];</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordtype">bool</span> LookAtSuccessors = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="keywordflow">if</span> (!IsStackOp(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.memoperands().size() == 0)</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordflow">if</span> (GetFrameIndex(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.memoperands().front()) != FI)</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="comment">// If this block has a store to the stack slot before any loads then we</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="comment">// can ignore the block</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == ARM::MVE_VSTRWU32) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        LookAtSuccessors = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <span class="comment">// If the store and the load are using the same stack slot then the</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="comment">// store isn&#39;t valid for tail predication</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == ARM::MVE_VLDRWU32)</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">if</span> (LookAtSuccessors) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Succ : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;successors()) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(Succ) &amp;&amp; !<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(Frontier, Succ))</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;          Frontier.push_back(Succ);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    Idx++;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;}</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="keywordtype">bool</span> LowOverheadLoop::ValidateMVEInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (CannotTailPredicate)</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a9df1ebcc0b9226f9cfda9d5f73a21526">shouldInspect</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MVE_VPSEL ||</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MVE_VPNOT) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="comment">// TODO: Allow VPSEL and VPNOT, we currently cannot because:</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="comment">// 1) It will use the VPR as a predicate operand, but doesn&#39;t have to be</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">//    instead a VPT block, which means we can assert while building up</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">//    the VPT block because we don&#39;t find another VPT or VPST to being a new</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">//    one.</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// 2) VPSEL still requires a VPR operand even after tail predicating,</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">//    which means we can&#39;t remove it unless there is another</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">//    instruction, such as vcmp, that can provide the VPR def.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  }</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// Record all VCTPs and check that they&#39;re equivalent to one another.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">isVCTP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; !AddVCTP(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// Inspect uses first so that any instructions that alter the VPR don&#39;t</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// alter the predicate upon themselves.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;MCID = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDesc();</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordtype">bool</span> IsUse = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordtype">unsigned</span> LastOpIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands() - 1;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(MCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a9491e6e3afc420c33cf508189bb12c3b">operands</a>()))) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(LastOpIdx - <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.index());</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() != ARM::VPR)</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM.html#a7a043e6726bd97f9874d70905025648b">ARM::isVpred</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.value().OperandType)) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      VPTState::addInst(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      IsUse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() != ARM::MVE_VPST) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found instruction using vpr: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// If we find an instruction that has been marked as not valid for tail</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="comment">// predication, only allow the instruction if it&#39;s contained within a valid</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="comment">// VPT block.</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordtype">bool</span> RequiresExplicitPredication =</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    (MCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">TSFlags</a> &amp; <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a6f4d311cce1cd30c215499f79215051c">ARMII::ValidForTailPredication</a>) == 0;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a00f72b50a86f27bb8b126906a164f8ba">isDomainMVE</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; RequiresExplicitPredication) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MQPRCopy)</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span> (!IsUse &amp;&amp; <a class="code" href="ARMLowOverheadLoops_8cpp.html#a46ef4c167cadd485c1e39881969bc2d5">producesDoubleWidthResult</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      DoubleWidthResultInstrs.insert(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<span class="keywordflow">if</span> (!IsUse) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Can&#39;t tail predicate: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">return</span> IsUse;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// If the instruction is already explicitly predicated, then the conversion</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// will be fine, but ensure that all store operations are predicated.</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;mayStore() &amp;&amp; !<a class="code" href="ARMLowOverheadLoops_8cpp.html#a5d85b8fd4787153b0ade229c616b7562">ValidateMVEStore</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &amp;ML))</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">return</span> IsUse;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// If this instruction defines the VPR, update the predicate for the</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="comment">// proceeding instructions.</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">isVectorPredicate</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">// Clear the existing predicate when we&#39;re not in VPT Active state,</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="comment">// otherwise we add to it.</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">isVectorPredicated</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      VPTState::resetPredicate(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      VPTState::addPredicate(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">// Finally once the predicate has been modified, we can start a new VPT</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="comment">// block if necessary.</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a32fb714dc42507917fed431c24b79020">isVPTOpcode</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode()))</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="MVEVPTBlockPass_8cpp.html#a173df60eae8081683241de7888b84be8">VPTState::CreateVPTBlock</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="keywordtype">bool</span> ARMLowOverheadLoops::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1ARMSubtarget.html">ARMSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = mf.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1ARMSubtarget.html">ARMSubtarget</a>&gt;();</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasLOB())</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  MF = &amp;mf;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops on &quot;</span> &lt;&lt; MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>() &lt;&lt; <span class="stringliteral">&quot; ------------- \n&quot;</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  MLI = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a> = &amp;getAnalysis&lt;ReachingDefAnalysis&gt;();</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#acc5e979e3fa3c222553de9b741c3e12b">getProperties</a>().<a class="code" href="classllvm_1_1MachineFunctionProperties.html#aa0f2b6097642894ce79ff3e15c896206">set</a>(<a class="code" href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a0020348b08bb4cccecf3241eac999d8a">MachineFunctionProperties::Property::TracksLiveness</a>);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1ARMBaseInstrInfo.html">ARMBaseInstrInfo</a>*<span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getInstrInfo());</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getRegisterInfo();</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  BBUtils = std::unique_ptr&lt;ARMBasicBlockUtils&gt;(<span class="keyword">new</span> <a class="code" href="classllvm_1_1ARMBasicBlockUtils.html">ARMBasicBlockUtils</a>(*MF));</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  BBUtils-&gt;computeAllBlockSizes();</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  BBUtils-&gt;adjustBBOffsetsAfter(&amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">front</a>());</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ML : *MLI) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>-&gt;isOutermost())</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      Changed |= ProcessLoop(ML);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  Changed |= RevertNonLoops();</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="keywordtype">bool</span> ARMLowOverheadLoops::ProcessLoop(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *ML) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="comment">// Process inner loops first.</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L : *ML)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    Changed |= ProcessLoop(L);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Processing loop containing:\n&quot;</span>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Preheader = <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>-&gt;getLoopPreheader())</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - Preheader: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*Preheader) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Preheader = MLI-&gt;findLoopPreheader(ML, <span class="keyword">true</span>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - Preheader: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*Preheader) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>-&gt;getBlocks())</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - Block: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  });</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// Search the given block for a loop start instruction. If one isn&#39;t found,</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// and there&#39;s only one predecessor block, search that one too.</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>*(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*)&gt; SearchForStart =</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    [&amp;SearchForStart](<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) -&gt; <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>* {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a853bcbeb54ba762a07c1ae1a0e16ccad">isLoopStart</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a03936a9b37da541420049422204ab206">pred_size</a>() == 1)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">return</span> SearchForStart(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>());</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  };</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  LowOverheadLoop LoLoop(*ML, *MLI, *<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>, *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">// Search the preheader for the start intrinsic.</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">// FIXME: I don&#39;t see why we shouldn&#39;t be supporting multiple predecessors</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">// with potentially multiple set.loop.iterations, so we need to enable this.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span> (LoLoop.Preheader)</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    LoLoop.Start = SearchForStart(LoLoop.Preheader);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// Find the low-overhead loop components and decide whether or not to fall</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// back to a normal loop. Also look for a vctp instructions and decide</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// whether we can convert that predicate using tail predication.</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">ML</a>-&gt;getBlocks())) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugValue())</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == ARM::t2LoopDec)</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        LoLoop.Dec = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == ARM::t2LoopEnd)</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        LoLoop.End = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == ARM::t2LoopEndDec)</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        LoLoop.End = LoLoop.Dec = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a853bcbeb54ba762a07c1ae1a0e16ccad">isLoopStart</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        LoLoop.Start = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().isCall()) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="comment">// TODO: Though the call will require LE to execute again, does this</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="comment">// mean we should revert? Always executing LE hopefully should be</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="comment">// faster than performing a sub,cmp,br or even subs,br.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        LoLoop.Revert = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Found call.\n&quot;</span>);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="comment">// Record VPR defs and build up their corresponding vpt blocks.</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <span class="comment">// Check we know how to tail predicate any mve instructions.</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        LoLoop.AnalyseMVEInst(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(LoLoop.dump());</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keywordflow">if</span> (!LoLoop.FoundAllComponents()) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Didn&#39;t find loop start, update, end\n&quot;</span>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoLoop.Start-&gt;getOpcode() != ARM::t2WhileLoopStart &amp;&amp;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;         <span class="stringliteral">&quot;Expected t2WhileLoopStart to be removed before regalloc!&quot;</span>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// Check that the only instruction using LoopDec is LoopEnd. This can only</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// happen when the Dec and End are separate, not a single t2LoopEndDec.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">// TODO: Check for copy chains that really have no effect.</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="keywordflow">if</span> (LoLoop.Dec != LoLoop.End) {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a376f2f9d5ff928037a2ef34d804509bf">getReachingLocalUses</a>(LoLoop.Dec, <a class="code" href="classllvm_1_1MCRegister.html#a822cab8661beb03276b0566d33e41592">MCRegister::from</a>(ARM::LR), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.size() &gt; 1 || !<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.count(LoLoop.End)) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Unable to remove LoopDec.\n&quot;</span>);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      LoLoop.Revert = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  LoLoop.Validate(BBUtils.get());</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  Expand(LoLoop);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">// WhileLoopStart holds the exit block, so produce a cmp lr, 0 and then a</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">// beq that branches to the exit branch.</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">// TODO: We could also try to generate a cbz if the value in LR is also in</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">// another low register.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="keywordtype">void</span> ARMLowOverheadLoops::RevertWhile(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Reverting to cmp: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DestBB = <a class="code" href="namespacellvm.html#a96ffcb6b61041f2af86695a16e92ef58">getWhileLoopStartTargetBB</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordtype">unsigned</span> BrOpc = BBUtils-&gt;isBBInRange(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, DestBB, 254) ?</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    ARM::tBcc : ARM::t2Bcc;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <a class="code" href="namespacellvm.html#a9061b9ab01f65a05033f729a2f12e91a">RevertWhileLoopStartLR</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, BrOpc);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="keywordtype">void</span> ARMLowOverheadLoops::RevertDo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Reverting to mov: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <a class="code" href="namespacellvm.html#ad30a7e0e8650626f5a5ca4b7002ac267">RevertDoLoopStart</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#abd46906c25e4d5703a8e422283d03bde">ARMLowOverheadLoops::RevertLoopDec</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Reverting to sub: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent();</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 1&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == ARM::t2LoopEnd) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>.insert(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// If nothing defines CPSR between LoopDec and LoopEnd, use a t2SUBS.</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordtype">bool</span> SetFlags =</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a1f45078044970763de9f760034364182">isSafeToDefRegAt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MCRegister.html#a822cab8661beb03276b0566d33e41592">MCRegister::from</a>(ARM::CPSR), <a class="code" href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <a class="code" href="namespacellvm.html#abd46906c25e4d5703a8e422283d03bde">llvm::RevertLoopDec</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, SetFlags);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">return</span> SetFlags;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;}</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">// Generate a subs, or sub and cmp, and a branch instead of an LE.</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#abaa69285a8e74b69f9d178c1b7a8c1cd">ARMLowOverheadLoops::RevertLoopEnd</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">bool</span> SkipCmp)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Reverting to cmp, br: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DestBB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getMBB();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordtype">unsigned</span> BrOpc = BBUtils-&gt;isBBInRange(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, DestBB, 254) ?</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    ARM::tBcc : ARM::t2Bcc;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="namespacellvm.html#abaa69285a8e74b69f9d178c1b7a8c1cd">llvm::RevertLoopEnd</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, BrOpc, SkipCmp);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;}</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">// Generate a subs, or sub and cmp, and a branch instead of an LE.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="keywordtype">void</span> ARMLowOverheadLoops::RevertLoopEndDec(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Reverting to subs, br: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::t2LoopEndDec &amp;&amp; <span class="stringliteral">&quot;Expected a t2LoopEndDec!&quot;</span>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent();</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ARM::t2SUBri));</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(ARM::LR);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a8b2ef77967dee1220cc6ee5aee595e11">ARMCC::AL</a>);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ARM::NoRegister);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ARM::CPSR);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  MIB-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(5).<a class="code" href="classllvm_1_1MachineOperand.html#aed8d139ece631812f972a8cc074adc55">setIsDef</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DestBB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(2).getMBB();</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordtype">unsigned</span> BrOpc =</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      BBUtils-&gt;isBBInRange(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, DestBB, 254) ? ARM::tBcc : ARM::t2Bcc;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160; </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">// Create bne</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(BrOpc));</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(2)); <span class="comment">// branch target</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6ae08639a6e0f682daf9d9b4809ee0cf7c">ARMCC::NE</a>);      <span class="comment">// condition code</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ARM::CPSR);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;}</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment">// Perform dead code elimation on the loop iteration count setup expression.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">// If we are tail-predicating, the number of elements to be processed is the</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">// operand of the VCTP instruction in the vector body, see getCount(), which is</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment">// register $r3 in this example:</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">//   $lr = big-itercount-expression</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">//   ..</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment">//   $lr = t2DoLoopStart renamable $lr</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">//   vector.body:</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">//     ..</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment">//     $vpr = MVE_VCTP32 renamable $r3</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">//     renamable $lr = t2LoopDec killed renamable $lr, 1</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">//     t2LoopEnd renamable $lr, %vector.body</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">//     tB %end</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">// What we would like achieve here is to replace the do-loop start pseudo</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">// instruction t2DoLoopStart with:</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">//    $lr = MVE_DLSTP_32 killed renamable $r3</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">// Thus, $r3 which defines the number of elements, is written to $lr,</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">// and then we want to delete the whole chain that used to define $lr,</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment">// see the comment below how this chain could look like.</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="keywordtype">void</span> ARMLowOverheadLoops::IterationCountDCE(LowOverheadLoop &amp;LoLoop) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordflow">if</span> (!LoLoop.IsTailPredicationLegal())</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Trying DCE on loop iteration count.\n&quot;</span>);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a36f4fc1556edfb50cca3fe85fcc05e93">getMIOperand</a>(LoLoop.Start, 1);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Couldn&#39;t find iteration count.\n&quot;</span>);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="comment">// Collect and remove the users of iteration count.</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 4&gt;</a> Killed  = { LoLoop.Start, LoLoop.Dec,</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                                            LoLoop.End };</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">if</span> (!TryRemove(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, *<a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>, LoLoop.ToRemove, Killed))</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Unsafe to remove loop iteration count.\n&quot;</span>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>* ARMLowOverheadLoops::ExpandLoopStart(LowOverheadLoop &amp;LoLoop) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Expanding LoopStart.\n&quot;</span>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// When using tail-predication, try to delete the dead code that was used to</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// calculate the number of loop iterations.</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  IterationCountDCE(LoLoop);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160; </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPt = LoLoop.StartInsertPt;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Start = LoLoop.Start;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = LoLoop.StartInsertBB;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="keywordtype">unsigned</span> Opc = LoLoop.getStartOpcode();</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Count = LoLoop.getLoopStartOperand();</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// A DLS lr, lr we needn&#39;t emit</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>* NewStart;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="ARMLowOverheadLoops_8cpp.html#a4c7cdd1a3013aaecff34dad81e4fefc7">DisableOmitDLS</a> &amp;&amp; Opc == ARM::t2DLS &amp;&amp; Count.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() &amp;&amp;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      Count.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() == ARM::LR) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Didn&#39;t insert start: DLS lr, lr&quot;</span>);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    NewStart = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, Start-&gt;getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Opc));</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(ARM::LR);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(Count);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ace27fc73322204af1d8dbd05dea927bc">isWhileLoopStart</a>(*Start))</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(<a class="code" href="namespacellvm.html#a96ffcb6b61041f2af86695a16e92ef58">getWhileLoopStartTargetBB</a>(*Start));</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Inserted start: &quot;</span> &lt;&lt; *MIB);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    NewStart = &amp;*MIB;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  LoLoop.ToRemove.insert(Start);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keywordflow">return</span> NewStart;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;}</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="keywordtype">void</span> ARMLowOverheadLoops::ConvertVPTBlocks(LowOverheadLoop &amp;LoLoop) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keyword">auto</span> RemovePredicate = [](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isDebugInstr())</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Removing predicate from: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordtype">int</span> PIdx = <a class="code" href="namespacellvm.html#a0833f10a51730f325a49f05d5bc1d327">llvm::findFirstVPTPredOperandIdx</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PIdx &gt;= 1 &amp;&amp; <span class="stringliteral">&quot;Trying to unpredicate a non-predicated instruction&quot;</span>);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(PIdx).getImm() == <a class="code" href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba52ebc8bde3b53664af68aae0023e35d8">ARMVCC::Then</a> &amp;&amp;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;           <span class="stringliteral">&quot;Expected Then predicate!&quot;</span>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(PIdx).setImm(<a class="code" href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba7d54338241268143d7fdc04d3d0f150b">ARMVCC::None</a>);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(PIdx + 1).setReg(0);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  };</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Block : LoLoop.getVPTBlocks()) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;Insts = <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.getInsts();</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keyword">auto</span> ReplaceVCMPWithVPT = [&amp;](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&amp;TheVCMP, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *At) {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TheVCMP &amp;&amp; <span class="stringliteral">&quot;Replacing a removed or non-existent VCMP&quot;</span>);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="comment">// Replace the VCMP with a VPT</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*At-&gt;getParent(), At, At-&gt;getDebugLoc(),</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(<a class="code" href="namespacellvm.html#ad109cb93def9508543bd15a7d4e18d30">VCMPOpcodeToVPT</a>(TheVCMP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>())));</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba52ebc8bde3b53664af68aae0023e35d8">ARMVCC::Then</a>);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="comment">// Register one</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(TheVCMP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1));</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="comment">// Register two</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(TheVCMP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(2));</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="comment">// The comparison code, e.g. ge, eq, lt</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(TheVCMP-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(3));</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Combining with VCMP to VPT: &quot;</span> &lt;&lt; *MIB);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      LoLoop.BlockMasksToRecompute.insert(MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a54ce61c9315f4d35304a86cb34388921">getInstr</a>());</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      LoLoop.ToRemove.insert(TheVCMP);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      TheVCMP = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    };</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">if</span> (VPTState::isEntryPredicatedOnVCTP(Block, <span class="comment">/*exclusive*/</span> <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *VPST = Insts.front();</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> (VPTState::hasUniformPredicate(Block)) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="comment">// A vpt block starting with VPST, is only predicated upon vctp and has no</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="comment">// internal vpr defs:</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="comment">// - Remove vpst.</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="comment">// - Unpredicate the remaining instructions.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Removing VPST: &quot;</span> &lt;&lt; *VPST);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Insts.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;          RemovePredicate(Insts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="comment">// The VPT block has a non-uniform predicate but it uses a vpst and its</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="comment">// entry is guarded only by a vctp, which means we:</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="comment">// - Need to remove the original vpst.</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="comment">// - Then need to unpredicate any following instructions, until</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <span class="comment">//   we come across the divergent vpr def.</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="comment">// - Insert a new vpst to predicate the instruction(s) that following</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <span class="comment">//   the divergent vpr def.</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Divergent = VPTState::getDivergent(Block);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = Divergent-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>();</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <span class="keyword">auto</span> DivergentNext = ++<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a>(Divergent);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">while</span> (DivergentNext != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; DivergentNext-&gt;isDebugInstr())</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;          ++DivergentNext;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="keywordtype">bool</span> DivergentNextIsPredicated =</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            DivergentNext != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            <a class="code" href="namespacellvm.html#a0cc2ece7c17666da02150434a0e91992">getVPTInstrPredicate</a>(*DivergentNext) != <a class="code" href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba7d54338241268143d7fdc04d3d0f150b">ARMVCC::None</a>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ++<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(VPST), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = DivergentNext;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;          RemovePredicate(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="comment">// Check if the instruction defining vpr is a vcmp so it can be combined</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <span class="comment">// with the VPST This should be the divergent instruction</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a> =</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            <a class="code" href="namespacellvm.html#ad109cb93def9508543bd15a7d4e18d30">VCMPOpcodeToVPT</a>(Divergent-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>()) != 0 ? Divergent : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <span class="keywordflow">if</span> (DivergentNextIsPredicated) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;          <span class="comment">// Insert a VPST at the divergent only if the next instruction</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;          <span class="comment">// would actually use it. A VCMP following a VPST can be</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;          <span class="comment">// merged into a VPT so do that instead if the VCMP exists.</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            <span class="comment">// Create a VPST (with a null mask for now, we&#39;ll recompute it</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <span class="comment">// later)</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*Divergent-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>(), Divergent,</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                        Divergent-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae8ff2acea4fe63e48e8fc6cf0620ff78">getDebugLoc</a>(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ARM::MVE_VPST));</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Created VPST: &quot;</span> &lt;&lt; *MIB);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            LoLoop.BlockMasksToRecompute.insert(MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a54ce61c9315f4d35304a86cb34388921">getInstr</a>());</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="comment">// No RDA checks are necessary here since the VPST would have been</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <span class="comment">// directly after the VCMP</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            ReplaceVCMPWithVPT(<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>, <a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>);</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;          }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        }</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Removing VPST: &quot;</span> &lt;&lt; *VPST);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      LoLoop.ToRemove.insert(VPST);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.containsVCTP()) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="comment">// The vctp will be removed, so either the entire block will be dead or</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <span class="comment">// the block mask of the vp(s)t will need to be recomputed.</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *VPST = Insts.front();</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>.size() == 2) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VPST-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() == ARM::MVE_VPST &amp;&amp;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;               <span class="stringliteral">&quot;Found a VPST in an otherwise empty vpt block&quot;</span>);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        LoLoop.ToRemove.insert(VPST);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        LoLoop.BlockMasksToRecompute.insert(VPST);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Insts.front()-&gt;getOpcode() == ARM::MVE_VPST) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="comment">// If this block starts with a VPST then attempt to merge it with the</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="comment">// preceeding un-merged VCMP into a VPT. This VCMP comes from a VPT</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="comment">// block that no longer exists</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *VPST = Insts.front();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="keyword">auto</span> Next = ++<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a>(VPST);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a0cc2ece7c17666da02150434a0e91992">getVPTInstrPredicate</a>(*Next) != <a class="code" href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba7d54338241268143d7fdc04d3d0f150b">ARMVCC::None</a> &amp;&amp;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;             <span class="stringliteral">&quot;The instruction after a VPST must be predicated&quot;</span>);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      (void)Next;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *VprDef = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">getUniqueReachingMIDef</a>(VPST, ARM::VPR);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">if</span> (VprDef &amp;&amp; <a class="code" href="namespacellvm.html#ad109cb93def9508543bd15a7d4e18d30">VCMPOpcodeToVPT</a>(VprDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>()) &amp;&amp;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;          !LoLoop.ToRemove.contains(VprDef)) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a> = VprDef;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="comment">// The VCMP and VPST can only be merged if the VCMP&#39;s operands will have</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <span class="comment">// the same values at the VPST.</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="comment">// If any of the instructions between the VCMP and VPST are predicated</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="comment">// then a different code path is expected to have merged the VCMP and</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="comment">// VPST already.</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">std::none_of</a>(++<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>),</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                         <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(VPST), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a57802d669faf5aa67bf5eea374072858">hasVPRUse</a>) &amp;&amp;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a6008c55d6eafd62e1c6dcdd9d26f90fc">hasSameReachingDef</a>(<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>, VPST, <a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>-&gt;getOperand(1).getReg()) &amp;&amp;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a6008c55d6eafd62e1c6dcdd9d26f90fc">hasSameReachingDef</a>(<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>, VPST, <a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>-&gt;getOperand(2).getReg())) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;          ReplaceVCMPWithVPT(<a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">VCMP</a>, VPST);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Removing VPST: &quot;</span> &lt;&lt; *VPST);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;          LoLoop.ToRemove.insert(VPST);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  }</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160; </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  LoLoop.ToRemove.insert(LoLoop.VCTPs.begin(), LoLoop.VCTPs.end());</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="keywordtype">void</span> ARMLowOverheadLoops::Expand(LowOverheadLoop &amp;LoLoop) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160; </div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// Combine the LoopDec and LoopEnd instructions into LE(TP).</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="keyword">auto</span> ExpandLoopEnd = [<span class="keyword">this</span>](LowOverheadLoop &amp;LoLoop) {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *End = LoLoop.End;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = End-&gt;getParent();</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <span class="keywordtype">unsigned</span> Opc = LoLoop.IsTailPredicationLegal() ?</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      ARM::MVE_LETP : ARM::t2LEUpdate;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, End, End-&gt;getDebugLoc(),</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                                      <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Opc));</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(ARM::LR);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#ab6e8b39aa26af871d8ede5fa8c791ee6ad15305d7a4e34e02489c74a5ef542f36">Off</a> = LoLoop.Dec == LoLoop.End ? 1 : 0;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(End-&gt;getOperand(Off + 0));</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(End-&gt;getOperand(Off + 1));</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Inserted LE: &quot;</span> &lt;&lt; *MIB);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    LoLoop.ToRemove.insert(LoLoop.Dec);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    LoLoop.ToRemove.insert(End);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="keywordflow">return</span> &amp;*MIB;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  };</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="comment">// TODO: We should be able to automatically remove these branches before we</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="comment">// get here - probably by teaching analyzeBranch about the pseudo</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// If there is an unconditional branch, after I, that just branches to the</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// next block, remove it.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keyword">auto</span> RemoveDeadBranch = [](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a> = &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;instr_back();</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>-&gt;isUnconditionalBranch() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>) {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>-&gt;getOperand(0).getMBB();</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;isLayoutSuccessor(Succ)) {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Removing branch: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  };</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160; </div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// And VMOVCopies need to become 2xVMOVD for tail predication to be valid.</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="comment">// Anything other MQPRCopy can be converted to MVE_VORR later on.</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="keyword">auto</span> ExpandVMOVCopies = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 4&gt;</a> &amp;VMOVCopies) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : VMOVCopies) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Converting copy to VMOVD: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MQPRCopy &amp;&amp; <span class="stringliteral">&quot;Only expected MQPRCOPY!&quot;</span>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent();</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="keyword">auto</span> MIB1 = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ARM::VMOVD),</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                          ARM::D0 + (Dst - ARM::Q0) * 2)</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ARM::D0 + (Src - ARM::Q0) * 2)</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="namespacellvm.html#ad1ad73bdbf4299e0a2a33854fe76c585">predOps</a>(<a class="code" href="namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a8b2ef77967dee1220cc6ee5aee595e11">ARMCC::AL</a>));</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      (void)MIB1;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; into &quot;</span> &lt;&lt; *MIB1);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keyword">auto</span> MIB2 = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ARM::VMOVD),</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                          ARM::D0 + (Dst - ARM::Q0) * 2 + 1)</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ARM::D0 + (Src - ARM::Q0) * 2 + 1)</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="namespacellvm.html#ad1ad73bdbf4299e0a2a33854fe76c585">predOps</a>(<a class="code" href="namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a8b2ef77967dee1220cc6ee5aee595e11">ARMCC::AL</a>));</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; and  &quot;</span> &lt;&lt; *MIB2);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      (void)MIB2;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  };</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> (LoLoop.Revert) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ace27fc73322204af1d8dbd05dea927bc">isWhileLoopStart</a>(*LoLoop.Start))</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      RevertWhile(LoLoop.Start);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      RevertDo(LoLoop.Start);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span> (LoLoop.Dec == LoLoop.End)</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      RevertLoopEndDec(LoLoop.End);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      <a class="code" href="namespacellvm.html#abaa69285a8e74b69f9d178c1b7a8c1cd">RevertLoopEnd</a>(LoLoop.End, <a class="code" href="namespacellvm.html#abd46906c25e4d5703a8e422283d03bde">RevertLoopDec</a>(LoLoop.Dec));</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    ExpandVMOVCopies(LoLoop.VMOVCopies);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    LoLoop.Start = ExpandLoopStart(LoLoop);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">if</span> (LoLoop.Start)</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      RemoveDeadBranch(LoLoop.Start);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    LoLoop.End = ExpandLoopEnd(LoLoop);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    RemoveDeadBranch(LoLoop.End);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">if</span> (LoLoop.IsTailPredicationLegal())</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      ConvertVPTBlocks(LoLoop);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : LoLoop.ToRemove) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Erasing &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : LoLoop.BlockMasksToRecompute) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Recomputing VPT/VPST Block Mask: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <a class="code" href="namespacellvm.html#ae6f29e4d965b091ebc05433240206eff">recomputeVPTBlockMask</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;           ... done: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  PostOrderLoopTraversal DFS(LoLoop.ML, *MLI);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  DFS.ProcessLoop();</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock*&gt;</a> &amp;PostOrder = DFS.getOrder();</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : PostOrder) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="comment">// FIXME: For some reason, the live-in print order is non-deterministic for</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="comment">// our tests and I can&#39;t out why... So just sort them.</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ff557f73ac8f2608369d70b3c73e525">sortUniqueLiveIns</a>();</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(PostOrder))</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <a class="code" href="namespacellvm.html#aa323e6c0586d706279d7e764fc18d1ba">recomputeLivenessFlags</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// We&#39;ve moved, removed and inserted new instructions, so update RDA.</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a>-&gt;<a class="code" href="classllvm_1_1ReachingDefAnalysis.html#a39c852d6cd394007a2af6cc47012f295">reset</a>();</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160; </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="keywordtype">bool</span> ARMLowOverheadLoops::RevertNonLoops() {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARM Loops: Reverting any remaining pseudos...\n&quot;</span>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : *MF) {</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 4&gt;</a> Starts;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 4&gt;</a> Decs;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 4&gt;</a> Ends;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 4&gt;</a> EndDecs;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 4&gt;</a> MQPRCopies;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a853bcbeb54ba762a07c1ae1a0e16ccad">isLoopStart</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        Starts.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == ARM::t2LoopDec)</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        Decs.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == ARM::t2LoopEnd)</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        Ends.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == ARM::t2LoopEndDec)</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        EndDecs.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == ARM::MQPRCopy)</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        MQPRCopies.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="keywordflow">if</span> (Starts.empty() &amp;&amp; Decs.empty() &amp;&amp; Ends.empty() &amp;&amp; EndDecs.empty() &amp;&amp;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        MQPRCopies.empty())</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Start : Starts) {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ace27fc73322204af1d8dbd05dea927bc">isWhileLoopStart</a>(*Start))</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        RevertWhile(Start);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        RevertDo(Start);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Dec : Decs)</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <a class="code" href="namespacellvm.html#abd46906c25e4d5703a8e422283d03bde">RevertLoopDec</a>(Dec);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *End : Ends)</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <a class="code" href="namespacellvm.html#abaa69285a8e74b69f9d178c1b7a8c1cd">RevertLoopEnd</a>(End);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *End : EndDecs)</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      RevertLoopEndDec(End);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : MQPRCopies) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Converting copy to VORR: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == ARM::MQPRCopy &amp;&amp; <span class="stringliteral">&quot;Only expected MQPRCOPY!&quot;</span>);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent();</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="keyword">auto</span> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ARM::MVE_VORR),</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                         <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg())</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                     .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1))</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                     .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <a class="code" href="namespacellvm.html#aaa19514ee903587d4cfaee302cf7ce4d">addUnpredicatedMveVpredROp</a>(MIB, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg());</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  }</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;}</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160; </div>
<div class="line"><a name="l01887"></a><span class="lineno"><a class="line" href="namespacellvm.html#a4eb1923da1bd1eb7d880c0c116944a7b"> 1887</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a4eb1923da1bd1eb7d880c0c116944a7b">llvm::createARMLowOverheadLoopsPass</a>() {</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> ARMLowOverheadLoops();</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0eba246efd54ade21f193d2362acdead"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0eba246efd54ade21f193d2362acdead">isVectorPredicated</a></div><div class="ttdeci">static bool isVectorPredicated(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00089">ARMLowOverheadLoops.cpp:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_ad4f8f1aca0bb01f65be1d7dee43f7f83"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ad4f8f1aca0bb01f65be1d7dee43f7f83">llvm::TargetRegisterInfo::getRegAsmName</a></div><div class="ttdeci">virtual StringRef getRegAsmName(MCRegister Reg) const</div><div class="ttdoc">Return the assembly name for Reg.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l01058">TargetRegisterInfo.h:1058</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aARMSubtarget_8h_html"><div class="ttname"><a href="ARMSubtarget_8h.html">ARMSubtarget.h</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a6390597185c559f28ec61cc95a8ab606"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a6390597185c559f28ec61cc95a8ab606">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(ARMLowOverheadLoops, DEBUG_TYPE, ARM_LOW_OVERHEAD_LOOPS_NAME, false, false) static bool TryRemove(MachineInstr *MI</div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_ad6f25f6a5125ee4d8f6e01e85ebf836e"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#ad6f25f6a5125ee4d8f6e01e85ebf836e">producesFalseLanesZero</a></div><div class="ttdeci">static bool producesFalseLanesZero(MachineInstr &amp;MI, const TargetRegisterClass *QPRs, const ReachingDefAnalysis &amp;RDA, InstSet &amp;FalseLanesZero)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00883">ARMLowOverheadLoops.cpp:883</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305aa25c5be216c7a89861b0ef6822601465"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305aa25c5be216c7a89861b0ef6822601465">llvm::ARMII::RetainsPreviousHalfElement</a></div><div class="ttdeci">@ RetainsPreviousHalfElement</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00406">ARMBaseInfo.h:406</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a39c852d6cd394007a2af6cc47012f295"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a39c852d6cd394007a2af6cc47012f295">llvm::ReachingDefAnalysis::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Re-run the analysis.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00230">ReachingDefAnalysis.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00357">MachineBasicBlock.h:357</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a6008c55d6eafd62e1c6dcdd9d26f90fc"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a6008c55d6eafd62e1c6dcdd9d26f90fc">llvm::ReachingDefAnalysis::hasSameReachingDef</a></div><div class="ttdeci">bool hasSameReachingDef(MachineInstr *A, MachineInstr *B, MCRegister PhysReg) const</div><div class="ttdoc">Return whether A and B use the same def of PhysReg.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00291">ReachingDefAnalysis.cpp:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdeci">@ Def</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a2f90013f33dac170acc9c62907d99e44"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a2f90013f33dac170acc9c62907d99e44">llvm::ReachingDefAnalysis::isSafeToRemove</a></div><div class="ttdeci">bool isSafeToRemove(MachineInstr *MI, InstSet &amp;ToRemove) const</div><div class="ttdoc">Return whether removing this instruction will have no effect on the program, returning the redundant ...</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00605">ReachingDefAnalysis.cpp:605</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM_html_a7a043e6726bd97f9874d70905025648b"><div class="ttname"><a href="namespacellvm_1_1ARM.html#a7a043e6726bd97f9874d70905025648b">llvm::ARM::isVpred</a></div><div class="ttdeci">bool isVpred(OperandType op)</div><div class="ttdef"><b>Definition:</b> <a href="ARMMCTargetDesc_8h_source.html#l00120">ARMMCTargetDesc.h:120</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7dc3069afa2ce5ea62ac2eb183e51c00"><div class="ttname"><a href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none_of</a></div><div class="ttdeci">bool none_of(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::none_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01749">STLExtras.h:1749</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a855ea1a5974ed3abc39db7d80b6f6f9a"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a855ea1a5974ed3abc39db7d80b6f6f9a">llvm::ReachingDefAnalysis::getUniqueReachingMIDef</a></div><div class="ttdeci">MachineInstr * getUniqueReachingMIDef(MachineInstr *MI, MCRegister PhysReg) const</div><div class="ttdoc">If a single MachineInstr creates the reaching definition, then return it.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00438">ReachingDefAnalysis.cpp:438</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html">llvm::ReachingDefAnalysis</a></div><div class="ttdoc">This class provides the reaching def analysis.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8h_source.html#l00069">ReachingDefAnalysis.h:69</a></div></div>
<div class="ttc" id="aMCInstrDesc_8h_html"><div class="ttname"><a href="MCInstrDesc_8h.html">MCInstrDesc.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ARMSubtarget_html"><div class="ttname"><a href="classllvm_1_1ARMSubtarget.html">llvm::ARMSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMSubtarget_8h_source.html#l00047">ARMSubtarget.h:47</a></div></div>
<div class="ttc" id="aSetOperations_8h_html"><div class="ttname"><a href="SetOperations_8h.html">SetOperations.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html_a822cab8661beb03276b0566d33e41592"><div class="ttname"><a href="classllvm_1_1MCRegister.html#a822cab8661beb03276b0566d33e41592">llvm::MCRegister::from</a></div><div class="ttdeci">static MCRegister from(unsigned Val)</div><div class="ttdoc">Check the provided unsigned value is a valid MCRegister.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00067">MCRegister.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1ac8d27532cfd1d1f032ecbff2ba3611"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">llvm::MachineInstrBuilder::add</a></div><div class="ttdeci">const MachineInstrBuilder &amp; add(const MachineOperand &amp;MO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00224">MachineInstrBuilder.h:224</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4eb1923da1bd1eb7d880c0c116944a7b"><div class="ttname"><a href="namespacellvm.html#a4eb1923da1bd1eb7d880c0c116944a7b">llvm::createARMLowOverheadLoopsPass</a></div><div class="ttdeci">FunctionPass * createARMLowOverheadLoopsPass()</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l01887">ARMLowOverheadLoops.cpp:1887</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64_html_a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c"><div class="ttname"><a href="namespacellvm_1_1AArch64.html#a0c2254380bc875ff7a0c0631c45a05a1a8802372ecac79ca18a5dcda12b70f48c">llvm::AArch64::FalseLanesZero</a></div><div class="ttdeci">@ FalseLanesZero</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8h_source.html#l00577">AArch64InstrInfo.h:577</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa323e6c0586d706279d7e764fc18d1ba"><div class="ttname"><a href="namespacellvm.html#aa323e6c0586d706279d7e764fc18d1ba">llvm::recomputeLivenessFlags</a></div><div class="ttdeci">void recomputeLivenessFlags(MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Recomputes dead and kill flags in MBB.</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8cpp_source.html#l00281">LivePhysRegs.cpp:281</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineLoopInfo_html_a80b0e6e28849491c5b267be8ffc909b4"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a80b0e6e28849491c5b267be8ffc909b4">llvm::MachineLoopInfo::findLoopPreheader</a></div><div class="ttdeci">MachineBasicBlock * findLoopPreheader(MachineLoop *L, bool SpeculativePreheader=false, bool FindMultiLoopPreheader=false) const</div><div class="ttdoc">Find the block that either is the loop preheader, or could speculatively be used as the preheader.</div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8cpp_source.html#l00118">MachineLoopInfo.cpp:118</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="anamespacellvm_html_a022cded702d737077e735b1eb79f8a28"><div class="ttname"><a href="namespacellvm.html#a022cded702d737077e735b1eb79f8a28">llvm::isDoLoopStart</a></div><div class="ttdeci">static bool isDoLoopStart(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00071">MVETailPredUtils.h:71</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_aee9acb24ef4f057644a7cf7217922eaa"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#aee9acb24ef4f057644a7cf7217922eaa">Ignore</a></div><div class="ttdeci">ReachingDefAnalysis InstSet InstSet &amp; Ignore</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00547">ARMLowOverheadLoops.cpp:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7881286e3ea4d7f1c4a63c87c132dac"><div class="ttname"><a href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">llvm::printMBBReference</a></div><div class="ttdeci">Printable printMBBReference(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Prints a machine basic block reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00118">MachineBasicBlock.cpp:118</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02264">STLExtras.h:2264</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a3bf42baf773b375802538951c88d8e12"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a></div><div class="ttdeci">ReachingDefAnalysis InstSet &amp; ToRemove</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00547">ARMLowOverheadLoops.cpp:547</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3f1d4b41dbb79806492f0e48e54e2222"><div class="ttname"><a href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">llvm::recomputeLiveIns</a></div><div class="ttdeci">static void recomputeLiveIns(MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Convenience function for recomputing live-in's for MBB.</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8h_source.html#l00198">LivePhysRegs.h:198</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a00f72b50a86f27bb8b126906a164f8ba"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a00f72b50a86f27bb8b126906a164f8ba">isDomainMVE</a></div><div class="ttdeci">static bool isDomainMVE(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00102">ARMLowOverheadLoops.cpp:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html_a9491e6e3afc420c33cf508189bb12c3b"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html#a9491e6e3afc420c33cf508189bb12c3b">llvm::MCInstrDesc::operands</a></div><div class="ttdeci">ArrayRef&lt; MCOperandInfo &gt; operands() const</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00239">MCInstrDesc.h:239</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aARMSubtarget_8cpp_html_a6a14930b01ccb1cf446cd96395284102"><div class="ttname"><a href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a></div><div class="ttdeci">static cl::opt&lt; ITMode &gt; IT(cl::desc(&quot;IT block support&quot;), cl::Hidden, cl::init(DefaultIT), cl::values(clEnumValN(DefaultIT, &quot;arm-default-it&quot;, &quot;Generate any type of IT block&quot;), clEnumValN(RestrictedIT, &quot;arm-restrict-it&quot;, &quot;Disallow complex IT blocks&quot;)))</div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a57802d669faf5aa67bf5eea374072858"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a57802d669faf5aa67bf5eea374072858">hasVPRUse</a></div><div class="ttdeci">static bool hasVPRUse(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00098">ARMLowOverheadLoops.cpp:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00236">TargetRegisterInfo.h:236</a></div></div>
<div class="ttc" id="aMachineLoopUtils_8h_html"><div class="ttname"><a href="MachineLoopUtils_8h.html">MachineLoopUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a9e2a02c8e15c43cfe03fee48f85f76cf"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a9e2a02c8e15c43cfe03fee48f85f76cf">llvm::ARMII::HorizontalReduction</a></div><div class="ttdeci">@ HorizontalReduction</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00409">ARMBaseInfo.h:409</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a4c7cdd1a3013aaecff34dad81e4fefc7"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a4c7cdd1a3013aaecff34dad81e4fefc7">DisableOmitDLS</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableOmitDLS(&quot;arm-disable-omit-dls&quot;, cl::Hidden, cl::desc(&quot;Disable omitting 'dls lr, lr' instructions&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a98d240595236bf85bf1a5c5ba594bdba"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a98d240595236bf85bf1a5c5ba594bdba">llvm::MachineBasicBlock::liveins</a></div><div class="ttdeci">iterator_range&lt; livein_iterator &gt; liveins() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00453">MachineBasicBlock.h:453</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea">llvm::ARMII::VecSize</a></div><div class="ttdeci">@ VecSize</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00421">ARMBaseInfo.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html">llvm::MachineMemOperand</a></div><div class="ttdoc">A description of a memory reference used in the backend.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00127">MachineMemOperand.h:127</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a9df1ebcc0b9226f9cfda9d5f73a21526"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a9df1ebcc0b9226f9cfda9d5f73a21526">shouldInspect</a></div><div class="ttdeci">static bool shouldInspect(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00113">ARMLowOverheadLoops.cpp:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionProperties_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionProperties.html">llvm::MachineFunctionProperties</a></div><div class="ttdoc">Properties which a MachineFunction may have at a given point in time.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00128">MachineFunction.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMVCC_html_ab502517eafbff78277085abe288528bba52ebc8bde3b53664af68aae0023e35d8"><div class="ttname"><a href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba52ebc8bde3b53664af68aae0023e35d8">llvm::ARMVCC::Then</a></div><div class="ttdeci">@ Then</div><div class="ttdef"><b>Definition:</b> <a href="Utils_2ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="aMVEVPTBlockPass_8cpp_html_a173df60eae8081683241de7888b84be8"><div class="ttname"><a href="MVEVPTBlockPass_8cpp.html#a173df60eae8081683241de7888b84be8">CreateVPTBlock</a></div><div class="ttdeci">static ARM::PredBlockMask CreateVPTBlock(MachineBasicBlock::instr_iterator &amp;Iter, MachineBasicBlock::instr_iterator EndIter, SmallVectorImpl&lt; MachineInstr * &gt; &amp;DeadInstructions)</div><div class="ttdef"><b>Definition:</b> <a href="MVEVPTBlockPass_8cpp_source.html#l00163">MVEVPTBlockPass.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00877">SparseBitVector.h:877</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ace3ed0412f841777b7de55d47883890e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">llvm::MachineBasicBlock::back</a></div><div class="ttdeci">MachineInstr &amp; back()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00289">MachineBasicBlock.h:289</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa66305962c0042c0ef4d8f881a282d72"><div class="ttname"><a href="namespacellvm.html#aa66305962c0042c0ef4d8f881a282d72">llvm::VCTPOpcodeToLSTP</a></div><div class="ttdeci">static unsigned VCTPOpcodeToLSTP(unsigned Opcode, bool IsDoLoop)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00025">MVETailPredUtils.h:25</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a4a14a60645d8de4b2d06b6ebf0d89fa0"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a4a14a60645d8de4b2d06b6ebf0d89fa0">llvm::ReachingDefAnalysis::hasLocalDefBefore</a></div><div class="ttdeci">bool hasLocalDefBefore(MachineInstr *MI, MCRegister PhysReg) const</div><div class="ttdoc">Provide whether the register has been defined in the same basic block as, and before,...</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00326">ReachingDefAnalysis.cpp:326</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a3242b5c8db0ce6956c921f225055c3a8"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a3242b5c8db0ce6956c921f225055c3a8">llvm::ReachingDefAnalysis::getLocalLiveOutMIDef</a></div><div class="ttdeci">MachineInstr * getLocalLiveOutMIDef(MachineBasicBlock *MBB, MCRegister PhysReg) const</div><div class="ttdoc">Return the local MI that produces the live out value for PhysReg, or nullptr for a non-live out or no...</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00527">ReachingDefAnalysis.cpp:527</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00167">MachineFunctionPass.cpp:167</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00089">MachineLoopInfo.h:89</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a1d1ee0a18b878ed2571430f0b9ba7441"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a1d1ee0a18b878ed2571430f0b9ba7441">llvm::ARMII::DoubleWidthResult</a></div><div class="ttdeci">@ DoubleWidthResult</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00413">ARMBaseInfo.h:413</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a7bc46cb4bc77e9715066c204bd98e309"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a7bc46cb4bc77e9715066c204bd98e309">llvm::ReachingDefAnalysis::isSafeToMoveBackwards</a></div><div class="ttdeci">bool isSafeToMoveBackwards(MachineInstr *From, MachineInstr *To) const</div><div class="ttdoc">Return whether From can be moved backwards to just after To.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00595">ReachingDefAnalysis.cpp:595</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae1158b6031fe51c293913bcd9a3353e5"><div class="ttname"><a href="namespacellvm.html#ae1158b6031fe51c293913bcd9a3353e5">llvm::getAddSubImmediate</a></div><div class="ttdeci">int getAddSubImmediate(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00871">ARMBaseInstrInfo.h:871</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a85eb6ee9f537a283b2ba9964c54ab2f2"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">llvm::MachineInstrBuilder::addDef</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addDef(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register definition operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00116">MachineInstrBuilder.h:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a03936a9b37da541420049422204ab206"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a03936a9b37da541420049422204ab206">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00369">MachineBasicBlock.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html_a60b6974966381f08079722f2258a0039"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html#a60b6974966381f08079722f2258a0039">llvm::TargetRegisterClass::contains</a></div><div class="ttdeci">bool contains(Register Reg) const</div><div class="ttdoc">Return true if the specified register is included in this register class.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00096">TargetRegisterInfo.h:96</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab1063ce5e180c89490fae50511a46a29"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">llvm::MachineFunction::front</a></div><div class="ttdeci">const MachineBasicBlock &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00882">MachineFunction.h:882</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html_a46e0fcca2366f30d5e35b3d7dcb9c65f"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">llvm::MCInstrDesc::TSFlags</a></div><div class="ttdeci">uint64_t TSFlags</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00213">MCInstrDesc.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1PseudoSourceValue_html_ab1969256cc373d72874932779a45b46c"><div class="ttname"><a href="classllvm_1_1PseudoSourceValue.html#ab1969256cc373d72874932779a45b46c">llvm::PseudoSourceValue::kind</a></div><div class="ttdeci">unsigned kind() const</div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8h_source.html#l00066">PseudoSourceValue.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adbcec9820951b0e3872c94cbd4e57c80"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">llvm::MachineBasicBlock::insertAfter</a></div><div class="ttdeci">iterator insertAfter(iterator I, MachineInstr *MI)</div><div class="ttdoc">Insert MI into the instruction list after I.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00958">MachineBasicBlock.h:958</a></div></div>
<div class="ttc" id="aMachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_adb13793b98ab59209a5309d26f831850"><div class="ttname"><a href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">llvm::SetVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Get an iterator to the beginning of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00082">SetVector.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_af8571e8dfb010fd8ae76cc4f87aafaac"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">llvm::MachineInstrBuilder::addMBB</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addMBB(MachineBasicBlock *MBB, unsigned TargetFlags=0) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00146">MachineInstrBuilder.h:146</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MC_html_ab81ff834129c7ed29d4e74b0758073fd"><div class="ttname"><a href="namespacellvm_1_1ARM__MC.html#ab81ff834129c7ed29d4e74b0758073fd">llvm::ARM_MC::isPredicated</a></div><div class="ttdeci">bool isPredicated(const MCInst &amp;MI, const MCInstrInfo *MCII)</div><div class="ttdef"><b>Definition:</b> <a href="ARMMCTargetDesc_8cpp_source.html#l00170">ARMMCTargetDesc.cpp:170</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a63072b50a2bbaf2a289625cd3f7958ad"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a63072b50a2bbaf2a289625cd3f7958ad">llvm::ReachingDefAnalysis::getGlobalUses</a></div><div class="ttdeci">void getGlobalUses(MachineInstr *MI, MCRegister PhysReg, InstSet &amp;Uses) const</div><div class="ttdoc">Collect the users of the value stored in PhysReg, which is defined by MI.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00375">ReachingDefAnalysis.cpp:375</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a46ef4c167cadd485c1e39881969bc2d5"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a46ef4c167cadd485c1e39881969bc2d5">producesDoubleWidthResult</a></div><div class="ttdeci">static bool producesDoubleWidthResult(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00838">ARMLowOverheadLoops.cpp:838</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a69544ec8658eadeed98245dc37c3a541"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00379">MachineOperand.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="anamespacellvm_html_abd46906c25e4d5703a8e422283d03bde"><div class="ttname"><a href="namespacellvm.html#abd46906c25e4d5703a8e422283d03bde">llvm::RevertLoopDec</a></div><div class="ttdeci">void RevertLoopDec(MachineInstr *MI, const TargetInstrInfo *TII, bool SetFlags=false)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00145">MVETailPredUtils.h:145</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a07023b4966d755e56b328349ef01a237"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a07023b4966d755e56b328349ef01a237">llvm::ARMII::VecSizeShift</a></div><div class="ttdeci">@ VecSizeShift</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00420">ARMBaseInfo.h:420</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0833f10a51730f325a49f05d5bc1d327"><div class="ttname"><a href="namespacellvm.html#a0833f10a51730f325a49f05d5bc1d327">llvm::findFirstVPTPredOperandIdx</a></div><div class="ttdeci">int findFirstVPTPredOperandIdx(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="Thumb2InstrInfo_8cpp_source.html#l00776">Thumb2InstrInfo.cpp:776</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a96db53f04326f6421725b16e4ee7a596"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a96db53f04326f6421725b16e4ee7a596">llvm::ARMII::DomainMask</a></div><div class="ttdeci">@ DomainMask</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00426">ARMBaseInfo.h:426</a></div></div>
<div class="ttc" id="anamespacellvm_html_abaa69285a8e74b69f9d178c1b7a8c1cd"><div class="ttname"><a href="namespacellvm.html#abaa69285a8e74b69f9d178c1b7a8c1cd">llvm::RevertLoopEnd</a></div><div class="ttdeci">void RevertLoopEnd(MachineInstr *MI, const TargetInstrInfo *TII, unsigned BrOpc=ARM::t2Bcc, bool SkipCmp=false)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00167">MVETailPredUtils.h:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00045">TargetRegisterInfo.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aCorrelatedValuePropagation_8cpp_html_aad75d6f4f14a7b791076c6785aa59be4"><div class="ttname"><a href="CorrelatedValuePropagation_8cpp.html#aad75d6f4f14a7b791076c6785aa59be4">Domain</a></div><div class="ttdeci">Domain</div><div class="ttdef"><b>Definition:</b> <a href="CorrelatedValuePropagation_8cpp_source.html#l00696">CorrelatedValuePropagation.cpp:696</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_ad84c5ccc73435217f046a6fe26d547f9"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#ad84c5ccc73435217f046a6fe26d547f9">getVecSize</a></div><div class="ttdeci">static int getVecSize(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00107">ARMLowOverheadLoops.cpp:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_acc5e979e3fa3c222553de9b741c3e12b"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#acc5e979e3fa3c222553de9b741c3e12b">llvm::MachineFunction::getProperties</a></div><div class="ttdeci">const MachineFunctionProperties &amp; getProperties() const</div><div class="ttdoc">Get the function properties.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00763">MachineFunction.h:763</a></div></div>
<div class="ttc" id="aMVETailPredUtils_8h_html"><div class="ttname"><a href="MVETailPredUtils_8h.html">MVETailPredUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0cc2ece7c17666da02150434a0e91992"><div class="ttname"><a href="namespacellvm.html#a0cc2ece7c17666da02150434a0e91992">llvm::getVPTInstrPredicate</a></div><div class="ttdeci">ARMVCC::VPTCodes getVPTInstrPredicate(const MachineInstr &amp;MI, Register &amp;PredReg)</div><div class="ttdef"><b>Definition:</b> <a href="Thumb2InstrInfo_8cpp_source.html#l00786">Thumb2InstrInfo.cpp:786</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdoc">Describe properties that are true of each instruction in the target description file.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00198">MCInstrDesc.h:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionProperties_html_aa0f2b6097642894ce79ff3e15c896206"><div class="ttname"><a href="classllvm_1_1MachineFunctionProperties.html#aa0f2b6097642894ce79ff3e15c896206">llvm::MachineFunctionProperties::set</a></div><div class="ttdeci">MachineFunctionProperties &amp; set(Property P)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00197">MachineFunction.h:197</a></div></div>
<div class="ttc" id="astructllvm_1_1MachineBasicBlock_1_1RegisterMaskPair_html"><div class="ttname"><a href="structllvm_1_1MachineBasicBlock_1_1RegisterMaskPair.html">llvm::MachineBasicBlock::RegisterMaskPair</a></div><div class="ttdoc">Pair of physical register and lane mask.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00100">MachineBasicBlock.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMISD_html_a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64"><div class="ttname"><a href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38a7c288956c8c8e43434e6ae8633daab64">llvm::ARMISD::VCMP</a></div><div class="ttdeci">@ VCMP</div><div class="ttdef"><b>Definition:</b> <a href="ARMISelLowering_8h_source.html#l00148">ARMISelLowering.h:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1PseudoSourceValue_html_a9959ffdc41bc31cf2211b8824f79259eaf38d1857511c3f0404c95f65664b36ab"><div class="ttname"><a href="classllvm_1_1PseudoSourceValue.html#a9959ffdc41bc31cf2211b8824f79259eaf38d1857511c3f0404c95f65664b36ab">llvm::PseudoSourceValue::FixedStack</a></div><div class="ttdeci">@ FixedStack</div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8h_source.html#l00042">PseudoSourceValue.h:42</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_ae4be1491d9372bf9fb8a4ce158eb1421"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#ae4be1491d9372bf9fb8a4ce158eb1421">DisableTailPredication</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableTailPredication(&quot;arm-loloops-disable-tailpred&quot;, cl::Hidden, cl::desc(&quot;Disable tail-predication in the ARM LowOverheadLoop pass&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1PseudoSourceValue_html"><div class="ttname"><a href="classllvm_1_1PseudoSourceValue.html">llvm::PseudoSourceValue</a></div><div class="ttdoc">Special value supplied for machine level alias analysis.</div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8h_source.html#l00035">PseudoSourceValue.h:35</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a8535dd8e5a6bb6d0f053ba22246a1593"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a8535dd8e5a6bb6d0f053ba22246a1593">isVectorPredicate</a></div><div class="ttdeci">static bool isVectorPredicate(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00094">ARMLowOverheadLoops.cpp:94</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad109cb93def9508543bd15a7d4e18d30"><div class="ttname"><a href="namespacellvm.html#ad109cb93def9508543bd15a7d4e18d30">llvm::VCMPOpcodeToVPT</a></div><div class="ttdeci">static unsigned VCMPOpcodeToVPT(unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00587">ARMBaseInstrInfo.h:587</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionProperties_html_ad85237c6c667e4713efe8921e9c32ac1a72f7d830dd5ddb30f06d8e9639558ac3"><div class="ttname"><a href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a72f7d830dd5ddb30f06d8e9639558ac3">llvm::MachineFunctionProperties::Property::NoVRegs</a></div><div class="ttdeci">@ NoVRegs</div></div>
<div class="ttc" id="anamespacellvm_1_1ARMCC_html_ac8391dd6b8083baa870dee5142ff22b6ae08639a6e0f682daf9d9b4809ee0cf7c"><div class="ttname"><a href="namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6ae08639a6e0f682daf9d9b4809ee0cf7c">llvm::ARMCC::NE</a></div><div class="ttdeci">@ NE</div><div class="ttdef"><b>Definition:</b> <a href="Utils_2ARMBaseInfo_8h_source.html#l00032">ARMBaseInfo.h:32</a></div></div>
<div class="ttc" id="aCodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMCC_html_ac8391dd6b8083baa870dee5142ff22b6a8b2ef77967dee1220cc6ee5aee595e11"><div class="ttname"><a href="namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a8b2ef77967dee1220cc6ee5aee595e11">llvm::ARMCC::AL</a></div><div class="ttdeci">@ AL</div><div class="ttdef"><b>Definition:</b> <a href="Utils_2ARMBaseInfo_8h_source.html#l00045">ARMBaseInfo.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_af8a50544090e81ac83601aff8f4b0142"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">llvm::SmallPtrSetImplBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00092">SmallPtrSet.h:92</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ae8ff2acea4fe63e48e8fc6cf0620ff78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae8ff2acea4fe63e48e8fc6cf0620ff78">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Returns the debug location id of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00445">MachineInstr.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineLoop_html"><div class="ttname"><a href="classllvm_1_1MachineLoop.html">llvm::MachineLoop</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00044">MachineLoopInfo.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a51469ab7f147668678a486661b02ae59"><div class="ttname"><a href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">llvm::SetVector::contains</a></div><div class="ttdeci">bool contains(const key_type &amp;key) const</div><div class="ttdoc">Check if the SetVector contains the given key.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00202">SetVector.h:202</a></div></div>
<div class="ttc" id="aARMBaseRegisterInfo_8h_html"><div class="ttname"><a href="ARMBaseRegisterInfo_8h.html">ARMBaseRegisterInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a32fb714dc42507917fed431c24b79020"><div class="ttname"><a href="namespacellvm.html#a32fb714dc42507917fed431c24b79020">llvm::isVPTOpcode</a></div><div class="ttdeci">static bool isVPTOpcode(int Opc)</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00571">ARMBaseInstrInfo.h:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a55ad07e4cbe29bea4cb69b78472b690e"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a55ad07e4cbe29bea4cb69b78472b690e">llvm::TargetRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned i) const</div><div class="ttdoc">Returns the register class associated with the enumeration value.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00778">TargetRegisterInfo.h:778</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionProperties_html_ad85237c6c667e4713efe8921e9c32ac1a0020348b08bb4cccecf3241eac999d8a"><div class="ttname"><a href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a0020348b08bb4cccecf3241eac999d8a">llvm::MachineFunctionProperties::Property::TracksLiveness</a></div><div class="ttdeci">@ TracksLiveness</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a4c9594c955fec80c73ddd964b5efd554"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const</div><div class="ttdoc">isReg - Tests if this is a MO_Register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00329">MachineOperand.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad30a7e0e8650626f5a5ca4b7002ac267"><div class="ttname"><a href="namespacellvm.html#ad30a7e0e8650626f5a5ca4b7002ac267">llvm::RevertDoLoopStart</a></div><div class="ttdeci">void RevertDoLoopStart(MachineInstr *MI, const TargetInstrInfo *TII)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00135">MVETailPredUtils.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a7004354fbee1c8cd74ed9001915e1db5"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00408">SmallPtrSet.h:408</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1ARMBaseInstrInfo_html"><div class="ttname"><a href="classllvm_1_1ARMBaseInstrInfo.html">llvm::ARMBaseInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00037">ARMBaseInstrInfo.h:37</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_abf73a826b5d6f739eb4af48ddf14c5b4"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00403">SmallPtrSet.h:403</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00582">MachineFunction.cpp:582</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_a1aac4710f97e398ee1ab548fa48b5bb9"><div class="ttname"><a href="namespacellvm.html#a1aac4710f97e398ee1ab548fa48b5bb9">llvm::isVCTP</a></div><div class="ttdeci">static bool isVCTP(const MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00058">MVETailPredUtils.h:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00201">X86.h:201</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00076">ARMLowOverheadLoops.cpp:76</a></div></div>
<div class="ttc" id="aARMBaseInstrInfo_8h_html"><div class="ttname"><a href="ARMBaseInstrInfo_8h.html">ARMBaseInstrInfo.h</a></div></div>
<div class="ttc" id="aMemDepPrinter_8cpp_html_a470d8721ad7c3b718e9daeabdaeb4700"><div class="ttname"><a href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a></div><div class="ttdeci">print Print MemDeps of function</div><div class="ttdef"><b>Definition:</b> <a href="MemDepPrinter_8cpp_source.html#l00082">MemDepPrinter.cpp:82</a></div></div>
<div class="ttc" id="aInlineOrder_8cpp_html_a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218"><div class="ttname"><a href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3ad01fd9b01e9dde8bd3dc247afbfb7218">InlinePriorityMode::ML</a></div><div class="ttdeci">@ ML</div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMVCC_html_ab502517eafbff78277085abe288528bba7d54338241268143d7fdc04d3d0f150b"><div class="ttname"><a href="namespacellvm_1_1ARMVCC.html#ab502517eafbff78277085abe288528bba7d54338241268143d7fdc04d3d0f150b">llvm::ARMVCC::None</a></div><div class="ttdeci">@ None</div><div class="ttdef"><b>Definition:</b> <a href="Utils_2ARMBaseInfo_8h_source.html#l00090">ARMBaseInfo.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a49effcc0d9e7a321043ade70145d11f6"><div class="ttname"><a href="classllvm_1_1Register.html#a49effcc0d9e7a321043ade70145d11f6">llvm::Register::asMCReg</a></div><div class="ttdeci">MCRegister asMCReg() const</div><div class="ttdoc">Utility to check-convert this value to a MCRegister.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00120">Register.h:120</a></div></div>
<div class="ttc" id="aARM_8h_html"><div class="ttname"><a href="ARM_8h.html">ARM.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1IsaInfo_html_ab6e8b39aa26af871d8ede5fa8c791ee6ad15305d7a4e34e02489c74a5ef542f36"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#ab6e8b39aa26af871d8ede5fa8c791ee6ad15305d7a4e34e02489c74a5ef542f36">llvm::AMDGPU::IsaInfo::TargetIDSetting::Off</a></div><div class="ttdeci">@ Off</div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a5898b6ed934ad744eefecc5d5297a3a8"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a5898b6ed934ad744eefecc5d5297a3a8">isRegInClass</a></div><div class="ttdeci">static bool isRegInClass(const MachineOperand &amp;MO, const TargetRegisterClass *Class)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00821">ARMLowOverheadLoops.cpp:821</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_aed8d139ece631812f972a8cc074adc55"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aed8d139ece631812f972a8cc074adc55">llvm::MachineOperand::setIsDef</a></div><div class="ttdeci">void setIsDef(bool Val=true)</div><div class="ttdoc">Change a def to a use, or a use to a def.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00107">MachineOperand.cpp:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00095">SmallPtrSet.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ae34c996b58df9b9ce6695a0c8b70c533"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">MachineInstrBundleIterator&lt; MachineInstr &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00273">MachineBasicBlock.h:273</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a33871fd2a06a8af436f0cb548798ec5d"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a33871fd2a06a8af436f0cb548798ec5d">isHorizontalReduction</a></div><div class="ttdeci">static bool isHorizontalReduction(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00844">ARMLowOverheadLoops.cpp:844</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4d2c96836214c1f13357ffb99125fb4a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">llvm::MachineBasicBlock::successors</a></div><div class="ttdeci">iterator_range&lt; succ_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00396">MachineBasicBlock.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a0363204b5fbab08a46f5a7cd7f376f78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns the opcode of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00516">MachineInstr.h:516</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a376f2f9d5ff928037a2ef34d804509bf"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a376f2f9d5ff928037a2ef34d804509bf">llvm::ReachingDefAnalysis::getReachingLocalUses</a></div><div class="ttdeci">void getReachingLocalUses(MachineInstr *MI, MCRegister PhysReg, InstSet &amp;Uses) const</div><div class="ttdoc">Provides the uses, in the same block as MI, of register that MI defines.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00331">ReachingDefAnalysis.cpp:331</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9061b9ab01f65a05033f729a2f12e91a"><div class="ttname"><a href="namespacellvm.html#a9061b9ab01f65a05033f729a2f12e91a">llvm::RevertWhileLoopStartLR</a></div><div class="ttdeci">void RevertWhileLoopStartLR(MachineInstr *MI, const TargetInstrInfo *TII, unsigned BrOpc=ARM::t2Bcc, bool UseCmp=false)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00098">MVETailPredUtils.h:98</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="anamespacellvm_html_ace27fc73322204af1d8dbd05dea927bc"><div class="ttname"><a href="namespacellvm.html#ace27fc73322204af1d8dbd05dea927bc">llvm::isWhileLoopStart</a></div><div class="ttdeci">static bool isWhileLoopStart(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00076">MVETailPredUtils.h:76</a></div></div>
<div class="ttc" id="aARMBasicBlockInfo_8h_html"><div class="ttname"><a href="ARMBasicBlockInfo_8h.html">ARMBasicBlockInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a96ffcb6b61041f2af86695a16e92ef58"><div class="ttname"><a href="namespacellvm.html#a96ffcb6b61041f2af86695a16e92ef58">llvm::getWhileLoopStartTargetBB</a></div><div class="ttdeci">MachineBasicBlock * getWhileLoopStartTargetBB(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00087">MVETailPredUtils.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a002fd916e7206e01d512eeb06d405cf0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00313">MachineInstr.h:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a54ce61c9315f4d35304a86cb34388921"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a54ce61c9315f4d35304a86cb34388921">llvm::MachineInstrBuilder::getInstr</a></div><div class="ttdeci">MachineInstr * getInstr() const</div><div class="ttdoc">If conversion operators fail, use this method to get the MachineInstr explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00089">MachineInstrBuilder.h:89</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a67391278875db8d144d4b6bb6e6a09b8"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a67391278875db8d144d4b6bb6e6a09b8">llvm::ReachingDefAnalysis::collectKilledOperands</a></div><div class="ttdeci">void collectKilledOperands(MachineInstr *MI, InstSet &amp;Dead) const</div><div class="ttdoc">Assuming MI is dead, recursively search the incoming operands which are killed by MI and collect thos...</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00649">ReachingDefAnalysis.cpp:649</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a96bda22e654a59fec0620767b56dd53f"><div class="ttname"><a href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">llvm::SetVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Completely clear the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00213">SetVector.h:213</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a5d85b8fd4787153b0ade229c616b7562"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a5d85b8fd4787153b0ade229c616b7562">ValidateMVEStore</a></div><div class="ttdeci">static bool ValidateMVEStore(MachineInstr *MI, MachineLoop *ML)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l01145">ARMLowOverheadLoops.cpp:1145</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a1f45078044970763de9f760034364182"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a1f45078044970763de9f760034364182">llvm::ReachingDefAnalysis::isSafeToDefRegAt</a></div><div class="ttdeci">bool isSafeToDefRegAt(MachineInstr *MI, MCRegister PhysReg) const</div><div class="ttdoc">Return whether a MachineInstr could be inserted at MI and safely define the given register without af...</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00681">ReachingDefAnalysis.cpp:681</a></div></div>
<div class="ttc" id="aThumb2InstrInfo_8h_html"><div class="ttname"><a href="Thumb2InstrInfo_8h.html">Thumb2InstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a9ff557f73ac8f2608369d70b3c73e525"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a9ff557f73ac8f2608369d70b3c73e525">llvm::MachineBasicBlock::sortUniqueLiveIns</a></div><div class="ttdeci">void sortUniqueLiveIns()</div><div class="ttdoc">Sorts and uniques the LiveIns vector.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00607">MachineBasicBlock.cpp:607</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3435a2381e60e842e915f85c931b7dde"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">llvm::MachineBasicBlock::insert</a></div><div class="ttdeci">instr_iterator insert(instr_iterator I, MachineInstr *M)</div><div class="ttdoc">Insert MI into the instruction list before I, possibly inside a bundle.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01336">MachineBasicBlock.cpp:1336</a></div></div>
<div class="ttc" id="aMachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="aReachingDefAnalysis_8h_html"><div class="ttname"><a href="ReachingDefAnalysis_8h.html">ReachingDefAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae6f29e4d965b091ebc05433240206eff"><div class="ttname"><a href="namespacellvm.html#ae6f29e4d965b091ebc05433240206eff">llvm::recomputeVPTBlockMask</a></div><div class="ttdeci">void recomputeVPTBlockMask(MachineInstr &amp;Instr)</div><div class="ttdef"><b>Definition:</b> <a href="Thumb2InstrInfo_8cpp_source.html#l00798">Thumb2InstrInfo.cpp:798</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a80f7d9c4184a1f142229021d46b9433e"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a80f7d9c4184a1f142229021d46b9433e">llvm::ReachingDefAnalysis::getGlobalReachingDefs</a></div><div class="ttdeci">void getGlobalReachingDefs(MachineInstr *MI, MCRegister PhysReg, InstSet &amp;Defs) const</div><div class="ttdoc">Collect all possible definitions of the value stored in PhysReg, which is used by MI.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00400">ReachingDefAnalysis.cpp:400</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a2765f2d6b072f973ae4e6aba772836c7"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a2765f2d6b072f973ae4e6aba772836c7">canGenerateNonZeros</a></div><div class="ttdeci">static bool canGenerateNonZeros(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00854">ARMLowOverheadLoops.cpp:854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305ab5112bfba90c616984021580dd1131b8"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305ab5112bfba90c616984021580dd1131b8">llvm::ARMII::DomainMVE</a></div><div class="ttdeci">@ DomainMVE</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00431">ARMBaseInfo.h:431</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_affac0dc3d407ef3dee29b8bc9a4836bc"><div class="ttname"><a href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">llvm::SetVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdoc">Get an iterator to the end of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00092">SetVector.h:92</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_aeddbd656a8e178ba416c845cd0171060"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">ARM_LOW_OVERHEAD_LOOPS_NAME</a></div><div class="ttdeci">#define ARM_LOW_OVERHEAD_LOOPS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00077">ARMLowOverheadLoops.cpp:77</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00184">RustDemangle.cpp:184</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a1b4c3cf053b165d7b914e2ebf4bb02c6"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a1b4c3cf053b165d7b914e2ebf4bb02c6">RDA</a></div><div class="ttdeci">ReachingDefAnalysis &amp; RDA</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00546">ARMLowOverheadLoops.cpp:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_acd9233060e5c22ac0ca9aaa7dd994d52"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#acd9233060e5c22ac0ca9aaa7dd994d52">llvm::ReachingDefAnalysis::isReachingDefLiveOut</a></div><div class="ttdeci">bool isReachingDefLiveOut(MachineInstr *MI, MCRegister PhysReg) const</div><div class="ttdoc">Return whether the reaching def for MI also is live out of its parent block.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00505">ReachingDefAnalysis.cpp:505</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a095ce2d870dadf620a4c887ecc0efef8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00281">MachineBasicBlock.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaa19514ee903587d4cfaee302cf7ce4d"><div class="ttname"><a href="namespacellvm.html#aaa19514ee903587d4cfaee302cf7ce4d">llvm::addUnpredicatedMveVpredROp</a></div><div class="ttdeci">void addUnpredicatedMveVpredROp(MachineInstrBuilder &amp;MIB, Register DestReg)</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8cpp_source.html#l00873">ARMBaseInstrInfo.cpp:873</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl</a></div><div class="ttdoc">A templated base class for SmallPtrSet which provides the typesafe interface that is common across al...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00344">SmallPtrSet.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1ad73bdbf4299e0a2a33854fe76c585"><div class="ttname"><a href="namespacellvm.html#ad1ad73bdbf4299e0a2a33854fe76c585">llvm::predOps</a></div><div class="ttdeci">static std::array&lt; MachineOperand, 2 &gt; predOps(ARMCC::CondCodes Pred, unsigned PredReg=0)</div><div class="ttdoc">Get the operands corresponding to the given Pred value.</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00542">ARMBaseInstrInfo.h:542</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a36f4fc1556edfb50cca3fe85fcc05e93"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a36f4fc1556edfb50cca3fe85fcc05e93">llvm::ReachingDefAnalysis::getMIOperand</a></div><div class="ttdeci">MachineInstr * getMIOperand(MachineInstr *MI, unsigned Idx) const</div><div class="ttdoc">If a single MachineInstr creates the reaching definition, for MIs operand at Idx, then return it.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00458">ReachingDefAnalysis.cpp:458</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdeci">@ Dead</div><div class="ttdoc">Unused definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00050">MachineInstrBuilder.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector</a></div><div class="ttdoc">A vector that has set insertion semantics.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00040">SetVector.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">llvm::pdb::PDB_SymType::Block</a></div><div class="ttdeci">@ Block</div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a8af4c9dee593e1e883a0d3509c25d1d0"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a8af4c9dee593e1e883a0d3509c25d1d0">retainsPreviousHalfElement</a></div><div class="ttdeci">static bool retainsPreviousHalfElement(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00829">ARMLowOverheadLoops.cpp:829</a></div></div>
<div class="ttc" id="anamespacellvm_html_a51c2a3a98a4139250a74ecae0bec5c65"><div class="ttname"><a href="namespacellvm.html#a51c2a3a98a4139250a74ecae0bec5c65">llvm::isMovRegOpcode</a></div><div class="ttdeci">static bool isMovRegOpcode(int Opc)</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00734">ARMBaseInstrInfo.h:734</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">llvm::MCID::Terminator</a></div><div class="ttdeci">@ Terminator</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00158">MCInstrDesc.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a0c893675dfd5d1b1e4aea1e8211217c7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a0c893675dfd5d1b1e4aea1e8211217c7">llvm::MachineOperand::getOperandNo</a></div><div class="ttdeci">unsigned getOperandNo() const</div><div class="ttdoc">Returns the index of this operand in the instruction that it belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00056">MachineOperand.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a6f4d311cce1cd30c215499f79215051c"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a6f4d311cce1cd30c215499f79215051c">llvm::ARMII::ValidForTailPredication</a></div><div class="ttdeci">@ ValidForTailPredication</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00402">ARMBaseInfo.h:402</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5fc054f5fba4582092c2761201b57519"><div class="ttname"><a href="namespacellvm.html#a5fc054f5fba4582092c2761201b57519">llvm::isSubImmOpcode</a></div><div class="ttdeci">static bool isSubImmOpcode(int Opc)</div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInstrInfo_8h_source.html#l00727">ARMBaseInstrInfo.h:727</a></div></div>
<div class="ttc" id="aclassllvm_1_1ARMBasicBlockUtils_html"><div class="ttname"><a href="classllvm_1_1ARMBasicBlockUtils.html">llvm::ARMBasicBlockUtils</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBasicBlockInfo_8h_source.html#l00109">ARMBasicBlockInfo.h:109</a></div></div>
<div class="ttc" id="anamespacellvm_html_a469e94cf2a0777a0bb92dfb2f6fa5b12"><div class="ttname"><a href="namespacellvm.html#a469e94cf2a0777a0bb92dfb2f6fa5b12">llvm::getTailPredVectorWidth</a></div><div class="ttdeci">static unsigned getTailPredVectorWidth(unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00042">MVETailPredUtils.h:42</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ad7f2dc64214551418f486026ffc95fa4"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad7f2dc64214551418f486026ffc95fa4">llvm::MachineOperand::isIdenticalTo</a></div><div class="ttdeci">bool isIdenticalTo(const MachineOperand &amp;Other) const</div><div class="ttdoc">Returns true if this operand is identical to the specified operand except for liveness related flags ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00306">MachineOperand.cpp:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReachingDefAnalysis_html_a09e2271431de53cc4cc5057148c18c93"><div class="ttname"><a href="classllvm_1_1ReachingDefAnalysis.html#a09e2271431de53cc4cc5057148c18c93">llvm::ReachingDefAnalysis::isSafeToMoveForwards</a></div><div class="ttdeci">bool isSafeToMoveForwards(MachineInstr *From, MachineInstr *To) const</div><div class="ttdoc">Return whether From can be moved forwards to just before To.</div><div class="ttdef"><b>Definition:</b> <a href="ReachingDefAnalysis_8cpp_source.html#l00585">ReachingDefAnalysis.cpp:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html"><div class="ttname"><a href="classllvm_1_1MCRegister.html">llvm::MCRegister</a></div><div class="ttdoc">Wrapper class representing physical registers. Should be passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00024">MCRegister.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_html_a853bcbeb54ba762a07c1ae1a0e16ccad"><div class="ttname"><a href="namespacellvm.html#a853bcbeb54ba762a07c1ae1a0e16ccad">llvm::isLoopStart</a></div><div class="ttdeci">static bool isLoopStart(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="MVETailPredUtils_8h_source.html#l00082">MVETailPredUtils.h:82</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a94d23373106467003722f7d6c17b1528"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, T &amp;&amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00809">SmallVector.h:809</a></div></div>
<div class="ttc" id="aLivePhysRegs_8h_html"><div class="ttname"><a href="LivePhysRegs_8h.html">LivePhysRegs.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:11:13 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/IndVarSimplify.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IndVarSimplify.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="IndVarSimplify_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- IndVarSimplify.cpp - Induction Variable Elimination ----------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This transformation analyzes and transforms the induction variables (and</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// computations derived from them) into simpler forms suitable for subsequent</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// analysis and transformation.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// If the trip count of a loop is computable, this pass also makes the following</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// changes:</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//   1. The exit condition for the loop is canonicalized to compare the</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//      induction value against the exit value.  This turns loops like:</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//        &#39;for (i = 7; i*i &lt; 1000; ++i)&#39; into &#39;for (i = 0; i != 25; ++i)&#39;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//   2. Any use outside of the loop of an expression derived from the indvar</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//      is changed to compute the derived value outside of the loop, eliminating</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//      the dependence on the exit value of the induction variable.  If the only</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//      purpose of the loop is to compute the exit value of some derived</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//      expression, this transformation will make the loop dead.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IndVarSimplify_8h.html">llvm/Transforms/Scalar/IndVarSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APFloat_8h.html">llvm/ADT/APFloat.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSA_8h.html">llvm/Analysis/MemorySSA.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSAUpdater_8h.html">llvm/Analysis/MemorySSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpressions_8h.html">llvm/Analysis/ScalarEvolutionExpressions.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantRange_8h.html">llvm/IR/ConstantRange.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpander_8h.html">llvm/Transforms/Utils/ScalarEvolutionExpander.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SimplifyIndVar_8h.html">llvm/Transforms/Utils/SimplifyIndVar.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   88</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;indvars&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumWidened     , <span class="stringliteral">&quot;Number of indvars widened&quot;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumReplaced    , <span class="stringliteral">&quot;Number of exit values replaced&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumLFTR        , <span class="stringliteral">&quot;Number of loop exit tests replaced&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumElimExt     , <span class="stringliteral">&quot;Number of IV sign/zero extends eliminated&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumElimIV      , <span class="stringliteral">&quot;Number of congruent IVs eliminated&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// Trip count verification can be enabled by default under NDEBUG if we</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// implement a strong expression equivalence checker in SCEV. Until then, we</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// use the verify-indvars flag, which may assert in some cases.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IndVarSimplify_8cpp.html#adf55f1933cc6a98745edddff07638c7d">VerifyIndvars</a>(</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="stringliteral">&quot;verify-indvars&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Verify the ScalarEvolution result after running indvars. Has no &quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;             <span class="stringliteral">&quot;effect in release builds. (Note: this adds additional SCEV &quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;             <span class="stringliteral">&quot;queries potentially changing the analysis result)&quot;</span>));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;ReplaceExitVal&gt;</a> <a class="code" href="IndVarSimplify_8cpp.html#a388352a609baf8c6705e3952af613be4">ReplaceExitValue</a>(</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="stringliteral">&quot;replexitval&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a1e6c3ab87bc6c3b3ee4b5a64e3a99963">OnlyCheapRepl</a>),</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Choose the strategy to replace exit value in IndVarSimplify&quot;</span>),</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a4f92864a2edbc4ee6aa6d5abcb995fdd">NeverRepl</a>, <span class="stringliteral">&quot;never&quot;</span>, <span class="stringliteral">&quot;never replace exit value&quot;</span>),</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a1e6c3ab87bc6c3b3ee4b5a64e3a99963">OnlyCheapRepl</a>, <span class="stringliteral">&quot;cheap&quot;</span>,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                   <span class="stringliteral">&quot;only replace exit value when the cost is cheap&quot;</span>),</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a0cba5d71f8085f5b0bd4c61555d86bb6">UnusedIndVarInLoop</a>, <span class="stringliteral">&quot;unusedindvarinloop&quot;</span>,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="stringliteral">&quot;only replace exit value when it is an unused &quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="stringliteral">&quot;induction variable in the loop and has cheap replacement cost&quot;</span>),</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a83cddaf900262d84aed9055c0a1f0203">NoHardUse</a>, <span class="stringliteral">&quot;noharduse&quot;</span>,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                   <span class="stringliteral">&quot;only replace exit values when loop def likely dead&quot;</span>),</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986add1840394cd7a4e7d080482f42e7b424">AlwaysRepl</a>, <span class="stringliteral">&quot;always&quot;</span>,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                   <span class="stringliteral">&quot;always replace exit value whenever possible&quot;</span>)));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IndVarSimplify_8cpp.html#a5d7375fac952d8aedb775a85fefc4423">UsePostIncrementRanges</a>(</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="stringliteral">&quot;indvars-post-increment-ranges&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use post increment control-dependent ranges in IndVarSimplify&quot;</span>),</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<a class="code" href="IndVarSimplify_8cpp.html#a91a8c4eb312047d8d912b8606168c0b4">DisableLFTR</a>(<span class="stringliteral">&quot;disable-lftr&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable Linear Function Test Replace optimization&quot;</span>));</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<a class="code" href="IndVarSimplify_8cpp.html#a20588b28c5ac65a0380d35772d0dd466">LoopPredication</a>(<span class="stringliteral">&quot;indvars-predicate-loops&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Predicate conditions in read only loops&quot;</span>));</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<a class="code" href="IndVarSimplify_8cpp.html#a0bc7e85fe157545d63e3f4d0f41f5f10">AllowIVWidening</a>(<span class="stringliteral">&quot;indvars-widen-indvars&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow widening of indvars to eliminate s/zext&quot;</span>));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">class </span>IndVarSimplify {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">TTI</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  std::unique_ptr&lt;MemorySSAUpdater&gt; MSSAU;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakTrackingVH, 16&gt;</a> DeadInsts;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordtype">bool</span> WidenIndVars;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">bool</span> handleFloatingPointIV(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PH);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordtype">bool</span> rewriteNonIntegerIVs(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordtype">bool</span> simplifyAndExtend(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI);<span class="comment"></span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  /// Try to improve our exit conditions by converting condition from signed</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  /// to unsigned or rotating computation out of the loop.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  /// (See inline comment about why this is duplicated from simplifyAndExtend)</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> canonicalizeExitCondition(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);<span class="comment"></span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">  /// Try to eliminate loop exits based on analyzeable exit counts</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> optimizeLoopExits(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>);<span class="comment"></span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">  /// Try to form loop invariant tests for loop exits by changing how many</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">  /// iterations of the loop run when that is unobservable.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> predicateLoopExits(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordtype">bool</span> rewriteFirstIterationLoopExitValues(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">bool</span> linearFunctionTestReplace(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                 <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndVar, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">bool</span> sinkUnusedInvariants(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  IndVarSimplify(<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                 <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <span class="keywordtype">bool</span> WidenIndVars)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      : LI(LI), SE(SE), DT(DT), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>), TLI(TLI), <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>),</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        WidenIndVars(WidenIndVars) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (MSSA)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      MSSAU = std::make_unique&lt;MemorySSAUpdater&gt;(MSSA);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">run</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;};</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// rewriteNonIntegerIVs and helpers. Prefer integer IVs.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">/// Convert APF to an integer, if possible.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#af945460922a5750a0d075b6344608e27">  194</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#af945460922a5750a0d075b6344608e27">ConvertToSInt</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;APF, int64_t &amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordtype">bool</span> isExact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// See if we can convert this to an int64_t</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> UIntVal;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">if</span> (APF.<a class="code" href="classllvm_1_1APFloat.html#aae1f09de4bf1aab27149a7d328715e30">convertToInteger</a>(<a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef</a>(UIntVal), 64, <span class="keyword">true</span>,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                           <a class="code" href="structllvm_1_1APFloatBase.html#a482d9cf95b588eb05cefeaa5c05be9a3">APFloat::rmTowardZero</a>, &amp;isExact) != <a class="code" href="structllvm_1_1APFloatBase.html#aee544c332088dbef348a0c1c97e21a6aa8092c6b52c0412d8198a63bc995761e9">APFloat::opOK</a> ||</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      !isExact)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> = UIntVal;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/// If the loop has floating induction variable then insert corresponding</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/// integer induction variable if possible.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/// For example,</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// for(double i = 0; i &lt; 10000; ++i)</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">///   bar(i)</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// is converted into</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// for(int i = 0; i &lt; 10000; ++i)</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">///   bar((double)i);</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IndVarSimplify::handleFloatingPointIV(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordtype">unsigned</span> IncomingEdge = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(0));</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordtype">unsigned</span> BackEdge     = IncomingEdge^1;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// Check incoming value.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keyword">auto</span> *InitValueVal = dyn_cast&lt;ConstantFP&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(IncomingEdge));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  int64_t InitValue;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (!InitValueVal || !<a class="code" href="IndVarSimplify_8cpp.html#af945460922a5750a0d075b6344608e27">ConvertToSInt</a>(InitValueVal-&gt;getValueAPF(), InitValue))</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// Check IV increment. Reject this PN if increment operation is not</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// an add or increment value can not be represented by an integer.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keyword">auto</span> *Incr = dyn_cast&lt;BinaryOperator&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(BackEdge));</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (Incr == <span class="keyword">nullptr</span> || Incr-&gt;getOpcode() != Instruction::FAdd) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// If this is not an add of the PHI with a constantfp, or if the constant fp</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// is not an integer, bail out.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *IncValueVal = dyn_cast&lt;ConstantFP&gt;(Incr-&gt;getOperand(1));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  int64_t IncValue;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (IncValueVal == <span class="keyword">nullptr</span> || Incr-&gt;getOperand(0) != PN ||</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      !<a class="code" href="IndVarSimplify_8cpp.html#af945460922a5750a0d075b6344608e27">ConvertToSInt</a>(IncValueVal-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">getValueAPF</a>(), IncValue))</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Check Incr uses. One user is PN and the other user is an exit condition</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// used by the conditional terminator.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="classllvm_1_1Value.html#acd2fbee42afeb868be98aaae56528636">Value::user_iterator</a> IncrUse = Incr-&gt;user_begin();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *U1 = cast&lt;Instruction&gt;(*IncrUse++);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (IncrUse == Incr-&gt;user_end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *U2 = cast&lt;Instruction&gt;(*IncrUse++);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (IncrUse != Incr-&gt;user_end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// Find exit condition, which is an fcmp.  If it doesn&#39;t exist, or if it isn&#39;t</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// only used by a branch, we can&#39;t transform it.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a> = dyn_cast&lt;FCmpInst&gt;(U1);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a> = dyn_cast&lt;FCmpInst&gt;(U2);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a> || !<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;hasOneUse() ||</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      !isa&lt;BranchInst&gt;(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;user_back()))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *TheBr = cast&lt;BranchInst&gt;(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;user_back());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// We need to verify that the branch actually controls the iteration count</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// of the loop.  If not, the new IV can overflow and no one will notice.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// The branch block must be in the loop and one of the successors must be out</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// of the loop.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TheBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t use fcmp if not conditional&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(TheBr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()) ||</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(TheBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) &amp;&amp;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;       L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(TheBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1))))</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// If it isn&#39;t a comparison with an integer-as-fp (the exit value), we can&#39;t</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// transform it.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *ExitValueVal = dyn_cast&lt;ConstantFP&gt;(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  int64_t ExitValue;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">if</span> (ExitValueVal == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      !<a class="code" href="IndVarSimplify_8cpp.html#af945460922a5750a0d075b6344608e27">ConvertToSInt</a>(ExitValueVal-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">getValueAPF</a>(), ExitValue))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Find new predicate for integer comparison.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">CmpInst::BAD_ICMP_PREDICATE</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;getPredicate()) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Unknown comparison.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">CmpInst::FCMP_OEQ</a>:</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">CmpInst::FCMP_UEQ</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">CmpInst::FCMP_ONE</a>:</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">CmpInst::FCMP_UNE</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP_OGT</a>:</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">CmpInst::FCMP_UGT</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">CmpInst::FCMP_OGE</a>:</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">CmpInst::FCMP_UGE</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP_OLT</a>:</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">CmpInst::FCMP_ULT</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">CmpInst::FCMP_OLE</a>:</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">CmpInst::FCMP_ULE</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// We convert the floating point induction variable to a signed i32 value if</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// we can.  This is only safe if the comparison will not overflow in a way</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// that won&#39;t be trapped by the integer equivalent operations.  Check for this</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// now.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// TODO: We could use i64 if it is native and the range requires it.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// The start/stride/exit values must all fit in signed i32.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (!isInt&lt;32&gt;(InitValue) || !isInt&lt;32&gt;(IncValue) || !isInt&lt;32&gt;(ExitValue))</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// If not actually striding (add x, 0.0), avoid touching the code.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (IncValue == 0)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// Positive and negative strides have different safety conditions.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">if</span> (IncValue &gt; 0) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// If we have a positive stride, we require the init to be less than the</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// exit value.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (InitValue &gt;= ExitValue)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a> = <a class="code" href="classuint32__t.html">uint32_t</a>(ExitValue-InitValue);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// Check for infinite loop, either:</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// while (i &lt;= Exit) or until (i &gt; Exit)</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a> || NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">if</span> (++Range == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Range overflows.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordtype">unsigned</span> Leftover = <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a> % <a class="code" href="classuint32__t.html">uint32_t</a>(IncValue);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// If this is an equality comparison, we require that the strided value</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// exactly land on the exit value, otherwise the IV condition will wrap</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// around and do things the fp IV wouldn&#39;t.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> ((NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        Leftover != 0)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// If the stride would wrap around the i32 before exiting, we can&#39;t</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// transform the IV.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (Leftover != 0 &amp;&amp; int32_t(ExitValue+IncValue) &lt; ExitValue)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// If we have a negative stride, we require the init to be greater than the</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// exit value.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (InitValue &lt;= ExitValue)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a> = <a class="code" href="classuint32__t.html">uint32_t</a>(InitValue-ExitValue);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// Check for infinite loop, either:</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// while (i &gt;= Exit) or until (i &lt; Exit)</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a> || NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">if</span> (++Range == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Range overflows.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordtype">unsigned</span> Leftover = <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">Range</a> % <a class="code" href="classuint32__t.html">uint32_t</a>(-IncValue);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// If this is an equality comparison, we require that the strided value</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// exactly land on the exit value, otherwise the IV condition will wrap</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// around and do things the fp IV wouldn&#39;t.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> ((NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || NewPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        Leftover != 0)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// If the stride would wrap around the i32 before exiting, we can&#39;t</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// transform the IV.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (Leftover != 0 &amp;&amp; int32_t(ExitValue+IncValue) &gt; ExitValue)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a> = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(PN-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Insert new integer induction variable.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPHI = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, 2, PN-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()+<span class="stringliteral">&quot;.int&quot;</span>, PN);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  NewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, InitValue),</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(IncomingEdge));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd =</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(NewPHI, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, IncValue),</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                              Incr-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()+<span class="stringliteral">&quot;.int&quot;</span>, Incr);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  NewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewAdd, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(BackEdge));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *NewCompare = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(TheBr, NewPred, NewAdd,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, ExitValue),</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                      <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;getName());</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// In the following deletions, PN may become dead and may be deleted.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Use a WeakTrackingVH to observe whether this happens.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="classllvm_1_1WeakTrackingVH.html">WeakTrackingVH</a> WeakPH = PN;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// Delete the old floating point exit comparison.  The branch starts using the</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// new comparison.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  NewCompare-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;replaceAllUsesWith(NewCompare);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">RecursivelyDeleteTriviallyDeadInstructions</a>(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>, TLI, MSSAU.get());</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// Delete the old floating point increment.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  Incr-&gt;replaceAllUsesWith(<a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(Incr-&gt;getType()));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">RecursivelyDeleteTriviallyDeadInstructions</a>(Incr, TLI, MSSAU.get());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// If the FP induction variable still has uses, this is because something else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// in the loop uses its value.  In order to canonicalize the induction</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// variable, we chose to eliminate the IV and rewrite it in terms of an</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// int-&gt;fp cast.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// We give preference to sitofp over uitofp because it is faster on most</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// platforms.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (WeakPH) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Conv = <span class="keyword">new</span> <a class="code" href="classllvm_1_1SIToFPInst.html">SIToFPInst</a>(NewPHI, PN-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;indvar.conv&quot;</span>,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                 &amp;*PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Conv);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">RecursivelyDeleteTriviallyDeadInstructions</a>(PN, TLI, MSSAU.get());</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keywordtype">bool</span> IndVarSimplify::rewriteNonIntegerIVs(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// First step.  Check to see if there are any floating-point recurrences.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// If there are, change them into integer recurrences, permitting analysis by</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// the SCEV routines.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakTrackingVH, 8&gt;</a> PHIs;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN : Header-&gt;phis())</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    PHIs.push_back(&amp;PN);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PHIs.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast_or_null&lt;PHINode&gt;(&amp;*PHIs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      Changed |= handleFloatingPointIV(L, PN);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// If the loop previously had floating-point IV, ScalarEvolution</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// may not have been able to compute a trip count. Now that we&#39;ve done some</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="comment">// re-writing, the trip count may be computable.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (Changed)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    SE-&gt;forgetLoop(L);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">//===---------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">// rewriteFirstIterationLoopExitValues: Rewrite loop exit values if we know</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">// they will exit at the first iteration.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">//===---------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">/// Check to see if this loop has loop invariant conditions which lead to loop</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">/// exits. If so, we know that if the exit path is taken, it is at the first</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">/// loop iteration. This lets us predict exit values of PHI nodes that live in</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">/// loop header.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IndVarSimplify::rewriteFirstIterationLoopExitValues(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// Verify the input to the pass is already in LCSSA form.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">isLCSSAForm</a>(*DT));</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordtype">bool</span> MadeAnyChanges = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ExitBB : ExitBlocks) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// If there are no more PHI nodes in this exit block, then no more</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// values defined inside the loop are used on this path.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN : ExitBB-&gt;phis()) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> IncomingValIdx = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = PN.<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;           IncomingValIdx != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++IncomingValIdx) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keyword">auto</span> *IncomingBB = PN.<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(IncomingValIdx);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// Can we prove that the exit must run on the first iteration if it</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// runs at all?  (i.e. early exits are fine for our purposes, but</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// traces which lead to this exit being taken on the 2nd iteration</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// aren&#39;t.)  Note that this is about whether the exit branch is</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// executed, not about whether it is taken.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>() ||</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            !DT-&gt;dominates(IncomingBB, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">// Get condition that leads to the exit path.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keyword">auto</span> *TermInst = IncomingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(TermInst)) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <span class="comment">// Must be a conditional branch, otherwise the block</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <span class="comment">// should not be in the loop.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI-&gt;getCondition();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SwitchInst&gt;(TermInst))</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keyword">auto</span> *ExitVal = dyn_cast&lt;PHINode&gt;(PN.<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(IncomingValIdx));</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">// Only deal with PHIs in the loop header.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (!ExitVal || ExitVal-&gt;getParent() != L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="comment">// If ExitVal is a PHI on the loop header, then we know its</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="comment">// value along this exit because the exit can only be taken</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">// on the first iteration.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keyword">auto</span> *LoopPreheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoopPreheader &amp;&amp; <span class="stringliteral">&quot;Invalid loop&quot;</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordtype">int</span> PreheaderIdx = ExitVal-&gt;getBasicBlockIndex(LoopPreheader);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> (PreheaderIdx != -1) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitVal-&gt;getParent() == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>() &amp;&amp;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                 <span class="stringliteral">&quot;ExitVal must be in loop header&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          MadeAnyChanges = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          PN.<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(IncomingValIdx,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                              ExitVal-&gt;getIncomingValue(PreheaderIdx));</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          SE-&gt;forgetValue(&amp;PN);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">return</span> MadeAnyChanges;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">//  IV Widening - Extend the width of an IV to cover its widest uses.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/// Update information about the induction variable that is extended by this</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">/// sign or zero extend operation. This is used to determine the final width of</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">/// the IV before actually widening it.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a57aff0646c7151c4158d839c386332cc">  514</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IndVarSimplify_8cpp.html#a57aff0646c7151c4158d839c386332cc">visitIVCast</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast, <a class="code" href="structllvm_1_1WideIVInfo.html">WideIVInfo</a> &amp;WI,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                        <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordtype">bool</span> IsSigned = Cast-&gt;<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>() == Instruction::SExt;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (!IsSigned &amp;&amp; Cast-&gt;<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>() != Instruction::ZExt)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Cast-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(Ty);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">if</span> (!Cast-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a4865a13a415f04576388b969d04d1541">isLegalInteger</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>))</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// Check that `Cast` actually extends the induction variable (we rely on this</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// later).  This takes care of cases where `Cast` is extending a truncation of</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// the narrow induction variable, and thus can end up being narrower than the</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// &quot;narrow&quot; induction variable.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NarrowIVWidth = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a882fc540d5e5234ddf6a9f880e3f5a9b">NarrowIV</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (NarrowIVWidth &gt;= <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Cast is either an sext or zext up to this point.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// We should not widen an indvar if arithmetics on the wider indvar are more</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// expensive than those on the narrower indvar. We check only the cost of ADD</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// because at least an ADD is required to increment the induction variable. We</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// could compute more comprehensively the cost of all instructions on the</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// induction variable when necessary.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> &amp;&amp;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>, Ty) &gt;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">getArithmeticInstrCost</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                      Cast-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">if</span> (!WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a2bd973d7992b3f205e8d270d1a4183cd">WidestNativeType</a> ||</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> &gt; SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a2bd973d7992b3f205e8d270d1a4183cd">WidestNativeType</a>)) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a2bd973d7992b3f205e8d270d1a4183cd">WidestNativeType</a> = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6dcfa69ce27cf214caaf50f21bfe1f2f">getEffectiveSCEVType</a>(Ty);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a45b4503c5e229503d60cc68c034286ab">IsSigned</a> = IsSigned;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// We extend the IV to satisfy the sign of its user(s), or &#39;signed&#39;</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// if there are multiple users with both sign- and zero extensions,</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">// in order not to introduce nondeterministic behaviour based on the</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// unspecified order of a PHI nodes&#39; users-iterator.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a45b4503c5e229503d60cc68c034286ab">IsSigned</a> |= IsSigned;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">//  Live IV Reduction - Minimize IVs live across the loop.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">//  Simplification of IV users based on SCEV evaluation.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="keyword">class </span>IndVarSimplifyVisitor : <span class="keyword">public</span> <a class="code" href="classllvm_1_1IVVisitor.html">IVVisitor</a> {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">TTI</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IVPhi;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <a class="code" href="structllvm_1_1WideIVInfo.html">WideIVInfo</a> WI;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  IndVarSimplifyVisitor(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *<a class="code" href="classllvm_1_1SCEV.html">SCEV</a>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DTree)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    : SE(<a class="code" href="classllvm_1_1SCEV.html">SCEV</a>), <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>), IVPhi(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    DT = DTree;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    WI.<a class="code" href="structllvm_1_1WideIVInfo.html#a882fc540d5e5234ddf6a9f880e3f5a9b">NarrowIV</a> = IVPhi;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// Implement the interface used by simplifyUsersOfIV.</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">void</span> visitCast(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast)<span class="keyword"> override </span>{ <a class="code" href="IndVarSimplify_8cpp.html#a57aff0646c7151c4158d839c386332cc">visitIVCast</a>(Cast, WI, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>); }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;};</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/// Iteratively perform simplification on a worklist of IV users. Each</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">/// successive simplification may push more users which may themselves be</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/// candidates for simplification.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">/// Sign/Zero extend elimination is interleaved with IV simplification.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IndVarSimplify::simplifyAndExtend(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                       <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                       <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WideIVInfo, 8&gt;</a> WideIVs;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keyword">auto</span> *GuardDecl = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>()[0]-&gt;getModule()-&gt;getFunction(</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          <a class="code" href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">Intrinsic::getName</a>(Intrinsic::experimental_guard));</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordtype">bool</span> HasGuards = GuardDecl &amp;&amp; !GuardDecl-&gt;use_empty();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 8&gt;</a> LoopPhis;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>())</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    LoopPhis.push_back(&amp;PN);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Each round of simplification iterates through the SimplifyIVUsers worklist</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// for all current phis, then determines whether any IVs can be</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// widened. Widening adds new phis to LoopPhis, inducing another round of</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// simplification on the wide IVs.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">while</span> (!LoopPhis.empty()) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// Evaluate as many IV expressions as possible before widening any IVs. This</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// forces SCEV to set no-wrap flags before evaluating sign/zero</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// extension. The first time SCEV attempts to normalize sign/zero extension,</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// the result becomes final. So for the most predictable results, we delay</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// evaluation of sign/zero extend evaluation until needed, and avoid running</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// other SCEV based analysis prior to simplifyAndExtend.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CurrIV = LoopPhis.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="comment">// Information about sign/zero extensions of CurrIV.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      IndVarSimplifyVisitor Visitor(CurrIV, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      Changed |= <a class="code" href="namespacellvm.html#a85635b30e25b4f5742866a8b074e3684">simplifyUsersOfIV</a>(CurrIV, SE, DT, LI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DeadInsts, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>,</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                   &amp;Visitor);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">if</span> (Visitor.WI.WidestNativeType) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        WideIVs.push_back(Visitor.WI);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    } <span class="keywordflow">while</span>(!LoopPhis.empty());</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// Continue if we disallowed widening.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (!WidenIndVars)</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">for</span> (; !WideIVs.empty(); WideIVs.pop_back()) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordtype">unsigned</span> ElimExt;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordtype">unsigned</span> Widened;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *WidePhi = <a class="code" href="namespacellvm.html#a35edc71a3e9b62bcfa5b80ae369515d9">createWideIV</a>(WideIVs.back(), LI, SE, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>,</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                          DT, DeadInsts, ElimExt, Widened,</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                          HasGuards, <a class="code" href="IndVarSimplify_8cpp.html#a5d7375fac952d8aedb775a85fefc4423">UsePostIncrementRanges</a>)) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        NumElimExt += ElimExt;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        NumWidened += Widened;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        LoopPhis.push_back(WidePhi);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">//  linearFunctionTestReplace and its kin. Rewrite the loop exit condition.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">/// Given an Value which is hoped to be part of an add recurance in the given</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">/// loop, return the associated Phi node if so.  Otherwise, return null.  Note</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">/// that this is less general than SCEVs AddRec checking.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#af2c2870cb357b9652eb5029e22e87880">  664</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="IndVarSimplify_8cpp.html#af2c2870cb357b9652eb5029e22e87880">getLoopPhiForCounter</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *IncV, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncI = dyn_cast&lt;Instruction&gt;(IncV);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">if</span> (!IncI)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">switch</span> (IncI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>()) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// An IV counter must preserve its type.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (IncI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == 2)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = dyn_cast&lt;PHINode&gt;(IncI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">if</span> (Phi &amp;&amp; Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(IncI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)))</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (IncI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Instruction::GetElementPtr)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// Allow add/sub to be commuted.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  Phi = dyn_cast&lt;PHINode&gt;(IncI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span> (Phi &amp;&amp; Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(IncI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">/// Whether the current loop exit test is based on this value.  Currently this</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">/// is limited to a direct use in the loop condition.</span></div>
<div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a23d78b7d4dbea0ecc84dc55313ad1f25">  702</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a23d78b7d4dbea0ecc84dc55313ad1f25">isLoopExitTestBasedOn</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp = dyn_cast&lt;ICmpInst&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// TODO: Allow non-icmp loop test.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">if</span> (!ICmp)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// TODO: Allow indirect use.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">return</span> ICmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == V || ICmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == V;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;}</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">/// linearFunctionTestReplace policy. Return true unless we can show that the</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">/// current exit test is already sufficiently canonical.</span></div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a6a2f2b3d9153487f51dae119c07f8461">  715</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a6a2f2b3d9153487f51dae119c07f8461">needsLFTR</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>() &amp;&amp; <span class="stringliteral">&quot;Must be in simplified form&quot;</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// Avoid converting a constant or loop invariant test back to a runtime</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// test.  This is critical for when SCEV&#39;s cached ExitCount is less precise</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// than the current IR (such as after we&#39;ve proven a particular exit is</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// actually dead and thus the BE count never reaches our ExitCount.)</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()))</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// Do LFTR to simplify the exit condition to an ICMP.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = dyn_cast&lt;ICmpInst&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// Do LFTR to simplify the exit ICMP to EQ/NE</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getPredicate();</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordflow">if</span> (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// Look for a loop invariant RHS</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// Look for a simple IV counter LHS</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = dyn_cast&lt;PHINode&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">if</span> (!Phi)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    Phi = <a class="code" href="IndVarSimplify_8cpp.html#af2c2870cb357b9652eb5029e22e87880">getLoopPhiForCounter</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, L);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">if</span> (!Phi)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// Do LFTR if PHI node is defined in the loop, but is *not* a counter.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordtype">int</span> Idx = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">getBasicBlockIndex</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">if</span> (Idx &lt; 0)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// Do LFTR if the exit condition&#39;s IV is *not* a simple counter.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IncV = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(Idx);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordflow">return</span> Phi != <a class="code" href="IndVarSimplify_8cpp.html#af2c2870cb357b9652eb5029e22e87880">getLoopPhiForCounter</a>(IncV, L);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/// Return true if undefined behavior would provable be executed on the path to</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// OnPathTo if Root produced a posion result.  Note that this doesn&#39;t say</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/// anything about whether OnPathTo is actually executed or whether Root is</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">/// actually poison.  This can be used to assess whether a new use of Root can</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">/// be added at a location which is control equivalent with OnPathTo (such as</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/// immediately before it) without introducing UB which didn&#39;t previously</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/// exist.  Note that a false result conveys no information.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a2cb5e1d50dfe26e03b62eb20263a79dd">  769</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a2cb5e1d50dfe26e03b62eb20263a79dd">mustExecuteUBIfPoisonOnPathTo</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Root,</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                                          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OnPathTo,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                                          <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">// Basic approach is to assume Root is poison, propagate poison forward</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// through all users we can easily track, and then check whether any of those</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// users are provable UB and must execute before out exiting block might</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// exit.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// The set of all recursive users we&#39;ve visited (which are assumed to all be</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// poison because of said visit)</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;const Value *, 16&gt;</a> KnownPoison;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Instruction*, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  Worklist.push_back(Root);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// If we know this must trigger UB on a path leading our target.</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a9b587899173512a007250b3f5307441d">mustTriggerUB</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, KnownPoison) &amp;&amp; DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OnPathTo))</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="comment">// If we can&#39;t analyze propagation through this instruction, just skip it</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// and transitive users.  Safe as false is a conservative result.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Root &amp;&amp; !<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands(), [&amp;KnownPoison](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          return KnownPoison.contains(U) &amp;&amp; propagatesPoison(U);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        }))</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (KnownPoison.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).second)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *<a class="code" href="classllvm_1_1User.html">User</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users())</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        Worklist.push_back(cast&lt;Instruction&gt;(<a class="code" href="classllvm_1_1User.html">User</a>));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// Might be non-UB, or might have a path we couldn&#39;t prove must execute on</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">// way to exiting bb.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">/// Recursive helper for hasConcreteDef(). Unfortunately, this currently boils</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/// down to checking that all operands are constant and listing instructions</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/// that may hide undef.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a9504a92a00083831f812fb8317b1d9a0">  809</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a9504a92a00083831f812fb8317b1d9a0">hasConcreteDefImpl</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Value*&gt;</a> &amp;Visited,</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                               <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">return</span> !isa&lt;UndefValue&gt;(V);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt;= 6)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// Conservatively handle non-constant non-instructions. For example, Arguments</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// may be undef.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// Load and return values may be undef.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadFromMemory() || isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;InvokeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// Optimistically handle other instructions.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands()) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>).second)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a9504a92a00083831f812fb8317b1d9a0">hasConcreteDefImpl</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, Visited, <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>+1))</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">/// Return true if the given value is concrete. We must prove that undef can</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">/// never reach it.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">/// TODO: If we decide that this is a good approach to checking for undef, we</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">/// may factor it into a common location.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a9cc6c5ed9edaa15e526e2a5ad24d1413">  842</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a9cc6c5ed9edaa15e526e2a5ad24d1413">hasConcreteDef</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value*, 8&gt;</a> Visited;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(V);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="IndVarSimplify_8cpp.html#a9504a92a00083831f812fb8317b1d9a0">hasConcreteDefImpl</a>(V, Visited, 0);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">/// Return true if this IV has any uses other than the (soon to be rewritten)</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">/// loop exit test.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a861b0a771b2125e6e9affb1b6f7a2003">  850</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a861b0a771b2125e6e9affb1b6f7a2003">AlmostDeadIV</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LatchBlock, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordtype">int</span> LatchIdx = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">getBasicBlockIndex</a>(LatchBlock);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IncV = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(LatchIdx);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : Phi-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (U != <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp; U != IncV) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : IncV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (U != <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp; U != Phi) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">/// Return true if the given phi is a &quot;counter&quot; in L.  A counter is an</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">/// add recurance (of integer or pointer type) with an arbitrary start, and a</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">/// step of 1.  Note that L must have exactly one latch.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a7803cd22b4405090d0cb0b87d697a612">  865</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a7803cd22b4405090d0cb0b87d697a612">isLoopCounter</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>* Phi, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                          <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>());</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">if</span> (!SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6d8769a72303e2b06ef63129cb231855">isSCEVable</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *AR = dyn_cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(Phi));</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (!AR || AR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#af6314c51a3cc5a619beb697246177bf0">getLoop</a>() != L || !AR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a54bb7394d874cbbef1d81e6bea89d4f3">isAffine</a>())</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step = dyn_cast&lt;SCEVConstant&gt;(AR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7eec28400b00678b1fb2b5f55ef7ac1b">getStepRecurrence</a>(*SE));</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (!Step || !Step-&gt;<a class="code" href="classllvm_1_1SCEV.html#a1ecb726f4e7b445057b795ed500546a0">isOne</a>())</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordtype">int</span> LatchIdx = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">getBasicBlockIndex</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IncV = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(LatchIdx);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="IndVarSimplify_8cpp.html#af2c2870cb357b9652eb5029e22e87880">getLoopPhiForCounter</a>(IncV, L) == Phi &amp;&amp;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;          isa&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(IncV)));</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">/// Search the loop header for a loop counter (anadd rec w/step of one)</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">/// suitable for use by LFTR.  If multiple counters are available, select the</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">/// &quot;best&quot; one based profitable heuristics.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">/// BECount may be an i8* pointer type. The pointer difference is already</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">/// valid count without scaling the address stride, so it remains a pointer</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">/// expression as far as SCEV is concerned.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#ad5bfea0668b91ebb610d2db7ddb3044d">  894</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="IndVarSimplify_8cpp.html#ad5bfea0668b91ebb610d2db7ddb3044d">FindLoopCounter</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BECount,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                                <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> BCWidth = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(BECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())-&gt;getCondition();</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// Loop over all of the PHI nodes, looking for a simple counter.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *BestPhi = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BestInit = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LatchBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LatchBlock &amp;&amp; <span class="stringliteral">&quot;Must be in simplified form&quot;</span>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a7803cd22b4405090d0cb0b87d697a612">isLoopCounter</a>(Phi, L, SE))</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// Avoid comparing an integer IV against a pointer Limit.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> (BECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; !Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>())</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *AR = cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(Phi));</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// AR may be a pointer type, while BECount is an integer type.</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// AR may be wider than BECount. With eq/ne tests overflow is immaterial.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// AR may not be a narrower type, or we may never exit.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> PhiWidth = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(AR-&gt;getType());</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (PhiWidth &lt; BCWidth || !<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(PhiWidth))</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="comment">// Avoid reusing a potentially undef value to compute other values that may</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// have originally had a concrete definition.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a9cc6c5ed9edaa15e526e2a5ad24d1413">hasConcreteDef</a>(Phi)) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="comment">// We explicitly allow unknown phis as long as they are already used by</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="comment">// the loop exit test.  This is legal since performing LFTR could not</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="comment">// increase the number of undef users.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IncPhi = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(LatchBlock);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a23d78b7d4dbea0ecc84dc55313ad1f25">isLoopExitTestBasedOn</a>(Phi, ExitingBB) &amp;&amp;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;          !<a class="code" href="IndVarSimplify_8cpp.html#a23d78b7d4dbea0ecc84dc55313ad1f25">isLoopExitTestBasedOn</a>(IncPhi, ExitingBB))</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">// Avoid introducing undefined behavior due to poison which didn&#39;t exist in</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="comment">// the original program.  (Annoyingly, the rules for poison and undef</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">// propagation are distinct, so this does NOT cover the undef case above.)</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// We have to ensure that we don&#39;t introduce UB by introducing a use on an</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// iteration where said IV produces poison.  Our strategy here differs for</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="comment">// pointers and integer IVs.  For integers, we strip and reinfer as needed,</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">// see code in linearFunctionTestReplace.  For pointers, we restrict</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="comment">// transforms as there is no good way to reinfer inbounds once lost.</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">if</span> (!Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        !<a class="code" href="IndVarSimplify_8cpp.html#a2cb5e1d50dfe26e03b62eb20263a79dd">mustExecuteUBIfPoisonOnPathTo</a>(Phi, ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), DT))</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="classllvm_1_1Init.html">Init</a> = AR-&gt;getStart();</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (BestPhi &amp;&amp; !<a class="code" href="IndVarSimplify_8cpp.html#a861b0a771b2125e6e9affb1b6f7a2003">AlmostDeadIV</a>(BestPhi, LatchBlock, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="comment">// Don&#39;t force a live loop counter if another IV can be used.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IndVarSimplify_8cpp.html#a861b0a771b2125e6e9affb1b6f7a2003">AlmostDeadIV</a>(Phi, LatchBlock, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="comment">// Prefer to count-from-zero. This is a more &quot;canonical&quot; counter form. It</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="comment">// also prefers integer to pointer IVs.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">if</span> (BestInit-&gt;<a class="code" href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">isZero</a>() != <a class="code" href="classllvm_1_1Init.html">Init</a>-&gt;isZero()) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">if</span> (BestInit-&gt;<a class="code" href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">isZero</a>())</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="comment">// If two IVs both count from zero or both count from nonzero then the</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="comment">// narrower is likely a dead phi that has been widened. Use the wider phi</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="comment">// to allow the other to be eliminated.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PhiWidth &lt;= SE-&gt;getTypeSizeInBits(BestPhi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    BestPhi = Phi;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    BestInit = <a class="code" href="classllvm_1_1Init.html">Init</a>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">return</span> BestPhi;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/// Insert an IR expression which computes the value held by the IV IndVar</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">/// (which must be an loop counter w/unit stride) after the backedge of loop L</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/// is taken ExitCount times.</span></div>
<div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#aaf52063adc552ee4f28b6576d3ba67b8">  978</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="IndVarSimplify_8cpp.html#aaf52063adc552ee4f28b6576d3ba67b8">genLoopLimit</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndVar, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount, <span class="keywordtype">bool</span> UsePostInc, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                           <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IndVarSimplify_8cpp.html#a7803cd22b4405090d0cb0b87d697a612">isLoopCounter</a>(IndVar, L, SE));</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *AR = cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(IndVar));</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IVInit = AR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a1d3a0e869e478018c481a577ed9d25ee">getStart</a>();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7eec28400b00678b1fb2b5f55ef7ac1b">getStepRecurrence</a>(*SE)-&gt;<a class="code" href="classllvm_1_1SCEV.html#a1ecb726f4e7b445057b795ed500546a0">isOne</a>() &amp;&amp; <span class="stringliteral">&quot;only handles unit stride&quot;</span>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">// IVInit may be a pointer while ExitCount is an integer when FindLoopCounter</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// finds a valid pointer IV. Sign extend ExitCount in order to materialize a</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// GEP. Avoid running SCEVExpander on a new pointer value, instead reusing</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// the existing GEPs whenever possible.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordflow">if</span> (IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      !ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="comment">// IVOffset will be the new GEP offset that is interpreted by GEP as a</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="comment">// signed value. ExitCount on the other hand represents the loop trip count,</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="comment">// which is an unsigned value. FindLoopCounter only allows induction</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">// variables that have a positive unit stride of one. This means we don&#39;t</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="comment">// have to handle the case of negative offsets (yet) and just need to zero</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">// extend ExitCount.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OfsTy = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6dcfa69ce27cf214caaf50f21bfe1f2f">getEffectiveSCEVType</a>(IVInit-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IVOffset = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#adc040502444e4504cdbc04c87e4e3055">getTruncateOrZeroExtend</a>(ExitCount, OfsTy);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (UsePostInc)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      IVOffset = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(IVOffset, SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">getOne</a>(OfsTy));</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="comment">// Expand the code for the iteration count.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(IVOffset, L) &amp;&amp;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;           <span class="stringliteral">&quot;Computed iteration count is not loop invariant!&quot;</span>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IVLimit = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(IVInit, IVOffset);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.expandCodeFor(IVLimit, IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), BI);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="comment">// In any other case, convert both IVInit and ExitCount to integers before</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="comment">// comparing. This may result in SCEV expansion of pointers, but in practice</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="comment">// SCEV will fold the pointer arithmetic away as such:</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// BECount = (IVEnd - IVInit - 1) =&gt; IVLimit = IVInit (postinc).</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">// Valid Cases: (1) both integers is most common; (2) both may be pointers</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// for simple memset-style loops.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// IVInit integer and ExitCount pointer would only occur if a canonical IV</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="comment">// were generated on top of case #2, which is not expected.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// For unit stride, IVCount = Start + ExitCount with 2&#39;s complement</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">// overflow.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="comment">// For integer IVs, truncate the IV before computing IVInit + BECount,</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="comment">// unless we know apriori that the limit must be a constant when evaluated</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// in the bitwidth of the IV.  We prefer (potentially) keeping a truncate</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">// of the IV in the loop over a (potentially) expensive expansion of the</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// widened exit count add(zext(add)) expression.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(IVInit-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>())</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        &gt; SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>())) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <span class="keywordflow">if</span> (isa&lt;SCEVConstant&gt;(IVInit) &amp;&amp; isa&lt;SCEVConstant&gt;(ExitCount))</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        ExitCount = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6d745b25efdc69435508f1e936919f8b">getZeroExtendExpr</a>(ExitCount, IVInit-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        IVInit = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a83c084b0947edf4ae748f9a73babf7b8">getTruncateExpr</a>(IVInit, ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IVLimit = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(IVInit, ExitCount);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (UsePostInc)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      IVLimit = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(IVLimit, SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">getOne</a>(IVLimit-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()));</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// Expand the code for the iteration count.</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">isLoopInvariant</a>(IVLimit, L) &amp;&amp;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;           <span class="stringliteral">&quot;Computed iteration count is not loop invariant!&quot;</span>);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">// Ensure that we generate the same type as IndVar, or a smaller integer</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// type. In the presence of null pointer values, we have an integer type</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="comment">// SCEV expression (IVInit) for a pointer type IV value (IndVar).</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *LimitTy = ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() ?</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() : ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.expandCodeFor(IVLimit, LimitTy, BI);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;}</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">/// This method rewrites the exit condition of the loop to be a canonical !=</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">/// comparison against the incremented loop induction variable.  This pass is</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">/// able to rewrite the exit tests of any loop where the SCEV analysis can</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">/// determine a loop-invariant trip count of the loop, which is actually a much</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">/// broader range than just linear tests.</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IndVarSimplify::</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;linearFunctionTestReplace(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount,</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                          <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndVar, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>) {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>() &amp;&amp; <span class="stringliteral">&quot;Loop no longer in simplified form?&quot;</span>);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IndVarSimplify_8cpp.html#a7803cd22b4405090d0cb0b87d697a612">isLoopCounter</a>(IndVar, L, SE));</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> * <span class="keyword">const</span> IncVar =</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    cast&lt;Instruction&gt;(IndVar-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()));</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">// Initialize CmpIndVar to the preincremented IV.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpIndVar = IndVar;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordtype">bool</span> UsePostInc = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// If the exiting block is the same as the backedge block, we prefer to</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// compare against the post-incremented value, otherwise we must compare</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// against the preincremented value.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">if</span> (ExitingBB == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="comment">// For pointer IVs, we chose to not strip inbounds which requires us not</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// to add a potentially UB introducing use.  We need to either a) show</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// the loop test we&#39;re modifying is already in post-inc form, or b) show</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// that adding a use must not introduce UB.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordtype">bool</span> SafeToPostInc =</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <a class="code" href="IndVarSimplify_8cpp.html#a23d78b7d4dbea0ecc84dc55313ad1f25">isLoopExitTestBasedOn</a>(IncVar, ExitingBB) ||</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <a class="code" href="IndVarSimplify_8cpp.html#a2cb5e1d50dfe26e03b62eb20263a79dd">mustExecuteUBIfPoisonOnPathTo</a>(IncVar, ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), DT);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">if</span> (SafeToPostInc) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      UsePostInc = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      CmpIndVar = IncVar;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// It may be necessary to drop nowrap flags on the incrementing instruction</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// if either LFTR moves from a pre-inc check to a post-inc check (in which</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">// case the increment might have previously been poison on the last iteration</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// only) or if LFTR switches to a different IV that was previously dynamically</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// dead (and as such may be arbitrarily poison). We remove any nowrap flags</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// that SCEV didn&#39;t infer for the post-inc addrec (even if we use a pre-inc</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// check), because the pre-inc addrec flags may be adopted from the original</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// instruction, while SCEV has to explicitly prove the post-inc nowrap flags.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// TODO: This handling is inaccurate for one case: If we switch to a</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// dynamically dead IV that wraps on the first loop iteration only, which is</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="comment">// not covered by the post-inc addrec. (If the new IV was not dynamically</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// dead, it could not be poison on the first iteration in the first place.)</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(IncVar)) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *AR = cast&lt;SCEVAddRecExpr&gt;(SE-&gt;getSCEV(IncVar));</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (BO-&gt;hasNoUnsignedWrap())</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      BO-&gt;setHasNoUnsignedWrap(AR-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a09cc70290a71475141063b6dff42a5d2">hasNoUnsignedWrap</a>());</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">if</span> (BO-&gt;hasNoSignedWrap())</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      BO-&gt;setHasNoSignedWrap(AR-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a71deee7ef49ab5407b7e1aa758b6ec0a">hasNoSignedWrap</a>());</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ExitCnt = <a class="code" href="IndVarSimplify_8cpp.html#aaf52063adc552ee4f28b6576d3ba67b8">genLoopLimit</a>(</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      IndVar, ExitingBB, ExitCount, UsePostInc, L, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, SE);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitCnt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() ==</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;             IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         <span class="stringliteral">&quot;genLoopLimit missed a cast&quot;</span>);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// Insert a new icmp_ne or icmp_eq instruction before the branch.</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)))</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(BI);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="comment">// The new loop exit condition should reuse the debug location of the</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// original loop exit condition.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = dyn_cast&lt;Instruction&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()))</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getDebugLoc());</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// For integer IVs, if we evaluated the limit in the narrower bitwidth to</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">// avoid the expensive expansion of the limit expression in the wider type,</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// emit a truncate to narrow the IV to the ExitCount type.  This is safe</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// since we know (from the exit count bitwidth), that we can&#39;t self-wrap in</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// the narrower type.</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordtype">unsigned</span> CmpIndVarSize = SE-&gt;getTypeSizeInBits(CmpIndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordtype">unsigned</span> ExitCntSize = SE-&gt;getTypeSizeInBits(ExitCnt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">if</span> (CmpIndVarSize &gt; ExitCntSize) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!CmpIndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;           !ExitCnt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>());</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// Before resorting to actually inserting the truncate, use the same</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="comment">// reasoning as from SimplifyIndvar::eliminateTrunc to see if we can extend</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">// the other side of the comparison instead.  We still evaluate the limit</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">// in the narrower bitwidth, we just prefer a zext/sext outside the loop to</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="comment">// a truncate within in.</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefaf23578fcd2a868168854ab714e7de537">Extended</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = SE-&gt;getSCEV(CmpIndVar);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *TruncatedIV = SE-&gt;getTruncateExpr(SE-&gt;getSCEV(CmpIndVar),</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                                                  ExitCnt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ZExtTrunc =</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      SE-&gt;getZeroExtendExpr(TruncatedIV, CmpIndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (ZExtTrunc == <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefaf23578fcd2a868168854ab714e7de537">Extended</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      ExitCnt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(ExitCnt, IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                   <span class="stringliteral">&quot;wide.trip.count&quot;</span>);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SExtTrunc =</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        SE-&gt;getSignExtendExpr(TruncatedIV, CmpIndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">if</span> (SExtTrunc == <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefaf23578fcd2a868168854ab714e7de537">Extended</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        ExitCnt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(ExitCnt, IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                     <span class="stringliteral">&quot;wide.trip.count&quot;</span>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span> (Extended) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="keywordtype">bool</span> Discard;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Loop.html#ae58027d845fb948a63a8ff44851699d5">makeLoopInvariant</a>(ExitCnt, Discard);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      CmpIndVar = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(CmpIndVar, ExitCnt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                                      <span class="stringliteral">&quot;lftr.wideiv&quot;</span>);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;INDVARS: Rewriting loop exit condition to:\n&quot;</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;      LHS:&quot;</span> &lt;&lt; *CmpIndVar &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;       op:\t&quot;</span> &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> ? <span class="stringliteral">&quot;!=&quot;</span> : <span class="stringliteral">&quot;==&quot;</span>)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;      RHS:\t&quot;</span> &lt;&lt; *ExitCnt &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;ExitCount:\t&quot;</span> &lt;&lt; *ExitCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;  was: &quot;</span> &lt;&lt; *BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, CmpIndVar, ExitCnt, <span class="stringliteral">&quot;exitcond&quot;</span>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigCond = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// It&#39;s tempting to use replaceAllUsesWith here to fully replace the old</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">// comparison, but that&#39;s not immediately safe, since users of the old</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// comparison may not be dominated by the new comparison. Instead, just</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// update the branch to use the new comparison; in the common case this</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// will make old comparison dead.</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  DeadInsts.emplace_back(OrigCond);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  ++NumLFTR;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;}</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">//  sinkUnusedInvariants. A late subpass to cleanup loop preheaders.</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">/// If there&#39;s a single exit block, sink any loop-invariant values that</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">/// were defined in the preheader but not used inside the loop into the</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">/// exit block to reduce register pressure in the loop.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IndVarSimplify::sinkUnusedInvariants(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (!ExitBlock) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="keywordflow">if</span> (!Preheader) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordtype">bool</span> MadeAnyChanges = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> InsertPt = ExitBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>();</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// New instructions were inserted at the end of the preheader.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// Don&#39;t move instructions which might have side effects, since the side</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">// effects need to complete before instructions inside the loop.  Also don&#39;t</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// move instructions which might read memory, since the loop may modify</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// memory. Note that it&#39;s okay if the instruction might have undefined</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="comment">// behavior: LoopSimplify guarantees that the preheader dominates the exit</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="comment">// block.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayHaveSideEffects() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadFromMemory())</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="comment">// Skip debug info intrinsics.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// Skip eh pad instructions.</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isEHPad())</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">// Don&#39;t sink alloca: we never want to sink static alloca&#39;s out of the</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">// entry block, and correctly sinking dynamic alloca&#39;s requires</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">// checks for stacksave/stackrestore intrinsics.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// FIXME: Refactor this check somehow?</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// Determine if there is a use in or before the loop (direct or</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// otherwise).</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordtype">bool</span> UsedInLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;uses()) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UseBB = <a class="code" href="classllvm_1_1User.html">User</a>-&gt;getParent();</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = dyn_cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1User.html">User</a>)) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> =</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          <a class="code" href="classllvm_1_1PHINode.html#aca414c43a6d42c13998208463637a20d">PHINode::getIncomingValueNumForOperand</a>(U.getOperandNo());</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        UseBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">if</span> (UseBB == Preheader || L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UseBB)) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        UsedInLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="comment">// If there is, the def must remain in the preheader.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">if</span> (UsedInLoop)</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// Otherwise, sink it to the exit block.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ToMove = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordtype">bool</span> Done = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="comment">// Skip debug info intrinsics.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      } <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugOrPseudoInst() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugOrPseudoInst() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        Done = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      Done = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    MadeAnyChanges = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    ToMove-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(*ExitBlock, InsertPt);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    SE-&gt;forgetValue(ToMove);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (Done) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    InsertPt = ToMove-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>();</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordflow">return</span> MadeAnyChanges;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a16b4faf9802df251058f89443ca35a6c"> 1293</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IndVarSimplify_8cpp.html#a16b4faf9802df251058f89443ca35a6c">replaceExitCond</a>(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCond,</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakTrackingVH&gt;</a> &amp;DeadInsts) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keyword">auto</span> *OldCond = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing condition of loop-exiting branch &quot;</span> &lt;&lt; *BI</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; *NewCond &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(NewCond);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">if</span> (OldCond-&gt;use_empty())</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    DeadInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(OldCond);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a1ef810603d544fc15be655679af3d159"> 1303</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="IndVarSimplify_8cpp.html#a1ef810603d544fc15be655679af3d159">createFoldedExitCond</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                                      <span class="keywordtype">bool</span> IsTaken) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordtype">bool</span> ExitIfTrue = !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(*<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(ExitingBB));</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keyword">auto</span> *OldCond = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(OldCond-&gt;getType(),</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                          IsTaken ? ExitIfTrue : !ExitIfTrue);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;}</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#aa42477bdea230fb3cc4ea230c1125941"> 1312</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IndVarSimplify_8cpp.html#aa42477bdea230fb3cc4ea230c1125941">foldExit</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB, <span class="keywordtype">bool</span> IsTaken,</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakTrackingVH&gt;</a> &amp;DeadInsts) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keyword">auto</span> *NewCond = <a class="code" href="IndVarSimplify_8cpp.html#a1ef810603d544fc15be655679af3d159">createFoldedExitCond</a>(L, ExitingBB, IsTaken);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <a class="code" href="IndVarSimplify_8cpp.html#a16b4faf9802df251058f89443ca35a6c">replaceExitCond</a>(BI, NewCond, DeadInsts);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;}</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a649ac561acbab510055b0e8f48ca0617"> 1319</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IndVarSimplify_8cpp.html#a649ac561acbab510055b0e8f48ca0617">replaceLoopPHINodesWithPreheaderValues</a>(</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakTrackingVH&gt;</a> &amp;DeadInsts,</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>() &amp;&amp; <span class="stringliteral">&quot;Should only do it in simplify form!&quot;</span>);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keyword">auto</span> *LoopPreheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keyword">auto</span> *LoopHeader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *&gt;</a> Worklist;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;PN : LoopHeader-&gt;phis()) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keyword">auto</span> *PreheaderIncoming = PN.<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(LoopPreheader);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : PN.<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      Worklist.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(&amp;PN);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    PN.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PreheaderIncoming);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    DeadInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(&amp;PN);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// Replacing with the preheader value will often allow IV users to simplify</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// (especially if the preheader value is a constant).</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>());</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).second)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="comment">// Don&#39;t simplify instructions outside the loop.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">simplifyInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getModule()-&gt;getDataLayout());</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (Res &amp;&amp; LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">replacementPreservesLCSSAForm</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res)) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users())</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        Worklist.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(Res);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      DeadInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *</div>
<div class="line"><a name="l01358"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a6012b7edcc06b327dd8b4317cd1b2294"> 1358</a></span>&#160;<a class="code" href="IndVarSimplify_8cpp.html#a6012b7edcc06b327dd8b4317cd1b2294">createInvariantCond</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html">ScalarEvolution::LoopInvariantPredicate</a> &amp;LIP,</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                    <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> InvariantPred = LIP.<a class="code" href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html#aed2a47d2a30f4899b0d6fe79d554fd4a">Pred</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Preheader &amp;&amp; <span class="stringliteral">&quot;Preheader doesn&#39;t exist&quot;</span>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.setInsertPoint(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keyword">auto</span> *LHSV = <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.expandCodeFor(LIP.<a class="code" href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html#a5323282e3d6c729af571683ea754c535">LHS</a>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keyword">auto</span> *RHSV = <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.expandCodeFor(LIP.<a class="code" href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html#a956e454e7abca6ff0409d5466cf0870b">RHS</a>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordtype">bool</span> ExitIfTrue = !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(*<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(ExitingBB));</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="keywordflow">if</span> (ExitIfTrue)</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    InvariantPred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">ICmpInst::getInversePredicate</a>(InvariantPred);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(InvariantPred, LHSV, RHSV,</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                            BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;}</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="keyword">static</span> std::optional&lt;Value *&gt;</div>
<div class="line"><a name="l01377"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a6ee463db92f5c16e95d7b2b0ec8ae686"> 1377</a></span>&#160;<a class="code" href="IndVarSimplify_8cpp.html#a6ee463db92f5c16e95d7b2b0ec8ae686">createReplacement</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB,</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *MaxIter, <span class="keywordtype">bool</span> Inverted, <span class="keywordtype">bool</span> SkipLastIter,</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = ICmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = ICmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = ICmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// &#39;LHS pred RHS&#39; should now mean that we stay in loop.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keyword">auto</span> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">if</span> (Inverted)</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *LHSS = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a21d6ee82eed29080d911dbb548a8bb68">getSCEVAtScope</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, L);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *RHSS = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a21d6ee82eed29080d911dbb548a8bb68">getSCEVAtScope</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, L);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// Can we prove it to be trivially true or false?</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> EV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a74d9f077f43759e0fbf5c60c5885bafd">evaluatePredicateAt</a>(Pred, LHSS, RHSS, BI))</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="IndVarSimplify_8cpp.html#a1ef810603d544fc15be655679af3d159">createFoldedExitCond</a>(L, ExitingBB, <span class="comment">/*IsTaken*/</span> !*EV);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="keyword">auto</span> *ARTy = LHSS-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keyword">auto</span> *MaxIterTy = MaxIter-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>();</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="comment">// If possible, adjust types.</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(ARTy) &gt; SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(MaxIterTy))</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    MaxIter = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6d745b25efdc69435508f1e936919f8b">getZeroExtendExpr</a>(MaxIter, ARTy);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(ARTy) &lt; SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">getTypeSizeInBits</a>(MaxIterTy)) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *MinusOne = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a8b52e1d4097374216c56c6cc68c78fa8">getMinusOne</a>(ARTy);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keyword">auto</span> *MaxAllowedIter = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6d745b25efdc69435508f1e936919f8b">getZeroExtendExpr</a>(MinusOne, MaxIterTy);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a4daf873f99d8d423c92a951331de5185">isKnownPredicateAt</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>, MaxIter, MaxAllowedIter, BI))</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      MaxIter = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a83c084b0947edf4ae748f9a73babf7b8">getTruncateExpr</a>(MaxIter, ARTy);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="keywordflow">if</span> (SkipLastIter) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// Semantically skip last iter is &quot;subtract 1, do not bother about unsigned</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="comment">// wrap&quot;. getLoopInvariantExitCondDuringFirstIterations knows how to deal</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="comment">// with umin in a smart way, but umin(a, b) - 1 will likely not simplify.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="comment">// So we manually construct umin(a - 1, b - 1).</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> Elements;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">UMin</a> = dyn_cast&lt;SCEVUMinExpr&gt;(MaxIter)) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">UMin</a>-&gt;operands())</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        Elements.push_back(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a8bcb86d8d126d95b0dc05f09e8f3df96">getMinusSCEV</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">getOne</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getType())));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      MaxIter = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a9aba96071c763c3233ab9f7cea03f395">getUMinFromMismatchedTypes</a>(Elements);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      MaxIter = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a8bcb86d8d126d95b0dc05f09e8f3df96">getMinusSCEV</a>(MaxIter, SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">getOne</a>(MaxIter-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()));</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// Check if there is a loop-invariant predicate equivalent to our check.</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keyword">auto</span> LIP = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#acfba20b8f0ef37236f824d176fcab288">getLoopInvariantExitCondDuringFirstIterations</a>(Pred, LHSS, RHSS,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                                                               L, BI, MaxIter);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">if</span> (!LIP)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160; </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="comment">// Can we prove it to be trivially true?</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="keywordflow">if</span> (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a4daf873f99d8d423c92a951331de5185">isKnownPredicateAt</a>(LIP-&gt;Pred, LIP-&gt;LHS, LIP-&gt;RHS, BI))</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="IndVarSimplify_8cpp.html#a1ef810603d544fc15be655679af3d159">createFoldedExitCond</a>(L, ExitingBB, <span class="comment">/*IsTaken*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="IndVarSimplify_8cpp.html#a6012b7edcc06b327dd8b4317cd1b2294">createInvariantCond</a>(L, ExitingBB, *LIP, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;}</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a740a442f349b36821071c21e265e23e1"> 1434</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IndVarSimplify_8cpp.html#a740a442f349b36821071c21e265e23e1">optimizeLoopExitWithUnknownExitCount</a>(</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *MaxIter,</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordtype">bool</span> SkipLastIter, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>,</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakTrackingVH&gt;</a> &amp;DeadInsts) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) != L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1))) &amp;&amp;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <span class="stringliteral">&quot;Not a loop exit!&quot;</span>);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="comment">// For branch that stays in loop by TRUE condition, go through AND. For branch</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// that stays in loop by FALSE condition, go through OR. Both gives the</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// similar logic: &quot;stay in loop iff all conditions are true(false)&quot;.</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="keywordtype">bool</span> Inverted = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1));</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ICmpInst *, 4&gt;</a> LeafConditions;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OldCond = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(OldCond);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  Worklist.push_back(OldCond);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keyword">auto</span> GoThrough = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <span class="keyword">nullptr</span>, *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">if</span> (Inverted) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))))</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))))</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>).second)</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      Worklist.push_back(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>).second)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      Worklist.push_back(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  };</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Curr = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="comment">// Go through AND/OR conditions. Collect leaf ICMPs. We only care about</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="comment">// those with one use, to avoid instruction duplication.</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">if</span> (Curr-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="keywordflow">if</span> (!GoThrough(Curr))</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ICmp = dyn_cast&lt;ICmpInst&gt;(Curr))</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;          LeafConditions.push_back(ICmp);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">// If the current basic block has the same exit count as the whole loop, and</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// it consists of multiple icmp&#39;s, try to collect all icmp&#39;s that give exact</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// same exit count. For all other icmp&#39;s, we could use one less iteration,</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// because their value on the last iteration doesn&#39;t really matter.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;ICmpInst *, 4&gt;</a> ICmpsFailingOnLastIter;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="keywordflow">if</span> (!SkipLastIter &amp;&amp; LeafConditions.size() &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ab24add5df0874cdfa47b47b1d9926e9e">getExitCount</a>(L, ExitingBB,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                       ScalarEvolution::ExitCountKind::SymbolicMaximum) ==</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;          MaxIter)</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ICmp : LeafConditions) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <span class="keyword">auto</span> EL = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#acbc087c889e3c823c52a44b3b18ae1ff">computeExitLimitFromCond</a>(L, ICmp, Inverted,</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                                             <span class="comment">/*ControlsExit*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <span class="keyword">auto</span> *ExitMax = EL.<a class="code" href="structllvm_1_1ScalarEvolution_1_1ExitLimit.html#a5280609b4bd8ce312891524a2e2a870f">SymbolicMaxNotTaken</a>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(ExitMax))</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <span class="comment">// They could be of different types (specifically this happens after</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="comment">// IV widening).</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="keyword">auto</span> *WiderType =</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;          SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a10cde7087f90dc664b6799814aa28584">getWiderType</a>(ExitMax-&gt;getType(), MaxIter-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <span class="keyword">auto</span> *WideExitMax = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a933eb87303a6ce51c8894e431fbc389b">getNoopOrZeroExtend</a>(ExitMax, WiderType);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keyword">auto</span> *WideMaxIter = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a933eb87303a6ce51c8894e431fbc389b">getNoopOrZeroExtend</a>(MaxIter, WiderType);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="keywordflow">if</span> (WideExitMax == WideMaxIter)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        ICmpsFailingOnLastIter.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ICmp);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *OldCond : LeafConditions) {</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="comment">// Skip last iteration for this icmp under one of two conditions:</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// - We do it for all conditions;</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// - There is another ICmp that would fail on last iter, so this one doesn&#39;t</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// really matter.</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordtype">bool</span> OptimisticSkipLastIter = SkipLastIter;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">if</span> (!OptimisticSkipLastIter) {</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">if</span> (ICmpsFailingOnLastIter.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() &gt; 1)</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        OptimisticSkipLastIter = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ICmpsFailingOnLastIter.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() == 1)</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        OptimisticSkipLastIter = !ICmpsFailingOnLastIter.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(OldCond);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> Replaced =</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            <a class="code" href="IndVarSimplify_8cpp.html#a6ee463db92f5c16e95d7b2b0ec8ae686">createReplacement</a>(OldCond, L, ExitingBB, MaxIter, Inverted,</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                              OptimisticSkipLastIter, SE, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>)) {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keyword">auto</span> *NewCond = *Replaced;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NCI = dyn_cast&lt;Instruction&gt;(NewCond)) {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        NCI-&gt;setName(OldCond-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.first_iter&quot;</span>);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unknown exit count: Replacing &quot;</span> &lt;&lt; *OldCond</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; *NewCond &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldCond-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <span class="stringliteral">&quot;Must be!&quot;</span>);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      OldCond-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewCond);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      DeadInsts.push_back(OldCond);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="comment">// Make sure we no longer consider this condition as failing on last</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="comment">// iteration.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      ICmpsFailingOnLastIter.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(OldCond);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  }</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;}</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160; </div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="keywordtype">bool</span> IndVarSimplify::canonicalizeExitCondition(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="comment">// Note: This is duplicating a particular part on SimplifyIndVars reasoning.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="comment">// We need to duplicate it because given icmp zext(small-iv), C, IVUsers</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="comment">// never reaches the icmp since the zext doesn&#39;t fold to an AddRec unless</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="comment">// it already has flags.  The alternative to this would be to extending the</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">// set of &quot;interesting&quot; IV users to include the icmp, but doing that</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="comment">// regresses results in practice by querying SCEVs before trip counts which</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// rely on them which results in SCEV caching sub-optimal answers.  The</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="comment">// concern about caching sub-optimal results is why we only query SCEVs of</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// the loop invariant RHS here.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 16&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ExitingBB : ExitingBlocks) {</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">if</span> (!BI)</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;exit branch must be conditional&quot;</span>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keyword">auto</span> *ICmp = dyn_cast&lt;ICmpInst&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">if</span> (!ICmp || !ICmp-&gt;hasOneUse())</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = ICmp-&gt;getOperand(0);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = ICmp-&gt;getOperand(1);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="comment">// For the range reasoning, avoid computing SCEVs in the loop to avoid</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">// poisoning cache with sub-optimal results.  For the must-execute case,</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">// this is a neccessary precondition for correctness.</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="comment">// Same logic applies for the inverse case</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160; </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="comment">// Match (icmp signed-cond zext, RHS)</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHSOp))) || !ICmp-&gt;isSigned())</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> InnerBitWidth = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(LHSOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> OuterBitWidth = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keyword">auto</span> FullCR = ConstantRange::getFull(InnerBitWidth);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    FullCR = FullCR.zeroExtend(OuterBitWidth);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keyword">auto</span> RHSCR = SE-&gt;getUnsignedRange(SE-&gt;applyLoopGuards(SE-&gt;getSCEV(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>), L));</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">if</span> (FullCR.contains(RHSCR)) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="comment">// We have now matched icmp signed-cond zext(X), zext(Y&#39;), and can thus</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="comment">// replace the signed condition with the unsigned version.</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      ICmp-&gt;setPredicate(ICmp-&gt;getUnsignedPredicate());</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="comment">// Note: No SCEV invalidation needed.  We&#39;ve changed the predicate, but</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="comment">// have not changed exit counts, or the values produced by the compare.</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// Now that we&#39;ve canonicalized the condition to match the extend,</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// see if we can rotate the extend out of the loop.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ExitingBB : ExitingBlocks) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">if</span> (!BI)</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;exit branch must be conditional&quot;</span>);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keyword">auto</span> *ICmp = dyn_cast&lt;ICmpInst&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">if</span> (!ICmp || !ICmp-&gt;hasOneUse() || !ICmp-&gt;isUnsigned())</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordtype">bool</span> Swapped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = ICmp-&gt;getOperand(0);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = ICmp-&gt;getOperand(1);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) == L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="comment">// Nothing to rotate</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="comment">// Same logic applies for the inverse case until we actually pick</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="comment">// which operand of the compare to update.</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      Swapped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>));</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160; </div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// Match (icmp unsigned-cond zext, RHS)</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="comment">// TODO: Extend to handle corresponding sext/signed-cmp case</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="comment">// TODO: Extend to other invertible functions</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHSOp))))</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="comment">// In general, we only rotate if we can do so without increasing the number</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment">// of instructions.  The exception is when we have an zext(add-rec).  The</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="comment">// reason for allowing this exception is that we know we need to get rid</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// of the zext for SCEV to be able to compute a trip count for said loops;</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="comment">// we consider the new trip count valuable enough to increase instruction</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="comment">// count by one.</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; !isa&lt;SCEVAddRecExpr&gt;(SE-&gt;getSCEV(LHSOp)))</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// Given a icmp unsigned-cond zext(Op) where zext(trunc(RHS)) == RHS</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// replace with an icmp of the form icmp unsigned-cond Op, trunc(RHS)</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">// when zext is loop varying and RHS is loop invariant.  This converts</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="comment">// loop varying work to loop-invariant work.</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keyword">auto</span> doRotateTransform = [&amp;]() {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ICmp-&gt;isUnsigned() &amp;&amp; <span class="stringliteral">&quot;must have proven unsigned already&quot;</span>);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="keyword">auto</span> *NewRHS =</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(Instruction::Trunc, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, LHSOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                         L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      ICmp-&gt;setOperand(Swapped ? 1 : 0, LHSOp);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      ICmp-&gt;setOperand(Swapped ? 0 : 1, NewRHS);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        DeadInsts.push_back(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    };</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> InnerBitWidth = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(LHSOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> OuterBitWidth = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keyword">auto</span> FullCR = ConstantRange::getFull(InnerBitWidth);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    FullCR = FullCR.zeroExtend(OuterBitWidth);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keyword">auto</span> RHSCR = SE-&gt;getUnsignedRange(SE-&gt;applyLoopGuards(SE-&gt;getSCEV(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>), L));</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordflow">if</span> (FullCR.contains(RHSCR)) {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      doRotateTransform();</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="comment">// Note, we are leaving SCEV in an unfortunately imprecise case here</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="comment">// as rotation tends to reveal information about trip counts not</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="comment">// previously visible.</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="keywordtype">bool</span> IndVarSimplify::optimizeLoopExits(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 16&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// Remove all exits which aren&#39;t both rewriteable and execute on every</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="comment">// iteration.</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a>(ExitingBlocks, [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="comment">// If our exitting block exits multiple loops, we can only rewrite the</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="comment">// innermost one.  Otherwise, we&#39;re changing how many times the innermost</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="comment">// loop runs before it exits.</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(ExitingBB) != L)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// Can&#39;t rewrite non-branch yet.</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (!BI)</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="comment">// Likewise, the loop latch must be dominated by the exiting BB.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;dominates(ExitingBB, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>()))</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>())) {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="comment">// If already constant, nothing to do. However, if this is an</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      <span class="comment">// unconditional exit, we can still replace header phis with their</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <span class="comment">// preheader value.</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      if (!L-&gt;contains(BI-&gt;getSuccessor(CI-&gt;isNullValue())))</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        replaceLoopPHINodesWithPreheaderValues(LI, L, DeadInsts, *SE);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      return true;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  });</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">if</span> (ExitingBlocks.empty())</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="comment">// Get a symbolic upper bound on the loop backedge taken count.</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *MaxBECount = SE-&gt;getSymbolicMaxBackedgeTakenCount(L);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(MaxBECount))</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <span class="comment">// Visit our exit blocks in order of dominance. We know from the fact that</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="comment">// all exits must dominate the latch, so there is a total dominance order</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// between them.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(ExitingBlocks, [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *A, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;               <span class="comment">// std::sort sorts in ascending order, so we want the inverse of</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;               <span class="comment">// the normal dominance relation.</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;               <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;               <span class="keywordflow">if</span> (DT-&gt;properlyDominates(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                 <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;               <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                 assert(DT-&gt;properlyDominates(B, A) &amp;&amp;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                        <span class="stringliteral">&quot;expected total dominance order!&quot;</span>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                 return false;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;               }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  });</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="preprocessor">#ifdef ASSERT</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ExitingBlocks.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT-&gt;dominates(ExitingBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1], ExitingBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="keywordtype">bool</span> SkipLastIter = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *CurrMaxExit = SE-&gt;getCouldNotCompute();</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keyword">auto</span> UpdateSkipLastIter = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *MaxExitCount) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span> (SkipLastIter || isa&lt;SCEVCouldNotCompute&gt;(MaxExitCount))</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(CurrMaxExit))</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      CurrMaxExit = MaxExitCount;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      CurrMaxExit = SE-&gt;getUMinFromMismatchedTypes(CurrMaxExit, MaxExitCount);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// If the loop has more than 1 iteration, all further checks will be</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">// executed 1 iteration less.</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">if</span> (CurrMaxExit == MaxBECount)</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      SkipLastIter = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  };</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;const SCEV *, 8&gt;</a> DominatingExactExitCounts;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB : ExitingBlocks) {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExactExitCount = SE-&gt;getExitCount(L, ExitingBB);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *MaxExitCount = SE-&gt;getExitCount(</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        L, ExitingBB, ScalarEvolution::ExitCountKind::SymbolicMaximum);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(ExactExitCount)) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="comment">// Okay, we do not know the exit count here. Can we at least prove that it</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="comment">// will remain the same within iteration space?</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <span class="keyword">auto</span> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <span class="keyword">auto</span> OptimizeCond = [&amp;](<span class="keywordtype">bool</span> SkipLastIter) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="IndVarSimplify_8cpp.html#a740a442f349b36821071c21e265e23e1">optimizeLoopExitWithUnknownExitCount</a>(L, BI, ExitingBB,</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                                                    MaxBECount, SkipLastIter,</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                                                    SE, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, DeadInsts);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      };</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="comment">// TODO: We might have proved that we can skip the last iteration for</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="comment">// this check. In this case, we only want to check the condition on the</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="comment">// pre-last iteration (MaxBECount - 1). However, there is a nasty</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="comment">// corner case:</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="comment">//   for (i = len; i != 0; i--) { ... check (i ult X) ... }</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="comment">// If we could not prove that len != 0, then we also could not prove that</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="comment">// (len - 1) is not a UINT_MAX. If we simply query (len - 1), then</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="comment">// OptimizeCond will likely not prove anything for it, even if it could</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="comment">// prove the same fact for len.</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="comment">// As a temporary solution, we query both last and pre-last iterations in</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <span class="comment">// hope that we will be able to prove triviality for at least one of</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="comment">// them. We can stop querying MaxBECount for this case once SCEV</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="comment">// understands that (MaxBECount - 1) will not overflow here.</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <span class="keywordflow">if</span> (OptimizeCond(<span class="keyword">false</span>))</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SkipLastIter &amp;&amp; OptimizeCond(<span class="keyword">true</span>))</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      UpdateSkipLastIter(MaxExitCount);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    UpdateSkipLastIter(ExactExitCount);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="comment">// If we know we&#39;d exit on the first iteration, rewrite the exit to</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="comment">// reflect this.  This does not imply the loop must exit through this</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="comment">// exit; there may be an earlier one taken on the first iteration.</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="comment">// We know that the backedge can&#39;t be taken, so we replace all</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="comment">// the header PHIs with values coming from the preheader.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">if</span> (ExactExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">isZero</a>()) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <a class="code" href="IndVarSimplify_8cpp.html#aa42477bdea230fb3cc4ea230c1125941">foldExit</a>(L, ExitingBB, <span class="keyword">true</span>, DeadInsts);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <a class="code" href="IndVarSimplify_8cpp.html#a649ac561acbab510055b0e8f48ca0617">replaceLoopPHINodesWithPreheaderValues</a>(LI, L, DeadInsts, *SE);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExactExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;           MaxBECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;           <span class="stringliteral">&quot;Exit counts must be integers&quot;</span>);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *WiderType =</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        SE-&gt;getWiderType(MaxBECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>(), ExactExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    ExactExitCount = SE-&gt;getNoopOrZeroExtend(ExactExitCount, WiderType);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    MaxBECount = SE-&gt;getNoopOrZeroExtend(MaxBECount, WiderType);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaxBECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>() == ExactExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="comment">// Can we prove that some other exit must be taken strictly before this</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="comment">// one?</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">if</span> (SE-&gt;isLoopEntryGuardedByCond(L, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, MaxBECount,</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                                     ExactExitCount)) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <a class="code" href="IndVarSimplify_8cpp.html#aa42477bdea230fb3cc4ea230c1125941">foldExit</a>(L, ExitingBB, <span class="keyword">false</span>, DeadInsts);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="comment">// As we run, keep track of which exit counts we&#39;ve encountered.  If we</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="comment">// find a duplicate, we&#39;ve found an exit which would have exited on the</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="comment">// exiting iteration, but (from the visit order) strictly follows another</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="comment">// which does the same and is thus dead.</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordflow">if</span> (!DominatingExactExitCounts.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(ExactExitCount).second) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <a class="code" href="IndVarSimplify_8cpp.html#aa42477bdea230fb3cc4ea230c1125941">foldExit</a>(L, ExitingBB, <span class="keyword">false</span>, DeadInsts);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="comment">// TODO: There might be another oppurtunity to leverage SCEV&#39;s reasoning</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="comment">// here.  If we kept track of the min of dominanting exits so far, we could</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="comment">// discharge exits with EC &gt;= MDEC. This is less powerful than the existing</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="comment">// transform (since later exits aren&#39;t considered), but potentially more</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="comment">// powerful for any case where SCEV can prove a &gt;=u b, but neither a == b</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="comment">// or a &gt;u b.  Such a case is not currently known.</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;}</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="keywordtype">bool</span> IndVarSimplify::predicateLoopExits(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> &amp;<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 16&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <span class="comment">// Finally, see if we can rewrite our exit conditions into a loop invariant</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="comment">// form. If we have a read-only loop, and we can tell that we must exit down</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">// a path which does not need any of the values computed within the loop, we</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// can rewrite the loop to exit on the first iteration.  Note that this</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// doesn&#39;t either a) tell us the loop exits on the first iteration (unless</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="comment">// *all* exits are predicateable) or b) tell us *which* exit might be taken.</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="comment">// This transformation looks a lot like a restricted form of dead loop</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="comment">// elimination, but restricted to read-only loops and without neccesssarily</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="comment">// needing to kill the loop entirely.</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a20588b28c5ac65a0380d35772d0dd466">LoopPredication</a>)</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// Note: ExactBTC is the exact backedge taken count *iff* the loop exits</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// through *explicit* control flow.  We have to eliminate the possibility of</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// implicit exits (see below) before we know it&#39;s truly exact.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExactBTC = SE-&gt;getBackedgeTakenCount(L);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(ExactBTC) || !<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.isSafeToExpand(ExactBTC))</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SE-&gt;isLoopInvariant(ExactBTC, L) &amp;&amp; <span class="stringliteral">&quot;BTC must be loop invariant&quot;</span>);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExactBTC-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; <span class="stringliteral">&quot;BTC must be integer&quot;</span>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="keyword">auto</span> BadExit = [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <span class="comment">// If our exiting block exits multiple loops, we can only rewrite the</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="comment">// innermost one.  Otherwise, we&#39;re changing how many times the innermost</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="comment">// loop runs before it exits.</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(ExitingBB) != L)</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="comment">// Can&#39;t rewrite non-branch yet.</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <span class="keywordflow">if</span> (!BI)</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160; </div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="comment">// If already constant, nothing to do.</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()))</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="comment">// If the exit block has phis, we need to be able to compute the values</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">// within the loop which contains them.  This assumes trivially lcssa phis</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="comment">// have already been removed; TODO: generalize</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock =</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) ? 1 : 0);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span> (!ExitBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>().empty())</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount = SE-&gt;getExitCount(L, ExitingBB);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(ExitCount) ||</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        !<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.isSafeToExpand(ExitCount))</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160; </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SE-&gt;isLoopInvariant(ExitCount, L) &amp;&amp;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;           <span class="stringliteral">&quot;Exit count must be loop invariant&quot;</span>);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Exit count must be integer&quot;</span>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  };</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; </div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="comment">// If we have any exits which can&#39;t be predicated themselves, than we can&#39;t</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// predicate any exit which isn&#39;t guaranteed to execute before it.  Consider</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="comment">// two exits (a) and (b) which would both exit on the same iteration.  If we</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="comment">// can predicate (b), but not (a), and (a) preceeds (b) along some path, then</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="comment">// we could convert a loop from exiting through (a) to one exiting through</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="comment">// (b).  Note that this problem exists only for exits with the same exit</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="comment">// count, and we could be more aggressive when exit counts are known inequal.</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(ExitingBlocks,</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *A, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;              <span class="comment">// std::sort sorts in ascending order, so we want the inverse of</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;              <span class="comment">// the normal dominance relation, plus a tie breaker for blocks</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;              <span class="comment">// unordered by dominance.</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;              <span class="keywordflow">if</span> (DT-&gt;properlyDominates(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;              <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (DT-&gt;properlyDominates(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getName() &lt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getName();</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            });</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// Check to see if our exit blocks are a total order (i.e. a linear chain of</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// exits before the backedge).  If they aren&#39;t, reasoning about reachability</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="comment">// is complicated and we choose not to for now.</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ExitingBlocks.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;dominates(ExitingBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1], ExitingBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="comment">// Given our sorted total order, we know that exit[j] must be evaluated</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="comment">// after all exit[i] such j &gt; i.</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = ExitingBlocks.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordflow">if</span> (BadExit(ExitingBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])) {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      ExitingBlocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="keywordflow">if</span> (ExitingBlocks.empty())</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">// We rely on not being able to reach an exiting block on a later iteration</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">// then it&#39;s statically compute exit count.  The implementaton of</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">// getExitCount currently has this invariant, but assert it here so that</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// breakage is obvious if this ever changes..</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(ExitingBlocks, [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB) {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keywordflow">return</span> DT-&gt;dominates(ExitingBB, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      }));</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <span class="comment">// At this point, ExitingBlocks consists of only those blocks which are</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="comment">// predicatable.  Given that, we know we have at least one exit we can</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="comment">// predicate if the loop is doesn&#39;t have side effects and doesn&#39;t have any</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="comment">// implicit exits (because then our exact BTC isn&#39;t actually exact).</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="comment">// @Reviewers - As structured, this is O(I^2) for loop nests.  Any</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="comment">// suggestions on how to improve this?  I can obviously bail out for outer</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="comment">// loops, but that seems less than ideal.  MemorySSA can find memory writes,</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="comment">// is that enough for *all* side effects?</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>())</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      <span class="comment">// TODO:isGuaranteedToTransfer</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayHaveSideEffects())</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="comment">// Finally, do the actual predication for all predicatable blocks.  A couple</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">// of notes here:</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="comment">// 1) We don&#39;t bother to constant fold dominated exits with identical exit</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="comment">//    counts; that&#39;s simply a form of CSE/equality propagation and we leave</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="comment">//    it for dedicated passes.</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <span class="comment">// 2) We insert the comparison at the branch.  Hoisting introduces additional</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="comment">//    legality constraints and we leave that to dedicated logic.  We want to</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">//    predicate even if we can&#39;t insert a loop invariant expression as</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">//    peeling or unrolling will likely reduce the cost of the otherwise loop</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="comment">//    varying check.</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.setInsertPoint(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ExactBTCV = <span class="keyword">nullptr</span>; <span class="comment">// Lazily generated if needed.</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB : ExitingBlocks) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount = SE-&gt;getExitCount(L, ExitingBB);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160; </div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keyword">auto</span> *BI = cast&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCond;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">if</span> (ExitCount == ExactBTC) {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      NewCond = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) ?</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getFalse() : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getTrue();</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ECV = <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.expandCodeFor(ExitCount);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">if</span> (!ExactBTCV)</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        ExactBTCV = <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.expandCodeFor(ExactBTC);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = ExactBTCV;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <span class="keywordflow">if</span> (ECV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *WiderTy = SE-&gt;getWiderType(ECV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        ECV = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExt(ECV, WiderTy);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateZExt(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, WiderTy);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      }</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <span class="keyword">auto</span> Pred = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) ?</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      NewCond = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.CreateICmp(Pred, ECV, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    }</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OldCond = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(NewCond);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">if</span> (OldCond-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      DeadInsts.emplace_back(OldCond);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;}</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; </div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment">//  IndVarSimplify driver. Manage several subpasses of IV simplification.</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">IndVarSimplify::run</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="comment">// We need (and expect!) the incoming loop to be in LCSSA.</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#ad4d406a8bba858837a1a34c03510b124">isRecursivelyLCSSAForm</a>(*DT, *LI) &amp;&amp;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;         <span class="stringliteral">&quot;LCSSA required to run indvars!&quot;</span>);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// If LoopSimplify form is not available, stay out of trouble. Some notes:</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">//  - LSR currently only supports LoopSimplify-form loops. Indvars&#39;</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="comment">//    canonicalization can be a pessimization without LSR to &quot;clean up&quot;</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">//    afterwards.</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">//  - We depend on having a preheader; in particular,</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">//    Loop::getCanonicalInductionVariable only supports loops with preheaders,</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="comment">//    and we&#39;re in trouble if we can&#39;t find the induction variable even when</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="comment">//    we&#39;ve manually inserted one.</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="comment">//  - LFTR relies on having a single backedge.</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>())</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// Used below for a consistency check only</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">// Note: Since the result returned by ScalarEvolution may depend on the order</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">// in which previous results are added to its cache, the call to</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="comment">// getBackedgeTakenCount() may change following SCEV queries.</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BackedgeTakenCount;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IndVarSimplify_8cpp.html#adf55f1933cc6a98745edddff07638c7d">VerifyIndvars</a>)</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    BackedgeTakenCount = SE-&gt;getBackedgeTakenCount(L);</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="comment">// If there are any floating-point recurrences, attempt to</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="comment">// transform them to use integer recurrences.</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  Changed |= rewriteNonIntegerIVs(L);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="comment">// Create a rewriter object which we&#39;ll use to transform the code with.</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>(*SE, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;indvars&quot;</span>);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.setDebugType(<a class="code" href="IndVarSimplify_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="comment">// Eliminate redundant IV users.</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="comment">// Simplification works best when run before other consumers of SCEV. We</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <span class="comment">// attempt to avoid evaluating SCEVs for sign/zero extend operations until</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">// other expressions involving loop IVs have been evaluated. This helps SCEV</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// set no-wrap flags before normalizing sign/zero extension.</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.disableCanonicalMode();</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  Changed |= simplifyAndExtend(L, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, LI);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160; </div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="comment">// Check to see if we can compute the final value of any expressions</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">// that are recurrent in the loop, and substitute the exit values from the</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">// loop into any instructions outside of the loop that use the final values</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="comment">// of the current expressions.</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IndVarSimplify_8cpp.html#a388352a609baf8c6705e3952af613be4">ReplaceExitValue</a> != <a class="code" href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a4f92864a2edbc4ee6aa6d5abcb995fdd">NeverRepl</a>) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">int</span> Rewrites = <a class="code" href="namespacellvm.html#acb5b48f89efd60ea799bb09abc1971ba">rewriteLoopExitValues</a>(L, LI, TLI, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, DT,</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                                             <a class="code" href="IndVarSimplify_8cpp.html#a388352a609baf8c6705e3952af613be4">ReplaceExitValue</a>, DeadInsts)) {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      NumReplaced += Rewrites;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    }</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// Eliminate redundant IV cycles.</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  NumElimIV += <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.replaceCongruentIVs(L, DT, DeadInsts, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160; </div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="comment">// Try to convert exit conditions to unsigned and rotate computation</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="comment">// out of the loop.  Note: Handles invalidation internally if needed.</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  Changed |= canonicalizeExitCondition(L);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="comment">// Try to eliminate loop exits based on analyzeable exit counts</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordflow">if</span> (optimizeLoopExits(L, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>))  {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="comment">// Given we&#39;ve changed exit counts, notify SCEV</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// Some nested loops may share same folded exit basic block,</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="comment">// thus we need to notify top most loop.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    SE-&gt;forgetTopmostLoop(L);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  }</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="comment">// Try to form loop invariant tests for loop exits by changing how many</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">// iterations of the loop run when that is unobservable.</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="keywordflow">if</span> (predicateLoopExits(L, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>)) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="comment">// Given we&#39;ve changed exit counts, notify SCEV</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    SE-&gt;forgetLoop(L);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="comment">// If we have a trip count expression, rewrite the loop&#39;s exit condition</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="comment">// using it.</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a91a8c4eb312047d8d912b8606168c0b4">DisableLFTR</a>) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreHeader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 16&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBB : ExitingBlocks) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="comment">// Can&#39;t rewrite non-branch yet.</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;BranchInst&gt;(ExitingBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()))</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="comment">// If our exitting block exits multiple loops, we can only rewrite the</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="comment">// innermost one.  Otherwise, we&#39;re changing how many times the innermost</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="comment">// loop runs before it exits.</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(ExitingBB) != L)</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IndVarSimplify_8cpp.html#a6a2f2b3d9153487f51dae119c07f8461">needsLFTR</a>(L, ExitingBB))</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ExitCount = SE-&gt;getExitCount(L, ExitingBB);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(ExitCount))</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="comment">// This was handled above, but as we form SCEVs, we can sometimes refine</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="comment">// existing ones; this allows exit counts to be folded to zero which</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="comment">// weren&#39;t when optimizeLoopExits saw them.  Arguably, we should iterate</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <span class="comment">// until stable to handle cases like this better.</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <span class="keywordflow">if</span> (ExitCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">isZero</a>())</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160; </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndVar = <a class="code" href="IndVarSimplify_8cpp.html#ad5bfea0668b91ebb610d2db7ddb3044d">FindLoopCounter</a>(L, ExitingBB, ExitCount, SE, DT);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <span class="keywordflow">if</span> (!IndVar)</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160; </div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <span class="comment">// Avoid high cost expansions.  Note: This heuristic is questionable in</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      <span class="comment">// that our definition of &quot;high cost&quot; is not exactly principled.</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.isHighCostExpansion(ExitCount, L, <a class="code" href="namespacellvm.html#a837209d51e75f7afcfdf457b20e59493">SCEVCheapExpansionBudget</a>,</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                                       <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()))</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="comment">// Check preconditions for proper SCEVExpander operation. SCEV does not</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="comment">// express SCEVExpander&#39;s dependencies, such as LoopSimplify. Instead</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <span class="comment">// any pass that uses the SCEVExpander must do it. This does not work</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="comment">// well for loop passes because SCEVExpander makes assumptions about</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      <span class="comment">// all loops, while LoopPassManager only forces the current loop to be</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="comment">// simplified.</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="comment">// FIXME: SCEV expansion has no way to bail out, so the caller must</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="comment">// explicitly check any assumptions made by SCEV. Brittle.</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *AR = dyn_cast&lt;SCEVAddRecExpr&gt;(ExitCount);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="keywordflow">if</span> (!AR || AR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#af6314c51a3cc5a619beb697246177bf0">getLoop</a>()-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>())</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        Changed |= linearFunctionTestReplace(L, ExitingBB,</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                                             ExitCount, IndVar,</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                                             <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  }</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// Clear the rewriter cache, because values that are in the rewriter&#39;s cache</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// can be deleted in the loop below, causing the AssertingVH in the cache to</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">// trigger.</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>.clear();</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160; </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">// Now that we&#39;re done iterating through lists, clean up any instructions</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// which are now dead.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keywordflow">while</span> (!DeadInsts.empty()) {</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = DeadInsts.pop_back_val();</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast_or_null&lt;PHINode&gt;(V))</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      Changed |= <a class="code" href="namespacellvm.html#ad3cf19784335900227e275fd488e4727">RecursivelyDeleteDeadPHINode</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>, TLI, MSSAU.get());</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast_or_null&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      Changed |=</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;          <a class="code" href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">RecursivelyDeleteTriviallyDeadInstructions</a>(Inst, TLI, MSSAU.get());</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="comment">// The Rewriter may not be used from this point on.</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="comment">// Loop-invariant instructions in the preheader that aren&#39;t used in the</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <span class="comment">// loop may be sunk below the loop to reduce register pressure.</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  Changed |= sinkUnusedInvariants(L);</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160; </div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="comment">// rewriteFirstIterationLoopExitValues does not rely on the computation of</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <span class="comment">// trip count and therefore can further simplify exit values in addition to</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="comment">// rewriteLoopExitValues.</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  Changed |= rewriteFirstIterationLoopExitValues(L);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160; </div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="comment">// Clean up dead instructions.</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  Changed |= <a class="code" href="namespacellvm.html#a64ecdacbd49f696216e772782a109945">DeleteDeadPHIs</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>(), TLI, MSSAU.get());</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="comment">// Check a post-condition.</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#ad4d406a8bba858837a1a34c03510b124">isRecursivelyLCSSAForm</a>(*DT, *LI) &amp;&amp;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;         <span class="stringliteral">&quot;Indvars did not preserve LCSSA!&quot;</span>);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="comment">// Verify that LFTR, and any other change have not interfered with SCEV&#39;s</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <span class="comment">// ability to compute trip count.  We may have *changed* the exit count, but</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="comment">// only by reducing it.</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IndVarSimplify_8cpp.html#adf55f1933cc6a98745edddff07638c7d">VerifyIndvars</a> &amp;&amp; !isa&lt;SCEVCouldNotCompute&gt;(BackedgeTakenCount)) {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    SE-&gt;forgetLoop(L);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *NewBECount = SE-&gt;getBackedgeTakenCount(L);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">if</span> (SE-&gt;getTypeSizeInBits(BackedgeTakenCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()) &lt;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        SE-&gt;getTypeSizeInBits(NewBECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>()))</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;      NewBECount = SE-&gt;getTruncateOrNoop(NewBECount,</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                                         BackedgeTakenCount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      BackedgeTakenCount = SE-&gt;getTruncateOrNoop(BackedgeTakenCount,</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                                                 NewBECount-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>());</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SE-&gt;isKnownPredicate(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, BackedgeTakenCount,</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                                 NewBECount) &amp;&amp; <span class="stringliteral">&quot;indvars must preserve SCEV&quot;</span>);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a> &amp;&amp; MSSAU)</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    MSSAU-&gt;getMemorySSA()-&gt;verifyMemorySSA();</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;}</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"><a class="line" href="classllvm_1_1IndVarSimplifyPass.html#a00bd6521a4f23d764d5d1403e7728e8f"> 2209</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1IndVarSimplifyPass.html#a00bd6521a4f23d764d5d1403e7728e8f">IndVarSimplifyPass::run</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                                          <a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR,</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                                          <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  IndVarSimplify IVS(&amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">SE</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">DT</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a9e363c1eaf112166372e2d52704981fb">TLI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">TTI</a>, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>,</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                     WidenIndVars &amp;&amp; <a class="code" href="IndVarSimplify_8cpp.html#a0bc7e85fe157545d63e3f4d0f41f5f10">AllowIVWidening</a>);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="keywordflow">if</span> (!IVS.run(&amp;L))</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keyword">auto</span> PA = <a class="code" href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">getLoopPassPreservedAnalyses</a>();</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  PA.preserveSet&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;();</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keywordflow">if</span> (AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>)</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    PA.preserve&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;();</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160; </div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="keyword">struct </span>IndVarSimplifyLegacyPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  IndVarSimplifyLegacyPass() : <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <a class="code" href="namespacellvm.html#a75a10b4e024d55244620ed5a852d4117">initializeIndVarSimplifyLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordflow">if</span> (skipLoop(L))</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <span class="keyword">auto</span> *LI = &amp;getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo();</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keyword">auto</span> *SE = &amp;getAnalysis&lt;ScalarEvolutionWrapperPass&gt;().getSE();</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <span class="keyword">auto</span> *DT = &amp;getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keyword">auto</span> *TLIP = getAnalysisIfAvailable&lt;TargetLibraryInfoWrapperPass&gt;();</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keyword">auto</span> *TLI = TLIP ? &amp;TLIP-&gt;getTLI(*L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keyword">auto</span> *TTIP = getAnalysisIfAvailable&lt;TargetTransformInfoWrapperPass&gt;();</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = TTIP ? &amp;TTIP-&gt;getTTI(*L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keyword">auto</span> *MSSAAnalysis = getAnalysisIfAvailable&lt;MemorySSAWrapperPass&gt;();</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keywordflow">if</span> (MSSAAnalysis)</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      MSSA = &amp;MSSAAnalysis-&gt;getMSSA();</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    IndVarSimplify IVS(LI, SE, DT, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, MSSA, <a class="code" href="IndVarSimplify_8cpp.html#a0bc7e85fe157545d63e3f4d0f41f5f10">AllowIVWidening</a>);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keywordflow">return</span> IVS.run(L);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">getLoopAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;};</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">IndVarSimplifyLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<a class="code" href="IndVarSimplify_8cpp.html#a6a756db6e21f86b2be90fd87e747c94d">INITIALIZE_PASS_BEGIN</a>(IndVarSimplifyLegacyPass, <span class="stringliteral">&quot;indvars&quot;</span>,</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                      <span class="stringliteral">&quot;Induction Variable Simplification&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>)</div>
<div class="line"><a name="l02271"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#a566d8ea0c046e39ce95437e5c8390b8f"> 2271</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(IndVarSimplifyLegacyPass, &quot;<a class="code" href="IndVarSimplify_8cpp.html#a566d8ea0c046e39ce95437e5c8390b8f">indvars</a>&quot;,</div>
<div class="line"><a name="l02272"></a><span class="lineno"><a class="line" href="IndVarSimplify_8cpp.html#ab5371a4f4e29460339200c446c423284"> 2272</a></span>&#160;                    &quot;Induction Variable <a class="code" href="IndVarSimplify_8cpp.html#ab5371a4f4e29460339200c446c423284">Simplification</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"><a class="line" href="namespacellvm.html#adcea5fcebbb3724d8b561ce175e8e65c"> 2274</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#adcea5fcebbb3724d8b561ce175e8e65c">createIndVarSimplifyPass</a>() {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> IndVarSimplifyLegacyPass();</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aIndVarSimplify_8cpp_html_a2cb5e1d50dfe26e03b62eb20263a79dd"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a2cb5e1d50dfe26e03b62eb20263a79dd">mustExecuteUBIfPoisonOnPathTo</a></div><div class="ttdeci">static bool mustExecuteUBIfPoisonOnPathTo(Instruction *Root, Instruction *OnPathTo, DominatorTree *DT)</div><div class="ttdoc">Return true if undefined behavior would provable be executed on the path to OnPathTo if Root produced...</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00769">IndVarSimplify.cpp:769</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">llvm::CmpInst::FCMP_ULE</a></div><div class="ttdeci">@ FCMP_ULE</div><div class="ttdoc">1 1 0 1 True if unordered, less than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00733">InstrTypes.h:733</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a1ef810603d544fc15be655679af3d159"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a1ef810603d544fc15be655679af3d159">createFoldedExitCond</a></div><div class="ttdeci">static Constant * createFoldedExitCond(const Loop *L, BasicBlock *ExitingBB, bool IsTaken)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01303">IndVarSimplify.cpp:1303</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_abc8aecb5b627f6a91fc2fb09762d2a41"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a></div><div class="ttdeci">IntegerType * Int32Ty</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00067">NVVMIntrRange.cpp:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1106b8a15061e8494873e10bb8a364e5"><div class="ttname"><a href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">llvm::RecursivelyDeleteTriviallyDeadInstructions</a></div><div class="ttdeci">bool RecursivelyDeleteTriviallyDeadInstructions(Value *V, const TargetLibraryInfo *TLI=nullptr, MemorySSAUpdater *MSSAU=nullptr, std::function&lt; void(Value *)&gt; AboutToDeleteCallback=std::function&lt; void(Value *)&gt;())</div><div class="ttdoc">If the specified value is a trivially dead instruction, delete it.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00537">Local.cpp:537</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb5b48f89efd60ea799bb09abc1971ba"><div class="ttname"><a href="namespacellvm.html#acb5b48f89efd60ea799bb09abc1971ba">llvm::rewriteLoopExitValues</a></div><div class="ttdeci">int rewriteLoopExitValues(Loop *L, LoopInfo *LI, TargetLibraryInfo *TLI, ScalarEvolution *SE, const TargetTransformInfo *TTI, SCEVExpander &amp;Rewriter, DominatorTree *DT, ReplaceExitVal ReplaceExitValue, SmallVector&lt; WeakTrackingVH, 16 &gt; &amp;DeadInsts)</div><div class="ttdoc">If the final value of any expressions that are recurrent in the loop can be computed,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01259">LoopUtils.cpp:1259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a6cb6a58fb0ded82b4c7755fc4c27c86d"><div class="ttname"><a href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">llvm::Loop::isLoopInvariant</a></div><div class="ttdeci">bool isLoopInvariant(const Value *V) const</div><div class="ttdoc">Return true if the specified value is loop invariant.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00060">LoopInfo.cpp:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_acbc087c889e3c823c52a44b3b18ae1ff"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#acbc087c889e3c823c52a44b3b18ae1ff">llvm::ScalarEvolution::computeExitLimitFromCond</a></div><div class="ttdeci">ExitLimit computeExitLimitFromCond(const Loop *L, Value *ExitCond, bool ExitIfTrue, bool ControlsExit, bool AllowPredicates=false)</div><div class="ttdoc">Compute the number of times the backedge of the specified loop will execute if its exit condition wer...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08903">ScalarEvolution.cpp:8903</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_a35edc71a3e9b62bcfa5b80ae369515d9"><div class="ttname"><a href="namespacellvm.html#a35edc71a3e9b62bcfa5b80ae369515d9">llvm::createWideIV</a></div><div class="ttdeci">PHINode * createWideIV(const WideIVInfo &amp;WI, LoopInfo *LI, ScalarEvolution *SE, SCEVExpander &amp;Rewriter, DominatorTree *DT, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts, unsigned &amp;NumElimExt, unsigned &amp;NumWidened, bool HasGuards, bool UsePostIncrementRanges)</div><div class="ttdoc">Widen Induction Variables - Extend the width of an IV to cover its widest uses.</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8cpp_source.html#l02085">SimplifyIndVar.cpp:2085</a></div></div>
<div class="ttc" id="astructllvm_1_1WideIVInfo_html_a2bd973d7992b3f205e8d270d1a4183cd"><div class="ttname"><a href="structllvm_1_1WideIVInfo.html#a2bd973d7992b3f205e8d270d1a4183cd">llvm::WideIVInfo::WidestNativeType</a></div><div class="ttdeci">Type * WidestNativeType</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00068">SimplifyIndVar.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a933eb87303a6ce51c8894e431fbc389b"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a933eb87303a6ce51c8894e431fbc389b">llvm::ScalarEvolution::getNoopOrZeroExtend</a></div><div class="ttdeci">const SCEV * getNoopOrZeroExtend(const SCEV *V, Type *Ty)</div><div class="ttdoc">Return a SCEV corresponding to a conversion of the input value to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04717">ScalarEvolution.cpp:4717</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ab48af53a5000ecede46c76dabb4578d2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">llvm::LoopBase::getExitBlock</a></div><div class="ttdeci">BlockT * getExitBlock() const</div><div class="ttdoc">If getExitBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00107">LoopInfoImpl.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1WeakTrackingVH_html"><div class="ttname"><a href="classllvm_1_1WeakTrackingVH.html">llvm::WeakTrackingVH</a></div><div class="ttdoc">Value handle that is nullable, but tries to track the Value.</div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00204">ValueHandle.h:204</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a6dcfa69ce27cf214caaf50f21bfe1f2f"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a6dcfa69ce27cf214caaf50f21bfe1f2f">llvm::ScalarEvolution::getEffectiveSCEVType</a></div><div class="ttdeci">Type * getEffectiveSCEVType(Type *Ty) const</div><div class="ttdoc">Return a type with the same bitwidth as the given type and which represents how SCEV will treat the g...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04437">ScalarEvolution.cpp:4437</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_af945460922a5750a0d075b6344608e27"><div class="ttname"><a href="IndVarSimplify_8cpp.html#af945460922a5750a0d075b6344608e27">ConvertToSInt</a></div><div class="ttdeci">static bool ConvertToSInt(const APFloat &amp;APF, int64_t &amp;IntVal)</div><div class="ttdoc">Convert APF to an integer, if possible.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00194">IndVarSimplify.cpp:194</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_a54bb7394d874cbbef1d81e6bea89d4f3"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a54bb7394d874cbbef1d81e6bea89d4f3">llvm::SCEVAddRecExpr::isAffine</a></div><div class="ttdeci">bool isAffine() const</div><div class="ttdoc">Return true if this represents an expression A + B*x where A and B are loop invariant values.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00358">ScalarEvolutionExpressions.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aScalarEvolutionExpander_8h_html"><div class="ttname"><a href="ScalarEvolutionExpander_8h.html">ScalarEvolutionExpander.h</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_a1d3a0e869e478018c481a577ed9d25ee"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a1d3a0e869e478018c481a577ed9d25ee">llvm::SCEVAddRecExpr::getStart</a></div><div class="ttdeci">const SCEV * getStart() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00341">ScalarEvolutionExpressions.h:341</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8h_html"><div class="ttname"><a href="MemorySSAUpdater_8h.html">MemorySSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad711012ae6f56de75424c48f31538986a1e6c3ab87bc6c3b3ee4b5a64e3a99963"><div class="ttname"><a href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a1e6c3ab87bc6c3b3ee4b5a64e3a99963">llvm::OnlyCheapRepl</a></div><div class="ttdeci">@ OnlyCheapRepl</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00439">LoopUtils.h:439</a></div></div>
<div class="ttc" id="anamespacellvm_html_a75a10b4e024d55244620ed5a852d4117"><div class="ttname"><a href="namespacellvm.html#a75a10b4e024d55244620ed5a852d4117">llvm::initializeIndVarSimplifyLegacyPassPass</a></div><div class="ttdeci">void initializeIndVarSimplifyLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="astructllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate_html_a956e454e7abca6ff0409d5466cf0870b"><div class="ttname"><a href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html#a956e454e7abca6ff0409d5466cf0870b">llvm::ScalarEvolution::LoopInvariantPredicate::RHS</a></div><div class="ttdeci">const SCEV * RHS</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l01164">ScalarEvolution.h:1164</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpander_html"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html">llvm::SCEVExpander</a></div><div class="ttdoc">This class uses information about analyze scalars to rewrite expressions in canonical form.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00050">ScalarEvolutionExpander.h:50</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_ab5371a4f4e29460339200c446c423284"><div class="ttname"><a href="IndVarSimplify_8cpp.html#ab5371a4f4e29460339200c446c423284">Simplification</a></div><div class="ttdeci">Induction Variable Simplification</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l02272">IndVarSimplify.cpp:2272</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a861b0a771b2125e6e9affb1b6f7a2003"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a861b0a771b2125e6e9affb1b6f7a2003">AlmostDeadIV</a></div><div class="ttdeci">static bool AlmostDeadIV(PHINode *Phi, BasicBlock *LatchBlock, Value *Cond)</div><div class="ttdoc">Return true if this IV has any uses other than the (soon to be rewritten) loop exit test.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00850">IndVarSimplify.cpp:850</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVNAryExpr_html_a09cc70290a71475141063b6dff42a5d2"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a09cc70290a71475141063b6dff42a5d2">llvm::SCEVNAryExpr::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00209">ScalarEvolutionExpressions.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdeci">@ FCMP_ONE</div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00726">InstrTypes.h:726</a></div></div>
<div class="ttc" id="aIndVarSimplify_8h_html"><div class="ttname"><a href="IndVarSimplify_8h.html">IndVarSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a7157f9fa9dd11f234ec3c58517cb6d96"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">llvm::Intrinsic::getName</a></div><div class="ttdeci">StringRef getName(ID id)</div><div class="ttdoc">Return the LLVM name for an intrinsic, such as &quot;llvm.ppc.altivec.lvx&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00975">Function.cpp:975</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a9504a92a00083831f812fb8317b1d9a0"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a9504a92a00083831f812fb8317b1d9a0">hasConcreteDefImpl</a></div><div class="ttdeci">static bool hasConcreteDefImpl(Value *V, SmallPtrSetImpl&lt; Value * &gt; &amp;Visited, unsigned Depth)</div><div class="ttdoc">Recursive helper for hasConcreteDef().</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00809">IndVarSimplify.cpp:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03354">Instructions.cpp:3354</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa2a54b545d237ecfe450fd1292f7675e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const</div><div class="ttdoc">For example, EQ -&gt; NE, UGT -&gt; ULE, SLT -&gt; SGE, OEQ -&gt; UNE, UGT -&gt; OLE, OLT -&gt; UGE,...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00832">InstrTypes.h:832</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a83c084b0947edf4ae748f9a73babf7b8"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a83c084b0947edf4ae748f9a73babf7b8">llvm::ScalarEvolution::getTruncateExpr</a></div><div class="ttdeci">const SCEV * getTruncateExpr(const SCEV *Op, Type *Ty, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01195">ScalarEvolution.cpp:1195</a></div></div>
<div class="ttc" id="anamespacellvm_html_a92caae34bfacc63bda0f23d5d005a89e"><div class="ttname"><a href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">llvm::getLoopAnalysisUsage</a></div><div class="ttdeci">void getLoopAnalysisUsage(AnalysisUsage &amp;AU)</div><div class="ttdoc">Helper to consistently add the set of standard passes to a loop pass's AnalysisUsage.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00141">LoopUtils.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a2c96114e89e8cf2122ebe8bc4d929c7c"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a2c96114e89e8cf2122ebe8bc4d929c7c">llvm::ScalarEvolution::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const</div><div class="ttdoc">Return the size in bits of the specified type, for which isSCEVable must return true.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04427">ScalarEvolution.cpp:4427</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639"><div class="ttname"><a href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">llvm::Depth</a></div><div class="ttdeci">@ Depth</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00036">SIMachineScheduler.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad711012ae6f56de75424c48f31538986a4f92864a2edbc4ee6aa6d5abcb995fdd"><div class="ttname"><a href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a4f92864a2edbc4ee6aa6d5abcb995fdd">llvm::NeverRepl</a></div><div class="ttdeci">@ NeverRepl</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00438">LoopUtils.h:438</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html">llvm::LoopStandardAnalysisResults</a></div><div class="ttdoc">The adaptor from a function pass to a loop pass computes these analyses and makes them available to t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00051">LoopAnalysisManager.h:51</a></div></div>
<div class="ttc" id="astructllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate_html_aed2a47d2a30f4899b0d6fe79d554fd4a"><div class="ttname"><a href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html#aed2a47d2a30f4899b0d6fe79d554fd4a">llvm::ScalarEvolution::LoopInvariantPredicate::Pred</a></div><div class="ttdeci">ICmpInst::Predicate Pred</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l01162">ScalarEvolution.h:1162</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a7faf4e0334b77ab527e4b45e3a1f4d65"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">llvm::ConstantFP::getValueAPF</a></div><div class="ttdeci">const APFloat &amp; getValueAPF() const</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00297">Constants.h:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a10cde7087f90dc664b6799814aa28584"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a10cde7087f90dc664b6799814aa28584">llvm::ScalarEvolution::getWiderType</a></div><div class="ttdeci">Type * getWiderType(Type *Ty1, Type *Ty2) const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04448">ScalarEvolution.cpp:4448</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_adf55f1933cc6a98745edddff07638c7d"><div class="ttname"><a href="IndVarSimplify_8cpp.html#adf55f1933cc6a98745edddff07638c7d">VerifyIndvars</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; VerifyIndvars(&quot;verify-indvars&quot;, cl::Hidden, cl::desc(&quot;Verify the ScalarEvolution result after running indvars. Has no &quot; &quot;effect in release builds. (Note: this adds additional SCEV &quot; &quot;queries potentially changing the analysis result)&quot;))</div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdeci">@ ICMP_SLE</div><div class="ttdoc">signed less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00748">InstrTypes.h:748</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_adc040502444e4504cdbc04c87e4e3055"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#adc040502444e4504cdbc04c87e4e3055">llvm::ScalarEvolution::getTruncateOrZeroExtend</a></div><div class="ttdeci">const SCEV * getTruncateOrZeroExtend(const SCEV *V, Type *Ty, unsigned Depth=0)</div><div class="ttdoc">Return a SCEV corresponding to a conversion of the input value to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04692">ScalarEvolution.cpp:4692</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a16b4faf9802df251058f89443ca35a6c"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a16b4faf9802df251058f89443ca35a6c">replaceExitCond</a></div><div class="ttdeci">static void replaceExitCond(BranchInst *BI, Value *NewCond, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01293">IndVarSimplify.cpp:1293</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aaa96df870a1b3d7ffc56bec3eb0b0cff"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">llvm::LoopStandardAnalysisResults::DT</a></div><div class="ttdeci">DominatorTree &amp; DT</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00054">LoopAnalysisManager.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdeci">@ FCMP_OGT</div><div class="ttdoc">0 0 1 0 True if ordered and greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00722">InstrTypes.h:722</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02797">Instructions.h:2797</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_af2c2870cb357b9652eb5029e22e87880"><div class="ttname"><a href="IndVarSimplify_8cpp.html#af2c2870cb357b9652eb5029e22e87880">getLoopPhiForCounter</a></div><div class="ttdeci">static PHINode * getLoopPhiForCounter(Value *IncV, Loop *L)</div><div class="ttdoc">Given an Value which is hoped to be part of an add recurance in the given loop, return the associated...</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00664">IndVarSimplify.cpp:664</a></div></div>
<div class="ttc" id="aUse_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a9aba96071c763c3233ab9f7cea03f395"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a9aba96071c763c3233ab9f7cea03f395">llvm::ScalarEvolution::getUMinFromMismatchedTypes</a></div><div class="ttdeci">const SCEV * getUMinFromMismatchedTypes(const SCEV *LHS, const SCEV *RHS, bool Sequential=false)</div><div class="ttdoc">Promote the operands to the wider of the types using zero-extension, and then perform a umin operatio...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04777">ScalarEvolution.cpp:4777</a></div></div>
<div class="ttc" id="astructllvm_1_1WideIVInfo_html"><div class="ttname"><a href="structllvm_1_1WideIVInfo.html">llvm::WideIVInfo</a></div><div class="ttdoc">Collect information about induction variables that are used by sign/zero extend operations.</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00064">SimplifyIndVar.h:64</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad3cf19784335900227e275fd488e4727"><div class="ttname"><a href="namespacellvm.html#ad3cf19784335900227e275fd488e4727">llvm::RecursivelyDeleteDeadPHINode</a></div><div class="ttdeci">bool RecursivelyDeleteDeadPHINode(PHINode *PN, const TargetLibraryInfo *TLI=nullptr, MemorySSAUpdater *MSSAU=nullptr)</div><div class="ttdoc">If the specified value is an effectively dead PHI node, due to being a def-use chain of single-use no...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00645">Local.cpp:645</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9b587899173512a007250b3f5307441d"><div class="ttname"><a href="namespacellvm.html#a9b587899173512a007250b3f5307441d">llvm::mustTriggerUB</a></div><div class="ttdeci">bool mustTriggerUB(const Instruction *I, const SmallSet&lt; const Value *, 16 &gt; &amp;KnownPoison)</div><div class="ttdoc">Return true if the given instruction must trigger undefined behavior when I is executed with any oper...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05797">ValueTracking.cpp:5797</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdeci">@ FCMP_ULT</div><div class="ttdoc">1 1 0 0 True if unordered or less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00732">InstrTypes.h:732</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="astructllvm_1_1ScalarEvolution_1_1ExitLimit_html_a5280609b4bd8ce312891524a2e2a870f"><div class="ttname"><a href="structllvm_1_1ScalarEvolution_1_1ExitLimit.html#a5280609b4bd8ce312891524a2e2a870f">llvm::ScalarEvolution::ExitLimit::SymbolicMaxNotTaken</a></div><div class="ttdeci">const SCEV * SymbolicMaxNotTaken</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l01085">ScalarEvolution.h:1085</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_aaf52063adc552ee4f28b6576d3ba67b8"><div class="ttname"><a href="IndVarSimplify_8cpp.html#aaf52063adc552ee4f28b6576d3ba67b8">genLoopLimit</a></div><div class="ttdeci">static Value * genLoopLimit(PHINode *IndVar, BasicBlock *ExitingBB, const SCEV *ExitCount, bool UsePostInc, Loop *L, SCEVExpander &amp;Rewriter, ScalarEvolution *SE)</div><div class="ttdoc">Insert an IR expression which computes the value held by the IV IndVar (which must be an loop counter...</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00978">IndVarSimplify.cpp:978</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a566d8ea0c046e39ce95437e5c8390b8f"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a566d8ea0c046e39ce95437e5c8390b8f">indvars</a></div><div class="ttdeci">indvars</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l02271">IndVarSimplify.cpp:2271</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_aae1f09de4bf1aab27149a7d328715e30"><div class="ttname"><a href="classllvm_1_1APFloat.html#aae1f09de4bf1aab27149a7d328715e30">llvm::APFloat::convertToInteger</a></div><div class="ttdeci">opStatus convertToInteger(MutableArrayRef&lt; integerPart &gt; Input, unsigned int Width, bool IsSigned, roundingMode RM, bool *IsExact) const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01149">APFloat.h:1149</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a9679969ae87f8a08d5f6948be6cf7210"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a9679969ae87f8a08d5f6948be6cf7210">llvm::TargetTransformInfo::getArithmeticInstrCost</a></div><div class="ttdeci">InstructionCost getArithmeticInstrCost(unsigned Opcode, Type *Ty, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, TTI::OperandValueInfo Opd1Info={TTI::OK_AnyValue, TTI::OP_None}, TTI::OperandValueInfo Opd2Info={TTI::OK_AnyValue, TTI::OP_None}, ArrayRef&lt; const Value * &gt; Args=ArrayRef&lt; const Value * &gt;(), const Instruction *CxtI=nullptr) const</div><div class="ttdoc">This is an approximation of reciprocal throughput of a math/logic op.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00803">TargetTransformInfo.cpp:803</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html">llvm::MemorySSAWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00986">MemorySSA.h:986</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aVirtRegMap_8cpp_html_a1ad52109a2ff430460c8776286b97b2e"><div class="ttname"><a href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a></div><div class="ttdeci">Virtual Register Rewriter</div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8cpp_source.html#l00237">VirtRegMap.cpp:237</a></div></div>
<div class="ttc" id="aclassllvm_1_1MutableArrayRef_html"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html">llvm::MutableArrayRef</a></div><div class="ttdoc">MutableArrayRef - Represent a mutable reference to an array (0 or more elements consecutively in memo...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00027">ArrayRef.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_ac93dd46031b1e2f9fdb0cee7a99681df"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ac93dd46031b1e2f9fdb0cee7a99681df">llvm::ScalarEvolution::getOne</a></div><div class="ttdeci">const SCEV * getOne(Type *Ty)</div><div class="ttdoc">Return a SCEV for the constant 1 of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00656">ScalarEvolution.h:656</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a16c39eb6e60b42a40c399d8d65347bb6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const</div><div class="ttdoc">Return incoming value number x.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02794">Instructions.h:2794</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a20588b28c5ac65a0380d35772d0dd466"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a20588b28c5ac65a0380d35772d0dd466">LoopPredication</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; LoopPredication(&quot;indvars-predicate-loops&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Predicate conditions in read only loops&quot;))</div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01371">Instructions.h:1371</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">llvm::CmpInst::FCMP_UGE</a></div><div class="ttdeci">@ FCMP_UGE</div><div class="ttdoc">1 0 1 1 True if unordered, greater than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00731">InstrTypes.h:731</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad711012ae6f56de75424c48f31538986a83cddaf900262d84aed9055c0a1f0203"><div class="ttname"><a href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a83cddaf900262d84aed9055c0a1f0203">llvm::NoHardUse</a></div><div class="ttdeci">@ NoHardUse</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00440">LoopUtils.h:440</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a40f34cc77d2b3bc73384f535c8101858"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">llvm::LoopBase::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00195">LoopInfo.h:195</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_aee544c332088dbef348a0c1c97e21a6aa8092c6b52c0412d8198a63bc995761e9"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#aee544c332088dbef348a0c1c97e21a6aa8092c6b52c0412d8198a63bc995761e9">llvm::APFloatBase::opOK</a></div><div class="ttdeci">@ opOK</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00234">APFloat.h:234</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html_ab12b535502b86394c84bfd24d58e4657"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">llvm::LoopInfo::replacementPreservesLCSSAForm</a></div><div class="ttdeci">bool replacementPreservesLCSSAForm(Instruction *From, Value *To)</div><div class="ttdoc">Returns true if replacing From with To everywhere is guaranteed to preserve LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01140">LoopInfo.h:1140</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01629">PatternMatch.h:1629</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_adfb61ffe25c950c75c86310245b3ef39"><div class="ttname"><a href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02889">Instructions.h:2889</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00188">LoopInfo.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a3505dab06f59c36142a234321cdc3411"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">llvm::BranchInst::setCondition</a></div><div class="ttdeci">void setCondition(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03225">Instructions.h:3225</a></div></div>
<div class="ttc" id="astructllvm_1_1WideIVInfo_html_a45b4503c5e229503d60cc68c034286ab"><div class="ttname"><a href="structllvm_1_1WideIVInfo.html#a45b4503c5e229503d60cc68c034286ab">llvm::WideIVInfo::IsSigned</a></div><div class="ttdeci">bool IsSigned</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00071">SimplifyIndVar.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a72516971c5734dc0f7546e64affca425"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00372">BasicBlock.h:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdoc">ConstantFP - Floating Point Values [float, double].</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00256">Constants.h:256</a></div></div>
<div class="ttc" id="aAPFloat_8h_html"><div class="ttname"><a href="APFloat_8h.html">APFloat.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a46880fab7a9d5bd439725f2acc59b80d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">llvm::LoopBase::getExitingBlocks</a></div><div class="ttdeci">void getExitingBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitingBlocks) const</div><div class="ttdoc">Return all blocks inside the loop that have successors outside of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00033">LoopInfoImpl.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1WideIVInfo_html_a882fc540d5e5234ddf6a9f880e3f5a9b"><div class="ttname"><a href="structllvm_1_1WideIVInfo.html#a882fc540d5e5234ddf6a9f880e3f5a9b">llvm::WideIVInfo::NarrowIV</a></div><div class="ttdeci">PHINode * NarrowIV</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00065">SimplifyIndVar.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="anamespacellvm_html_adcea5fcebbb3724d8b561ce175e8e65c"><div class="ttname"><a href="namespacellvm.html#adcea5fcebbb3724d8b561ce175e8e65c">llvm::createIndVarSimplifyPass</a></div><div class="ttdeci">Pass * createIndVarSimplifyPass()</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l02274">IndVarSimplify.cpp:2274</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">llvm::CmpInst::FCMP_OEQ</a></div><div class="ttdeci">@ FCMP_OEQ</div><div class="ttdoc">0 0 0 1 True if ordered and equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00721">InstrTypes.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00076">LoopPass.h:76</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdeci">@ FCMP_OLT</div><div class="ttdoc">0 1 0 0 True if ordered and less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00724">InstrTypes.h:724</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afc70e919c88c86159cc94cea29b6c210"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">llvm::BasicBlock::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this basic block belongs to, or nullptr if the function does no...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00146">BasicBlock.cpp:146</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a6a756db6e21f86b2be90fd87e747c94d"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a6a756db6e21f86b2be90fd87e747c94d">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(IndVarSimplifyLegacyPass, &quot;indvars&quot;, &quot;Induction Variable Simplification&quot;, false, false) INITIALIZE_PASS_END(IndVarSimplifyLegacyPass</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">llvm::RecurKind::UMin</a></div><div class="ttdeci">@ UMin</div><div class="ttdoc">Unisgned integer min implemented in terms of select(cmp()).</div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a388352a609baf8c6705e3952af613be4"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a388352a609baf8c6705e3952af613be4">ReplaceExitValue</a></div><div class="ttdeci">static cl::opt&lt; ReplaceExitVal &gt; ReplaceExitValue(&quot;replexitval&quot;, cl::Hidden, cl::init(OnlyCheapRepl), cl::desc(&quot;Choose the strategy to replace exit value in IndVarSimplify&quot;), cl::values(clEnumValN(NeverRepl, &quot;never&quot;, &quot;never replace exit value&quot;), clEnumValN(OnlyCheapRepl, &quot;cheap&quot;, &quot;only replace exit value when the cost is cheap&quot;), clEnumValN(UnusedIndVarInLoop, &quot;unusedindvarinloop&quot;, &quot;only replace exit value when it is an unused &quot; &quot;induction variable in the loop and has cheap replacement cost&quot;), clEnumValN(NoHardUse, &quot;noharduse&quot;, &quot;only replace exit values when loop def likely dead&quot;), clEnumValN(AlwaysRepl, &quot;always&quot;, &quot;always replace exit value whenever possible&quot;)))</div></div>
<div class="ttc" id="anamespacellvm_1_1dxil_1_1PointerTypeAnalysis_html_ae574a4c1d84b9e67bc94489f356805b4"><div class="ttname"><a href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">llvm::dxil::PointerTypeAnalysis::run</a></div><div class="ttdeci">PointerTypeMap run(const Module &amp;M)</div><div class="ttdoc">Compute the PointerTypeMap for the module M.</div><div class="ttdef"><b>Definition:</b> <a href="PointerTypeAnalysis_8cpp_source.html#l00189">PointerTypeAnalysis.cpp:189</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a0bc7e85fe157545d63e3f4d0f41f5f10"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a0bc7e85fe157545d63e3f4d0f41f5f10">AllowIVWidening</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; AllowIVWidening(&quot;indvars-widen-indvars&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Allow widening of indvars to eliminate s/zext&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a30bd18ac905eacf3601bc6a553a9ff49"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">llvm::ScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdoc">Return a SCEV expression for the full generality of the specified expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04534">ScalarEvolution.cpp:4534</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aca414c43a6d42c13998208463637a20d"><div class="ttname"><a href="classllvm_1_1PHINode.html#aca414c43a6d42c13998208463637a20d">llvm::PHINode::getIncomingValueNumForOperand</a></div><div class="ttdeci">static unsigned getIncomingValueNumForOperand(unsigned i)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02808">Instructions.h:2808</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a6012b7edcc06b327dd8b4317cd1b2294"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a6012b7edcc06b327dd8b4317cd1b2294">createInvariantCond</a></div><div class="ttdeci">static Value * createInvariantCond(const Loop *L, BasicBlock *ExitingBB, const ScalarEvolution::LoopInvariantPredicate &amp;LIP, SCEVExpander &amp;Rewriter)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01358">IndVarSimplify.cpp:1358</a></div></div>
<div class="ttc" id="anamespacellvm_html_a85635b30e25b4f5742866a8b074e3684"><div class="ttname"><a href="namespacellvm.html#a85635b30e25b4f5742866a8b074e3684">llvm::simplifyUsersOfIV</a></div><div class="ttdeci">bool simplifyUsersOfIV(PHINode *CurrIV, ScalarEvolution *SE, DominatorTree *DT, LoopInfo *LI, const TargetTransformInfo *TTI, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;Dead, SCEVExpander &amp;Rewriter, IVVisitor *V=nullptr)</div><div class="ttdoc">simplifyUsersOfIV - Simplify instructions that use this induction variable by using ScalarEvolution t...</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8cpp_source.html#l00959">SimplifyIndVar.cpp:959</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac7294ba4e105807674fe3a394437fcc1"><div class="ttname"><a href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">llvm::getLoopPassPreservedAnalyses</a></div><div class="ttdeci">PreservedAnalyses getLoopPassPreservedAnalyses()</div><div class="ttdoc">Returns the minimum set of Analyses that all loop passes must preserve.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8cpp_source.html#l00138">LoopAnalysisManager.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ac233a2693163ed58305215ca2f6921e3"><div class="ttname"><a href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">llvm::Loop::isLoopSimplifyForm</a></div><div class="ttdeci">bool isLoopSimplifyForm() const</div><div class="ttdoc">Return true if the Loop is in the form that the LoopSimplify form transforms loops to,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00479">LoopInfo.cpp:479</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdoc">This class represents an analyzed expression in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00075">ScalarEvolution.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_ad5bfea0668b91ebb610d2db7ddb3044d"><div class="ttname"><a href="IndVarSimplify_8cpp.html#ad5bfea0668b91ebb610d2db7ddb3044d">FindLoopCounter</a></div><div class="ttdeci">static PHINode * FindLoopCounter(Loop *L, BasicBlock *ExitingBB, const SCEV *BECount, ScalarEvolution *SE, DominatorTree *DT)</div><div class="ttdoc">Search the loop header for a loop counter (anadd rec w/step of one) suitable for use by LFTR.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00894">IndVarSimplify.cpp:894</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a9cc6c5ed9edaa15e526e2a5ad24d1413"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a9cc6c5ed9edaa15e526e2a5ad24d1413">hasConcreteDef</a></div><div class="ttdeci">static bool hasConcreteDef(Value *V)</div><div class="ttdoc">Return true if the given value is concrete.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00842">IndVarSimplify.cpp:842</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a8fa743aa76b6902028f8a643dfb87171"><div class="ttname"><a href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">llvm::cl::values</a></div><div class="ttdeci">ValuesClass values(OptsTy... Options)</div><div class="ttdoc">Helper to build a ValuesClass by forwarding a variable number of arguments as an initializer list to ...</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00703">CommandLine.h:703</a></div></div>
<div class="ttc" id="astructllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate_html_a5323282e3d6c729af571683ea754c535"><div class="ttname"><a href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html#a5323282e3d6c729af571683ea754c535">llvm::ScalarEvolution::LoopInvariantPredicate::LHS</a></div><div class="ttdeci">const SCEV * LHS</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l01163">ScalarEvolution.h:1163</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00028">LoopPass.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1a06b1cff93069d7403ea03e6150e386"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">llvm::PatternMatch::m_LogicalOr</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::Or &gt; m_LogicalOr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L || R either in the form of L | R or L ? true : R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02574">PatternMatch.h:2574</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html">llvm::LPMUpdater</a></div><div class="ttdoc">This class provides an interface for updating the loop pass manager based on mutations to the loop ne...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00262">LoopPassManager.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae069a12f0a2d2deb69e30b439a91190e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">llvm::LoopBase::getUniqueExitBlocks</a></div><div class="ttdeci">void getUniqueExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const</div><div class="ttdoc">Return all unique successor blocks of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00142">LoopInfoImpl.h:142</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_acfba20b8f0ef37236f824d176fcab288"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#acfba20b8f0ef37236f824d176fcab288">llvm::ScalarEvolution::getLoopInvariantExitCondDuringFirstIterations</a></div><div class="ttdeci">std::optional&lt; LoopInvariantPredicate &gt; getLoopInvariantExitCondDuringFirstIterations(ICmpInst::Predicate Pred, const SCEV *LHS, const SCEV *RHS, const Loop *L, const Instruction *CtxI, const SCEV *MaxIter)</div><div class="ttdoc">If the result of the predicate LHS Pred RHS is loop invariant with respect to L at given Context duri...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l11112">ScalarEvolution.cpp:11112</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a23d78b7d4dbea0ecc84dc55313ad1f25"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a23d78b7d4dbea0ecc84dc55313ad1f25">isLoopExitTestBasedOn</a></div><div class="ttdeci">static bool isLoopExitTestBasedOn(Value *V, BasicBlock *ExitingBB)</div><div class="ttdoc">Whether the current loop exit test is based on this value.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00702">IndVarSimplify.cpp:702</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html"><div class="ttname"><a href="classllvm_1_1MemorySSA.html">llvm::MemorySSA</a></div><div class="ttdoc">Encapsulates MemorySSA, including all data associated with memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00700">MemorySSA.h:700</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ae9562b96f6f3fa41bd36538c080035ee"><div class="ttname"><a href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const</div><div class="ttdoc">Return the first index of the specified basic block in the value list for this PHI.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02882">Instructions.h:2882</a></div></div>
<div class="ttc" id="anamespacellvm_html_a837209d51e75f7afcfdf457b20e59493"><div class="ttname"><a href="namespacellvm.html#a837209d51e75f7afcfdf457b20e59493">llvm::SCEVCheapExpansionBudget</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; SCEVCheapExpansionBudget</div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab02db480f387fca92956ef1c9a01941"><div class="ttname"><a href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">llvm::simplifyInstruction</a></div><div class="ttdeci">Value * simplifyInstruction(Instruction *I, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">See if we can compute a simplified version of this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06731">InstructionSimplify.cpp:6731</a></div></div>
<div class="ttc" id="aclassllvm_1_1IVVisitor_html"><div class="ttname"><a href="classllvm_1_1IVVisitor.html">llvm::IVVisitor</a></div><div class="ttdoc">Interface for visiting interesting IV users that are recognized but not simplified by this utility.</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00034">SimplifyIndVar.h:34</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a804545e5b568edec8b970da32cd37359"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">llvm::ScalarEvolution::forgetValue</a></div><div class="ttdeci">void forgetValue(Value *V)</div><div class="ttdoc">This method should be called by the client when it has changed a value in a way that may effect its v...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08523">ScalarEvolution.cpp:8523</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad711012ae6f56de75424c48f31538986add1840394cd7a4e7d080482f42e7b424"><div class="ttname"><a href="namespacellvm.html#ad711012ae6f56de75424c48f31538986add1840394cd7a4e7d080482f42e7b424">llvm::AlwaysRepl</a></div><div class="ttdeci">@ AlwaysRepl</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00442">LoopUtils.h:442</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a57aff0646c7151c4158d839c386332cc"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a57aff0646c7151c4158d839c386332cc">visitIVCast</a></div><div class="ttdeci">static void visitIVCast(CastInst *Cast, WideIVInfo &amp;WI, ScalarEvolution *SE, const TargetTransformInfo *TTI)</div><div class="ttdoc">Update information about the induction variable that is extended by this sign or zero extend operatio...</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00514">IndVarSimplify.cpp:514</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a6ee463db92f5c16e95d7b2b0ec8ae686"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a6ee463db92f5c16e95d7b2b0ec8ae686">createReplacement</a></div><div class="ttdeci">static std::optional&lt; Value * &gt; createReplacement(ICmpInst *ICmp, const Loop *L, BasicBlock *ExitingBB, const SCEV *MaxIter, bool Inverted, bool SkipLastIter, ScalarEvolution *SE, SCEVExpander &amp;Rewriter)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01377">IndVarSimplify.cpp:1377</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdeci">@ FCMP_OGE</div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00723">InstrTypes.h:723</a></div></div>
<div class="ttc" id="aclassllvm_1_1IndVarSimplifyPass_html_a00bd6521a4f23d764d5d1403e7728e8f"><div class="ttname"><a href="classllvm_1_1IndVarSimplifyPass.html#a00bd6521a4f23d764d5d1403e7728e8f">llvm::IndVarSimplifyPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Loop &amp;L, LoopAnalysisManager &amp;AM, LoopStandardAnalysisResults &amp;AR, LPMUpdater &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l02209">IndVarSimplify.cpp:2209</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">llvm::CmpInst::BAD_ICMP_PREDICATE</a></div><div class="ttdeci">@ BAD_ICMP_PREDICATE</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00751">InstrTypes.h:751</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0d69e81725c10fa5407f0bf34462068"><div class="ttname"><a href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">llvm::TTI</a></div><div class="ttdeci">TargetTransformInfo TTI</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00191">TargetTransformInfo.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ad4d406a8bba858837a1a34c03510b124"><div class="ttname"><a href="classllvm_1_1Loop.html#ad4d406a8bba858837a1a34c03510b124">llvm::Loop::isRecursivelyLCSSAForm</a></div><div class="ttdeci">bool isRecursivelyLCSSAForm(const DominatorTree &amp;DT, const LoopInfo &amp;LI, bool IgnoreTokens=true) const</div><div class="ttdoc">Return true if this Loop and all inner subloops are in LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00469">LoopInfo.cpp:469</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAAnalysis_html"><div class="ttname"><a href="classllvm_1_1MemorySSAAnalysis.html">llvm::MemorySSAAnalysis</a></div><div class="ttdoc">An analysis that produces MemorySSA for a function.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00936">MemorySSA.h:936</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a42a82adf8d40243d6a0a28972c9f7df1"><div class="ttname"><a href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a></div><div class="ttdeci">QP Compare Ordered outs ins xscmpudp No builtin are required Or llvm fcmp order unorder compare DP QP Compare builtin are required DP Compare</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00309">README_P9.txt:309</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa87ba2ecc8b6915e8bd6f5089918229fd">llvm::logicalview::LVAttributeKind::Range</a></div><div class="ttdeci">@ Range</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="aLoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aCompiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aConstantRange_8h_html"><div class="ttname"><a href="ConstantRange_8h.html">ConstantRange.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html_a187fd767976b311c09dff5e05ac0c1bc"><div class="ttname"><a href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a></div><div class="ttdeci">#define clEnumValN(ENUMVAL, FLAGNAME, DESC)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00678">CommandLine.h:678</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aa09379aa4435be95eb717dd9b5d8b4c5"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">llvm::LoopStandardAnalysisResults::LI</a></div><div class="ttdeci">LoopInfo &amp; LI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00055">LoopAnalysisManager.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ae58027d845fb948a63a8ff44851699d5"><div class="ttname"><a href="classllvm_1_1Loop.html#ae58027d845fb948a63a8ff44851699d5">llvm::Loop::makeLoopInvariant</a></div><div class="ttdeci">bool makeLoopInvariant(Value *V, bool &amp;Changed, Instruction *InsertPt=nullptr, MemorySSAUpdater *MSSAU=nullptr, ScalarEvolution *SE=nullptr) const</div><div class="ttdoc">If the given value is an instruction inside of the loop and it can be hoisted, do so to make it trivi...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00070">LoopInfo.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00282">Record.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html_a4865a13a415f04576388b969d04d1541"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a4865a13a415f04576388b969d04d1541">llvm::DataLayout::isLegalInteger</a></div><div class="ttdeci">bool isLegalInteger(uint64_t Width) const</div><div class="ttdoc">Returns true if the specified type is known to be a native integer type supported by the CPU.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00260">DataLayout.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a5a19768af81df7e5fe571bc08dcd48b3"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a5a19768af81df7e5fe571bc08dcd48b3">llvm::ScalarEvolution::isLoopInvariant</a></div><div class="ttdeci">bool isLoopInvariant(const SCEV *S, const Loop *L)</div><div class="ttdoc">Return true if the value of the given SCEV is unchanging in the specified loop.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l13775">ScalarEvolution.cpp:13775</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">llvm::tgtok::IntVal</a></div><div class="ttdeci">@ IntVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00065">TGLexer.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">llvm::CmpInst::FCMP_UGT</a></div><div class="ttdeci">@ FCMP_UGT</div><div class="ttdoc">1 0 1 0 True if unordered or greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00730">InstrTypes.h:730</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a74d9f077f43759e0fbf5c60c5885bafd"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a74d9f077f43759e0fbf5c60c5885bafd">llvm::ScalarEvolution::evaluatePredicateAt</a></div><div class="ttdeci">std::optional&lt; bool &gt; evaluatePredicateAt(ICmpInst::Predicate Pred, const SCEV *LHS, const SCEV *RHS, const Instruction *CtxI)</div><div class="ttdoc">Check whether the condition described by Pred, LHS, and RHS is true or false in the given Context.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l10938">ScalarEvolution.cpp:10938</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a482d9cf95b588eb05cefeaa5c05be9a3"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a482d9cf95b588eb05cefeaa5c05be9a3">llvm::APFloatBase::rmTowardZero</a></div><div class="ttdeci">static constexpr roundingMode rmTowardZero</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00221">APFloat.h:221</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_af6314c51a3cc5a619beb697246177bf0"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#af6314c51a3cc5a619beb697246177bf0">llvm::SCEVAddRecExpr::getLoop</a></div><div class="ttdeci">const Loop * getLoop() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00342">ScalarEvolutionExpressions.h:342</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a4daf873f99d8d423c92a951331de5185"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a4daf873f99d8d423c92a951331de5185">llvm::ScalarEvolution::isKnownPredicateAt</a></div><div class="ttdeci">bool isKnownPredicateAt(ICmpInst::Predicate Pred, const SCEV *LHS, const SCEV *RHS, const Instruction *CtxI)</div><div class="ttdoc">Test if the given expression is known to satisfy the condition described by Pred, LHS,...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l10929">ScalarEvolution.cpp:10929</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a8bcb86d8d126d95b0dc05f09e8f3df96"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a8bcb86d8d126d95b0dc05f09e8f3df96">llvm::ScalarEvolution::getMinusSCEV</a></div><div class="ttdeci">const SCEV * getMinusSCEV(const SCEV *LHS, const SCEV *RHS, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap, unsigned Depth=0)</div><div class="ttdoc">Return LHS-RHS.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04642">ScalarEvolution.cpp:4642</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a7803cd22b4405090d0cb0b87d697a612"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a7803cd22b4405090d0cb0b87d697a612">isLoopCounter</a></div><div class="ttdeci">static bool isLoopCounter(PHINode *Phi, Loop *L, ScalarEvolution *SE)</div><div class="ttdoc">Return true if the given phi is a &quot;counter&quot; in L.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00865">IndVarSimplify.cpp:865</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_acd2fbee42afeb868be98aaae56528636"><div class="ttname"><a href="classllvm_1_1Value.html#acd2fbee42afeb868be98aaae56528636">llvm::Value::user_iterator</a></div><div class="ttdeci">user_iterator_impl&lt; User &gt; user_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00390">Value.h:390</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a3444a9359f5f17f1694f82c41d5fd574"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">llvm::LoopStandardAnalysisResults::TTI</a></div><div class="ttdeci">TargetTransformInfo &amp; TTI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00058">LoopAnalysisManager.h:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a740a442f349b36821071c21e265e23e1"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a740a442f349b36821071c21e265e23e1">optimizeLoopExitWithUnknownExitCount</a></div><div class="ttdeci">static bool optimizeLoopExitWithUnknownExitCount(const Loop *L, BranchInst *BI, BasicBlock *ExitingBB, const SCEV *MaxIter, bool SkipLastIter, ScalarEvolution *SE, SCEVExpander &amp;Rewriter, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01434">IndVarSimplify.cpp:1434</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a91a8c4eb312047d8d912b8606168c0b4"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a91a8c4eb312047d8d912b8606168c0b4">DisableLFTR</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableLFTR(&quot;disable-lftr&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Disable Linear Function Test Replace optimization&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html">llvm::SCEVAddRecExpr</a></div><div class="ttdoc">This node represents a polynomial recurrence on the trip count of the specified loop.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00330">ScalarEvolutionExpressions.h:330</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="IndVarSimplify_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00088">IndVarSimplify.cpp:88</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a6a2f2b3d9153487f51dae119c07f8461"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a6a2f2b3d9153487f51dae119c07f8461">needsLFTR</a></div><div class="ttdeci">static bool needsLFTR(Loop *L, BasicBlock *ExitingBB)</div><div class="ttdoc">linearFunctionTestReplace policy.</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l00715">IndVarSimplify.cpp:715</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a6d8769a72303e2b06ef63129cb231855"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a6d8769a72303e2b06ef63129cb231855">llvm::ScalarEvolution::isSCEVable</a></div><div class="ttdeci">bool isSCEVable(Type *Ty) const</div><div class="ttdoc">Test if values of the given type are analyzable within the SCEV framework.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04420">ScalarEvolution.cpp:4420</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html_a1ecb726f4e7b445057b795ed500546a0"><div class="ttname"><a href="classllvm_1_1SCEV.html#a1ecb726f4e7b445057b795ed500546a0">llvm::SCEV::isOne</a></div><div class="ttdeci">bool isOne() const</div><div class="ttdoc">Return true if the expression is a constant one.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00466">ScalarEvolution.cpp:466</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_aa42477bdea230fb3cc4ea230c1125941"><div class="ttname"><a href="IndVarSimplify_8cpp.html#aa42477bdea230fb3cc4ea230c1125941">foldExit</a></div><div class="ttdeci">static void foldExit(const Loop *L, BasicBlock *ExitingBB, bool IsTaken, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01312">IndVarSimplify.cpp:1312</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdeci">@ ICMP_SGE</div><div class="ttdoc">signed greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00746">InstrTypes.h:746</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a124376878e24aef4252795ba9fea420f"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">llvm::LoopStandardAnalysisResults::SE</a></div><div class="ttdeci">ScalarEvolution &amp; SE</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00056">LoopAnalysisManager.h:56</a></div></div>
<div class="ttc" id="anamespacellvm_html_a64ecdacbd49f696216e772782a109945"><div class="ttname"><a href="namespacellvm.html#a64ecdacbd49f696216e772782a109945">llvm::DeleteDeadPHIs</a></div><div class="ttdeci">bool DeleteDeadPHIs(BasicBlock *BB, const TargetLibraryInfo *TLI=nullptr, MemorySSAUpdater *MSSAU=nullptr)</div><div class="ttdoc">Examine each PHI in the given block and delete it if it is dead.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00163">BasicBlockUtils.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00449">SIDefines.h:449</a></div></div>
<div class="ttc" id="astructllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate_html"><div class="ttname"><a href="structllvm_1_1ScalarEvolution_1_1LoopInvariantPredicate.html">llvm::ScalarEvolution::LoopInvariantPredicate</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l01161">ScalarEvolution.h:1161</a></div></div>
<div class="ttc" id="aScalarEvolutionExpressions_8h_html"><div class="ttname"><a href="ScalarEvolutionExpressions_8h.html">ScalarEvolutionExpressions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aMemorySSA_8h_html"><div class="ttname"><a href="MemorySSA_8h.html">MemorySSA.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a6d745b25efdc69435508f1e936919f8b"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a6d745b25efdc69435508f1e936919f8b">llvm::ScalarEvolution::getZeroExtendExpr</a></div><div class="ttdeci">const SCEV * getZeroExtendExpr(const SCEV *Op, Type *Ty, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01609">ScalarEvolution.cpp:1609</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a8b52e1d4097374216c56c6cc68c78fa8"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a8b52e1d4097374216c56c6cc68c78fa8">llvm::ScalarEvolution::getMinusOne</a></div><div class="ttdeci">const SCEV * getMinusOne(Type *Ty)</div><div class="ttdoc">Return a SCEV for the constant -1 of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00659">ScalarEvolution.h:659</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVNAryExpr_html_a71deee7ef49ab5407b7e1aa758b6ec0a"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a71deee7ef49ab5407b7e1aa758b6ec0a">llvm::SCEVNAryExpr::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00213">ScalarEvolutionExpressions.h:213</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefaf23578fcd2a868168854ab714e7de537"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefaf23578fcd2a868168854ab714e7de537">llvm::logicalview::LVAttributeKind::Extended</a></div><div class="ttdeci">@ Extended</div></div>
<div class="ttc" id="aclassllvm_1_1SIToFPInst_html"><div class="ttname"><a href="classllvm_1_1SIToFPInst.html">llvm::SIToFPInst</a></div><div class="ttdoc">This class represents a cast from signed integer to floating point.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05047">Instructions.h:5047</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">llvm::CmpInst::FCMP_UNE</a></div><div class="ttdeci">@ FCMP_UNE</div><div class="ttdoc">1 1 1 0 True if unordered or not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00734">InstrTypes.h:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a3685b2128d8e6917000e4adc3b266ff6"><div class="ttname"><a href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const</div><div class="ttdoc">Return the opcode of this CastInst.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00675">InstrTypes.h:675</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a1cfb392c267da10531478c2f42baa603"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">llvm::LoopStandardAnalysisResults::MSSA</a></div><div class="ttdeci">MemorySSA * MSSA</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00061">LoopAnalysisManager.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">llvm::CmpInst::FCMP_OLE</a></div><div class="ttdeci">@ FCMP_OLE</div><div class="ttdoc">0 1 0 1 True if ordered and less than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00725">InstrTypes.h:725</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a021a92f02d7e959877a4154277fc5c91"><div class="ttname"><a href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">llvm::Loop::isLCSSAForm</a></div><div class="ttdeci">bool isLCSSAForm(const DominatorTree &amp;DT, bool IgnoreTokens=true) const</div><div class="ttdoc">Return true if the Loop is in LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00462">LoopInfo.cpp:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; Value * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html_aefeda9454a5e8dfcec3deb106964832a"><div class="ttname"><a href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">llvm::SCEV::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">Return the LLVM type of this SCEV expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00401">ScalarEvolution.cpp:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_aef6d2bea715d1793e956f41ddeea2320"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">llvm::ScalarEvolution::getAddExpr</a></div><div class="ttdeci">const SCEV * getAddExpr(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap, unsigned Depth=0)</div><div class="ttdoc">Get a canonical add expression, or something simpler if possible.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02537">ScalarEvolution.cpp:2537</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa29fe161c408879ada30c90ebbf55dcf"><div class="ttname"><a href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a></div><div class="ttdeci">bool VerifyMemorySSA</div><div class="ttdoc">Enables verification of MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00089">MemorySSA.cpp:89</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_a680ae08c1b9b93cebdd6cbb726fe8f3d"><div class="ttname"><a href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a></div><div class="ttdeci">static BinaryOperator * CreateAdd(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00241">Reassociate.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html_a4541962f9c18aacceb7243520eb15e1f"><div class="ttname"><a href="classllvm_1_1SCEV.html#a4541962f9c18aacceb7243520eb15e1f">llvm::SCEV::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Return true if the expression is a constant zero.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00460">ScalarEvolution.cpp:460</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a9e363c1eaf112166372e2d52704981fb"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a9e363c1eaf112166372e2d52704981fb">llvm::LoopStandardAnalysisResults::TLI</a></div><div class="ttdeci">TargetLibraryInfo &amp; TLI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00057">LoopAnalysisManager.h:57</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a21d6ee82eed29080d911dbb548a8bb68"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a21d6ee82eed29080d911dbb548a8bb68">llvm::ScalarEvolution::getSCEVAtScope</a></div><div class="ttdeci">const SCEV * getSCEVAtScope(const SCEV *S, const Loop *L)</div><div class="ttdoc">Return a SCEV expression for the specified value at the specified scope in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l09735">ScalarEvolution.cpp:9735</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_ab24add5df0874cdfa47b47b1d9926e9e"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ab24add5df0874cdfa47b47b1d9926e9e">llvm::ScalarEvolution::getExitCount</a></div><div class="ttdeci">const SCEV * getExitCount(const Loop *L, const BasicBlock *ExitingBlock, ExitCountKind Kind=Exact)</div><div class="ttdoc">Return the number of times the backedge executes before the given exit would be taken; if not exactly...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08311">ScalarEvolution.cpp:8311</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a649ac561acbab510055b0e8f48ca0617"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a649ac561acbab510055b0e8f48ca0617">replaceLoopPHINodesWithPreheaderValues</a></div><div class="ttdeci">static void replaceLoopPHINodesWithPreheaderValues(LoopInfo *LI, Loop *L, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="IndVarSimplify_8cpp_source.html#l01319">IndVarSimplify.cpp:1319</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a213e6c0ca6e838157373b9a6018c0769"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">llvm::PatternMatch::m_LogicalAnd</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::And &gt; m_LogicalAnd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L &amp;&amp; R either in the form of L &amp; R or L ? R : false.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02556">PatternMatch.h:2556</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_a7eec28400b00678b1fb2b5f55ef7ac1b"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a7eec28400b00678b1fb2b5f55ef7ac1b">llvm::SCEVAddRecExpr::getStepRecurrence</a></div><div class="ttdeci">const SCEV * getStepRecurrence(ScalarEvolution &amp;SE) const</div><div class="ttdoc">Constructs and returns the recurrence indicating how much this expression steps by.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00348">ScalarEvolutionExpressions.h:348</a></div></div>
<div class="ttc" id="aSimplifyIndVar_8h_html"><div class="ttname"><a href="SimplifyIndVar_8h.html">SimplifyIndVar.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00108">Instruction.cpp:108</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad711012ae6f56de75424c48f31538986a0cba5d71f8085f5b0bd4c61555d86bb6"><div class="ttname"><a href="namespacellvm.html#ad711012ae6f56de75424c48f31538986a0cba5d71f8085f5b0bd4c61555d86bb6">llvm::UnusedIndVarInLoop</a></div><div class="ttdeci">@ UnusedIndVarInLoop</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00441">LoopUtils.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">llvm::CmpInst::FCMP_UEQ</a></div><div class="ttdeci">@ FCMP_UEQ</div><div class="ttdoc">1 0 0 1 True if unordered or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00729">InstrTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aIndVarSimplify_8cpp_html_a5d7375fac952d8aedb775a85fefc4423"><div class="ttname"><a href="IndVarSimplify_8cpp.html#a5d7375fac952d8aedb775a85fefc4423">UsePostIncrementRanges</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UsePostIncrementRanges(&quot;indvars-post-increment-ranges&quot;, cl::Hidden, cl::desc(&quot;Use post increment control-dependent ranges in IndVarSimplify&quot;), cl::init(true))</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:30:03 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

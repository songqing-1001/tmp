<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AArch64/AArch64FrameLowering.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_b69b85499a0be7bec9dbd65569a12909.html">AArch64</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AArch64FrameLowering.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AArch64FrameLowering_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- AArch64FrameLowering.cpp - AArch64 Frame Lowering -------*- C++ -*-====//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file contains the AArch64 implementation of TargetFrameLowering class.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// On AArch64, stack frames are structured as follows:</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// The stack grows downward.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// All of the individual frame areas on the frame below are optional, i.e. it&#39;s</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// possible to create a function so that the particular area isn&#39;t present</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// in the frame.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// At function entry, the &quot;frame&quot; looks as follows:</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// |                                   | Higher address</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// | arguments passed on the stack     |</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// |-----------------------------------| &lt;- sp</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// |                                   | Lower address</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// After the prologue has run, the frame has the following general structure.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// Note that this doesn&#39;t depict the case where a red-zone is used. Also,</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// technically the last frame area (VLAs) doesn&#39;t get created until in the</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// main function body, after the prologue is run. However, it&#39;s depicted here</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// for completeness.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// |                                   | Higher address</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// | arguments passed on the stack     |</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// | (Win64 only) varargs from reg     |</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// | callee-saved gpr registers        | &lt;--.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// |                                   |    | On Darwin platforms these</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// |- - - - - - - - - - - - - - - - - -|    | callee saves are swapped,</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// | prev_lr                           |    | (frame record first)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// | prev_fp                           | &lt;--&#39;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// | async context if needed           |</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// | (a.k.a. &quot;frame record&quot;)           |</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// |-----------------------------------| &lt;- fp(=x29)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// | callee-saved fp/simd/SVE regs     |</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// |        SVE stack objects          |</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// |.empty.space.to.make.part.below....|</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// |.aligned.in.case.it.needs.more.than| (size of this area is unknown at</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// |.the.standard.16-byte.alignment....|  compile time; if present)</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// |-----------------------------------|</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// |                                   |</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// | local variables of fixed size     |</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// | including spill slots             |</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// |-----------------------------------| &lt;- bp(not defined by ABI,</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// |.variable-sized.local.variables....|       LLVM chooses X19)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// |.(VLAs)............................| (size of this area is unknown at</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// |...................................|  compile time)</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// |-----------------------------------| &lt;- sp</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// |                                   | Lower address</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// To access the data in a frame, at-compile time, a constant offset must be</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// computable from one of the pointers (fp, bp, sp) to access it. The size</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// of the areas with a dotted background cannot be computed at compile-time</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// if they are present, making it required to have all three of fp, bp and</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// sp to be set up to be able to access all contents in the frame areas,</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// assuming all of the frame areas are non-empty.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">// For most functions, some of the frame areas are empty. For those functions,</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// it may not be necessary to set up fp or bp:</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// * A base pointer is definitely needed when there are both VLAs and local</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//   variables with more-than-default alignment requirements.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">// * A frame pointer is definitely needed when there are local variables with</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//   more-than-default alignment requirements.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">// For Darwin platforms the frame-record (fp, lr) is stored at the top of the</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">// callee-saved area, since the unwind encoding does not allow for encoding</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// this dynamically and existing tools depend on this layout. For other</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// platforms, the frame-record is stored at the bottom of the (gpr) callee-saved</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// area to allow SVE stack objects (allocated directly below the callee-saves,</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// if available) to be accessed directly from the framepointer.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// The SVE spill/fill instructions have VL-scaled addressing modes such</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// as:</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//    ldr z8, [fp, #-7 mul vl]</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// For SVE the size of the vector length (VL) is not known at compile-time, so</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">// &#39;#-7 mul vl&#39; is an offset that can only be evaluated at runtime. With this</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// layout, we don&#39;t need to add an unscaled offset to the framepointer before</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// accessing the SVE object in the frame.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// In some cases when a base pointer is not strictly needed, it is generated</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// anyway when offsets from the frame pointer to access local variables become</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// so large that the offset can&#39;t be encoded in the immediate fields of loads</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">// or stores.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// Outgoing function arguments must be at the bottom of the stack frame when</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// calling another function. If we do not have variable-sized stack objects, we</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// can allocate a &quot;reserved call frame&quot; area at the bottom of the local</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">// variable area, large enough for all outgoing calls. If we do have VLAs, then</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// the stack pointer must be decremented and incremented around each call to</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// make space for the arguments below the VLAs.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// FIXME: also explain the redzone concept.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// An example of the prologue:</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//     .globl __foo</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">//     .align 2</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//  __foo:</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">// Ltmp0:</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">//     .cfi_startproc</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">//     .cfi_personality 155, ___gxx_personality_v0</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// Leh_func_begin:</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">//     .cfi_lsda 16, Lexception33</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">//     stp  xa,bx, [sp, -#offset]!</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">//     ...</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//     stp  x28, x27, [sp, #offset-32]</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">//     stp  fp, lr, [sp, #offset-16]</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//     add  fp, sp, #offset - 16</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">//     sub  sp, sp, #1360</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// The Stack:</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">//       +-------------------------------------------+</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// 10000 | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">// 10004 | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">//       +-------------------------------------------+</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">// 10008 | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// 1000c | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//       +===========================================+</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// 10010 |                X28 Register               |</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">// 10014 |                X28 Register               |</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">//       +-------------------------------------------+</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// 10018 |                X27 Register               |</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// 1001c |                X27 Register               |</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">//       +===========================================+</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// 10020 |                Frame Pointer              |</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">// 10024 |                Frame Pointer              |</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">//       +-------------------------------------------+</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// 10028 |                Link Register              |</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// 1002c |                Link Register              |</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">//       +===========================================+</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// 10030 | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">// 10034 | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">//       +-------------------------------------------+</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// 10038 | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// 1003c | ........ | ........ | ........ | ........ |</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">//       +-------------------------------------------+</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//     [sp] = 10030        ::    &gt;&gt;initial value&lt;&lt;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">//     sp = 10020          ::  stp fp, lr, [sp, #-16]!</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">//     fp = sp == 10020    ::  mov fp, sp</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">//     [sp] == 10020       ::  stp x28, x27, [sp, #-16]!</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">//     sp == 10010         ::    &gt;&gt;final value&lt;&lt;</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// The frame pointer (w29) points to address 10020. If we use an offset of</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">// &#39;16&#39; from &#39;w29&#39;, we get the CFI offsets of -8 for w30, -16 for w29, -24</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">// for w27, and -32 for w28:</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">//  Ltmp1:</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">//     .cfi_def_cfa w29, 16</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">//  Ltmp2:</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">//     .cfi_offset w30, -8</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">//  Ltmp3:</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">//     .cfi_offset w29, -16</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">//  Ltmp4:</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//     .cfi_offset w27, -24</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">//  Ltmp5:</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">//     .cfi_offset w28, -32</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64FrameLowering_8h.html">AArch64FrameLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64InstrInfo_8h.html">AArch64InstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64MachineFunctionInfo_8h.html">AArch64MachineFunctionInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64RegisterInfo_8h.html">AArch64RegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64Subtarget_8h.html">AArch64Subtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64TargetMachine_8h.html">AArch64TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64AddressingModes_8h.html">MCTargetDesc/AArch64AddressingModes.h</a>&quot;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64MCTargetDesc_8h.html">MCTargetDesc/AArch64MCTargetDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScopeExit_8h.html">llvm/ADT/ScopeExit.h</a>&quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LivePhysRegs_8h.html">llvm/CodeGen/LivePhysRegs.h</a>&quot;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstr_8h.html">llvm/CodeGen/MachineInstr.h</a>&quot;</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineMemOperand_8h.html">llvm/CodeGen/MachineMemOperand.h</a>&quot;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineModuleInfo_8h.html">llvm/CodeGen/MachineModuleInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineOperand_8h.html">llvm/CodeGen/MachineOperand.h</a>&quot;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegisterScavenging_8h.html">llvm/CodeGen/RegisterScavenging.h</a>&quot;</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WinEHFuncInfo_8h.html">llvm/CodeGen/WinEHFuncInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallingConv_8h.html">llvm/IR/CallingConv.h</a>&quot;</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugLoc_8h.html">llvm/IR/DebugLoc.h</a>&quot;</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCAsmInfo_8h.html">llvm/MC/MCAsmInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCDwarf_8h.html">llvm/MC/MCDwarf.h</a>&quot;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOptions_8h.html">llvm/Target/TargetOptions.h</a>&quot;</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">  236</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;frame-info&quot;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a7f9557a8b626961cb7c91e8a94b6d0c5">EnableRedZone</a>(<span class="stringliteral">&quot;aarch64-redzone&quot;</span>,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;enable use of redzone on AArch64&quot;</span>),</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                   <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#a2caf1b89c0c90afebe4a20e9d1de0e81">ReverseCSRRestoreSeq</a>(<span class="stringliteral">&quot;reverse-csr-restore-seq&quot;</span>,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                         <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;reverse the CSR restore sequence&quot;</span>),</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                         <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AArch64FrameLowering_8cpp.html#aa35f77c232647ae41f22de0aff7f19a6">StackTaggingMergeSetTag</a>(</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="stringliteral">&quot;stack-tagging-merge-settag&quot;</span>,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;merge settag instruction in function epilog&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a2e2b4e0cd0da3e30473b2d4ada9548bf">OrderFrameObjects</a>(<span class="stringliteral">&quot;aarch64-order-frame-objects&quot;</span>,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;sort stack allocations&quot;</span>),</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                       <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a033144966b9b009bef9482f378ce8bd1">EnableHomogeneousPrologEpilog</a>(</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="stringliteral">&quot;homogeneous-prolog-epilog&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Emit homogeneous prologue and epilogue for the size &quot;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;             <span class="stringliteral">&quot;optimization (default = off)&quot;</span>));</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumRedZoneFunctions, <span class="stringliteral">&quot;Number of functions using red zone&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// Returns how much of the incoming argument stack area (in bytes) we should</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/// clean up in an epilogue. For the C calling convention this will be 0, for</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/// guaranteed tail call conventions it can be positive (a normal return or a</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// tail call to a function that uses less stack space for arguments) or</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// negative (for a tail call to a function that needs more stack space than us</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/// for arguments).</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a01f6c42979a72dd229c03417e00f7f96">  269</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> int64_t <a class="code" href="AArch64FrameLowering_8cpp.html#a01f6c42979a72dd229c03417e00f7f96">getArgumentStackToRestore</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab8d7b8ff6803133d567fd4240e6364ce">getLastNonDebugInstr</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordtype">bool</span> IsTailCallReturn = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() != <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">unsigned</span> RetOpcode = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    IsTailCallReturn = RetOpcode == AArch64::TCRETURNdi ||</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                       RetOpcode == AArch64::TCRETURNri ||</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                       RetOpcode == AArch64::TCRETURNriBTI;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  int64_t ArgumentPopSize = 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">if</span> (IsTailCallReturn) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;StackAdjust = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// For a tail-call in a callee-pops-arguments environment, some or all of</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// the stack may actually be in use for the call&#39;s arguments, this is</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// calculated during LowerCall and consumed here...</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    ArgumentPopSize = StackAdjust.<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// ... otherwise the amount to pop is *all* of the argument space,</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// conveniently stored in the MachineFunctionInfo by</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// LowerFormalArguments. This will, of course, be zero for the C calling</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// convention.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    ArgumentPopSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a3d962df55ff4ce124096ee9501e121c8">getArgumentStackToRestore</a>();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">return</span> ArgumentPopSize;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd">produceCompactUnwindFrame</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443">needsShadowCallStackPrologueEpilogue</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">/// Returns true if a homogeneous prolog or epilog code can be emitted</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">/// for the size optimization. If possible, a frame helper call is injected.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/// When Exit block is given, this check is for epilog.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AArch64FrameLowering::homogeneousPrologEpilog(</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Exit)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span> (!MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">hasMinSize</a>())</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64FrameLowering_8cpp.html#a033144966b9b009bef9482f378ce8bd1">EnableHomogeneousPrologEpilog</a>)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a2caf1b89c0c90afebe4a20e9d1de0e81">ReverseCSRRestoreSeq</a>)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a7f9557a8b626961cb7c91e8a94b6d0c5">EnableRedZone</a>)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// TODO: Window is supported yet.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// TODO: SVE is not supported yet.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(MF))</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Bail on stack adjustment needed on return for simplicity.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *RegInfo = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() || RegInfo-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">hasStackRealignment</a>(MF))</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (Exit &amp;&amp; <a class="code" href="AArch64FrameLowering_8cpp.html#a01f6c42979a72dd229c03417e00f7f96">getArgumentStackToRestore</a>(MF, *Exit))</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/// Returns true if CSRs should be paired.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AArch64FrameLowering::producePairRegisters(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd">produceCompactUnwindFrame</a>(MF) || homogeneousPrologEpilog(MF);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/// This is the biggest offset to the stack pointer we can encode in aarch64</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">/// instructions (without using a separate calculation and a temp register).</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">/// Note that the exception here are vector stores/loads which cannot encode any</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/// displacements (see estimateRSStackSizeLimit(), isAArch64FrameOffsetLegal()).</span></div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a149e6ac957dbd4ac7a2d1b0b01b30bdf">  346</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a149e6ac957dbd4ac7a2d1b0b01b30bdf">DefaultSafeSPDisplacement</a> = 255;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/// Look at each instruction that references stack frames and return the stack</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">/// size limit beyond which some of these instructions will require a scratch</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/// register during their expansion later.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#ac3ad986bc12b8c9ef4ebf86b4ed7b3c3">  351</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AArch64FrameLowering_8cpp.html#ac3ad986bc12b8c9ef4ebf86b4ed7b3c3">estimateRSStackSizeLimit</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// FIXME: For now, just conservatively guestimate based on unscaled indexing</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// range. We&#39;ll end up allocating an unnecessary spill slot a lot, but</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// realistically that&#39;s not a big deal at this stage of the game.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugInstr() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isPseudo() ||</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AArch64::ADDXri ||</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AArch64::ADDSXri)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (!MO.isFI())</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a18dec717578f39bfcff50e325c2d27c5">isAArch64FrameOffsetLegal</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>) ==</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="namespacellvm.html#a3d42df7595bb7da318e52023ffe95226afb5cb35207b915f8db3811db32920094">AArch64FrameOffsetCannotUpdate</a>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a149e6ac957dbd4ac7a2d1b0b01b30bdf">DefaultSafeSPDisplacement</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">TargetStackID::Value</a></div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a4a43990f48635e236888ab40daf04f2c">  377</a></span>&#160;<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a4a43990f48635e236888ab40daf04f2c">AArch64FrameLowering::getStackIDForScalableVectors</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">/// Returns the size of the fixed object area (allocated next to sp on entry)</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">/// On Win64 this may include a var args area and an UnwindHelp object for EH.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">  383</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">getFixedObjectSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI, <span class="keywordtype">bool</span> IsWin64,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                   <span class="keywordtype">bool</span> IsFunclet) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (!IsWin64 || IsFunclet) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a1e887116bba8ca08bd717cbf2cbd1ac6">getTailCallReservedStack</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a1e887116bba8ca08bd717cbf2cbd1ac6">getTailCallReservedStack</a>() != 0)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;cannot generate ABI-changing tail call for Win64&quot;</span>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Var args are stored here in the primary function.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> VarArgsArea = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aae1cc37c03dc88bd71db86b6180b9d71">getVarArgsGPRSize</a>();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// To support EH funclets we allocate an UnwindHelp object</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> UnwindHelpObject = (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>() ? 8 : 0);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VarArgsArea + UnwindHelpObject, 16);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">/// Returns the size of the entire SVE stackframe (calleesaves + spills).</span></div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">  400</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a3bb61639d8566c8d12f66c562d948bef">StackOffset::getScalable</a>((int64_t)AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a7b316ba6e060bc850312c3d294130878">getStackSizeSVE</a>());</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">  405</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">AArch64FrameLowering::canUseRedZone</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64FrameLowering_8cpp.html#a7f9557a8b626961cb7c91e8a94b6d0c5">EnableRedZone</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// Don&#39;t use the red zone if the function explicitly asks us not to.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// This is typically used for kernel code.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> RedZoneSize =</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#aa4c9f6d9092cf5ca3819973f4b297050">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1AArch64TargetLowering.html#aa4502ed00aa357af2b923730584885d7">getRedZoneSize</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>());</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (!RedZoneSize)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumBytes = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">return</span> !(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">hasCalls</a>() || <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) || NumBytes &gt; RedZoneSize ||</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;           <a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(MF));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/// hasFP - Return true if the specified function should have a dedicated frame</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">/// pointer register.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">  427</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">AArch64FrameLowering::hasFP</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *RegInfo = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// Win64 EH requires a frame pointer if funclets are present, as the locals</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// are accessed off the frame pointer in both the parent function and the</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// funclets.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>())</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Retain behavior of always omitting the FP for leaf functions when possible.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#aad0fc1de8197ddf2c49346c5d92a2bec">DisableFramePointerElim</a>(MF))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a32125253541ab2e7ec5bbe550ecc2d0c">isFrameAddressTaken</a>() ||</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#aa7d9e2f26e4c8b32f51c455b220ce13c">hasStackMap</a>() || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a503a8cb169aa29ac907c218692087db3">hasPatchPoint</a>() ||</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      RegInfo-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">hasStackRealignment</a>(MF))</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// With large callframes around we may need to use FP to access the scavenging</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// emergency spillslot.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// Unfortunately some calls to hasFP() like machine verifier -&gt;</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// getReservedReg() -&gt; hasFP in the middle of global isel are too early</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// to know the max call frame size. Hopefully conservatively returning &quot;true&quot;</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// in those cases is fine.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// DefaultSafeSPDisplacement is fine as we only emergency spill GP regs.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">if</span> (!MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a99cdf1b99c0f1b7e1bf2111aa7d2eaa3">isMaxCallFrameSizeComputed</a>() ||</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac50604920b4866e09017dfff36632593">getMaxCallFrameSize</a>() &gt; <a class="code" href="AArch64FrameLowering_8cpp.html#a149e6ac957dbd4ac7a2d1b0b01b30bdf">DefaultSafeSPDisplacement</a>)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// hasReservedCallFrame - Under normal circumstances, when a frame pointer is</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">/// not required, we reserve argument space for call sites in the function</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">/// immediately on entry to the current function.  This eliminates the need for</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">/// add/sub sp brackets around call sites.  Returns true if the call frame is</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">/// included as part of the stack frame.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span></div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a6d15a3346f663d13e5b9061da4d56ddc">  463</a></span>&#160;<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a6d15a3346f663d13e5b9061da4d56ddc">AArch64FrameLowering::hasReservedCallFrame</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">return</span> !MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a27a80b2fc0f8820ecab9d99312bb4607">  467</a></span>&#160;<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a27a80b2fc0f8820ecab9d99312bb4607">AArch64FrameLowering::eliminateCallFramePseudoInstr</a>(</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> =</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<span class="keyword">&gt;</span>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>());</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordtype">bool</span> IsDestroy = Opc == <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getCallFrameDestroyOpcode();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CalleePopAmount = IsDestroy ? <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1).getImm() : 0;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a6d15a3346f663d13e5b9061da4d56ddc">hasReservedCallFrame</a>(MF)) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    int64_t Amount = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0).getImm();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    Amount = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(Amount, <a class="code" href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">getStackAlign</a>());</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (!IsDestroy)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      Amount = -Amount;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// N.b. if CalleePopAmount is valid but zero (i.e. callee would pop, but it</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// doesn&#39;t have to pop anything), then the first operand will be zero too so</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// this adjustment is a no-op.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (CalleePopAmount == 0) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// FIXME: in-function stack adjustment for calls is limited to 24-bits</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">// because there&#39;s no guaranteed temporary register available.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">// ADD/SUB (immediate) has only LSL #0 and LSL #12 available.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">// 1) For offset &lt;= 12-bit, we use LSL #0</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="comment">// 2) For 12-bit &lt;= offset &lt;= 24-bit, we use two instructions. One uses</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// LSL #0, and the other uses LSL #12.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">// Most call frames will be allocated at the start of a function so</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="comment">// this is OK, but it is a limitation that needs dealing with.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Amount &gt; -0xffffff &amp;&amp; Amount &lt; 0xffffff &amp;&amp; <span class="stringliteral">&quot;call frame too large&quot;</span>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                      <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(Amount), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CalleePopAmount != 0) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// If the calling convention demands that the callee pops arguments from the</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// stack, we want to add it back if we have a reserved call frame.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CalleePopAmount &lt; 0xffffff &amp;&amp; <span class="stringliteral">&quot;call frame too large&quot;</span>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(-(int64_t)CalleePopAmount), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="keywordtype">void</span> AArch64FrameLowering::emitCalleeSavedGPRLocations(</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keyword">const</span> std::vector&lt;CalleeSavedInfo&gt; &amp;CSI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (CSI.empty())</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a> &amp;STI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = *STI.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *STI.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> : CSI) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">getStackID</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getFrameIdx()) == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.isSpilledToReg() &amp;&amp; <span class="stringliteral">&quot;Spilling to registers not implemented&quot;</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordtype">unsigned</span> DwarfReg = <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#a0a20b56d95a9020588d573b6f7340cd5">getDwarfRegNum</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getReg(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getFrameIdx()) - <a class="code" href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">getOffsetOfLocalArea</a>();</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="classllvm_1_1MCCFIInstruction.html#aea2b8a3efd6694a33452ed7e8716300e">MCCFIInstruction::createOffset</a>(<span class="keyword">nullptr</span>, DwarfReg, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="keywordtype">void</span> AArch64FrameLowering::emitCalleeSavedSVELocations(</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// Add callee saved registers to move list.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keyword">const</span> std::vector&lt;CalleeSavedInfo&gt; &amp;CSI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">if</span> (CSI.empty())</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a> &amp;STI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = *STI.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *STI.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> &amp;AFI = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> : CSI) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (!(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">getStackID</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getFrameIdx()) == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>))</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">// Not all unwinders may know about SVE registers, so assume the lowest</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// common demoninator.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.isSpilledToReg() &amp;&amp; <span class="stringliteral">&quot;Spilling to registers not implemented&quot;</span>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getReg();</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;<span class="keyword">&gt;</span>(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>).regNeedsCFI(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a3bb61639d8566c8d12f66c562d948bef">StackOffset::getScalable</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getFrameIdx())) -</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(AFI.<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>(MFI));</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="namespacellvm.html#a2cd95c4fd57b9c1804bc70a37ac24574">createCFAOffset</a>(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a2faad2c2b19346a6b6d4e497e3619169">  580</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a2faad2c2b19346a6b6d4e497e3619169">insertCFISameValue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;Desc, <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                               <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                               <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPt,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                               <span class="keywordtype">unsigned</span> DwarfReg) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordtype">unsigned</span> CFIIndex =</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#a4244b5097aed19eb6bcec6a9905f3cd3">MCCFIInstruction::createSameValue</a>(<span class="keyword">nullptr</span>, DwarfReg));</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(), Desc).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a5c22366d9b2f68fba8285148c794a74d">  589</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a5c22366d9b2f68fba8285148c794a74d">AArch64FrameLowering::resetCFIToInitialState</a>(</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *Subtarget.getInstrInfo();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> =</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;<span class="keyword">&gt;</span>(*Subtarget.getRegisterInfo());</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MFI = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;CFIDesc = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::CFI_INSTRUCTION);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// Reset the CFA to `SP + 0`.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPt = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">MCCFIInstruction::cfiDefCfa</a>(</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keyword">nullptr</span>, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#a0a20b56d95a9020588d573b6f7340cd5">getDwarfRegNum</a>(AArch64::SP, <span class="keyword">true</span>), 0));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CFIDesc).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// Flip the RA sign state.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">if</span> (MFI.shouldSignReturnAddress(MF)) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#add1bf26f643dc758cdfb148eed30d0b3">MCCFIInstruction::createNegateRAState</a>(<span class="keyword">nullptr</span>));</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CFIDesc).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// Shadow call stack uses X18, reset it.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443">needsShadowCallStackPrologueEpilogue</a>(MF))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#a2faad2c2b19346a6b6d4e497e3619169">insertCFISameValue</a>(CFIDesc, MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                       <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#a0a20b56d95a9020588d573b6f7340cd5">getDwarfRegNum</a>(AArch64::X18, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// Emit .cfi_same_value for callee-saved registers.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keyword">const</span> std::vector&lt;CalleeSavedInfo&gt; &amp;CSI =</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> : CSI) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getReg();</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.regNeedsCFI(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#a2faad2c2b19346a6b6d4e497e3619169">insertCFISameValue</a>(CFIDesc, MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                       <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#a0a20b56d95a9020588d573b6f7340cd5">getDwarfRegNum</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a035d6de6da7186bb6a0a180c617c8a83">  631</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a035d6de6da7186bb6a0a180c617c8a83">emitCalleeSavedRestores</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                    <span class="keywordtype">bool</span> SVE) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keyword">const</span> std::vector&lt;CalleeSavedInfo&gt; &amp;CSI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">if</span> (CSI.empty())</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a> &amp;STI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>();</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = *STI.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *STI.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> : CSI) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe2c24a8dc2fb979e8e54e15f088169ca8a880ec3350518f78cffab1bd18e97ba">SVE</a> !=</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">getStackID</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getFrameIdx()) == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>))</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getReg();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe2c24a8dc2fb979e8e54e15f088169ca8a880ec3350518f78cffab1bd18e97ba">SVE</a> &amp;&amp;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        !<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;<span class="keyword">&gt;</span>(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>).regNeedsCFI(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#a3828c9fbb57095c51896fb2499e60044">MCCFIInstruction::createRestore</a>(</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keyword">nullptr</span>, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#a0a20b56d95a9020588d573b6f7340cd5">getDwarfRegNum</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getReg(), <span class="keyword">true</span>)));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="keywordtype">void</span> AArch64FrameLowering::emitCalleeSavedGPRRestores(</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a035d6de6da7186bb6a0a180c617c8a83">emitCalleeSavedRestores</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="keywordtype">void</span> AArch64FrameLowering::emitCalleeSavedSVERestores(</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a035d6de6da7186bb6a0a180c617c8a83">emitCalleeSavedRestores</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#ad53f28bfbc4b97b70d443fddefedbde6">  674</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="AArch64FrameLowering_8cpp.html#ad53f28bfbc4b97b70d443fddefedbde6">getRegisterOrZero</a>(<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">bool</span> HasSVE) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.id()) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// The called routine is expected to preserve r19-r28</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// r29 and r30 are used as frame pointer and link register resp.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// GPRs</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="preprocessor">#define CASE(n)                                                                \</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">  case AArch64::W##n:                                                          \</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="preprocessor">  case AArch64::X##n:                                                          \</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">    return AArch64::X##n</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(0);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(1);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(2);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(3);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(4);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(5);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(6);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(7);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(8);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(9);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(10);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(11);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(12);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(13);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(14);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(15);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(16);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(17);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(18);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#undef CASE</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// FPRs</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="preprocessor">#define CASE(n)                                                                \</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="preprocessor">  case AArch64::B##n:                                                          \</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="preprocessor">  case AArch64::H##n:                                                          \</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="preprocessor">  case AArch64::S##n:                                                          \</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="preprocessor">  case AArch64::D##n:                                                          \</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">  case AArch64::Q##n:                                                          \</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="preprocessor">    return HasSVE ? AArch64::Z##n : AArch64::Q##n</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(0);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(1);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(2);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(3);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(4);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(5);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(6);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(7);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(8);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(9);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(10);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(11);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(12);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(13);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(14);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(15);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(16);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(17);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(18);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(19);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(20);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(21);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(22);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(23);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(24);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(25);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(26);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(27);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(28);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(29);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(30);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a>(31);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="preprocessor">#undef CASE</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="keywordtype">void</span> AArch64FrameLowering::emitZeroCallUsedRegs(<a class="code" href="classllvm_1_1BitVector.html">BitVector</a> RegsToZero,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                                                <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="comment">// Insertion point.</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// Fake a debug loc.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;STI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = *STI.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> GPRsToZero(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#af946f316ed42f8b5eb99735a3b587ab5">getNumRegs</a>());</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> FPRsToZero(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1MCRegisterInfo.html#af946f316ed42f8b5eb99735a3b587ab5">getNumRegs</a>());</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordtype">bool</span> HasSVE = STI.hasSVE();</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : RegsToZero.<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>()) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>.<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a60fda2b22a00a8667e646fa8701d85b0">isGeneralPurposeRegister</a>(MF, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="comment">// For GPRs, we only care to clear out the 64-bit register.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> XReg = <a class="code" href="AArch64FrameLowering_8cpp.html#ad53f28bfbc4b97b70d443fddefedbde6">getRegisterOrZero</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, HasSVE))</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        GPRsToZero.set(XReg);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AArch64::FPR128RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;               AArch64::FPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;               AArch64::FPR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;               AArch64::FPR16RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;               AArch64::FPR8RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="comment">// For FPRs,</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> XReg = <a class="code" href="AArch64FrameLowering_8cpp.html#ad53f28bfbc4b97b70d443fddefedbde6">getRegisterOrZero</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, HasSVE))</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        FPRsToZero.set(XReg);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *STI.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">getInstrInfo</a>();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// Zero out GPRs.</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : GPRsToZero.set_bits())</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::MOVi64imm), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// Zero out FP/vector registers.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : FPRsToZero.set_bits())</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (HasSVE)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::DUP_ZI_D), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::MOVIv2d_ns), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (HasSVE) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> PReg :</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         {AArch64::P0, AArch64::P1, <a class="code" href="README-SSE_8txt.html#ae7fc2fb0e2d536219c1193f1a178e7db">AArch64::P2</a>, AArch64::P3, AArch64::P4,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          AArch64::P5, AArch64::P6, AArch64::P7, AArch64::P8, AArch64::P9,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;          AArch64::P10, AArch64::P11, AArch64::P12, AArch64::P13, AArch64::P14,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;          AArch64::P15}) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">if</span> (RegsToZero[PReg])</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(<a class="code" href="namespacellvm_1_1HexagonISD.html#ab37bf6c49bc26c43ddd958218f63ba00ab5369d4484aebe3d84017e4cb5d9dc29">AArch64::PFALSE</a>), PReg);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">// Find a scratch register that we can use at the start of the prologue to</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">// re-align the stack pointer.  We avoid using callee-save registers since they</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">// may appear to be free when this is called from canUseAsPrologue (during</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">// shrink wrapping), but then no longer be free when this is called from</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">// emitPrologue.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">// FIXME: This is a bit conservative, since in the above case we could use one</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">// of the callee-save registers as a scratch temp to re-align the stack pointer,</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">// but we would then have to make sure that we were in fact saving at least one</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">// callee-save register in the prologue, which is additional complexity that</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">// doesn&#39;t seem worth the benefit.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a878af31656730eaf20a0686911cbe017">  822</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a878af31656730eaf20a0686911cbe017">findScratchNonCalleeSaveRegister</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// If MBB is an entry block, use X9 as the scratch register</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (&amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">front</a>() == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">return</span> AArch64::X9;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = *Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="classllvm_1_1LivePhysRegs.html">LivePhysRegs</a> LiveRegs(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  LiveRegs.<a class="code" href="classllvm_1_1LivePhysRegs.html#a972dc07ee343dfa21fc84131ada0e688">addLiveIns</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// Mark callee saved registers as used so we will not choose them.</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacellvm.html#a298184c9a0cd665d7cfc55f6a59204a4">MCPhysReg</a> *CSRegs = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a8ae9c5d17b40aa7be0189dd4f12dc315">getCalleeSavedRegs</a>();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; CSRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    LiveRegs.<a class="code" href="classllvm_1_1LivePhysRegs.html#adbf2afbb346e40106f344191309324fc">addReg</a>(CSRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// Prefer X9 since it was historically used for the prologue scratch reg.</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">if</span> (LiveRegs.<a class="code" href="classllvm_1_1LivePhysRegs.html#a5c249924553aa84c5927b2335c490583">available</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, AArch64::X9))</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">return</span> AArch64::X9;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : AArch64::GPR64RegClass) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (LiveRegs.<a class="code" href="classllvm_1_1LivePhysRegs.html#a5c249924553aa84c5927b2335c490583">available</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">return</span> AArch64::NoRegister;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a2be9d35aaace9716441da5714f048af9">  851</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a2be9d35aaace9716441da5714f048af9">AArch64FrameLowering::canUseAsPrologue</a>(</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TmpMBB = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<span class="keyword">&gt;</span>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *RegInfo = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// Don&#39;t need a scratch register if we&#39;re not going to re-align the stack.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">if</span> (!RegInfo-&gt;hasStackRealignment(*MF))</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">// Otherwise, we can use any block as long as it has a scratch register</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// available.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a878af31656730eaf20a0686911cbe017">findScratchNonCalleeSaveRegister</a>(TmpMBB) != AArch64::NoRegister;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">  866</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">windowsRequiresStackProbe</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                                      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackSizeInBytes) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (!Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a05fb81a3747dd4f76894a66c574cf99e">isTargetWindows</a>())</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// TODO: When implementing stack protectors, take that into account</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// for the probe threshold.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordtype">unsigned</span> StackProbeSize =</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getFnAttributeAsParsedInteger(<span class="stringliteral">&quot;stack-probe-size&quot;</span>, 4096);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keywordflow">return</span> (StackSizeInBytes &gt;= StackProbeSize) &amp;&amp;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(<span class="stringliteral">&quot;no-stack-arg-probe&quot;</span>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">  880</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">return</span> MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>() &amp;&amp;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;         <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.needsUnwindTableEntry();</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="keywordtype">bool</span> AArch64FrameLowering::shouldCombineCSRLocalStackBump(</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackBumpBytes)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *RegInfo = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">if</span> (homogeneousPrologEpilog(MF))</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>() == 0)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// For WinCFI, if optimizing for size, prefer to not combine the stack bump</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// (to force a stp with predecrement) to match the packed unwind format,</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// provided that there actually are any callee saved registers to merge the</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// decrement with.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// This is potentially marginally slower, but allows using the packed</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// unwind format for functions that both have a local area and callee saved</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// registers. Using the packed unwind format notably reduces the size of</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// the unwind info.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF) &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>() &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>())</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// 512 is the maximum immediate for stp/ldp that will be used for</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// callee-save save/restores</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">if</span> (StackBumpBytes &gt;= 512 || <a class="code" href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">windowsRequiresStackProbe</a>(MF, StackBumpBytes))</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">if</span> (MFI.hasVarSizedObjects())</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">if</span> (RegInfo-&gt;hasStackRealignment(MF))</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// This isn&#39;t strictly necessary, but it simplifies things a bit since the</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// current RedZone handling code assumes the SP is adjusted by the</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// callee-save save/restore code.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">canUseRedZone</a>(MF))</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// When there is an SVE area on the stack, always allocate the</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">// callee-saves and spills/locals separately.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(MF))</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="keywordtype">bool</span> AArch64FrameLowering::shouldCombineCSRLocalStackBumpInEpilogue(</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <span class="keywordtype">unsigned</span> StackBumpBytes)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">if</span> (!shouldCombineCSRLocalStackBump(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>(), StackBumpBytes))</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">empty</a>())</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="comment">// Disable combined SP bump if the last instruction is an MTE tag store. It</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// is almost always better to merge SP adjustment into those instructions.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> LastI = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Begin = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keywordflow">while</span> (LastI != Begin) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    --LastI;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">if</span> (LastI-&gt;isTransient())</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> (!LastI-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>))</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">switch</span> (LastI-&gt;getOpcode()) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">case</span> AArch64::STGloop:</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">case</span> AArch64::STZGloop:</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">case</span> AArch64::STGOffset:</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">case</span> AArch64::STZGOffset:</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">case</span> AArch64::ST2GOffset:</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="keywordflow">case</span> AArch64::STZ2GOffset:</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unreachable&quot;</span>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">// Given a load or a store instruction, generate an appropriate unwinding SEH</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">// code on Windows.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a7f43397146b3eee4bcd4ff73ec27335f">  970</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a7f43397146b3eee4bcd4ff73ec27335f">InsertSEH</a>(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                                             <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">MachineInstr::MIFlag</a> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode();</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordtype">unsigned</span> ImmIdx = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getNumOperands() - 1;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(ImmIdx).getImm();</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *RegInfo = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;No SEH Opcode for this instruction&quot;</span>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPDpost:</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = -<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">case</span> AArch64::STPDpre: {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordtype">unsigned</span> Reg0 = RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordtype">unsigned</span> Reg1 = RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(2).getReg());</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveFRegP_X))</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Reg0)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Reg1)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPXpost:</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = -<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">case</span> AArch64::STPXpre: {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Reg0 = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Reg1 = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(2).getReg();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (Reg0 == AArch64::FP &amp;&amp; Reg1 == AArch64::LR)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveFPLR_X))</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveRegP_X))</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(RegInfo-&gt;getSEHRegNum(Reg0))</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(RegInfo-&gt;getSEHRegNum(Reg1))</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRDpost:</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = -<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">case</span> AArch64::STRDpre: {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveFReg_X))</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRXpost:</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = -<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keywordflow">case</span> AArch64::STRXpre: {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> =  RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveReg_X))</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>)</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">case</span> AArch64::STPDi:</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPDi: {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordtype">unsigned</span> Reg0 =  RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(0).getReg());</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordtype">unsigned</span> Reg1 =  RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveFRegP))</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Reg0)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Reg1)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">case</span> AArch64::STPXi:</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPXi: {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Reg0 = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Reg1 = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">if</span> (Reg0 == AArch64::FP &amp;&amp; Reg1 == AArch64::LR)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveFPLR))</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveRegP))</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(RegInfo-&gt;getSEHRegNum(Reg0))</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(RegInfo-&gt;getSEHRegNum(Reg1))</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">case</span> AArch64::STRXui:</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRXui: {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(0).getReg());</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveReg))</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="keywordflow">case</span> AArch64::STRDui:</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRDui: {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegInfo-&gt;getSEHRegNum(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(0).getReg());</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_SaveFReg))</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * 8)</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">insertAfter</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, MIB);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;}</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">// Fix up the SEH opcode associated with the save/restore instruction.</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a76635e63bbdb187ca4030f7570158552"> 1090</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a76635e63bbdb187ca4030f7570158552">fixupSEHOpcode</a>(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                           <span class="keywordtype">unsigned</span> LocalStackSize) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *ImmOpnd = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordtype">unsigned</span> ImmIdx = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getNumOperands() - 1;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Fix the offset in the SEH instruction&quot;</span>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keywordflow">case</span> AArch64::SEH_SaveFPLR:</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">case</span> AArch64::SEH_SaveRegP:</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordflow">case</span> AArch64::SEH_SaveReg:</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">case</span> AArch64::SEH_SaveFRegP:</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordflow">case</span> AArch64::SEH_SaveFReg:</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    ImmOpnd = &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(ImmIdx);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">if</span> (ImmOpnd)</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    ImmOpnd-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">setImm</a>(ImmOpnd-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>() + LocalStackSize);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">// Convert callee-save register save/restore instruction to do stack pointer</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">// decrement/increment to allocate/deallocate the callee-save stack area by</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">// converting store/load to use pre/post increment version.</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a73f427af3525340f74d7e85b984b82d6"> 1112</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64FrameLowering_8cpp.html#a73f427af3525340f74d7e85b984b82d6">convertCalleeSaveRestoreToSPPrePostIncDec</a>(</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <span class="keywordtype">int</span> CSStackSizeInc,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordtype">bool</span> NeedsWinCFI, <span class="keywordtype">bool</span> *HasWinCFI, <span class="keywordtype">bool</span> EmitCFI,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">MachineInstr::MIFlag</a> FrameFlag = <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordtype">int</span> CFAOffset = 0) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordtype">unsigned</span> NewOpc;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected callee-save save/restore opcode!&quot;</span>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keywordflow">case</span> AArch64::STPXi:</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    NewOpc = AArch64::STPXpre;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">case</span> AArch64::STPDi:</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    NewOpc = AArch64::STPDpre;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">case</span> AArch64::STPQi:</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    NewOpc = AArch64::STPQpre;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordflow">case</span> AArch64::STRXui:</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    NewOpc = AArch64::STRXpre;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordflow">case</span> AArch64::STRDui:</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    NewOpc = AArch64::STRDpre;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">case</span> AArch64::STRQui:</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    NewOpc = AArch64::STRQpre;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPXi:</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    NewOpc = AArch64::LDPXpost;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPDi:</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    NewOpc = AArch64::LDPDpost;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPQi:</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    NewOpc = AArch64::LDPQpost;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRXui:</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    NewOpc = AArch64::LDRXpost;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRDui:</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    NewOpc = AArch64::LDRDpost;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRQui:</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    NewOpc = AArch64::LDRQpost;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// Get rid of the SEH code associated with the old instruction.</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keyword">auto</span> SEH = std::next(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64InstrInfo.html#a52619cc1f9c5c3029a03a6c956b32595">AArch64InstrInfo::isSEHInstruction</a>(*SEH))</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      SEH-&gt;eraseFromParent();</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> Scale = <a class="code" href="classllvm_1_1TypeSize.html#a06e32f822cc82701a5652331bccab467">TypeSize::Fixed</a>(1);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  int64_t MinOffset, MaxOffset;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<span class="keyword">&gt;</span>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>)-&gt;getMemOpInfo(</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      NewOpc, Scale, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>, MinOffset, MaxOffset);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  (void)<a class="code" href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a> &amp;&amp; <span class="stringliteral">&quot;unknown load/store opcode&quot;</span>);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">// If the first store isn&#39;t right where we want SP then we can&#39;t fold the</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// update in so create a normal arithmetic instruction instead.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getNumOperands() - 1).getImm() != 0 ||</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      CSStackSizeInc &lt; MinOffset || CSStackSizeInc &gt; MaxOffset) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(CSStackSizeInc), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, FrameFlag,</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">nullptr</span>, EmitCFI,</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(CFAOffset));</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">return</span> std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(NewOpc));</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::SP, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Copy all operands other than the immediate offset.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordtype">unsigned</span> OpndIdx = 0;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> OpndEnd = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getNumOperands() - 1; OpndIdx &lt; OpndEnd;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;       ++OpndIdx)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(OpndIdx));</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(OpndIdx).getImm() == 0 &amp;&amp;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;         <span class="stringliteral">&quot;Unexpected immediate offset in first/last callee-save save/restore &quot;</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;         <span class="stringliteral">&quot;instruction!&quot;</span>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(OpndIdx - 1).getReg() == AArch64::SP &amp;&amp;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;         <span class="stringliteral">&quot;Unexpected base register in callee-save save/restore instruction!&quot;</span>);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CSStackSizeInc % Scale == 0);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(CSStackSizeInc / (<span class="keywordtype">int</span>)Scale);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getFlags());</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a6d96c0781817d38b57f91432dd85d28f">setMemRefs</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;memoperands());</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// Generate a new SEH code that corresponds to the new instruction.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    *HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#a7f43397146b3eee4bcd4ff73ec27335f">InsertSEH</a>(*MIB, *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, FrameFlag);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">if</span> (EmitCFI) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(<span class="keyword">nullptr</span>, CFAOffset - CSStackSizeInc));</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(FrameFlag);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">return</span> std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>));</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">// Fixup callee-save register save/restore instructions to take into account</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">// combined SP bump by adding the local stack size to the stack offsets.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a69a17a573c98c5ac8ff9fedcc9099807"> 1226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a69a17a573c98c5ac8ff9fedcc9099807">fixupCalleeSaveRestoreStackOffset</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                                              <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LocalStackSize,</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                                              <span class="keywordtype">bool</span> NeedsWinCFI,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                                              <span class="keywordtype">bool</span> *HasWinCFI) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64InstrInfo.html#a52619cc1f9c5c3029a03a6c956b32595">AArch64InstrInfo::isSEHInstruction</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keywordtype">unsigned</span> Scale;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keywordflow">case</span> AArch64::STPXi:</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">case</span> AArch64::STRXui:</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordflow">case</span> AArch64::STPDi:</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keywordflow">case</span> AArch64::STRDui:</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPXi:</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRXui:</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPDi:</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRDui:</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    Scale = 8;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">case</span> AArch64::STPQi:</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="keywordflow">case</span> AArch64::STRQui:</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPQi:</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRQui:</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    Scale = 16;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected callee-save save/restore opcode!&quot;</span>);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keywordtype">unsigned</span> OffsetIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitOperands() - 1;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OffsetIdx - 1).getReg() == AArch64::SP &amp;&amp;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         <span class="stringliteral">&quot;Unexpected base register in callee-save save/restore instruction!&quot;</span>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// Last operand is immediate offset that needs fixing.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;OffsetOpnd = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OffsetIdx);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// All generated opcodes have scaled offsets.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocalStackSize % Scale == 0);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  OffsetOpnd.<a class="code" href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">setImm</a>(OffsetOpnd.<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>() + LocalStackSize / Scale);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    *HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keyword">auto</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = std::next(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;end() &amp;&amp; <span class="stringliteral">&quot;Expecting a valid instruction&quot;</span>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1AArch64InstrInfo.html#a52619cc1f9c5c3029a03a6c956b32595">AArch64InstrInfo::isSEHInstruction</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) &amp;&amp;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;           <span class="stringliteral">&quot;Expecting a SEH instruction&quot;</span>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#a76635e63bbdb187ca4030f7570158552">fixupSEHOpcode</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, LocalStackSize);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#abeed081f0f43c83f3fb2ae6304848628"> 1275</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#abeed081f0f43c83f3fb2ae6304848628">isTargetWindows</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">return</span> MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;().<a class="code" href="AArch64FrameLowering_8cpp.html#abeed081f0f43c83f3fb2ae6304848628">isTargetWindows</a>();</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;}</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment">// Convenience function to determine whether I is an SVE callee save.</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d"> 1280</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="keywordflow">case</span> AArch64::STR_ZXI:</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">case</span> AArch64::STR_PXI:</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keywordflow">case</span> AArch64::LDR_ZXI:</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">case</span> AArch64::LDR_PXI:</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>) ||</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443"> 1293</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443">needsShadowCallStackPrologueEpilogue</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>(),</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            [](<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>) { return Info.getReg() == AArch64::LR; }) &amp;&amp;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::ShadowCallStack)))</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">if</span> (!MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;().<a class="code" href="classllvm_1_1AArch64Subtarget.html#abebf776aea4ae4a420fd4a2c5f02cbbd">isXRegisterReserved</a>(18))</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Must reserve x18 to use shadow call stack&quot;</span>);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#ae5f813adf7cab5ad0f7a542b681ca95c"> 1306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#ae5f813adf7cab5ad0f7a542b681ca95c">emitShadowCallStackPrologue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                                        <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                                        <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> NeedsWinCFI,</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                                        <span class="keywordtype">bool</span> NeedsUnwindInfo) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// Shadow call stack prolog: str x30, [x18], #8</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::STRXpost))</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X18, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>)</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::LR)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X18)</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(8)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// This instruction also makes x18 live-in to the entry block.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(AArch64::X18);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI)</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">if</span> (NeedsUnwindInfo) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// Emit a CFI instruction that causes 8 to be subtracted from the value of</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// x18 when unwinding past this frame.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> CFIInst[] = {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        dwarf::DW_CFA_val_expression,</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        18, <span class="comment">// register</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        2,  <span class="comment">// length</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>(dwarf::DW_OP_breg18)),</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(-8) &amp; 0x7f, <span class="comment">// addend (sleb128)</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    };</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#ae450f408644d907ec3e4ea018f764a0b">MCCFIInstruction::createEscape</a>(</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(CFIInst, <span class="keyword">sizeof</span>(CFIInst))));</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;}</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a02cddefc96e08fba507c3d0eac7f6c1f"> 1345</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a02cddefc96e08fba507c3d0eac7f6c1f">emitShadowCallStackEpilogue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                                        <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                                        <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">// Shadow call stack epilog: ldr x30, [x18, #-8]!</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::LDRXpre))</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X18, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::LR, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>)</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X18)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(-8)</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#af1bf187d995b982c232e7c73bb45c832">needsAsyncDwarfUnwindInfo</a>(MF)) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex =</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#a3828c9fbb57095c51896fb2499e60044">MCCFIInstruction::createRestore</a>(<span class="keyword">nullptr</span>, 18));</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a566df1a4bd19d5e175f1d38c4a487f91"> 1367</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a566df1a4bd19d5e175f1d38c4a487f91">AArch64FrameLowering::emitPrologue</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *RegInfo = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">getInstrInfo</a>();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> &amp;MMI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>();</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keywordtype">bool</span> EmitCFI = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aaa6625e357c6806a89b36759ae16b630">needsDwarfUnwindInfo</a>(MF);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordtype">bool</span> HasFP = <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordtype">bool</span> HasWinCFI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keyword">auto</span> <a class="code" href="HTTPClient_8cpp.html#a0b91b2b50d54e38aa1e8e31e56c31357">Cleanup</a> = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { MF.<a class="code" href="classllvm_1_1MachineFunction.html#a330afa0baf556056f9c032480dd57347">setHasWinCFI</a>(HasWinCFI); });</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="keywordtype">bool</span> IsFunclet = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7d2f8efd82042b4cf611ba10e9e79ed0">isEHFuncletEntry</a>();</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// At this point, we&#39;re going to decide whether or not the function uses a</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">// redzone. In most cases, the function doesn&#39;t have a redzone so let&#39;s</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="comment">// assume that&#39;s false and set it to true in the case that there&#39;s a redzone.</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a81917a56aebf01a4df724caade1dfd80">setHasRedZone</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// Debug location must be unknown since the first debug location is used</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// to determine the end of the prologue.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MFnI = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443">needsShadowCallStackPrologueEpilogue</a>(MF))</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#ae5f813adf7cab5ad0f7a542b681ca95c">emitShadowCallStackPrologue</a>(*<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NeedsWinCFI,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                                MFnI.needsDwarfUnwindInfo(MF));</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">if</span> (MFnI.shouldSignReturnAddress(MF)) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">if</span> (MFnI.shouldSignWithBKey()) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::EMITBKEY))</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// No SEH opcode for this one; it doesn&#39;t materialize into an</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">// instruction on Windows.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(MFnI.shouldSignWithBKey() ? AArch64::PACIBSP</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                                               : AArch64::PACIASP))</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">if</span> (EmitCFI) {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="keywordtype">unsigned</span> CFIIndex =</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#add1bf26f643dc758cdfb148eed30d0b3">MCCFIInstruction::createNegateRAState</a>(<span class="keyword">nullptr</span>));</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_PACSignLR))</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">if</span> (EmitCFI &amp;&amp; MFnI.isMTETagged()) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::EMITMTETAGGED))</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// We signal the presence of a Swift extended frame to external tools by</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// storing FP with 0b0001 in bits 63:60. In normal userland operation a simple</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="comment">// ORR is sufficient, it is assumed a Swift kernel would initialize the TBI</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="comment">// bits so that is still true.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keywordflow">if</span> (HasFP &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">switch</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#a66a62a15c006f8bc55698e0bea465699">SwiftAsyncFramePointer</a>) {</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b">SwiftAsyncFramePointerMode::DeploymentBased</a>:</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keywordflow">if</span> (Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#afe7a4a37a90fa94396e12c3543339d15">swiftAsyncContextIsDynamicallySet</a>()) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="comment">// The special symbol below is absolute and has a *value* that can be</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="comment">// combined with the frame pointer to signal an extended frame.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(<a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19adfb5f0cc680a060e5ca88e6e923d7183">AArch64::LOADgot</a>), AArch64::X16)</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(<span class="stringliteral">&quot;swift_async_extendedFramePointerFlags&quot;</span>,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                               <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a4144c2ee93286fba09bd8f14fb11f27a">AArch64II::MO_GOT</a>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::ORRXrs), AArch64::FP)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(AArch64::FP)</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(AArch64::X16)</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a59137b132e07516767761d5decf7e252">isTargetILP32</a>() ? 32 : 0);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      [[fallthrough]];</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c">SwiftAsyncFramePointerMode::Always</a>:</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <span class="comment">// ORR x29, x29, #0x1000_0000_0000_0000</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::ORRXri), AArch64::FP)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(AArch64::FP)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0x1100)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c">SwiftAsyncFramePointerMode::Never</a>:</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="comment">// All calls are tail calls in GHC calling conv, and functions have no</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// prologue/epilogue.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda8e8dc64aad833bd23d07d3384522575e">CallingConv::GHC</a>)</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// Set tagged base pointer to the requested stack slot.</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// Ideally it should match SP value after prologue.</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  std::optional&lt;int&gt; TBPI = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ab1bcbdd777fab16bc7306fe213403753">getTaggedBasePointerIndex</a>();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">if</span> (TBPI)</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ac585fc64555950b121905c6d28306107">setTaggedBasePointerOffset</a>(-MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(*TBPI));</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ac585fc64555950b121905c6d28306107">setTaggedBasePointerOffset</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>());</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> &amp;SVEStackSize = <a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(MF);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="comment">// getStackSize() includes all the locals in its size calculation. We don&#39;t</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">// include these locals when computing the stack size of a funclet, as they</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// are allocated in the parent&#39;s stack frame and accessed via the frame</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// pointer from the funclet.  We only save the callee saved registers in the</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// funclet, which are really the callee saved registers of the parent</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// function, including the funclet.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  int64_t NumBytes = IsFunclet ? <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a97643b28151d68d2cec55176e739205d">getWinEHFuncletFrameSize</a>(MF)</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                               : MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">if</span> (!AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a839720705cb2401eb2e9dd30001e4ad5">hasStackFrame</a>() &amp;&amp; !<a class="code" href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">windowsRequiresStackProbe</a>(MF, NumBytes)) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!HasFP &amp;&amp; <span class="stringliteral">&quot;unexpected function without stack frame but with FP&quot;</span>);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SVEStackSize &amp;&amp;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;           <span class="stringliteral">&quot;unexpected function without stack frame but with SVE objects&quot;</span>);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// All of the stack allocation is for locals.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4761d8d142e4f5eca20e2a37fbd1375a">setLocalStackSize</a>(NumBytes);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (!NumBytes)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="comment">// REDZONE: If the stack size is less than 128 bytes, we don&#39;t need</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// to actually allocate.</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">canUseRedZone</a>(MF)) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a81917a56aebf01a4df724caade1dfd80">setHasRedZone</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      ++NumRedZoneFunctions;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                      <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(-NumBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                      <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>, <span class="keyword">false</span>, NeedsWinCFI, &amp;HasWinCFI);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">if</span> (EmitCFI) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="comment">// Label used to tie together the PROLOG_LABEL and the MachineMoves.</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <a class="code" href="classllvm_1_1MCSymbol.html">MCSymbol</a> *FrameLabel = MMI.<a class="code" href="classllvm_1_1MachineModuleInfo.html#af0c649dd3863684f18821123651f924c">getContext</a>().<a class="code" href="classllvm_1_1MCContext.html#a299bf2f0329389424760f4a7c8af75ac">createTempSymbol</a>();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;          <span class="comment">// Encode the stack size of the leaf function.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(FrameLabel, NumBytes));</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_PrologEnd))</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordtype">bool</span> IsWin64 =</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a8d38ac8f86a38869b906ed0e2947b9d2">isCallingConvWin64</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>());</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="keywordtype">unsigned</span> FixedObject = <a class="code" href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">getFixedObjectSize</a>(MF, AFI, IsWin64, IsFunclet);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160; </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="keyword">auto</span> PrologueSaveSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>() + FixedObject;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// All of the remaining stack allocations are for locals.</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4761d8d142e4f5eca20e2a37fbd1375a">setLocalStackSize</a>(NumBytes - PrologueSaveSize);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordtype">bool</span> CombineSPBump = shouldCombineCSRLocalStackBump(MF, NumBytes);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordtype">bool</span> HomPrologEpilog = homogeneousPrologEpilog(MF);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordflow">if</span> (CombineSPBump) {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SVEStackSize &amp;&amp; <span class="stringliteral">&quot;Cannot combine SP bump with SVE&quot;</span>);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(-NumBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                    <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>, <span class="keyword">false</span>, NeedsWinCFI, &amp;HasWinCFI,</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                    EmitCFI);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    NumBytes = 0;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HomPrologEpilog) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="comment">// Stack has been already adjusted.</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    NumBytes -= PrologueSaveSize;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PrologueSaveSize != 0) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64FrameLowering_8cpp.html#a73f427af3525340f74d7e85b984b82d6">convertCalleeSaveRestoreToSPPrePostIncDec</a>(</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, -PrologueSaveSize, NeedsWinCFI, &amp;HasWinCFI,</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        EmitCFI);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    NumBytes -= PrologueSaveSize;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumBytes &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Negative stack allocation size!?&quot;</span>);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// Move past the saves of the callee-saved registers, fixing up the offsets</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// and pre-inc if we decided to combine the callee-save and local stack</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// pointer bump above.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> End = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != End &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>) &amp;&amp;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;         !<a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>)) {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">if</span> (CombineSPBump)</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a69a17a573c98c5ac8ff9fedcc9099807">fixupCalleeSaveRestoreStackOffset</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>(),</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                                        NeedsWinCFI, &amp;HasWinCFI);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// For funclets the FP belongs to the containing function.</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="keywordflow">if</span> (!IsFunclet &amp;&amp; HasFP) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">// Only set up FP if we actually need to.</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    int64_t FPOffset = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4bf50af86f6d1f7d2dcf35e0ee18d1d3">getCalleeSaveBaseToFrameRecordOffset</a>();</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span> (CombineSPBump)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      FPOffset += AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>();</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      <span class="comment">// Before we update the live FP we have to ensure there&#39;s a valid (or</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <span class="comment">// null) asynchronous context in its slot just before FP in the frame</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      <span class="comment">// record, so store it now.</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="keywordtype">bool</span> HaveInitialContext = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.hasAttrSomewhere(Attribute::SwiftAsync);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordflow">if</span> (HaveInitialContext)</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(AArch64::X22);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::StoreSwiftAsyncContext))</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(HaveInitialContext ? AArch64::X22 : AArch64::XZR)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(AArch64::SP)</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(FPOffset - 8)</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">if</span> (HomPrologEpilog) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keyword">auto</span> <a class="code" href="AArch64LowerHomogeneousPrologEpilog_8cpp.html#abc5baba59c735eeb15bdef969b458794adbb7fde55b4b341b4478c749fe200737">Prolog</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      --<a class="code" href="AArch64LowerHomogeneousPrologEpilog_8cpp.html#abc5baba59c735eeb15bdef969b458794adbb7fde55b4b341b4478c749fe200737">Prolog</a>;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64LowerHomogeneousPrologEpilog_8cpp.html#abc5baba59c735eeb15bdef969b458794adbb7fde55b4b341b4478c749fe200737">Prolog</a>-&gt;getOpcode() == AArch64::HOM_Prolog);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <a class="code" href="AArch64LowerHomogeneousPrologEpilog_8cpp.html#abc5baba59c735eeb15bdef969b458794adbb7fde55b4b341b4478c749fe200737">Prolog</a>-&gt;addOperand(<a class="code" href="classllvm_1_1MachineOperand.html#ab09679b541a6ba1219b3602569847364">MachineOperand::CreateImm</a>(FPOffset));</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="comment">// Issue    sub fp, sp, FPOffset or</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <span class="comment">//          mov fp,sp          when FPOffset is zero.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      <span class="comment">// Note: All stores of callee-saved registers are marked as &quot;FrameSetup&quot;.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="comment">// This code marks the instruction(s) that set the FP also.</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::FP, AArch64::SP,</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                      <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(FPOffset), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                      <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>, <span class="keyword">false</span>, NeedsWinCFI, &amp;HasWinCFI);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; HasWinCFI) {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_PrologEnd))</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="comment">// After setting up the FP, the rest of the prolog doesn&#39;t need to be</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="comment">// included in the SEH unwind info.</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        NeedsWinCFI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      }</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">if</span> (EmitCFI) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="comment">// Define the current CFA rule to use the provided FP.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> OffsetToFirstCalleeSaveFromFP =</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;          AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4bf50af86f6d1f7d2dcf35e0ee18d1d3">getCalleeSaveBaseToFrameRecordOffset</a>() -</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;          AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>();</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> FramePtr = RegInfo-&gt;getFrameRegister(MF);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegInfo-&gt;getDwarfRegNum(FramePtr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">MCCFIInstruction::cfiDefCfa</a>(</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;          <span class="keyword">nullptr</span>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, FixedObject - OffsetToFirstCalleeSaveFromFP));</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="comment">// Now emit the moves for whatever callee saved regs we have (including FP,</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="comment">// LR if those are saved). Frame instructions for SVE register are emitted</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="comment">// later, after the instruction which actually save SVE regs.</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordflow">if</span> (EmitCFI)</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    emitCalleeSavedGPRLocations(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="comment">// Alignment is required for the parent frame, not the funclet</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> NeedsRealignment =</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      NumBytes &amp;&amp; !IsFunclet &amp;&amp; RegInfo-&gt;hasStackRealignment(MF);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  int64_t RealignmentPadding =</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      (NeedsRealignment &amp;&amp; MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">getMaxAlign</a>() &gt; <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16))</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;          ? MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">getMaxAlign</a>().<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>() - 16</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;          : 0;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">windowsRequiresStackProbe</a>(MF, NumBytes + RealignmentPadding)) {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumWords = (NumBytes + RealignmentPadding) &gt;&gt; 4;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <span class="comment">// alloc_l can hold at most 256MB, so assume that NumBytes doesn&#39;t</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="comment">// exceed this amount.  We need to move at most 2^24 - 1 into x15.</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="comment">// This is at most two instructions, MOVZ follwed by MOVK.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="comment">// TODO: Fix to use multiple stack alloc unwind codes for stacks</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="comment">// exceeding 256MB in size.</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="keywordflow">if</span> (NumBytes &gt;= (1 &lt;&lt; 28))</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Stack size cannot exceed 256MB for stack &quot;</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                            <span class="stringliteral">&quot;unwinding purposes&quot;</span>);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <a class="code" href="classuint32__t.html">uint32_t</a> LowNumWords = NumWords &amp; 0xFFFF;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::MOVZXi), AArch64::X15)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(LowNumWords)</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, 0))</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordflow">if</span> ((NumWords &amp; 0xFFFF0000) != 0) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::MOVKXi), AArch64::X15)</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X15)</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>((NumWords &amp; 0xFFFF0000) &gt;&gt; 16) <span class="comment">// High half</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">AArch64_AM::getShifterImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">AArch64_AM::LSL</a>, 16))</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::MOVi64imm), AArch64::X15)</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(NumWords)</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160; </div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* ChkStk = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a8f2d167290e8314ff8c87503233ac631">getChkStkName</a>();</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">switch</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ae106f6c6362377b3016f0d174227e193">getCodeModel</a>()) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa686bcdfaefdfe3f49acbfe6f680bc22d">CodeModel::Tiny</a>:</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">CodeModel::Small</a>:</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa29275c05d0afdbda643f7a0fbad83832">CodeModel::Medium</a>:</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949">CodeModel::Kernel</a>:</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(<a class="code" href="namespacellvm_1_1ARCISD.html#a383dfc381bd557f340886bb106e3d92ea37102c3bc1feaf214eb32e66a1ffc007">AArch64::BL</a>))</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(ChkStk)</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X15, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X16, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X17, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::NZCV, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c">CodeModel::Large</a>:</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::MOVaddrEXT))</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X16, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(ChkStk)</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(ChkStk)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      }</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(<a class="code" href="namespacellvm.html#a3a91375dbee36ddeeee15b974e39782c">getBLRCallOpcode</a>(MF)))</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X16, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X15, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>)</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X16, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X17, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::NZCV, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SUBXrx64), AArch64::SP)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::SP, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X15, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#a35905b769bf1afa2cc7e2a223191e57e">AArch64_AM::getArithExtendImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1ad2f6771d4027a09ba1d0de2e5ea54470">AArch64_AM::UXTX</a>, 4))</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_StackAlloc))</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(NumBytes)</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    NumBytes = 0;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> (RealignmentPadding &gt; 0) {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::ADDXri), AArch64::X15)</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::SP)</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(RealignmentPadding)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AndMask = ~(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">getMaxAlign</a>().<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>() - 1);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::ANDXri), AArch64::SP)</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X15, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#a832ad315a355f4ddcc32f189f34e28a9">AArch64_AM::encodeLogicalImmediate</a>(AndMask, 64));</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aa5a3112b5a4dd39005325e09e523963b">setStackRealigned</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="comment">// No need for SEH instructions here; if we&#39;re realigning the stack,</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="comment">// we&#39;ve set a frame pointer and already finished the SEH prologue.</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!NeedsWinCFI);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> AllocateBefore = SVEStackSize, AllocateAfter = {};</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> CalleeSavesBegin = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, CalleeSavesEnd = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// Process the SVE callee-saves to determine what space needs to be</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// allocated.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordflow">if</span> (int64_t CalleeSavedSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aef92fa2f6c53b6fda74605b0125d7667">getSVECalleeSavedStackSize</a>()) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="comment">// Find callee save instructions in frame.</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    CalleeSavesBegin = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(CalleeSavesBegin) &amp;&amp; <span class="stringliteral">&quot;Unexpected instruction&quot;</span>);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>())</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    CalleeSavesEnd = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    AllocateBefore = <a class="code" href="classllvm_1_1StackOffset.html#a3bb61639d8566c8d12f66c562d948bef">StackOffset::getScalable</a>(CalleeSavedSize);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    AllocateAfter = SVEStackSize - AllocateBefore;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// Allocate space for the callee saves (if any).</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, CalleeSavesBegin, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP, -AllocateBefore, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      EmitCFI &amp;&amp; !HasFP &amp;&amp; AllocateBefore,</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>((int64_t)MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>() - NumBytes));</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">if</span> (EmitCFI)</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    emitCalleeSavedSVELocations(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, CalleeSavesEnd);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="comment">// Finally allocate remaining SVE stack space.</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, CalleeSavesEnd, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                  -AllocateAfter, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                  <span class="keyword">nullptr</span>, EmitCFI &amp;&amp; !HasFP &amp;&amp; AllocateAfter,</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                  AllocateBefore + <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                                       (int64_t)MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>() - NumBytes));</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="comment">// Allocate space for the rest of the frame.</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> (NumBytes) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordtype">unsigned</span> scratchSPReg = AArch64::SP;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">if</span> (NeedsRealignment) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      scratchSPReg = <a class="code" href="AArch64FrameLowering_8cpp.html#a878af31656730eaf20a0686911cbe017">findScratchNonCalleeSaveRegister</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(scratchSPReg != AArch64::NoRegister);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="comment">// If we&#39;re a leaf function, try using the red zone.</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">canUseRedZone</a>(MF)) {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="comment">// FIXME: in the case of dynamic re-alignment, NumBytes doesn&#39;t have</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="comment">// the correct value here, as NumBytes also includes padding bytes,</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="comment">// which shouldn&#39;t be counted here.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, scratchSPReg, AArch64::SP,</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;          <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(-NumBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>,</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;          <span class="keyword">false</span>, NeedsWinCFI, &amp;HasWinCFI, EmitCFI &amp;&amp; !HasFP,</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;          SVEStackSize +</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;              <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>((int64_t)MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>() - NumBytes));</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    }</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">if</span> (NeedsRealignment) {</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">getMaxAlign</a>() &gt; <a class="code" href="structllvm_1_1Align.html">Align</a>(1));</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(scratchSPReg != AArch64::SP);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <span class="comment">// SUB X9, SP, NumBytes</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      <span class="comment">//   -- X9 is temporary register, so shouldn&#39;t contain any live data here,</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="comment">//   -- free to use. This is already produced by emitFrameOffset above.</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <span class="comment">// AND SP, X9, 0b11111...0000</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AndMask = ~(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">getMaxAlign</a>().<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>() - 1);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::ANDXri), AArch64::SP)</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(scratchSPReg, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1AArch64__AM.html#a832ad315a355f4ddcc32f189f34e28a9">AArch64_AM::encodeLogicalImmediate</a>(AndMask, 64));</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aa5a3112b5a4dd39005325e09e523963b">setStackRealigned</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="comment">// No need for SEH instructions here; if we&#39;re realigning the stack,</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      <span class="comment">// we&#39;ve set a frame pointer and already finished the SEH prologue.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!NeedsWinCFI);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160; </div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">// If we need a base pointer, set it up here. It&#39;s whatever the value of the</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// stack pointer is at this point. Any variable size objects will be allocated</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="comment">// after this, so we can still use the base pointer to reference locals.</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="comment">// FIXME: Clarify FrameSetup flags here.</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="comment">// Note: Use emitFrameOffset() like above for FP if the FrameSetup flag is</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// needed.</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// For funclets the BP belongs to the containing function.</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordflow">if</span> (!IsFunclet &amp;&amp; RegInfo-&gt;hasBasePointer(MF)) {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#aecd4a0b2f8e7e0af14209a06e67377bc">copyPhysReg</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, RegInfo-&gt;getBaseRegister(), AArch64::SP,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                     <span class="keyword">false</span>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_Nop))</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="comment">// The very last FrameSetup instruction indicates the end of prologue. Emit a</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="comment">// SEH opcode indicating the prologue end.</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; HasWinCFI) {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_PrologEnd))</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// SEH funclets are passed the frame pointer in X1.  If the parent</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// function uses the base register, then the base register is used</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="comment">// directly, and is not retrieved from X1.</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keywordflow">if</span> (IsFunclet &amp;&amp; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasPersonalityFn()) {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">EHPersonality</a> Per = <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getPersonalityFn());</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">isAsynchronousEHPersonality</a>(Per)) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::COPY), AArch64::FP)</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::X1)</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(AArch64::X1);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    }</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;}</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a12128506f277dac353cf7da1607881fc"> 1863</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a12128506f277dac353cf7da1607881fc">InsertReturnAddressAuth</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                                    <span class="keywordtype">bool</span> NeedsWinCFI, <span class="keywordtype">bool</span> *HasWinCFI) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MFI = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="keywordflow">if</span> (!MFI.shouldSignReturnAddress(MF))</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">getInstrInfo</a>();</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="comment">// The AUTIASP instruction assembles to a hint instruction before v8.3a so</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">// this instruction can safely used for any v8a architecture.</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="comment">// From v8.3a onwards there are optimised authenticate LR and return</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="comment">// instructions, namely RETA{A,B}, that can be used instead. In this case the</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="comment">// DW_CFA_AARCH64_negate_ra_state can&#39;t be emitted.</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="keywordflow">if</span> (Subtarget.hasPAuth() &amp;&amp;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      !MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::ShadowCallStack) &amp;&amp;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode() == AArch64::RET_ReallyLR &amp;&amp;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      !NeedsWinCFI) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(MFI.shouldSignWithBKey() ? AArch64::RETAB : AArch64::RETAA))</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a77d96c1c7f31baecc71004069dbc5eda">copyImplicitOps</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(MFI.shouldSignWithBKey() ? AArch64::AUTIBSP : AArch64::AUTIASP))</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex =</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#add1bf26f643dc758cdfb148eed30d0b3">MCCFIInstruction::createNegateRAState</a>(<span class="keyword">nullptr</span>));</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      *HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_PACSignLR))</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    }</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;}</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#adee4182085538431c4a8cb7ffec54783"> 1908</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#adee4182085538431c4a8cb7ffec54783">isFuncletReturnInstr</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df">AArch64::CATCHRET</a>:</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8b3de6401453f275f010559d01834826">AArch64::CLEANUPRET</a>:</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;}</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#aa3348fc65e993db75e0c3c050c561018"> 1918</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#aa3348fc65e993db75e0c3c050c561018">AArch64FrameLowering::emitEpilogue</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab8d7b8ff6803133d567fd4240e6364ce">getLastNonDebugInstr</a>();</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">getInstrInfo</a>();</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordtype">bool</span> EmitCFI =</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;()-&gt;needsAsyncDwarfUnwindInfo(MF);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordtype">bool</span> HasWinCFI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordtype">bool</span> IsFunclet = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keyword">auto</span> WinCFI = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(HasWinCFI == MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4a8d56726b9e91d336422a546d126a0f">hasWinCFI</a>()); });</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() != <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) {</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    IsFunclet = <a class="code" href="AArch64FrameLowering_8cpp.html#adee4182085538431c4a8cb7ffec54783">isFuncletReturnInstr</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  }</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="keyword">auto</span> FinishingTouches = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <a class="code" href="AArch64FrameLowering_8cpp.html#a12128506f277dac353cf7da1607881fc">InsertReturnAddressAuth</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, NeedsWinCFI, &amp;HasWinCFI);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443">needsShadowCallStackPrologueEpilogue</a>(MF))</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a02cddefc96e08fba507c3d0eac7f6c1f">emitShadowCallStackEpilogue</a>(*<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordflow">if</span> (EmitCFI)</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      emitCalleeSavedGPRRestores(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>());</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span> (HasWinCFI)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;              <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_EpilogEnd))</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  });</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  int64_t NumBytes = IsFunclet ? <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a97643b28151d68d2cec55176e739205d">getWinEHFuncletFrameSize</a>(MF)</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                               : MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="comment">// All calls are tail calls in GHC calling conv, and functions have no</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="comment">// prologue/epilogue.</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda8e8dc64aad833bd23d07d3384522575e">CallingConv::GHC</a>)</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">// How much of the stack used by incoming arguments this function is expected</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">// to restore in this particular epilogue.</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  int64_t ArgumentStackToRestore = <a class="code" href="AArch64FrameLowering_8cpp.html#a01f6c42979a72dd229c03417e00f7f96">getArgumentStackToRestore</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordtype">bool</span> IsWin64 =</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a8d38ac8f86a38869b906ed0e2947b9d2">isCallingConvWin64</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>());</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordtype">unsigned</span> FixedObject = <a class="code" href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">getFixedObjectSize</a>(MF, AFI, IsWin64, IsFunclet);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  int64_t AfterCSRPopSize = ArgumentStackToRestore;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="keyword">auto</span> PrologueSaveSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>() + FixedObject;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">// We cannot rely on the local stack size set in emitPrologue if the function</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">// has funclets, as funclets have different local stack size requirements, and</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="comment">// the current value set in emitPrologue may be that of the containing</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="comment">// function.</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>())</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4761d8d142e4f5eca20e2a37fbd1375a">setLocalStackSize</a>(NumBytes - PrologueSaveSize);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keywordflow">if</span> (homogeneousPrologEpilog(MF, &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!NeedsWinCFI);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keyword">auto</span> LastPopI = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keywordflow">if</span> (LastPopI != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>()) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <span class="keyword">auto</span> HomogeneousEpilog = std::prev(LastPopI);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">if</span> (HomogeneousEpilog-&gt;getOpcode() == AArch64::HOM_Epilog)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        LastPopI = HomogeneousEpilog;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    }</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="comment">// Adjust local stack</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>()), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                    <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>, NeedsWinCFI);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="comment">// SP has been already adjusted while restoring callee save regs.</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="comment">// We&#39;ve bailed-out the case with adjusting SP for arguments.</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AfterCSRPopSize == 0);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="keywordtype">bool</span> CombineSPBump = shouldCombineCSRLocalStackBumpInEpilogue(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, NumBytes);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">// Assume we can&#39;t combine the last pop with the sp restore.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160; </div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keywordtype">bool</span> CombineAfterCSRBump = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keywordflow">if</span> (!CombineSPBump &amp;&amp; PrologueSaveSize != 0) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Pop = std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>());</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keywordflow">while</span> (Pop-&gt;getOpcode() == TargetOpcode::CFI_INSTRUCTION ||</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;           <a class="code" href="classllvm_1_1AArch64InstrInfo.html#a52619cc1f9c5c3029a03a6c956b32595">AArch64InstrInfo::isSEHInstruction</a>(*Pop))</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      Pop = std::prev(Pop);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="comment">// Converting the last ldp to a post-index ldp is valid only if the last</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="comment">// ldp&#39;s offset is 0.</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;OffsetOp = Pop-&gt;getOperand(Pop-&gt;getNumOperands() - 1);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <span class="comment">// If the offset is 0 and the AfterCSR pop is not actually trying to</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="comment">// allocate more stack for arguments (in space that an untimely interrupt</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="comment">// may clobber), convert it to a post-index ldp.</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keywordflow">if</span> (OffsetOp.<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>() == 0 &amp;&amp; AfterCSRPopSize &gt;= 0) {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a73f427af3525340f74d7e85b984b82d6">convertCalleeSaveRestoreToSPPrePostIncDec</a>(</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, Pop, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, PrologueSaveSize, NeedsWinCFI, &amp;HasWinCFI, EmitCFI,</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;          <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, PrologueSaveSize);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <span class="comment">// If not, make sure to emit an add after the last ldp.</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      <span class="comment">// We&#39;re doing this by transfering the size to be restored from the</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <span class="comment">// adjustment *before* the CSR pops to the adjustment *after* the CSR</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <span class="comment">// pops.</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      AfterCSRPopSize += PrologueSaveSize;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      CombineAfterCSRBump = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    }</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="comment">// Move past the restores of the callee-saved registers.</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="comment">// If we plan on combining the sp bump of the local stack size and the callee</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="comment">// save stack size, we might need to adjust the CSR save and restore offsets.</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> LastPopI = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Begin = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="keywordflow">while</span> (LastPopI != Begin) {</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    --LastPopI;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <span class="keywordflow">if</span> (!LastPopI-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>) ||</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        <a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(LastPopI)) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      ++LastPopI;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CombineSPBump)</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a69a17a573c98c5ac8ff9fedcc9099807">fixupCalleeSaveRestoreStackOffset</a>(*LastPopI, AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>(),</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                                        NeedsWinCFI, &amp;HasWinCFI);</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4a8d56726b9e91d336422a546d126a0f">hasWinCFI</a>()) {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="comment">// If the prologue didn&#39;t contain any SEH opcodes and didn&#39;t set the</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="comment">// MF.hasWinCFI() flag, assume the epilogue won&#39;t either, and skip the</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="comment">// EpilogStart - to avoid generating CFI for functions that don&#39;t need it.</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="comment">// (And as we didn&#39;t generate any prologue at all, it would be asymmetrical</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="comment">// to the epilogue.) By the end of the function, we assert that</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="comment">// HasWinCFI is equal to MF.hasWinCFI(), to verify this assumption.</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::SEH_EpilogStart))</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  }</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">switch</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#a66a62a15c006f8bc55698e0bea465699">SwiftAsyncFramePointer</a>) {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b">SwiftAsyncFramePointerMode::DeploymentBased</a>:</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      <span class="comment">// Avoid the reload as it is GOT relative, and instead fall back to the</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <span class="comment">// hardcoded value below.  This allows a mismatch between the OS and</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      <span class="comment">// application without immediately terminating on the difference.</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      [[fallthrough]];</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c">SwiftAsyncFramePointerMode::Always</a>:</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <span class="comment">// We need to reset FP to its untagged state on return. Bit 60 is</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="comment">// currently used to show the presence of an extended frame.</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <span class="comment">// BIC x29, x29, #0x1000_0000_0000_0000</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::ANDXri),</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;              AArch64::FP)</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(AArch64::FP)</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0x10fe)</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c">SwiftAsyncFramePointerMode::Never</a>:</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  }</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> &amp;SVEStackSize = <a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(MF);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="comment">// If there is a single SP update, insert it before the ret and we&#39;re done.</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordflow">if</span> (CombineSPBump) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SVEStackSize &amp;&amp; <span class="stringliteral">&quot;Cannot combine SP bump with SVE&quot;</span>);</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// When we are about to restore the CSRs, the CFA register is SP again.</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">if</span> (EmitCFI &amp;&amp; <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF)) {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;RegInfo = *Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegInfo.getDwarfRegNum(AArch64::SP, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="keywordtype">unsigned</span> CFIIndex =</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(<a class="code" href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">MCCFIInstruction::cfiDefCfa</a>(<span class="keyword">nullptr</span>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, NumBytes));</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes + (int64_t)AfterCSRPopSize),</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                    <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>, NeedsWinCFI,</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                    &amp;HasWinCFI, EmitCFI, <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes));</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  NumBytes -= PrologueSaveSize;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumBytes &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Negative stack allocation size!?&quot;</span>);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="comment">// Process the SVE callee-saves to determine what space needs to be</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="comment">// deallocated.</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> DeallocateBefore = {}, DeallocateAfter = SVEStackSize;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> RestoreBegin = LastPopI, RestoreEnd = LastPopI;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="keywordflow">if</span> (int64_t CalleeSavedSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aef92fa2f6c53b6fda74605b0125d7667">getSVECalleeSavedStackSize</a>()) {</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    RestoreBegin = std::prev(RestoreEnd);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">while</span> (RestoreBegin != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>() &amp;&amp;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;           <a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(std::prev(RestoreBegin)))</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      --RestoreBegin;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(RestoreBegin) &amp;&amp;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;           <a class="code" href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a>(std::prev(RestoreEnd)) &amp;&amp; <span class="stringliteral">&quot;Unexpected instruction&quot;</span>);</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> CalleeSavedSizeAsOffset =</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a3bb61639d8566c8d12f66c562d948bef">StackOffset::getScalable</a>(CalleeSavedSize);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    DeallocateBefore = SVEStackSize - CalleeSavedSizeAsOffset;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    DeallocateAfter = CalleeSavedSizeAsOffset;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  }</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160; </div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="comment">// Deallocate the SVE area.</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <span class="keywordflow">if</span> (SVEStackSize) {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="comment">// If we have stack realignment or variable sized objects on the stack,</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="comment">// restore the stack pointer from the frame pointer prior to SVE CSR</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="comment">// restoration.</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ab325d3abfa4e1b6a0aba6d6761203806">isStackRealigned</a>() || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>()) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <span class="keywordflow">if</span> (int64_t CalleeSavedSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aef92fa2f6c53b6fda74605b0125d7667">getSVECalleeSavedStackSize</a>()) {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="comment">// Set SP to start of SVE callee-save area from which they can</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <span class="comment">// be reloaded. The code below will deallocate the stack space</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        <span class="comment">// space by moving FP -&gt; SP.</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, RestoreBegin, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::FP,</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                        <a class="code" href="classllvm_1_1StackOffset.html#a3bb61639d8566c8d12f66c562d948bef">StackOffset::getScalable</a>(-CalleeSavedSize), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                        <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      }</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aef92fa2f6c53b6fda74605b0125d7667">getSVECalleeSavedStackSize</a>()) {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <span class="comment">// Deallocate the non-SVE locals first before we can deallocate (and</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="comment">// restore callee saves) from the SVE area.</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, RestoreBegin, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;            <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>,</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">nullptr</span>, EmitCFI &amp;&amp; !<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF),</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            SVEStackSize + <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes + PrologueSaveSize));</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        NumBytes = 0;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, RestoreBegin, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                      DeallocateBefore, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">nullptr</span>, EmitCFI &amp;&amp; !<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF),</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                      SVEStackSize +</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                          <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes + PrologueSaveSize));</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, RestoreEnd, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                      DeallocateAfter, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">nullptr</span>, EmitCFI &amp;&amp; !<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF),</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                      DeallocateAfter +</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                          <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes + PrologueSaveSize));</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">if</span> (EmitCFI)</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      emitCalleeSavedSVERestores(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, RestoreEnd);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  }</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160; </div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF)) {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordtype">bool</span> RedZone = <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">canUseRedZone</a>(MF);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="comment">// If this was a redzone leaf function, we don&#39;t need to restore the</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="comment">// stack pointer (but we may need to pop stack args for fastcc).</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> (RedZone &amp;&amp; AfterCSRPopSize == 0)</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160; </div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="comment">// Pop the local variables off the stack. If there are no callee-saved</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="comment">// registers, it means we are actually positioned at the terminator and can</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="comment">// combine stack increment for the locals and the stack increment for</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="comment">// callee-popped arguments into (possibly) a single instruction and be done.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    <span class="keywordtype">bool</span> NoCalleeSaveRestore = PrologueSaveSize == 0;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    int64_t StackRestoreBytes = RedZone ? 0 : NumBytes;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">if</span> (NoCalleeSaveRestore)</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      StackRestoreBytes += AfterCSRPopSize;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(StackRestoreBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>, NeedsWinCFI, &amp;HasWinCFI, EmitCFI,</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>((RedZone ? 0 : NumBytes) + PrologueSaveSize));</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="comment">// If we were able to combine the local stack pop with the argument pop,</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="comment">// then we&#39;re done.</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">if</span> (NoCalleeSaveRestore || AfterCSRPopSize == 0) {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    }</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    NumBytes = 0;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  }</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="comment">// Restore the original stack pointer.</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="comment">// FIXME: Rather than doing the math here, we should instead just use</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="comment">// non-post-indexed loads for the restores if we aren&#39;t actually going to</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="comment">// be able to save any instructions.</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="keywordflow">if</span> (!IsFunclet &amp;&amp; (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() || AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ab325d3abfa4e1b6a0aba6d6761203806">isStackRealigned</a>())) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::FP,</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(-AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4bf50af86f6d1f7d2dcf35e0ee18d1d3">getCalleeSaveBaseToFrameRecordOffset</a>()),</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>, NeedsWinCFI);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumBytes)</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(NumBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>, <span class="keyword">false</span>, NeedsWinCFI);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="comment">// When we are about to restore the CSRs, the CFA register is SP again.</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keywordflow">if</span> (EmitCFI &amp;&amp; <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF)) {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> &amp;RegInfo = *Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">getRegisterInfo</a>();</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegInfo.getDwarfRegNum(AArch64::SP, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <a class="code" href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">MCCFIInstruction::cfiDefCfa</a>(<span class="keyword">nullptr</span>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, PrologueSaveSize));</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastPopI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  }</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// This must be placed after the callee-save restore code because that code</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="comment">// assumes the SP is at the same location as it was after the callee-save save</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="comment">// code in the prologue.</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">if</span> (AfterCSRPopSize) {</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AfterCSRPopSize &gt; 0 &amp;&amp; <span class="stringliteral">&quot;attempting to reallocate arg stack that an &quot;</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                                  <span class="stringliteral">&quot;interrupt may have clobbered&quot;</span>);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AArch64::SP, AArch64::SP,</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(AfterCSRPopSize), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>,</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        <span class="keyword">false</span>, NeedsWinCFI, &amp;HasWinCFI, EmitCFI,</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(CombineAfterCSRBump ? PrologueSaveSize : 0));</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;}</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">/// getFrameIndexReference - Provide a base+offset reference to an FI slot for</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">/// debug info.  It&#39;s the same as what we use for resolving the code-gen</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">/// references for now.  FIXME: This can go wrong when references are</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">/// SP-relative and simple call frames aren&#39;t used.</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a></div>
<div class="line"><a name="l02237"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#ab860729e618e5a2dd9e7e0feccdbe7e3"> 2237</a></span>&#160;<a class="code" href="classllvm_1_1AArch64FrameLowering.html#ab860729e618e5a2dd9e7e0feccdbe7e3">AArch64FrameLowering::getFrameIndexReference</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">int</span> FI,</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                                             <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ae748adf8316f78f9fc4f6a32e938da0a">resolveFrameIndexReference</a>(</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      MF, FI, FrameReg,</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="comment">/*PreferFP=*/</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::SanitizeHWAddress),</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="comment">/*ForSimm=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;}</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160; </div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a></div>
<div class="line"><a name="l02247"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a492547015f6f9aaf93099d70b32e8d9a"> 2247</a></span>&#160;<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a492547015f6f9aaf93099d70b32e8d9a">AArch64FrameLowering::getNonLocalFrameIndexReference</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                                                     <span class="keywordtype">int</span> FI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a94d2a07e589c43e48e5b591dd520760e">getSEHFrameIndexOffset</a>(MF, FI));</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;}</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#abc7410daace72818d9ce654814a67892"> 2252</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="AArch64FrameLowering_8cpp.html#abc7410daace72818d9ce654814a67892">getFPOffset</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                               int64_t ObjectOffset) {</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <span class="keywordtype">bool</span> IsWin64 =</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      Subtarget.isCallingConvWin64(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>());</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <span class="keywordtype">unsigned</span> FixedObject =</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">getFixedObjectSize</a>(MF, AFI, IsWin64, <span class="comment">/*IsFunclet=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  int64_t CalleeSaveSize = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>());</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  int64_t FPAdjust =</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      CalleeSaveSize - AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4bf50af86f6d1f7d2dcf35e0ee18d1d3">getCalleeSaveBaseToFrameRecordOffset</a>();</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(ObjectOffset + FixedObject + FPAdjust);</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;}</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#abfe6f4589d25ac776ff98f1ac68518a6"> 2266</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="AArch64FrameLowering_8cpp.html#abfe6f4589d25ac776ff98f1ac68518a6">getStackOffset</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                                  int64_t ObjectOffset) {</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(ObjectOffset + (int64_t)MFI.getStackSize());</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;}</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160; </div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="comment">// TODO: This function currently does not work for scalable vectors.</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a94d2a07e589c43e48e5b591dd520760e"> 2273</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a94d2a07e589c43e48e5b591dd520760e">AArch64FrameLowering::getSEHFrameIndexOffset</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                                                 <span class="keywordtype">int</span> FI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *RegInfo = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>());</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="keywordtype">int</span> ObjectOffset = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keywordflow">return</span> RegInfo-&gt;getLocalAddressRegister(MF) == AArch64::FP</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;             ? <a class="code" href="AArch64FrameLowering_8cpp.html#abc7410daace72818d9ce654814a67892">getFPOffset</a>(MF, ObjectOffset).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>()</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;             : <a class="code" href="AArch64FrameLowering_8cpp.html#abfe6f4589d25ac776ff98f1ac68518a6">getStackOffset</a>(MF, ObjectOffset).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;}</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160; </div>
<div class="line"><a name="l02283"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#ae748adf8316f78f9fc4f6a32e938da0a"> 2283</a></span>&#160;<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ae748adf8316f78f9fc4f6a32e938da0a">AArch64FrameLowering::resolveFrameIndexReference</a>(</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">int</span> FI, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg, <span class="keywordtype">bool</span> PreferFP,</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordtype">bool</span> ForSimm)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  int64_t ObjectOffset = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI);</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="keywordtype">bool</span> isFixed = MFI.isFixedObjectIndex(FI);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="keywordtype">bool</span> isSVE = MFI.getStackID(FI) == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ac8934ae6c8b97148ebb1db39bd978b03">resolveFrameOffsetReference</a>(MF, ObjectOffset, isFixed, isSVE, FrameReg,</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                                     PreferFP, ForSimm);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;}</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#ac8934ae6c8b97148ebb1db39bd978b03"> 2294</a></span>&#160;<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ac8934ae6c8b97148ebb1db39bd978b03">AArch64FrameLowering::resolveFrameOffsetReference</a>(</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, int64_t ObjectOffset, <span class="keywordtype">bool</span> isFixed, <span class="keywordtype">bool</span> isSVE,</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg, <span class="keywordtype">bool</span> PreferFP, <span class="keywordtype">bool</span> ForSimm)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *RegInfo = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>());</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  int64_t FPOffset = <a class="code" href="AArch64FrameLowering_8cpp.html#abc7410daace72818d9ce654814a67892">getFPOffset</a>(MF, ObjectOffset).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="AArch64FrameLowering_8cpp.html#abfe6f4589d25ac776ff98f1ac68518a6">getStackOffset</a>(MF, ObjectOffset).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keywordtype">bool</span> isCSR =</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      !isFixed &amp;&amp; ObjectOffset &gt;= -((<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>(MFI));</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> &amp;SVEStackSize = <a class="code" href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a>(MF);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <span class="comment">// Use frame pointer to reference fixed objects. Use it for locals if</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="comment">// there are VLAs or a dynamically realigned SP (and thus the SP isn&#39;t</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="comment">// reliable as a base). Make sure useFPForScavengingIndex() does the</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="comment">// right thing for the emergency spill slot.</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <span class="keywordtype">bool</span> UseFP = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a839720705cb2401eb2e9dd30001e4ad5">hasStackFrame</a>() &amp;&amp; !isSVE) {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="comment">// We shouldn&#39;t prefer using the FP to access fixed-sized stack objects when</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="comment">// there are scalable (SVE) objects in between the FP and the fixed-sized</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="comment">// objects.</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    PreferFP &amp;= !SVEStackSize;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="comment">// Note: Keeping the following as multiple &#39;if&#39; statements rather than</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="comment">// merging to a single expression for readability.</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="comment">// Argument access should always use the FP.</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordflow">if</span> (isFixed) {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      UseFP = <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF);</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isCSR &amp;&amp; RegInfo-&gt;hasStackRealignment(MF)) {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="comment">// References to the CSR area must use FP if we&#39;re re-aligning the stack</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      <span class="comment">// since the dynamically-sized alignment padding is between the SP/BP and</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      <span class="comment">// the CSR area.</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; <span class="stringliteral">&quot;Re-aligned stack must have frame pointer&quot;</span>);</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      UseFP = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; !RegInfo-&gt;hasStackRealignment(MF)) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <span class="comment">// If the FPOffset is negative and we&#39;re producing a signed immediate, we</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <span class="comment">// have to keep in mind that the available offset range for negative</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      <span class="comment">// offsets is smaller than for positive ones. If an offset is available</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="comment">// via the FP and the SP, use whichever is closest.</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      <span class="keywordtype">bool</span> FPOffsetFits = !ForSimm || FPOffset &gt;= -256;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      PreferFP |= <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt; -FPOffset &amp;&amp; !SVEStackSize;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">if</span> (MFI.hasVarSizedObjects()) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        <span class="comment">// If we have variable sized objects, we can use either FP or BP, as the</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="comment">// SP offset is unknown. We can use the base pointer if we have one and</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <span class="comment">// FP is not preferred. If not, we&#39;re stuck with using FP.</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordtype">bool</span> CanUseBP = RegInfo-&gt;hasBasePointer(MF);</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        <span class="keywordflow">if</span> (FPOffsetFits &amp;&amp; CanUseBP) <span class="comment">// Both are ok. Pick the best.</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;          UseFP = PreferFP;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!CanUseBP) <span class="comment">// Can&#39;t use BP. Forced to use FP.</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;          UseFP = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        <span class="comment">// else we can use BP and FP, but the offset from FP won&#39;t fit.</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <span class="comment">// That will make us scavenge registers which we can probably avoid by</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="comment">// using BP. If it won&#39;t fit for BP either, we&#39;ll scavenge anyway.</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FPOffset &gt;= 0) {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        <span class="comment">// Use SP or FP, whichever gives us the best chance of the offset</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <span class="comment">// being in range for direct access. If the FPOffset is positive,</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <span class="comment">// that&#39;ll always be best, as the SP will be even further away.</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        UseFP = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>() &amp;&amp; !RegInfo-&gt;hasBasePointer(MF)) {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="comment">// Funclets access the locals contained in the parent&#39;s stack frame</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <span class="comment">// via the frame pointer, so we have to use the FP in the parent</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <span class="comment">// function.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        (void) Subtarget;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            Subtarget.isCallingConvWin64(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>()) &amp;&amp;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            <span class="stringliteral">&quot;Funclets should only be present on Win64&quot;</span>);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        UseFP = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="comment">// We have the choice between FP and (SP or BP).</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        <span class="keywordflow">if</span> (FPOffsetFits &amp;&amp; PreferFP) <span class="comment">// If FP is the best fit, use it.</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;          UseFP = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  }</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      ((isFixed || isCSR) || !RegInfo-&gt;hasStackRealignment(MF) || !UseFP) &amp;&amp;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <span class="stringliteral">&quot;In the presence of dynamic stack pointer realignment, &quot;</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="stringliteral">&quot;non-argument/CSR objects cannot be accessed through the frame pointer&quot;</span>);</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160; </div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="keywordflow">if</span> (isSVE) {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> FPOffset =</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#aab735eb6b844f1b683d12013a083b4e2">StackOffset::get</a>(-AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a4bf50af86f6d1f7d2dcf35e0ee18d1d3">getCalleeSaveBaseToFrameRecordOffset</a>(), ObjectOffset);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> SPOffset =</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        SVEStackSize +</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <a class="code" href="classllvm_1_1StackOffset.html#aab735eb6b844f1b683d12013a083b4e2">StackOffset::get</a>(MFI.getStackSize() - AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>(),</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                         ObjectOffset);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="comment">// Always use the FP for SVE spills if available and beneficial.</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; (SPOffset.<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>() ||</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                      FPOffset.<a class="code" href="classllvm_1_1StackOffset.html#ac92bd14c26009fdfdc00576604da950f">getScalable</a>() &lt; SPOffset.<a class="code" href="classllvm_1_1StackOffset.html#ac92bd14c26009fdfdc00576604da950f">getScalable</a>() ||</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                      RegInfo-&gt;hasStackRealignment(MF))) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      FrameReg = RegInfo-&gt;getFrameRegister(MF);</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="keywordflow">return</span> FPOffset;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    }</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160; </div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    FrameReg = RegInfo-&gt;hasBasePointer(MF) ? RegInfo-&gt;getBaseRegister()</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                                           : (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)AArch64::SP;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">return</span> SPOffset;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160; </div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> ScalableOffset = {};</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">if</span> (UseFP &amp;&amp; !(isFixed || isCSR))</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    ScalableOffset = -SVEStackSize;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="keywordflow">if</span> (!UseFP &amp;&amp; (isFixed || isCSR))</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    ScalableOffset = SVEStackSize;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="keywordflow">if</span> (UseFP) {</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    FrameReg = RegInfo-&gt;getFrameRegister(MF);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(FPOffset) + ScalableOffset;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160; </div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <span class="comment">// Use the base pointer if we have one.</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="keywordflow">if</span> (RegInfo-&gt;hasBasePointer(MF))</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    FrameReg = RegInfo-&gt;getBaseRegister();</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MFI.hasVarSizedObjects() &amp;&amp;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;           <span class="stringliteral">&quot;Can&#39;t use SP when we have var sized objects.&quot;</span>);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    FrameReg = AArch64::SP;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="comment">// If we&#39;re using the red zone for this function, the SP won&#39;t actually</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="comment">// be adjusted, so the offsets will be negative. They&#39;re also all</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="comment">// within range of the signed 9-bit immediate instructions.</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">canUseRedZone</a>(MF))</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> -= AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">getLocalStackSize</a>();</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160; </div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) + ScalableOffset;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;}</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#ab63a202288b59ede08326547a2126c8a"> 2428</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AArch64FrameLowering_8cpp.html#ab63a202288b59ede08326547a2126c8a">getPrologueDeath</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  <span class="comment">// Do not set a kill flag on values that are also marked as live-in. This</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="comment">// happens with the @llvm-returnaddress intrinsic and with arguments passed in</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <span class="comment">// callee saved registers.</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <span class="comment">// Omitting the kill flags is conservatively correct even if the live-in</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="comment">// is not used after all.</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <span class="keywordtype">bool</span> IsLiveIn = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(!IsLiveIn);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;}</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160; </div>
<div class="line"><a name="l02438"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd"> 2438</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd">produceCompactUnwindFrame</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  <span class="keywordflow">return</span> Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a6d2ea0d87e248160e202c25124c91fa9">isTargetMachO</a>() &amp;&amp;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;         !(Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#aa4c9f6d9092cf5ca3819973f4b297050">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1AArch64TargetLowering.html#aeed6ff19584b28f6a534e1aa8ed60037">supportSwiftError</a>() &amp;&amp;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;           <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.hasAttrSomewhere(Attribute::SwiftError)) &amp;&amp;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;         MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() != <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedae64b7afe33922c60d78fea3c08697daa">CallingConv::SwiftTail</a>;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;}</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a6e70c6eb89daed9d5ad60fcd4e0944be"> 2447</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a6e70c6eb89daed9d5ad60fcd4e0944be">invalidateWindowsRegisterPairing</a>(<span class="keywordtype">unsigned</span> Reg1, <span class="keywordtype">unsigned</span> Reg2,</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                                             <span class="keywordtype">bool</span> NeedsWinCFI, <span class="keywordtype">bool</span> IsFirst,</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  <span class="comment">// If we are generating register pairs for a Windows function that requires</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <span class="comment">// EH support, then pair consecutive registers only.  There are no unwind</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="comment">// opcodes for saves/restores of non-consectuve register pairs.</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="comment">// The unwind opcodes are save_regp, save_regp_x, save_fregp, save_frepg_x,</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="comment">// save_lrpair.</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <span class="comment">// https://docs.microsoft.com/en-us/cpp/build/arm64-exception-handling</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="keywordflow">if</span> (Reg2 == AArch64::FP)</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  <span class="keywordflow">if</span> (!NeedsWinCFI)</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a8ce9439c5f364d8b85930e0ee689bbb8">getEncodingValue</a>(Reg2) == <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a8ce9439c5f364d8b85930e0ee689bbb8">getEncodingValue</a>(Reg1) + 1)</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="comment">// If pairing a GPR with LR, the pair can be described by the save_lrpair</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="comment">// opcode. If this is the first register pair, it would end up with a</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="comment">// predecrement, but there&#39;s no save_lrpair_x opcode, so we can only do this</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="comment">// if LR is paired with something else than the first register.</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <span class="comment">// The save_lrpair opcode requires the first register to be an odd one.</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="keywordflow">if</span> (Reg1 &gt;= AArch64::X19 &amp;&amp; Reg1 &lt;= AArch64::X27 &amp;&amp;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      (Reg1 - AArch64::X19) % 2 == 0 &amp;&amp; Reg2 == AArch64::LR &amp;&amp; !IsFirst)</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;}</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment">/// Returns true if Reg1 and Reg2 cannot be paired using a ldp/stp instruction.</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment">/// WindowsCFI requires that only consecutive registers can be paired.</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment">/// LR and FP need to be allocated together when the frame needs to save</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="comment">/// the frame-record. This means any other register pairing with LR is invalid.</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#aa558d4d2ff55bd212df17400c6715343"> 2478</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#aa558d4d2ff55bd212df17400c6715343">invalidateRegisterPairing</a>(<span class="keywordtype">unsigned</span> Reg1, <span class="keywordtype">unsigned</span> Reg2,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                      <span class="keywordtype">bool</span> UsesWinAAPCS, <span class="keywordtype">bool</span> NeedsWinCFI,</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                                      <span class="keywordtype">bool</span> NeedsFrameRecord, <span class="keywordtype">bool</span> IsFirst,</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <span class="keywordflow">if</span> (UsesWinAAPCS)</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a6e70c6eb89daed9d5ad60fcd4e0944be">invalidateWindowsRegisterPairing</a>(Reg1, Reg2, NeedsWinCFI, IsFirst,</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                                            <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="comment">// If we need to store the frame record, don&#39;t pair any register</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="comment">// with LR other than FP.</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="keywordflow">if</span> (NeedsFrameRecord)</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="keywordflow">return</span> Reg2 == AArch64::LR;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;}</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160; </div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="keyword">struct </span>RegPairInfo {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="keywordtype">unsigned</span> Reg1 = AArch64::NoRegister;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="keywordtype">unsigned</span> Reg2 = AArch64::NoRegister;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keywordtype">int</span> FrameIdx;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <span class="keyword">enum</span> RegType { GPR, FPR64, FPR128, PPR, ZPR } <a class="code" href="classllvm_1_1Type.html">Type</a>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  RegPairInfo() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordtype">bool</span> isPaired()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Reg2 != AArch64::NoRegister; }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160; </div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="keywordtype">unsigned</span> getScale()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classllvm_1_1Type.html">Type</a>) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">case</span> PPR:</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <span class="keywordflow">case</span> GPR:</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">case</span> FPR64:</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <span class="keywordflow">return</span> 8;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="keywordflow">case</span> ZPR:</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">case</span> FPR128:</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="keywordflow">return</span> 16;</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported type&quot;</span>);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160; </div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="keywordtype">bool</span> isScalable()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html">Type</a> == PPR || <a class="code" href="classllvm_1_1Type.html">Type</a> == ZPR; }</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;};</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160; </div>
<div class="line"><a name="l02526"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a0ca5d8ebe6f1e89b62a445fc3137bd2d"> 2526</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a0ca5d8ebe6f1e89b62a445fc3137bd2d">computeCalleeSaveRegisterPairs</a>(</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CalleeSavedInfo&gt;</a> CSI,</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;RegPairInfo&gt;</a> &amp;RegPairs,</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="keywordtype">bool</span> NeedsFrameRecord) {</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160; </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">if</span> (CSI.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>())</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <span class="keywordtype">bool</span> IsWindows = <a class="code" href="AArch64FrameLowering_8cpp.html#abeed081f0f43c83f3fb2ae6304848628">isTargetWindows</a>(MF);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF);</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">CallingConv::ID</a> <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>();</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="keywordtype">unsigned</span> Count = CSI.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>();</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  (void)<a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="comment">// MachO&#39;s compact unwind format relies on all registers being stored in</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="comment">// pairs.</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd">produceCompactUnwindFrame</a>(MF) || <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda4eeb29fe27dc20afa4f443765f45f9a5">CallingConv::PreserveMost</a> ||</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;          <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda75c7c151466ad7e041e9ed8aa4d5a4bf">CallingConv::CXX_FAST_TLS</a> || <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedae41511c1ad4197da36cef403f34bac72">CallingConv::Win64</a> ||</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;          (Count &amp; 1) == 0) &amp;&amp;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;         <span class="stringliteral">&quot;Odd number of callee-saved regs to spill!&quot;</span>);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="keywordtype">int</span> ByteOffset = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">getCalleeSavedStackSize</a>();</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="keywordtype">int</span> StackFillDir = -1;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="keywordtype">int</span> RegInc = 1;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keywordtype">unsigned</span> FirstReg = 0;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="comment">// For WinCFI, fill the stack from the bottom up.</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    ByteOffset = 0;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    StackFillDir = 1;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="comment">// As the CSI array is reversed to match PrologEpilogInserter, iterate</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="comment">// backwards, to pair up registers starting from lower numbered registers.</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    RegInc = -1;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    FirstReg = Count - 1;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  }</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keywordtype">int</span> ScalableByteOffset = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#aef92fa2f6c53b6fda74605b0125d7667">getSVECalleeSavedStackSize</a>();</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="keywordtype">bool</span> NeedGapToAlignStack = AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#afbfedea21bb3ae3e646a4c2995e1f75e">hasCalleeSaveStackFreeSpace</a>();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="comment">// When iterating backwards, the loop condition relies on unsigned wraparound.</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = FirstReg; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Count; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += RegInc) {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    RegPairInfo <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 = CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getReg();</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="keywordflow">if</span> (AArch64::GPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1))</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type = RegPairInfo::GPR;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AArch64::FPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1))</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type = RegPairInfo::FPR64;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AArch64::FPR128RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1))</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type = RegPairInfo::FPR128;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AArch64::ZPRRegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1))</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type = RegPairInfo::ZPR;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AArch64::PPRRegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1))</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type = RegPairInfo::PPR;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported register class.&quot;</span>);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160; </div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <span class="comment">// Add the next reg to the pair if it is in the same register class.</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + RegInc) &lt; Count) {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> NextReg = CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + RegInc].getReg();</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      <span class="keywordtype">bool</span> IsFirst = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == FirstReg;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type) {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <span class="keywordflow">case</span> RegPairInfo::GPR:</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        <span class="keywordflow">if</span> (AArch64::GPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(NextReg) &amp;&amp;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            !<a class="code" href="AArch64FrameLowering_8cpp.html#aa558d4d2ff55bd212df17400c6715343">invalidateRegisterPairing</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1, NextReg, IsWindows,</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                                       NeedsWinCFI, NeedsFrameRecord, IsFirst,</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                                       <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;          <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 = NextReg;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <span class="keywordflow">case</span> RegPairInfo::FPR64:</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="keywordflow">if</span> (AArch64::FPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(NextReg) &amp;&amp;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            !<a class="code" href="AArch64FrameLowering_8cpp.html#a6e70c6eb89daed9d5ad60fcd4e0944be">invalidateWindowsRegisterPairing</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1, NextReg, NeedsWinCFI,</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                                              IsFirst, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;          <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 = NextReg;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <span class="keywordflow">case</span> RegPairInfo::FPR128:</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        <span class="keywordflow">if</span> (AArch64::FPR128RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(NextReg))</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;          <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 = NextReg;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="keywordflow">case</span> RegPairInfo::PPR:</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="keywordflow">case</span> RegPairInfo::ZPR:</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    }</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160; </div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="comment">// GPRs and FPRs are saved in pairs of 64-bit regs. We expect the CSI</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="comment">// list to come in sorted by frame index so that we can issue the store</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="comment">// pair instructions directly. Assert if we see anything otherwise.</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <span class="comment">// The order of the registers in the list is controlled by</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="comment">// getCalleeSavedRegs(), so they will always be in-order, as well.</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ||</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;            (CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getFrameIdx() + RegInc == CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + RegInc].getFrameIdx())) &amp;&amp;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;           <span class="stringliteral">&quot;Out of order callee saved regs!&quot;</span>);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() || !NeedsFrameRecord || <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 != AArch64::FP ||</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 == AArch64::LR) &amp;&amp;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;           <span class="stringliteral">&quot;FrameRecord must be allocated together with LR&quot;</span>);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="comment">// Windows AAPCS has FP and LR reversed.</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() || !NeedsFrameRecord || <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 != AArch64::FP ||</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 == AArch64::LR) &amp;&amp;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;           <span class="stringliteral">&quot;FrameRecord must be allocated together with LR&quot;</span>);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="comment">// MachO&#39;s compact unwind format relies on all registers being stored in</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <span class="comment">// adjacent register pairs.</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd">produceCompactUnwindFrame</a>(MF) || <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda4eeb29fe27dc20afa4f443765f45f9a5">CallingConv::PreserveMost</a> ||</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;            <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda75c7c151466ad7e041e9ed8aa4d5a4bf">CallingConv::CXX_FAST_TLS</a> || <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedae41511c1ad4197da36cef403f34bac72">CallingConv::Win64</a> ||</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;            (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() &amp;&amp;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;             ((<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 == AArch64::LR &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 == AArch64::FP) ||</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;              <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 + 1 == <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2))) &amp;&amp;</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;           <span class="stringliteral">&quot;Callee-save registers not saved as adjacent register pair!&quot;</span>);</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160; </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx = CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getFrameIdx();</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) <span class="comment">// RPI.FrameIdx must be the lower index of the pair</span></div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx = CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + RegInc].getFrameIdx();</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160; </div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keywordtype">int</span> Scale = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.getScale();</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <span class="keywordtype">int</span> OffsetPre = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable() ? ScalableByteOffset : ByteOffset;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OffsetPre % Scale == 0);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160; </div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable())</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;      ScalableByteOffset += StackFillDir * Scale;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      ByteOffset += StackFillDir * (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? 2 * Scale : Scale);</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160; </div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    <span class="comment">// Swift&#39;s async context is directly before FP, so allocate an extra</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <span class="comment">// 8 bytes for it.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <span class="keywordflow">if</span> (NeedsFrameRecord &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>() &amp;&amp;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 == AArch64::FP)</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      ByteOffset += StackFillDir * 8;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160; </div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable() &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) &amp;&amp;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;           <span class="stringliteral">&quot;Paired spill/fill instructions don&#39;t exist for SVE vectors&quot;</span>);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160; </div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="comment">// Round up size of non-pair to pair size if we need to pad the</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="comment">// callee-save area to ensure 16-byte alignment.</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="keywordflow">if</span> (NeedGapToAlignStack &amp;&amp; !NeedsWinCFI &amp;&amp;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        !<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable() &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type != RegPairInfo::FPR128 &amp;&amp;</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        !<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() &amp;&amp; ByteOffset % 16 != 0) {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      ByteOffset += 8 * StackFillDir;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MFI.getObjectAlign(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx) &lt;= <a class="code" href="structllvm_1_1Align.html">Align</a>(16));</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      <span class="comment">// A stack frame with a gap looks like this, bottom up:</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <span class="comment">// d9, d8. x21, gap, x20, x19.</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <span class="comment">// Set extra alignment on the x21 object to create the gap above it.</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      MFI.setObjectAlignment(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx, <a class="code" href="structllvm_1_1Align.html">Align</a>(16));</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      NeedGapToAlignStack = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    }</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <span class="keywordtype">int</span> OffsetPost = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable() ? ScalableByteOffset : ByteOffset;</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OffsetPost % Scale == 0);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="comment">// If filling top down (default), we want the offset after incrementing it.</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="comment">// If fillibg bootom up (WinCFI) we need the original offset.</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = NeedsWinCFI ? OffsetPre : OffsetPost;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="comment">// The FP, LR pair goes 8 bytes into our expanded 24-byte slot so that the</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="comment">// Swift context can directly precede FP.</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="keywordflow">if</span> (NeedsFrameRecord &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>() &amp;&amp;</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 == AArch64::FP)</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += 8;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> / Scale;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160; </div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((!<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable() &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset &gt;= -64 &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset &lt;= 63) ||</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable() &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset &gt;= -256 &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset &lt;= 255)) &amp;&amp;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;           <span class="stringliteral">&quot;Offset out of bounds for LDP/STP immediate&quot;</span>);</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160; </div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="comment">// Save the offset to frame record so that the FP register can point to the</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="comment">// innermost frame record (spilled FP and LR registers).</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="keywordflow">if</span> (NeedsFrameRecord &amp;&amp; ((!IsWindows &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 == AArch64::LR &amp;&amp;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                              <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 == AArch64::FP) ||</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                             (IsWindows &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1 == AArch64::FP &amp;&amp;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                              <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2 == AArch64::LR)))</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a26df76f51f398bf4954036667563e2be">setCalleeSaveBaseToFrameRecordOffset</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160; </div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    RegPairs.push_back(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>);</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired())</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += RegInc;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  }</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <span class="comment">// If we need an alignment gap in the stack, align the topmost stack</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="comment">// object. A stack frame with a gap looks like this, bottom up:</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="comment">// x19, d8. d9, gap.</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    <span class="comment">// Set extra alignment on the topmost stack object (the first element in</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="comment">// CSI, which goes top down), to create the gap above it.</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">if</span> (AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#afbfedea21bb3ae3e646a4c2995e1f75e">hasCalleeSaveStackFreeSpace</a>())</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;      MFI.setObjectAlignment(CSI[0].getFrameIdx(), <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16));</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <span class="comment">// We iterated bottom up over the registers; flip RegPairs back to top</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="comment">// down order.</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">std::reverse</a>(RegPairs.begin(), RegPairs.end());</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;}</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160; </div>
<div class="line"><a name="l02718"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a38d361ba1ba79b6217929ada0dd69cb6"> 2718</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a38d361ba1ba79b6217929ada0dd69cb6">AArch64FrameLowering::spillCalleeSavedRegisters</a>(</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CalleeSavedInfo&gt;</a> CSI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegPairInfo, 8&gt;</a> RegPairs;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160; </div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a0ca5d8ebe6f1e89b62a445fc3137bd2d">computeCalleeSaveRegisterPairs</a>(MF, CSI, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, RegPairs, <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF));</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160; </div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <span class="keywordflow">if</span> (homogeneousPrologEpilog(MF)) {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keyword">auto</span> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::HOM_Prolog))</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                   .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160; </div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a> : RegPairs) {</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2);</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      <span class="comment">// Update register live in.</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">isReserved</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1))</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">isReserved</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2))</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2);</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    }</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  }</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> RegPairInfo &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(RegPairs)) {</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <span class="keywordtype">unsigned</span> Reg1 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="keywordtype">unsigned</span> Reg2 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordtype">unsigned</span> StrOpc;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160; </div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="comment">// Issue sequence of spills for cs regs.  The first spill may be converted</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="comment">// to a pre-decrement store later by emitPrologue if the callee-save stack</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="comment">// area allocation can&#39;t be combined with the local stack area allocation.</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="comment">// For example:</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="comment">//    stp     x22, x21, [sp, #0]     // addImm(+0)</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="comment">//    stp     x20, x19, [sp, #16]    // addImm(+2)</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <span class="comment">//    stp     fp, lr, [sp, #32]      // addImm(+4)</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="comment">// Rationale: This sequence saves uop updates compared to a sequence of</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="comment">// pre-increment spills like stp xi,xj,[sp,#-16]!</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="comment">// Note: Similar rationale and sequence for restores in epilog.</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordtype">unsigned</span> Size;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type) {</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::GPR:</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;       StrOpc = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? AArch64::STPXi : AArch64::STRXui;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;       Size = 8;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::FPR64:</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;       StrOpc = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? AArch64::STPDi : AArch64::STRDui;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;       Size = 8;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8);</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::FPR128:</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;       StrOpc = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? AArch64::STPQi : AArch64::STRQui;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;       Size = 16;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::ZPR:</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;       StrOpc = AArch64::STR_ZXI;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;       Size = 16;</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16);</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::PPR:</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;       StrOpc = AArch64::STR_PXI;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;       Size = 2;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(2);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    }</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CSR spill: (&quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(Reg1, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(Reg2, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;) -&gt; fi#(&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx + 1;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!NeedsWinCFI || !(Reg1 == AArch64::LR &amp;&amp; Reg2 == AArch64::FP)) &amp;&amp;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;           <span class="stringliteral">&quot;Windows unwdinding requires a consecutive (FP,LR) pair&quot;</span>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="comment">// Windows unwind codes require consecutive registers if registers are</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="comment">// paired.  Make the switch here, so that the code below will save (x,x+1)</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="comment">// and not (x+1,x).</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keywordtype">unsigned</span> FrameIdxReg1 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="keywordtype">unsigned</span> FrameIdxReg2 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx + 1;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) {</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Reg1, Reg2);</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(FrameIdxReg1, FrameIdxReg2);</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    }</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(StrOpc));</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">isReserved</a>(Reg1))</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(Reg1);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">isReserved</a>(Reg2))</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(Reg2);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Reg2, <a class="code" href="AArch64FrameLowering_8cpp.html#ab63a202288b59ede08326547a2126c8a">getPrologueDeath</a>(MF, Reg2));</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;          <a class="code" href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIdxReg2),</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;          <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a>, Size, Alignment));</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    }</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Reg1, <a class="code" href="AArch64FrameLowering_8cpp.html#ab63a202288b59ede08326547a2126c8a">getPrologueDeath</a>(MF, Reg1))</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::SP)</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset) <span class="comment">// [sp, #offset*scale],</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                            <span class="comment">// where factor*scale is implicit</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        <a class="code" href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIdxReg1),</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a>, Size, Alignment));</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI)</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a7f43397146b3eee4bcd4ff73ec27335f">InsertSEH</a>(MIB, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="comment">// Update the StackIDs of the SVE stack slots.</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type == RegPairInfo::ZPR || <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type == RegPairInfo::PPR)</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a6ba514594eb802f087046edbe201f8f4">setStackID</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx, <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160; </div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  }</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;}</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160; </div>
<div class="line"><a name="l02838"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a3fc78aa19b9e30af7cb534f1a58e22de"> 2838</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a3fc78aa19b9e30af7cb534f1a58e22de">AArch64FrameLowering::restoreCalleeSavedRegisters</a>(</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;CalleeSavedInfo&gt;</a> CSI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegPairInfo, 8&gt;</a> RegPairs;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF);</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160; </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160; </div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <a class="code" href="AArch64FrameLowering_8cpp.html#a0ca5d8ebe6f1e89b62a445fc3137bd2d">computeCalleeSaveRegisterPairs</a>(MF, CSI, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, RegPairs, <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF));</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160; </div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="keyword">auto</span> EmitMI = [&amp;](<span class="keyword">const</span> RegPairInfo &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>) -&gt; <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> {</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <span class="keywordtype">unsigned</span> Reg1 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="keywordtype">unsigned</span> Reg2 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160; </div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="comment">// Issue sequence of restores for cs regs. The last restore may be converted</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="comment">// to a post-increment load later by emitEpilogue if the callee-save stack</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="comment">// area allocation can&#39;t be combined with the local stack area allocation.</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="comment">// For example:</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <span class="comment">//    ldp     fp, lr, [sp, #32]       // addImm(+4)</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="comment">//    ldp     x20, x19, [sp, #16]     // addImm(+2)</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="comment">//    ldp     x22, x21, [sp, #0]      // addImm(+0)</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;    <span class="comment">// Note: see comment in spillCalleeSavedRegisters()</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="keywordtype">unsigned</span> LdrOpc;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <span class="keywordtype">unsigned</span> Size;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Type) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::GPR:</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;       LdrOpc = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? AArch64::LDPXi : AArch64::LDRXui;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;       Size = 8;</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8);</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::FPR64:</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;       LdrOpc = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? AArch64::LDPDi : AArch64::LDRDui;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;       Size = 8;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::FPR128:</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;       LdrOpc = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired() ? AArch64::LDPQi : AArch64::LDRQui;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;       Size = 16;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16);</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::ZPR:</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;       LdrOpc = AArch64::LDR_ZXI;</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;       Size = 16;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="keywordflow">case</span> RegPairInfo::PPR:</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;       LdrOpc = AArch64::LDR_PXI;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;       Size = 2;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;       Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(2);</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CSR restore: (&quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(Reg1, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(Reg2, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;) -&gt; fi#(&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx + 1;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160; </div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <span class="comment">// Windows unwind codes require consecutive registers if registers are</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="comment">// paired.  Make the switch here, so that the code below will save (x,x+1)</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    <span class="comment">// and not (x+1,x).</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="keywordtype">unsigned</span> FrameIdxReg1 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    <span class="keywordtype">unsigned</span> FrameIdxReg2 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.FrameIdx + 1;</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) {</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Reg1, Reg2);</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(FrameIdxReg1, FrameIdxReg2);</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    }</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(LdrOpc));</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isPaired()) {</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Reg2, <a class="code" href="namespacellvm.html#aa5e4d7acf58e87826a15b94d37144f2b">getDefRegState</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;          <a class="code" href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIdxReg2),</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;          <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>, Size, Alignment));</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    }</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Reg1, <a class="code" href="namespacellvm.html#aa5e4d7acf58e87826a15b94d37144f2b">getDefRegState</a>(<span class="keyword">true</span>))</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::SP)</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Offset) <span class="comment">// [sp, #offset*scale]</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                            <span class="comment">// where factor*scale is implicit</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <a class="code" href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIdxReg1),</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>, Size, Alignment));</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI)</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a7f43397146b3eee4bcd4ff73ec27335f">InsertSEH</a>(MIB, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160; </div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <span class="keywordflow">return</span> MIB-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>();</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  };</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160; </div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <span class="comment">// SVE objects are always restored in reverse order.</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> RegPairInfo &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(RegPairs))</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable())</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      EmitMI(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160; </div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="keywordflow">if</span> (homogeneousPrologEpilog(MF, &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)) {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="keyword">auto</span> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::HOM_Epilog))</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                   .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a> : RegPairs) {</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg1, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>);</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.Reg2, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>);</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  }</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160; </div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#a2caf1b89c0c90afebe4a20e9d1de0e81">ReverseCSRRestoreSeq</a>) {</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="lib_2Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> RegPairInfo &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(RegPairs)) {</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable())</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> It = EmitMI(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>);</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <a class="code" href="lib_2Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a> = It;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    }</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="lib_2Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a>);</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> RegPairInfo &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a> : RegPairs) {</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>.isScalable())</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      (void)EmitMI(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">RPI</a>);</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    }</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  }</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160; </div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;}</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160; </div>
<div class="line"><a name="l02967"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#ab041d0f79187663c0cc7c08cdf8227d0"> 2967</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ab041d0f79187663c0cc7c08cdf8227d0">AArch64FrameLowering::determineCalleeSaves</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;                                                <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;SavedRegs,</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;                                                <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <span class="comment">// All calls are tail calls in GHC calling conv, and functions have no</span></div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <span class="comment">// prologue/epilogue.</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda8e8dc64aad833bd23d07d3384522575e">CallingConv::GHC</a>)</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160; </div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <a class="code" href="classllvm_1_1TargetFrameLowering.html#a2f26766f4dcfa6457ba405584a34d5c3">TargetFrameLowering::determineCalleeSaves</a>(MF, SavedRegs, RS);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *RegInfo = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>());</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;Subtarget = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;();</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <span class="keywordtype">unsigned</span> UnspilledCSGPR = AArch64::NoRegister;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <span class="keywordtype">unsigned</span> UnspilledCSGPRPaired = AArch64::NoRegister;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160; </div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <span class="keyword">const</span> <a class="code" href="classuint16__t.html">MCPhysReg</a> *CSRegs = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a8ae9c5d17b40aa7be0189dd4f12dc315">getCalleeSavedRegs</a>();</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160; </div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <span class="keywordtype">unsigned</span> BasePointerReg = RegInfo-&gt;<a class="code" href="classllvm_1_1AArch64RegisterInfo.html#acafe750c425c834b596416c311715d8c">hasBasePointer</a>(MF)</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;                                ? RegInfo-&gt;<a class="code" href="classllvm_1_1AArch64RegisterInfo.html#af855b9574123510dd91bee730edba54b">getBaseRegister</a>()</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;                                : (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)AArch64::NoRegister;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160; </div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  <span class="keywordtype">unsigned</span> ExtraCSSpill = 0;</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;  <span class="comment">// Figure out which callee-saved registers to save/restore.</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; CSRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = CSRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="comment">// Add the base pointer register to SavedRegs if it is callee-save.</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == BasePointerReg)</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160; </div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keywordtype">bool</span> RegUsed = SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a15d63c566878e964c19139b2c76c0dab">test</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordtype">unsigned</span> PairedReg = AArch64::NoRegister;</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    <span class="keywordflow">if</span> (AArch64::GPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        AArch64::FPR64RegClass.contains(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        AArch64::FPR128RegClass.contains(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      PairedReg = CSRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> ^ 1];</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160; </div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="keywordflow">if</span> (!RegUsed) {</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="keywordflow">if</span> (AArch64::GPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) &amp;&amp;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;          !RegInfo-&gt;<a class="code" href="classllvm_1_1AArch64RegisterInfo.html#a291580cc01efa41a004f8b30e358969f">isReservedReg</a>(MF, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        UnspilledCSGPR = <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        UnspilledCSGPRPaired = PairedReg;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      }</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    }</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160; </div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="comment">// MachO&#39;s compact unwind format relies on all registers being stored in</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="comment">// pairs.</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <span class="comment">// FIXME: the usual format is actually better if unwinding isn&#39;t needed.</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    <span class="keywordflow">if</span> (producePairRegisters(MF) &amp;&amp; PairedReg != AArch64::NoRegister &amp;&amp;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        !SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a15d63c566878e964c19139b2c76c0dab">test</a>(PairedReg)) {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(PairedReg);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;      <span class="keywordflow">if</span> (AArch64::GPR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(PairedReg) &amp;&amp;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;          !RegInfo-&gt;<a class="code" href="classllvm_1_1AArch64RegisterInfo.html#a291580cc01efa41a004f8b30e358969f">isReservedReg</a>(MF, PairedReg))</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        ExtraCSSpill = PairedReg;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    }</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  }</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160; </div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedae41511c1ad4197da36cef403f34bac72">CallingConv::Win64</a> &amp;&amp;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      !Subtarget.<a class="code" href="classllvm_1_1AArch64Subtarget.html#a05fb81a3747dd4f76894a66c574cf99e">isTargetWindows</a>()) {</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <span class="comment">// For Windows calling convention on a non-windows OS, where X18 is treated</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="comment">// as reserved, back up X18 when entering non-windows code (marked with the</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    <span class="comment">// Windows calling convention) and restore when returning regardless of</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    <span class="comment">// whether the individual function uses it - it might call other functions</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="comment">// that clobber it.</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(AArch64::X18);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  <span class="comment">// Calculates the callee saved stack size.</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <span class="keywordtype">unsigned</span> CSStackSize = 0;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <span class="keywordtype">unsigned</span> SVECSStackSize = 0;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>()) {</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="keyword">auto</span> <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> = <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a251557179fe64bb09bd7e327c60c6b24">getRegSizeInBits</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) / 8;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keywordflow">if</span> (AArch64::PPRRegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        AArch64::ZPRRegClass.contains(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      SVECSStackSize += <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a>;</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;      CSStackSize += <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a>;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  }</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160; </div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  <span class="comment">// Save number of saved regs, so we can easily update CSStackSize later.</span></div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <span class="keywordtype">unsigned</span> NumSavedRegs = SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a568ff706b8c5991bd299c8c00b803897">count</a>();</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160; </div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <span class="comment">// The frame record needs to be created by saving the appropriate registers</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> EstimatedStackSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a66046fdf8661d5276f951337b0cf892d">estimateStackSize</a>(MF);</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) ||</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">windowsRequiresStackProbe</a>(MF, EstimatedStackSize + CSStackSize + 16)) {</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(AArch64::FP);</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(AArch64::LR);</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  }</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160; </div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** determineCalleeSaves\nSaved CSRs:&quot;</span>;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;                  : SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;             &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, RegInfo);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;             <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160; </div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="comment">// If any callee-saved registers are used, the frame cannot be eliminated.</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  int64_t SVEStackSize =</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(SVECSStackSize + estimateSVEStackObjectOffsets(MFI), 16);</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <span class="keywordtype">bool</span> CanEliminateFrame = (SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a568ff706b8c5991bd299c8c00b803897">count</a>() == 0) &amp;&amp; !SVEStackSize;</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="comment">// The CSR spill slots have not been allocated yet, so estimateStackSize</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="comment">// won&#39;t include them.</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="keywordtype">unsigned</span> EstimatedStackSizeLimit = <a class="code" href="AArch64FrameLowering_8cpp.html#ac3ad986bc12b8c9ef4ebf86b4ed7b3c3">estimateRSStackSizeLimit</a>(MF);</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160; </div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="comment">// We may address some of the stack above the canonical frame address, either</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="comment">// for our own arguments or during a call. Include that in calculating whether</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="comment">// we have complicated addressing concerns.</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  int64_t CalleeStackUsed = 0;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae70474766f2a88bab5b2b77bcb22212b">getObjectIndexBegin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != 0; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    int64_t FixedOff = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">if</span> (FixedOff &gt; CalleeStackUsed) CalleeStackUsed = FixedOff;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  }</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <span class="comment">// Conservatively always assume BigStack when there are SVE spills.</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="keywordtype">bool</span> BigStack = SVEStackSize || (EstimatedStackSize + CSStackSize +</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;                                   CalleeStackUsed) &gt; EstimatedStackSizeLimit;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  <span class="keywordflow">if</span> (BigStack || !CanEliminateFrame || RegInfo-&gt;<a class="code" href="classllvm_1_1AArch64RegisterInfo.html#adf86b81af5da74aea6a11c36eadf41be">cannotEliminateFrame</a>(MF))</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    AFI-&gt;setHasStackFrame(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160; </div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="comment">// Estimate if we might need to scavenge a register at some point in order</span></div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="comment">// to materialize a stack offset. If so, either spill one additional</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="comment">// callee-saved register or reserve a special spill slot to facilitate</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="comment">// register scavenging. If we already spilled an extra callee-saved register</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  <span class="comment">// above to keep the number of spills even, we don&#39;t need to do anything else</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  <span class="comment">// here.</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="keywordflow">if</span> (BigStack) {</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="keywordflow">if</span> (!ExtraCSSpill &amp;&amp; UnspilledCSGPR != AArch64::NoRegister) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Spilling &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(UnspilledCSGPR, RegInfo)</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; to get a scratch register.\n&quot;</span>);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(UnspilledCSGPR);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;      <span class="comment">// MachO&#39;s compact unwind format relies on all registers being stored in</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      <span class="comment">// pairs, so if we need to spill one extra for BigStack, then we need to</span></div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      <span class="comment">// store the pair.</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <span class="keywordflow">if</span> (producePairRegisters(MF))</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(UnspilledCSGPRPaired);</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      ExtraCSSpill = UnspilledCSGPR;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    }</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="comment">// If we didn&#39;t find an extra callee-saved register to spill, create</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <span class="comment">// an emergency spill slot.</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <span class="keywordflow">if</span> (!ExtraCSSpill || MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#afd23983bb9fb4af65e27b56cc506edbc">isPhysRegUsed</a>(ExtraCSSpill)) {</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> &amp;RC = AArch64::GPR64RegClass;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      <span class="keywordtype">unsigned</span> Size = <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ad0e6256f93a13938e8e59828d5677e32">getSpillSize</a>(RC);</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;      <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a87fa290ccfe9e8742e51e2ddb20f3754">getSpillAlign</a>(RC);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      <span class="keywordtype">int</span> FI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">CreateStackObject</a>(Size, Alignment, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      RS-&gt;<a class="code" href="classllvm_1_1RegScavenger.html#aecaae26e25f7f952810d98e50264b5fb">addScavengingFrameIndex</a>(FI);</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;No available CS registers, allocated fi#&quot;</span> &lt;&lt; FI</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; as the emergency spill slot.\n&quot;</span>);</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    }</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  }</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160; </div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <span class="comment">// Adding the size of additional 64bit GPR saves.</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  CSStackSize += 8 * (SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a568ff706b8c5991bd299c8c00b803897">count</a>() - NumSavedRegs);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160; </div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <span class="comment">// A Swift asynchronous context extends the frame record with a pointer</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="comment">// directly before FP.</span></div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; AFI-&gt;hasSwiftAsyncContext())</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    CSStackSize += 8;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160; </div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignedCSStackSize = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(CSStackSize, 16);</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Estimated stack frame size: &quot;</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;               &lt;&lt; EstimatedStackSize + AlignedCSStackSize</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; bytes.\n&quot;</span>);</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160; </div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a81504f733d0491a446a16ef1ba0a5c2a">isCalleeSavedInfoValid</a>() ||</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;          AFI-&gt;getCalleeSavedStackSize() == AlignedCSStackSize) &amp;&amp;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         <span class="stringliteral">&quot;Should not invalidate callee saved info&quot;</span>);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160; </div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <span class="comment">// Round up to register pair alignment to avoid additional SP adjustment</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  AFI-&gt;setCalleeSavedStackSize(AlignedCSStackSize);</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;  AFI-&gt;setCalleeSaveStackHasFreeSpace(AlignedCSStackSize != CSStackSize);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  AFI-&gt;setSVECalleeSavedStackSize(<a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(SVECSStackSize, 16));</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;}</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160; </div>
<div class="line"><a name="l03149"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#ad2f0da8ab6518a9d252876e7b996b10b"> 3149</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ad2f0da8ab6518a9d252876e7b996b10b">AArch64FrameLowering::assignCalleeSavedSpillSlots</a>(</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *RegInfo,</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    std::vector&lt;CalleeSavedInfo&gt; &amp;CSI, <span class="keywordtype">unsigned</span> &amp;MinCSFrameIndex,</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordtype">unsigned</span> &amp;MaxCSFrameIndex)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = <a class="code" href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a>(MF);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  <span class="comment">// To match the canonical windows frame layout, reverse the list of</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <span class="comment">// callee saved registers to get them laid out by PrologEpilogInserter</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <span class="comment">// in the right order. (PrologEpilogInserter allocates stack objects top</span></div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  <span class="comment">// down. Windows canonical prologs store higher numbered registers at</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  <span class="comment">// the top, thus have the CSI array start from the highest registers.)</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI)</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">std::reverse</a>(CSI.begin(), CSI.end());</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160; </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <span class="keywordflow">if</span> (CSI.empty())</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Early exit if no callee saved registers are modified!</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160; </div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <span class="comment">// Now that we know which registers need to be saved and restored, allocate</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <span class="comment">// stack slots for them.</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  <span class="keyword">auto</span> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160; </div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  <span class="keywordtype">bool</span> UsesWinAAPCS = <a class="code" href="AArch64FrameLowering_8cpp.html#abeed081f0f43c83f3fb2ae6304848628">isTargetWindows</a>(MF);</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  <span class="keywordflow">if</span> (UsesWinAAPCS &amp;&amp; <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <span class="keywordtype">int</span> FrameIdx = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">CreateStackObject</a>(8, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16), <span class="keyword">true</span>);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a1cf1ee0c8e45ead80ed78b4866d9cbee">setSwiftAsyncContextFrameIdx</a>(FrameIdx);</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)FrameIdx &lt; MinCSFrameIndex) MinCSFrameIndex = FrameIdx;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)FrameIdx &gt; MaxCSFrameIndex) MaxCSFrameIndex = FrameIdx;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  }</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160; </div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;CS : CSI) {</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = CS.getReg();</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = RegInfo-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a17287afec9c4e572033dc4d1d6e11367">getMinimalPhysRegClass</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160; </div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <span class="keywordtype">unsigned</span> Size = RegInfo-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ad0e6256f93a13938e8e59828d5677e32">getSpillSize</a>(*RC);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment(RegInfo-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a87fa290ccfe9e8742e51e2ddb20f3754">getSpillAlign</a>(*RC));</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <span class="keywordtype">int</span> FrameIdx = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">CreateStackObject</a>(Size, Alignment, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    CS.setFrameIdx(FrameIdx);</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160; </div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)FrameIdx &lt; MinCSFrameIndex) MinCSFrameIndex = FrameIdx;</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)FrameIdx &gt; MaxCSFrameIndex) MaxCSFrameIndex = FrameIdx;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160; </div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="comment">// Grab 8 bytes below FP for the extended asynchronous frame info.</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">hasFP</a>(MF) &amp;&amp; AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">hasSwiftAsyncContext</a>() &amp;&amp; !UsesWinAAPCS &amp;&amp;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == AArch64::FP) {</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;      FrameIdx = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">CreateStackObject</a>(8, Alignment, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a1cf1ee0c8e45ead80ed78b4866d9cbee">setSwiftAsyncContextFrameIdx</a>(FrameIdx);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)FrameIdx &lt; MinCSFrameIndex) MinCSFrameIndex = FrameIdx;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)FrameIdx &gt; MaxCSFrameIndex) MaxCSFrameIndex = FrameIdx;</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    }</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  }</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;}</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a362113d81c98925d063d3ad6602a1e17"> 3202</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a362113d81c98925d063d3ad6602a1e17">AArch64FrameLowering::enableStackSlotScavenging</a>(</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="keywordflow">return</span> AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#afbfedea21bb3ae3e646a4c2995e1f75e">hasCalleeSaveStackFreeSpace</a>();</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;}</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;<span class="comment">/// returns true if there are any SVE callee saves.</span></div>
<div class="line"><a name="l03209"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#acede596c16f946c19dacb339e25ff978"> 3209</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64FrameLowering_8cpp.html#acede596c16f946c19dacb339e25ff978">getSVECalleeSaveSlotRange</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI,</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                                      <span class="keywordtype">int</span> &amp;Min, <span class="keywordtype">int</span> &amp;Max) {</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  Min = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;int&gt;::max</a>();</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  Max = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::numeric_limits&lt;int&gt;::min</a>();</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160; </div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <span class="keywordflow">if</span> (!MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a81504f733d0491a446a16ef1ba0a5c2a">isCalleeSavedInfoValid</a>())</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160; </div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <span class="keyword">const</span> std::vector&lt;CalleeSavedInfo&gt; &amp;CSI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>();</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;CS : CSI) {</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    <span class="keywordflow">if</span> (AArch64::ZPRRegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(CS.getReg()) ||</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        AArch64::PPRRegClass.contains(CS.getReg())) {</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Max == <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::numeric_limits&lt;int&gt;::min</a>() ||</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;              Max + 1 == CS.getFrameIdx()) &amp;&amp;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;             <span class="stringliteral">&quot;SVE CalleeSaves are not consecutive&quot;</span>);</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160; </div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;      Min = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(Min, CS.getFrameIdx());</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;      Max = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Max, CS.getFrameIdx());</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    }</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  }</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <span class="keywordflow">return</span> Min != <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;int&gt;::max</a>();</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;}</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160; </div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="comment">// Process all the SVE stack objects and determine offsets for each</span></div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="comment">// object. If AssignOffsets is true, the offsets get assigned.</span></div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="comment">// Fills in the first and last callee-saved frame indices into</span></div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="comment">// Min/MaxCSFrameIndex, respectively.</span></div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="comment">// Returns the size of the stack.</span></div>
<div class="line"><a name="l03237"></a><span class="lineno"><a class="line" href="AArch64FrameLowering_8cpp.html#a56db9c3cbc621caf7d84f6982f095392"> 3237</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="AArch64FrameLowering_8cpp.html#a56db9c3cbc621caf7d84f6982f095392">determineSVEStackObjectOffsets</a>(<a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI,</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;                                              <span class="keywordtype">int</span> &amp;MinCSFrameIndex,</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;                                              <span class="keywordtype">int</span> &amp;MaxCSFrameIndex,</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;                                              <span class="keywordtype">bool</span> AssignOffsets) {</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <span class="comment">// First process all fixed stack objects.</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae70474766f2a88bab5b2b77bcb22212b">getObjectIndexBegin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != 0; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">getStackID</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) != <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a> &amp;&amp;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;           <span class="stringliteral">&quot;SVE vectors should never be passed on the stack by value, only by &quot;</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;           <span class="stringliteral">&quot;reference.&quot;</span>);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <span class="keyword">auto</span> Assign = [&amp;MFI](<span class="keywordtype">int</span> FI, int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;alloc FI(&quot;</span> &lt;&lt; FI &lt;&lt; <span class="stringliteral">&quot;) at SP[&quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3cd29e7edbcaceb5834eaa7d089a5bc4">setObjectOffset</a>(FI, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;  };</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160; </div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160; </div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  <span class="comment">// Then process all callee saved slots.</span></div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#acede596c16f946c19dacb339e25ff978">getSVECalleeSaveSlotRange</a>(MFI, MinCSFrameIndex, MaxCSFrameIndex)) {</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="comment">// Assign offsets to the callee save slots.</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MinCSFrameIndex; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;= MaxCSFrameIndex; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">getObjectSize</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      <span class="keywordflow">if</span> (AssignOffsets)</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        Assign(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, -<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    }</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  }</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160; </div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  <span class="comment">// Ensure that the Callee-save area is aligned to 16bytes.</span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;  <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16U));</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160; </div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;  <span class="comment">// Create a buffer of SVE objects to allocate and sort it.</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> ObjectsToAllocate;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;  <span class="comment">// If we have a stack protector, and we&#39;ve previously decided that we have SVE</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;  <span class="comment">// objects on the stack and thus need it to go in the SVE stack area, then it</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  <span class="comment">// needs to go first.</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  <span class="keywordtype">int</span> StackProtectorFI = -1;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac7c993678733273ea9d16db7ff87b2c6">hasStackProtectorIndex</a>()) {</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    StackProtectorFI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a5ee88eb786413b2cf541122aa749392c">getStackProtectorIndex</a>();</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">getStackID</a>(StackProtectorFI) == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>)</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      ObjectsToAllocate.push_back(StackProtectorFI);</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  }</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">getObjectIndexEnd</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordtype">unsigned</span> StackID = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">getStackID</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordflow">if</span> (StackID != <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">TargetStackID::ScalableVector</a>)</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == StackProtectorFI)</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keywordflow">if</span> (MaxCSFrameIndex &gt;= <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= MinCSFrameIndex)</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af5302d38d9a16eee93f13a1579c8773d">isDeadObjectIndex</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160; </div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    ObjectsToAllocate.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;  }</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160; </div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  <span class="comment">// Allocate all SVE locals and spills</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> FI : ObjectsToAllocate) {</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(FI);</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="comment">// FIXME: Given that the length of SVE vectors is not necessarily a power of</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="comment">// two, we&#39;d need to align every object dynamically at runtime if the</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="comment">// alignment is larger than 16. This is not yet supported.</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">if</span> (Alignment &gt; <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(16))</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;          <span class="stringliteral">&quot;Alignment of scalable vectors &gt; 16 bytes is not yet supported&quot;</span>);</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160; </div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">getObjectSize</a>(FI), Alignment);</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <span class="keywordflow">if</span> (AssignOffsets)</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;      Assign(FI, -<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;  }</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160; </div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;}</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160; </div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;int64_t AArch64FrameLowering::estimateSVEStackObjectOffsets(</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;  <span class="keywordtype">int</span> MinCSFrameIndex, MaxCSFrameIndex;</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a56db9c3cbc621caf7d84f6982f095392">determineSVEStackObjectOffsets</a>(MFI, MinCSFrameIndex, MaxCSFrameIndex, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;}</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160; </div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;int64_t AArch64FrameLowering::assignSVEStackObjectOffsets(</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI, <span class="keywordtype">int</span> &amp;MinCSFrameIndex, <span class="keywordtype">int</span> &amp;MaxCSFrameIndex)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#a56db9c3cbc621caf7d84f6982f095392">determineSVEStackObjectOffsets</a>(MFI, MinCSFrameIndex, MaxCSFrameIndex,</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;                                        <span class="keyword">true</span>);</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;}</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a9462cc875c5c343ff7ae9b3d68ce6305"> 3325</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a9462cc875c5c343ff7ae9b3d68ce6305">AArch64FrameLowering::processFunctionBeforeFrameFinalized</a>(</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160; </div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1TargetFrameLowering.html#aa76eab97e3072a1ebd4bf1ff00d19423">getStackGrowthDirection</a>() == <a class="code" href="classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">TargetFrameLowering::StackGrowsDown</a> &amp;&amp;</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;         <span class="stringliteral">&quot;Upwards growing stack unsupported&quot;</span>);</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160; </div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;  <span class="keywordtype">int</span> MinCSFrameIndex, MaxCSFrameIndex;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;  int64_t SVEStackSize =</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      assignSVEStackObjectOffsets(MFI, MinCSFrameIndex, MaxCSFrameIndex);</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160; </div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ab1093619213bf0b465ab1d5fc1e44824">setStackSizeSVE</a>(<a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(SVEStackSize, 16U));</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#afa58eca8243bee935ada875a71acfafa">setMinMaxSVECSFrameIndex</a>(MinCSFrameIndex, MaxCSFrameIndex);</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160; </div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  <span class="comment">// If this function isn&#39;t doing Win64-style C++ EH, we don&#39;t need to do</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="comment">// anything.</span></div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;  <span class="keywordflow">if</span> (!MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>())</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <a class="code" href="structllvm_1_1WinEHFuncInfo.html">WinEHFuncInfo</a> &amp;EHInfo = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>();</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160; </div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">front</a>();</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;  <span class="keyword">auto</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>))</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160; </div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  <span class="comment">// Create an UnwindHelp object.</span></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  <span class="comment">// The UnwindHelp object is allocated at the start of the fixed object area</span></div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  int64_t FixedObject =</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;      <a class="code" href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">getFixedObjectSize</a>(MF, AFI, <span class="comment">/*IsWin64*/</span> <span class="keyword">true</span>, <span class="comment">/*IsFunclet*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  <span class="keywordtype">int</span> UnwindHelpFI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a03cf34252938b54f7e86c736f9fd7dc1">CreateFixedObject</a>(<span class="comment">/*Size*/</span> 8,</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                                           <span class="comment">/*SPOffset*/</span> -FixedObject,</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                                           <span class="comment">/*IsImmutable=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  EHInfo.<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a297243a501424b3f88e1295034db122d">UnwindHelpFrameIdx</a> = UnwindHelpFI;</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160; </div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;  <span class="comment">// We need to store -2 into the UnwindHelp object at the start of the</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;  <span class="comment">// function.</span></div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;  RS-&gt;<a class="code" href="classllvm_1_1RegScavenger.html#a14812153b6cf8c1cb26c3de8b96ba91c">enterBasicBlockEnd</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;  RS-&gt;<a class="code" href="classllvm_1_1RegScavenger.html#a4a44764b1c5681c8fb057f13b3f30047">backward</a>(std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>));</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = RS-&gt;<a class="code" href="classllvm_1_1RegScavenger.html#a28849ec4920f5ee3f97d344633e695f4">FindUnusedReg</a>(&amp;AArch64::GPR64commonRegClass);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstReg &amp;&amp; <span class="stringliteral">&quot;There must be a free register after frame setup&quot;</span>);</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::MOVi64imm), DstReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(-2);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(AArch64::STURXi))</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(DstReg, <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(<span class="keyword">true</span>))</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a03258ce69ceadb08e189389468f7fd0a">addFrameIndex</a>(UnwindHelpFI)</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;}</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160; </div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;<span class="keyword">struct </span>TagStoreInstr {</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;  int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, Size;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;  <span class="keyword">explicit</span> TagStoreInstr(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, int64_t Size)</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), Size(Size) {}</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;};</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160; </div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="keyword">class </span>TagStoreEdit {</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>;</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  <span class="comment">// Tag store instructions that are being replaced.</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TagStoreInstr, 8&gt;</a> TagStores;</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  <span class="comment">// Combined memref arguments of the above instructions.</span></div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineMemOperand *, 8&gt;</a> CombinedMemRefs;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160; </div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;  <span class="comment">// Replace allocation tags in [FrameReg + FrameRegOffset, FrameReg +</span></div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  <span class="comment">// FrameRegOffset + Size) with the address tag of SP.</span></div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> FrameReg;</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;  <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> FrameRegOffset;</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;  int64_t <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  <span class="comment">// If not None, move FrameReg to (FrameReg + FrameRegUpdate) at the end.</span></div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;  std::optional&lt;int64_t&gt; FrameRegUpdate;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;  <span class="comment">// MIFlags for any FrameReg updating instructions.</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;  <span class="keywordtype">unsigned</span> FrameRegUpdateFlags;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160; </div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <span class="comment">// Use zeroing instruction variants.</span></div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <span class="keywordtype">bool</span> ZeroData;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160; </div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="keywordtype">void</span> emitUnrolled(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertI);</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="keywordtype">void</span> emitLoop(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertI);</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160; </div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  TagStoreEdit(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <span class="keywordtype">bool</span> ZeroData)</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;      : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>), ZeroData(ZeroData) {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    MF = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  }</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  <span class="comment">// Add an instruction to be replaced. Instructions must be added in the</span></div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;  <span class="comment">// ascending order of Offset, and have to be adjacent.</span></div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;  <span class="keywordtype">void</span> addInstruction(TagStoreInstr <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((TagStores.empty() ||</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;            TagStores.back().Offset + TagStores.back().Size == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.Offset) &amp;&amp;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;           <span class="stringliteral">&quot;Non-adjacent tag store instructions.&quot;</span>);</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    TagStores.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  }</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="Coroutines_8cpp.html#ac781ce96aa25ba7f6fd38f72de665450">clear</a>() { TagStores.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>(); }</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <span class="comment">// Emit equivalent code at the given location, and erase the current set of</span></div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  <span class="comment">// instructions. May skip if the replacement is not profitable. May invalidate</span></div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  <span class="comment">// the input iterator and replace it with a valid one.</span></div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  <span class="keywordtype">void</span> emitCode(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;InsertI,</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;                <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html">AArch64FrameLowering</a> *TFI, <span class="keywordtype">bool</span> TryMergeSPUpdate);</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;};</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160; </div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;<span class="keywordtype">void</span> TagStoreEdit::emitUnrolled(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertI) {</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> =</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;().getInstrInfo();</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160; </div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  <span class="keyword">const</span> int64_t kMinOffset = -256 * 16;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;  <span class="keyword">const</span> int64_t kMaxOffset = 255 * 16;</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160; </div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> BaseReg = FrameReg;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  int64_t BaseRegOffsetBytes = FrameRegOffset.<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  <span class="keywordflow">if</span> (BaseRegOffsetBytes &lt; kMinOffset ||</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      BaseRegOffsetBytes + (Size - Size % 32) &gt; kMaxOffset ||</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <span class="comment">// BaseReg can be FP, which is not necessarily aligned to 16-bytes. In</span></div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      <span class="comment">// that case, BaseRegOffsetBytes will not be aligned to 16 bytes, which</span></div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="comment">// is required for the offset of ST2G.</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      BaseRegOffsetBytes % 16 != 0) {</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ScratchReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(&amp;AArch64::GPR64RegClass);</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ScratchReg, BaseReg,</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;                    <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(BaseRegOffsetBytes), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    BaseReg = ScratchReg;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    BaseRegOffsetBytes = 0;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  }</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160; </div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LastI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  <span class="keywordflow">while</span> (Size) {</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    int64_t InstrSize = (<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> &gt; 16) ? 32 : 16;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <span class="keywordtype">unsigned</span> Opcode =</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;        InstrSize == 16</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;            ? (ZeroData ? AArch64::STZGOffset : AArch64::STGOffset)</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;            : (ZeroData ? AArch64::STZ2GOffset : AArch64::ST2GOffset);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BaseRegOffsetBytes % 16 == 0);</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Opcode))</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;                          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AArch64::SP)</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;                          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(BaseReg)</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(BaseRegOffsetBytes / 16)</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a6d96c0781817d38b57f91432dd85d28f">setMemRefs</a>(CombinedMemRefs);</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="comment">// A store to [BaseReg, #0] should go last for an opportunity to fold the</span></div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="comment">// final SP adjustment in the epilogue.</span></div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="keywordflow">if</span> (BaseRegOffsetBytes == 0)</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      LastI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    BaseRegOffsetBytes += InstrSize;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> -= InstrSize;</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;  }</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160; </div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <span class="keywordflow">if</span> (LastI)</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, LastI);</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;}</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160; </div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;<span class="keywordtype">void</span> TagStoreEdit::emitLoop(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertI) {</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> =</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a>&gt;().getInstrInfo();</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160; </div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> BaseReg = FrameRegUpdate</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;                         ? FrameReg</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                         : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(&amp;AArch64::GPR64RegClass);</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SizeReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(&amp;AArch64::GPR64RegClass);</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160; </div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <a class="code" href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">emitFrameOffset</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, BaseReg, FrameReg, FrameRegOffset, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160; </div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  int64_t LoopSize = <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  <span class="comment">// If the loop size is not a multiple of 32, split off one 16-byte store at</span></div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <span class="comment">// the end to fold BaseReg update into.</span></div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;  <span class="keywordflow">if</span> (FrameRegUpdate &amp;&amp; *FrameRegUpdate)</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    LoopSize -= LoopSize % 32;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LoopI = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;                                <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ZeroData ? AArch64::STZGloop_wback</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;                                                  : AArch64::STGloop_wback))</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;                            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(SizeReg)</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(BaseReg)</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;                            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(LoopSize)</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;                            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(BaseReg)</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;                            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a6d96c0781817d38b57f91432dd85d28f">setMemRefs</a>(CombinedMemRefs);</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;  <span class="keywordflow">if</span> (FrameRegUpdate)</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    LoopI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a264402282f599b6181b6415278fbf849">setFlags</a>(FrameRegUpdateFlags);</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160; </div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;  int64_t ExtraBaseRegUpdate =</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      FrameRegUpdate ? (*FrameRegUpdate - FrameRegOffset.<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>() - <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>) : 0;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  <span class="keywordflow">if</span> (LoopSize &lt; Size) {</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FrameRegUpdate);</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Size - LoopSize == 16);</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="comment">// Tag 16 more bytes at BaseReg and update BaseReg.</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;            <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ZeroData ? AArch64::STZGPostIndex : AArch64::STGPostIndex))</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(BaseReg)</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(BaseReg)</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(BaseReg)</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1 + ExtraBaseRegUpdate / 16)</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a6d96c0781817d38b57f91432dd85d28f">setMemRefs</a>(CombinedMemRefs)</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(FrameRegUpdateFlags);</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ExtraBaseRegUpdate) {</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;    <span class="comment">// Update BaseReg.</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;        <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(ExtraBaseRegUpdate &gt; 0 ? AArch64::ADDXri : AArch64::SUBXri))</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(BaseReg)</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(BaseReg)</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">std::abs</a>(ExtraBaseRegUpdate))</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(FrameRegUpdateFlags);</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  }</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;}</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160; </div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;<span class="comment">// Check if *II is a register update that can be merged into STGloop that ends</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;<span class="comment">// at (Reg + Size). RemainingOffset is the required adjustment to Reg after the</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;<span class="comment">// end of the loop.</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;<span class="keywordtype">bool</span> canMergeRegUpdate(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> II, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;                       int64_t Size, int64_t *TotalOffset) {</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = *II;</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AArch64::ADDXri ||</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;       <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AArch64::SUBXri) &amp;&amp;</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg() == <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg() == <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="namespacellvm_1_1AArch64__AM.html#a22f623563f43de6d1aabcdfa9d341031">AArch64_AM::getShiftValue</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getImm());</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm() &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>;</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AArch64::SUBXri)</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    int64_t AbsPostOffset = <a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">std::abs</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> - Size);</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <span class="keyword">const</span> int64_t kMaxOffset =</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;        0xFFF; <span class="comment">// Max encoding for unshifted ADDXri / SUBXri</span></div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    <span class="keywordflow">if</span> (AbsPostOffset &lt;= kMaxOffset &amp;&amp; AbsPostOffset % 16 == 0) {</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      *TotalOffset = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  }</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;}</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160; </div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;<span class="keywordtype">void</span> mergeMemRefs(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;TagStoreInstr&gt;</a> &amp;TSE,</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;                  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineMemOperand *&gt;</a> &amp;MemRefs) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;  MemRefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;TS : TSE) {</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = TS.MI;</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <span class="comment">// An instruction without memory operands may access anything. Be</span></div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    <span class="comment">// conservative and return an empty list.</span></div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;memoperands_empty()) {</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;      MemRefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    }</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    MemRefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;memoperands_begin(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;memoperands_end());</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  }</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;}</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;<span class="keywordtype">void</span> TagStoreEdit::emitCode(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;InsertI,</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html">AArch64FrameLowering</a> *TFI,</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;                            <span class="keywordtype">bool</span> TryMergeSPUpdate) {</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;  <span class="keywordflow">if</span> (TagStores.empty())</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  TagStoreInstr &amp;FirstTagStore = TagStores[0];</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  TagStoreInstr &amp;LastTagStore = TagStores[TagStores.size() - 1];</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = LastTagStore.Offset - FirstTagStore.Offset + LastTagStore.Size;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = TagStores[0].MI-&gt;getDebugLoc();</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  FrameRegOffset = TFI-&gt;<a class="code" href="classllvm_1_1AArch64FrameLowering.html#ac8934ae6c8b97148ebb1db39bd978b03">resolveFrameOffsetReference</a>(</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;      *MF, FirstTagStore.Offset, <span class="keyword">false</span> <span class="comment">/*isFixed*/</span>, <span class="keyword">false</span> <span class="comment">/*isSVE*/</span>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;      <span class="comment">/*PreferFP=*/</span><span class="keyword">false</span>, <span class="comment">/*ForSimm=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;  FrameReg = <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  FrameRegUpdate = std::nullopt;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160; </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;  mergeMemRefs(TagStores, CombinedMemRefs);</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160; </div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing adjacent STG instructions:\n&quot;</span>;</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;             <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Instr</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;                  : TagStores) { <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *Instr.MI; });</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160; </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;  <span class="comment">// Size threshold where a loop becomes shorter than a linear sequence of</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;  <span class="comment">// tagging instructions.</span></div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="AArch64SelectionDAGInfo_8cpp.html#afffa81f707a469aaea6b273b7fb099b8">kSetTagLoopThreshold</a> = 176;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;  <span class="keywordflow">if</span> (Size &lt; <a class="code" href="AArch64SelectionDAGInfo_8cpp.html#afffa81f707a469aaea6b273b7fb099b8">kSetTagLoopThreshold</a>) {</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    <span class="keywordflow">if</span> (TagStores.size() &lt; 2)</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    emitUnrolled(InsertI);</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UpdateInstr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;    int64_t TotalOffset = 0;</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    <span class="keywordflow">if</span> (TryMergeSPUpdate) {</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      <span class="comment">// See if we can merge base register update into the STGloop.</span></div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;      <span class="comment">// This is done in AArch64LoadStoreOptimizer for &quot;normal&quot; stores,</span></div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;      <span class="comment">// but STGloop is way too unusual for that, and also it only</span></div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;      <span class="comment">// realistically happens in function epilogue. Also, STGloop is expanded</span></div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      <span class="comment">// before that pass.</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;      <span class="keywordflow">if</span> (InsertI != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;          canMergeRegUpdate(InsertI, FrameReg, FrameRegOffset.<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>() + Size,</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                            &amp;TotalOffset)) {</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        UpdateInstr = &amp;*InsertI++;</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Folding SP update into loop:\n  &quot;</span></div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;                          &lt;&lt; *UpdateInstr);</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      }</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;    }</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160; </div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    <span class="keywordflow">if</span> (!UpdateInstr &amp;&amp; TagStores.size() &lt; 2)</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160; </div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    <span class="keywordflow">if</span> (UpdateInstr) {</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;      FrameRegUpdate = TotalOffset;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      FrameRegUpdateFlags = UpdateInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad2f4d922d52fe33423474951f704b91b">getFlags</a>();</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    }</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    emitLoop(InsertI);</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    <span class="keywordflow">if</span> (UpdateInstr)</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      UpdateInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;  }</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160; </div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;TS : TagStores)</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    TS.MI-&gt;eraseFromParent();</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;}</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160; </div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;<span class="keywordtype">bool</span> isMergeableStackTaggingInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, int64_t &amp;<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;                                        int64_t &amp;Size, <span class="keywordtype">bool</span> &amp;ZeroData) {</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;  ZeroData = (Opcode == AArch64::STZGloop || Opcode == AArch64::STZGOffset ||</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;              Opcode == AArch64::STZ2GOffset);</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160; </div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;  <span class="keywordflow">if</span> (Opcode == AArch64::STGloop || Opcode == AArch64::STZGloop) {</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).isDead() || !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).isDead())</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).isImm() || !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).isFI())</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getIndex());</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  }</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160; </div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  <span class="keywordflow">if</span> (Opcode == AArch64::STGOffset || Opcode == AArch64::STZGOffset)</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = 16;</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Opcode == AArch64::ST2GOffset || Opcode == AArch64::STZ2GOffset)</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = 32;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160; </div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg() != AArch64::SP || !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).isFI())</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160; </div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getIndex()) +</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;           16 * <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;}</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160; </div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;<span class="comment">// Detect a run of memory tagging instructions for adjacent stack frame slots,</span></div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;<span class="comment">// and replace them with a shorter instruction sequence:</span></div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;<span class="comment">// * replace STG + STG with ST2G</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;<span class="comment">// * replace STGloop + STGloop with STGloop</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;<span class="comment">// This code needs to run when stack slot offsets are already known, but before</span></div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;<span class="comment">// FrameIndex operands in STG instructions are eliminated.</span></div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> tryMergeAdjacentSTG(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> II,</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html">AArch64FrameLowering</a> *TFI,</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;                                                <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;  <span class="keywordtype">bool</span> FirstZeroData;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  int64_t <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = *II;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> NextI = ++II;</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  <span class="keywordflow">if</span> (&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a743e3df320fb6d257766fb061cfb16e3">instr_back</a>())</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <span class="keywordflow">return</span> II;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;  <span class="keywordflow">if</span> (!isMergeableStackTaggingInstruction(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, Size, FirstZeroData))</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    <span class="keywordflow">return</span> II;</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160; </div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TagStoreInstr, 4&gt;</a> Instrs;</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  Instrs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, Size);</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  constexpr <span class="keywordtype">int</span> kScanLimit = 10;</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  <span class="keywordtype">int</span> Count = 0;</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;       NextI != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; Count &lt; kScanLimit; ++NextI) {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = *NextI;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="keywordtype">bool</span> ZeroData;</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    int64_t <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <span class="comment">// Collect instructions that update memory tags with a FrameIndex operand</span></div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;    <span class="comment">// and (when applicable) constant size, and whose output registers are dead</span></div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="comment">// (the latter is almost always the case in practice). Since these</span></div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    <span class="comment">// instructions effectively have no inputs or outputs, we are free to skip</span></div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <span class="comment">// any non-aliasing instructions in between without tracking used registers.</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    <span class="keywordflow">if</span> (isMergeableStackTaggingInstruction(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, Size, ZeroData)) {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      <span class="keywordflow">if</span> (ZeroData != FirstZeroData)</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      Instrs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, Size);</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    }</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    <span class="comment">// Only count non-transient, non-tagging instructions toward the scan</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <span class="comment">// limit.</span></div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isTransient())</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;      ++Count;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160; </div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="comment">// Just in case, stop before the epilogue code starts.</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>) ||</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>))</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160; </div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="comment">// Reject anything that may alias the collected instructions.</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoadOrStore() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.hasUnmodeledSideEffects())</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;  }</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160; </div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <span class="comment">// New code will be inserted after the last tagging instruction we&#39;ve found.</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertI = Instrs.back().MI;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;  InsertI++;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160; </div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;  <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a>(Instrs,</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;                    [](<span class="keyword">const</span> TagStoreInstr &amp;Left, <span class="keyword">const</span> TagStoreInstr &amp;Right) {</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;                      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a2554a96c67bdd7d0a62855a844ec55b0a945d5e233cf7d6240f6b783b36a374ff">Left</a>.Offset &lt; <a class="code" href="README__P9_8txt.html#acc80d72f12f6f9e1d8eda2ec3d74133c">Right</a>.Offset;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;                    });</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160; </div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <span class="comment">// Make sure that we don&#39;t have any overlapping stores.</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  int64_t CurOffset = Instrs[0].Offset;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Instr : Instrs) {</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    <span class="keywordflow">if</span> (CurOffset &gt; Instr.Offset)</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;      <span class="keywordflow">return</span> NextI;</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    CurOffset = Instr.Offset + Instr.Size;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;  }</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160; </div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <span class="comment">// Find contiguous runs of tagged memory and emit shorter instruction</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <span class="comment">// sequencies for them when possible.</span></div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  TagStoreEdit TSE(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, FirstZeroData);</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  std::optional&lt;int64_t&gt; EndOffset;</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Instr : Instrs) {</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    <span class="keywordflow">if</span> (EndOffset &amp;&amp; *EndOffset != Instr.Offset) {</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;      <span class="comment">// Found a gap.</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;      TSE.emitCode(InsertI, TFI, <span class="comment">/*TryMergeSPUpdate = */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;      TSE.clear();</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    }</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160; </div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    TSE.addInstruction(Instr);</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    EndOffset = Instr.Offset + Instr.Size;</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  }</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160; </div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;  <span class="comment">// Multiple FP/SP updates in a loop cannot be described by CFI instructions.</span></div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;  TSE.emitCode(</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;      InsertI, TFI, <span class="comment">/*TryMergeSPUpdate = */</span></div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;      !MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#af1bf187d995b982c232e7c73bb45c832">needsAsyncDwarfUnwindInfo</a>(*MF));</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  <span class="keywordflow">return</span> InsertI;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;}</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160; </div>
<div class="line"><a name="l03767"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a18e36864a4c4102c7db86bc12478bf2d"> 3767</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a18e36864a4c4102c7db86bc12478bf2d">AArch64FrameLowering::processFunctionBeforeFrameIndicesReplaced</a>(</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS = <span class="keyword">nullptr</span>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64FrameLowering_8cpp.html#aa35f77c232647ae41f22de0aff7f19a6">StackTaggingMergeSetTag</a>)</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : MF)</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> II = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.begin(); II != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.end();)</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;        II = tryMergeAdjacentSTG(II, <span class="keyword">this</span>, RS);</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;}</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;<span class="comment">/// For Win64 AArch64 EH, the offset to the Unwind object is from the SP</span></div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;<span class="comment">/// before the update.  This is easily retrieved as it is exactly the offset</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;<span class="comment">/// that is set in processFunctionBeforeFrameFinalized.</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#ad6591055c1ba6d0a1033510f7a4eab65"> 3778</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ad6591055c1ba6d0a1033510f7a4eab65">AArch64FrameLowering::getFrameIndexReferencePreferSP</a>(</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">int</span> FI, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg,</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <span class="keywordtype">bool</span> IgnoreSPUpdates)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;  <span class="keywordflow">if</span> (IgnoreSPUpdates) {</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Offset from the SP for &quot;</span> &lt;&lt; FI &lt;&lt; <span class="stringliteral">&quot; is &quot;</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;                      &lt;&lt; MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    FrameReg = AArch64::SP;</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI));</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  }</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160; </div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="comment">// Go to common code if we cannot provide sp + offset.</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() ||</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#a7b316ba6e060bc850312c3d294130878">getStackSizeSVE</a>() ||</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>()-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">hasStackRealignment</a>(MF))</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#ab860729e618e5a2dd9e7e0feccdbe7e3">getFrameIndexReference</a>(MF, FI, FrameReg);</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160; </div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  FrameReg = AArch64::SP;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64FrameLowering_8cpp.html#abfe6f4589d25ac776ff98f1ac68518a6">getStackOffset</a>(MF, MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI));</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;}</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="comment">/// The parent frame offset (aka dispFrame) is only used on X86_64 to retrieve</span></div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;<span class="comment">/// the parent&#39;s frame pointer</span></div>
<div class="line"><a name="l03801"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#af07ecf9cc7d99e3037274b61842d75ce"> 3801</a></span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#af07ecf9cc7d99e3037274b61842d75ce">AArch64FrameLowering::getWinEHParentFrameOffset</a>(</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;}</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;<span class="comment">/// Funclets only need to account for space for the callee saved registers,</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="comment">/// as the locals are accounted for in the parent&#39;s stack frame.</span></div>
<div class="line"><a name="l03808"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#a97643b28151d68d2cec55176e739205d"> 3808</a></span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#a97643b28151d68d2cec55176e739205d">AArch64FrameLowering::getWinEHFuncletFrameSize</a>(</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="comment">// This is the size of the pushed CSRs.</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <span class="keywordtype">unsigned</span> CSSize =</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;()-&gt;getCalleeSavedStackSize();</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="comment">// This is the amount of stack a funclet needs to allocate.</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(CSSize + MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac50604920b4866e09017dfff36632593">getMaxCallFrameSize</a>(),</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;                 <a class="code" href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">getStackAlign</a>());</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;}</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160; </div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;<span class="keyword">struct </span>FrameObject {</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <span class="keywordtype">bool</span> IsValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <span class="comment">// Index of the object in MFI.</span></div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="keywordtype">int</span> ObjectIndex = 0;</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="comment">// Group ID this object belongs to.</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="keywordtype">int</span> GroupIndex = -1;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <span class="comment">// This object should be placed first (closest to SP).</span></div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="keywordtype">bool</span> ObjectFirst = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="comment">// This object&#39;s group (which always contains the object with</span></div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <span class="comment">// ObjectFirst==true) should be placed first.</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <span class="keywordtype">bool</span> GroupFirst = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;};</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160; </div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;<span class="keyword">class </span>GroupBuilder {</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> CurrentMembers;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <span class="keywordtype">int</span> NextGroupIndex = 0;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;  std::vector&lt;FrameObject&gt; &amp;Objects;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160; </div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  GroupBuilder(std::vector&lt;FrameObject&gt; &amp;Objects) : Objects(Objects) {}</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <span class="keywordtype">void</span> AddMember(<span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) { CurrentMembers.push_back(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>); }</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="keywordtype">void</span> EndCurrentGroup() {</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keywordflow">if</span> (CurrentMembers.size() &gt; 1) {</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;      <span class="comment">// Create a new group with the current member list. This might remove them</span></div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;      <span class="comment">// from their pre-existing groups. That&#39;s OK, dealing with overlapping</span></div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;      <span class="comment">// groups is too hard and unlikely to make a difference.</span></div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;group:&quot;</span>);</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> : CurrentMembers) {</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        Objects[<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>].GroupIndex = NextGroupIndex;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      }</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      NextGroupIndex++;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    }</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    CurrentMembers.clear();</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;  }</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;};</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160; </div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;<span class="keywordtype">bool</span> FrameObjectCompare(<span class="keyword">const</span> FrameObject &amp;A, <span class="keyword">const</span> FrameObject &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <span class="comment">// Objects at a lower index are closer to FP; objects at a higher index are</span></div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;  <span class="comment">// closer to SP.</span></div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="comment">// For consistency in our comparison, all invalid objects are placed</span></div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;  <span class="comment">// at the end. This also allows us to stop walking when we hit the</span></div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;  <span class="comment">// first invalid item after it&#39;s all sorted.</span></div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <span class="comment">// The &quot;first&quot; object goes first (closest to SP), followed by the members of</span></div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  <span class="comment">// the &quot;first&quot; group.</span></div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="comment">// The rest are sorted by the group index to keep the groups together.</span></div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;  <span class="comment">// Higher numbered groups are more likely to be around longer (i.e. untagged</span></div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;  <span class="comment">// in the function epilogue and not at some earlier point). Place them closer</span></div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;  <span class="comment">// to SP.</span></div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <span class="comment">// If all else equal, sort by the object index to keep the objects in the</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  <span class="comment">// original order.</span></div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  <span class="keywordflow">return</span> std::make_tuple(!<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.IsValid, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.ObjectFirst, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.GroupFirst, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.GroupIndex,</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;                         <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.ObjectIndex) &lt;</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;         std::make_tuple(!<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.IsValid, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.ObjectFirst, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.GroupFirst, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.GroupIndex,</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;                         <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.ObjectIndex);</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;}</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160; </div>
<div class="line"><a name="l03882"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64FrameLowering.html#aa2b80c1201a1baeb6ee4466e970957ba"> 3882</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AArch64FrameLowering.html#aa2b80c1201a1baeb6ee4466e970957ba">AArch64FrameLowering::orderFrameObjects</a>(</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;ObjectsToAllocate)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64FrameLowering_8cpp.html#a2e2b4e0cd0da3e30473b2d4ada9548bf">OrderFrameObjects</a> || ObjectsToAllocate.empty())</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160; </div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;  std::vector&lt;FrameObject&gt; FrameObjects(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">getObjectIndexEnd</a>());</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Obj : ObjectsToAllocate) {</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    FrameObjects[Obj].IsValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    FrameObjects[Obj].ObjectIndex = Obj;</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;  }</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160; </div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  <span class="comment">// Identify stack slots that are tagged at the same time.</span></div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  GroupBuilder GB(FrameObjects);</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugInstr())</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a>;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      <span class="keywordflow">case</span> AArch64::STGloop:</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;      <span class="keywordflow">case</span> AArch64::STZGloop:</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;        <a class="code" href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a> = 3;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;      <span class="keywordflow">case</span> AArch64::STGOffset:</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;      <span class="keywordflow">case</span> AArch64::STZGOffset:</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;      <span class="keywordflow">case</span> AArch64::ST2GOffset:</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      <span class="keywordflow">case</span> AArch64::STZ2GOffset:</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;        <a class="code" href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a> = 1;</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;        <a class="code" href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a> = -1;</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      }</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160; </div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <span class="keywordtype">int</span> TaggedFI = -1;</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a> &gt;= 0) {</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a>);</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad7213433bd60dc33020246384dc18b9b">isFI</a>()) {</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;          <span class="keywordtype">int</span> FI = MO.<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>();</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;          <span class="keywordflow">if</span> (FI &gt;= 0 &amp;&amp; FI &lt; MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">getObjectIndexEnd</a>() &amp;&amp;</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;              FrameObjects[FI].IsValid)</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;            TaggedFI = FI;</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;        }</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      }</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160; </div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      <span class="comment">// If this is a stack tagging instruction for a slot that is not part of a</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;      <span class="comment">// group yet, either start a new group or add it to the current one.</span></div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      <span class="keywordflow">if</span> (TaggedFI &gt;= 0)</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;        GB.AddMember(TaggedFI);</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;        GB.EndCurrentGroup();</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    }</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="comment">// Groups should never span multiple basic blocks.</span></div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    GB.EndCurrentGroup();</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;  }</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160; </div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;  <span class="comment">// If the function&#39;s tagged base pointer is pinned to a stack slot, we want to</span></div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;  <span class="comment">// put that slot first when possible. This will likely place it at SP + 0,</span></div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  <span class="comment">// and save one instruction when generating the base pointer because IRG does</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  <span class="comment">// not allow an immediate offset.</span></div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> &amp;AFI = *MF.getInfo&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  std::optional&lt;int&gt; TBPI = AFI.<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#ab1bcbdd777fab16bc7306fe213403753">getTaggedBasePointerIndex</a>();</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  <span class="keywordflow">if</span> (TBPI) {</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    FrameObjects[*TBPI].ObjectFirst = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    FrameObjects[*TBPI].GroupFirst = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    <span class="keywordtype">int</span> FirstGroupIndex = FrameObjects[*TBPI].GroupIndex;</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    <span class="keywordflow">if</span> (FirstGroupIndex &gt;= 0)</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;      <span class="keywordflow">for</span> (FrameObject &amp;<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a> : FrameObjects)</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a>.GroupIndex == FirstGroupIndex)</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;          <a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a>.GroupFirst = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;  }</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160; </div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a>(FrameObjects, FrameObjectCompare);</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160; </div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Obj : FrameObjects) {</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    <span class="comment">// All invalid items are sorted at the end, so it&#39;s safe to stop.</span></div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <span class="keywordflow">if</span> (!Obj.IsValid)</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    ObjectsToAllocate[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++] = Obj.ObjectIndex;</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;  }</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160; </div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Final frame order:\n&quot;</span>; <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Obj</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;                                                    : FrameObjects) {</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    <span class="keywordflow">if</span> (!Obj.IsValid)</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Obj.ObjectIndex &lt;&lt; <span class="stringliteral">&quot;: group &quot;</span> &lt;&lt; Obj.GroupIndex;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (Obj.ObjectFirst)</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, first&quot;</span>;</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    <span class="keywordflow">if</span> (Obj.GroupFirst)</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, group-first&quot;</span>;</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;  });</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00077">FileCheck.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4a8d56726b9e91d336422a546d126a0f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4a8d56726b9e91d336422a546d126a0f">llvm::MachineFunction::hasWinCFI</a></div><div class="ttdeci">bool hasWinCFI() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00754">MachineFunction.h:754</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab102f0f12dd38aeea5906b1d80c792ff"><div class="ttname"><a href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">llvm::alignTo</a></div><div class="ttdeci">uint64_t alignTo(uint64_t Size, Align A)</div><div class="ttdoc">Returns a multiple of A needed to store Size bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00155">Alignment.h:155</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c9fb92464f96c0e0f326d624e82eab"><div class="ttname"><a href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">llvm::isAsynchronousEHPersonality</a></div><div class="ttdeci">bool isAsynchronousEHPersonality(EHPersonality Pers)</div><div class="ttdoc">Returns true if this personality function catches asynchronous exceptions.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00049">EHPersonalities.h:49</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64ISD_html_a35ad1b8db0dfad0b69c9185c5fe24e19adfb5f0cc680a060e5ca88e6e923d7183"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19adfb5f0cc680a060e5ca88e6e923d7183">llvm::AArch64ISD::LOADgot</a></div><div class="ttdeci">@ LOADgot</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00078">AArch64ISelLowering.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a99cdf1b99c0f1b7e1bf2111aa7d2eaa3"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a99cdf1b99c0f1b7e1bf2111aa7d2eaa3">llvm::MachineFrameInfo::isMaxCallFrameSizeComputed</a></div><div class="ttdeci">bool isMaxCallFrameSizeComputed() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00661">MachineFrameInfo.h:661</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a0509430713d587eba74220a8375948a8"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">llvm::MachineFrameInfo::hasVarSizedObjects</a></div><div class="ttdeci">bool hasVarSizedObjects() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if the stack ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00355">MachineFrameInfo.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a05fb81a3747dd4f76894a66c574cf99e"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a05fb81a3747dd4f76894a66c574cf99e">llvm::AArch64Subtarget::isTargetWindows</a></div><div class="ttdeci">bool isTargetWindows() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00264">AArch64Subtarget.h:264</a></div></div>
<div class="ttc" id="aAArch64RegisterInfo_8h_html"><div class="ttname"><a href="AArch64RegisterInfo_8h.html">AArch64RegisterInfo.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00215">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="aMCDwarf_8h_html"><div class="ttname"><a href="MCDwarf_8h.html">MCDwarf.h</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aMachineInstr_8h_html"><div class="ttname"><a href="MachineInstr_8h.html">MachineInstr.h</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a66046fdf8661d5276f951337b0cf892d"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a66046fdf8661d5276f951337b0cf892d">llvm::MachineFrameInfo::estimateStackSize</a></div><div class="ttdeci">uint64_t estimateStackSize(const MachineFunction &amp;MF) const</div><div class="ttdoc">Estimate and return the size of the stack frame.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00137">MachineFrameInfo.cpp:137</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a77d96c1c7f31baecc71004069dbc5eda"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a77d96c1c7f31baecc71004069dbc5eda">llvm::MachineInstrBuilder::copyImplicitOps</a></div><div class="ttdeci">const MachineInstrBuilder &amp; copyImplicitOps(const MachineInstr &amp;OtherMI) const</div><div class="ttdoc">Copy all the implicit operands from OtherMI onto this one.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00321">MachineInstrBuilder.h:321</a></div></div>
<div class="ttc" id="aAArch64MachineFunctionInfo_8h_html"><div class="ttname"><a href="AArch64MachineFunctionInfo_8h.html">AArch64MachineFunctionInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_afd23983bb9fb4af65e27b56cc506edbc"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#afd23983bb9fb4af65e27b56cc506edbc">llvm::MachineRegisterInfo::isPhysRegUsed</a></div><div class="ttdeci">bool isPhysRegUsed(MCRegister PhysReg, bool SkipRegMaskTest=false) const</div><div class="ttdoc">Return true if the specified register is modified or read in this function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00589">MachineRegisterInfo.cpp:589</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedae41511c1ad4197da36cef403f34bac72"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedae41511c1ad4197da36cef403f34bac72">llvm::CallingConv::Win64</a></div><div class="ttdeci">@ Win64</div><div class="ttdoc">The C convention as implemented on Windows/x86-64 and AArch64.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00156">CallingConv.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCSymbol_html"><div class="ttname"><a href="classllvm_1_1MCSymbol.html">llvm::MCSymbol</a></div><div class="ttdoc">MCSymbol - Instances of this class represent a symbol name in the MC file, and MCSymbols are created ...</div><div class="ttdef"><b>Definition:</b> <a href="MCSymbol_8h_source.html#l00041">MCSymbol.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_afe7a4a37a90fa94396e12c3543339d15"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#afe7a4a37a90fa94396e12c3543339d15">llvm::AArch64Subtarget::swiftAsyncContextIsDynamicallySet</a></div><div class="ttdeci">bool swiftAsyncContextIsDynamicallySet() const</div><div class="ttdoc">Return whether FrameLowering should always set the &quot;extended frame present&quot; bit in FP,...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00340">AArch64Subtarget.h:340</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_af917fe9cdb70db029cf2ddd236fae738"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#af917fe9cdb70db029cf2ddd236fae738">getFixedObjectSize</a></div><div class="ttdeci">static unsigned getFixedObjectSize(const MachineFunction &amp;MF, const AArch64FunctionInfo *AFI, bool IsWin64, bool IsFunclet)</div><div class="ttdoc">Returns the size of the fixed object area (allocated next to sp on entry) On Win64 this may include a...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00383">AArch64FrameLowering.cpp:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1LivePhysRegs_html_adbf2afbb346e40106f344191309324fc"><div class="ttname"><a href="classllvm_1_1LivePhysRegs.html#adbf2afbb346e40106f344191309324fc">llvm::LivePhysRegs::addReg</a></div><div class="ttdeci">void addReg(MCPhysReg Reg)</div><div class="ttdoc">Adds a physical register and all its sub-registers to the set.</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8h_source.html#l00081">LivePhysRegs.h:81</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a149e6ac957dbd4ac7a2d1b0b01b30bdf"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a149e6ac957dbd4ac7a2d1b0b01b30bdf">DefaultSafeSPDisplacement</a></div><div class="ttdeci">static const unsigned DefaultSafeSPDisplacement</div><div class="ttdoc">This is the biggest offset to the stack pointer we can encode in aarch64 instructions (without using ...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00346">AArch64FrameLowering.cpp:346</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64__AM_html_a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938"><div class="ttname"><a href="namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1a1d97e13eb9923037fe733eda83b7f938">llvm::AArch64_AM::LSL</a></div><div class="ttdeci">@ LSL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AddressingModes_8h_source.html#l00035">AArch64AddressingModes.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00157">MachineRegisterInfo.cpp:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html_af0c649dd3863684f18821123651f924c"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html#af0c649dd3863684f18821123651f924c">llvm::MachineModuleInfo::getContext</a></div><div class="ttdeci">const MCContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00139">MachineModuleInfo.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a60fda2b22a00a8667e646fa8701d85b0"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a60fda2b22a00a8667e646fa8701d85b0">llvm::TargetRegisterInfo::isGeneralPurposeRegister</a></div><div class="ttdeci">virtual bool isGeneralPurposeRegister(const MachineFunction &amp;MF, MCRegister PhysReg) const</div><div class="ttdoc">Returns true if PhysReg is a general purpose register.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00588">TargetRegisterInfo.h:588</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_aab735eb6b844f1b683d12013a083b4e2"><div class="ttname"><a href="classllvm_1_1StackOffset.html#aab735eb6b844f1b683d12013a083b4e2">llvm::StackOffset::get</a></div><div class="ttdeci">static StackOffset get(int64_t Fixed, int64_t Scalable)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00047">TypeSize.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a469793f0416704ca132c5c91f73adbdd"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a469793f0416704ca132c5c91f73adbdd">produceCompactUnwindFrame</a></div><div class="ttdeci">static bool produceCompactUnwindFrame(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02438">AArch64FrameLowering.cpp:2438</a></div></div>
<div class="ttc" id="aAArch64MIPeepholeOpt_8cpp_html_a9c374320ed4e895f9afa199987182bd2"><div class="ttname"><a href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a></div><div class="ttdeci">unsigned RegSize</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MIPeepholeOpt_8cpp_source.html#l00123">AArch64MIPeepholeOpt.cpp:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1ac8d27532cfd1d1f032ecbff2ba3611"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">llvm::MachineInstrBuilder::add</a></div><div class="ttdeci">const MachineInstrBuilder &amp; add(const MachineOperand &amp;MO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00224">MachineInstrBuilder.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_aaa6625e357c6806a89b36759ae16b630"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#aaa6625e357c6806a89b36759ae16b630">llvm::AArch64FunctionInfo::needsDwarfUnwindInfo</a></div><div class="ttdeci">bool needsDwarfUnwindInfo(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8cpp_source.html#l00132">AArch64MachineFunctionInfo.cpp:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00344">BitVector.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_ad34f7e3cd7a9add3ab2529e267b48004"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">llvm::TargetSubtargetInfo::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00095">TargetSubtargetInfo.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad51b0d1c80a9dbf0eea9162e2e3ec0dd"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">llvm::MachineInstrBuilder::addCFIIndex</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addCFIIndex(unsigned CFIIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00247">MachineInstrBuilder.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7d2f8efd82042b4cf611ba10e9e79ed0"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7d2f8efd82042b4cf611ba10e9e79ed0">llvm::MachineBasicBlock::isEHFuncletEntry</a></div><div class="ttdeci">bool isEHFuncletEntry() const</div><div class="ttdoc">Returns true if this is the entry block of an EH funclet.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00606">MachineBasicBlock.h:606</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_a1112b818386ec01ddfdf3a5d0024eb17"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a></div><div class="ttdeci">return AArch64::GPR64RegClass contains(Reg)</div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfa29275c05d0afdbda643f7a0fbad83832"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa29275c05d0afdbda643f7a0fbad83832">llvm::CodeModel::Medium</a></div><div class="ttdeci">@ Medium</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a0d496cc15e312863869a384532968143"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">llvm::MachineFunction::getMachineMemOperand</a></div><div class="ttdeci">MachineMemOperand * getMachineMemOperand(MachinePointerInfo PtrInfo, MachineMemOperand::Flags f, uint64_t s, Align base_alignment, const AAMDNodes &amp;AAInfo=AAMDNodes(), const MDNode *Ranges=nullptr, SyncScope::ID SSID=SyncScope::System, AtomicOrdering Ordering=AtomicOrdering::NotAtomic, AtomicOrdering FailureOrdering=AtomicOrdering::NotAtomic)</div><div class="ttdoc">getMachineMemOperand - Allocate a new MachineMemOperand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00469">MachineFunction.cpp:469</a></div></div>
<div class="ttc" id="anamespacellvm_1_1HexagonISD_html_ab37bf6c49bc26c43ddd958218f63ba00ab5369d4484aebe3d84017e4cb5d9dc29"><div class="ttname"><a href="namespacellvm_1_1HexagonISD.html#ab37bf6c49bc26c43ddd958218f63ba00ab5369d4484aebe3d84017e4cb5d9dc29">llvm::HexagonISD::PFALSE</a></div><div class="ttdeci">@ PFALSE</div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelLowering_8h_source.html#l00081">HexagonISelLowering.h:81</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda4eeb29fe27dc20afa4f443765f45f9a5"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda4eeb29fe27dc20afa4f443765f45f9a5">llvm::CallingConv::PreserveMost</a></div><div class="ttdeci">@ PreserveMost</div><div class="ttdoc">Used for runtime calls that preserves most registers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00063">CallingConv.h:63</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegisterInfo_html_a0a20b56d95a9020588d573b6f7340cd5"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#a0a20b56d95a9020588d573b6f7340cd5">llvm::MCRegisterInfo::getDwarfRegNum</a></div><div class="ttdeci">int getDwarfRegNum(MCRegister RegNum, bool isEH) const</div><div class="ttdoc">Map a target register to an equivalent dwarf register number.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8cpp_source.html#l00068">MCRegisterInfo.cpp:68</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXCvtMode_html_ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fabed14095422ca68c13ae216fe4edb9c3">llvm::NVPTX::PTXCvtMode::RPI</a></div><div class="ttdeci">@ RPI</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00136">NVPTX.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegisterInfo_html_af946f316ed42f8b5eb99735a3b587ab5"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#af946f316ed42f8b5eb99735a3b587ab5">llvm::MCRegisterInfo::getNumRegs</a></div><div class="ttdeci">unsigned getNumRegs() const</div><div class="ttdoc">Return the number of registers this target has (useful for sizing arrays holding per register informa...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00491">MCRegisterInfo.h:491</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3a91375dbee36ddeeee15b974e39782c"><div class="ttname"><a href="namespacellvm.html#a3a91375dbee36ddeeee15b974e39782c">llvm::getBLRCallOpcode</a></div><div class="ttdeci">unsigned getBLRCallOpcode(const MachineFunction &amp;MF)</div><div class="ttdoc">Return opcode to be used for indirect calls.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8cpp_source.html#l08305">AArch64InstrInfo.cpp:8305</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64RegisterInfo_html_af855b9574123510dd91bee730edba54b"><div class="ttname"><a href="classllvm_1_1AArch64RegisterInfo.html#af855b9574123510dd91bee730edba54b">llvm::AArch64RegisterInfo::getBaseRegister</a></div><div class="ttdeci">unsigned getBaseRegister() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64RegisterInfo_8cpp_source.html#l00494">AArch64RegisterInfo.cpp:494</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1aa4357710f3fd6e616e13b5c16dc0d8"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">llvm::BitVector::set_bits</a></div><div class="ttdeci">iterator_range&lt; const_set_bits_iterator &gt; set_bits() const</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00133">BitVector.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a1cf1ee0c8e45ead80ed78b4866d9cbee"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a1cf1ee0c8e45ead80ed78b4866d9cbee">llvm::AArch64FunctionInfo::setSwiftAsyncContextFrameIdx</a></div><div class="ttdeci">void setSwiftAsyncContextFrameIdx(int FI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00442">AArch64MachineFunctionInfo.h:442</a></div></div>
<div class="ttc" id="aMachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LivePhysRegs_html"><div class="ttname"><a href="classllvm_1_1LivePhysRegs.html">llvm::LivePhysRegs</a></div><div class="ttdoc">A set of physical registers with utility functions to track liveness when walking backward/forward th...</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8h_source.html#l00050">LivePhysRegs.h:50</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_acc80d72f12f6f9e1d8eda2ec3d74133c"><div class="ttname"><a href="README__P9_8txt.html#acc80d72f12f6f9e1d8eda2ec3d74133c">Right</a></div><div class="ttdeci">Vector Shift Left Right</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00118">README_P9.txt:118</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_aa558d4d2ff55bd212df17400c6715343"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#aa558d4d2ff55bd212df17400c6715343">invalidateRegisterPairing</a></div><div class="ttdeci">static bool invalidateRegisterPairing(unsigned Reg1, unsigned Reg2, bool UsesWinAAPCS, bool NeedsWinCFI, bool NeedsFrameRecord, bool IsFirst, const TargetRegisterInfo *TRI)</div><div class="ttdoc">Returns true if Reg1 and Reg2 cannot be paired using a ldp/stp instruction.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02478">AArch64FrameLowering.cpp:2478</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a87849514193302b75f50a8092f94b98a"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">llvm::TargetSubtargetInfo::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const</div><div class="ttdoc">getRegisterInfo - If register information is available, return it.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00127">TargetSubtargetInfo.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a2feaa1c69335c6b9028076cd68c7a5f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">llvm::MachineOperand::setImm</a></div><div class="ttdeci">void setImm(int64_t immVal)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00684">MachineOperand.h:684</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab622d694b5fcb0edb99159f1ebdcdb6b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">llvm::MachineBasicBlock::findDebugLoc</a></div><div class="ttdeci">DebugLoc findDebugLoc(instr_iterator MBBI)</div><div class="ttdoc">Find the next valid DebugLoc starting at MBBI, skipping any DBG_VALUE and DBG_LABEL instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01397">MachineBasicBlock.cpp:1397</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00236">TargetRegisterInfo.h:236</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegisterInfo_html_a8ce9439c5f364d8b85930e0ee689bbb8"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#a8ce9439c5f364d8b85930e0ee689bbb8">llvm::MCRegisterInfo::getEncodingValue</a></div><div class="ttdeci">uint16_t getEncodingValue(MCRegister RegNo) const</div><div class="ttdoc">Returns the encoding for RegNo.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00553">MCRegisterInfo.h:553</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a362113d81c98925d063d3ad6602a1e17"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a362113d81c98925d063d3ad6602a1e17">llvm::AArch64FrameLowering::enableStackSlotScavenging</a></div><div class="ttdeci">bool enableStackSlotScavenging(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Returns true if the stack slot holes in the fixed and callee-save stack area should be used when allo...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03202">AArch64FrameLowering.cpp:3202</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a39505e1fb9837807a81c02bd1eef7418"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">llvm::AArch64Subtarget::getInstrInfo</a></div><div class="ttdeci">const AArch64InstrInfo * getInstrInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00181">AArch64Subtarget.h:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00432">Attributes.h:432</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a76635e63bbdb187ca4030f7570158552"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a76635e63bbdb187ca4030f7570158552">fixupSEHOpcode</a></div><div class="ttdeci">static void fixupSEHOpcode(MachineBasicBlock::iterator MBBI, unsigned LocalStackSize)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01090">AArch64FrameLowering.cpp:1090</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_ab63a202288b59ede08326547a2126c8a"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#ab63a202288b59ede08326547a2126c8a">getPrologueDeath</a></div><div class="ttdeci">static unsigned getPrologueDeath(MachineFunction &amp;MF, unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02428">AArch64FrameLowering.cpp:2428</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_ad2f0da8ab6518a9d252876e7b996b10b"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#ad2f0da8ab6518a9d252876e7b996b10b">llvm::AArch64FrameLowering::assignCalleeSavedSpillSlots</a></div><div class="ttdeci">bool assignCalleeSavedSpillSlots(MachineFunction &amp;MF, const TargetRegisterInfo *TRI, std::vector&lt; CalleeSavedInfo &gt; &amp;CSI, unsigned &amp;MinCSFrameIndex, unsigned &amp;MaxCSFrameIndex) const override</div><div class="ttdoc">assignCalleeSavedSpillSlots - Allows target to override spill slot assignment logic.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03149">AArch64FrameLowering.cpp:3149</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a54ef793fa42da6aa79a741b5e893111d"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a54ef793fa42da6aa79a741b5e893111d">llvm::AArch64FrameLowering::hasFP</a></div><div class="ttdeci">bool hasFP(const MachineFunction &amp;MF) const override</div><div class="ttdoc">hasFP - Return true if the specified function should have a dedicated frame pointer register.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00427">AArch64FrameLowering.cpp:427</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac51e2d34abb79b72afef355fac525c76"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">llvm::MachineFrameInfo::getObjectIndexEnd</a></div><div class="ttdeci">int getObjectIndexEnd() const</div><div class="ttdoc">Return one past the maximum frame object index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00410">MachineFrameInfo.h:410</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a56db9c3cbc621caf7d84f6982f095392"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a56db9c3cbc621caf7d84f6982f095392">determineSVEStackObjectOffsets</a></div><div class="ttdeci">static int64_t determineSVEStackObjectOffsets(MachineFrameInfo &amp;MFI, int &amp;MinCSFrameIndex, int &amp;MaxCSFrameIndex, bool AssignOffsets)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03237">AArch64FrameLowering.cpp:3237</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949">llvm::CodeModel::Kernel</a></div><div class="ttdeci">@ Kernel</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ad7213433bd60dc33020246384dc18b9b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad7213433bd60dc33020246384dc18b9b">llvm::MachineOperand::isFI</a></div><div class="ttdeci">bool isFI() const</div><div class="ttdoc">isFI - Tests if this is a MO_FrameIndex operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00339">MachineOperand.h:339</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_ac585fc64555950b121905c6d28306107"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#ac585fc64555950b121905c6d28306107">llvm::AArch64FunctionInfo::setTaggedBasePointerOffset</a></div><div class="ttdeci">void setTaggedBasePointerOffset(unsigned Offset)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00418">AArch64MachineFunctionInfo.h:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a4244b5097aed19eb6bcec6a9905f3cd3"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a4244b5097aed19eb6bcec6a9905f3cd3">llvm::MCCFIInstruction::createSameValue</a></div><div class="ttdeci">static MCCFIInstruction createSameValue(MCSymbol *L, unsigned Register)</div><div class="ttdoc">.cfi_same_value Current value of Register is the same as in the previous frame.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00616">MCDwarf.h:616</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegScavenger_html_a28849ec4920f5ee3f97d344633e695f4"><div class="ttname"><a href="classllvm_1_1RegScavenger.html#a28849ec4920f5ee3f97d344633e695f4">llvm::RegScavenger::FindUnusedReg</a></div><div class="ttdeci">Register FindUnusedReg(const TargetRegisterClass *RC) const</div><div class="ttdoc">Find an unused register of the specified register class.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterScavenging_8cpp_source.html#l00266">RegisterScavenging.cpp:266</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac50604920b4866e09017dfff36632593"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac50604920b4866e09017dfff36632593">llvm::MachineFrameInfo::getMaxCallFrameSize</a></div><div class="ttdeci">unsigned getMaxCallFrameSize() const</div><div class="ttdoc">Return the maximum size of a call frame that must be allocated for an outgoing function call.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00654">MachineFrameInfo.h:654</a></div></div>
<div class="ttc" id="aSPIRVModuleAnalysis_8cpp_html_acaab1e2660e7055669741c9f485e26c5"><div class="ttname"><a href="SPIRVModuleAnalysis_8cpp.html#acaab1e2660e7055669741c9f485e26c5">OpIndex</a></div><div class="ttdeci">unsigned OpIndex</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVModuleAnalysis_8cpp_source.html#l00046">SPIRVModuleAnalysis.cpp:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCISD_html_a383dfc381bd557f340886bb106e3d92ea37102c3bc1feaf214eb32e66a1ffc007"><div class="ttname"><a href="namespacellvm_1_1ARCISD.html#a383dfc381bd557f340886bb106e3d92ea37102c3bc1feaf214eb32e66a1ffc007">llvm::ARCISD::BL</a></div><div class="ttdeci">@ BL</div><div class="ttdef"><b>Definition:</b> <a href="ARCISelLowering_8h_source.html#l00034">ARCISelLowering.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html_a06e32f822cc82701a5652331bccab467"><div class="ttname"><a href="classllvm_1_1TypeSize.html#a06e32f822cc82701a5652331bccab467">llvm::TypeSize::Fixed</a></div><div class="ttdeci">static constexpr TypeSize Fixed(ScalarTy ExactSize)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00331">TypeSize.h:331</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00158">ArrayRef.h:158</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_aa4c9f6d9092cf5ca3819973f4b297050"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#aa4c9f6d9092cf5ca3819973f4b297050">llvm::AArch64Subtarget::getTargetLowering</a></div><div class="ttdeci">const AArch64TargetLowering * getTargetLowering() const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00178">AArch64Subtarget.h:178</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a03e76dd55b65ca0af930c3150413e148"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">llvm::MCCFIInstruction::cfiDefCfaOffset</a></div><div class="ttdeci">static MCCFIInstruction cfiDefCfaOffset(MCSymbol *L, int Offset)</div><div class="ttdoc">.cfi_def_cfa_offset modifies a rule for computing CFA.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00547">MCDwarf.h:547</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">llvm::MachineInstr::FrameDestroy</a></div><div class="ttdeci">@ FrameDestroy</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00086">MachineInstr.h:86</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_abeed081f0f43c83f3fb2ae6304848628"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#abeed081f0f43c83f3fb2ae6304848628">isTargetWindows</a></div><div class="ttdeci">static bool isTargetWindows(const MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01275">AArch64FrameLowering.cpp:1275</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad26bff839257f220557ce812b2159c72"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div><div class="ttdoc">Remove an instruction from the instruction list and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01323">MachineBasicBlock.cpp:1323</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c"><div class="ttname"><a href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c">llvm::SwiftAsyncFramePointerMode::Never</a></div><div class="ttdeci">@ Never</div><div class="ttdoc">Never set the bit.</div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64RegisterInfo_html_adf86b81af5da74aea6a11c36eadf41be"><div class="ttname"><a href="classllvm_1_1AArch64RegisterInfo.html#adf86b81af5da74aea6a11c36eadf41be">llvm::AArch64RegisterInfo::cannotEliminateFrame</a></div><div class="ttdeci">bool cannotEliminateFrame(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64RegisterInfo_8cpp_source.html#l00635">AArch64RegisterInfo.cpp:635</a></div></div>
<div class="ttc" id="aCoroutines_8cpp_html_ac781ce96aa25ba7f6fd38f72de665450"><div class="ttname"><a href="Coroutines_8cpp.html#ac781ce96aa25ba7f6fd38f72de665450">clear</a></div><div class="ttdeci">static void clear(coro::Shape &amp;Shape)</div><div class="ttdef"><b>Definition:</b> <a href="Coroutines_8cpp_source.html#l00149">Coroutines.cpp:149</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d508f23e2580095561902c39911fb9b"><div class="ttname"><a href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">llvm::classifyEHPersonality</a></div><div class="ttdeci">EHPersonality classifyEHPersonality(const Value *Pers)</div><div class="ttdoc">See if the given exception handling personality function is one that we understand.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00022">EHPersonalities.cpp:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html">llvm::AArch64FrameLowering</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8h_source.html#l00021">AArch64FrameLowering.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3d42df7595bb7da318e52023ffe95226afb5cb35207b915f8db3811db32920094"><div class="ttname"><a href="namespacellvm.html#a3d42df7595bb7da318e52023ffe95226afb5cb35207b915f8db3811db32920094">llvm::AArch64FrameOffsetCannotUpdate</a></div><div class="ttdeci">@ AArch64FrameOffsetCannotUpdate</div><div class="ttdoc">Offset cannot apply.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8h_source.html#l00438">AArch64InstrInfo.h:438</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ad2f4d922d52fe33423474951f704b91b"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad2f4d922d52fe33423474951f704b91b">llvm::MachineInstr::getFlags</a></div><div class="ttdeci">uint16_t getFlags() const</div><div class="ttdoc">Return the MI flags bitvector.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00352">MachineInstr.h:352</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2554a96c67bdd7d0a62855a844ec55b0a945d5e233cf7d6240f6b783b36a374ff"><div class="ttname"><a href="namespacellvm.html#a2554a96c67bdd7d0a62855a844ec55b0a945d5e233cf7d6240f6b783b36a374ff">llvm::AlignStyle::Left</a></div><div class="ttdeci">@ Left</div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a2caf1b89c0c90afebe4a20e9d1de0e81"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a2caf1b89c0c90afebe4a20e9d1de0e81">ReverseCSRRestoreSeq</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ReverseCSRRestoreSeq(&quot;reverse-csr-restore-seq&quot;, cl::desc(&quot;reverse the CSR restore sequence&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_html_abe2c24a8dc2fb979e8e54e15f088169ca8a880ec3350518f78cffab1bd18e97ba"><div class="ttname"><a href="namespacellvm.html#abe2c24a8dc2fb979e8e54e15f088169ca8a880ec3350518f78cffab1bd18e97ba">llvm::VFISAKind::SVE</a></div><div class="ttdeci">@ SVE</div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a9462cc875c5c343ff7ae9b3d68ce6305"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a9462cc875c5c343ff7ae9b3d68ce6305">llvm::AArch64FrameLowering::processFunctionBeforeFrameFinalized</a></div><div class="ttdeci">void processFunctionBeforeFrameFinalized(MachineFunction &amp;MF, RegScavenger *RS) const override</div><div class="ttdoc">processFunctionBeforeFrameFinalized - This method is called immediately before the specified function...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03325">AArch64FrameLowering.cpp:3325</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a85eb6ee9f537a283b2ba9964c54ab2f2"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">llvm::MachineInstrBuilder::addDef</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addDef(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register definition operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00116">MachineInstrBuilder.h:116</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa5e4d7acf58e87826a15b94d37144f2b"><div class="ttname"><a href="namespacellvm.html#aa5e4d7acf58e87826a15b94d37144f2b">llvm::getDefRegState</a></div><div class="ttdeci">unsigned getDefRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00525">MachineInstrBuilder.h:525</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab1063ce5e180c89490fae50511a46a29"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">llvm::MachineFunction::front</a></div><div class="ttdeci">const MachineBasicBlock &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00882">MachineFunction.h:882</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a2e2b4e0cd0da3e30473b2d4ada9548bf"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a2e2b4e0cd0da3e30473b2d4ada9548bf">OrderFrameObjects</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; OrderFrameObjects(&quot;aarch64-order-frame-objects&quot;, cl::desc(&quot;sort stack allocations&quot;), cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adbcec9820951b0e3872c94cbd4e57c80"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">llvm::MachineBasicBlock::insertAfter</a></div><div class="ttdeci">iterator insertAfter(iterator I, MachineInstr *MI)</div><div class="ttdoc">Insert MI into the instruction list after I.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00958">MachineBasicBlock.h:958</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aAArch64TargetMachine_8h_html"><div class="ttname"><a href="AArch64TargetMachine_8h.html">AArch64TargetMachine.h</a></div></div>
<div class="ttc" id="aAArch64InstrInfo_8h_html"><div class="ttname"><a href="AArch64InstrInfo_8h.html">AArch64InstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_ac8934ae6c8b97148ebb1db39bd978b03"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#ac8934ae6c8b97148ebb1db39bd978b03">llvm::AArch64FrameLowering::resolveFrameOffsetReference</a></div><div class="ttdeci">StackOffset resolveFrameOffsetReference(const MachineFunction &amp;MF, int64_t ObjectOffset, bool isFixed, bool isSVE, Register &amp;FrameReg, bool PreferFP, bool ForSimm) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02294">AArch64FrameLowering.cpp:2294</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a6521d4d5560c03b2e6490883558b882c"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">llvm::TargetFrameLowering::getOffsetOfLocalArea</a></div><div class="ttdeci">int getOffsetOfLocalArea() const</div><div class="ttdoc">getOffsetOfLocalArea - This method returns the offset of the local area from the stack pointer on ent...</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00135">TargetFrameLowering.h:135</a></div></div>
<div class="ttc" id="aTarget_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MutableArrayRef_html"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html">llvm::MutableArrayRef</a></div><div class="ttdoc">MutableArrayRef - Represent a mutable reference to an array (0 or more elements consecutively in memo...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00027">ArrayRef.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_ab325d3abfa4e1b6a0aba6d6761203806"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#ab325d3abfa4e1b6a0aba6d6761203806">llvm::AArch64FunctionInfo::isStackRealigned</a></div><div class="ttdeci">bool isStackRealigned() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00236">AArch64MachineFunctionInfo.h:236</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ab09679b541a6ba1219b3602569847364"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab09679b541a6ba1219b3602569847364">llvm::MachineOperand::CreateImm</a></div><div class="ttdeci">static MachineOperand CreateImm(int64_t Val)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00815">MachineOperand.h:815</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64InstrInfo_html"><div class="ttname"><a href="classllvm_1_1AArch64InstrInfo.html">llvm::AArch64InstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8h_source.html#l00035">AArch64InstrInfo.h:35</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_ae7fc2fb0e2d536219c1193f1a178e7db"><div class="ttname"><a href="README-SSE_8txt.html#ae7fc2fb0e2d536219c1193f1a178e7db">P2</a></div><div class="ttdeci">This might compile to this xmm1 xorps xmm0 movss xmm0 ret Now consider if the code caused xmm1 to get spilled This might produce this xmm1 movaps xmm0 movaps xmm1 movss xmm0 ret since the reload is only used by these we could fold it into the producing something like xmm1 movaps xmm0 ret saving two instructions The basic idea is that a reload from a spill if only one byte chunk is bring in zeros the one element instead of elements This can be used to simplify a variety of shuffle where the elements are fixed zeros This code generates ugly probably due to costs being off or&lt; 4 x float &gt; * P2</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00278">README-SSE.txt:278</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a41dd2d1da599f142e1fceae01f185c80"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a41dd2d1da599f142e1fceae01f185c80">CASE</a></div><div class="ttdeci">#define CASE(n)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a38b28a85f818b49d8806c150b8a5b4f7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00556">MachineOperand.h:556</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a27a80b2fc0f8820ecab9d99312bb4607"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a27a80b2fc0f8820ecab9d99312bb4607">llvm::AArch64FrameLowering::eliminateCallFramePseudoInstr</a></div><div class="ttdeci">MachineBasicBlock::iterator eliminateCallFramePseudoInstr(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator I) const override</div><div class="ttdoc">This method is called during prolog/epilog code insertion to eliminate call frame setup and destroy p...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00467">AArch64FrameLowering.cpp:467</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac2dc0fa143c9f2127f0501734577a0a0"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">llvm::MachineFunction::getInfo</a></div><div class="ttdeci">Ty * getInfo()</div><div class="ttdoc">getInfo - Keep track of various per-function pieces of information for backends that would like to do...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00770">MachineFunction.h:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1LivePhysRegs_html_a972dc07ee343dfa21fc84131ada0e688"><div class="ttname"><a href="classllvm_1_1LivePhysRegs.html#a972dc07ee343dfa21fc84131ada0e688">llvm::LivePhysRegs::addLiveIns</a></div><div class="ttdeci">void addLiveIns(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Adds all live-in registers of basic block MBB.</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8cpp_source.html#l00238">LivePhysRegs.cpp:238</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df">llvm::ISD::CATCHRET</a></div><div class="ttdeci">@ CATCHRET</div><div class="ttdoc">CATCHRET - Represents a return from a catch block funclet.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l01043">ISDOpcodes.h:1043</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a59137b132e07516767761d5decf7e252"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a59137b132e07516767761d5decf7e252">llvm::AArch64Subtarget::isTargetILP32</a></div><div class="ttdeci">bool isTargetILP32() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00273">AArch64Subtarget.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a74d93035f53f5e8c2aaea5a8f307972d"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">llvm::TargetFrameLowering::getStackAlign</a></div><div class="ttdeci">Align getStackAlign() const</div><div class="ttdoc">getStackAlignment - This method returns the number of bytes to which the stack pointer must be aligne...</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00100">TargetFrameLowering.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a53ca7cff9e929ba372da9780fdd44b02"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">llvm::MachineRegisterInfo::isReserved</a></div><div class="ttdeci">bool isReserved(MCRegister PhysReg) const</div><div class="ttdoc">isReserved - Returns true when PhysReg is a reserved register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00956">MachineRegisterInfo.h:956</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a568ff706b8c5991bd299c8c00b803897"><div class="ttname"><a href="classllvm_1_1BitVector.html#a568ff706b8c5991bd299c8c00b803897">llvm::BitVector::count</a></div><div class="ttdeci">size_type count() const</div><div class="ttdoc">count - Returns the number of bits which are set.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00155">BitVector.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64TargetLowering_html_aeed6ff19584b28f6a534e1aa8ed60037"><div class="ttname"><a href="classllvm_1_1AArch64TargetLowering.html#aeed6ff19584b28f6a534e1aa8ed60037">llvm::AArch64TargetLowering::supportSwiftError</a></div><div class="ttdeci">bool supportSwiftError() const override</div><div class="ttdoc">Return true if the target supports swifterror attribute.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00852">AArch64ISelLowering.h:852</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a12128506f277dac353cf7da1607881fc"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a12128506f277dac353cf7da1607881fc">InsertReturnAddressAuth</a></div><div class="ttdeci">static void InsertReturnAddressAuth(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, bool NeedsWinCFI, bool *HasWinCFI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01863">AArch64FrameLowering.cpp:1863</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00536">README.txt:536</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a033144966b9b009bef9482f378ce8bd1"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a033144966b9b009bef9482f378ce8bd1">EnableHomogeneousPrologEpilog</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableHomogeneousPrologEpilog(&quot;homogeneous-prolog-epilog&quot;, cl::Hidden, cl::desc(&quot;Emit homogeneous prologue and epilogue for the size &quot; &quot;optimization (default = off)&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a81917a56aebf01a4df724caade1dfd80"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a81917a56aebf01a4df724caade1dfd80">llvm::AArch64FunctionInfo::setHasRedZone</a></div><div class="ttdeci">void setHasRedZone(bool s)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00337">AArch64MachineFunctionInfo.h:337</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_abfe6f4589d25ac776ff98f1ac68518a6"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#abfe6f4589d25ac776ff98f1ac68518a6">getStackOffset</a></div><div class="ttdeci">static StackOffset getStackOffset(const MachineFunction &amp;MF, int64_t ObjectOffset)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02266">AArch64FrameLowering.cpp:2266</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00045">TargetRegisterInfo.h:45</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdoc">Describe properties that are true of each instruction in the target description file.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00198">MCInstrDesc.h:198</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_ab24db72f7bd10b13351812874015861b"><div class="ttname"><a href="lib_2Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a></div><div class="ttdeci">into llvm powi allowing the code generator to produce balanced multiplication trees First</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00054">README.txt:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">llvm::CodeModel::Small</a></div><div class="ttdeci">@ Small</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">llvm::MachineInstr::FrameSetup</a></div><div class="ttdeci">@ FrameSetup</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00084">MachineInstr.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">llvm::MCID::Flag</a></div><div class="ttdeci">Flag</div><div class="ttdoc">These should be considered private to the implementation of the MCInstrDesc class.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00148">MCInstrDesc.h:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html">llvm::MachineModuleInfo</a></div><div class="ttdoc">This class contains meta information specific to a module.</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00074">MachineModuleInfo.h:74</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a7a40dfef81dda9948bcafa33022d0fb5"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a7a40dfef81dda9948bcafa33022d0fb5">getSVEStackSize</a></div><div class="ttdeci">static StackOffset getSVEStackSize(const MachineFunction &amp;MF)</div><div class="ttdoc">Returns the size of the entire SVE stackframe (calleesaves + spills).</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00400">AArch64FrameLowering.cpp:400</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_aeb11e994c5580c80bbb0951eb05f9c80"><div class="ttname"><a href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">llvm::StackOffset::getFixed</a></div><div class="ttdeci">static StackOffset getFixed(int64_t Fixed)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00045">TypeSize.h:45</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a878af31656730eaf20a0686911cbe017"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a878af31656730eaf20a0686911cbe017">findScratchNonCalleeSaveRegister</a></div><div class="ttdeci">static unsigned findScratchNonCalleeSaveRegister(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00822">AArch64FrameLowering.cpp:822</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64__AM_html_aeae88f12b667477f90db9b726556b337"><div class="ttname"><a href="namespacellvm_1_1AArch64__AM.html#aeae88f12b667477f90db9b726556b337">llvm::AArch64_AM::getShifterImm</a></div><div class="ttdeci">static unsigned getShifterImm(AArch64_AM::ShiftExtendType ST, unsigned Imm)</div><div class="ttdoc">getShifterImm - Encode the shift type and amount: imm: 6-bit shift amount shifter: 000 ==&gt; lsl 001 ==...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AddressingModes_8h_source.html#l00099">AArch64AddressingModes.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegScavenger_html_a4a44764b1c5681c8fb057f13b3f30047"><div class="ttname"><a href="classllvm_1_1RegScavenger.html#a4a44764b1c5681c8fb057f13b3f30047">llvm::RegScavenger::backward</a></div><div class="ttdeci">void backward()</div><div class="ttdoc">Update internal register state and move MBB iterator backwards.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterScavenging_8cpp_source.html#l00239">RegisterScavenging.cpp:239</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ad718aae0ce2a188fa35cb2781024ffc0"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ad718aae0ce2a188fa35cb2781024ffc0">llvm::MachineFrameInfo::getStackID</a></div><div class="ttdeci">uint8_t getStackID(int ObjectIdx) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00731">MachineFrameInfo.h:731</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegScavenger_html_a14812153b6cf8c1cb26c3de8b96ba91c"><div class="ttname"><a href="classllvm_1_1RegScavenger.html#a14812153b6cf8c1cb26c3de8b96ba91c">llvm::RegScavenger::enterBasicBlockEnd</a></div><div class="ttdeci">void enterBasicBlockEnd(MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Start tracking liveness from the end of basic block MBB.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterScavenging_8cpp_source.html#l00087">RegisterScavenging.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a743e3df320fb6d257766fb061cfb16e3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a743e3df320fb6d257766fb061cfb16e3">llvm::MachineBasicBlock::instr_back</a></div><div class="ttdeci">MachineInstr &amp; instr_back()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00284">MachineBasicBlock.h:284</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64__AM_html_a22f623563f43de6d1aabcdfa9d341031"><div class="ttname"><a href="namespacellvm_1_1AArch64__AM.html#a22f623563f43de6d1aabcdfa9d341031">llvm::AArch64_AM::getShiftValue</a></div><div class="ttdeci">static unsigned getShiftValue(unsigned Imm)</div><div class="ttdoc">getShiftValue - Extract the shift value.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AddressingModes_8h_source.html#l00086">AArch64AddressingModes.h:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a330afa0baf556056f9c032480dd57347"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a330afa0baf556056f9c032480dd57347">llvm::MachineFunction::setHasWinCFI</a></div><div class="ttdeci">void setHasWinCFI(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00757">MachineFunction.h:757</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a14c39a24bf6ebbe339ae8a453c7fdd11"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">llvm::MachineFrameInfo::getStackSize</a></div><div class="ttdeci">uint64_t getStackSize() const</div><div class="ttdoc">Return the number of bytes that must be allocated to hold all of the fixed size frame objects.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00585">MachineFrameInfo.h:585</a></div></div>
<div class="ttc" id="aDebugLoc_8h_html"><div class="ttname"><a href="DebugLoc_8h.html">DebugLoc.h</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_ae5f813adf7cab5ad0f7a542b681ca95c"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#ae5f813adf7cab5ad0f7a542b681ca95c">emitShadowCallStackPrologue</a></div><div class="ttdeci">static void emitShadowCallStackPrologue(const TargetInstrInfo &amp;TII, MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, bool NeedsWinCFI, bool NeedsUnwindInfo)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01306">AArch64FrameLowering.cpp:1306</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_adf98860d7f42290f873c82a981eb0ea6"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">llvm::MachineFrameInfo::getObjectOffset</a></div><div class="ttdeci">int64_t getObjectOffset(int ObjectIdx) const</div><div class="ttdoc">Return the assigned stack offset of the specified object from the incoming stack pointer.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00526">MachineFrameInfo.h:526</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_ab860729e618e5a2dd9e7e0feccdbe7e3"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#ab860729e618e5a2dd9e7e0feccdbe7e3">llvm::AArch64FrameLowering::getFrameIndexReference</a></div><div class="ttdeci">StackOffset getFrameIndexReference(const MachineFunction &amp;MF, int FI, Register &amp;FrameReg) const override</div><div class="ttdoc">getFrameIndexReference - Provide a base+offset reference to an FI slot for debug info.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02237">AArch64FrameLowering.cpp:2237</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00075">BitVector.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_ae450f408644d907ec3e4ea018f764a0b"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#ae450f408644d907ec3e4ea018f764a0b">llvm::MCCFIInstruction::createEscape</a></div><div class="ttdeci">static MCCFIInstruction createEscape(MCSymbol *L, StringRef Vals, StringRef Comment=&quot;&quot;)</div><div class="ttdoc">.cfi_escape Allows the user to add arbitrary bytes to the unwind info.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00632">MCDwarf.h:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a839720705cb2401eb2e9dd30001e4ad5"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a839720705cb2401eb2e9dd30001e4ad5">llvm::AArch64FunctionInfo::hasStackFrame</a></div><div class="ttdeci">bool hasStackFrame() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00233">AArch64MachineFunctionInfo.h:233</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ae70474766f2a88bab5b2b77bcb22212b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ae70474766f2a88bab5b2b77bcb22212b">llvm::MachineFrameInfo::getObjectIndexBegin</a></div><div class="ttdeci">int getObjectIndexBegin() const</div><div class="ttdoc">Return the minimum frame object index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00407">MachineFrameInfo.h:407</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ac6672df14319c2e931c3b2c583ea837c"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">llvm::MachineInstrBuilder::addExternalSymbol</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addExternalSymbol(const char *FnName, unsigned TargetFlags=0) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00184">MachineInstrBuilder.h:184</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a73f427af3525340f74d7e85b984b82d6"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a73f427af3525340f74d7e85b984b82d6">convertCalleeSaveRestoreToSPPrePostIncDec</a></div><div class="ttdeci">static MachineBasicBlock::iterator convertCalleeSaveRestoreToSPPrePostIncDec(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, const TargetInstrInfo *TII, int CSStackSizeInc, bool NeedsWinCFI, bool *HasWinCFI, bool EmitCFI, MachineInstr::MIFlag FrameFlag=MachineInstr::FrameSetup, int CFAOffset=0)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01112">AArch64FrameLowering.cpp:1112</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a81504f733d0491a446a16ef1ba0a5c2a"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a81504f733d0491a446a16ef1ba0a5c2a">llvm::MachineFrameInfo::isCalleeSavedInfoValid</a></div><div class="ttdeci">bool isCalleeSavedInfoValid() const</div><div class="ttdoc">Has the callee saved info been calculated yet?</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00800">MachineFrameInfo.h:800</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a69a17a573c98c5ac8ff9fedcc9099807"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a69a17a573c98c5ac8ff9fedcc9099807">fixupCalleeSaveRestoreStackOffset</a></div><div class="ttdeci">static void fixupCalleeSaveRestoreStackOffset(MachineInstr &amp;MI, uint64_t LocalStackSize, bool NeedsWinCFI, bool *HasWinCFI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01226">AArch64FrameLowering.cpp:1226</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_af5302d38d9a16eee93f13a1579c8773d"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#af5302d38d9a16eee93f13a1579c8773d">llvm::MachineFrameInfo::isDeadObjectIndex</a></div><div class="ttdeci">bool isDeadObjectIndex(int ObjectIdx) const</div><div class="ttdoc">Returns true if the specified index corresponds to a dead object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00745">MachineFrameInfo.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a7477aafbbe989ad35b96fac186d8e9fd"><div class="ttname"><a href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the attribute list for this Function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00313">Function.h:313</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a0ca5d8ebe6f1e89b62a445fc3137bd2d"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a0ca5d8ebe6f1e89b62a445fc3137bd2d">computeCalleeSaveRegisterPairs</a></div><div class="ttdeci">static void computeCalleeSaveRegisterPairs(MachineFunction &amp;MF, ArrayRef&lt; CalleeSavedInfo &gt; CSI, const TargetRegisterInfo *TRI, SmallVectorImpl&lt; RegPairInfo &gt; &amp;RegPairs, bool NeedsFrameRecord)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02526">AArch64FrameLowering.cpp:2526</a></div></div>
<div class="ttc" id="aAArch64AddressingModes_8h_html"><div class="ttname"><a href="AArch64AddressingModes_8h.html">AArch64AddressingModes.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b"><div class="ttname"><a href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">llvm::OutputFileType::Object</a></div><div class="ttdeci">@ Object</div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_aa35f77c232647ae41f22de0aff7f19a6"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#aa35f77c232647ae41f22de0aff7f19a6">StackTaggingMergeSetTag</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; StackTaggingMergeSetTag(&quot;stack-tagging-merge-settag&quot;, cl::desc(&quot;merge settag instruction in function epilog&quot;), cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1TargetOptions_html_aad0fc1de8197ddf2c49346c5d92a2bec"><div class="ttname"><a href="classllvm_1_1TargetOptions.html#aad0fc1de8197ddf2c49346c5d92a2bec">llvm::TargetOptions::DisableFramePointerElim</a></div><div class="ttdeci">bool DisableFramePointerElim(const MachineFunction &amp;MF) const</div><div class="ttdoc">DisableFramePointerElim - This returns true if frame pointer elimination optimization should be disab...</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptionsImpl_8cpp_source.html#l00023">TargetOptionsImpl.cpp:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a6691cc6c9b7341348045f8d54a14e7a7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">llvm::MachineFunction::getMMI</a></div><div class="ttdeci">MachineModuleInfo &amp; getMMI() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00623">MachineFunction.h:623</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a87fa290ccfe9e8742e51e2ddb20f3754"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a87fa290ccfe9e8742e51e2ddb20f3754">llvm::TargetRegisterInfo::getSpillAlign</a></div><div class="ttdeci">Align getSpillAlign(const TargetRegisterClass &amp;RC) const</div><div class="ttdoc">Return the minimum required alignment in bytes for a spill slot for a register of this class.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00291">TargetRegisterInfo.h:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_ae748adf8316f78f9fc4f6a32e938da0a"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#ae748adf8316f78f9fc4f6a32e938da0a">llvm::AArch64FrameLowering::resolveFrameIndexReference</a></div><div class="ttdeci">StackOffset resolveFrameIndexReference(const MachineFunction &amp;MF, int FI, Register &amp;FrameReg, bool PreferFP, bool ForSimm) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02283">AArch64FrameLowering.cpp:2283</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a03258ce69ceadb08e189389468f7fd0a"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a03258ce69ceadb08e189389468f7fd0a">llvm::MachineInstrBuilder::addFrameIndex</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addFrameIndex(int Idx) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00152">MachineInstrBuilder.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a49f174e0e7941fe7dad04d4f948a2d63"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">llvm::MachineInstrBuilder::setMIFlag</a></div><div class="ttdeci">const MachineInstrBuilder &amp; setMIFlag(MachineInstr::MIFlag Flag) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00278">MachineInstrBuilder.h:278</a></div></div>
<div class="ttc" id="anamespacellvm_html_a18dec717578f39bfcff50e325c2d27c5"><div class="ttname"><a href="namespacellvm.html#a18dec717578f39bfcff50e325c2d27c5">llvm::isAArch64FrameOffsetLegal</a></div><div class="ttdeci">int isAArch64FrameOffsetLegal(const MachineInstr &amp;MI, StackOffset &amp;Offset, bool *OutUseUnscaledOp=nullptr, unsigned *OutUnscaledOp=nullptr, int64_t *EmittableOffset=nullptr)</div><div class="ttdoc">Check if the Offset is a valid frame offset for MI.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8cpp_source.html#l04646">AArch64InstrInfo.cpp:4646</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a4bf50af86f6d1f7d2dcf35e0ee18d1d3"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a4bf50af86f6d1f7d2dcf35e0ee18d1d3">llvm::AArch64FunctionInfo::getCalleeSaveBaseToFrameRecordOffset</a></div><div class="ttdeci">int getCalleeSaveBaseToFrameRecordOffset() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00422">AArch64MachineFunctionInfo.h:422</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_afb28a4deafe2954b0534cc6399ce518b"><div class="ttname"><a href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the function has the attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00640">Function.cpp:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_ad0e6256f93a13938e8e59828d5677e32"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ad0e6256f93a13938e8e59828d5677e32">llvm::TargetRegisterInfo::getSpillSize</a></div><div class="ttdeci">unsigned getSpillSize(const TargetRegisterClass &amp;RC) const</div><div class="ttdoc">Return the size in bytes of the stack slot allocated to hold a spilled copy of a register from class ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00285">TargetRegisterInfo.h:285</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html">llvm::WinEHFuncInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00090">WinEHFuncInfo.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a5c22366d9b2f68fba8285148c794a74d"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a5c22366d9b2f68fba8285148c794a74d">llvm::AArch64FrameLowering::resetCFIToInitialState</a></div><div class="ttdeci">void resetCFIToInitialState(MachineBasicBlock &amp;MBB) const override</div><div class="ttdoc">Emit CFI instructions that recreate the state of the unwind information upon fucntion entry.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00589">AArch64FrameLowering.cpp:589</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_acede596c16f946c19dacb339e25ff978"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#acede596c16f946c19dacb339e25ff978">getSVECalleeSaveSlotRange</a></div><div class="ttdeci">static bool getSVECalleeSaveSlotRange(const MachineFrameInfo &amp;MFI, int &amp;Min, int &amp;Max)</div><div class="ttdoc">returns true if there are any SVE callee saves.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03209">AArch64FrameLowering.cpp:3209</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a9284fd53296d2a2f8ae654d000971000"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">llvm::MachineFrameInfo::getObjectSize</a></div><div class="ttdeci">int64_t getObjectSize(int ObjectIdx) const</div><div class="ttdoc">Return the size of the specified object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00470">MachineFrameInfo.h:470</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8h_html"><div class="ttname"><a href="AArch64FrameLowering_8h.html">AArch64FrameLowering.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a5f494edc0a569c7fc9ff4181243be1ed"><div class="ttname"><a href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">llvm::Function::getCallingConv</a></div><div class="ttdeci">CallingConv::ID getCallingConv() const</div><div class="ttdoc">getCallingConv()/setCallingConv(CC) - These method get and set the calling convention of this functio...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00237">Function.h:237</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda75c7c151466ad7e041e9ed8aa4d5a4bf"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda75c7c151466ad7e041e9ed8aa4d5a4bf">llvm::CallingConv::CXX_FAST_TLS</a></div><div class="ttdeci">@ CXX_FAST_TLS</div><div class="ttdoc">Used for access functions.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00072">CallingConv.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac7c993678733273ea9d16db7ff87b2c6"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac7c993678733273ea9d16db7ff87b2c6">llvm::MachineFrameInfo::hasStackProtectorIndex</a></div><div class="ttdeci">bool hasStackProtectorIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00360">MachineFrameInfo.h:360</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a38d361ba1ba79b6217929ada0dd69cb6"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a38d361ba1ba79b6217929ada0dd69cb6">llvm::AArch64FrameLowering::spillCalleeSavedRegisters</a></div><div class="ttdeci">bool spillCalleeSavedRegisters(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, ArrayRef&lt; CalleeSavedInfo &gt; CSI, const TargetRegisterInfo *TRI) const override</div><div class="ttdoc">spillCalleeSavedRegisters - Issues instruction(s) to spill all callee saved registers and returns tru...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02718">AArch64FrameLowering.cpp:2718</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a8f2d167290e8314ff8c87503233ac631"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a8f2d167290e8314ff8c87503233ac631">llvm::AArch64Subtarget::getChkStkName</a></div><div class="ttdeci">const char * getChkStkName() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00393">AArch64Subtarget.h:393</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetOptions_html_a66a62a15c006f8bc55698e0bea465699"><div class="ttname"><a href="classllvm_1_1TargetOptions.html#a66a62a15c006f8bc55698e0bea465699">llvm::TargetOptions::SwiftAsyncFramePointer</a></div><div class="ttdeci">SwiftAsyncFramePointerMode SwiftAsyncFramePointer</div><div class="ttdoc">Control when and how the Swift async frame pointer bit should be set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptions_8h_source.html#l00243">TargetOptions.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1LivePhysRegs_html_a5c249924553aa84c5927b2335c490583"><div class="ttname"><a href="classllvm_1_1LivePhysRegs.html#a5c249924553aa84c5927b2335c490583">llvm::LivePhysRegs::available</a></div><div class="ttdeci">bool available(const MachineRegisterInfo &amp;MRI, MCPhysReg Reg) const</div><div class="ttdoc">Returns true if register Reg and no aliasing register is in the set.</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8cpp_source.html#l00141">LivePhysRegs.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_add1bf26f643dc758cdfb148eed30d0b3"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#add1bf26f643dc758cdfb148eed30d0b3">llvm::MCCFIInstruction::createNegateRAState</a></div><div class="ttdeci">static MCCFIInstruction createNegateRAState(MCSymbol *L)</div><div class="ttdoc">.cfi_negate_ra_state AArch64 negate RA state.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00597">MCDwarf.h:597</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a8ae9c5d17b40aa7be0189dd4f12dc315"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a8ae9c5d17b40aa7be0189dd4f12dc315">llvm::MachineRegisterInfo::getCalleeSavedRegs</a></div><div class="ttdeci">const MCPhysReg * getCalleeSavedRegs() const</div><div class="ttdoc">Returns list of callee saved registers.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00625">MachineRegisterInfo.cpp:625</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a26df76f51f398bf4954036667563e2be"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a26df76f51f398bf4954036667563e2be">llvm::AArch64FunctionInfo::setCalleeSaveBaseToFrameRecordOffset</a></div><div class="ttdeci">void setCalleeSaveBaseToFrameRecordOffset(int Offset)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00425">AArch64MachineFunctionInfo.h:425</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a8b3de6401453f275f010559d01834826"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8b3de6401453f275f010559d01834826">llvm::ISD::CLEANUPRET</a></div><div class="ttdeci">@ CLEANUPRET</div><div class="ttdoc">CLEANUPRET - Represents a return from a cleanup block funclet.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l01047">ISDOpcodes.h:1047</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html">llvm::AArch64FunctionInfo</a></div><div class="ttdoc">AArch64FunctionInfo - This class is derived from MachineFunctionInfo and contains private AArch64-spe...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00039">AArch64MachineFunctionInfo.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">llvm::RegState::Implicit</a></div><div class="ttdeci">@ Implicit</div><div class="ttdoc">Not emitted register (e.g. carry, or temporary result).</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00046">MachineInstrBuilder.h:46</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a298184c9a0cd665d7cfc55f6a59204a4"><div class="ttname"><a href="namespacellvm.html#a298184c9a0cd665d7cfc55f6a59204a4">llvm::MCPhysReg</a></div><div class="ttdeci">uint16_t MCPhysReg</div><div class="ttdoc">An unsigned integer type large enough to represent all physical registers, but not necessarily virtua...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00021">MCRegister.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegScavenger_html"><div class="ttname"><a href="classllvm_1_1RegScavenger.html">llvm::RegScavenger</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterScavenging_8h_source.html#l00034">RegisterScavenging.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a8320a54de0a273478de910ac3795058b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">llvm::MachineFrameInfo::getObjectAlign</a></div><div class="ttdeci">Align getObjectAlign(int ObjectIdx) const</div><div class="ttdoc">Return the alignment of the specified stack object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00484">MachineFrameInfo.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a3cd29e7edbcaceb5834eaa7d089a5bc4"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a3cd29e7edbcaceb5834eaa7d089a5bc4">llvm::MachineFrameInfo::setObjectOffset</a></div><div class="ttdeci">void setObjectOffset(int ObjectIdx, int64_t SPOffset)</div><div class="ttdoc">Set the stack frame offset of the specified object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00560">MachineFrameInfo.h:560</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5a3c6a2a8f3cda71661a17a0df700e8f9c">llvm::TargetStackID::ScalableVector</a></div><div class="ttdeci">@ ScalableVector</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00030">TargetFrameLowering.h:30</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a635e26839ab9a565d13a4a538d797b68"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a635e26839ab9a565d13a4a538d797b68">windowsRequiresStackProbe</a></div><div class="ttdeci">static bool windowsRequiresStackProbe(MachineFunction &amp;MF, uint64_t StackSizeInBytes)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00866">AArch64FrameLowering.cpp:866</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab8d7b8ff6803133d567fd4240e6364ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab8d7b8ff6803133d567fd4240e6364ce">llvm::MachineBasicBlock::getLastNonDebugInstr</a></div><div class="ttdeci">iterator getLastNonDebugInstr(bool SkipPseudoOp=true)</div><div class="ttdoc">Returns an iterator to the last non-debug instruction in the basic block, or end().</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00269">MachineBasicBlock.cpp:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a4a43990f48635e236888ab40daf04f2c"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a4a43990f48635e236888ab40daf04f2c">llvm::AArch64FrameLowering::getStackIDForScalableVectors</a></div><div class="ttdeci">TargetStackID::Value getStackIDForScalableVectors() const override</div><div class="ttdoc">Returns the StackID that scalable vectors should be associated with.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00377">AArch64FrameLowering.cpp:377</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ab1fb67187fc37e569cc5171cbebba873"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">llvm::TargetMachine::Options</a></div><div class="ttdeci">TargetOptions Options</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">TargetMachine.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a264402282f599b6181b6415278fbf849"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a264402282f599b6181b6415278fbf849">llvm::MachineInstr::setFlags</a></div><div class="ttdeci">void setFlags(unsigned flags)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00366">MachineInstr.h:366</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a9fded0dfc6857b39fcf1ed029ca145ef"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a9fded0dfc6857b39fcf1ed029ca145ef">llvm::AArch64FunctionInfo::getLocalStackSize</a></div><div class="ttdeci">uint64_t getLocalStackSize() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00249">AArch64MachineFunctionInfo.h:249</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a7f43397146b3eee4bcd4ff73ec27335f"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a7f43397146b3eee4bcd4ff73ec27335f">InsertSEH</a></div><div class="ttdeci">static MachineBasicBlock::iterator InsertSEH(MachineBasicBlock::iterator MBBI, const TargetInstrInfo &amp;TII, MachineInstr::MIFlag Flag)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00970">AArch64FrameLowering.cpp:970</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a03cf34252938b54f7e86c736f9fd7dc1"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a03cf34252938b54f7e86c736f9fd7dc1">llvm::MachineFrameInfo::CreateFixedObject</a></div><div class="ttdeci">int CreateFixedObject(uint64_t Size, int64_t SPOffset, bool IsImmutable, bool isAliased=false)</div><div class="ttdoc">Create a new object at a fixed location on the stack.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00083">MachineFrameInfo.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_aa5a3112b5a4dd39005325e09e523963b"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#aa5a3112b5a4dd39005325e09e523963b">llvm::AArch64FunctionInfo::setStackRealigned</a></div><div class="ttdeci">void setStackRealigned(bool s)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00237">AArch64MachineFunctionInfo.h:237</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a18fcadd076ad53e6df94e0ca7a80a9ef"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">llvm::MachineFunction::getFrameInfo</a></div><div class="ttdeci">MachineFrameInfo &amp; getFrameInfo()</div><div class="ttdoc">getFrameInfo - Return the frame info object for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00688">MachineFunction.h:688</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegScavenger_html_aecaae26e25f7f952810d98e50264b5fb"><div class="ttname"><a href="classllvm_1_1RegScavenger.html#aecaae26e25f7f952810d98e50264b5fb">llvm::RegScavenger::addScavengingFrameIndex</a></div><div class="ttdeci">void addScavengingFrameIndex(int FI)</div><div class="ttdoc">Add a scavenging frame index.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterScavenging_8h_source.html#l00143">RegisterScavenging.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a47760ffd22a82283df0f5da521feca2a"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">llvm::MachineInstrBuilder::addMemOperand</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addMemOperand(MachineMemOperand *MMO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00202">MachineInstrBuilder.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_aa76eab97e3072a1ebd4bf1ff00d19423"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#aa76eab97e3072a1ebd4bf1ff00d19423">llvm::TargetFrameLowering::getStackGrowthDirection</a></div><div class="ttdeci">StackDirection getStackGrowthDirection() const</div><div class="ttdoc">getStackGrowthDirection - Return the direction the stack grows</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00089">TargetFrameLowering.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_aae1cc37c03dc88bd71db86b6180b9d71"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#aae1cc37c03dc88bd71db86b6180b9d71">llvm::AArch64FunctionInfo::getVarArgsGPRSize</a></div><div class="ttdeci">unsigned getVarArgsGPRSize() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00348">AArch64MachineFunctionInfo.h:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a8d38ac8f86a38869b906ed0e2947b9d2"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a8d38ac8f86a38869b906ed0e2947b9d2">llvm::AArch64Subtarget::isCallingConvWin64</a></div><div class="ttdeci">bool isCallingConvWin64(CallingConv::ID CC) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00325">AArch64Subtarget.h:325</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_abda962a8d0de68f0817ed1837557713a"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">llvm::MCCFIInstruction::cfiDefCfa</a></div><div class="ttdeci">static MCCFIInstruction cfiDefCfa(MCSymbol *L, unsigned Register, int Offset)</div><div class="ttdoc">.cfi_def_cfa defines a rule for computing CFA as: take address from Register and add Offset to it.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00533">MCDwarf.h:533</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c6206e8d8fd98ecca8ac2c785ee9491"><div class="ttname"><a href="namespacellvm.html#a7c6206e8d8fd98ecca8ac2c785ee9491">llvm::emitFrameOffset</a></div><div class="ttdeci">void emitFrameOffset(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, unsigned DestReg, unsigned SrcReg, StackOffset Offset, const TargetInstrInfo *TII, MachineInstr::MIFlag=MachineInstr::NoFlags, bool SetNZCV=false, bool NeedsWinCFI=false, bool *HasWinCFI=nullptr, bool EmitCFAOffset=false, StackOffset InitialOffset={}, unsigned FrameReg=AArch64::SP)</div><div class="ttdoc">emitFrameOffset - Emit instructions as needed to set DestReg to SrcReg plus Offset.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8cpp_source.html#l04402">AArch64InstrInfo.cpp:4402</a></div></div>
<div class="ttc" id="aMachineModuleInfo_8h_html"><div class="ttname"><a href="MachineModuleInfo_8h.html">MachineModuleInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_a297243a501424b3f88e1295034db122d"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#a297243a501424b3f88e1295034db122d">llvm::WinEHFuncInfo::UnwindHelpFrameIdx</a></div><div class="ttdeci">int UnwindHelpFrameIdx</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00099">WinEHFuncInfo.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a492547015f6f9aaf93099d70b32e8d9a"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a492547015f6f9aaf93099d70b32e8d9a">llvm::AArch64FrameLowering::getNonLocalFrameIndexReference</a></div><div class="ttdeci">StackOffset getNonLocalFrameIndexReference(const MachineFunction &amp;MF, int FI) const override</div><div class="ttdoc">getNonLocalFrameIndexReference - This method returns the offset used to reference a frame index locat...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02247">AArch64FrameLowering.cpp:2247</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_aec748fa81e1488192450f0b2a8d1aeca"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">llvm::MachineInstrBuilder::addUse</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addUse(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register use operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00123">MachineInstrBuilder.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a81242a6cd5fbec123c8ed582bab0f26c"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a81242a6cd5fbec123c8ed582bab0f26c">llvm::AArch64FrameLowering::canUseRedZone</a></div><div class="ttdeci">bool canUseRedZone(const MachineFunction &amp;MF) const</div><div class="ttdoc">Can this function use the red zone for local allocations.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00405">AArch64FrameLowering.cpp:405</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">llvm::MachineInstr::MIFlag</a></div><div class="ttdeci">MIFlag</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00082">MachineInstr.h:82</a></div></div>
<div class="ttc" id="aHTTPClient_8cpp_html_a0b91b2b50d54e38aa1e8e31e56c31357"><div class="ttname"><a href="HTTPClient_8cpp.html#a0b91b2b50d54e38aa1e8e31e56c31357">Cleanup</a></div><div class="ttdeci">static const HTTPClientCleanup Cleanup</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00042">HTTPClient.cpp:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aTargetOptions_8h_html"><div class="ttname"><a href="TargetOptions_8h.html">TargetOptions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_af3891aaee55272147e7bb2518842a753"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">llvm::MachineFrameInfo::getCalleeSavedInfo</a></div><div class="ttdeci">const std::vector&lt; CalleeSavedInfo &gt; &amp; getCalleeSavedInfo() const</div><div class="ttdoc">Returns a reference to call saved info vector for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00787">MachineFrameInfo.h:787</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_a171c7253c2b03171bdf22c1bd910f674"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">llvm::TargetMachine::getMCAsmInfo</a></div><div class="ttdeci">const MCAsmInfo * getMCAsmInfo() const</div><div class="ttdoc">Return target specific asm information.</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00213">TargetMachine.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdoc">Returns an iterator to the first terminator instruction of this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00240">MachineBasicBlock.cpp:240</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64__AM_html_a832ad315a355f4ddcc32f189f34e28a9"><div class="ttname"><a href="namespacellvm_1_1AArch64__AM.html#a832ad315a355f4ddcc32f189f34e28a9">llvm::AArch64_AM::encodeLogicalImmediate</a></div><div class="ttdeci">static uint64_t encodeLogicalImmediate(uint64_t imm, unsigned regSize)</div><div class="ttdoc">encodeLogicalImmediate - Return the encoded immediate value for a logical immediate instruction of th...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AddressingModes_8h_source.html#l00283">AArch64AddressingModes.h:283</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a7f9557a8b626961cb7c91e8a94b6d0c5"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a7f9557a8b626961cb7c91e8a94b6d0c5">EnableRedZone</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableRedZone(&quot;aarch64-redzone&quot;, cl::desc(&quot;enable use of redzone on AArch64&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_abebf776aea4ae4a420fd4a2c5f02cbbd"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#abebf776aea4ae4a420fd4a2c5f02cbbd">llvm::AArch64Subtarget::isXRegisterReserved</a></div><div class="ttdeci">bool isXRegisterReserved(size_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00211">AArch64Subtarget.h:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a6ba514594eb802f087046edbe201f8f4"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a6ba514594eb802f087046edbe201f8f4">llvm::MachineFrameInfo::setStackID</a></div><div class="ttdeci">void setStackID(int ObjectIdx, uint8_t ID)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00736">MachineFrameInfo.h:736</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a503a8cb169aa29ac907c218692087db3"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a503a8cb169aa29ac907c218692087db3">llvm::MachineFrameInfo::hasPatchPoint</a></div><div class="ttdeci">bool hasPatchPoint() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if there is a...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00389">MachineFrameInfo.h:389</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aMCAsmInfo_8h_html"><div class="ttname"><a href="MCAsmInfo_8h.html">MCAsmInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a1ae307f415a8989475e3f7ddd6eefc8b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">llvm::MachineFrameInfo::CreateStackObject</a></div><div class="ttdeci">int CreateStackObject(uint64_t Size, Align Alignment, bool isSpillSlot, const AllocaInst *Alloca=nullptr, uint8_t ID=0)</div><div class="ttdoc">Create a new statically sized stack object, returning a nonnegative identifier to represent it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00051">MachineFrameInfo.cpp:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdoc">Take an instruction from MBB 'Other' at the position From, and insert it into this MBB right before '...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01037">MachineBasicBlock.h:1037</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad5f691fdc1a09aaf6df5fef958b35a3d"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator MBBI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00075">AArch64SLSHardening.cpp:75</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_ad53f28bfbc4b97b70d443fddefedbde6"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#ad53f28bfbc4b97b70d443fddefedbde6">getRegisterOrZero</a></div><div class="ttdeci">static MCRegister getRegisterOrZero(MCRegister Reg, bool HasSVE)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00674">AArch64FrameLowering.cpp:674</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html"><div class="ttname"><a href="classllvm_1_1StackOffset.html">llvm::StackOffset</a></div><div class="ttdoc">StackOffset holds a fixed and a scalable offset in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00036">TypeSize.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aTargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b"><div class="ttname"><a href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b">llvm::SwiftAsyncFramePointerMode::DeploymentBased</a></div><div class="ttdeci">@ DeploymentBased</div><div class="ttdoc">Determine whether to set the bit statically or dynamically based on the deployment target.</div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a1e887116bba8ca08bd717cbf2cbd1ac6"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a1e887116bba8ca08bd717cbf2cbd1ac6">llvm::AArch64FunctionInfo::getTailCallReservedStack</a></div><div class="ttdeci">unsigned getTailCallReservedStack() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00219">AArch64MachineFunctionInfo.h:219</a></div></div>
<div class="ttc" id="aRISCVRedundantCopyElimination_8cpp_html_a77c69067ae8279bc00ab8757731e90d7"><div class="ttname"><a href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a></div><div class="ttdeci">auto CC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVRedundantCopyElimination_8cpp_source.html#l00079">RISCVRedundantCopyElimination.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64RegisterInfo_html"><div class="ttname"><a href="classllvm_1_1AArch64RegisterInfo.html">llvm::AArch64RegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64RegisterInfo_8h_source.html#l00026">AArch64RegisterInfo.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_afa58eca8243bee935ada875a71acfafa"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#afa58eca8243bee935ada875a71acfafa">llvm::AArch64FunctionInfo::setMinMaxSVECSFrameIndex</a></div><div class="ttdeci">void setMinMaxSVECSFrameIndex(int Min, int Max)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00323">AArch64MachineFunctionInfo.h:323</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCContext_html_a299bf2f0329389424760f4a7c8af75ac"><div class="ttname"><a href="classllvm_1_1MCContext.html#a299bf2f0329389424760f4a7c8af75ac">llvm::MCContext::createTempSymbol</a></div><div class="ttdeci">MCSymbol * createTempSymbol()</div><div class="ttdoc">Create a temporary symbol with a unique name.</div><div class="ttdef"><b>Definition:</b> <a href="MCContext_8cpp_source.html#l00318">MCContext.cpp:318</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfa686bcdfaefdfe3f49acbfe6f680bc22d"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa686bcdfaefdfe3f49acbfe6f680bc22d">llvm::CodeModel::Tiny</a></div><div class="ttdeci">@ Tiny</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6a"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">llvm::EHPersonality</a></div><div class="ttdeci">EHPersonality</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00021">EHPersonalities.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html">llvm::TargetSubtargetInfo</a></div><div class="ttdoc">TargetSubtargetInfo - Generic base class for all target subtargets.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00062">TargetSubtargetInfo.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_ac92bd14c26009fdfdc00576604da950f"><div class="ttname"><a href="classllvm_1_1StackOffset.html#ac92bd14c26009fdfdc00576604da950f">llvm::StackOffset::getScalable</a></div><div class="ttdeci">static StackOffset getScalable(int64_t Scalable)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00046">TypeSize.h:46</a></div></div>
<div class="ttc" id="aAArch64LowerHomogeneousPrologEpilog_8cpp_html_abc5baba59c735eeb15bdef969b458794adbb7fde55b4b341b4478c749fe200737"><div class="ttname"><a href="AArch64LowerHomogeneousPrologEpilog_8cpp.html#abc5baba59c735eeb15bdef969b458794adbb7fde55b4b341b4478c749fe200737">Prolog</a></div><div class="ttdeci">@ Prolog</div><div class="ttdef"><b>Definition:</b> <a href="AArch64LowerHomogeneousPrologEpilog_8cpp_source.html#l00126">AArch64LowerHomogeneousPrologEpilog.cpp:126</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">llvm::MachineMemOperand::MOLoad</a></div><div class="ttdeci">@ MOLoad</div><div class="ttdoc">The memory access reads data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00134">MachineMemOperand.h:134</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a3836203fac855ac3c5718b701bd13ffd"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">llvm::MachineFrameInfo::getMaxAlign</a></div><div class="ttdeci">Align getMaxAlign() const</div><div class="ttdoc">Return the alignment in bytes that this function must be aligned to, which is greater than the defaul...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00601">MachineFrameInfo.h:601</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a247230f547064b27022d70c0aeb86682"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">llvm::MachineFunction::addFrameInst</a></div><div class="ttdeci">unsigned addFrameInst(const MCCFIInstruction &amp;Inst)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00317">MachineFunction.cpp:317</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab2e3dbebd68e69d77c227682fc8e3ba2"><div class="ttname"><a href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">llvm::make_scope_exit</a></div><div class="ttdeci">detail::scope_exit&lt; std::decay_t&lt; Callable &gt; &gt; make_scope_exit(Callable &amp;&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="ScopeExit_8h_source.html#l00059">ScopeExit.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1c455e007178a24dfb18ac0e200ea02c"><div class="ttname"><a href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">llvm::Function::hasOptSize</a></div><div class="ttdeci">bool hasOptSize() const</div><div class="ttdoc">Optimize this function for size (-Os) or minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00644">Function.h:644</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acce9c12cc977a88dc7bc51493ce7681c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">llvm::MachineBasicBlock::addLiveIn</a></div><div class="ttdeci">void addLiveIn(MCRegister PhysReg, LaneBitmask LaneMask=LaneBitmask::getAll())</div><div class="ttdoc">Adds the specified register as a live in.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00408">MachineBasicBlock.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a32125253541ab2e7ec5bbe550ecc2d0c"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a32125253541ab2e7ec5bbe550ecc2d0c">llvm::MachineFrameInfo::isFrameAddressTaken</a></div><div class="ttdeci">bool isFrameAddressTaken() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if there is a...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00371">MachineFrameInfo.h:371</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64__AM_html_a35905b769bf1afa2cc7e2a223191e57e"><div class="ttname"><a href="namespacellvm_1_1AArch64__AM.html#a35905b769bf1afa2cc7e2a223191e57e">llvm::AArch64_AM::getArithExtendImm</a></div><div class="ttdeci">static unsigned getArithExtendImm(AArch64_AM::ShiftExtendType ET, unsigned Imm)</div><div class="ttdoc">getArithExtendImm - Encode the extend type and shift amount for an arithmetic instruction: imm: 3-bit...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AddressingModes_8h_source.html#l00171">AArch64AddressingModes.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a2cc8bb867c8949943ca7d88f1db31fde"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">llvm::MachineFrameInfo::hasCalls</a></div><div class="ttdeci">bool hasCalls() const</div><div class="ttdoc">Return true if the current function has any function calls.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00613">MachineFrameInfo.h:613</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a6d15a3346f663d13e5b9061da4d56ddc"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a6d15a3346f663d13e5b9061da4d56ddc">llvm::AArch64FrameLowering::hasReservedCallFrame</a></div><div class="ttdeci">bool hasReservedCallFrame(const MachineFunction &amp;MF) const override</div><div class="ttdoc">hasReservedCallFrame - Under normal circumstances, when a frame pointer is not required,...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00463">AArch64FrameLowering.cpp:463</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a02cddefc96e08fba507c3d0eac7f6c1f"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a02cddefc96e08fba507c3d0eac7f6c1f">emitShadowCallStackEpilogue</a></div><div class="ttdeci">static void emitShadowCallStackEpilogue(const TargetInstrInfo &amp;TII, MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01345">AArch64FrameLowering.cpp:1345</a></div></div>
<div class="ttc" id="aCallingConv_8h_html"><div class="ttname"><a href="CallingConv_8h.html">CallingConv.h</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a69f50b8c0a70f57950c142ca963e1cb5"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a69f50b8c0a70f57950c142ca963e1cb5">llvm::AArch64Subtarget::getRegisterInfo</a></div><div class="ttdeci">const AArch64RegisterInfo * getRegisterInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00182">AArch64Subtarget.h:182</a></div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_af1bf187d995b982c232e7c73bb45c832"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#af1bf187d995b982c232e7c73bb45c832">llvm::AArch64FunctionInfo::needsAsyncDwarfUnwindInfo</a></div><div class="ttdeci">bool needsAsyncDwarfUnwindInfo(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8cpp_source.html#l00141">AArch64MachineFunctionInfo.cpp:141</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a035d6de6da7186bb6a0a180c617c8a83"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a035d6de6da7186bb6a0a180c617c8a83">emitCalleeSavedRestores</a></div><div class="ttdeci">static void emitCalleeSavedRestores(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, bool SVE)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00631">AArch64FrameLowering.cpp:631</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_adee4182085538431c4a8cb7ffec54783"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#adee4182085538431c4a8cb7ffec54783">isFuncletReturnInstr</a></div><div class="ttdeci">static bool isFuncletReturnInstr(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01908">AArch64FrameLowering.cpp:1908</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a15d63c566878e964c19139b2c76c0dab"><div class="ttname"><a href="classllvm_1_1BitVector.html#a15d63c566878e964c19139b2c76c0dab">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00454">BitVector.h:454</a></div></div>
<div class="ttc" id="anamespacellvm_html_a076f93c387f454f0db13d4bc7d4e7f9c"><div class="ttname"><a href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a></div><div class="ttdeci">void stable_sort(R &amp;&amp;Range)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01948">STLExtras.h:1948</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64__AM_html_a7e75394a33f6a5897d7a14c0ba5d44f1ad2f6771d4027a09ba1d0de2e5ea54470"><div class="ttname"><a href="namespacellvm_1_1AArch64__AM.html#a7e75394a33f6a5897d7a14c0ba5d44f1ad2f6771d4027a09ba1d0de2e5ea54470">llvm::AArch64_AM::UXTX</a></div><div class="ttdeci">@ UXTX</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AddressingModes_8h_source.html#l00044">AArch64AddressingModes.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_af07ecf9cc7d99e3037274b61842d75ce"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#af07ecf9cc7d99e3037274b61842d75ce">llvm::AArch64FrameLowering::getWinEHParentFrameOffset</a></div><div class="ttdeci">unsigned getWinEHParentFrameOffset(const MachineFunction &amp;MF) const override</div><div class="ttdoc">The parent frame offset (aka dispFrame) is only used on X86_64 to retrieve the parent's frame pointer...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03801">AArch64FrameLowering.cpp:3801</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a640f34062e7189756ce67e60d5dfd629"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">llvm::MachineRegisterInfo::isLiveIn</a></div><div class="ttdeci">bool isLiveIn(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00440">MachineRegisterInfo.cpp:440</a></div></div>
<div class="ttc" id="aAArch64SelectionDAGInfo_8cpp_html_afffa81f707a469aaea6b273b7fb099b8"><div class="ttname"><a href="AArch64SelectionDAGInfo_8cpp.html#afffa81f707a469aaea6b273b7fb099b8">kSetTagLoopThreshold</a></div><div class="ttdeci">static const int kSetTagLoopThreshold</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SelectionDAGInfo_8cpp_source.html#l00119">AArch64SelectionDAGInfo.cpp:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_afbfedea21bb3ae3e646a4c2995e1f75e"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#afbfedea21bb3ae3e646a4c2995e1f75e">llvm::AArch64FunctionInfo::hasCalleeSaveStackFreeSpace</a></div><div class="ttdeci">bool hasCalleeSaveStackFreeSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00239">AArch64MachineFunctionInfo.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00638">MachineFunction.h:638</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a251557179fe64bb09bd7e327c60c6b24"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a251557179fe64bb09bd7e327c60c6b24">llvm::TargetRegisterInfo::getRegSizeInBits</a></div><div class="ttdeci">unsigned getRegSizeInBits(const TargetRegisterClass &amp;RC) const</div><div class="ttdoc">Return the size in bits of a register from class RC.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00279">TargetRegisterInfo.h:279</a></div></div>
<div class="ttc" id="aclassuint16__t_html"><div class="ttname"><a href="classuint16__t.html">uint16_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a7b316ba6e060bc850312c3d294130878"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a7b316ba6e060bc850312c3d294130878">llvm::AArch64FunctionInfo::getStackSizeSVE</a></div><div class="ttdeci">uint64_t getStackSizeSVE() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00231">AArch64MachineFunctionInfo.h:231</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ae68d159179d37dc7969439d842e2644f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const LLVMTargetMachine &amp; getTarget() const</div><div class="ttdoc">getTarget - Return the target machine this machine code is compiled with</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00668">MachineFunction.h:668</a></div></div>
<div class="ttc" id="aMachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html_a80735739b49cf97a491922c8f9af2cc1"><div class="ttname"><a href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">llvm::Align::value</a></div><div class="ttdeci">uint64_t value() const</div><div class="ttdoc">This is a hole in the type system and should not be abused.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00085">Alignment.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac828d4f05c8f8b0a1d54c492f718e510"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">llvm::MachineFunction::getWinEHFuncInfo</a></div><div class="ttdeci">const WinEHFuncInfo * getWinEHFuncInfo() const</div><div class="ttdoc">getWinEHFuncInfo - Return information about how the current function uses Windows exception handling.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00716">MachineFunction.h:716</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a18e36864a4c4102c7db86bc12478bf2d"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a18e36864a4c4102c7db86bc12478bf2d">llvm::AArch64FrameLowering::processFunctionBeforeFrameIndicesReplaced</a></div><div class="ttdeci">void processFunctionBeforeFrameIndicesReplaced(MachineFunction &amp;MF, RegScavenger *RS) const override</div><div class="ttdoc">processFunctionBeforeFrameIndicesReplaced - This method is called immediately before MO_FrameIndex op...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03767">AArch64FrameLowering.cpp:3767</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_aaa68daaf8d7b773d012887c92c2023ce"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">llvm::MachineOperand::getIndex</a></div><div class="ttdeci">int getIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00576">MachineOperand.h:576</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedae64b7afe33922c60d78fea3c08697daa"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedae64b7afe33922c60d78fea3c08697daa">llvm::CallingConv::SwiftTail</a></div><div class="ttdeci">@ SwiftTail</div><div class="ttdoc">This follows the Swift calling convention in how arguments are passed but guarantees tail calls will ...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00087">CallingConv.h:87</a></div></div>
<div class="ttc" id="aAArch64Disassembler_8cpp_html_abdb086b34295fb7aa09493c62d798465"><div class="ttname"><a href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a></div><div class="ttdeci">#define Success</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Disassembler_8cpp_source.html#l00300">AArch64Disassembler.cpp:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_afd4710ceff512db44052aa32e69e2443"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#afd4710ceff512db44052aa32e69e2443">needsShadowCallStackPrologueEpilogue</a></div><div class="ttdeci">static bool needsShadowCallStackPrologueEpilogue(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01293">AArch64FrameLowering.cpp:1293</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">llvm::TargetStackID::Value</a></div><div class="ttdeci">Value</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00027">TargetFrameLowering.h:27</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a2faad2c2b19346a6b6d4e497e3619169"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a2faad2c2b19346a6b6d4e497e3619169">insertCFISameValue</a></div><div class="ttdeci">static void insertCFISameValue(const MCInstrDesc &amp;Desc, MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator InsertPt, unsigned DwarfReg)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00580">AArch64FrameLowering.cpp:580</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a4761d8d142e4f5eca20e2a37fbd1375a"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a4761d8d142e4f5eca20e2a37fbd1375a">llvm::AArch64FunctionInfo::setLocalStackSize</a></div><div class="ttdeci">void setLocalStackSize(uint64_t Size)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00248">AArch64MachineFunctionInfo.h:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a6d96c0781817d38b57f91432dd85d28f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a6d96c0781817d38b57f91432dd85d28f">llvm::MachineInstrBuilder::setMemRefs</a></div><div class="ttdeci">const MachineInstrBuilder &amp; setMemRefs(ArrayRef&lt; MachineMemOperand * &gt; MMOs) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00208">MachineInstrBuilder.h:208</a></div></div>
<div class="ttc" id="aAArch64MCTargetDesc_8h_html"><div class="ttname"><a href="AArch64MCTargetDesc_8h.html">AArch64MCTargetDesc.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_aef92fa2f6c53b6fda74605b0125d7667"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#aef92fa2f6c53b6fda74605b0125d7667">llvm::AArch64FunctionInfo::getSVECalleeSavedStackSize</a></div><div class="ttdeci">unsigned getSVECalleeSavedStackSize() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00319">AArch64MachineFunctionInfo.h:319</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a94d2a07e589c43e48e5b591dd520760e"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a94d2a07e589c43e48e5b591dd520760e">llvm::AArch64FrameLowering::getSEHFrameIndexOffset</a></div><div class="ttdeci">int getSEHFrameIndexOffset(const MachineFunction &amp;MF, int FI) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02273">AArch64FrameLowering.cpp:2273</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_ad6591055c1ba6d0a1033510f7a4eab65"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#ad6591055c1ba6d0a1033510f7a4eab65">llvm::AArch64FrameLowering::getFrameIndexReferencePreferSP</a></div><div class="ttdeci">StackOffset getFrameIndexReferencePreferSP(const MachineFunction &amp;MF, int FI, Register &amp;FrameReg, bool IgnoreSPUpdates) const override</div><div class="ttdoc">For Win64 AArch64 EH, the offset to the Unwind object is from the SP before the update.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03778">AArch64FrameLowering.cpp:3778</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ad40522ac860df72189255e38782acc3f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">llvm::MachineFunction::hasEHFunclets</a></div><div class="ttdeci">bool hasEHFunclets() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l01116">MachineFunction.h:1116</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">llvm::MachineMemOperand::MOStore</a></div><div class="ttdeci">@ MOStore</div><div class="ttdoc">The memory access writes data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00136">MachineMemOperand.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00449">SIDefines.h:449</a></div></div>
<div class="ttc" id="aWinEHFuncInfo_8h_html"><div class="ttname"><a href="WinEHFuncInfo_8h.html">WinEHFuncInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a566df1a4bd19d5e175f1d38c4a487f91"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a566df1a4bd19d5e175f1d38c4a487f91">llvm::AArch64FrameLowering::emitPrologue</a></div><div class="ttdeci">void emitPrologue(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB) const override</div><div class="ttdoc">emitProlog/emitEpilog - These methods insert prolog and epilog code into the function.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01367">AArch64FrameLowering.cpp:1367</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">llvm::RISCVMatInt::Imm</a></div><div class="ttdeci">@ Imm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00023">RISCVMatInt.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a96e76d4f9381108bffdc265b4d666b16"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">llvm::TargetRegisterInfo::hasStackRealignment</a></div><div class="ttdeci">bool hasStackRealignment(const MachineFunction &amp;MF) const</div><div class="ttdoc">True if stack realignment is required and still possible.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00975">TargetRegisterInfo.h:975</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a6d2ea0d87e248160e202c25124c91fa9"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a6d2ea0d87e248160e202c25124c91fa9">llvm::AArch64Subtarget::isTargetMachO</a></div><div class="ttdeci">bool isTargetMachO() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00271">AArch64Subtarget.h:271</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a3d962df55ff4ce124096ee9501e121c8"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a3d962df55ff4ce124096ee9501e121c8">llvm::AArch64FunctionInfo::getArgumentStackToRestore</a></div><div class="ttdeci">unsigned getArgumentStackToRestore() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00214">AArch64MachineFunctionInfo.h:214</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c">llvm::CodeModel::Large</a></div><div class="ttdeci">@ Large</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">llvm::RegState::Kill</a></div><div class="ttdeci">@ Kill</div><div class="ttdoc">The last use of a register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00048">MachineInstrBuilder.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_a3bb61639d8566c8d12f66c562d948bef"><div class="ttname"><a href="classllvm_1_1StackOffset.html#a3bb61639d8566c8d12f66c562d948bef">llvm::StackOffset::getScalable</a></div><div class="ttdeci">int64_t getScalable() const</div><div class="ttdoc">Returns the scalable component of the stack.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00055">TypeSize.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac57d4100e9a9d02522fbd724568397d"><div class="ttname"><a href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">llvm::getKillRegState</a></div><div class="ttdeci">unsigned getKillRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00531">MachineInstrBuilder.h:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64TargetLowering_html_aa4502ed00aa357af2b923730584885d7"><div class="ttname"><a href="classllvm_1_1AArch64TargetLowering.html#aa4502ed00aa357af2b923730584885d7">llvm::AArch64TargetLowering::getRedZoneSize</a></div><div class="ttdeci">unsigned getRedZoneSize(const Function &amp;F) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00896">AArch64ISelLowering.h:896</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">The MachineFrameInfo class represents an abstract stack frame until prolog/epilog code is inserted.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00106">MachineFrameInfo.h:106</a></div></div>
<div class="ttc" id="aAArch64Subtarget_8h_html"><div class="ttname"><a href="AArch64Subtarget_8h.html">AArch64Subtarget.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_ac3ad986bc12b8c9ef4ebf86b4ed7b3c3"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#ac3ad986bc12b8c9ef4ebf86b4ed7b3c3">estimateRSStackSizeLimit</a></div><div class="ttdeci">static unsigned estimateRSStackSizeLimit(MachineFunction &amp;MF)</div><div class="ttdoc">Look at each instruction that references stack frames and return the stack size limit beyond which so...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00351">AArch64FrameLowering.cpp:351</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_ad8ce1aee13dbdcc05d20284a30e83170"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">llvm::MachinePointerInfo::getFixedStack</a></div><div class="ttdeci">static MachinePointerInfo getFixedStack(MachineFunction &amp;MF, int FI, int64_t Offset=0)</div><div class="ttdoc">Return a MachinePointerInfo record that refers to the specified FrameIndex.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01049">MachineOperand.cpp:1049</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00309">MachineBasicBlock.h:309</a></div></div>
<div class="ttc" id="aMachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_aa3348fc65e993db75e0c3c050c561018"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#aa3348fc65e993db75e0c3c050c561018">llvm::AArch64FrameLowering::emitEpilogue</a></div><div class="ttdeci">void emitEpilogue(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB) const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01918">AArch64FrameLowering.cpp:1918</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a860467662b17cef898ece774ab400235"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">llvm::MachineInstrBuilder::setMIFlags</a></div><div class="ttdeci">const MachineInstrBuilder &amp; setMIFlags(unsigned Flags) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00273">MachineInstrBuilder.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_abe26a416b693ebc37154faaded2cdfc9"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#abe26a416b693ebc37154faaded2cdfc9">llvm::AArch64FunctionInfo::hasSwiftAsyncContext</a></div><div class="ttdeci">bool hasSwiftAsyncContext() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00440">AArch64MachineFunctionInfo.h:440</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_abc7410daace72818d9ce654814a67892"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#abc7410daace72818d9ce654814a67892">getFPOffset</a></div><div class="ttdeci">static StackOffset getFPOffset(const MachineFunction &amp;MF, int64_t ObjectOffset)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02252">AArch64FrameLowering.cpp:2252</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a2be9d35aaace9716441da5714f048af9"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a2be9d35aaace9716441da5714f048af9">llvm::AArch64FrameLowering::canUseAsPrologue</a></div><div class="ttdeci">bool canUseAsPrologue(const MachineBasicBlock &amp;MBB) const override</div><div class="ttdoc">Check whether or not the given MBB can be used as a prologue for the target.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00851">AArch64FrameLowering.cpp:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a97643b28151d68d2cec55176e739205d"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a97643b28151d68d2cec55176e739205d">llvm::AArch64FrameLowering::getWinEHFuncletFrameSize</a></div><div class="ttdeci">unsigned getWinEHFuncletFrameSize(const MachineFunction &amp;MF) const</div><div class="ttdoc">Funclets only need to account for space for the callee saved registers, as the locals are accounted f...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03808">AArch64FrameLowering.cpp:3808</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a095ce2d870dadf620a4c887ecc0efef8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00281">MachineBasicBlock.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda8e8dc64aad833bd23d07d3384522575e"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda8e8dc64aad833bd23d07d3384522575e">llvm::CallingConv::GHC</a></div><div class="ttdeci">@ GHC</div><div class="ttdoc">Used by the Glasgow Haskell Compiler (GHC).</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00050">CallingConv.h:50</a></div></div>
<div class="ttc" id="aScopeExit_8h_html"><div class="ttname"><a href="ScopeExit_8h.html">ScopeExit.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_a217c3db3b137e03bd6ade29bb9999ac9"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#a217c3db3b137e03bd6ade29bb9999ac9">llvm::AArch64FunctionInfo::getCalleeSavedStackSize</a></div><div class="ttdeci">unsigned getCalleeSavedStackSize(const MachineFrameInfo &amp;MFI) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00266">AArch64MachineFunctionInfo.h:266</a></div></div>
<div class="ttc" id="aMachineMemOperand_8h_html"><div class="ttname"><a href="MachineMemOperand_8h.html">MachineMemOperand.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aMachineOperand_8h_html"><div class="ttname"><a href="MachineOperand_8h.html">MachineOperand.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">llvm::TargetFrameLowering::StackGrowsDown</a></div><div class="ttdeci">@ StackGrowsDown</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00047">TargetFrameLowering.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a548cfb9440f36ba67fc5566b8e967fc6"><div class="ttname"><a href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">llvm::Function::hasMinSize</a></div><div class="ttdeci">bool hasMinSize() const</div><div class="ttdoc">Optimize this function for minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00641">Function.h:641</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_aea2b8a3efd6694a33452ed7e8716300e"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#aea2b8a3efd6694a33452ed7e8716300e">llvm::MCCFIInstruction::createOffset</a></div><div class="ttdeci">static MCCFIInstruction createOffset(MCSymbol *L, unsigned Register, int Offset)</div><div class="ttdoc">.cfi_offset Previous value of Register is saved at offset Offset from CFA.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00571">MCDwarf.h:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_ab041d0f79187663c0cc7c08cdf8227d0"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#ab041d0f79187663c0cc7c08cdf8227d0">llvm::AArch64FrameLowering::determineCalleeSaves</a></div><div class="ttdeci">void determineCalleeSaves(MachineFunction &amp;MF, BitVector &amp;SavedRegs, RegScavenger *RS) const override</div><div class="ttdoc">This method determines which of the registers reported by TargetRegisterInfo::getCalleeSavedRegs() sh...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02967">AArch64FrameLowering.cpp:2967</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_a3fc78aa19b9e30af7cb534f1a58e22de"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#a3fc78aa19b9e30af7cb534f1a58e22de">llvm::AArch64FrameLowering::restoreCalleeSavedRegisters</a></div><div class="ttdeci">bool restoreCalleeSavedRegisters(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, MutableArrayRef&lt; CalleeSavedInfo &gt; CSI, const TargetRegisterInfo *TRI) const override</div><div class="ttdoc">restoreCalleeSavedRegisters - Issues instruction(s) to restore all callee saved registers and returns...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02838">AArch64FrameLowering.cpp:2838</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a5ee88eb786413b2cf541122aa749392c"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a5ee88eb786413b2cf541122aa749392c">llvm::MachineFrameInfo::getStackProtectorIndex</a></div><div class="ttdeci">int getStackProtectorIndex() const</div><div class="ttdoc">Return the index for the stack protector object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00358">MachineFrameInfo.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ae106f6c6362377b3016f0d174227e193"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ae106f6c6362377b3016f0d174227e193">llvm::TargetMachine::getCodeModel</a></div><div class="ttdeci">CodeModel::Model getCodeModel() const</div><div class="ttdoc">Returns the code model.</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00233">TargetMachine.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a2f26766f4dcfa6457ba405584a34d5c3"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a2f26766f4dcfa6457ba405584a34d5c3">llvm::TargetFrameLowering::determineCalleeSaves</a></div><div class="ttdeci">virtual void determineCalleeSaves(MachineFunction &amp;MF, BitVector &amp;SavedRegs, RegScavenger *RS=nullptr) const</div><div class="ttdoc">This method determines which of the registers reported by TargetRegisterInfo::getCalleeSavedRegs() sh...</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLoweringImpl_8cpp_source.html#l00082">TargetFrameLoweringImpl.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_aa7d9e2f26e4c8b32f51c455b220ce13c"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#aa7d9e2f26e4c8b32f51c455b220ce13c">llvm::MachineFrameInfo::hasStackMap</a></div><div class="ttdeci">bool hasStackMap() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if there is a...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00383">MachineFrameInfo.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdeci">@ Dead</div><div class="ttdoc">Unused definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00050">MachineInstrBuilder.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a17287afec9c4e572033dc4d1d6e11367"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a17287afec9c4e572033dc4d1d6e11367">llvm::TargetRegisterInfo::getMinimalPhysRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getMinimalPhysRegClass(MCRegister Reg, MVT VT=MVT::Other) const</div><div class="ttdoc">Returns the Register Class of a physical register of the given type, picking the most sub register cl...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8cpp_source.html#l00212">TargetRegisterInfo.cpp:212</a></div></div>
<div class="ttc" id="aRegisterScavenging_8h_html"><div class="ttname"><a href="RegisterScavenging_8h.html">RegisterScavenging.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html">llvm::AArch64Subtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00038">AArch64Subtarget.h:38</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af085ea923a328b9fa6a1975f1a4ff987"><div class="ttname"><a href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">llvm::printReg</a></div><div class="ttdeci">Printable printReg(Register Reg, const TargetRegisterInfo *TRI=nullptr, unsigned SubIdx=0, const MachineRegisterInfo *MRI=nullptr)</div><div class="ttdoc">Prints virtual and physical registers with or without a TRI instance.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8cpp_source.html#l00111">TargetRegisterInfo.cpp:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_a0775e5fb52ac148f4d06e7eedb34e94e"><div class="ttname"><a href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">llvm::StackOffset::getFixed</a></div><div class="ttdeci">int64_t getFixed() const</div><div class="ttdoc">Returns the fixed component of the stack.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00052">TypeSize.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FrameLowering_html_aa2b80c1201a1baeb6ee4466e970957ba"><div class="ttname"><a href="classllvm_1_1AArch64FrameLowering.html#aa2b80c1201a1baeb6ee4466e970957ba">llvm::AArch64FrameLowering::orderFrameObjects</a></div><div class="ttdeci">void orderFrameObjects(const MachineFunction &amp;MF, SmallVectorImpl&lt; int &gt; &amp;ObjectsToAllocate) const override</div><div class="ttdoc">Order the symbols in the local stack frame.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l03882">AArch64FrameLowering.cpp:3882</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64RegisterInfo_html_acafe750c425c834b596416c311715d8c"><div class="ttname"><a href="classllvm_1_1AArch64RegisterInfo.html#acafe750c425c834b596416c311715d8c">llvm::AArch64RegisterInfo::hasBasePointer</a></div><div class="ttdeci">bool hasBasePointer(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64RegisterInfo_8cpp_source.html#l00496">AArch64RegisterInfo.cpp:496</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2cd95c4fd57b9c1804bc70a37ac24574"><div class="ttname"><a href="namespacellvm.html#a2cd95c4fd57b9c1804bc70a37ac24574">llvm::createCFAOffset</a></div><div class="ttdeci">MCCFIInstruction createCFAOffset(const TargetRegisterInfo &amp;MRI, unsigned Reg, const StackOffset &amp;OffsetFromDefCFA)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8cpp_source.html#l04239">AArch64InstrInfo.cpp:4239</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing basic block and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00705">MachineInstr.cpp:705</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCAsmInfo_html_ac158349781823fe8ff9e02d3a3533d55"><div class="ttname"><a href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">llvm::MCAsmInfo::usesWindowsCFI</a></div><div class="ttdeci">bool usesWindowsCFI() const</div><div class="ttdef"><b>Definition:</b> <a href="MCAsmInfo_8h_source.html#l00797">MCAsmInfo.h:797</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2816e84a08c108d18bc4665bc1817e01"><div class="ttname"><a href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">llvm::abs</a></div><div class="ttdeci">APFloat abs(APFloat X)</div><div class="ttdoc">Returns the absolute value of the argument.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01332">APFloat.h:1332</a></div></div>
<div class="ttc" id="aclassllvm_1_1HexagonInstrInfo_html_aecd4a0b2f8e7e0af14209a06e67377bc"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#aecd4a0b2f8e7e0af14209a06e67377bc">llvm::HexagonInstrInfo::copyPhysReg</a></div><div class="ttdeci">void copyPhysReg(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator I, const DebugLoc &amp;DL, MCRegister DestReg, MCRegister SrcReg, bool KillSrc) const override</div><div class="ttdoc">Emit instructions to copy a pair of physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l00855">HexagonInstrInfo.cpp:855</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdeci">@ Define</div><div class="ttdoc">Register definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00044">MachineInstrBuilder.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a4144c2ee93286fba09bd8f14fb11f27a"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a4144c2ee93286fba09bd8f14fb11f27a">llvm::AArch64II::MO_GOT</a></div><div class="ttdeci">@ MO_GOT</div><div class="ttdoc">MO_GOT - This flag indicates that a symbol operand represents the address of the GOT entry for the sy...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00742">AArch64BaseInfo.h:742</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a6e70c6eb89daed9d5ad60fcd4e0944be"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a6e70c6eb89daed9d5ad60fcd4e0944be">invalidateWindowsRegisterPairing</a></div><div class="ttdeci">static bool invalidateWindowsRegisterPairing(unsigned Reg1, unsigned Reg2, bool NeedsWinCFI, bool IsFirst, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l02447">AArch64FrameLowering.cpp:2447</a></div></div>
<div class="ttc" id="aTargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a1aedcec79ca92a0d2b20626d30ebc15d"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a1aedcec79ca92a0d2b20626d30ebc15d">needsWinCFI</a></div><div class="ttdeci">static bool needsWinCFI(const MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00880">AArch64FrameLowering.cpp:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c"><div class="ttname"><a href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c">llvm::SwiftAsyncFramePointerMode::Always</a></div><div class="ttdeci">@ Always</div><div class="ttdoc">Always set the bit.</div></div>
<div class="ttc" id="aclassllvm_1_1AArch64RegisterInfo_html_a291580cc01efa41a004f8b30e358969f"><div class="ttname"><a href="classllvm_1_1AArch64RegisterInfo.html#a291580cc01efa41a004f8b30e358969f">llvm::AArch64RegisterInfo::isReservedReg</a></div><div class="ttdeci">bool isReservedReg(const MachineFunction &amp;MF, MCRegister Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64RegisterInfo_8cpp_source.html#l00446">AArch64RegisterInfo.cpp:446</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64InstrInfo_html_a52619cc1f9c5c3029a03a6c956b32595"><div class="ttname"><a href="classllvm_1_1AArch64InstrInfo.html#a52619cc1f9c5c3029a03a6c956b32595">llvm::AArch64InstrInfo::isSEHInstruction</a></div><div class="ttdeci">static bool isSEHInstruction(const MachineInstr &amp;MI)</div><div class="ttdoc">Return true if the instructions is a SEH instruciton used for unwinding on Windows.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8cpp_source.html#l00998">AArch64InstrInfo.cpp:998</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_ab1093619213bf0b465ab1d5fc1e44824"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#ab1093619213bf0b465ab1d5fc1e44824">llvm::AArch64FunctionInfo::setStackSizeSVE</a></div><div class="ttdeci">void setStackSizeSVE(uint64_t S)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00226">AArch64MachineFunctionInfo.h:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_ab1bcbdd777fab16bc7306fe213403753"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#ab1bcbdd777fab16bc7306fe213403753">llvm::AArch64FunctionInfo::getTaggedBasePointerIndex</a></div><div class="ttdeci">std::optional&lt; int &gt; getTaggedBasePointerIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00410">AArch64MachineFunctionInfo.h:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_a01f6c42979a72dd229c03417e00f7f96"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#a01f6c42979a72dd229c03417e00f7f96">getArgumentStackToRestore</a></div><div class="ttdeci">static int64_t getArgumentStackToRestore(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Returns how much of the incoming argument stack area (in bytes) we should clean up in an epilogue.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l00269">AArch64FrameLowering.cpp:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html"><div class="ttname"><a href="classllvm_1_1MCRegister.html">llvm::MCRegister</a></div><div class="ttdoc">Wrapper class representing physical registers. Should be passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00024">MCRegister.h:24</a></div></div>
<div class="ttc" id="aAArch64FrameLowering_8cpp_html_aa50e993b8766fe175c5e72da5943512d"><div class="ttname"><a href="AArch64FrameLowering_8cpp.html#aa50e993b8766fe175c5e72da5943512d">IsSVECalleeSave</a></div><div class="ttdeci">static bool IsSVECalleeSave(MachineBasicBlock::iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64FrameLowering_8cpp_source.html#l01280">AArch64FrameLowering.cpp:1280</a></div></div>
<div class="ttc" id="aLivePhysRegs_8h_html"><div class="ttname"><a href="LivePhysRegs_8h.html">LivePhysRegs.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a3828c9fbb57095c51896fb2499e60044"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a3828c9fbb57095c51896fb2499e60044">llvm::MCCFIInstruction::createRestore</a></div><div class="ttdeci">static MCCFIInstruction createRestore(MCSymbol *L, unsigned Register)</div><div class="ttdoc">.cfi_restore says that the rule for Register is now the same as it was at the beginning of the functi...</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00604">MCDwarf.h:604</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:08:50 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/RISCV/RISCVInsertVSETVLI.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_fc62c913e8b7bfce256a9466d87d79c7.html">RISCV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RISCVInsertVSETVLI.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RISCVInsertVSETVLI_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- RISCVInsertVSETVLI.cpp - Insert VSETVLI instructions ---------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements a function pass that inserts VSETVLI instructions where</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// needed and expands the vl outputs of VLEFF/VLSEGFF to PseudoReadVL</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// instructions.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// This pass consists of 3 phases:</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Phase 1 collects how each basic block affects VL/VTYPE.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// Phase 2 uses the information from phase 1 to do a data flow analysis to</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// propagate the VL/VTYPE changes through the function. This gives us the</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// VL/VTYPE at the start of each basic block.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Phase 3 inserts VSETVLI instructions in each basic block. Information from</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// phase 2 is used to prevent inserting a VSETVLI before the first vector</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// instruction in the block if possible.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RISCV_8h.html">RISCV.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RISCVSubtarget_8h.html">RISCVSubtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervals_8h.html">llvm/CodeGen/LiveIntervals.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   34</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;riscv-insert-vsetvli&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">   35</a></span>&#160;<span class="preprocessor">#define RISCV_INSERT_VSETVLI_NAME &quot;RISCV Insert VSETVLI pass&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">DisableInsertVSETVLPHIOpt</a>(</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="stringliteral">&quot;riscv-disable-insert-vsetvl-phi-opt&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable looking through phis when inserting vsetvlis.&quot;</span>));</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ae0e185f2fbd3879a55a98f363126301a">UseStrictAsserts</a>(</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="stringliteral">&quot;riscv-insert-vsetvl-strict-asserts&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable strict assertion checking for the dataflow algorithm&quot;</span>));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVII.html#a6dade6b6ad6e6c608f10e26590077f2a">getVLOpNum</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVII.html#a6dade6b6ad6e6c608f10e26590077f2a">RISCVII::getVLOpNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc());</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVII.html#af9dfac3d961f5f889f2c6d38ce89685f">getSEWOpNum</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVII.html#af9dfac3d961f5f889f2c6d38ce89685f">RISCVII::getSEWOpNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc());</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> isVectorConfigInstr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLI ||</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;         <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLIX0 ||</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;         <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETIVLI;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/// Return true if this is &#39;vsetvli x0, x0, vtype&#39; which preserves</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/// VL and only sets VTYPE.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> isVLPreservingConfig(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() != RISCV::PseudoVSETVLIX0)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(RISCV::X0 == <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> RISCV::X0 == <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">static</span> <a class="code" href="classuint16__t.html">uint16_t</a> getRVVMCOpcode(<a class="code" href="classuint16__t.html">uint16_t</a> RVVPseudoOpcode) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1RISCVVPseudosTable_1_1PseudoInfo.html">RISCVVPseudosTable::PseudoInfo</a> *RVV =</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      RISCVVPseudosTable::getPseudoInfo(RVVPseudoOpcode);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (!RVV)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">return</span> RVV-&gt;<a class="code" href="structllvm_1_1RISCVVPseudosTable_1_1PseudoInfo.html#aa38c05fe8368d9405644fbd487ed7369">BaseInstr</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> isScalarMoveInstr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">switch</span> (getRVVMCOpcode(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">case</span> RISCV::VMV_S_X:</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">case</span> RISCV::VFMV_S_F:</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// Get the EEW for a load or store instruction.  Return std::nullopt if MI is</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/// not a load or store which ignores SEW.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::optional&lt;unsigned&gt; getEEWForLoadStore(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">switch</span> (getRVVMCOpcode(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">case</span> RISCV::VLE8_V:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">case</span> RISCV::VLSE8_V:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">case</span> RISCV::VSE8_V:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">case</span> RISCV::VSSE8_V:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> 8;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">case</span> RISCV::VLE16_V:</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">case</span> RISCV::VLSE16_V:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">case</span> RISCV::VSE16_V:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">case</span> RISCV::VSSE16_V:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> 16;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">case</span> RISCV::VLE32_V:</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">case</span> RISCV::VLSE32_V:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">case</span> RISCV::VSE32_V:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">case</span> RISCV::VSSE32_V:</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">return</span> 32;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">case</span> RISCV::VLE64_V:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">case</span> RISCV::VLSE64_V:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">case</span> RISCV::VSE64_V:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">case</span> RISCV::VSSE64_V:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> 64;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// Return true if this is an operation on mask registers.  Note that</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/// this includes both arithmetic/logical ops and load/store (vlm/vsm).</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> isMaskRegOp(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">Log2SEW</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="namespacellvm_1_1RISCVII.html#af9dfac3d961f5f889f2c6d38ce89685f">getSEWOpNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)).getImm();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// A Log2SEW of 0 is an operation on mask registers only.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">Log2SEW</a> == 0;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/// Which subfields of VL or VTYPE have values we need to preserve?</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span><span class="keyword">struct </span>DemandedFields {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// Some unknown property of VL is used.  If demanded, must preserve entire</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// value.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> VLAny = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// Only zero vs non-zero is used. If demanded, can change non-zero values.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">bool</span> VLZeroness = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1XCoreISD.html#a34e7964aa899176244e03cb7b1fc5985a5f16d1c5f09829a27d169eeda4d60a5f">LMUL</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordtype">bool</span> SEWLMULRatio = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">bool</span> TailPolicy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">bool</span> MaskPolicy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// Return true if any part of VTYPE was used</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">bool</span> usedVTYPE()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> || <a class="code" href="namespacellvm_1_1XCoreISD.html#a34e7964aa899176244e03cb7b1fc5985a5f16d1c5f09829a27d169eeda4d60a5f">LMUL</a> || SEWLMULRatio || TailPolicy || MaskPolicy;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// Return true if any property of VL was used</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">bool</span> usedVL() {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> VLAny || VLZeroness;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// Mark all VTYPE subfields and properties as demanded</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordtype">void</span> demandVTYPE() {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="namespacellvm_1_1XCoreISD.html#a34e7964aa899176244e03cb7b1fc5985a5f16d1c5f09829a27d169eeda4d60a5f">LMUL</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    SEWLMULRatio = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    TailPolicy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    MaskPolicy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// Mark all VL properties as demanded</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">void</span> demandVL() {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    VLAny = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    VLZeroness = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">  /// Support for debugging, callable in GDB: V-&gt;dump()</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>  <a class="code" href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">  /// Implement operator&lt;&lt;.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;{&quot;</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;VLAny=&quot;</span> &lt;&lt; VLAny &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;VLZeroness=&quot;</span> &lt;&lt; VLZeroness &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;SEW=&quot;</span> &lt;&lt; <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;LMUL=&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1XCoreISD.html#a34e7964aa899176244e03cb7b1fc5985a5f16d1c5f09829a27d169eeda4d60a5f">LMUL</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;SEWLMULRatio=&quot;</span> &lt;&lt; SEWLMULRatio &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;TailPolicy=&quot;</span> &lt;&lt; TailPolicy &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;MaskPolicy=&quot;</span> &lt;&lt; MaskPolicy;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;};</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<a class="code" href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keyword">inline</span> <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> DemandedFields &amp;<a class="code" href="Debugify_8cpp.html#a993c6c27e31cbf36d079971889f3e015">DF</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="Debugify_8cpp.html#a993c6c27e31cbf36d079971889f3e015">DF</a>.print(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/// Return true if the two values of the VTYPE register provided are</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/// indistinguishable from the perspective of an instruction (or set of</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">/// instructions) which use only the Used subfields and properties.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> areCompatibleVTYPEs(<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> VType1,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> VType2,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                <span class="keyword">const</span> DemandedFields &amp;Used) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.SEW &amp;&amp;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">RISCVVType::getSEW</a>(VType1) != <a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">RISCVVType::getSEW</a>(VType2))</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.LMUL &amp;&amp;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">RISCVVType::getVLMUL</a>(VType1) != <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">RISCVVType::getVLMUL</a>(VType2))</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.SEWLMULRatio) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">auto</span> Ratio1 = <a class="code" href="namespacellvm_1_1RISCVVType.html#a51c33217fc9f7cae7a19701e421dc70f">RISCVVType::getSEWLMULRatio</a>(<a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">RISCVVType::getSEW</a>(VType1),</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                              <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">RISCVVType::getVLMUL</a>(VType1));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">auto</span> Ratio2 = <a class="code" href="namespacellvm_1_1RISCVVType.html#a51c33217fc9f7cae7a19701e421dc70f">RISCVVType::getSEWLMULRatio</a>(<a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">RISCVVType::getSEW</a>(VType2),</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                              <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">RISCVVType::getVLMUL</a>(VType2));</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (Ratio1 != Ratio2)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.TailPolicy &amp;&amp;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVVType.html#a08cfea4b8c9e0a6118dc031cafeb0773">RISCVVType::isTailAgnostic</a>(VType1) != <a class="code" href="namespacellvm_1_1RISCVVType.html#a08cfea4b8c9e0a6118dc031cafeb0773">RISCVVType::isTailAgnostic</a>(VType2))</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.MaskPolicy &amp;&amp;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVVType.html#a7dc0d6840d44bc9348088a786932fc68">RISCVVType::isMaskAgnostic</a>(VType1) != <a class="code" href="namespacellvm_1_1RISCVVType.html#a7dc0d6840d44bc9348088a786932fc68">RISCVVType::isMaskAgnostic</a>(VType2))</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/// Return the fields and properties demanded by the provided instruction.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"></span><span class="keyword">static</span> DemandedFields getDemanded(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Warning: This function has to work on both the lowered (i.e. post</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// emitVSETVLIs) and pre-lowering forms.  The main implication of this is</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// that it can&#39;t use the value of a SEW, VL, or Policy operand as they might</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// be stale after lowering.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// Most instructions don&#39;t use any of these subfeilds.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  DemandedFields Res;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// Start conservative if registers are used</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInlineAsm() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.readsRegister(RISCV::VL))</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    Res.demandVL();;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInlineAsm() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.readsRegister(RISCV::VTYPE))</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    Res.demandVTYPE();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Start conservative on the unlowered form too</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>)) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    Res.demandVTYPE();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">RISCVII::hasVLOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>))</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      Res.demandVL();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Behavior is independent of mask policy.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RISCVII.html#a20ff72740ddcb82d56986c52be173b39">RISCVII::usesMaskPolicy</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>))</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      Res.MaskPolicy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Loads and stores with implicit EEW do not demand SEW or LMUL directly.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// They instead demand the ratio of the two which is used in computing</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// EMUL, but which allows us the flexibility to change SEW and LMUL</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// provided we don&#39;t change the ratio.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// Note: We assume that the instructions initial SEW is the EEW encoded</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// in the opcode.  This is asserted when constructing the VSETVLIInfo.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">if</span> (getEEWForLoadStore(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    Res.SEW = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    Res.LMUL = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// Store instructions don&#39;t use the policy fields.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>) &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 0) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    Res.TailPolicy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    Res.MaskPolicy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// If this is a mask reg operation, it only cares about VLMAX.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// TODO: Possible extensions to this logic</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// * Probably ok if available VLMax is larger than demanded</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// * The policy bits can probably be ignored..</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">if</span> (isMaskRegOp(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    Res.SEW = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    Res.LMUL = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// For vmv.s.x and vfmv.s.f, there are only two behaviors, VL = 0 and VL &gt; 0.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (isScalarMoveInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    Res.LMUL = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    Res.SEWLMULRatio = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    Res.VLAny = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/// Defines the abstract state with which the forward dataflow models the</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">/// values of the VL and VTYPE registers after insertion.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span><span class="keyword">class </span>VSETVLIInfo {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">union </span>{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordtype">unsigned</span> AVLImm;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  };</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  enum : uint8_t {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1af704f57ea420275ad51bf55b7dec2c96">Uninitialized</a>,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    AVLIsReg,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    AVLIsImm,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  } State = <a class="code" href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1af704f57ea420275ad51bf55b7dec2c96">Uninitialized</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// Fields from VTYPE.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a> = <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451">RISCVII::LMUL_1</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  uint8_t <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = 0;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  uint8_t <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> : 1;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  uint8_t <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> : 1;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  uint8_t SEWLMULRatioOnly : 1;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  VSETVLIInfo()</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      : AVLImm(0), <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a>(<a class="code" href="namespacefalse.html">false</a>), <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a>(<a class="code" href="namespacefalse.html">false</a>),</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        SEWLMULRatioOnly(<a class="code" href="namespacefalse.html">false</a>) {}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keyword">static</span> VSETVLIInfo getUnknown() {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    VSETVLIInfo <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setUnknown();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State != <a class="code" href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1af704f57ea420275ad51bf55b7dec2c96">Uninitialized</a>; }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordtype">void</span> setUnknown() { State = <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>; }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordtype">bool</span> isUnknown()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State == <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>; }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">void</span> setAVLReg(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    AVLReg = <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    State = AVLIsReg;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">void</span> setAVLImm(<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    AVLImm = <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    State = AVLIsImm;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordtype">bool</span> hasAVLImm()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State == AVLIsImm; }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordtype">bool</span> hasAVLReg()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State == AVLIsReg; }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> getAVLReg()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(hasAVLReg());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">return</span> AVLReg;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">unsigned</span> getAVLImm()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(hasAVLImm());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> AVLImm;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">getSEW</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>; }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">getVLMUL</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a>; }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="RISCVISelLowering_8cpp.html#a3348aee6b71c8c148291c6ea01de5a83">hasNonZeroAVL</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (hasAVLImm())</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">return</span> getAVLImm() &gt; 0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (hasAVLReg())</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">return</span> getAVLReg() == RISCV::X0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordtype">bool</span> hasEquallyZeroAVL(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (hasSameAVL(Other))</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="RISCVISelLowering_8cpp.html#a3348aee6b71c8c148291c6ea01de5a83">hasNonZeroAVL</a>() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.hasNonZeroAVL());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">bool</span> hasSameAVL(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (hasAVLReg() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.hasAVLReg())</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">return</span> getAVLReg() == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.getAVLReg();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (hasAVLImm() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.hasAVLImm())</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">return</span> getAVLImm() == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.getAVLImm();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab1289c3a81660b9a99966dd6af9278ed">setVTYPE</a>(<span class="keywordtype">unsigned</span> VType) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;           <span class="stringliteral">&quot;Can&#39;t set VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a> = <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">RISCVVType::getVLMUL</a>(VType);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = <a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">RISCVVType::getSEW</a>(VType);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = <a class="code" href="namespacellvm_1_1RISCVVType.html#a08cfea4b8c9e0a6118dc031cafeb0773">RISCVVType::isTailAgnostic</a>(VType);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = <a class="code" href="namespacellvm_1_1RISCVVType.html#a7dc0d6840d44bc9348088a786932fc68">RISCVVType::isMaskAgnostic</a>(VType);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab1289c3a81660b9a99966dd6af9278ed">setVTYPE</a>(<a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> L, <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, <span class="keywordtype">bool</span> MA) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;           <span class="stringliteral">&quot;Can&#39;t set VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a> = L;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = <a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = MA;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">encodeVTYPE</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp; !SEWLMULRatioOnly &amp;&amp;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;           <span class="stringliteral">&quot;Can&#39;t encode VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">RISCVVType::encodeVTYPE</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordtype">bool</span> hasSEWLMULRatioOnly()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> SEWLMULRatioOnly; }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">bool</span> hasSameVTYPE(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isValid() &amp;&amp;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(!isUnknown() &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare VTYPE in unknown state&quot;</span>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(!SEWLMULRatioOnly &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.SEWLMULRatioOnly &amp;&amp;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare when only LMUL/SEW ratio is valid.&quot;</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> std::tie(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a>) ==</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;           std::tie(<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.VLMul, <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.SEW, <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.TailAgnostic,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.MaskAgnostic);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#a51c33217fc9f7cae7a19701e421dc70f">getSEWLMULRatio</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;           <span class="stringliteral">&quot;Can&#39;t use VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#a51c33217fc9f7cae7a19701e421dc70f">RISCVVType::getSEWLMULRatio</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// Check if the VTYPE for these two VSETVLIInfos produce the same VLMAX.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// Note that having the same VLMAX ensures that both share the same</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// function from AVL to VL; that is, they must produce the same VL value</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// for any given AVL value.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">bool</span> hasSameVLMAX(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isValid() &amp;&amp;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(!isUnknown() &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare VTYPE in unknown state&quot;</span>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#a51c33217fc9f7cae7a19701e421dc70f">getSEWLMULRatio</a>() == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.getSEWLMULRatio();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">bool</span> hasCompatibleVTYPE(<span class="keyword">const</span> DemandedFields &amp;Used,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                          <span class="keyword">const</span> VSETVLIInfo &amp;Require)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">return</span> areCompatibleVTYPEs(<a class="code" href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">encodeVTYPE</a>(), Require.encodeVTYPE(), Used);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Determine whether the vector instructions requirements represented by</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// Require are compatible with the previous vsetvli instruction represented</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// by this.  MI is the instruction whose requirements we&#39;re considering.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordtype">bool</span> isCompatible(<span class="keyword">const</span> DemandedFields &amp;Used, <span class="keyword">const</span> VSETVLIInfo &amp;Require)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; Require.isValid() &amp;&amp;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(!Require.SEWLMULRatioOnly &amp;&amp;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;           <span class="stringliteral">&quot;Expected a valid VTYPE for instruction!&quot;</span>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// Nothing is compatible with Unknown.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (isUnknown() || Require.isUnknown())</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// If only our VLMAX ratio is valid, then this isn&#39;t compatible.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (SEWLMULRatioOnly)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// If the instruction doesn&#39;t need an AVLReg and the SEW matches, consider</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// it compatible.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span> (Require.hasAVLReg() &amp;&amp; Require.AVLReg == RISCV::NoRegister)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> == Require.SEW)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.VLAny &amp;&amp; !hasSameAVL(Require))</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.VLZeroness &amp;&amp; !hasEquallyZeroAVL(Require))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> areCompatibleVTYPEs(<a class="code" href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">encodeVTYPE</a>(), Require.encodeVTYPE(), Used);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">operator==</a>(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// Uninitialized is only equal to another Uninitialized.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isValid();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isValid())</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// Unknown is only equal to another Unknown.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (isUnknown())</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isUnknown();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isUnknown())</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">return</span> isUnknown();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (!hasSameAVL(Other))</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// If the SEWLMULRatioOnly bits are different, then they aren&#39;t equal.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (SEWLMULRatioOnly != <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.SEWLMULRatioOnly)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// If only the VLMAX is valid, check that it is the same.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> (SEWLMULRatioOnly)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">return</span> hasSameVLMAX(Other);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// If the full VTYPE is valid, check that it is the same.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">return</span> hasSameVTYPE(Other);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">operator!=</a>(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// Calculate the VSETVLIInfo visible to a block assuming this and Other are</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// both predecessors.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  VSETVLIInfo <a class="code" href="LazyValueInfo_8cpp.html#ac20acbd89e45284bfb32ca506d20749d">intersect</a>(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// If the new value isn&#39;t valid, ignore it.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isValid())</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// If this value isn&#39;t valid, this must be the first predecessor, use it.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// If either is unknown, the result is unknown.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (isUnknown() || <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.isUnknown())</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">return</span> VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// If we have an exact, match return this.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> == Other)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// Not an exact match, but maybe the AVL and VLMAX are the same. If so,</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// return an SEW/LMUL ratio only value.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (hasSameAVL(Other) &amp;&amp; hasSameVLMAX(Other)) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      VSETVLIInfo MergeInfo = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      MergeInfo.SEWLMULRatioOnly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> MergeInfo;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">// Otherwise the result is unknown.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">  /// Support for debugging, callable in GDB: V-&gt;dump()</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span>  <a class="code" href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">  /// Implement operator&lt;&lt;.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">  /// @{</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;{&quot;</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Uninitialized&quot;</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (isUnknown())</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (hasAVLReg())</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;AVLReg=&quot;</span> &lt;&lt; (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)AVLReg;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (hasAVLImm())</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;AVLImm=&quot;</span> &lt;&lt; (<span class="keywordtype">unsigned</span>)AVLImm;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;VLMul=&quot;</span> &lt;&lt; (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)<a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;SEW=&quot;</span> &lt;&lt; (<span class="keywordtype">unsigned</span>)<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;TailAgnostic=&quot;</span> &lt;&lt; (bool)<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;MaskAgnostic=&quot;</span> &lt;&lt; (<span class="keywordtype">bool</span>)<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;SEWLMULRatioOnly=&quot;</span> &lt;&lt; (bool)SEWLMULRatioOnly &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;};</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<a class="code" href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keyword">inline</span> <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> VSETVLIInfo &amp;V) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  V.print(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="keyword">struct </span><a class="code" href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData</a> {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// The VSETVLIInfo that represents the net changes to the VL/VTYPE registers</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// made by this block. Calculated in Phase 1.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  VSETVLIInfo Change;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// The VSETVLIInfo that represents the VL/VTYPE settings on exit from this</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// block. Calculated in Phase 2.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  VSETVLIInfo Exit;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// The VSETVLIInfo that represents the VL/VTYPE settings from all predecessor</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// blocks. Calculated in Phase 2, and used by Phase 3.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  VSETVLIInfo Pred;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// Keeps track of whether the block is already in the queue.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordtype">bool</span> InQueue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  BlockData() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;};</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keyword">class </span>RISCVInsertVSETVLI : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  std::vector&lt;BlockData&gt; BlockInfo;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  std::queue&lt;const MachineBasicBlock *&gt; WorkList;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  RISCVInsertVSETVLI() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="namespacellvm.html#a372d99cc1a229ad0e8ef80f12a0cd7cf">initializeRISCVInsertVSETVLIPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">RISCV_INSERT_VSETVLI_NAME</a>; }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordtype">bool</span> needVSETVLI(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">const</span> VSETVLIInfo &amp;Require,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                   <span class="keyword">const</span> VSETVLIInfo &amp;CurInfo) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordtype">bool</span> needVSETVLIPHI(<span class="keyword">const</span> VSETVLIInfo &amp;Require,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">void</span> insertVSETVLI(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                     <span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> VSETVLIInfo &amp;PrevInfo);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">void</span> insertVSETVLI(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                     <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPt, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                     <span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> VSETVLIInfo &amp;PrevInfo);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordtype">void</span> transferBefore(VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordtype">void</span> transferAfter(VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordtype">bool</span> computeVLVTYPEChanges(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordtype">void</span> computeIncomingVLVTYPE(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordtype">void</span> emitVSETVLIs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordtype">void</span> doLocalPostpass(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordtype">void</span> doPRE(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordtype">void</span> insertReadVL(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;};</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">RISCVInsertVSETVLI::ID</a> = 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a93a4b715b7858d01e1d6e8f32577be87">INITIALIZE_PASS</a>(RISCVInsertVSETVLI, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">RISCV_INSERT_VSETVLI_NAME</a>,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">  635</a></span>&#160;static VSETVLIInfo computeInfoForInstr(<a class="code" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>,</div>
<div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">  636</a></span>&#160;                                       <a class="code" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  VSETVLIInfo <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">  639</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a9f4a1ccc4923b17bd414716718e3febf">  640</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a9f4a1ccc4923b17bd414716718e3febf">UseOpIdx</a>;</div>
<div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a4db3cadaacc8be231ca4232f6cef7391">  641</a></span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isRegTiedToUseOperand(0, &amp;<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a9f4a1ccc4923b17bd414716718e3febf">UseOpIdx</a>)) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// Start with undisturbed.</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// If there is a policy operand, use it.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#ad330ee2b7583cf1bf0a79f69c23ce6fe">RISCVII::hasVecPolicyOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>)) {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitOperands() - 1);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Policy = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getImm();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(Policy &lt;= (<a class="code" href="namespacellvm_1_1RISCVII.html#a9773946e3c7f55a1aba9c6f92205b3afabdc0a80d5e4b58676f861ffaa296bd1b">RISCVII::TAIL_AGNOSTIC</a> | <a class="code" href="namespacellvm_1_1RISCVII.html#a9773946e3c7f55a1aba9c6f92205b3afa1d96428e9ed63333f145e92079ab267d">RISCVII::MASK_AGNOSTIC</a>) &amp;&amp;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;             <span class="stringliteral">&quot;Invalid Policy Value&quot;</span>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = Policy &amp; <a class="code" href="namespacellvm_1_1RISCVII.html#a9773946e3c7f55a1aba9c6f92205b3afabdc0a80d5e4b58676f861ffaa296bd1b">RISCVII::TAIL_AGNOSTIC</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = Policy &amp; <a class="code" href="namespacellvm_1_1RISCVII.html#a9773946e3c7f55a1aba9c6f92205b3afa1d96428e9ed63333f145e92079ab267d">RISCVII::MASK_AGNOSTIC</a>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// If the tied operand is an IMPLICIT_DEF we can use TailAgnostic and</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// MaskAgnostic.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;UseMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a9f4a1ccc4923b17bd414716718e3febf">UseOpIdx</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(UseMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> &amp;&amp; <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a120ccebe70e1b0ddf72fc776229d0025">isImplicitDef</a>()) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// Some pseudo instructions force a tail agnostic policy despite having a</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// tied def.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#a6f7616aee876ea307c715d2ef9fb041b">RISCVII::doesForceTailAgnostic</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>))</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RISCVII.html#a20ff72740ddcb82d56986c52be173b39">RISCVII::usesMaskPolicy</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>))</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a0544c3fe466e421738dae463968b70ba">  671</a></span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// If there is no tied operand,, there shouldn&#39;t be a policy operand.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(!<a class="code" href="namespacellvm_1_1RISCVII.html#ad330ee2b7583cf1bf0a79f69c23ce6fe">RISCVII::hasVecPolicyOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>) &amp;&amp; <span class="stringliteral">&quot;Unexpected policy operand&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// No tied operand use agnostic policies.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">  679</a></span>&#160;  <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a> = <a class="code" href="namespacellvm_1_1RISCVII.html#a7dd086d89a22b8e83abd3e687cd13a35">RISCVII::getLMul</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">  681</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">Log2SEW</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="namespacellvm_1_1RISCVII.html#af9dfac3d961f5f889f2c6d38ce89685f">getSEWOpNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)).getImm();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// A Log2SEW of 0 is an operation on mask registers only.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">  683</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">Log2SEW</a> ? 1 &lt;&lt; <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">Log2SEW</a> : 8;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="namespacellvm_1_1RISCVVType.html#aa18a6c74ee58139536f65e458f1c4586">RISCVVType::isValidSEW</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>) &amp;&amp; <span class="stringliteral">&quot;Unexpected SEW&quot;</span>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a7b0cf8011eb7572877bf83531653e4d4">  686</a></span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">RISCVII::hasVLOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>)) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;VLOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="namespacellvm_1_1RISCVII.html#a6dade6b6ad6e6c608f10e26590077f2a">getVLOpNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">isImm</a>()) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      int64_t <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">// Conver the VLMax sentintel to X0 register.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> == <a class="code" href="namespacellvm_1_1RISCV.html#ae746649c43bf0f652d04addefd39a55e">RISCV::VLMaxSentinel</a>)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>.setAVLReg(RISCV::X0);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>.setAVLImm(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>.setAVLReg(VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>.setAVLReg(RISCV::NoRegister);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#aa1ab6c14345854655677dd82d4710d0a">  702</a></span>&#160;  <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; EEW = getEEWForLoadStore(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> == EEW &amp;&amp; <span class="stringliteral">&quot;Initial SEW doesn&#39;t match expected EEW&quot;</span>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>.setVTYPE(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">  708</a></span>&#160;  <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::insertVSETVLI(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                       <span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                       <span class="keyword">const</span> VSETVLIInfo &amp;PrevInfo) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  insertVSETVLI(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, PrevInfo);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::insertVSETVLI(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                     <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPt, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                     <span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> VSETVLIInfo &amp;PrevInfo) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// Use X0, X0 form if the AVL is the same and the SEW+LMUL gives the same</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// VLMAX.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span> (PrevInfo.isValid() &amp;&amp; !PrevInfo.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameAVL(PrevInfo) &amp;&amp; <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameVLMAX(PrevInfo)) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETVLIX0))</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE())</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::VL, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasAVLImm()) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETIVLI))</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLImm())</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE());</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLReg();</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">if</span> (AVLReg == RISCV::NoRegister) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// We can only use x0, x0 if there&#39;s no chance of the vtype change causing</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// the previous vl to become invalid.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (PrevInfo.isValid() &amp;&amp; !PrevInfo.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameVLMAX(PrevInfo)) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETVLIX0))</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE())</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::VL, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// Otherwise use an AVL of 0 to avoid depending on previous vl.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETIVLI))</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE());</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">if</span> (AVLReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">constrainRegClass</a>(AVLReg, &amp;RISCV::GPRNoX0RegClass);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// Use X0 as the DestReg unless AVLReg is X0. We also need to change the</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// opcode if the AVLReg is X0 as they have different register classes for</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// the AVL operand.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DestReg = RISCV::X0;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = RISCV::PseudoVSETVLI;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (AVLReg == RISCV::X0) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    DestReg = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(&amp;RISCV::GPRRegClass);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    Opcode = RISCV::PseudoVSETVLIX0;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Opcode))</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(DestReg, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AVLReg)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE());</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">// Return a VSETVLIInfo representing the changes made by this VSETVLI or</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">// VSETIVLI instruction.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">  783</a></span>&#160;<span class="keyword">static</span> VSETVLIInfo <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">getInfoForVSETVLI</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  VSETVLIInfo NewInfo;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETIVLI) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    NewInfo.setAVLImm(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getImm());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLI ||</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;           <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLIX0);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>((AVLReg != RISCV::X0 || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg() != RISCV::X0) &amp;&amp;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;           <span class="stringliteral">&quot;Can&#39;t handle X0, X0 vsetvli yet&quot;</span>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    NewInfo.setAVLReg(AVLReg);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  NewInfo.setVTYPE(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm());</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">return</span> NewInfo;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;}</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">/// Return true if a VSETVLI is required to transition from CurInfo to Require</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">/// before MI.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> RISCVInsertVSETVLI::needVSETVLI(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                     <span class="keyword">const</span> VSETVLIInfo &amp;Require,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                     <span class="keyword">const</span> VSETVLIInfo &amp;CurInfo)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(Require == computeInfoForInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>));</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">if</span> (!CurInfo.isValid() || CurInfo.isUnknown() || CurInfo.hasSEWLMULRatioOnly())</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  DemandedFields <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a> = getDemanded(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">if</span> (isScalarMoveInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="comment">// For vmv.s.x and vfmv.s.f, if writing to an implicit_def operand, we don&#39;t</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// need to preserve any other bits and are thus compatible with any larger,</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="comment">// etype and can disregard policy bits.  Warning: It&#39;s tempting to try doing</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="comment">// this for any tail agnostic operation, but we can&#39;t as TA requires</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">// tail lanes to either be the original value or -1.  We are writing</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// unknown bits to the lanes here.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keyword">auto</span> *VRegDef = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (VRegDef &amp;&amp; VRegDef-&gt;isImplicitDef() &amp;&amp;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        CurInfo.getSEW() &gt;= Require.getSEW()) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.SEW = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.TailPolicy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">if</span> (CurInfo.isCompatible(Used, Require))</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// We didn&#39;t find a compatible value. If our AVL is a virtual register,</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// it might be defined by a VSET(I)VLI. If it has the same VLMAX we need</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// and the last VL/VTYPE we observed is the same, we don&#39;t need a</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">// VSETVLI here.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordflow">if</span> (Require.hasAVLReg() &amp;&amp; Require.getAVLReg().isVirtual() &amp;&amp;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      CurInfo.hasCompatibleVTYPE(Used, Require)) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(Require.getAVLReg())) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">if</span> (isVectorConfigInstr(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>)) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        VSETVLIInfo DefInfo = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">getInfoForVSETVLI</a>(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">if</span> (DefInfo.hasSameAVL(CurInfo) &amp;&amp; DefInfo.hasSameVLMAX(CurInfo))</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">// Given an incoming state reaching MI, modifies that state so that it is minimally</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">// compatible with MI.  The resulting state is guaranteed to be semantically legal</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">// for MI, but may not be the state requested by MI.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::transferBefore(VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>))</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keyword">const</span> VSETVLIInfo NewInfo = computeInfoForInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.isValid() &amp;&amp; !needVSETVLI(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NewInfo, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>))</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keyword">const</span> VSETVLIInfo PrevInfo = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = NewInfo;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">RISCVII::hasVLOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>))</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// For vmv.s.x and vfmv.s.f, there are only two behaviors, VL = 0 and</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// VL &gt; 0. We can discard the user requested AVL and just use the last</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// one if we can prove it equally zero.  This removes a vsetvli entirely</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// if the types match or allows use of cheaper avl preserving variant</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// if VLMAX doesn&#39;t change.  If VLMAX might change, we couldn&#39;t use</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// the &#39;vsetvli x0, x0, vtype&quot; variant, so we avoid the transform to</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// prevent extending live range of an avl register operand.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// TODO: We can probably relax this for immediates.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (isScalarMoveInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; PrevInfo.isValid() &amp;&amp;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      PrevInfo.hasEquallyZeroAVL(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>) &amp;&amp;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameVLMAX(PrevInfo)) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (PrevInfo.hasAVLImm())</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setAVLImm(PrevInfo.getAVLImm());</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setAVLReg(PrevInfo.getAVLReg());</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// If AVL is defined by a vsetvli with the same VLMAX, we can</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// replace the AVL operand with the AVL of the defining vsetvli.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// We avoid general register AVLs to avoid extending live ranges</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// without being sure we can kill the original source reg entirely.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasAVLReg() || !<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLReg().isVirtual())</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLReg());</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> || !isVectorConfigInstr(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>))</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  VSETVLIInfo DefInfo = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">getInfoForVSETVLI</a>(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> (DefInfo.hasSameVLMAX(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>) &amp;&amp;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      (DefInfo.hasAVLImm() || DefInfo.getAVLReg() == RISCV::X0)) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (DefInfo.hasAVLImm())</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setAVLImm(DefInfo.getAVLImm());</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setAVLReg(DefInfo.getAVLReg());</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">// Given a state with which we evaluated MI (see transferBefore above for why</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">// this might be different that the state MI requested), modify the state to</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">// reflect the changes MI might make.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::transferAfter(VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">if</span> (isVectorConfigInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">getInfoForVSETVLI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCV.html#ab168f2f439a9450cdc1525d381d4d6ea">RISCV::isFaultFirstLoad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// Update AVL to vl-output of the fault first load.</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setAVLReg(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// If this is something that updates VL/VTYPE that we don&#39;t know about, set</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// the state to unknown.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInlineAsm() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VL) ||</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VTYPE))</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::computeVLVTYPEChanges(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordtype">bool</span> HadVectorOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  BlockData &amp;BBInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  BBInfo.Change = BBInfo.Pred;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    transferBefore(BBInfo.Change, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (isVectorConfigInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags))</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      HadVectorOp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    transferAfter(BBInfo.Change, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">return</span> HadVectorOp;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::computeIncomingVLVTYPE(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  BlockData &amp;BBInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  BBInfo.InQueue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// Start with the previous entry so that we keep the most conservative state</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// we have ever found.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  VSETVLIInfo InInfo = BBInfo.Pred;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">pred_empty</a>()) {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="comment">// There are no predecessors, so use the default starting status.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    InInfo.setUnknown();</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">predecessors</a>())</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      InInfo = InInfo.intersect(BlockInfo[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getNumber()].Exit);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="comment">// If we don&#39;t have any valid predecessor value, wait until we do.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">if</span> (!InInfo.isValid())</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// If no change, no need to rerun block</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordflow">if</span> (InInfo == BBInfo.Pred)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  BBInfo.Pred = InInfo;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Entry state of &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; changed to &quot;</span> &lt;&lt; BBInfo.Pred &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// Note: It&#39;s tempting to cache the state changes here, but due to the</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// compatibility checks performed a blocks output state can change based on</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// the input state.  To cache, we&#39;d have to add logic for finding</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// never-compatible state changes.</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  computeVLVTYPEChanges(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  VSETVLIInfo TmpStatus = BBInfo.Change;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// If the new exit value matches the old exit value, we don&#39;t need to revisit</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">// any blocks.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keywordflow">if</span> (BBInfo.Exit == TmpStatus)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  BBInfo.Exit = TmpStatus;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Exit state of &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; changed to &quot;</span> &lt;&lt; BBInfo.Exit &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// Add the successors to the work list so we can propagate the changed exit</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">// status.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>())</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">if</span> (!BlockInfo[<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getNumber()].InQueue) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      BlockInfo[<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getNumber()].InQueue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      WorkList.push(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;}</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">// If we weren&#39;t able to prove a vsetvli was directly unneeded, it might still</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">// be unneeded if the AVL is a phi node where all incoming values are VL</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">// outputs from the last VSETVLI in their respective basic blocks.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::needVSETVLIPHI(<span class="keyword">const</span> VSETVLIInfo &amp;Require,</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">DisableInsertVSETVLPHIOpt</a>)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">if</span> (!Require.hasAVLReg())</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg = Require.getAVLReg();</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">if</span> (!AVLReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="comment">// We need the AVL to be produce by a PHI node in this basic block.</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(AVLReg);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> || <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getOpcode() != <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">RISCV::PHI</a> || <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getParent() != &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> PHIOp = 1, NumOps = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getNumOperands(); PHIOp != NumOps;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;       PHIOp += 2) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> InReg = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getOperand(PHIOp).getReg();</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PBB = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getOperand(PHIOp + 1).getMBB();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keyword">const</span> BlockData &amp;PBBInfo = BlockInfo[PBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">// If the exit from the predecessor has the VTYPE we are looking for</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// we might be able to avoid a VSETVLI.</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (PBBInfo.Exit.isUnknown() || !PBBInfo.Exit.hasSameVTYPE(Require))</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">// We need the PHI input to the be the output of a VSET(I)VLI.</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(InReg);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> || !isVectorConfigInstr(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>))</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="comment">// We found a VSET(I)VLI make sure it matches the output of the</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="comment">// predecessor block.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    VSETVLIInfo DefInfo = <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">getInfoForVSETVLI</a>(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">if</span> (!DefInfo.hasSameAVL(PBBInfo.Exit) ||</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        !DefInfo.hasSameVTYPE(PBBInfo.Exit))</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// If all the incoming values to the PHI checked out, we don&#39;t need</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// to insert a VSETVLI.</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::emitVSETVLIs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  VSETVLIInfo CurInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// Track whether the prefix of the block we&#39;ve scanned is transparent</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// (meaning has not yet changed the abstract state).</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordtype">bool</span> PrefixTransparent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keyword">const</span> VSETVLIInfo PrevInfo = CurInfo;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    transferBefore(CurInfo, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="comment">// If this is an explicit VSETVLI or VSETIVLI, update our state.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (isVectorConfigInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">// Conservatively, mark the VL and VTYPE as live.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg() == RISCV::VL &amp;&amp;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;             <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg() == RISCV::VTYPE &amp;&amp;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;             <span class="stringliteral">&quot;Unexpected operands where VL and VTYPE should be&quot;</span>);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).setIsDead(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).setIsDead(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      PrefixTransparent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>)) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">if</span> (PrevInfo != CurInfo) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="comment">// If this is the first implicit state change, and the state change</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="comment">// requested can be proven to produce the same register contents, we</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">// can skip emitting the actual state change and continue as if we</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">// had since we know the GPR result of the implicit state change</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="comment">// wouldn&#39;t be used and VL/VTYPE registers are correct.  Note that</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="comment">// we *do* need to model the state as if it changed as while the</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="comment">// register contents are unchanged, the abstract model can change.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span> (!PrefixTransparent || needVSETVLIPHI(CurInfo, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>))</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;          insertVSETVLI(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CurInfo, PrevInfo);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        PrefixTransparent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">RISCVII::hasVLOp</a>(<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a>)) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;VLOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="namespacellvm_1_1RISCVII.html#a6dade6b6ad6e6c608f10e26590077f2a">getVLOpNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>()) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;          <span class="comment">// Erase the AVL operand from the instruction.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;          VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(RISCV::NoRegister);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;          VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a class="code" href="classllvm_1_1MachineOperand.html#af2c351dad09a71aa08e1d85c67ae6e53">MachineOperand::CreateReg</a>(RISCV::VL, <span class="comment">/*isDef*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                                <span class="comment">/*isImp*/</span> <span class="keyword">true</span>));</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a class="code" href="classllvm_1_1MachineOperand.html#af2c351dad09a71aa08e1d85c67ae6e53">MachineOperand::CreateReg</a>(RISCV::VTYPE, <span class="comment">/*isDef*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                                              <span class="comment">/*isImp*/</span> <span class="keyword">true</span>));</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInlineAsm() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VL) ||</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VTYPE))</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      PrefixTransparent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    transferAfter(CurInfo, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="comment">// If we reach the end of the block and our current info doesn&#39;t match the</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// expected info, insert a vsetvli to correct.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ae0e185f2fbd3879a55a98f363126301a">UseStrictAsserts</a>) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keyword">const</span> VSETVLIInfo &amp;ExitInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Exit;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (CurInfo.isValid() &amp;&amp; ExitInfo.isValid() &amp;&amp; !ExitInfo.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        CurInfo != ExitInfo) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <span class="comment">// Note there&#39;s an implicit assumption here that terminators never use</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="comment">// or modify VL or VTYPE.  Also, fallthrough will return end().</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keyword">auto</span> InsertPt = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad8c65b86ef286331d408a7a74c7b0b2f">getFirstInstrTerminator</a>();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      insertVSETVLI(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPt, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(InsertPt), ExitInfo,</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                    CurInfo);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      CurInfo = ExitInfo;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RISCVInsertVSETVLI_8cpp.html#ae0e185f2fbd3879a55a98f363126301a">UseStrictAsserts</a> &amp;&amp; CurInfo.isValid()) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span> (CurInfo != <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Exit) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;in block &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  begin        state: &quot;</span> &lt;&lt; <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Pred &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  expected end state: &quot;</span> &lt;&lt; <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Exit &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  actual   end state: &quot;</span> &lt;&lt; CurInfo &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(CurInfo == <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Exit &amp;&amp;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;           <span class="stringliteral">&quot;InsertVSETVLI dataflow invariant violated&quot;</span>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;}</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">/// Return true if the VL value configured must be equal to the requested one.</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#af7fbb93dbd61f3bd9f20cea86f55067d"> 1131</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#af7fbb93dbd61f3bd9f20cea86f55067d">hasFixedResult</a>(<span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasAVLImm())</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="comment">// VLMAX is always the same value.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="comment">// TODO: Could extend to other registers by looking at the associated vreg</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="comment">// def placement.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">return</span> RISCV::X0 == <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLReg();</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordtype">unsigned</span> AVL = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLImm();</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a> = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getSEW();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordtype">unsigned</span> AVLInBits = AVL * <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordtype">unsigned</span> LMul;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordtype">bool</span> Fractional;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  std::tie(LMul, Fractional) = <a class="code" href="namespacellvm_1_1RISCVVType.html#a5144889af710ec49f5eeff7be79e671d">RISCVVType::decodeVLMUL</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getVLMUL());</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">if</span> (Fractional)</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getRealMinVLen() / LMul &gt;= AVLInBits;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getRealMinVLen() * LMul &gt;= AVLInBits;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">/// Perform simple partial redundancy elimination of the VSETVLI instructions</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">/// we&#39;re about to insert by looking for cases where we can PRE from the</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">/// beginning of one block to the end of one of its predecessors.  Specifically,</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">/// this is geared to catch the common case of a fixed length vsetvl in a single</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">/// block loop when it could execute once in the preheader instead.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> RISCVInsertVSETVLI::doPRE(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a>&gt;();</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">if</span> (!BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred.isUnknown())</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *UnavailablePred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  VSETVLIInfo AvailableInfo;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">predecessors</a>()) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keyword">const</span> VSETVLIInfo &amp;PredInfo = BlockInfo[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getNumber()].Exit;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">if</span> (PredInfo.isUnknown()) {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">if</span> (UnavailablePred)</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      UnavailablePred = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!AvailableInfo.isValid()) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      AvailableInfo = PredInfo;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AvailableInfo != PredInfo) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// Unreachable, single pred, or full redundancy. Note that FRE is handled by</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// phase 3.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (!UnavailablePred || !AvailableInfo.isValid())</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// Critical edge - TODO: consider splitting?</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (UnavailablePred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() != 1)</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// If VL can be less than AVL, then we can&#39;t reduce the frequency of exec.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="RISCVInsertVSETVLI_8cpp.html#af7fbb93dbd61f3bd9f20cea86f55067d">hasFixedResult</a>(AvailableInfo, <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>))</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// Model the effect of changing the input state of the block MBB to</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// AvailableInfo.  We&#39;re looking for two issues here; one legality,</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// one profitability.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// 1) If the block doesn&#39;t use some of the fields from VL or VTYPE, we</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">//    may hit the end of the block with a different end state.  We can</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">//    not make this change without reflowing later blocks as well.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// 2) If we don&#39;t actually remove a transition, inserting a vsetvli</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">//    into the predecessor block would be correct, but unprofitable.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  VSETVLIInfo OldInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  VSETVLIInfo CurInfo = AvailableInfo;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordtype">int</span> TransitionsRemoved = 0;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keyword">const</span> VSETVLIInfo LastInfo = CurInfo;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keyword">const</span> VSETVLIInfo LastOldInfo = OldInfo;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    transferBefore(CurInfo, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    transferBefore(OldInfo, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">if</span> (CurInfo == LastInfo)</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      TransitionsRemoved++;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">if</span> (LastOldInfo == OldInfo)</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      TransitionsRemoved--;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    transferAfter(CurInfo, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    transferAfter(OldInfo, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (CurInfo == OldInfo)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="comment">// Convergence.  All transitions after this must match by construction.</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span> (CurInfo != OldInfo || TransitionsRemoved &lt;= 0)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// Issues 1 and 2 above</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// Finally, update both data flow state and insert the actual vsetvli.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// Doing both keeps the code in sync with the dataflow results, which</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// is critical for correctness of phase 3.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keyword">auto</span> OldExit = BlockInfo[UnavailablePred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Exit;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;PRE VSETVLI from &quot;</span> &lt;&lt; <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aedf6cb1135961f41f39dc58ca8576123">getName</a>() &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                    &lt;&lt; UnavailablePred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aedf6cb1135961f41f39dc58ca8576123">getName</a>() &lt;&lt; <span class="stringliteral">&quot; with state &quot;</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                    &lt;&lt; AvailableInfo &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  BlockInfo[UnavailablePred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Exit = AvailableInfo;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred = AvailableInfo;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// Note there&#39;s an implicit assumption here that terminators never use</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// or modify VL or VTYPE.  Also, fallthrough will return end().</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keyword">auto</span> InsertPt = UnavailablePred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad8c65b86ef286331d408a7a74c7b0b2f">getFirstInstrTerminator</a>();</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  insertVSETVLI(*UnavailablePred, InsertPt,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                UnavailablePred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(InsertPt),</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                AvailableInfo, OldExit);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#ac3233999b62030a002c829a1b38a3bdb"> 1239</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac3233999b62030a002c829a1b38a3bdb">doUnion</a>(DemandedFields &amp;A, DemandedFields <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  A.VLAny |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.VLAny;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  A.VLZeroness |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.VLZeroness;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  A.SEW |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.SEW;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  A.LMUL |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.LMUL;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  A.SEWLMULRatio |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.SEWLMULRatio;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  A.TailPolicy |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.TailPolicy;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  A.MaskPolicy |= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.MaskPolicy;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a28355841a4d227859800e9987fdcdf2f"> 1249</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a28355841a4d227859800e9987fdcdf2f">isNonZeroAVL</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>())</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span> RISCV::X0 == MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">isImm</a>());</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">return</span> 0 != MO.<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">// Return true if we can mutate PrevMI to match MI without changing any the</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">// fields which would be observed.</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#aae235dff783825ad511fe24b6ea73426"> 1258</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae235dff783825ad511fe24b6ea73426">canMutatePriorConfig</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;PrevMI,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                                 <span class="keyword">const</span> DemandedFields &amp;Used) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// If the VL values aren&#39;t equal, return false if either a) the former is</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// demanded, or b) we can&#39;t rewrite the former to be the later for</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">// implementation reasons.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">if</span> (!isVLPreservingConfig(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">if</span> (Used.VLAny)</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="comment">// TODO: Requires more care in the mutation...</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">if</span> (isVLPreservingConfig(PrevMI))</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// We don&#39;t bother to handle the equally zero case here as it&#39;s largely</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="comment">// uninteresting.</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span> (Used.VLZeroness &amp;&amp;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        (!<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a28355841a4d227859800e9987fdcdf2f">isNonZeroAVL</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1)) ||</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         !<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a28355841a4d227859800e9987fdcdf2f">isNonZeroAVL</a>(PrevMI.<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1))))</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="comment">// TODO: Track whether the register is defined between</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="comment">// PrevMI and MI.</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).isReg() &amp;&amp;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        RISCV::X0 != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg())</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// TODO: We need to change the result register to allow this rewrite</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">// without the result forming a vl preserving vsetvli which is not</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="comment">// a correct state merge.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">if</span> (PrevMI.<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() == RISCV::X0 &amp;&amp;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).isReg())</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (!PrevMI.<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(2).<a class="code" href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">isImm</a>() || !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).isImm())</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keyword">auto</span> PriorVType = PrevMI.<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(2).<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>();</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keyword">auto</span> VType = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordflow">return</span> areCompatibleVTYPEs(PriorVType, VType, Used);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;}</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::doLocalPostpass(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *NextMI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">// We can have arbitrary code in successors, so VL and VTYPE</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="comment">// must be considered demanded.</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  DemandedFields <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.demandVL();</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.demandVTYPE();</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*&gt;</a> ToDelete;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad8c9657cfb03ef2ebf6364ba9d68c127">rbegin</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a2a25c462b91ac5da41f4ab7edc32b650">rend</a>())) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="keywordflow">if</span> (!isVectorConfigInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ac3233999b62030a002c829a1b38a3bdb">doUnion</a>(Used, getDemanded(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> VRegDef = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (VRegDef != RISCV::X0 &amp;&amp;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        !(VRegDef.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>() &amp;&amp; <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4ea277721b4e63804715a62de87e9a72">use_nodbg_empty</a>(VRegDef)))</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.demandVL();</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">if</span> (NextMI) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.usedVL() &amp;&amp; !<a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.usedVTYPE()) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        ToDelete.push_back(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="comment">// Leave NextMI unchanged</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="RISCVInsertVSETVLI_8cpp.html#aae235dff783825ad511fe24b6ea73426">canMutatePriorConfig</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, *NextMI, Used)) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">if</span> (!isVLPreservingConfig(*NextMI)) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;          <span class="keywordflow">if</span> (NextMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">isImm</a>())</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).ChangeToImmediate(NextMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>());</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).ChangeToRegister(NextMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(NextMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a60c8658c657286e8cd084bf2e9c48eda">getDesc</a>());</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).setImm(NextMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(2).<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>());</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        ToDelete.push_back(NextMI);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="comment">// fallthrough</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    NextMI = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a> = getDemanded(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : ToDelete)</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;}</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::insertReadVL(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCV.html#ab168f2f439a9450cdc1525d381d4d6ea">RISCV::isFaultFirstLoad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> VLOutput = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4ea277721b4e63804715a62de87e9a72">use_nodbg_empty</a>(VLOutput))</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoReadVL),</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                VLOutput);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="comment">// We don&#39;t use the vl output of the VLEFF/VLSEGFF anymore.</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(RISCV::X0);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="comment">// Skip if the vector extension is not enabled.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a>&gt;();</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVInstructions())</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Entering InsertVSETVLI for &quot;</span> &lt;&lt; MF.<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getInstrInfo();</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a> = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a>(BlockInfo.empty() &amp;&amp; <span class="stringliteral">&quot;Expect empty block infos&quot;</span>);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  BlockInfo.resize(MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>());</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordtype">bool</span> HaveVectorOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// Phase 1 - determine how VL/VTYPE are affected by the each block.</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    HaveVectorOp |= computeVLVTYPEChanges(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="comment">// Initial exit state is whatever change we found in the block.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    BlockData &amp;BBInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    BBInfo.Exit = BBInfo.Change;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Initial exit state of &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; BBInfo.Exit &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="comment">// If we didn&#39;t find any instructions that need VSETVLI, we&#39;re done.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keywordflow">if</span> (!HaveVectorOp) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    BlockInfo.clear();</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  }</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="comment">// Phase 2 - determine the exit VL/VTYPE from each block. We add all</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="comment">// blocks to the list here, but will also add any that need to be revisited</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// during Phase 2 processing.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    WorkList.push(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].InQueue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *WorkList.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acb4d7c02992f3821f3e3432b6c65de49">front</a>();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    WorkList.pop();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    computeIncomingVLVTYPE(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="comment">// Perform partial redundancy elimination of vsetvli transitions.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    doPRE(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// Phase 3 - add any vsetvli instructions needed in the block. Use the</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="comment">// Phase 2 information to avoid adding vsetvlis before the first vector</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// instruction in the block if the VL/VTYPE is satisfied by its</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// predecessors.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    emitVSETVLIs(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="comment">// Now that all vsetvlis are explicit, go through and do block local</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="comment">// DSE and peephole based demanded fields based transforms.  Note that</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="comment">// this *must* be done outside the main dataflow so long as we allow</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// any cross block analysis within the dataflow.  We can&#39;t have both</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// demanded fields based mutation and non-local analysis in the</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="comment">// dataflow at the same time without introducing inconsistencies.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    doLocalPostpass(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160; </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="comment">// Once we&#39;re fully done rewriting all the instructions, do a final pass</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// through to check for VSETVLIs which write to an unused destination.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// For the non X0, X0 variant, we can replace the destination register</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// with X0 to reduce register pressure.  This is really a generic</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="comment">// optimization which can be applied to any dead def (TODO: generalize).</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLI ||</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETIVLI) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> VRegDef = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">if</span> (VRegDef != RISCV::X0 &amp;&amp; <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4ea277721b4e63804715a62de87e9a72">use_nodbg_empty</a>(VRegDef))</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).setReg(RISCV::X0);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// Insert PseudoReadVL after VLEFF/VLSEGFF and replace it with the vl output</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// of VLEFF/VLSEGFF.</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    insertReadVL(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  BlockInfo.clear();</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">return</span> HaveVectorOp;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;}</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">/// Returns an instance of the Insert VSETVLI pass.</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"><a class="line" href="namespacellvm.html#a8db2e8ba2cd1e93d428ad49f96a1e18e"> 1453</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a8db2e8ba2cd1e93d428ad49f96a1e18e">llvm::createRISCVInsertVSETVLIPass</a>() {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> RISCVInsertVSETVLI();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451">llvm::RISCVII::LMUL_1</a></div><div class="ttdeci">@ LMUL_1</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00121">RISCVBaseInfo.h:121</a></div></div>
<div class="ttc" id="aLazyValueInfo_8cpp_html_ac20acbd89e45284bfb32ca506d20749d"><div class="ttname"><a href="LazyValueInfo_8cpp.html#ac20acbd89e45284bfb32ca506d20749d">intersect</a></div><div class="ttdeci">static ValueLatticeElement intersect(const ValueLatticeElement &amp;A, const ValueLatticeElement &amp;B)</div><div class="ttdoc">Combine two sets of facts about the same value into a single set of facts.</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l00095">LazyValueInfo.cpp:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a81626de817a0cb021ff8e915cf1942ed"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00385">MachineBasicBlock.h:385</a></div></div>
<div class="ttc" id="aCompiler_8h_html_a6881c00738b22a600dfee25a1c32dab3"><div class="ttname"><a href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a></div><div class="ttdeci">#define LLVM_ATTRIBUTE_USED</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00139">Compiler.h:139</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a4de876ab2e84826768e79441d88e1b14"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">RISCV_INSERT_VSETVLI_NAME</a></div><div class="ttdeci">#define RISCV_INSERT_VSETVLI_NAME</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00035">RISCVInsertVSETVLI.cpp:35</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_af9dfac3d961f5f889f2c6d38ce89685f"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#af9dfac3d961f5f889f2c6d38ce89685f">llvm::RISCVII::getSEWOpNum</a></div><div class="ttdeci">static unsigned getSEWOpNum(const MCInstrDesc &amp;Desc)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00201">RISCVBaseInfo.h:201</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aCompiler_8h_html_aa863693eef567397d9c292da5bf22d34"><div class="ttname"><a href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a></div><div class="ttdeci">#define LLVM_DUMP_METHOD</div><div class="ttdoc">Mark debug helper function definitions like dump() that should not be stripped from debug builds.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00492">Compiler.h:492</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a120ccebe70e1b0ddf72fc776229d0025"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a120ccebe70e1b0ddf72fc776229d0025">llvm::MachineInstr::isImplicitDef</a></div><div class="ttdeci">bool isImplicitDef() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01313">MachineInstr.h:1313</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_a6cf2f8996b1e9aaf2d7a435aaa62382f"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a></div><div class="ttdeci">MachineInstrBuilder &amp; UseMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00107">AArch64ExpandPseudoInsts.cpp:107</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_af2c351dad09a71aa08e1d85c67ae6e53"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#af2c351dad09a71aa08e1d85c67ae6e53">llvm::MachineOperand::CreateReg</a></div><div class="ttdeci">static MachineOperand CreateReg(Register Reg, bool isDef, bool isImp=false, bool isKill=false, bool isDead=false, bool isUndef=false, bool isEarlyClobber=false, unsigned SubReg=0, bool isDebug=false, bool isInternalRead=false, bool isRenamable=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00833">MachineOperand.h:833</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a20ff72740ddcb82d56986c52be173b39"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a20ff72740ddcb82d56986c52be173b39">llvm::RISCVII::usesMaskPolicy</a></div><div class="ttdeci">static bool usesMaskPolicy(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00180">RISCVBaseInfo.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00157">MachineRegisterInfo.cpp:157</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86II_html_a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">llvm::X86II::TA</a></div><div class="ttdeci">@ TA</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00813">X86BaseInfo.h:813</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a24e199b7bdb42e354fcf9237dc8cb399"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a24e199b7bdb42e354fcf9237dc8cb399">getInfoForVSETVLI</a></div><div class="ttdeci">static VSETVLIInfo getInfoForVSETVLI(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00783">RISCVInsertVSETVLI.cpp:783</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00519">MachineOperand.h:519</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; MachineInstr * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8db2e8ba2cd1e93d428ad49f96a1e18e"><div class="ttname"><a href="namespacellvm.html#a8db2e8ba2cd1e93d428ad49f96a1e18e">llvm::createRISCVInsertVSETVLIPass</a></div><div class="ttdeci">FunctionPass * createRISCVInsertVSETVLIPass()</div><div class="ttdoc">Returns an instance of the Insert VSETVLI pass.</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l01453">RISCVInsertVSETVLI.cpp:1453</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7881286e3ea4d7f1c4a63c87c132dac"><div class="ttname"><a href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">llvm::printMBBReference</a></div><div class="ttdeci">Printable printMBBReference(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Prints a machine basic block reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00118">MachineBasicBlock.cpp:118</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_aa22424ba23740b6a748e8d0c239b7e4c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">llvm::MachineFunction::getNumBlockIDs</a></div><div class="ttdeci">unsigned getNumBlockIDs() const</div><div class="ttdoc">getNumBlockIDs - Return the number of MBB ID's allocated.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00815">MachineFunction.h:815</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_aa18a6c74ee58139536f65e458f1c4586"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#aa18a6c74ee58139536f65e458f1c4586">llvm::RISCVVType::isValidSEW</a></div><div class="ttdeci">static bool isValidSEW(unsigned SEW)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00424">RISCVBaseInfo.h:424</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab622d694b5fcb0edb99159f1ebdcdb6b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">llvm::MachineBasicBlock::findDebugLoc</a></div><div class="ttdeci">DebugLoc findDebugLoc(instr_iterator MBBI)</div><div class="ttdoc">Find the next valid DebugLoc starting at MBBI, skipping any DBG_VALUE and DBG_LABEL instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01397">MachineBasicBlock.cpp:1397</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_afc858f8e35813be95df97504afd771ef"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">llvm::RISCVII::hasSEWOp</a></div><div class="ttdeci">static bool hasSEWOp(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00164">RISCVBaseInfo.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a60c8658c657286e8cd084bf2e9c48eda"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a60c8658c657286e8cd084bf2e9c48eda">llvm::MachineInstr::getDesc</a></div><div class="ttdeci">const MCInstrDesc &amp; getDesc() const</div><div class="ttdoc">Returns the target instruction descriptor of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00513">MachineInstr.h:513</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a08cfea4b8c9e0a6118dc031cafeb0773"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a08cfea4b8c9e0a6118dc031cafeb0773">llvm::RISCVVType::isTailAgnostic</a></div><div class="ttdeci">static bool isTailAgnostic(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00465">RISCVBaseInfo.h:465</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ZeroCallUsedRegs_html_af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87"><div class="ttname"><a href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">llvm::ZeroCallUsedRegs::ZeroCallUsedRegsKind::Used</a></div><div class="ttdeci">@ Used</div></div>
<div class="ttc" id="aclassBlockData_html_a3a4dfddb67525d6766e5b78956395fb9"><div class="ttname"><a href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData::BlockData</a></div><div class="ttdeci">BlockData()</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00105">SIModeRegister.cpp:105</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ab1289c3a81660b9a99966dd6af9278ed"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ab1289c3a81660b9a99966dd6af9278ed">setVTYPE</a></div><div class="ttdeci">InstrInfo setVTYPE(VLMul, SEW, TailAgnostic, MaskAgnostic)</div></div>
<div class="ttc" id="anamespacellvm_html_a2f883c895f4d244f4ed56ed8a8c160c1"><div class="ttname"><a href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">llvm::operator!=</a></div><div class="ttdeci">bool operator!=(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02040">APInt.h:2040</a></div></div>
<div class="ttc" id="astructllvm_1_1RISCVVPseudosTable_1_1PseudoInfo_html"><div class="ttname"><a href="structllvm_1_1RISCVVPseudosTable_1_1PseudoInfo.html">llvm::RISCVVPseudosTable::PseudoInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="RISCVInstrInfo_8h_source.html#l00269">RISCVInstrInfo.h:269</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_aae235dff783825ad511fe24b6ea73426"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#aae235dff783825ad511fe24b6ea73426">canMutatePriorConfig</a></div><div class="ttdeci">static bool canMutatePriorConfig(const MachineInstr &amp;PrevMI, const MachineInstr &amp;MI, const DemandedFields &amp;Used)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l01258">RISCVInsertVSETVLI.cpp:1258</a></div></div>
<div class="ttc" id="anamespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00877">SparseBitVector.h:877</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCV_html_ae746649c43bf0f652d04addefd39a55e"><div class="ttname"><a href="namespacellvm_1_1RISCV.html#ae746649c43bf0f652d04addefd39a55e">llvm::RISCV::VLMaxSentinel</a></div><div class="ttdeci">static constexpr int64_t VLMaxSentinel</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInstrInfo_8h_source.html#l00263">RISCVInstrInfo.h:263</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_aa74e26e879c8e27e2fda48270367f4ea"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#aa74e26e879c8e27e2fda48270367f4ea">Log2SEW</a></div><div class="ttdeci">unsigned Log2SEW</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00681">RISCVInsertVSETVLI.cpp:681</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_ad330ee2b7583cf1bf0a79f69c23ce6fe"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#ad330ee2b7583cf1bf0a79f69c23ce6fe">llvm::RISCVII::hasVecPolicyOp</a></div><div class="ttdeci">static bool hasVecPolicyOp(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00172">RISCVBaseInfo.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_af5af8d664535a4bfbb71f0243ed9ae3a"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">llvm::RISCVVType::getSEW</a></div><div class="ttdeci">static unsigned getSEW(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00460">RISCVBaseInfo.h:460</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a9f4a1ccc4923b17bd414716718e3febf"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a9f4a1ccc4923b17bd414716718e3febf">UseOpIdx</a></div><div class="ttdeci">unsigned UseOpIdx</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00640">RISCVInsertVSETVLI.cpp:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00167">MachineFunctionPass.cpp:167</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCV_html_ab168f2f439a9450cdc1525d381d4d6ea"><div class="ttname"><a href="namespacellvm_1_1RISCV.html#ab168f2f439a9450cdc1525d381d4d6ea">llvm::RISCV::isFaultFirstLoad</a></div><div class="ttdeci">bool isFaultFirstLoad(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInstrInfo_8cpp_source.html#l02834">RISCVInstrInfo.cpp:2834</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="astructllvm_1_1RISCVVPseudosTable_1_1PseudoInfo_html_aa38c05fe8368d9405644fbd487ed7369"><div class="ttname"><a href="structllvm_1_1RISCVVPseudosTable_1_1PseudoInfo.html#aa38c05fe8368d9405644fbd487ed7369">llvm::RISCVVPseudosTable::PseudoInfo::BaseInstr</a></div><div class="ttdeci">uint16_t BaseInstr</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInstrInfo_8h_source.html#l00271">RISCVInstrInfo.h:271</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a9773946e3c7f55a1aba9c6f92205b3afabdc0a80d5e4b58676f861ffaa296bd1b"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a9773946e3c7f55a1aba9c6f92205b3afabdc0a80d5e4b58676f861ffaa296bd1b">llvm::RISCVII::TAIL_AGNOSTIC</a></div><div class="ttdeci">@ TAIL_AGNOSTIC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00133">RISCVBaseInfo.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad8c65b86ef286331d408a7a74c7b0b2f"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad8c65b86ef286331d408a7a74c7b0b2f">llvm::MachineBasicBlock::getFirstInstrTerminator</a></div><div class="ttdeci">instr_iterator getFirstInstrTerminator()</div><div class="ttdoc">Same getFirstTerminator but it ignores bundles and return an instr_iterator instead.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00249">MachineBasicBlock.cpp:249</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a6ab56a96ea40bb332e1a049c59e67258"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a6ab56a96ea40bb332e1a049c59e67258">InstrInfo</a></div><div class="ttdeci">return InstrInfo</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00708">RISCVInsertVSETVLI.cpp:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a38b28a85f818b49d8806c150b8a5b4f7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00556">MachineOperand.h:556</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ac99e0f42f9964e41d14366a27d615514"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ac99e0f42f9964e41d14366a27d615514">MaskAgnostic</a></div><div class="ttdeci">bool MaskAgnostic</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00639">RISCVInsertVSETVLI.cpp:639</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a29b0570e44859d5df506ee5d309fb228"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">DisableInsertVSETVLPHIOpt</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableInsertVSETVLPHIOpt(&quot;riscv-disable-insert-vsetvl-phi-opt&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Disable looking through phis when inserting vsetvlis.&quot;))</div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a81c11c8178c6df7f55ef0557daa54765"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">llvm::RISCVII::hasVLOp</a></div><div class="ttdeci">static bool hasVLOp(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00168">RISCVBaseInfo.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a2a25c462b91ac5da41f4ab7edc32b650"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a2a25c462b91ac5da41f4ab7edc32b650">llvm::MachineBasicBlock::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00319">MachineBasicBlock.h:319</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a93a4b715b7858d01e1d6e8f32577be87"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a93a4b715b7858d01e1d6e8f32577be87">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(RISCVInsertVSETVLI, DEBUG_TYPE, RISCV_INSERT_VSETVLI_NAME, false, false) static VSETVLIInfo computeInfoForInstr(const MachineInstr &amp;MI</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5ee0a415cf089775fd277550b257f74e"><div class="ttname"><a href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APFixedPoint &amp;FX)</div><div class="ttdef"><b>Definition:</b> <a href="APFixedPoint_8h_source.html#l00292">APFixedPoint.h:292</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a40d954b9cf9ee8b545a78725f2549cba"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(Register Reg) const</div><div class="ttdoc">getVRegDef - Return the machine instr that defines the specified virtual register or null if none is ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00398">MachineRegisterInfo.cpp:398</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aDebugify_8cpp_html_a993c6c27e31cbf36d079971889f3e015"><div class="ttname"><a href="Debugify_8cpp.html#a993c6c27e31cbf36d079971889f3e015">DF</a></div><div class="ttdeci">static RegisterPass&lt; DebugifyFunctionPass &gt; DF(&quot;debugify-function&quot;, &quot;Attach debug info to a function&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_aebafd86dde59b5a05b22e8720e808a9d"><div class="ttname"><a href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">llvm::Register::isVirtual</a></div><div class="ttdeci">bool isVirtual() const</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00091">Register.h:91</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ad4e26a8fdece2198ba75eff89753cd22"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ad4e26a8fdece2198ba75eff89753cd22">TSFlags</a></div><div class="ttdeci">uint64_t TSFlags</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00635">RISCVInsertVSETVLI.cpp:635</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a5144889af710ec49f5eeff7be79e671d"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a5144889af710ec49f5eeff7be79e671d">llvm::RISCVVType::decodeVLMUL</a></div><div class="ttdeci">std::pair&lt; unsigned, bool &gt; decodeVLMUL(RISCVII::VLMUL VLMUL)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8cpp_source.html#l00149">RISCVBaseInfo.cpp:149</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ac3233999b62030a002c829a1b38a3bdb"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ac3233999b62030a002c829a1b38a3bdb">doUnion</a></div><div class="ttdeci">static void doUnion(DemandedFields &amp;A, DemandedFields B)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l01239">RISCVInsertVSETVLI.cpp:1239</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a4c9594c955fec80c73ddd964b5efd554"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const</div><div class="ttdoc">isReg - Tests if this is a MO_Register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00329">MachineOperand.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">llvm::pdb::Unknown</a></div><div class="ttdeci">@ Unknown</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00396">PDBTypes.h:396</a></div></div>
<div class="ttc" id="aLiveIntervals_8h_html"><div class="ttname"><a href="LiveIntervals_8h.html">LiveIntervals.h</a></div></div>
<div class="ttc" id="aAArch64PromoteConstant_8cpp_html_a90f8350fecae261c25be85d38b451bff"><div class="ttname"><a href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a></div><div class="ttdeci">aarch64 promote const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64PromoteConstant_8cpp_source.html#l00232">AArch64PromoteConstant.cpp:232</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a6dade6b6ad6e6c608f10e26590077f2a"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a6dade6b6ad6e6c608f10e26590077f2a">llvm::RISCVII::getVLOpNum</a></div><div class="ttdeci">static unsigned getVLOpNum(const MCInstrDesc &amp;Desc)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00190">RISCVBaseInfo.h:190</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">llvm::RegState::Implicit</a></div><div class="ttdeci">@ Implicit</div><div class="ttdoc">Not emitted register (e.g. carry, or temporary result).</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00046">MachineInstrBuilder.h:46</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aRISCVISelLowering_8cpp_html_a3348aee6b71c8c148291c6ea01de5a83"><div class="ttname"><a href="RISCVISelLowering_8cpp.html#a3348aee6b71c8c148291c6ea01de5a83">hasNonZeroAVL</a></div><div class="ttdeci">static bool hasNonZeroAVL(SDValue AVL)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVISelLowering_8cpp_source.html#l06007">RISCVISelLowering.cpp:6007</a></div></div>
<div class="ttc" id="aclassllvm_1_1RISCVSubtarget_html"><div class="ttname"><a href="classllvm_1_1RISCVSubtarget.html">llvm::RISCVSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="RISCVSubtarget_8h_source.html#l00035">RISCVSubtarget.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00582">MachineFunction.cpp:582</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_afd9b9b8655c008bf6cd6afb05d41b69e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">llvm::MachineBasicBlock::predecessors</a></div><div class="ttdeci">iterator_range&lt; pred_iterator &gt; predecessors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00390">MachineBasicBlock.h:390</a></div></div>
<div class="ttc" id="aRISCV_8h_html"><div class="ttname"><a href="RISCV_8h.html">RISCV.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a877507fda31c207ec36a018784369708"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00372">MachineBasicBlock.h:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4d812a2dd18aa186c164447e20e348e7"><div class="ttname"><a href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">llvm::operator==</a></div><div class="ttdeci">bool operator==(const AddressRangeValuePair &amp;LHS, const AddressRangeValuePair &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00153">AddressRanges.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_html_a67980a8ae101d2fda845eb750ffb1942"><div class="ttname"><a href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">llvm::print</a></div><div class="ttdeci">Printable print(const GCNRegPressure &amp;RP, const GCNSubtarget *ST=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00138">GCNRegPressure.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a4ea277721b4e63804715a62de87e9a72"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a4ea277721b4e63804715a62de87e9a72">llvm::MachineRegisterInfo::use_nodbg_empty</a></div><div class="ttdeci">bool use_nodbg_empty(Register RegNo) const</div><div class="ttdoc">use_nodbg_empty - Return true if there are no non-Debug instructions using the specified register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00588">MachineRegisterInfo.h:588</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3aa22d521bd6a7e6b9f35545dc7b0f1e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const</div><div class="ttdoc">MachineBasicBlocks are uniquely numbered at the function level, unless they're not in a MachineFuncti...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01143">MachineBasicBlock.h:1143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4d2c96836214c1f13357ffb99125fb4a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">llvm::MachineBasicBlock::successors</a></div><div class="ttdeci">iterator_range&lt; succ_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00396">MachineBasicBlock.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad8c9657cfb03ef2ebf6364ba9d68c127"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad8c9657cfb03ef2ebf6364ba9d68c127">llvm::MachineBasicBlock::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00313">MachineBasicBlock.h:313</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ab0c42373648e7fc472bee4669cc735c9"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ab0c42373648e7fc472bee4669cc735c9">assert</a></div><div class="ttdeci">assert(RISCVVType::isValidSEW(SEW) &amp;&amp;&quot;Unexpected SEW&quot;)</div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ace7db385393ddf90b013936ca4ca9c40"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ace7db385393ddf90b013936ca4ca9c40">TailAgnostic</a></div><div class="ttdeci">bool TailAgnostic</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00639">RISCVInsertVSETVLI.cpp:639</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a6f7616aee876ea307c715d2ef9fb041b"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a6f7616aee876ea307c715d2ef9fb041b">llvm::RISCVII::doesForceTailAgnostic</a></div><div class="ttdeci">static bool doesForceTailAgnostic(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00156">RISCVBaseInfo.h:156</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a12465125c9315bf864c53298cccde08a"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">llvm::RISCVVType::getVLMUL</a></div><div class="ttdeci">static RISCVII::VLMUL getVLMUL(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00436">RISCVBaseInfo.h:436</a></div></div>
<div class="ttc" id="aclassuint16__t_html"><div class="ttname"><a href="classuint16__t.html">uint16_t</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ae0e185f2fbd3879a55a98f363126301a"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ae0e185f2fbd3879a55a98f363126301a">UseStrictAsserts</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UseStrictAsserts(&quot;riscv-insert-vsetvl-strict-asserts&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable strict assertion checking for the dataflow algorithm&quot;))</div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a7dc0d6840d44bc9348088a786932fc68"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a7dc0d6840d44bc9348088a786932fc68">llvm::RISCVVType::isMaskAgnostic</a></div><div class="ttdeci">static bool isMaskAgnostic(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00467">RISCVBaseInfo.h:467</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_ad3636219b4d0045029530c6a16c160dc"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">llvm::RISCVVType::encodeVTYPE</a></div><div class="ttdeci">unsigned encodeVTYPE(RISCVII::VLMUL VLMUL, unsigned SEW, bool TailAgnostic, bool MaskAgnostic)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8cpp_source.html#l00135">RISCVBaseInfo.cpp:135</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a7dd086d89a22b8e83abd3e687cd13a35"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a7dd086d89a22b8e83abd3e687cd13a35">llvm::RISCVII::getLMul</a></div><div class="ttdeci">static VLMUL getLMul(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00148">RISCVBaseInfo.h:148</a></div></div>
<div class="ttc" id="anamespacellvm_html_a264176188c0aadccd3ca5b6929b5a2e1af704f57ea420275ad51bf55b7dec2c96"><div class="ttname"><a href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1af704f57ea420275ad51bf55b7dec2c96">llvm::AllocFnKind::Uninitialized</a></div><div class="ttdeci">@ Uninitialized</div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a28355841a4d227859800e9987fdcdf2f"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a28355841a4d227859800e9987fdcdf2f">isNonZeroAVL</a></div><div class="ttdeci">static bool isNonZeroAVL(const MachineOperand &amp;MO)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l01249">RISCVInsertVSETVLI.cpp:1249</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acb4d7c02992f3821f3e3432b6c65de49"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acb4d7c02992f3821f3e3432b6c65de49">llvm::MachineBasicBlock::front</a></div><div class="ttdeci">MachineInstr &amp; front()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00288">MachineBasicBlock.h:288</a></div></div>
<div class="ttc" id="anamespacellvm_1_1XCoreISD_html_a34e7964aa899176244e03cb7b1fc5985a5f16d1c5f09829a27d169eeda4d60a5f"><div class="ttname"><a href="namespacellvm_1_1XCoreISD.html#a34e7964aa899176244e03cb7b1fc5985a5f16d1c5f09829a27d169eeda4d60a5f">llvm::XCoreISD::LMUL</a></div><div class="ttdeci">@ LMUL</div><div class="ttdef"><b>Definition:</b> <a href="XCoreISelLowering_8h_source.html#l00059">XCoreISelLowering.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a76f61c6784df6dc8402a8b9011041926"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">llvm::MachineOperand::isImm</a></div><div class="ttdeci">bool isImm() const</div><div class="ttdoc">isImm - Tests if this is a MO_Immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00331">MachineOperand.h:331</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_aae7423532c298de53bc19b1d8118418c"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#aae7423532c298de53bc19b1d8118418c">VLMul</a></div><div class="ttdeci">RISCVII::VLMUL VLMul</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00679">RISCVInsertVSETVLI.cpp:679</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a637c99ef7659f7abe85022f14a54bc8f"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a637c99ef7659f7abe85022f14a54bc8f">MRI</a></div><div class="ttdeci">uint64_t const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00636">RISCVInsertVSETVLI.cpp:636</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">llvm::RISCVMatInt::Imm</a></div><div class="ttdeci">@ Imm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00023">RISCVMatInt.h:23</a></div></div>
<div class="ttc" id="aRISCVSubtarget_8h_html"><div class="ttname"><a href="RISCVSubtarget_8h.html">RISCVSubtarget.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">llvm::RegState::Kill</a></div><div class="ttdeci">@ Kill</div><div class="ttdoc">The last use of a register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00048">MachineInstrBuilder.h:48</a></div></div>
<div class="ttc" id="anamespacellvm_html_a372d99cc1a229ad0e8ef80f12a0cd7cf"><div class="ttname"><a href="namespacellvm.html#a372d99cc1a229ad0e8ef80f12a0cd7cf">llvm::initializeRISCVInsertVSETVLIPass</a></div><div class="ttdeci">void initializeRISCVInsertVSETVLIPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ac4786fefd4d527c4c601f237a6d67919"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ac4786fefd4d527c4c601f237a6d67919">SEW</a></div><div class="ttdeci">unsigned SEW</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00683">RISCVInsertVSETVLI.cpp:683</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00184">RustDemangle.cpp:184</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00309">MachineBasicBlock.h:309</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a682ba82f42f7903d0000ffbb13ea3b57"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(Register Reg)</div><div class="ttdoc">Change the register this operand corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00061">MachineOperand.cpp:61</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_ad3ece0ac2421637044624c9b01c42466"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a></div><div class="ttdeci">MachineInstrBuilder MachineInstrBuilder &amp; DefMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00108">AArch64ExpandPseudoInsts.cpp:108</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00034">RISCVInsertVSETVLI.cpp:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_ad85285685fc46db3f2b3b0bf90bf9184"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">llvm::MachineRegisterInfo::constrainRegClass</a></div><div class="ttdeci">const TargetRegisterClass * constrainRegClass(Register Reg, const TargetRegisterClass *RC, unsigned MinNumRegs=0)</div><div class="ttdoc">constrainRegClass - Constrain the register class of the specified virtual register to be a common sub...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00083">MachineRegisterInfo.cpp:83</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_ab335a6694bd42d4d2f807ec281af1e1c"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">llvm::RISCVII::VLMUL</a></div><div class="ttdeci">VLMUL</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00120">RISCVBaseInfo.h:120</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a51c33217fc9f7cae7a19701e421dc70f"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a51c33217fc9f7cae7a19701e421dc70f">llvm::RISCVVType::getSEWLMULRatio</a></div><div class="ttdeci">unsigned getSEWLMULRatio(unsigned SEW, RISCVII::VLMUL VLMul)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8cpp_source.html#l00190">RISCVBaseInfo.cpp:190</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a9773946e3c7f55a1aba9c6f92205b3afa1d96428e9ed63333f145e92079ab267d"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a9773946e3c7f55a1aba9c6f92205b3afa1d96428e9ed63333f145e92079ab267d">llvm::RISCVII::MASK_AGNOSTIC</a></div><div class="ttdeci">@ MASK_AGNOSTIC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00134">RISCVBaseInfo.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_af7fbb93dbd61f3bd9f20cea86f55067d"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#af7fbb93dbd61f3bd9f20cea86f55067d">hasFixedResult</a></div><div class="ttdeci">static bool hasFixedResult(const VSETVLIInfo &amp;Info, const RISCVSubtarget &amp;ST)</div><div class="ttdoc">Return true if the VL value configured must be equal to the requested one.</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l01131">RISCVInsertVSETVLI.cpp:1131</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdeci">@ Dead</div><div class="ttdoc">Unused definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00050">MachineInstrBuilder.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdeci">@ Define</div><div class="ttdoc">Register definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00044">MachineInstrBuilder.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aedf6cb1135961f41f39dc58ca8576123"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aedf6cb1135961f41f39dc58ca8576123">llvm::MachineBasicBlock::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return the name of the corresponding LLVM basic block, or an empty string.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00316">MachineBasicBlock.cpp:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:16:45 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

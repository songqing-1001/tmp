<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/RISCV/MCTargetDesc/RISCVMatInt.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_fc62c913e8b7bfce256a9466d87d79c7.html">RISCV</a></li><li class="navelem"><a class="el" href="dir_72076151150f9c89e8fe93bb4df5dbe1.html">MCTargetDesc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RISCVMatInt.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RISCVMatInt_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- RISCVMatInt.cpp - Immediate materialisation -------------*- C++ -*--===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RISCVMatInt_8h.html">RISCVMatInt.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RISCVMCTargetDesc_8h.html">MCTargetDesc/RISCVMCTargetDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="RISCVMatInt_8cpp.html#af68372c2e557ba09bc11be98bc3d65e3">   15</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="RISCVMatInt_8cpp.html#af68372c2e557ba09bc11be98bc3d65e3">getInstSeqCost</a>(<a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> &amp;Res, <span class="keywordtype">bool</span> HasRVC) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <span class="keywordflow">if</span> (!HasRVC)</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">return</span> Res.size();</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = 0;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Instr : Res) {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">// Assume instructions that aren&#39;t listed aren&#39;t compressible.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordtype">bool</span> Compressed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordflow">switch</span> (Instr.getOpcode()) {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">case</span> RISCV::SLLI:</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordflow">case</span> RISCV::SRLI:</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;      Compressed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">case</span> RISCV::ADDI:</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">case</span> RISCV::ADDIW:</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">case</span> RISCV::LUI:</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      Compressed = isInt&lt;6&gt;(Instr.getImm());</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    }</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// Two RVC instructions take the same space as one RVI instruction, but</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// can take longer to execute than the single RVI instruction. Thus, we</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// consider that two RVC instruction are slightly more costly than one</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// RVI instruction. For longer sequences of RVC instructions the space</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// savings can be worth it, though. The costs below try to model that.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">if</span> (!Compressed)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> += 100; <span class="comment">// Baseline cost of one RVI instruction: 100%.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> += 70; <span class="comment">// 70% cost of baseline.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// Recursively generate a sequence for materializing an integer.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">   48</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(int64_t Val,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1FeatureBitset.html">FeatureBitset</a> &amp;ActiveFeatures,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> &amp;Res) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">bool</span> IsRV64 = ActiveFeatures[RISCV::Feature64Bit];</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// Use BSETI for a single bit that can&#39;t be expressed by a single LUI or ADDI.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">if</span> (ActiveFeatures[RISCV::FeatureStdExtZbs] &amp;&amp; <a class="code" href="namespacellvm.html#a434f6a0d80fb13e4326e848a6391f057">isPowerOf2_64</a>(Val) &amp;&amp;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      (!isInt&lt;32&gt;(Val) || Val == 0x800)) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    Res.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::BSETI, <a class="code" href="namespacellvm.html#a4f42ed6fd2569fa43f03814a17f9d94a">Log2_64</a>(Val));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">if</span> (isInt&lt;32&gt;(Val)) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// Depending on the active bits in the immediate Value v, the following</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// instruction sequences are emitted:</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// v == 0                        : ADDI</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// v[0,12) != 0 &amp;&amp; v[12,32) == 0 : ADDI</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// v[0,12) == 0 &amp;&amp; v[12,32) != 0 : LUI</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// v[0,32) != 0                  : LUI+ADDI(W)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    int64_t Hi20 = ((Val + 0x800) &gt;&gt; 12) &amp; 0xFFFFF;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    int64_t Lo12 = SignExtend64&lt;12&gt;(Val);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> (Hi20)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      Res.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::LUI, Hi20);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (Lo12 || Hi20 == 0) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordtype">unsigned</span> AddiOpc = (IsRV64 &amp;&amp; Hi20) ? RISCV::ADDIW : RISCV::ADDI;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      Res.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(AddiOpc, Lo12);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsRV64 &amp;&amp; <span class="stringliteral">&quot;Can&#39;t emit &gt;32-bit imm for non-RV64 target&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// In the worst case, for a full 64-bit constant, a sequence of 8 instructions</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// (i.e., LUI+ADDIW+SLLI+ADDI+SLLI+ADDI+SLLI+ADDI) has to be emitted. Note</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// that the first two instructions (LUI+ADDIW) can contribute up to 32 bits</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// while the following ADDI instructions contribute up to 12 bits each.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// On the first glance, implementing this seems to be possible by simply</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// emitting the most significant 32 bits (LUI+ADDIW) followed by as many left</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// shift (SLLI) and immediate additions (ADDI) as needed. However, due to the</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// fact that ADDI performs a sign extended addition, doing it like that would</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// only be possible when at most 11 bits of the ADDI instructions are used.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// Using all 12 bits of the ADDI instructions, like done by GAS, actually</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// requires that the constant is processed starting with the least significant</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// bit.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// In the following, constants are processed from LSB to MSB but instruction</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// emission is performed from MSB to LSB by recursively calling</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// generateInstSeq. In each recursion, first the lowest 12 bits are removed</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// from the constant and the optimal shift amount, which can be greater than</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// 12 bits if the constant is sparse, is determined. Then, the shifted</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// remaining constant is processed recursively and gets emitted as soon as it</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// fits into 32 bits. The emission of the shifts and additions is subsequently</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// performed when the recursion returns.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  int64_t Lo12 = SignExtend64&lt;12&gt;(Val);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  Val = (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val - (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Lo12;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordtype">int</span> ShiftAmount = 0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fac837bff23a12c3735d463020f37979de">Unsigned</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Val might now be valid for LUI without needing a shift.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span> (!isInt&lt;32&gt;(Val)) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    ShiftAmount = <a class="code" href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a>((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    Val &gt;&gt;= ShiftAmount;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// If the remaining bits don&#39;t fit in 12 bits, we might be able to reduce the</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// shift amount in order to use LUI which will zero the lower 12 bits.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (ShiftAmount &gt; 12 &amp;&amp; !isInt&lt;12&gt;(Val)) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">if</span> (isInt&lt;32&gt;((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val &lt;&lt; 12)) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="comment">// Reduce the shift amount and add zeros to the LSBs so it will match LUI.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        ShiftAmount -= 12;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        Val = (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val &lt;&lt; 12;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isUInt&lt;32&gt;((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val &lt;&lt; 12) &amp;&amp;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                 ActiveFeatures[RISCV::FeatureStdExtZba]) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment">// Reduce the shift amount and add zeros to the LSBs so it will match</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">// LUI, then shift left with SLLI.UW to clear the upper 32 set bits.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        ShiftAmount -= 12;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        Val = ((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val &lt;&lt; 12) | (0xffffffffull &lt;&lt; 32);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fac837bff23a12c3735d463020f37979de">Unsigned</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// Try to use SLLI_UW for Val when it is uint32 but not int32.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (isUInt&lt;32&gt;((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val) &amp;&amp; !isInt&lt;32&gt;((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val) &amp;&amp;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        ActiveFeatures[RISCV::FeatureStdExtZba]) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="comment">// Use LUI+ADDI or LUI to compose, then clear the upper 32 bits with</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="comment">// SLLI_UW.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      Val = ((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val) | (0xffffffffull &lt;&lt; 32);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fac837bff23a12c3735d463020f37979de">Unsigned</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(Val, ActiveFeatures, Res);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Skip shift if we were able to use LUI directly.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span> (ShiftAmount) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">unsigned</span> Opc = <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fac837bff23a12c3735d463020f37979de">Unsigned</a> ? RISCV::SLLI_UW : RISCV::SLLI;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    Res.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Opc, ShiftAmount);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (Lo12)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    Res.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::ADDI, Lo12);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="RISCVMatInt_8cpp.html#aed44c2aaf126eabc3ce547cbd83133f3">  156</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="RISCVMatInt_8cpp.html#aed44c2aaf126eabc3ce547cbd83133f3">extractRotateInfo</a>(int64_t Val) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// for case: 0b111..1..xxxxxx1..1..</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">unsigned</span> LeadingOnes = <a class="code" href="namespacellvm.html#a8d92de57590536d2f254fe5e903e3372">llvm::countl_one</a>((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordtype">unsigned</span> TrailingOnes = <a class="code" href="namespacellvm.html#a239abca11deebf2731206dd41cf43c0e">llvm::countr_one</a>((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (TrailingOnes &gt; 0 &amp;&amp; TrailingOnes &lt; 64 &amp;&amp;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      (LeadingOnes + TrailingOnes) &gt; (64 - 12))</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> 64 - TrailingOnes;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// for case: 0bxxx1..1..1...xxx</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">unsigned</span> UpperTrailingOnes = <a class="code" href="namespacellvm.html#a239abca11deebf2731206dd41cf43c0e">llvm::countr_one</a>(<a class="code" href="namespacellvm.html#a7b622c469acc130c9a500b85b1473ef3">Hi_32</a>(Val));</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordtype">unsigned</span> LowerLeadingOnes = <a class="code" href="namespacellvm.html#a8d92de57590536d2f254fe5e903e3372">llvm::countl_one</a>(<a class="code" href="namespacellvm.html#a901112c493d3827cda924430a6fbc9f4">Lo_32</a>(Val));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span> (UpperTrailingOnes &lt; 32 &amp;&amp;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      (UpperTrailingOnes + LowerLeadingOnes) &gt; (64 - 12))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> 32 - UpperTrailingOnes;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="namespacellvm_1_1RISCVMatInt.html">  174</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm_1_1RISCVMatInt.html">llvm::RISCVMatInt</a> {</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="namespacellvm_1_1RISCVMatInt.html#ac381b141cc5f412d297c97afce5d3b6e">  175</a></span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">InstSeq</a> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#ac381b141cc5f412d297c97afce5d3b6e">generateInstSeq</a>(int64_t Val, <span class="keyword">const</span> <a class="code" href="classllvm_1_1FeatureBitset.html">FeatureBitset</a> &amp;ActiveFeatures) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> Res;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(Val, ActiveFeatures, Res);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// If the low 12 bits are non-zero, the first expansion may end with an ADDI</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// or ADDIW. If there are trailing zeros, try generating a sign extended</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// constant with no trailing zeros and use a final SLLI to restore them.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">if</span> ((Val &amp; 0xfff) != 0 &amp;&amp; (Val &amp; 1) == 0 &amp;&amp; Res.size() &gt;= 2) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">unsigned</span> TrailingZeros = <a class="code" href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a>((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    int64_t ShiftedVal = Val &gt;&gt; TrailingZeros;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// If we can use C.LI+C.SLLI instead of LUI+ADDI(W) prefer that since</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// its more compressible. But only if LUI+ADDI(W) isn&#39;t fusable.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// NOTE: We don&#39;t check for C extension to minimize differences in generated</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// code.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">bool</span> IsShiftedCompressible =</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;              isInt&lt;6&gt;(ShiftedVal) &amp;&amp; !ActiveFeatures[RISCV::TuneLUIADDIFusion];</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> TmpSeq;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(ShiftedVal, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::SLLI, TrailingZeros);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Keep the new sequence if it is an improvement.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size() || IsShiftedCompressible)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      Res = TmpSeq;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// If the constant is positive we might be able to generate a shifted constant</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// with no leading zeros and use a final SRLI to restore them.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">if</span> (Val &gt; 0 &amp;&amp; Res.size() &gt; 2) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ActiveFeatures[RISCV::Feature64Bit] &amp;&amp;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;           <span class="stringliteral">&quot;Expected RV32 to only need 2 instructions&quot;</span>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">unsigned</span> LeadingZeros = <a class="code" href="namespacellvm.html#a66191f0bcc8c62b784819e9e96ceeba2">llvm::countl_zero</a>((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ShiftedVal = (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val &lt;&lt; LeadingZeros;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Fill in the bits that will be shifted out with 1s. An example where this</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// helps is trailing one masks with 32 or more ones. This will generate</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// ADDI -1 and an SRLI.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    ShiftedVal |= maskTrailingOnes&lt;uint64_t&gt;(LeadingZeros);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> TmpSeq;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(ShiftedVal, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::SRLI, LeadingZeros);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// Keep the new sequence if it is an improvement.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      Res = TmpSeq;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// Some cases can benefit from filling the lower bits with zeros instead.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    ShiftedVal &amp;= maskTrailingZeros&lt;uint64_t&gt;(LeadingZeros);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(ShiftedVal, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::SRLI, LeadingZeros);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// Keep the new sequence if it is an improvement.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      Res = TmpSeq;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// If we have exactly 32 leading zeros and Zba, we can try using zext.w at</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// the end of the sequence.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (LeadingZeros == 32 &amp;&amp; ActiveFeatures[RISCV::FeatureStdExtZba]) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">// Try replacing upper bits with 1.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LeadingOnesVal = Val | maskLeadingOnes&lt;uint64_t&gt;(LeadingZeros);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(LeadingOnesVal, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::ADD_UW, 0);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="comment">// Keep the new sequence if it is an improvement.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        Res = TmpSeq;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// Perform optimization with BCLRI/BSETI in the Zbs extension.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (Res.size() &gt; 2 &amp;&amp; ActiveFeatures[RISCV::FeatureStdExtZbs]) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ActiveFeatures[RISCV::Feature64Bit] &amp;&amp;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;           <span class="stringliteral">&quot;Expected RV32 to only need 2 instructions&quot;</span>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// 1. For values in range 0xffffffff 7fffffff ~ 0xffffffff 00000000,</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">//    call generateInstSeqImpl with Val|0x80000000 (which is expected be</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">//    an int32), then emit (BCLRI r, 31).</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// 2. For values in range 0x80000000 ~ 0xffffffff, call generateInstSeqImpl</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">//    with Val&amp;~0x80000000 (which is expected to be an int32), then</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">//    emit (BSETI r, 31).</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    int64_t NewVal;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">unsigned</span> Opc;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (Val &lt; 0) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      Opc = RISCV::BCLRI;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      NewVal = Val | 0x80000000<a class="code" href="lib_2Analysis_2README_8txt.html#a99b988477f9c08d280bc9c90c3a68eb0">ll</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      Opc = RISCV::BSETI;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      NewVal = Val &amp; ~0x80000000<a class="code" href="lib_2Analysis_2README_8txt.html#a99b988477f9c08d280bc9c90c3a68eb0">ll</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;32&gt;(NewVal)) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> TmpSeq;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(NewVal, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Opc, 31);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        Res = TmpSeq;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Try to use BCLRI for upper 32 bits if the original lower 32 bits are</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// negative int32, or use BSETI for upper 32 bits if the original lower</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// 32 bits are positive int32.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    int32_t Lo = <a class="code" href="namespacellvm.html#a901112c493d3827cda924430a6fbc9f4">Lo_32</a>(Val);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> Hi = <a class="code" href="namespacellvm.html#a7b622c469acc130c9a500b85b1473ef3">Hi_32</a>(Val);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    Opc = 0;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> TmpSeq;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(Lo, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Check if it is profitable to use BCLRI/BSETI.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (Lo &gt; 0 &amp;&amp; TmpSeq.size() + <a class="code" href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a>(Hi) &lt; Res.size()) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      Opc = RISCV::BSETI;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Lo &lt; 0 &amp;&amp; TmpSeq.size() + <a class="code" href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a>(~Hi) &lt; Res.size()) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      Opc = RISCV::BCLRI;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      Hi = ~Hi;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Search for each bit and build corresponding BCLRI/BSETI.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (Opc &gt; 0) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">while</span> (Hi != 0) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a1ef22e535a2fc701cdafaffe74fc7490">Bit</a> = <a class="code" href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a>(Hi);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Opc, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a1ef22e535a2fc701cdafaffe74fc7490">Bit</a> + 32);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        Hi &amp;= (Hi - 1); <span class="comment">// Clear lowest set bit.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        Res = TmpSeq;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// Perform optimization with SH*ADD in the Zba extension.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (Res.size() &gt; 2 &amp;&amp; ActiveFeatures[RISCV::FeatureStdExtZba]) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ActiveFeatures[RISCV::Feature64Bit] &amp;&amp;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;           <span class="stringliteral">&quot;Expected RV32 to only need 2 instructions&quot;</span>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    int64_t Div = 0;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">unsigned</span> Opc = 0;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> TmpSeq;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Select the opcode and divisor.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> ((Val % 3) == 0 &amp;&amp; isInt&lt;32&gt;(Val / 3)) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      Div = 3;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      Opc = RISCV::SH1ADD;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((Val % 5) == 0 &amp;&amp; isInt&lt;32&gt;(Val / 5)) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      Div = 5;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      Opc = RISCV::SH2ADD;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((Val % 9) == 0 &amp;&amp; isInt&lt;32&gt;(Val / 9)) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      Div = 9;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      Opc = RISCV::SH3ADD;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// Build the new instruction sequence.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (Div &gt; 0) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(Val / Div, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Opc, 0);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        Res = TmpSeq;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="comment">// Try to use LUI+SH*ADD+ADDI.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      int64_t Hi52 = ((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)Val + 0x800ull) &amp; ~0xfffull;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      int64_t Lo12 = SignExtend64&lt;12&gt;(Val);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      Div = 0;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">if</span> (isInt&lt;32&gt;(Hi52 / 3) &amp;&amp; (Hi52 % 3) == 0) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        Div = 3;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        Opc = RISCV::SH1ADD;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isInt&lt;32&gt;(Hi52 / 5) &amp;&amp; (Hi52 % 5) == 0) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        Div = 5;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        Opc = RISCV::SH2ADD;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isInt&lt;32&gt;(Hi52 / 9) &amp;&amp; (Hi52 % 9) == 0) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        Div = 9;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        Opc = RISCV::SH3ADD;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="comment">// Build the new instruction sequence.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> (Div &gt; 0) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="comment">// For Val that has zero Lo12 (implies Val equals to Hi52) should has</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment">// already been processed to LUI+SH*ADD by previous optimization.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Lo12 != 0 &amp;&amp;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;               <span class="stringliteral">&quot;unexpected instruction sequence for immediate materialisation&quot;</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TmpSeq.empty() &amp;&amp; <span class="stringliteral">&quot;Expected empty TmpSeq&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a>(Hi52 / Div, ActiveFeatures, TmpSeq);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Opc, 0);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::ADDI, Lo12);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (TmpSeq.size() &lt; Res.size())</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          Res = TmpSeq;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// Perform optimization with rori in the Zbb and th.srri in the XTheadBb</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// extension.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (Res.size() &gt; 2 &amp;&amp; (ActiveFeatures[RISCV::FeatureStdExtZbb] ||</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                         ActiveFeatures[RISCV::FeatureVendorXTHeadBb])) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> Rotate = <a class="code" href="RISCVMatInt_8cpp.html#aed44c2aaf126eabc3ce547cbd83133f3">extractRotateInfo</a>(Val)) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">RISCVMatInt::InstSeq</a> TmpSeq;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NegImm12 = llvm::rotl&lt;uint64_t&gt;(Val, Rotate);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isInt&lt;12&gt;(NegImm12));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RISCV::ADDI, NegImm12);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      TmpSeq.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(ActiveFeatures[RISCV::FeatureStdExtZbb]</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                              ? RISCV::RORI</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                              : RISCV::TH_SRRI,</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                          Rotate);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      Res = TmpSeq;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="namespacellvm_1_1RISCVMatInt.html#a6120c607e7b598e6a08171ce5af56a95">  374</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a6120c607e7b598e6a08171ce5af56a95">getIntMatCost</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Val, <span class="keywordtype">unsigned</span> Size,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1FeatureBitset.html">FeatureBitset</a> &amp;ActiveFeatures, <span class="keywordtype">bool</span> CompressionCost) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordtype">bool</span> IsRV64 = ActiveFeatures[RISCV::Feature64Bit];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordtype">bool</span> HasRVC = CompressionCost &amp;&amp; (ActiveFeatures[RISCV::FeatureStdExtC] ||</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                    ActiveFeatures[RISCV::FeatureExtZca]);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordtype">int</span> PlatRegSize = IsRV64 ? 64 : 32;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Split the constant into platform register sized chunks, and calculate cost</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// of each chunk.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ShiftVal = 0; ShiftVal &lt; Size; ShiftVal += PlatRegSize) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Chunk = Val.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(ShiftVal).<a class="code" href="classllvm_1_1APInt.html#a9b5fc98b47d44d1150d3610bdfab1430">sextOrTrunc</a>(PlatRegSize);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">InstSeq</a> MatSeq = <a class="code" href="namespacellvm_1_1RISCVMatInt.html#ac381b141cc5f412d297c97afce5d3b6e">generateInstSeq</a>(Chunk.<a class="code" href="classllvm_1_1APInt.html#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>(), ActiveFeatures);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> += <a class="code" href="RISCVMatInt_8cpp.html#af68372c2e557ba09bc11be98bc3d65e3">getInstSeqCost</a>(MatSeq, HasRVC);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(1, <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classllvm_1_1RISCVMatInt_1_1Inst.html#afeed8aac6db2863972e7317604cd55de">  392</a></span>&#160;<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972">OpndKind</a> <a class="code" href="classllvm_1_1RISCVMatInt_1_1Inst.html#afeed8aac6db2863972e7317604cd55de">Inst::getOpndKind</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected opcode!&quot;</span>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">case</span> RISCV::LUI:</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">RISCVMatInt::Imm</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">case</span> RISCV::ADD_UW:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972ac5bc33378acb23e672b1eaf99faa99a0">RISCVMatInt::RegX0</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">case</span> RISCV::SH1ADD:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">case</span> RISCV::SH2ADD:</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">case</span> RISCV::SH3ADD:</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972ae68f4b6898bb293ac94508474ccd7265">RISCVMatInt::RegReg</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">case</span> RISCV::ADDI:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">case</span> RISCV::ADDIW:</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">case</span> RISCV::SLLI:</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">case</span> RISCV::SRLI:</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">case</span> RISCV::SLLI_UW:</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">case</span> RISCV::RORI:</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">case</span> RISCV::BSETI:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">case</span> RISCV::BCLRI:</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">case</span> RISCV::TH_SRRI:</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972affd2828f91e95f9731181bb5b8e4f9ac">RISCVMatInt::RegImm</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;} <span class="comment">// namespace llvm::RISCVMatInt</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a6120c607e7b598e6a08171ce5af56a95"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a6120c607e7b598e6a08171ce5af56a95">llvm::RISCVMatInt::getIntMatCost</a></div><div class="ttdeci">int getIntMatCost(const APInt &amp;Val, unsigned Size, const FeatureBitset &amp;ActiveFeatures, bool CompressionCost)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00374">RISCVMatInt.cpp:374</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af2daa0ee117afefed4c82eee55bf97b7"><div class="ttname"><a href="classllvm_1_1APInt.html#af2daa0ee117afefed4c82eee55bf97b7">llvm::APInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const</div><div class="ttdoc">Get sign extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01516">APInt.h:1516</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_ac381b141cc5f412d297c97afce5d3b6e"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#ac381b141cc5f412d297c97afce5d3b6e">llvm::RISCVMatInt::generateInstSeq</a></div><div class="ttdeci">InstSeq generateInstSeq(int64_t Val, const FeatureBitset &amp;ActiveFeatures)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00175">RISCVMatInt.cpp:175</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html">llvm::RISCVMatInt</a></div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00174">RISCVMatInt.cpp:174</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1FeatureBitset_html"><div class="ttname"><a href="classllvm_1_1FeatureBitset.html">llvm::FeatureBitset</a></div><div class="ttdoc">Container class for subtarget features.</div><div class="ttdef"><b>Definition:</b> <a href="SubtargetFeature_8h_source.html#l00041">SubtargetFeature.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_a901112c493d3827cda924430a6fbc9f4"><div class="ttname"><a href="namespacellvm.html#a901112c493d3827cda924430a6fbc9f4">llvm::Lo_32</a></div><div class="ttdeci">constexpr uint32_t Lo_32(uint64_t Value)</div><div class="ttdoc">Return the low 32 bits of a 64 bit value.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00169">MathExtras.h:169</a></div></div>
<div class="ttc" id="aRISCVMatInt_8h_html"><div class="ttname"><a href="RISCVMatInt_8h.html">RISCVMatInt.h</a></div></div>
<div class="ttc" id="aRISCVMatInt_8cpp_html_a6576c7a876f3850fb9adbd22588e2a12"><div class="ttname"><a href="RISCVMatInt_8cpp.html#a6576c7a876f3850fb9adbd22588e2a12">generateInstSeqImpl</a></div><div class="ttdeci">static void generateInstSeqImpl(int64_t Val, const FeatureBitset &amp;ActiveFeatures, RISCVMatInt::InstSeq &amp;Res)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00048">RISCVMatInt.cpp:48</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4f42ed6fd2569fa43f03814a17f9d94a"><div class="ttname"><a href="namespacellvm.html#a4f42ed6fd2569fa43f03814a17f9d94a">llvm::Log2_64</a></div><div class="ttdeci">unsigned Log2_64(uint64_t Value)</div><div class="ttdoc">Return the floor log base 2 of the specified value, -1 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00388">MathExtras.h:388</a></div></div>
<div class="ttc" id="aclassllvm_1_1RISCVMatInt_1_1Inst_html_afeed8aac6db2863972e7317604cd55de"><div class="ttname"><a href="classllvm_1_1RISCVMatInt_1_1Inst.html#afeed8aac6db2863972e7317604cd55de">llvm::RISCVMatInt::Inst::getOpndKind</a></div><div class="ttdeci">OpndKind getOpndKind() const</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00392">RISCVMatInt.cpp:392</a></div></div>
<div class="ttc" id="aInlineOrder_8cpp_html_a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6"><div class="ttname"><a href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">InlinePriorityMode::Cost</a></div><div class="ttdeci">@ Cost</div></div>
<div class="ttc" id="anamespacellvm_html_a0eea77e7bfa82e0219d2ec7b4efbc94f"><div class="ttname"><a href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a></div><div class="ttdeci">int popcount(T Value) noexcept</div><div class="ttdoc">Count the number of set bits in a value.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00349">bit.h:349</a></div></div>
<div class="ttc" id="aRISCVMatInt_8cpp_html_af68372c2e557ba09bc11be98bc3d65e3"><div class="ttname"><a href="RISCVMatInt_8cpp.html#af68372c2e557ba09bc11be98bc3d65e3">getInstSeqCost</a></div><div class="ttdeci">static int getInstSeqCost(RISCVMatInt::InstSeq &amp;Res, bool HasRVC)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00015">RISCVMatInt.cpp:15</a></div></div>
<div class="ttc" id="alib_2Analysis_2README_8txt_html_a99b988477f9c08d280bc9c90c3a68eb0"><div class="ttname"><a href="lib_2Analysis_2README_8txt.html#a99b988477f9c08d280bc9c90c3a68eb0">ll</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is&lt; loop &gt; Outside the this could be evaluated simply however ScalarEvolution currently evaluates it it involves i65 which is very inefficient when expanded into code In formatValue in test CodeGen X86 lsr delayed fold ll</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Analysis_2README_8txt_source.html#l00020">README.txt:20</a></div></div>
<div class="ttc" id="aRISCVMCTargetDesc_8h_html"><div class="ttname"><a href="RISCVMCTargetDesc_8h.html">RISCVMCTargetDesc.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b622c469acc130c9a500b85b1473ef3"><div class="ttname"><a href="namespacellvm.html#a7b622c469acc130c9a500b85b1473ef3">llvm::Hi_32</a></div><div class="ttdeci">constexpr uint32_t Hi_32(uint64_t Value)</div><div class="ttdoc">Return the high 32 bits of a 64 bit value.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00164">MathExtras.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ab6006923d1a3139d70abc8f6552a7960"><div class="ttname"><a href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">llvm::APInt::ashr</a></div><div class="ttdeci">APInt ashr(unsigned ShiftAmt) const</div><div class="ttdoc">Arithmetic right-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00815">APInt.h:815</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972ac5bc33378acb23e672b1eaf99faa99a0"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972ac5bc33378acb23e672b1eaf99faa99a0">llvm::RISCVMatInt::RegX0</a></div><div class="ttdeci">@ RegX0</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00025">RISCVMatInt.h:25</a></div></div>
<div class="ttc" id="aRISCVMatInt_8cpp_html_aed44c2aaf126eabc3ce547cbd83133f3"><div class="ttname"><a href="RISCVMatInt_8cpp.html#aed44c2aaf126eabc3ce547cbd83133f3">extractRotateInfo</a></div><div class="ttdeci">static unsigned extractRotateInfo(int64_t Val)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8cpp_source.html#l00156">RISCVMatInt.cpp:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aNVPTXISelLowering_8cpp_html_ae1a90b5d85643644483b2ca70da4d13fac837bff23a12c3735d463020f37979de"><div class="ttname"><a href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13fac837bff23a12c3735d463020f37979de">Unsigned</a></div><div class="ttdeci">@ Unsigned</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8cpp_source.html#l04885">NVPTXISelLowering.cpp:4885</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a9b5fc98b47d44d1150d3610bdfab1430"><div class="ttname"><a href="classllvm_1_1APInt.html#a9b5fc98b47d44d1150d3610bdfab1430">llvm::APInt::sextOrTrunc</a></div><div class="ttdeci">APInt sextOrTrunc(unsigned width) const</div><div class="ttdoc">Sign extend or truncate to width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01002">APInt.cpp:1002</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="anamespacellvm_html_a239abca11deebf2731206dd41cf43c0e"><div class="ttname"><a href="namespacellvm.html#a239abca11deebf2731206dd41cf43c0e">llvm::countr_one</a></div><div class="ttdeci">int countr_one(T Value)</div><div class="ttdoc">Count the number of ones from the least significant bit to the first zero bit.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00271">bit.h:271</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66191f0bcc8c62b784819e9e96ceeba2"><div class="ttname"><a href="namespacellvm.html#a66191f0bcc8c62b784819e9e96ceeba2">llvm::countl_zero</a></div><div class="ttdeci">int countl_zero(T Val)</div><div class="ttdoc">Count number of 0's from the most significant bit to the least stopping at the first 1.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00245">bit.h:245</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972ae68f4b6898bb293ac94508474ccd7265"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972ae68f4b6898bb293ac94508474ccd7265">llvm::RISCVMatInt::RegReg</a></div><div class="ttdeci">@ RegReg</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00024">RISCVMatInt.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">llvm::RISCVMatInt::Imm</a></div><div class="ttdeci">@ Imm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00023">RISCVMatInt.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57d2f9ee99e9e68cff564d0d579c8163"><div class="ttname"><a href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a></div><div class="ttdeci">int countr_zero(T Val)</div><div class="ttdoc">Count number of 0's from the least significant bit to the most stopping at the first 1.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00179">bit.h:179</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972">llvm::RISCVMatInt::OpndKind</a></div><div class="ttdeci">OpndKind</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00021">RISCVMatInt.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972affd2828f91e95f9731181bb5b8e4f9ac"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972affd2828f91e95f9731181bb5b8e4f9ac">llvm::RISCVMatInt::RegImm</a></div><div class="ttdeci">@ RegImm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00022">RISCVMatInt.h:22</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a1ef22e535a2fc701cdafaffe74fc7490"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a1ef22e535a2fc701cdafaffe74fc7490">llvm::tgtok::Bit</a></div><div class="ttdeci">@ Bit</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d92de57590536d2f254fe5e903e3372"><div class="ttname"><a href="namespacellvm.html#a8d92de57590536d2f254fe5e903e3372">llvm::countl_one</a></div><div class="ttdeci">int countl_one(T Value)</div><div class="ttdoc">Count the number of ones from the most significant bit to the first zero bit.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00258">bit.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_html_a434f6a0d80fb13e4326e848a6391f057"><div class="ttname"><a href="namespacellvm.html#a434f6a0d80fb13e4326e848a6391f057">llvm::isPowerOf2_64</a></div><div class="ttdeci">constexpr bool isPowerOf2_64(uint64_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0 (64 bit edition.)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00297">MathExtras.h:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:16:42 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

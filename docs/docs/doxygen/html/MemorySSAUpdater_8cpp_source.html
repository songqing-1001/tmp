<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/MemorySSAUpdater.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MemorySSAUpdater.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MemorySSAUpdater_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- MemorySSAUpdater.cpp - Memory SSA Updater--------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the MemorySSAUpdater class.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSAUpdater_8h.html">llvm/Analysis/MemorySSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IteratedDominanceFrontier_8h.html">llvm/Analysis/IteratedDominanceFrontier.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopIterator_8h.html">llvm/Analysis/LoopIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSA_8h.html">llvm/Analysis/MemorySSA.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="MemorySSAUpdater_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   24</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;memoryssa&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// This is the marker algorithm from &quot;Simple and Efficient Construction of</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// Static Single Assignment Form&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// The simple, non-marker algorithm places phi nodes at any join</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// Here, we place markers, and only place phi nodes if they end up necessary.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// They are only necessary if they break a cycle (IE we recursively visit</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// ourselves again), or we discover, while getting the value of the operands,</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// that there are two or more definitions needing to be merged.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// This still will leave non-minimal form in the case of irreducible control</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// flow, where phi nodes may be in cycles with themselves, but unnecessary.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::getPreviousDefRecursive(</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *, <a class="code" href="classllvm_1_1TrackingVH.html">TrackingVH&lt;MemoryAccess&gt;</a>&gt; &amp;CachedPreviousDef) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// First, do a cache lookup. Without this cache, certain CFG structures</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// (like a series of if statements) take exponential time to visit.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">auto</span> Cached = CachedPreviousDef.find(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">if</span> (Cached != CachedPreviousDef.end())</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span> Cached-&gt;second;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// If this method is called from an unreachable block, return LoE.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">if</span> (!MSSA-&gt;DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getUniquePredecessor()) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    VisitedBlocks.insert(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// Single predecessor case, just recurse, we can only have one definition.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result = getPreviousDefFromEnd(Pred, CachedPreviousDef);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    CachedPreviousDef.insert({<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result});</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">if</span> (VisitedBlocks.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// We hit our node again, meaning we had a cycle, we must insert a phi</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// node to break it so we have an operand. The only case this will</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// insert useless phis is if we have irreducible control flow.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result = MSSA-&gt;createMemoryPhi(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    CachedPreviousDef.insert({<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result});</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (VisitedBlocks.insert(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).second) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// Mark us visited so we can detect a cycle</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TrackingVH&lt;MemoryAccess&gt;</a>, 8&gt; PhiOps;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// Recurse to get the values in our predecessors for placement of a</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// potential phi node. This will insert phi nodes if we cycle in order to</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// break the cycle and have an operand.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">bool</span> UniqueIncomingAccess = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *SingleAccess = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">if</span> (MSSA-&gt;DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(Pred)) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">auto</span> *IncomingAccess = getPreviousDefFromEnd(Pred, CachedPreviousDef);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span> (!SingleAccess)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;          SingleAccess = IncomingAccess;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IncomingAccess != SingleAccess)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;          UniqueIncomingAccess = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        PhiOps.push_back(IncomingAccess);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        PhiOps.push_back(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>());</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// Now try to simplify the ops to avoid placing a phi.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// This may return null if we never created a phi yet, that&#39;s okay</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = dyn_cast_or_null&lt;MemoryPhi&gt;(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// See if we can avoid the phi by simplifying it.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">auto</span> *Result = tryRemoveTrivialPhi(Phi, PhiOps);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// If we couldn&#39;t simplify, we may have to create a phi</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (Result == Phi &amp;&amp; UniqueIncomingAccess &amp;&amp; SingleAccess) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="comment">// A concrete Phi only exists if we created an empty one to break a cycle.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">if</span> (Phi) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Phi-&gt;<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>().<a class="code" href="classllvm_1_1iterator__range.html#a06fff5bdd2bdf6d2c200e281787dc284">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Expected empty Phi&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(SingleAccess);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(Phi);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      Result = SingleAccess;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Result == Phi &amp;&amp; !(UniqueIncomingAccess &amp;&amp; SingleAccess)) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordflow">if</span> (!Phi)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        Phi = MSSA-&gt;createMemoryPhi(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">// See if the existing phi operands match what we need.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="comment">// Unlike normal SSA, we only allow one phi node per block, so we can&#39;t just</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">// create a new one.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">if</span> (Phi-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() != 0) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="comment">// FIXME: Figure out whether this is dead code and if so remove it.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5">std::equal</a>(Phi-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), Phi-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>(), PhiOps.begin())) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;          <span class="comment">// These will have been filled in by the recursive read we did above.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          <a class="code" href="namespacellvm.html#abb650e853db0ddbb60411b885c499737">llvm::copy</a>(PhiOps, Phi-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>());</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">std::copy</a>(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#af709830d69338472c10f3110975a065d">block_begin</a>());</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ab9945ed381faa9dbee65a92e6225768d">addIncoming</a>(&amp;*PhiOps[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++], Pred);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        InsertedPHIs.push_back(Phi);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      Result = Phi;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// Set ourselves up for the next variable by resetting visited state.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    VisitedBlocks.erase(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    CachedPreviousDef.insert({<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result});</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Should have hit one of the three cases above&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// This starts at the memory access, and goes backwards in the block to find the</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// previous definition. If a definition is not found the block of the access,</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">// it continues globally, creating phi nodes to ensure we have a single</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// definition.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::getPreviousDef(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LocalResult = getPreviousDefInBlock(MA))</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> LocalResult;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, TrackingVH&lt;MemoryAccess&gt;</a>&gt; CachedPreviousDef;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> getPreviousDefRecursive(MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), CachedPreviousDef);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// This starts at the memory access, and goes backwards in the block to the find</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// the previous definition. If the definition is not found in the block of the</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// access, it returns nullptr.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::getPreviousDefInBlock(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// It&#39;s possible there are no defs, or we got handed the first def to start.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (Defs) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// If this is a def, we can just use the def iterators.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(MA)) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keyword">auto</span> Iter = MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#a6d56464060a479164dcac19b3a0fd7e3">getReverseDefsIterator</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      ++Iter;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">if</span> (Iter != Defs-&gt;rend())</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> &amp;*Iter;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="comment">// Otherwise, have to walk the all access iterator.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keyword">auto</span> End = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>())-&gt;rend();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(++MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#a0335bbe7f97148c901d8cd85ef2b7858">getReverseIterator</a>(), End))</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(U))</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;          <span class="keywordflow">return</span> cast&lt;MemoryAccess&gt;(&amp;U);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="comment">// Note that if MA comes before Defs-&gt;begin(), we won&#39;t hit a def.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// This starts at the end of block</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::getPreviousDefFromEnd(</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *, <a class="code" href="classllvm_1_1TrackingVH.html">TrackingVH&lt;MemoryAccess&gt;</a>&gt; &amp;CachedPreviousDef) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">if</span> (Defs) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    CachedPreviousDef.<a class="code" href="classllvm_1_1simple__ilist.html#a7f4bd492b552181942252ccddc0db26e">insert</a>({<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;*Defs-&gt;rbegin()});</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> &amp;*Defs-&gt;rbegin();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">return</span> getPreviousDefRecursive(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CachedPreviousDef);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// Recurse over a set of phi uses to eliminate the trivial ones</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::recursePhi(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Phi) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span> (!Phi)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classllvm_1_1TrackingVH.html">TrackingVH&lt;MemoryAccess&gt;</a> Res(Phi);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TrackingVH&lt;Value&gt;</a>, 8&gt; <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">std::copy</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), Phi-&gt;<a class="code" href="classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(), std::back_inserter(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *UsePhi = dyn_cast&lt;MemoryPhi&gt;(&amp;*U))</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      tryRemoveTrivialPhi(UsePhi);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// Eliminate trivial phis</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// Phis are trivial if they are defined either by themselves, or all the same</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// argument.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">// IE phi(a, a) or b = phi(a, b) or c = phi(a, a, c)</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">// We recursively try to remove them.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::tryRemoveTrivialPhi(<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Phi &amp;&amp; <span class="stringliteral">&quot;Can only remove concrete Phi.&quot;</span>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keyword">auto</span> OperRange = Phi-&gt;<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">return</span> tryRemoveTrivialPhi(Phi, OperRange);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> RangeType&gt;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSAUpdater::tryRemoveTrivialPhi(<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                    RangeType &amp;<a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// Bail out on non-opt Phis.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span> (NonOptPhis.count(Phi))</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Detect equal or self arguments</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// If the same or self, good so far</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == Phi || <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// not the same, return the phi since it&#39;s not eliminatable by us</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a> = cast&lt;MemoryAccess&gt;(&amp;*<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// Never found a non-self reference, the phi is undef</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (Phi) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(Phi);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// We should only end up recursing in case we replaced something, in which</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// case, we may have made other Phis trivial.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> recursePhi(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">  238</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">MemorySSAUpdater::insertUse</a>(<a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> *MU, <span class="keywordtype">bool</span> RenameUses) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  VisitedBlocks.clear();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  InsertedPHIs.clear();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  MU-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a5c00de32cf1426ab78c346e7a251d608">setDefiningAccess</a>(getPreviousDef(MU));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// In cases without unreachable blocks, because uses do not create new</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// may-defs, there are only two cases:</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// 1. There was a def already below us, and therefore, we should not have</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// created a phi node because it was already needed for the def.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// 2. There is no def below us, and therefore, there is no extra renaming work</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// to do.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// In cases with unreachable blocks, where the unnecessary Phis were</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// optimized out, adding the Use may re-insert those Phis. Hence, when</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// inserting Uses outside of the MSSA creation process, and new Phis were</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// added, rename all uses if we are asked.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">if</span> (!RenameUses &amp;&amp; !InsertedPHIs.empty()) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(MU-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    (void)Defs;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!Defs || (++Defs-&gt;begin() == Defs-&gt;end())) &amp;&amp;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;           <span class="stringliteral">&quot;Block may have only a Phi or no defs&quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (RenameUses &amp;&amp; InsertedPHIs.size()) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StartBlock = MU-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(StartBlock)) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *FirstDef = &amp;*Defs-&gt;begin();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// Convert to incoming value if it&#39;s a memorydef. A phi *is* already an</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">// incoming value.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(FirstDef))</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        FirstDef = MD-&gt;getDefiningAccess();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1aa1ce1cb2192a65bf9e113882cd4ae9">renamePass</a>(MU-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), FirstDef, Visited);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// We just inserted a phi into this block, so the incoming value will</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// become the phi anyway, so it does not matter what we pass.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MP : InsertedPHIs)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = cast_or_null&lt;MemoryPhi&gt;(MP))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1aa1ce1cb2192a65bf9e113882cd4ae9">renamePass</a>(Phi-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), <span class="keyword">nullptr</span>, Visited);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">// Set every incoming edge {BB, MP-&gt;getBlock()} of MemoryPhi MP to NewDef.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="MemorySSAUpdater_8cpp.html#ae6cd1f0116b95e785f8c3994a487999e">  285</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MemorySSAUpdater_8cpp.html#ae6cd1f0116b95e785f8c3994a487999e">setMemoryPhiValueForBlock</a>(<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewDef) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// Replace any operand with us an incoming block with the new defining</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// access.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = MP-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#aea0bb94cc4c6ee8016dc150efd4753c1">getBasicBlockIndex</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != -1 &amp;&amp; <span class="stringliteral">&quot;Should have found the basic block in the phi&quot;</span>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// We can&#39;t just compare i against getNumOperands since one is signed and the</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// other not. So use it to index into the block iterator.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BlockBB : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(MP-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a3fe86b8ea61d65a5f819f61099cf9702">blocks</a>(), <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (BlockBB != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    MP-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a055daa2efd196d7b72c0f2d36019854e">setIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewDef);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// A brief description of the algorithm:</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// First, we compute what should define the new def, using the SSA</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// construction algorithm.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// Then, we update the defs below us (and any new phi nodes) in the graph to</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// point to the correct new defs, to ensure we only have one variable, and no</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// disconnected stores.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">  307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">MemorySSAUpdater::insertDef</a>(<a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *MD, <span class="keywordtype">bool</span> RenameUses) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// Don&#39;t bother updating dead code.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (!MSSA-&gt;DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(MD-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>())) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    MD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a5c00de32cf1426ab78c346e7a251d608">setDefiningAccess</a>(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>());</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  VisitedBlocks.clear();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  InsertedPHIs.clear();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// See if we had a local def, and if not, go hunting.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *DefBefore = getPreviousDef(MD);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordtype">bool</span> DefBeforeSameBlock = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (DefBefore-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>() == MD-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>() &amp;&amp;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      !(isa&lt;MemoryPhi&gt;(DefBefore) &amp;&amp;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(InsertedPHIs, DefBefore)))</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    DefBeforeSameBlock = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// There is a def before us, which means we can replace any store/phi uses</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// of that thing with us, since we are in the way of whatever was there</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="comment">// before.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// We now define that def&#39;s memorydefs and memoryphis</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (DefBeforeSameBlock) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    DefBefore-&gt;<a class="code" href="classllvm_1_1Value.html#a7e8dad1701aa6445be4a29f654b0473c">replaceUsesWithIf</a>(MD, [MD](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="comment">// Leave the MemoryUses alone.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="comment">// Also make sure we skip ourselves to avoid self references.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="classllvm_1_1User.html">User</a> *Usr = U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">return</span> !isa&lt;MemoryUse&gt;(Usr) &amp;&amp; Usr != MD;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="comment">// Defs are automatically unoptimized when the user is set to MD below,</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">// because the isOptimized() call will fail to find the same ID.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    });</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// and that def is now our defining access.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  MD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a5c00de32cf1426ab78c346e7a251d608">setDefiningAccess</a>(DefBefore);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 8&gt;</a> FixupList(InsertedPHIs.begin(), InsertedPHIs.end());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;WeakVH, 8&gt;</a> ExistingPhis;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Remember the index where we may insert new phis.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordtype">unsigned</span> NewPhiIndex = InsertedPHIs.size();</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (!DefBeforeSameBlock) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// If there was a local def before us, we must have the same effect it</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// did. Because every may-def is the same, any phis/etc we would create, it</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// would also have created.  If there was no local def before us, we</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// performed a global update, and have to search all successors and make</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// sure we update the first def in each of them (following all paths until</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// we hit the first def along each path). This may also insert phi nodes.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// TODO: There are other cases we can skip this work, such as when we have a</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// single successor, and only used a straight line of single pred blocks</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// backwards to find the def.  To make that work, we&#39;d have to track whether</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// getDefRecursive only ever used the single predecessor case.  These types</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// of paths also only exist in between CFG simplifications.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// If this is the first def in the block and this insert is in an arbitrary</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// place, compute IDF and place phis.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 2&gt;</a> DefiningBlocks;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// If this is the last Def in the block, we may need additional Phis.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// Compute IDF in all cases, as renaming needs to be done even when MD is</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// not the last access, because it can introduce a new access past which a</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// previous access was optimized; that access needs to be reoptimized.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    DefiningBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(MD-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;VH : InsertedPHIs)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *RealPHI = cast_or_null&lt;MemoryPhi&gt;(VH))</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        DefiningBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(RealPHI-&gt;getBlock());</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classllvm_1_1IDFCalculator.html">ForwardIDFCalculator</a> IDFs(*MSSA-&gt;DT);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> IDFBlocks;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    IDFs.<a class="code" href="classllvm_1_1IDFCalculatorBase.html#a9180c82ceffac7e5586cc2d6f368f996">setDefiningBlocks</a>(DefiningBlocks);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    IDFs.<a class="code" href="classllvm_1_1IDFCalculatorBase.html#a714e5448566006046f747d9ec4df8241">calculate</a>(IDFBlocks);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AssertingVH&lt;MemoryPhi&gt;</a>, 4&gt; NewInsertedPHIs;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *BBIDF : IDFBlocks) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keyword">auto</span> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(BBIDF);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span> (!MPhi) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        MPhi = MSSA-&gt;createMemoryPhi(BBIDF);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        NewInsertedPHIs.push_back(MPhi);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        ExistingPhis.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(MPhi);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="comment">// Add the phis created into the IDF blocks to NonOptPhis, so they are not</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="comment">// optimized out as trivial by the call to getPreviousDefFromEnd below.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="comment">// Once they are complete, all these Phis are added to the FixupList, and</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="comment">// removed from NonOptPhis inside fixupDefs(). Existing Phis in IDF may</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="comment">// need fixing as well, and potentially be trivial before this insertion,</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="comment">// hence add all IDF Phis. See PR43044.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      NonOptPhis.insert(MPhi);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MPhi : NewInsertedPHIs) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keyword">auto</span> *BBIDF = MPhi-&gt;getBlock();</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(BBIDF)) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, TrackingVH&lt;MemoryAccess&gt;</a>&gt; CachedPreviousDef;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        MPhi-&gt;addIncoming(getPreviousDefFromEnd(Pred, CachedPreviousDef), Pred);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// Re-take the index where we&#39;re adding the new phis, because the above call</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// to getPreviousDefFromEnd, may have inserted into InsertedPHIs.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    NewPhiIndex = InsertedPHIs.<a class="code" href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">size</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MPhi : NewInsertedPHIs) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      InsertedPHIs.push_back(&amp;*MPhi);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      FixupList.push_back(&amp;*MPhi);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    FixupList.push_back(MD);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// Remember the index where we stopped inserting new phis above, since the</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// fixupDefs call in the loop below may insert more, that are already minimal.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordtype">unsigned</span> NewPhiIndexEnd = InsertedPHIs.size();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">while</span> (!FixupList.empty()) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">unsigned</span> StartingPHISize = InsertedPHIs.size();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    fixupDefs(FixupList);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    FixupList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// Put any new phis on the fixup list, and process them</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    FixupList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(InsertedPHIs.begin() + StartingPHISize, InsertedPHIs.end());</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// Optimize potentially non-minimal phis added in this method.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordtype">unsigned</span> NewPhiSize = NewPhiIndexEnd - NewPhiIndex;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">if</span> (NewPhiSize)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    tryRemoveTrivialPhis(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;WeakVH&gt;</a>(&amp;InsertedPHIs[NewPhiIndex], NewPhiSize));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// Now that all fixups are done, rename all uses if we are asked. The defs are</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// guaranteed to be in reachable code due to the check at the method entry.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StartBlock = MD-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (RenameUses) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// We are guaranteed there is a def in the block, because we just got it</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// handed to us in this function.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *FirstDef = &amp;*MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(StartBlock)-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#abc96513a79d236fe7f052a1ec7d0eb05">begin</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// Convert to incoming value if it&#39;s a memorydef. A phi *is* already an</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// incoming value.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(FirstDef))</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      FirstDef = MD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">getDefiningAccess</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1aa1ce1cb2192a65bf9e113882cd4ae9">renamePass</a>(MD-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), FirstDef, Visited);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// We just inserted a phi into this block, so the incoming value will become</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// the phi anyway, so it does not matter what we pass.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MP : InsertedPHIs) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = dyn_cast_or_null&lt;MemoryPhi&gt;(MP);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (Phi)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1aa1ce1cb2192a65bf9e113882cd4ae9">renamePass</a>(Phi-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), <span class="keyword">nullptr</span>, Visited);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// Existing Phi blocks may need renaming too, if an access was previously</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// optimized and the inserted Defs &quot;covers&quot; the Optimized value.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MP : ExistingPhis) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = dyn_cast_or_null&lt;MemoryPhi&gt;(MP);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (Phi)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1aa1ce1cb2192a65bf9e113882cd4ae9">renamePass</a>(Phi-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), <span class="keyword">nullptr</span>, Visited);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="keywordtype">void</span> MemorySSAUpdater::fixupDefs(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakVH&gt;</a> &amp;Vars) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const BasicBlock *, 8&gt;</a> Seen;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const BasicBlock *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Var : Vars) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewDef = dyn_cast_or_null&lt;MemoryAccess&gt;(Var);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (!NewDef)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// First, see if there is a local def after the operand.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(NewDef-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">auto</span> DefIter = NewDef-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#a6141f01c038a2c06c7b2e8f434aa81b6">getDefsIterator</a>();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// The temporary Phi is being fixed, unmark it for not to optimize.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = dyn_cast&lt;MemoryPhi&gt;(NewDef))</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      NonOptPhis.erase(Phi);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// If there is a local def after us, we only have to rename that.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (++DefIter != Defs-&gt;end()) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      cast&lt;MemoryDef&gt;(DefIter)-&gt;setDefiningAccess(NewDef);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// Otherwise, we need to search down through the CFG.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// For each of our successors, handle it directly if their is a phi, or</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// place on the fixup worklist.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(NewDef-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>())) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MP = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>))</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="MemorySSAUpdater_8cpp.html#ae6cd1f0116b95e785f8c3994a487999e">setMemoryPhiValueForBlock</a>(MP, NewDef-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), NewDef);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        Worklist.push_back(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FixupBlock = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="comment">// Get the first def in the block that isn&#39;t a phi node.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(FixupBlock)) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keyword">auto</span> *FirstDef = &amp;*Defs-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// The loop above and below should have taken care of phi nodes</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;MemoryPhi&gt;(FirstDef) &amp;&amp;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;               <span class="stringliteral">&quot;Should have already handled phi nodes!&quot;</span>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="comment">// We are now this def&#39;s defining access, make sure we actually dominate</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="comment">// it</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(NewDef, FirstDef) &amp;&amp;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;               <span class="stringliteral">&quot;Should have dominated the new access&quot;</span>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="comment">// This may insert new phi nodes, because we are not guaranteed the</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="comment">// block we are processing has a single pred, and depending where the</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">// store was inserted, it may require phi nodes below it.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        cast&lt;MemoryDef&gt;(FirstDef)-&gt;setDefiningAccess(getPreviousDef(FirstDef));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="comment">// We didn&#39;t find a def, so we must continue.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(FixupBlock)) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// If there is a phi node, handle it.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// Otherwise, put the block on the worklist</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MP = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>))</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <a class="code" href="MemorySSAUpdater_8cpp.html#ae6cd1f0116b95e785f8c3994a487999e">setMemoryPhiValueForBlock</a>(MP, FixupBlock, NewDef);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          <span class="comment">// If we cycle, we should have ended up at a phi node that we already</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          <span class="comment">// processed.  FIXME: Double check this</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          <span class="keywordflow">if</span> (!Seen.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>).second)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          Worklist.push_back(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a4953231268ee21e95c3740e51ab37a96">  531</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4953231268ee21e95c3740e51ab37a96">MemorySSAUpdater::removeEdge</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(To)) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    MPhi-&gt;unorderedDeleteIncomingBlock(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    tryRemoveTrivialPhi(MPhi);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a95eeaea882b3c388420da771fe488bbc">  538</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a95eeaea882b3c388420da771fe488bbc">MemorySSAUpdater::removeDuplicatePhiEdgesBetween</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(To)) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">bool</span> Found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    MPhi-&gt;unorderedDeleteIncomingIf([&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a> != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">if</span> (Found)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      Found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    });</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    tryRemoveTrivialPhi(MPhi);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">/// If all arguments of a MemoryPHI are defined by the same incoming</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">/// argument, return that argument.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="MemorySSAUpdater_8cpp.html#abc5c7da74ecbb98960032ac9fe96dfd6">  556</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="MemorySSAUpdater_8cpp.html#abc5c7da74ecbb98960032ac9fe96dfd6">onlySingleValue</a>(<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : MP-&gt;<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>()) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (!MA)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      MA = cast&lt;MemoryAccess&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MA != <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">return</span> MA;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="MemorySSAUpdater_8cpp.html#ad30a761cf1fefa8bc9cc9037d0f2ae9d">  568</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="MemorySSAUpdater_8cpp.html#ad30a761cf1fefa8bc9cc9037d0f2ae9d">getNewDefiningAccessForClone</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                                  <a class="code" href="classllvm_1_1SmallDenseMap.html">PhiToDefMap</a> &amp;MPhiMap,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                                  <span class="keywordtype">bool</span> CloneWasSimplified,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                                  <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *InsnDefining = MA;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *DefMUD = dyn_cast&lt;MemoryDef&gt;(InsnDefining)) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(DefMUD)) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DefMUDI = DefMUD-&gt;getMemoryInst();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DefMUDI &amp;&amp; <span class="stringliteral">&quot;Found MemoryUseOrDef with no Instruction.&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewDefMUDI =</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;              cast_or_null&lt;Instruction&gt;(VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(DefMUDI))) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        InsnDefining = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(NewDefMUDI);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">if</span> (!CloneWasSimplified)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsnDefining &amp;&amp; <span class="stringliteral">&quot;Defining instruction cannot be nullptr.&quot;</span>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!InsnDefining || isa&lt;MemoryUse&gt;(InsnDefining)) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          <span class="comment">// The clone was simplified, it&#39;s no longer a MemoryDef, look up.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;          <span class="keyword">auto</span> DefIt = DefMUD-&gt;getDefsIterator();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;          <span class="comment">// Since simplified clones only occur in single block cloning, a</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          <span class="comment">// previous definition must exist, otherwise NewDefMUDI would not</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          <span class="comment">// have been found in VMap.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DefIt != MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(DefMUD-&gt;getBlock())-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#abc96513a79d236fe7f052a1ec7d0eb05">begin</a>() &amp;&amp;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                 <span class="stringliteral">&quot;Previous def must exist&quot;</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          InsnDefining = <a class="code" href="MemorySSAUpdater_8cpp.html#ad30a761cf1fefa8bc9cc9037d0f2ae9d">getNewDefiningAccessForClone</a>(</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;              &amp;*(--DefIt), VMap, MPhiMap, CloneWasSimplified, MSSA);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *DefPhi = cast&lt;MemoryPhi&gt;(InsnDefining);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewDefPhi = MPhiMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(DefPhi))</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      InsnDefining = NewDefPhi;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsnDefining &amp;&amp; <span class="stringliteral">&quot;Defining instruction cannot be nullptr.&quot;</span>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">return</span> InsnDefining;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">void</span> MemorySSAUpdater::cloneUsesAndDefs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                        <a class="code" href="classllvm_1_1SmallDenseMap.html">PhiToDefMap</a> &amp;MPhiMap,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                        <span class="keywordtype">bool</span> CloneWasSimplified) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1iplist.html">MemorySSA::AccessList</a> *Acc = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordflow">if</span> (!Acc)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA : *Acc) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(&amp;MA)) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a96d5dc120196819fbfbc257cba09b2aa">Insn</a> = MUD-&gt;getMemoryInst();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="comment">// Entry does not exist if the clone of the block did not clone all</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="comment">// instructions. This occurs in LoopRotate when cloning instructions</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">// from the old header to the old preheader. The cloned instruction may</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">// also be a simplified Value, not an Instruction (see LoopRotate).</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="comment">// Also in LoopRotate, even when it&#39;s an instruction, due to it being</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// simplified, it may be a Use rather than a Def, so we cannot use MUD as</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">// template. Calls coming from updateForClonedBlockIntoPred, ensure this.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInsn =</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;              dyn_cast_or_null&lt;Instruction&gt;(VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(<a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a96d5dc120196819fbfbc257cba09b2aa">Insn</a>))) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewUseOrDef = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">createDefinedAccess</a>(</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            NewInsn,</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="MemorySSAUpdater_8cpp.html#ad30a761cf1fefa8bc9cc9037d0f2ae9d">getNewDefiningAccessForClone</a>(MUD-&gt;getDefiningAccess(), VMap,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                                         MPhiMap, CloneWasSimplified, MSSA),</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="comment">/*Template=*/</span>CloneWasSimplified ? <span class="keyword">nullptr</span> : MUD,</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="comment">/*CreationMustSucceed=*/</span>CloneWasSimplified ? <span class="keyword">false</span> : <span class="keyword">true</span>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">if</span> (NewUseOrDef)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;          MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">insertIntoListsForBlock</a>(NewUseOrDef, NewBB, <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5a542e7b754a1b868794fa2f47256a1d97">MemorySSA::End</a>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a989bdd9e36b5327a04ad8db2a7014741">  637</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a989bdd9e36b5327a04ad8db2a7014741">MemorySSAUpdater::updatePhisWhenInsertingUniqueBackedgeBlock</a>(</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BEBlock) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keyword">auto</span> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(Header);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (!MPhi)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// Create phi node in the backedge block and populate it with the same</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// incoming values as MPhi. Skip incoming values coming from Preheader.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keyword">auto</span> *NewMPhi = MSSA-&gt;createMemoryPhi(BEBlock);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordtype">bool</span> HasUniqueIncomingValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *UniqueValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = MPhi-&gt;getNumIncomingValues(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IBB = MPhi-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = MPhi-&gt;getIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (IBB != Preheader) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      NewMPhi-&gt;addIncoming(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, IBB);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">if</span> (HasUniqueIncomingValue) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">if</span> (!UniqueValue)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          UniqueValue = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UniqueValue != <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;          HasUniqueIncomingValue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// Update incoming edges into MPhi. Remove all but the incoming edge from</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// Preheader. Add an edge from NewMPhi</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keyword">auto</span> *AccFromPreheader = MPhi-&gt;getIncomingValueForBlock(Preheader);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  MPhi-&gt;setIncomingValue(0, AccFromPreheader);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  MPhi-&gt;setIncomingBlock(0, Preheader);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MPhi-&gt;getNumIncomingValues() - 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= 1; --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    MPhi-&gt;unorderedDeleteIncoming(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  MPhi-&gt;addIncoming(NewMPhi, BEBlock);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// If NewMPhi is a trivial phi, remove it. Its use in the header MPhi will be</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// replaced with the unique value.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  tryRemoveTrivialPhi(NewMPhi);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a667d41d0d3b12af17ccc6c99e3d51e5b">  676</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a667d41d0d3b12af17ccc6c99e3d51e5b">MemorySSAUpdater::updateForClonedLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopBlocksRPO.html">LoopBlocksRPO</a> &amp;LoopBlocks,</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> ExitBlocks,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                           <span class="keywordtype">bool</span> IgnoreIncomingWithNoClones) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">PhiToDefMap</a> MPhiMap;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keyword">auto</span> FixPhiIncomingValues = [&amp;](<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi, <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *NewPhi) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Phi &amp;&amp; NewPhi &amp;&amp; <span class="stringliteral">&quot;Invalid Phi nodes.&quot;</span>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPhiBB = NewPhi-&gt;getBlock();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 4&gt;</a> NewPhiBBPreds(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(NewPhiBB),</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                               <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(NewPhiBB));</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> It = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a1c403c86f16af563cec6961666e8cc2e">getNumIncomingValues</a>(); It &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++It) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *IncomingAccess = Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ad9d171a8662f441f5c7c50061e628565">getIncomingValue</a>(It);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IncBB = Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a6ecf3b528e1fab88068bd3baefb8b0ed">getIncomingBlock</a>(It);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewIncBB = cast_or_null&lt;BasicBlock&gt;(VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(IncBB)))</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        IncBB = NewIncBB;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IgnoreIncomingWithNoClones)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="comment">// Now we have IncBB, and will need to add incoming from it to NewPhi.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="comment">// If IncBB is not a predecessor of NewPhiBB, then do not add it.</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="comment">// NewPhiBB was cloned without that edge.</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="keywordflow">if</span> (!NewPhiBBPreds.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(IncBB))</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="comment">// Determine incoming value and add it as incoming from IncBB.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *IncMUD = dyn_cast&lt;MemoryUseOrDef&gt;(IncomingAccess)) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(IncMUD)) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncI = IncMUD-&gt;getMemoryInst();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IncI &amp;&amp; <span class="stringliteral">&quot;Found MemoryUseOrDef with no Instruction.&quot;</span>);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewIncI =</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                  cast_or_null&lt;Instruction&gt;(VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(IncI))) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            IncMUD = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(NewIncI);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IncMUD &amp;&amp;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                   <span class="stringliteral">&quot;MemoryUseOrDef cannot be null, all preds processed.&quot;</span>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;          }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        NewPhi-&gt;addIncoming(IncMUD, IncBB);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *IncPhi = cast&lt;MemoryPhi&gt;(IncomingAccess);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewDefPhi = MPhiMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(IncPhi))</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          NewPhi-&gt;addIncoming(NewDefPhi, IncBB);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          NewPhi-&gt;addIncoming(IncPhi, IncBB);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SingleAccess = <a class="code" href="MemorySSAUpdater_8cpp.html#abc5c7da74ecbb98960032ac9fe96dfd6">onlySingleValue</a>(NewPhi)) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      MPhiMap[Phi] = SingleAccess;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(NewPhi);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  };</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keyword">auto</span> <a class="code" href="Sink_8cpp.html#a7a59feca56f2ecfe5c74d6c04b0c45c7">ProcessBlock</a> = [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBlock = cast_or_null&lt;BasicBlock&gt;(VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (!NewBlock)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(NewBlock) &amp;&amp;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;           <span class="stringliteral">&quot;Cloned block should have no accesses&quot;</span>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// Add MemoryPhi.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *NewPhi = MSSA-&gt;createMemoryPhi(NewBlock);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      MPhiMap[MPhi] = NewPhi;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// Update Uses and Defs.</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    cloneUsesAndDefs(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewBlock, VMap, MPhiMap);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  };</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : llvm::concat&lt;BasicBlock *const&gt;(LoopBlocks, ExitBlocks))</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="Sink_8cpp.html#a7a59feca56f2ecfe5c74d6c04b0c45c7">ProcessBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : llvm::concat&lt;BasicBlock *const&gt;(LoopBlocks, ExitBlocks))</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewPhi = MPhiMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(MPhi))</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        FixPhiIncomingValues(MPhi, cast&lt;MemoryPhi&gt;(NewPhi));</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#ad7b4596999393cfa1b3c077caa0f2ca0">  756</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ad7b4596999393cfa1b3c077caa0f2ca0">MemorySSAUpdater::updateForClonedBlockIntoPred</a>(</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *P1, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VM) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// All defs/phis from outside BB that are used in BB, are valid uses in P1.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// Since those defs/phis must have dominated BB, and also dominate P1.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// Defs from BB being used in BB will be replaced with the cloned defs from</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">// VM. The uses of BB&#39;s Phi (if it exists) in BB will be replaced by the</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">// incoming def into the Phi from P1.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// Instructions cloned into the predecessor are in practice sometimes</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// simplified, so disable the use of the template, and create an access from</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// scratch.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">PhiToDefMap</a> MPhiMap;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    MPhiMap[MPhi] = MPhi-&gt;getIncomingValueForBlock(P1);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  cloneUsesAndDefs(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, P1, VM, MPhiMap, <span class="comment">/*CloneWasSimplified=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iter&gt;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="keywordtype">void</span> MemorySSAUpdater::privateUpdateExitBlocksForClonedLoop(</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> ExitBlocks, Iter ValuesBegin, Iter ValuesEnd,</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CFGUpdate, 4&gt;</a> Updates;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// Update/insert phis in all successors of exit blocks.</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Exit : ExitBlocks)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> *VMap : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(ValuesBegin, ValuesEnd))</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit = cast_or_null&lt;BasicBlock&gt;(VMap-&gt;<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(Exit))) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitSucc = NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(0);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        Updates.push_back({DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, NewExit, ExitSucc});</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">applyInsertUpdates</a>(Updates, DT);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#aeb3964d6e7884c21d8118699062c91df">  787</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#aeb3964d6e7884c21d8118699062c91df">MemorySSAUpdater::updateExitBlocksForClonedLoop</a>(</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> ExitBlocks, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> *<span class="keyword">const</span> Arr[] = {&amp;VMap};</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  privateUpdateExitBlocksForClonedLoop(ExitBlocks, <a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">std::begin</a>(Arr),</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                       <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">std::end</a>(Arr), DT);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a9254dd9770bb74a5b892b2bb04b1b200">  795</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#aeb3964d6e7884c21d8118699062c91df">MemorySSAUpdater::updateExitBlocksForClonedLoop</a>(</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> ExitBlocks,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt;std::unique_ptr&lt;ValueToValueMapTy&gt;&gt; VMaps, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keyword">auto</span> GetPtr = [&amp;](<span class="keyword">const</span> std::unique_ptr&lt;ValueToValueMapTy&gt; &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.get();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  };</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keyword">using</span> MappedIteratorType =</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="classllvm_1_1mapped__iterator.html">mapped_iterator&lt;const std::unique_ptr&lt;ValueToValueMapTy&gt;</a> *,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                      decltype(GetPtr)&gt;;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keyword">auto</span> MapBegin = MappedIteratorType(VMaps.begin(), GetPtr);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keyword">auto</span> MapEnd = MappedIteratorType(VMaps.end(), GetPtr);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  privateUpdateExitBlocksForClonedLoop(ExitBlocks, MapBegin, MapEnd, DT);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#ad89ca302de455d3971f751c8d1a5bd58">  809</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ad89ca302de455d3971f751c8d1a5bd58">MemorySSAUpdater::applyUpdates</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CFGUpdate&gt;</a> Updates,</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                                    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <span class="keywordtype">bool</span> UpdateDT) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CFGUpdate, 4&gt;</a> DeleteUpdates;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CFGUpdate, 4&gt;</a> RevDeleteUpdates;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CFGUpdate, 4&gt;</a> InsertUpdates;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Update : Updates) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span> (Update.getKind() == DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      InsertUpdates.push_back({DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, Update.getFrom(), Update.getTo()});</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      DeleteUpdates.push_back({DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">Delete</a>, Update.getFrom(), Update.getTo()});</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      RevDeleteUpdates.push_back({DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, Update.getFrom(), Update.getTo()});</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">if</span> (!DeleteUpdates.empty()) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (!InsertUpdates.empty()) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">if</span> (!UpdateDT) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CFGUpdate, 0&gt;</a> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f">Empty</a>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="comment">// Deletes are reversed applied, because this CFGView is pretending the</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">// deletes did not happen yet, hence the edges still exist.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f">Empty</a>, RevDeleteUpdates);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="comment">// Apply all updates, with the RevDeleteUpdates as PostCFGView.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(Updates, RevDeleteUpdates);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="comment">// Note: the MSSA update below doesn&#39;t distinguish between a GD with</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">// (RevDelete,false) and (Delete, true), but this matters for the DT</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">// updates above; for &quot;children&quot; purposes they are equivalent; but the</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="comment">// updates themselves convey the desired update, used inside DT only.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <a class="code" href="classllvm_1_1GraphDiff.html">GraphDiff&lt;BasicBlock *&gt;</a> GD(RevDeleteUpdates);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">applyInsertUpdates</a>(InsertUpdates, DT, &amp;GD);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// Update DT to redelete edges; this matches the real CFG so we can</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="comment">// perform the standard update without a postview of the CFG.</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(DeleteUpdates);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">if</span> (UpdateDT)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(DeleteUpdates);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> (UpdateDT)</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(Updates);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="classllvm_1_1GraphDiff.html">GraphDiff&lt;BasicBlock *&gt;</a> GD;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">applyInsertUpdates</a>(InsertUpdates, DT, &amp;GD);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// Update for deleted edges</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Update : DeleteUpdates)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4953231268ee21e95c3740e51ab37a96">removeEdge</a>(Update.getFrom(), Update.getTo());</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">  860</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">MemorySSAUpdater::applyInsertUpdates</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CFGUpdate&gt;</a> Updates,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                                          <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <a class="code" href="classllvm_1_1GraphDiff.html">GraphDiff&lt;BasicBlock *&gt;</a> GD;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">applyInsertUpdates</a>(Updates, DT, &amp;GD);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">MemorySSAUpdater::applyInsertUpdates</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CFGUpdate&gt;</a> Updates,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                                          <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1GraphDiff.html">GraphDiff&lt;BasicBlock *&gt;</a> *GD) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// Get recursive last Def, assuming well formed MSSA and updated DT.</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keyword">auto</span> GetLastDef = [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) -&gt; <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> * {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <a class="code" href="classllvm_1_1simple__ilist.html">MemorySSA::DefsList</a> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <span class="comment">// Return last Def or Phi in BB, if it exists.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">if</span> (Defs)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">return</span> &amp;*(--Defs-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#a9ed194b42c5b8ba68764c26760c9ddfe">end</a>());</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="comment">// Check number of predecessors, we only care if there&#39;s more than one.</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordtype">unsigned</span> Count = 0;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pi : GD-&gt;template getChildren&lt;/*InverseEdge=*/true&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        Pred = Pi;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        Count++;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> (Count == 2)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <span class="comment">// If BB has multiple predecessors, get last definition from IDom.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">if</span> (Count != 1) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="comment">// [SimpleLoopUnswitch] If BB is a dead block, about to be deleted, its</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="comment">// DT is invalidated. Return LoE as its last def. This will be added to</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="comment">// MemoryPhi node, and later deleted when the block is deleted.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;          <span class="keywordflow">return</span> MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *IDom = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>())</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;          <span class="keywordflow">if</span> (IDom-&gt;getBlock() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = IDom-&gt;getBlock();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;          }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">return</span> MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">// Single predecessor, BB cannot be dead. GetLastDef of Pred.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Count == 1 &amp;&amp; Pred &amp;&amp; <span class="stringliteral">&quot;Single predecessor expected.&quot;</span>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// BB can be unreachable though, return LoE if that is the case.</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;          <span class="keywordflow">return</span> MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Pred;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    };</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unable to get last definition.&quot;</span>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  };</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// Get nearest IDom given a set of blocks.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// TODO: this can be optimized by starting the search at the node with the</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// lowest level (highest in the tree).</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keyword">auto</span> FindNearestCommonDominator =</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 2&gt;</a> &amp;BBSet) -&gt; <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> * {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PrevIDom = *BBSet.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : BBSet)</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      PrevIDom = DT.<a class="code" href="classllvm_1_1DominatorTree.html#a2ec50ab2c78eff965caf3da71cd08be4">findNearestCommonDominator</a>(PrevIDom, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> PrevIDom;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  };</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// Get all blocks that dominate PrevIDom, stop when reaching CurrIDom. Do not</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">// include CurrIDom.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keyword">auto</span> GetNoLongerDomBlocks =</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PrevIDom, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrIDom,</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BlocksPrevDom) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">if</span> (PrevIDom == CurrIDom)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        BlocksPrevDom.push_back(PrevIDom);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextIDom = PrevIDom;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UpIDom =</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                   DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(NextIDom)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>()) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;          <span class="keywordflow">if</span> (UpIDom == CurrIDom)</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;          BlocksPrevDom.push_back(UpIDom);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;          NextIDom = UpIDom;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      };</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="comment">// Map a BB to its predecessors: added + previously existing. To get a</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">// deterministic order, store predecessors as SetVectors. The order in each</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="comment">// will be defined by the order in Updates (fixed) and the order given by</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// children&lt;&gt; (also fixed). Since we further iterate over these ordered sets,</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// we lose the information of multiple edges possibly existing between two</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// blocks, so we&#39;ll keep and EdgeCount map for that.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// An alternate implementation could keep unordered set for the predecessors,</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// traverse either Updates or children&lt;&gt; each time to get  the deterministic</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// order, and drop the usage of EdgeCount. This alternate approach would still</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// require querying the maps for each predecessor, and children&lt;&gt; call has</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// additional computation inside for creating the snapshot-graph predecessors.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// As such, we favor using a little additional storage and less compute time.</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// This decision can be revisited if we find the alternative more favorable.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keyword">struct </span>PredInfo {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 2&gt;</a> <a class="code" href="namespacellvm_1_1logicalview.html#a2f63e339cd88f5a8e97a8150ea9129d2af29ddbfb905eb2593fdcdfb243f9af85">Added</a>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 2&gt;</a> Prev;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  };</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;BasicBlock *, PredInfo&gt;</a> PredMap;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Edge : Updates) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Edge.getTo();</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keyword">auto</span> &amp;AddedBlockSet = PredMap[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>].Added;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    AddedBlockSet.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(Edge.getFrom());</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">// Store all existing predecessor for each BB, at least one must exist.</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;std::pair&lt;BasicBlock *, BasicBlock *&gt;</a>, <span class="keywordtype">int</span>&gt; EdgeCountMap;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 2&gt;</a> NewBlocks;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;BBPredPair : PredMap) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BBPredPair.first;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;AddedBlockSet = BBPredPair.second.Added;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keyword">auto</span> &amp;PrevBlockSet = BBPredPair.second.Prev;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pi : GD-&gt;template getChildren&lt;/*InverseEdge=*/true&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">if</span> (!AddedBlockSet.count(Pi))</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        PrevBlockSet.insert(Pi);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      EdgeCountMap[{Pi, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>}]++;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (PrevBlockSet.empty()) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">pred_size</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) == AddedBlockSet.size() &amp;&amp; <span class="stringliteral">&quot;Duplicate edges added.&quot;</span>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;Adding a predecessor to a block with no predecessors. &quot;</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;             <span class="stringliteral">&quot;This must be an edge added to a new, likely cloned, block. &quot;</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;             <span class="stringliteral">&quot;Its memory accesses must be already correct, assuming completed &quot;</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;             <span class="stringliteral">&quot;via the updateExitBlocksForClonedLoop API. &quot;</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;             <span class="stringliteral">&quot;Assert a single such edge is added so no phi addition or &quot;</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;             <span class="stringliteral">&quot;additional processing is required.\n&quot;</span>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AddedBlockSet.size() == 1 &amp;&amp;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;             <span class="stringliteral">&quot;Can only handle adding one predecessor to a new block.&quot;</span>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="comment">// Need to remove new blocks from PredMap. Remove below to not invalidate</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="comment">// iterator here.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      NewBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// Nothing to process for new/cloned blocks.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : NewBlocks)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    PredMap.erase(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 16&gt;</a> BlocksWithDefsToReplace;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 8&gt;</a> InsertedPhis;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// First create MemoryPhis in all blocks that don&#39;t have one. Create in the</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// order found in Updates, not in PredMap, to get deterministic numbering.</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Edge : Updates) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Edge.getTo();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (PredMap.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; !MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      InsertedPhis.push_back(MSSA-&gt;createMemoryPhi(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">// Now we&#39;ll fill in the MemoryPhis with the right incoming values.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;BBPredPair : PredMap) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BBPredPair.first;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;PrevBlockSet = BBPredPair.second.Prev;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;AddedBlockSet = BBPredPair.second.Added;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PrevBlockSet.empty() &amp;&amp;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;           <span class="stringliteral">&quot;At least one previous predecessor must exist.&quot;</span>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="comment">// TODO: if this becomes a bottleneck, we can save on GetLastDef calls by</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// keeping this map before the loop. We can reuse already populated entries</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// if an edge is added from the same predecessor to two different blocks,</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">// and this does happen in rotate. Note that the map needs to be updated</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// when deleting non-necessary phis below, if the phi is in the map by</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="comment">// replacing the value with DefP1.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;BasicBlock *, MemoryAccess *&gt;</a> LastDefAddedPred;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *AddedPred : AddedBlockSet) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keyword">auto</span> *DefPn = GetLastDef(AddedPred);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DefPn != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Unable to find last definition.&quot;</span>);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      LastDefAddedPred[AddedPred] = DefPn;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *NewPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="comment">// If Phi is not empty, add an incoming edge from each added pred. Must</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="comment">// still compute blocks with defs to replace for this block below.</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">if</span> (NewPhi-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>()) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : AddedBlockSet) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keyword">auto</span> *LastDefForPred = LastDefAddedPred[Pred];</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = EdgeCountMap[{Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>}]; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;          NewPhi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ab9945ed381faa9dbee65a92e6225768d">addIncoming</a>(LastDefForPred, Pred);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="comment">// Pick any existing predecessor and get its definition. All other</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="comment">// existing predecessors should have the same one, since no phi existed.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keyword">auto</span> *P1 = *PrevBlockSet.begin();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *DefP1 = GetLastDef(P1);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="comment">// Check DefP1 against all Defs in LastDefPredPair. If all the same,</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="comment">// nothing to add.</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordtype">bool</span> InsertPhi = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> LastDefPredPair : LastDefAddedPred)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">if</span> (DefP1 != LastDefPredPair.second) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;          InsertPhi = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keywordflow">if</span> (!InsertPhi) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="comment">// Since NewPhi may be used in other newly added Phis, replace all uses</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="comment">// of NewPhi with the definition coming from all predecessors (DefP1),</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="comment">// before deleting it.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        NewPhi-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(DefP1);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(NewPhi);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="comment">// Update Phi with new values for new predecessors and old value for all</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="comment">// other predecessors. Since AddedBlockSet and PrevBlockSet are ordered</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="comment">// sets, the order of entries in NewPhi is deterministic.</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : AddedBlockSet) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keyword">auto</span> *LastDefForPred = LastDefAddedPred[Pred];</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = EdgeCountMap[{Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>}]; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;          NewPhi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ab9945ed381faa9dbee65a92e6225768d">addIncoming</a>(LastDefForPred, Pred);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : PrevBlockSet)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = EdgeCountMap[{Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>}]; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;          NewPhi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ab9945ed381faa9dbee65a92e6225768d">addIncoming</a>(DefP1, Pred);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="comment">// Get all blocks that used to dominate BB and no longer do after adding</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// AddedBlockSet, where PrevBlockSet are the previously known predecessors.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>() &amp;&amp; <span class="stringliteral">&quot;BB does not have valid idom&quot;</span>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PrevIDom = FindNearestCommonDominator(PrevBlockSet);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PrevIDom &amp;&amp; <span class="stringliteral">&quot;Previous IDom should exists&quot;</span>);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewIDom = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>();</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewIDom &amp;&amp; <span class="stringliteral">&quot;BB should have a new valid idom&quot;</span>);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(NewIDom, PrevIDom) &amp;&amp;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;           <span class="stringliteral">&quot;New idom should dominate old idom&quot;</span>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    GetNoLongerDomBlocks(PrevIDom, NewIDom, BlocksWithDefsToReplace);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  tryRemoveTrivialPhis(InsertedPhis);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">// Create the set of blocks that now have a definition. We&#39;ll use this to</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// compute IDF and add Phis there next.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> BlocksToProcess;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;VH : InsertedPhis)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MPhi = cast_or_null&lt;MemoryPhi&gt;(VH))</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      BlocksToProcess.push_back(MPhi-&gt;getBlock());</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// Compute IDF and add Phis in all IDF blocks that do not have one.</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> IDFBlocks;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (!BlocksToProcess.empty()) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="classllvm_1_1IDFCalculator.html">ForwardIDFCalculator</a> IDFs(DT, GD);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> DefiningBlocks(BlocksToProcess.begin(),</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                                                 BlocksToProcess.end());</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    IDFs.setDefiningBlocks(DefiningBlocks);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    IDFs.calculate(IDFBlocks);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MemoryPhi *, 4&gt;</a> PhisToFill;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">// First create all needed Phis.</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *BBIDF : IDFBlocks)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">if</span> (!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(BBIDF)) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keyword">auto</span> *IDFPhi = MSSA-&gt;createMemoryPhi(BBIDF);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        InsertedPhis.push_back(IDFPhi);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        PhisToFill.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(IDFPhi);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">// Then update or insert their correct incoming values.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *BBIDF : IDFBlocks) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keyword">auto</span> *IDFPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(BBIDF);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IDFPhi &amp;&amp; <span class="stringliteral">&quot;Phi must exist&quot;</span>);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <span class="keywordflow">if</span> (!PhisToFill.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(IDFPhi)) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="comment">// Update existing Phi.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="comment">// FIXME: some updates may be redundant, try to optimize and skip some.</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = IDFPhi-&gt;getNumIncomingValues(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;          IDFPhi-&gt;setIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, GetLastDef(IDFPhi-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pi : GD-&gt;template getChildren&lt;/*InverseEdge=*/true&gt;(BBIDF))</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;          IDFPhi-&gt;addIncoming(GetLastDef(Pi), Pi);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// Now for all defs in BlocksWithDefsToReplace, if there are uses they no</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// longer dominate, replace those with the closest dominating def.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// This will also update optimized accesses, as they&#39;re also uses.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *BlockWithDefsToReplace : BlocksWithDefsToReplace) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> DefsList = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(BlockWithDefsToReplace)) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;DefToReplaceUses : *DefsList) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DominatingBlock = DefToReplaceUses.getBlock();</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(DefToReplaceUses.uses())) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;          <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Usr = cast&lt;MemoryAccess&gt;(U.getUser());</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *UsrPhi = dyn_cast&lt;MemoryPhi&gt;(Usr)) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DominatedBlock = UsrPhi-&gt;getIncomingBlock(U);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(DominatingBlock, DominatedBlock))</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;              U.set(GetLastDef(DominatedBlock));</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DominatedBlock = Usr-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(DominatingBlock, DominatedBlock)) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;              <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DomBlPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(DominatedBlock))</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                U.set(DomBlPhi);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;              <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                <span class="keyword">auto</span> *IDom = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(DominatedBlock)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>();</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IDom &amp;&amp; <span class="stringliteral">&quot;Block must have a valid IDom.&quot;</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                U.set(GetLastDef(IDom-&gt;getBlock()));</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;              }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;              cast&lt;MemoryUseOrDef&gt;(Usr)-&gt;resetOptimized();</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;          }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  tryRemoveTrivialPhis(InsertedPhis);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;}</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">// Move What before Where in the MemorySSA IR.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> WhereType&gt;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="keywordtype">void</span> MemorySSAUpdater::moveTo(<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *What, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                              WhereType Where) {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// Mark MemoryPhi users of What not to be optimized.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : What-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *PhiUser = dyn_cast&lt;MemoryPhi&gt;(U))</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      NonOptPhis.insert(PhiUser);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// Replace all our users with our defining access.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  What-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(What-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">getDefiningAccess</a>());</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// Let MemorySSA take care of moving it around in the lists.</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">moveTo</a>(What, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Where);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// Now reinsert it into the IR and do whatever fixups needed.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(What))</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">insertDef</a>(MD, <span class="comment">/*RenameUses=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">insertUse</a>(cast&lt;MemoryUse&gt;(What), <span class="comment">/*RenameUses=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="comment">// Clear dangling pointers. We added all MemoryPhi users, but not all</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="comment">// of them are removed by fixupDefs().</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  NonOptPhis.clear();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">// Move What before Where in the MemorySSA IR.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#af58e16a1d7ebc8f202ae2f8037b42df6"> 1191</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#af58e16a1d7ebc8f202ae2f8037b42df6">MemorySSAUpdater::moveBefore</a>(<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *What, <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *Where) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  moveTo(What, Where-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), Where-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#af9653b051f47859d60d83527d0460e87">getIterator</a>());</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">// Move What after Where in the MemorySSA IR.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a2d537a2dd5afbd1eba9a402cda94e067"> 1196</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a2d537a2dd5afbd1eba9a402cda94e067">MemorySSAUpdater::moveAfter</a>(<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *What, <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *Where) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  moveTo(What, Where-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), ++Where-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#af9653b051f47859d60d83527d0460e87">getIterator</a>());</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;}</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#ae26e0fb4a78dc439a03ac42c4ba6e674"> 1200</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ae26e0fb4a78dc439a03ac42c4ba6e674">MemorySSAUpdater::moveToPlace</a>(<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *What, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                                   <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5">MemorySSA::InsertionPlace</a> Where) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">if</span> (Where != MemorySSA::InsertionPlace::BeforeTerminator)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">return</span> moveTo(What, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Where);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Where = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#af58e16a1d7ebc8f202ae2f8037b42df6">moveBefore</a>(What, Where);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">return</span> moveTo(What, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, MemorySSA::InsertionPlace::End);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">// All accesses in To used to be in From. Move to end and update access lists.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="keywordtype">void</span> MemorySSAUpdater::moveAllAccesses(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                                       <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Start) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="classllvm_1_1iplist.html">MemorySSA::AccessList</a> *Accs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">if</span> (!Accs)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Start-&gt;getParent() == To &amp;&amp; <span class="stringliteral">&quot;Incorrect Start instruction&quot;</span>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *FirstInNew = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Start-&gt;getIterator(), To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>()))</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> ((FirstInNew = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (FirstInNew) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keyword">auto</span> *MUD = cast&lt;MemoryUseOrDef&gt;(FirstInNew);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="keyword">auto</span> NextIt = ++MUD-&gt;getIterator();</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *NextMUD = (!Accs || NextIt == Accs-&gt;end())</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                                    ? <span class="keyword">nullptr</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                                    : cast&lt;MemoryUseOrDef&gt;(&amp;*NextIt);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">moveTo</a>(MUD, To, <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5a542e7b754a1b868794fa2f47256a1d97">MemorySSA::End</a>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="comment">// Moving MUD from Accs in the moveTo above, may delete Accs, so we need</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <span class="comment">// to retrieve it again.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      Accs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      MUD = NextMUD;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    } <span class="keywordflow">while</span> (MUD);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// If all accesses were moved and only a trivial Phi remains, we try to remove</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// that Phi. This is needed when From is going to be deleted.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keyword">auto</span> *Defs = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">getWritableBlockDefs</a>(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">if</span> (Defs &amp;&amp; !Defs-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#abba3186fa8d1f1f71c2cc11221f9652c">empty</a>())</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Phi = dyn_cast&lt;MemoryPhi&gt;(&amp;*Defs-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#abc96513a79d236fe7f052a1ec7d0eb05">begin</a>()))</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      tryRemoveTrivialPhi(Phi);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;}</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#aa7518e6d6d74227a56b36eb88cfe26e6"> 1247</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#aa7518e6d6d74227a56b36eb88cfe26e6">MemorySSAUpdater::moveAllAfterSpliceBlocks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                                                <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To,</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                                                <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Start) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(To) == <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;         <span class="stringliteral">&quot;To block is expected to be free of MemoryAccesses.&quot;</span>);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  moveAllAccesses(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, To, Start);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(To))</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(Succ))</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      MPhi-&gt;setIncomingBlock(MPhi-&gt;getBasicBlockIndex(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>), To);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;}</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#ae11d36d6d1f06cdf18a0333eab22f381"> 1258</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ae11d36d6d1f06cdf18a0333eab22f381">MemorySSAUpdater::moveAllAfterMergeBlocks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                               <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Start) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>-&gt;getUniquePredecessor() == To &amp;&amp;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <span class="stringliteral">&quot;From block is expected to have a single predecessor (To).&quot;</span>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  moveAllAccesses(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, To, Start);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>))</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(Succ))</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      MPhi-&gt;setIncomingBlock(MPhi-&gt;getBasicBlockIndex(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>), To);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;}</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#ae6b63bcaa1f6638b608f911cd04341e2"> 1268</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#ae6b63bcaa1f6638b608f911cd04341e2">MemorySSAUpdater::wireOldPredecessorsToNewImmediatePredecessor</a>(</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Old, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *New, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> Preds,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordtype">bool</span> IdenticalEdgesWereMerged) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(New) &amp;&amp;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         <span class="stringliteral">&quot;Access list should be null for a new block.&quot;</span>);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(Old);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="keywordflow">if</span> (!Phi)</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">if</span> (Old-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a526630ff85b48f29ac5b4c519c6c2243">hasNPredecessors</a>(1)) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">pred_size</a>(New) == Preds.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &amp;&amp;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;           <span class="stringliteral">&quot;Should have moved all predecessors.&quot;</span>);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">moveTo</a>(Phi, New, <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085">MemorySSA::Beginning</a>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Preds.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Must be moving at least one predecessor to the &quot;</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                             <span class="stringliteral">&quot;new immediate predecessor.&quot;</span>);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *NewPhi = MSSA-&gt;createMemoryPhi(New);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> PredsSet(Preds.<a class="code" href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">begin</a>(), Preds.<a class="code" href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">end</a>());</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// Currently only support the case of removing a single incoming edge when</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">// identical edges were not merged.</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">if</span> (!IdenticalEdgesWereMerged)</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredsSet.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() == Preds.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &amp;&amp;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;             <span class="stringliteral">&quot;If identical edges were not merged, we cannot have duplicate &quot;</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;             <span class="stringliteral">&quot;blocks in the predecessors&quot;</span>);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a4a6dfce2c88679057e980a0f1cf58222">unorderedDeleteIncomingIf</a>([&amp;](<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">if</span> (PredsSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        NewPhi-&gt;addIncoming(MA, B);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        if (!IdenticalEdgesWereMerged)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;          PredsSet.erase(B);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        return true;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    });</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ab9945ed381faa9dbee65a92e6225768d">addIncoming</a>(NewPhi, New);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    tryRemoveTrivialPhi(NewPhi);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;}</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758"> 1305</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">MemorySSAUpdater::removeMemoryAccess</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA, <span class="keywordtype">bool</span> OptimizePhis) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(MA) &amp;&amp;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;         <span class="stringliteral">&quot;Trying to remove the live on entry def&quot;</span>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="comment">// We can only delete phi nodes if they have no uses, or we can replace all</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">// uses with a single definition.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewDefTarget = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP = dyn_cast&lt;MemoryPhi&gt;(MA)) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="comment">// Note that it is sufficient to know that all edges of the phi node have</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="comment">// the same argument.  If they do, by the definition of dominance frontiers</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="comment">// (which we used to place this phi), that argument must dominate this phi,</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="comment">// and thus, must dominate the phi&#39;s uses, and so we will not hit the assert</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="comment">// below.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    NewDefTarget = <a class="code" href="MemorySSAUpdater_8cpp.html#abc5c7da74ecbb98960032ac9fe96dfd6">onlySingleValue</a>(MP);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((NewDefTarget || MP-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) &amp;&amp;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;           <span class="stringliteral">&quot;We can&#39;t delete this memory phi&quot;</span>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    NewDefTarget = cast&lt;MemoryUseOrDef&gt;(MA)-&gt;getDefiningAccess();</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160; </div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MemoryPhi *, 4&gt;</a> PhisToCheck;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">// Re-point the uses at our defining access</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(MA) &amp;&amp; !MA-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// Reset optimized on users of this store, and reset the uses.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// A few notes:</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="comment">// 1. This is a slightly modified version of RAUW to avoid walking the</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="comment">// uses twice here.</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">// 2. If we wanted to be complete, we would have to reset the optimized</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// flags on users of phi nodes if doing the below makes a phi node have all</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="comment">// the same arguments. Instead, we prefer users to removeMemoryAccess those</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="comment">// phi nodes, because doing it here would be N^3.</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordflow">if</span> (MA-&gt;<a class="code" href="classllvm_1_1Value.html#ab978072498608d7bd344804926c2a91a">hasValueHandle</a>())</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <a class="code" href="classllvm_1_1ValueHandleBase.html#abb87e6d5ed7ded2ccd8acac49caf22ab">ValueHandleBase::ValueIsRAUWd</a>(MA, NewDefTarget);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// Note: We assume MemorySSA is not used in metadata since it&#39;s not really</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="comment">// part of the IR.</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewDefTarget != MA &amp;&amp; <span class="stringliteral">&quot;Going into an infinite loop&quot;</span>);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">while</span> (!MA-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U = *MA-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>();</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>()))</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        MUD-&gt;resetOptimized();</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="keywordflow">if</span> (OptimizePhis)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP = dyn_cast&lt;MemoryPhi&gt;(U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>()))</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;          PhisToCheck.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(MP);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      U.<a class="code" href="classllvm_1_1Use.html#a40360b4fa7b8e6920a68e5a8a0814f1f">set</a>(NewDefTarget);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// The call below to erase will destroy MA, so we can&#39;t change the order we</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// are doing things here</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#acd0427b84adce00e5b26f993c7aa48c8">removeFromLookups</a>(MA);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c">removeFromLists</a>(MA);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">// Optionally optimize Phi uses. This will recursively remove trivial phis.</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">if</span> (!PhisToCheck.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>()) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 16&gt;</a> PhisToOptimize{PhisToCheck.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>(),</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                                           PhisToCheck.<a class="code" href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">end</a>()};</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    PhisToCheck.<a class="code" href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">clear</a>();</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordtype">unsigned</span> PhisSize = PhisToOptimize.size();</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">while</span> (PhisSize-- &gt; 0)</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP =</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;              cast_or_null&lt;MemoryPhi&gt;(PhisToOptimize.pop_back_val()))</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        tryRemoveTrivialPhi(MP);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;}</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#aa0c15073f16693ebc44c2410986cacec"> 1372</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#aa0c15073f16693ebc44c2410986cacec">MemorySSAUpdater::removeBlocks</a>(</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 8&gt;</a> &amp;DeadBlocks) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">// First delete all uses of BB in MemoryPhis.</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : DeadBlocks) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TI &amp;&amp; <span class="stringliteral">&quot;Basic block expected to have a terminator instruction&quot;</span>);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(TI))</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">if</span> (!DeadBlocks.count(Succ))</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(Succ)) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;          MP-&gt;unorderedDeleteIncomingBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;          tryRemoveTrivialPhi(MP);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">// Drop all references of all accesses in BB</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1iplist.html">MemorySSA::AccessList</a> *Acc = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA : *Acc)</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        MA.<a class="code" href="classllvm_1_1User.html#a48ec5fcee6d2c17c723e8e67f169f948">dropAllReferences</a>();</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// Next, delete all memory accesses in each block</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : DeadBlocks) {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="classllvm_1_1iplist.html">MemorySSA::AccessList</a> *Acc = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">if</span> (!Acc)</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*Acc)) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#acd0427b84adce00e5b26f993c7aa48c8">removeFromLookups</a>(&amp;MA);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c">removeFromLists</a>(&amp;MA);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;}</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="keywordtype">void</span> MemorySSAUpdater::tryRemoveTrivialPhis(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;WeakVH&gt;</a> UpdatedPHIs) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;VH : UpdatedPHIs)</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MPhi = cast_or_null&lt;MemoryPhi&gt;(VH))</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      tryRemoveTrivialPhi(MPhi);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a94cd9c4d5114d65e1cd802c23c080326"> 1408</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a94cd9c4d5114d65e1cd802c23c080326">MemorySSAUpdater::changeToUnreachable</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="comment">// Remove memory accesses in BB for I and all following instructions.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="keyword">auto</span> BBI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator(), BBE = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="comment">// FIXME: If this becomes too expensive, iterate until the first instruction</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// with a memory access, then iterate over MemoryAccesses.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">while</span> (BBI != BBE)</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(&amp;*(BBI++));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// Update phis in BB&#39;s successors to remove BB.</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 16&gt;</a> UpdatedPHIs;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06add2496ae8d635f9f169602771c88d376">Successor</a> : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html#a95eeaea882b3c388420da771fe488bbc">removeDuplicatePhiEdgesBetween</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06add2496ae8d635f9f169602771c88d376">Successor</a>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MPhi = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06add2496ae8d635f9f169602771c88d376">Successor</a>)) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      MPhi-&gt;unorderedDeleteIncomingBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      UpdatedPHIs.push_back(MPhi);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// Optimize trivial phis.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  tryRemoveTrivialPhis(UpdatedPHIs);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af"> 1429</a></span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af">MemorySSAUpdater::createMemoryAccessInBB</a>(</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Definition, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5">MemorySSA::InsertionPlace</a> Point) {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *NewAccess = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">createDefinedAccess</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Definition);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">insertIntoListsForBlock</a>(NewAccess, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Point);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">return</span> NewAccess;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;}</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#a1c21c2f4d41d5c6f6807992d60347bbd"> 1437</a></span>&#160;<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a1c21c2f4d41d5c6f6807992d60347bbd">MemorySSAUpdater::createMemoryAccessBefore</a>(</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Definition, <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *InsertPt) {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() == InsertPt-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>() &amp;&amp;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;         <span class="stringliteral">&quot;New and old access must be in the same block&quot;</span>);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *NewAccess = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">createDefinedAccess</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Definition);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802">insertIntoListsBefore</a>(NewAccess, InsertPt-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(),</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                              InsertPt-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#af9653b051f47859d60d83527d0460e87">getIterator</a>());</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="keywordflow">return</span> NewAccess;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUpdater.html#acf9a0bb25aae89d274ee9ae7dd0cf9b2"> 1447</a></span>&#160;<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *<a class="code" href="classllvm_1_1MemorySSAUpdater.html#acf9a0bb25aae89d274ee9ae7dd0cf9b2">MemorySSAUpdater::createMemoryAccessAfter</a>(</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Definition, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *InsertPt) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() == InsertPt-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>() &amp;&amp;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;         <span class="stringliteral">&quot;New and old access must be in the same block&quot;</span>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *NewAccess = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">createDefinedAccess</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Definition);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802">insertIntoListsBefore</a>(NewAccess, InsertPt-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(),</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                              ++InsertPt-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#af9653b051f47859d60d83527d0460e87">getIterator</a>());</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordflow">return</span> NewAccess;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00316">BasicBlock.h:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_a4a6dfce2c88679057e980a0f1cf58222"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a4a6dfce2c88679057e980a0f1cf58222">llvm::MemoryPhi::unorderedDeleteIncomingIf</a></div><div class="ttdeci">void unorderedDeleteIncomingIf(Fn &amp;&amp;Pred)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00602">MemorySSA.h:602</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_af22da23886673c59b93659b92b91fa86"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#af22da23886673c59b93659b92b91fa86">llvm::MemorySSA::getWritableBlockDefs</a></div><div class="ttdeci">DefsList * getWritableBlockDefs(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00816">MemorySSA.h:816</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a1c21c2f4d41d5c6f6807992d60347bbd"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a1c21c2f4d41d5c6f6807992d60347bbd">llvm::MemorySSAUpdater::createMemoryAccessBefore</a></div><div class="ttdeci">MemoryUseOrDef * createMemoryAccessBefore(Instruction *I, MemoryAccess *Definition, MemoryUseOrDef *InsertPt)</div><div class="ttdoc">Create a MemoryAccess in MemorySSA before or after an existing MemoryAccess.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01437">MemorySSAUpdater.cpp:1437</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a0b931781aa589c6ebe64a76c1447e5b2"><div class="ttname"><a href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">llvm::User::operands</a></div><div class="ttdeci">op_range operands()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00242">User.h:242</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8h_html"><div class="ttname"><a href="MemorySSAUpdater_8h.html">MemorySSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0b2ca98dc28c61793ff5c90d23e5f14e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">llvm::DenseMapBase::lookup</a></div><div class="ttdeci">ValueT lookup(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00197">DenseMap.h:197</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a48ec5fcee6d2c17c723e8e67f169f948"><div class="ttname"><a href="classllvm_1_1User.html#a48ec5fcee6d2c17c723e8e67f169f948">llvm::User::dropAllReferences</a></div><div class="ttdeci">void dropAllReferences()</div><div class="ttdoc">Drop all references to operands.</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00299">User.h:299</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8cpp_html_ad30a761cf1fefa8bc9cc9037d0f2ae9d"><div class="ttname"><a href="MemorySSAUpdater_8cpp.html#ad30a761cf1fefa8bc9cc9037d0f2ae9d">getNewDefiningAccessForClone</a></div><div class="ttdeci">static MemoryAccess * getNewDefiningAccessForClone(MemoryAccess *MA, const ValueToValueMapTy &amp;VMap, PhiToDefMap &amp;MPhiMap, bool CloneWasSimplified, MemorySSA *MSSA)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00568">MemorySSAUpdater.cpp:568</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a56004f54560e9950f6eb148cb5dfa0a3"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">llvm::MemorySSA::dominates</a></div><div class="ttdeci">bool dominates(const MemoryAccess *A, const MemoryAccess *B) const</div><div class="ttdoc">Given two memory accesses in potentially different blocks, determine whether MemoryAccess A dominates...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02116">MemorySSA.cpp:2116</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a1aa1ce1cb2192a65bf9e113882cd4ae9"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a1aa1ce1cb2192a65bf9e113882cd4ae9">llvm::MemorySSA::renamePass</a></div><div class="ttdeci">void renamePass(BasicBlock *BB, MemoryAccess *IncomingVal, SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;Visited)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00829">MemorySSA.h:829</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_aa0c15073f16693ebc44c2410986cacec"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#aa0c15073f16693ebc44c2410986cacec">llvm::MemorySSAUpdater::removeBlocks</a></div><div class="ttdeci">void removeBlocks(const SmallSetVector&lt; BasicBlock *, 8 &gt; &amp;DeadBlocks)</div><div class="ttdoc">Remove all MemoryAcceses in a set of BasicBlocks about to be deleted.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01372">MemorySSAUpdater.cpp:1372</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html_a0335bbe7f97148c901d8cd85ef2b7858"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#a0335bbe7f97148c901d8cd85ef2b7858">llvm::MemoryAccess::getReverseIterator</a></div><div class="ttdeci">AllAccessType::reverse_self_iterator getReverseIterator()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00189">MemorySSA.h:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a97891043f9eacb9b0e18e22767cc7802"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802">llvm::MemorySSA::insertIntoListsBefore</a></div><div class="ttdeci">void insertIntoListsBefore(MemoryAccess *, const BasicBlock *, AccessList::iterator)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01618">MemorySSA.cpp:1618</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a468b8d23a3bb5b9a484f54193f177713"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">llvm::MemorySSA::getLiveOnEntryDef</a></div><div class="ttdeci">MemoryAccess * getLiveOnEntryDef() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00741">MemorySSA.h:741</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a9aeeca2833810f01b20545a46fe22503"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">llvm::DominatorTreeBase::Insert</a></div><div class="ttdeci">static constexpr UpdateKind Insert</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00258">GenericDomTree.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_html_abb650e853db0ddbb60411b885c499737"><div class="ttname"><a href="namespacellvm.html#abb650e853db0ddbb60411b885c499737">llvm::copy</a></div><div class="ttdeci">OutputIt copy(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01837">STLExtras.h:1837</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_aa7518e6d6d74227a56b36eb88cfe26e6"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#aa7518e6d6d74227a56b36eb88cfe26e6">llvm::MemorySSAUpdater::moveAllAfterSpliceBlocks</a></div><div class="ttdeci">void moveAllAfterSpliceBlocks(BasicBlock *From, BasicBlock *To, Instruction *Start)</div><div class="ttdoc">From block was spliced into From and To.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01247">MemorySSAUpdater.cpp:1247</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00367">GenericDomTree.h:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1mapped__iterator_html"><div class="ttname"><a href="classllvm_1_1mapped__iterator.html">llvm::mapped_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00404">STLExtras.h:404</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00397">Value.h:397</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html">llvm::MemoryPhi</a></div><div class="ttdoc">Represents phi nodes for memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00479">MemorySSA.h:479</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a526630ff85b48f29ac5b4c519c6c2243"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a526630ff85b48f29ac5b4c519c6c2243">llvm::BasicBlock::hasNPredecessors</a></div><div class="ttdeci">bool hasNPredecessors(unsigned N) const</div><div class="ttdoc">Return true if this block has exactly N predecessors.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00306">BasicBlock.cpp:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00090">GenericDomTree.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUse_html"><div class="ttname"><a href="classllvm_1_1MemoryUse.html">llvm::MemoryUse</a></div><div class="ttdoc">Represents read-only accesses to memory.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00312">MemorySSA.h:312</a></div></div>
<div class="ttc" id="aclassllvm_1_1IDFCalculatorBase_html_a714e5448566006046f747d9ec4df8241"><div class="ttname"><a href="classllvm_1_1IDFCalculatorBase.html#a714e5448566006046f747d9ec4df8241">llvm::IDFCalculatorBase::calculate</a></div><div class="ttdeci">void calculate(SmallVectorImpl&lt; NodeTy * &gt; &amp;IDFBlocks)</div><div class="ttdoc">Calculate iterated dominance frontiers.</div><div class="ttdef"><b>Definition:</b> <a href="GenericIteratedDominanceFrontier_8h_source.html#l00131">GenericIteratedDominanceFrontier.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1iplist_html"><div class="ttname"><a href="classllvm_1_1iplist.html">llvm::iplist</a></div><div class="ttdoc">An intrusive list with ownership and callbacks specified/controlled by ilist_traits,...</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00391">ilist.h:391</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ad89ca302de455d3971f751c8d1a5bd58"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ad89ca302de455d3971f751c8d1a5bd58">llvm::MemorySSAUpdater::applyUpdates</a></div><div class="ttdeci">void applyUpdates(ArrayRef&lt; CFGUpdate &gt; Updates, DominatorTree &amp;DT, bool UpdateDTFirst=false)</div><div class="ttdoc">Apply CFG updates, analogous with the DT edge updates.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00809">MemorySSAUpdater.cpp:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a8d0093ed3e69ff491615a2ced017b1af"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af">llvm::MemorySSAUpdater::createMemoryAccessInBB</a></div><div class="ttdeci">MemoryAccess * createMemoryAccessInBB(Instruction *I, MemoryAccess *Definition, const BasicBlock *BB, MemorySSA::InsertionPlace Point)</div><div class="ttdoc">Create a MemoryAccess in MemorySSA at a specified point in a block, with a specified clobbering defin...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01429">MemorySSAUpdater.cpp:1429</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_a6ecf3b528e1fab88068bd3baefb8b0ed"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a6ecf3b528e1fab88068bd3baefb8b0ed">llvm::MemoryPhi::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned I) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00540">MemorySSA.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a470b5b573c7915fe13bd529b22c9adbc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">llvm::DominatorTreeBase::applyUpdates</a></div><div class="ttdeci">void applyUpdates(ArrayRef&lt; UpdateType &gt; Updates)</div><div class="ttdoc">Inform the dominator tree about a sequence of CFG edge insertions and deletions and perform a batch u...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00561">GenericDomTree.h:561</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00158">ArrayRef.h:158</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a8bc47ee66a3ac3b5f1a57c497048b090"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">llvm::MemorySSA::insertIntoListsForBlock</a></div><div class="ttdeci">void insertIntoListsForBlock(MemoryAccess *, const BasicBlock *, InsertionPlace)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01586">MemorySSA.cpp:1586</a></div></div>
<div class="ttc" id="aclassllvm_1_1GraphDiff_html"><div class="ttname"><a href="classllvm_1_1GraphDiff.html">llvm::GraphDiff</a></div><div class="ttdef"><b>Definition:</b> <a href="CFGDiff_8h_source.html#l00057">CFGDiff.h:57</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_aea0bb94cc4c6ee8016dc150efd4753c1"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#aea0bb94cc4c6ee8016dc150efd4753c1">llvm::MemoryPhi::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const</div><div class="ttdoc">Return the first index of the specified basic block in the value list for this PHI.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00572">MemorySSA.h:572</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5">llvm::lltok::equal</a></div><div class="ttdeci">@ equal</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00025">LLToken.h:25</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksRPO_html"><div class="ttname"><a href="classllvm_1_1LoopBlocksRPO.html">llvm::LoopBlocksRPO</a></div><div class="ttdoc">Wrapper class to LoopBlocksDFS that provides a standard begin()/end() interface for the DFS reverse p...</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00172">LoopIterator.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a989bdd9e36b5327a04ad8db2a7014741"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a989bdd9e36b5327a04ad8db2a7014741">llvm::MemorySSAUpdater::updatePhisWhenInsertingUniqueBackedgeBlock</a></div><div class="ttdeci">void updatePhisWhenInsertingUniqueBackedgeBlock(BasicBlock *LoopHeader, BasicBlock *LoopPreheader, BasicBlock *BackedgeBlock)</div><div class="ttdoc">Update MemorySSA when inserting a unique backedge block for a loop.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00637">MemorySSAUpdater.cpp:637</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a9ab9d33dbeb44b5ba49ab27201e6bd76"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">llvm::MemorySSAUpdater::insertUse</a></div><div class="ttdeci">void insertUse(MemoryUse *Use, bool RenameUses=false)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00238">MemorySSAUpdater.cpp:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_adb13793b98ab59209a5309d26f831850"><div class="ttname"><a href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Get an iterator to the beginning of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00082">SetVector.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html_af9653b051f47859d60d83527d0460e87"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#af9653b051f47859d60d83527d0460e87">llvm::MemoryAccess::getIterator</a></div><div class="ttdeci">AllAccessType::self_iterator getIterator()</div><div class="ttdoc">Get the iterators for the all access list and the defs only list We default to the all access list.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00183">MemorySSA.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_ae3b89ffde42778289bcbd8a187199420"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">llvm::MemorySSA::isLiveOnEntryDef</a></div><div class="ttdeci">bool isLiveOnEntryDef(const MemoryAccess *MA) const</div><div class="ttdoc">Return true if MA represents the live on entry value.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00737">MemorySSA.h:737</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a131110a75135a123427d3280dff1fef4"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">llvm::MemorySSA::moveTo</a></div><div class="ttdeci">void moveTo(MemoryUseOrDef *What, BasicBlock *BB, AccessList::iterator Where)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01662">MemorySSA.cpp:1662</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085">llvm::MemorySSA::Beginning</a></div><div class="ttdeci">@ Beginning</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00788">MemorySSA.h:788</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a2d537a2dd5afbd1eba9a402cda94e067"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a2d537a2dd5afbd1eba9a402cda94e067">llvm::MemorySSAUpdater::moveAfter</a></div><div class="ttdeci">void moveAfter(MemoryUseOrDef *What, MemoryUseOrDef *Where)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01196">MemorySSAUpdater.cpp:1196</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ad7b4596999393cfa1b3c077caa0f2ca0"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ad7b4596999393cfa1b3c077caa0f2ca0">llvm::MemorySSAUpdater::updateForClonedBlockIntoPred</a></div><div class="ttdeci">void updateForClonedBlockIntoPred(BasicBlock *BB, BasicBlock *P1, const ValueToValueMapTy &amp;VM)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00756">MemorySSAUpdater.cpp:756</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ae26e0fb4a78dc439a03ac42c4ba6e674"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ae26e0fb4a78dc439a03ac42c4ba6e674">llvm::MemorySSAUpdater::moveToPlace</a></div><div class="ttdeci">void moveToPlace(MemoryUseOrDef *What, BasicBlock *BB, MemorySSA::InsertionPlace Where)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01200">MemorySSAUpdater.cpp:1200</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html_a6d56464060a479164dcac19b3a0fd7e3"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#a6d56464060a479164dcac19b3a0fd7e3">llvm::MemoryAccess::getReverseDefsIterator</a></div><div class="ttdeci">DefsOnlyType::reverse_self_iterator getReverseDefsIterator()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00201">MemorySSA.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_ab9945ed381faa9dbee65a92e6225768d"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#ab9945ed381faa9dbee65a92e6225768d">llvm::MemoryPhi::addIncoming</a></div><div class="ttdeci">void addIncoming(MemoryAccess *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00561">MemorySSA.h:561</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_aaff19b909f903fe2a431e97424ffced5"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">llvm::MemorySSA::getBlockAccesses</a></div><div class="ttdeci">const AccessList * getBlockAccesses(const BasicBlock *BB) const</div><div class="ttdoc">Return the list of MemoryAccess's for a given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00757">MemorySSA.h:757</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a50a2e57da274f8d69b9f932977379cdf"><div class="ttname"><a href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const</div><div class="ttdoc">Returns the User that contains this Use.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00072">Use.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_acd0427b84adce00e5b26f993c7aa48c8"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#acd0427b84adce00e5b26f993c7aa48c8">llvm::MemorySSA::removeFromLookups</a></div><div class="ttdeci">void removeFromLookups(MemoryAccess *)</div><div class="ttdoc">Properly remove MA from all of MemorySSA's lookup tables.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01800">MemorySSA.cpp:1800</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html_a06fff5bdd2bdf6d2c200e281787dc284"><div class="ttname"><a href="classllvm_1_1iterator__range.html#a06fff5bdd2bdf6d2c200e281787dc284">llvm::iterator_range::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00046">iterator_range.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_a1c403c86f16af563cec6961666e8cc2e"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a1c403c86f16af563cec6961666e8cc2e">llvm::MemoryPhi::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00527">MemorySSA.h:527</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html_aa468ad3fa68bdf6703c391deaec97706"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">llvm::MemoryAccess::getBlock</a></div><div class="ttdeci">BasicBlock * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00164">MemorySSA.h:164</a></div></div>
<div class="ttc" id="aLoopIterator_8h_html"><div class="ttname"><a href="LoopIterator_8h.html">LoopIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a95eeaea882b3c388420da771fe488bbc"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a95eeaea882b3c388420da771fe488bbc">llvm::MemorySSAUpdater::removeDuplicatePhiEdgesBetween</a></div><div class="ttdeci">void removeDuplicatePhiEdgesBetween(const BasicBlock *From, const BasicBlock *To)</div><div class="ttdoc">Update the MemoryPhi in To to have a single incoming edge from From, following a CFG change that repl...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00538">MemorySSAUpdater.cpp:538</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueHandleBase_html_abb87e6d5ed7ded2ccd8acac49caf22ab"><div class="ttname"><a href="classllvm_1_1ValueHandleBase.html#abb87e6d5ed7ded2ccd8acac49caf22ab">llvm::ValueHandleBase::ValueIsRAUWd</a></div><div class="ttdeci">static void ValueIsRAUWd(Value *Old, Value *New)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l01174">Value.cpp:1174</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_af709830d69338472c10f3110975a065d"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#af709830d69338472c10f3110975a065d">llvm::MemoryPhi::block_begin</a></div><div class="ttdeci">block_iterator block_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00500">MemorySSA.h:500</a></div></div>
<div class="ttc" id="aMIRNamerPass_8cpp_html_a05e4be4ec3e2c3587dda0e376bb6822c"><div class="ttname"><a href="MIRNamerPass_8cpp.html#a05e4be4ec3e2c3587dda0e376bb6822c">Operands</a></div><div class="ttdeci">mir Rename Register Operands</div><div class="ttdef"><b>Definition:</b> <a href="MIRNamerPass_8cpp_source.html#l00074">MIRNamerPass.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUseOrDef_html_a5c00de32cf1426ab78c346e7a251d608"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html#a5c00de32cf1426ab78c346e7a251d608">llvm::MemoryUseOrDef::setDefiningAccess</a></div><div class="ttdeci">void setDefiningAccess(MemoryAccess *DMA, bool Optimized=false)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00295">MemorySSA.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab978072498608d7bd344804926c2a91a"><div class="ttname"><a href="classllvm_1_1Value.html#ab978072498608d7bd344804926c2a91a">llvm::Value::hasValueHandle</a></div><div class="ttdeci">bool hasValueHandle() const</div><div class="ttdoc">Return true if there is a value handle associated with this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00554">Value.h:554</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ac0404328e9e4f5d3c565daabf46fffac"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ac0404328e9e4f5d3c565daabf46fffac">llvm::MemorySSAUpdater::applyInsertUpdates</a></div><div class="ttdeci">void applyInsertUpdates(ArrayRef&lt; CFGUpdate &gt; Updates, DominatorTree &amp;DT)</div><div class="ttdoc">Apply CFG insert updates, analogous with the DT edge updates.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00860">MemorySSAUpdater.cpp:860</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00405">Value.h:405</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a40360b4fa7b8e6920a68e5a8a0814f1f"><div class="ttname"><a href="classllvm_1_1Use.html#a40360b4fa7b8e6920a68e5a8a0814f1f">llvm::Use::set</a></div><div class="ttdeci">void set(Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00865">Value.h:865</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_abc96513a79d236fe7f052a1ec7d0eb05"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#abc96513a79d236fe7f052a1ec7d0eb05">llvm::simple_ilist::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00117">simple_ilist.h:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a4953231268ee21e95c3740e51ab37a96"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a4953231268ee21e95c3740e51ab37a96">llvm::MemorySSAUpdater::removeEdge</a></div><div class="ttdeci">void removeEdge(BasicBlock *From, BasicBlock *To)</div><div class="ttdoc">Update the MemoryPhi in To following an edge deletion between From and To.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00531">MemorySSAUpdater.cpp:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_a6a15a030098342e06ea73e1241d614c9"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00089">GenericDomTree.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a94cd9c4d5114d65e1cd802c23c080326"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a94cd9c4d5114d65e1cd802c23c080326">llvm::MemorySSAUpdater::changeToUnreachable</a></div><div class="ttdeci">void changeToUnreachable(const Instruction *I)</div><div class="ttdoc">Instruction I will be changed to an unreachable.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01408">MemorySSAUpdater.cpp:1408</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a667d41d0d3b12af17ccc6c99e3d51e5b"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a667d41d0d3b12af17ccc6c99e3d51e5b">llvm::MemorySSAUpdater::updateForClonedLoop</a></div><div class="ttdeci">void updateForClonedLoop(const LoopBlocksRPO &amp;LoopBlocks, ArrayRef&lt; BasicBlock * &gt; ExitBlocks, const ValueToValueMapTy &amp;VM, bool IgnoreIncomingWithNoClones=false)</div><div class="ttdoc">Update MemorySSA after a loop was cloned, given the blocks in RPO order, the exit blocks and a 1:1 ma...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00676">MemorySSAUpdater.cpp:676</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html"><div class="ttname"><a href="classllvm_1_1MemorySSA.html">llvm::MemorySSA</a></div><div class="ttdoc">Encapsulates MemorySSA, including all data associated with memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00700">MemorySSA.h:700</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f">llvm::pdb::Empty</a></div><div class="ttdeci">@ Empty</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00395">PDBTypes.h:395</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a4ece07ee1030856099726901d0eef81b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">llvm::MemorySSA::getMemoryAccess</a></div><div class="ttdeci">MemoryUseOrDef * getMemoryAccess(const Instruction *I) const</div><div class="ttdoc">Given a memory Mod/Ref'ing instruction, get the MemorySSA access associated with it.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00717">MemorySSA.h:717</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryDef_html"><div class="ttname"><a href="classllvm_1_1MemoryDef.html">llvm::MemoryDef</a></div><div class="ttdoc">Represents a read-write access to memory, whether it is a must-alias, or a may-alias.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00372">MemorySSA.h:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1TrackingVH_html"><div class="ttname"><a href="classllvm_1_1TrackingVH.html">llvm::TrackingVH</a></div><div class="ttdoc">Value handle that tracks a Value across RAUW.</div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00331">ValueHandle.h:331</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a9773fde54683945b9e34a0f2e5c1a5a5"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5">llvm::MemorySSA::InsertionPlace</a></div><div class="ttdeci">InsertionPlace</div><div class="ttdoc">Used in various insertion functions to specify whether we are talking about the beginning or end of a...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00788">MemorySSA.h:788</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aMemorySSAUpdater_8cpp_html_abc5c7da74ecbb98960032ac9fe96dfd6"><div class="ttname"><a href="MemorySSAUpdater_8cpp.html#abc5c7da74ecbb98960032ac9fe96dfd6">onlySingleValue</a></div><div class="ttdeci">static MemoryAccess * onlySingleValue(MemoryPhi *MP)</div><div class="ttdoc">If all arguments of a MemoryPHI are defined by the same incoming argument, return that argument.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00556">MemorySSAUpdater.cpp:556</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a1a70f2c359aadd76a72aaaede16aca4a"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">llvm::DominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const Use &amp;U) const</div><div class="ttdoc">Provide an overload for a Use.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00335">Dominators.cpp:335</a></div></div>
<div class="ttc" id="aclassllvm_1_1IDFCalculator_html"><div class="ttname"><a href="classllvm_1_1IDFCalculator.html">llvm::IDFCalculator</a></div><div class="ttdef"><b>Definition:</b> <a href="IteratedDominanceFrontier_8h_source.html#l00039">IteratedDominanceFrontier.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00360">Value.h:360</a></div></div>
<div class="ttc" id="aclassllvm_1_1IDFCalculatorBase_html_a9180c82ceffac7e5586cc2d6f368f996"><div class="ttname"><a href="classllvm_1_1IDFCalculatorBase.html#a9180c82ceffac7e5586cc2d6f368f996">llvm::IDFCalculatorBase::setDefiningBlocks</a></div><div class="ttdeci">void setDefiningBlocks(const SmallPtrSetImpl&lt; NodeTy * &gt; &amp;Blocks)</div><div class="ttdoc">Give the IDF calculator the set of blocks in which the value is defined.</div><div class="ttdef"><b>Definition:</b> <a href="GenericIteratedDominanceFrontier_8h_source.html#l00075">GenericIteratedDominanceFrontier.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_ad9d171a8662f441f5c7c50061e628565"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#ad9d171a8662f441f5c7c50061e628565">llvm::MemoryPhi::getIncomingValue</a></div><div class="ttdeci">MemoryAccess * getIncomingValue(unsigned I) const</div><div class="ttdoc">Return incoming value number x.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00530">MemorySSA.h:530</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a9939794555fe9e24e885d55e301de803"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">llvm::MemorySSA::createDefinedAccess</a></div><div class="ttdeci">MemoryUseOrDef * createDefinedAccess(Instruction *, MemoryAccess *, const MemoryUseOrDef *Template=nullptr, bool CreationMustSucceed=true)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01693">MemorySSA.cpp:1693</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_abba3186fa8d1f1f71c2cc11221f9652c"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#abba3186fa8d1f1f71c2cc11221f9652c">llvm::simple_ilist::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Check if the list is empty in constant time.</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00131">simple_ilist.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_acf9a0bb25aae89d274ee9ae7dd0cf9b2"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#acf9a0bb25aae89d274ee9ae7dd0cf9b2">llvm::MemorySSAUpdater::createMemoryAccessAfter</a></div><div class="ttdeci">MemoryUseOrDef * createMemoryAccessAfter(Instruction *I, MemoryAccess *Definition, MemoryAccess *InsertPt)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01447">MemorySSAUpdater.cpp:1447</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a21fc5eae685ef3e2dce4403a75d5ff2f"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">llvm::MemorySSAUpdater::insertDef</a></div><div class="ttdeci">void insertDef(MemoryDef *Def, bool RenameUses=false)</div><div class="ttdoc">Insert a definition into the MemorySSA IR.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00307">MemorySSAUpdater.cpp:307</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a65b7c715bf28eb17cfd012dd9bc3ad4b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">llvm::MemorySSA::getBlockDefs</a></div><div class="ttdeci">const DefsList * getBlockDefs(const BasicBlock *BB) const</div><div class="ttdoc">Return the list of MemoryDef's and MemoryPhi's for a given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00765">MemorySSA.h:765</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_a055daa2efd196d7b72c0f2d36019854e"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a055daa2efd196d7b72c0f2d36019854e">llvm::MemoryPhi::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned I, MemoryAccess *V)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00531">MemorySSA.h:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a9773fde54683945b9e34a0f2e5c1a5a5a542e7b754a1b868794fa2f47256a1d97"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5a542e7b754a1b868794fa2f47256a1d97">llvm::MemorySSA::End</a></div><div class="ttdeci">@ End</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00788">MemorySSA.h:788</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html">llvm::MemoryAccess</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00142">MemorySSA.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, 4, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_aeb3964d6e7884c21d8118699062c91df"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#aeb3964d6e7884c21d8118699062c91df">llvm::MemorySSAUpdater::updateExitBlocksForClonedLoop</a></div><div class="ttdeci">void updateExitBlocksForClonedLoop(ArrayRef&lt; BasicBlock * &gt; ExitBlocks, const ValueToValueMapTy &amp;VMap, DominatorTree &amp;DT)</div><div class="ttdoc">Update phi nodes in exit block successors following cloning.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00787">MemorySSAUpdater.cpp:787</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a96bda22e654a59fec0620767b56dd53f"><div class="ttname"><a href="classllvm_1_1SetVector.html#a96bda22e654a59fec0620767b56dd53f">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Completely clear the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00213">SetVector.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_af58e16a1d7ebc8f202ae2f8037b42df6"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#af58e16a1d7ebc8f202ae2f8037b42df6">llvm::MemorySSAUpdater::moveBefore</a></div><div class="ttdeci">void moveBefore(MemoryUseOrDef *What, MemoryUseOrDef *Where)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01191">MemorySSAUpdater.cpp:1191</a></div></div>
<div class="ttc" id="aAArch64MIPeepholeOpt_8cpp_html_a96d5dc120196819fbfbc257cba09b2aa"><div class="ttname"><a href="AArch64MIPeepholeOpt_8cpp.html#a96d5dc120196819fbfbc257cba09b2aa">Insn</a></div><div class="ttdeci">SmallVector&lt; AArch64_IMM::ImmInsnModel, 4 &gt; Insn</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MIPeepholeOpt_8cpp_source.html#l00129">AArch64MIPeepholeOpt.cpp:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUseOrDef_html_abc4e1b6cc483cfd57ca75c4ab92bd360"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">llvm::MemoryUseOrDef::getDefiningAccess</a></div><div class="ttdeci">MemoryAccess * getDefiningAccess() const</div><div class="ttdoc">Get the access that produces the memory state used by this Use.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00262">MemorySSA.h:262</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1eb5609345b906d024fbf9e4bc1adc06add2496ae8d635f9f169602771c88d376"><div class="ttname"><a href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06add2496ae8d635f9f169602771c88d376">llvm::Successor</a></div><div class="ttdeci">@ Successor</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00035">SIMachineScheduler.h:35</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_aab36927882fbfdcbb860d87fd9c30da8"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00151">ArrayRef.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ae6b63bcaa1f6638b608f911cd04341e2"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ae6b63bcaa1f6638b608f911cd04341e2">llvm::MemorySSAUpdater::wireOldPredecessorsToNewImmediatePredecessor</a></div><div class="ttdeci">void wireOldPredecessorsToNewImmediatePredecessor(BasicBlock *Old, BasicBlock *New, ArrayRef&lt; BasicBlock * &gt; Preds, bool IdenticalEdgesWereMerged=true)</div><div class="ttdoc">A new empty BasicBlock (New) now branches directly to Old.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01268">MemorySSAUpdater.cpp:1268</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ae11d36d6d1f06cdf18a0333eab22f381"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ae11d36d6d1f06cdf18a0333eab22f381">llvm::MemorySSAUpdater::moveAllAfterMergeBlocks</a></div><div class="ttdeci">void moveAllAfterMergeBlocks(BasicBlock *From, BasicBlock *To, Instruction *Start)</div><div class="ttdoc">From block was merged into To.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01258">MemorySSAUpdater.cpp:1258</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a3d95cc2d359b8d9ed5bd9504b44930b5"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">llvm::DenseMapBase::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00099">DenseMap.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a21c2c6ae5ec23004dc4020eacf83bbce"><div class="ttname"><a href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of elements of a given key in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00208">SetVector.h:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_ae20e35b50e6cf67987421c996cf14a8c"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c">llvm::MemorySSA::removeFromLists</a></div><div class="ttdeci">void removeFromLists(MemoryAccess *, bool ShouldDelete=true)</div><div class="ttdoc">Properly remove MA from all of MemorySSA's lists.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01827">MemorySSA.cpp:1827</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a2ec50ab2c78eff965caf3da71cd08be4"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a2ec50ab2c78eff965caf3da71cd08be4">llvm::DominatorTree::findNearestCommonDominator</a></div><div class="ttdeci">Instruction * findNearestCommonDominator(Instruction *I1, Instruction *I2) const</div><div class="ttdoc">Find the nearest instruction I that dominates both I1 and I2, in the sense that a result produced bef...</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00358">Dominators.cpp:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUseOrDef_html"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html">llvm::MemoryUseOrDef</a></div><div class="ttdoc">Class that has the common methods + fields of memory uses/defs.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00252">MemorySSA.h:252</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a0e0d4848f799861d016ae63c8fdc41e3">Same</a></div><div class="ttdeci">@ Same</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00065">TargetLibraryInfo.cpp:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a2bfd991f2f853a9a689ac782f7030406"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">llvm::MemorySSA::getWritableBlockAccesses</a></div><div class="ttdeci">AccessList * getWritableBlockAccesses(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00810">MemorySSA.h:810</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="aIteratedDominanceFrontier_8h_html"><div class="ttname"><a href="IteratedDominanceFrontier_8h.html">IteratedDominanceFrontier.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_affac0dc3d407ef3dee29b8bc9a4836bc"><div class="ttname"><a href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdoc">Get an iterator to the end of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00092">SetVector.h:92</a></div></div>
<div class="ttc" id="aMemorySSA_8h_html"><div class="ttname"><a href="MemorySSA_8h.html">MemorySSA.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryPhi_html_a3fe86b8ea61d65a5f819f61099cf9702"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a3fe86b8ea61d65a5f819f61099cf9702">llvm::MemoryPhi::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00514">MemorySSA.h:514</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_a9ed194b42c5b8ba68764c26760c9ddfe"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#a9ed194b42c5b8ba68764c26760c9ddfe">llvm::simple_ilist::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00119">simple_ilist.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html_a6141f01c038a2c06c7b2e8f434aa81b6"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#a6141f01c038a2c06c7b2e8f434aa81b6">llvm::MemoryAccess::getDefsIterator</a></div><div class="ttdeci">DefsOnlyType::self_iterator getDefsIterator()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00195">MemorySSA.h:195</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00234">User.h:234</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html"><div class="ttname"><a href="classllvm_1_1simple__ilist.html">llvm::simple_ilist</a></div><div class="ttdoc">A simple intrusive list implementation.</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00078">simple_ilist.h:78</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a2f63e339cd88f5a8e97a8150ea9129d2af29ddbfb905eb2593fdcdfb243f9af85"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a2f63e339cd88f5a8e97a8150ea9129d2af29ddbfb905eb2593fdcdfb243f9af85">llvm::logicalview::LVComparePass::Added</a></div><div class="ttdeci">@ Added</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae6d1c31d74bbaaa9e42bcbdc10a499f2"><div class="ttname"><a href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">llvm::pred_size</a></div><div class="ttdeci">unsigned pred_size(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAContext_8h_source.html#l00032">MachineSSAContext.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8cpp_html_ae6cd1f0116b95e785f8c3994a487999e"><div class="ttname"><a href="MemorySSAUpdater_8cpp.html#ae6cd1f0116b95e785f8c3994a487999e">setMemoryPhiValueForBlock</a></div><div class="ttdeci">static void setMemoryPhiValueForBlock(MemoryPhi *MP, const BasicBlock *BB, MemoryAccess *NewDef)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00285">MemorySSAUpdater.cpp:285</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7e8dad1701aa6445be4a29f654b0473c"><div class="ttname"><a href="classllvm_1_1Value.html#a7e8dad1701aa6445be4a29f654b0473c">llvm::Value::replaceUsesWithIf</a></div><div class="ttdeci">void replaceUsesWithIf(Value *New, llvm::function_ref&lt; bool(Use &amp;U)&gt; ShouldReplace)</div><div class="ttdoc">Go through the uses list for this definition and make each use point to &quot;V&quot; if the callback ShouldRep...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00540">Value.cpp:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a15f92579a5fc316dab8cd1fad51015ef"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">llvm::ValueMap::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00164">ValueMap.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_a7f4bd492b552181942252ccddc0db26e"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#a7f4bd492b552181942252ccddc0db26e">llvm::simple_ilist::insert</a></div><div class="ttdeci">iterator insert(iterator I, reference Node)</div><div class="ttdoc">Insert a node by reference; never copies.</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00157">simple_ilist.h:157</a></div></div>
<div class="ttc" id="aBlockVerifier_8cpp_html_ae45c7d73c0ff5d177b59153ffae77f84"><div class="ttname"><a href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a></div><div class="ttdeci">BlockVerifier::State From</div><div class="ttdef"><b>Definition:</b> <a href="BlockVerifier_8cpp_source.html#l00055">BlockVerifier.cpp:55</a></div></div>
<div class="ttc" id="aSink_8cpp_html_a7a59feca56f2ecfe5c74d6c04b0c45c7"><div class="ttname"><a href="Sink_8cpp.html#a7a59feca56f2ecfe5c74d6c04b0c45c7">ProcessBlock</a></div><div class="ttdeci">static bool ProcessBlock(BasicBlock &amp;BB, DominatorTree &amp;DT, LoopInfo &amp;LI, AAResults &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="Sink_8cpp_source.html#l00175">Sink.cpp:175</a></div></div>
<div class="ttc" id="alib_2Target_2WebAssembly_2README_8txt_html_a79ea041233b5866026c3071dfc464ec0"><div class="ttname"><a href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">copy</a></div><div class="ttdeci">we should consider alternate ways to model stack dependencies Lots of things could be done in WebAssemblyTargetTransformInfo cpp there are numerous optimization related hooks that can be overridden in WebAssemblyTargetLowering Instead of the OptimizeReturned which should consider preserving the returned attribute through to MachineInstrs and extending the MemIntrinsicResults pass to do this optimization on calls too That would also let the WebAssemblyPeephole pass clean up dead defs for such as it does for stores Consider implementing and or getMachineCombinerPatterns Find a clean way to fix the problem which leads to the Shrink Wrapping pass being run after the WebAssembly PEI pass When setting multiple variables to the same we currently get code like const It could be done with a smaller encoding like local tee $pop5 local copy</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2WebAssembly_2README_8txt_source.html#l00101">README.txt:101</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a7ca5197533a9c1fb8a2bd30587fcec6b"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00152">ArrayRef.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_abcf78af37d56a9b72a49c65428210758"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">llvm::MemorySSAUpdater::removeMemoryAccess</a></div><div class="ttdeci">void removeMemoryAccess(MemoryAccess *, bool OptimizePhis=false)</div><div class="ttdoc">Remove a MemoryAccess from MemorySSA, including updating all definitions and uses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01305">MemorySSAUpdater.cpp:1305</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a71c91cbbfc1c0ecf9a69e10ccf739bd7"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">llvm::DominatorTreeBase::Delete</a></div><div class="ttdeci">static constexpr UpdateKind Delete</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00259">GenericDomTree.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00236">User.h:236</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:49:30 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

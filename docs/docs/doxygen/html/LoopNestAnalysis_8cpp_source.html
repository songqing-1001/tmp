<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/LoopNestAnalysis.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopNestAnalysis.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopNestAnalysis_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopNestAnalysis.cpp - Loop Nest Analysis --------------------------==//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// The implementation for the loop nest analysis.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopNestAnalysis_8h.html">llvm/Analysis/LoopNestAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BreadthFirstIterator_8h.html">llvm/ADT/BreadthFirstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="LoopNestAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   21</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loopnest&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">   23</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a> = <a class="code" href="LoopNestAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a> <span class="stringliteral">&quot;-verbose&quot;</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/// Determine whether the loops structure violates basic requirements for</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// perfect nesting:</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">///  - the inner loop should be the outer loop&#39;s only child</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">///  - the outer loop header should &#39;flow&#39; into the inner loop preheader</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">///    or jump around the inner loop to the outer loop latch</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">///  - if the inner loop latch exits the inner loop, it should &#39;flow&#39; into</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">///    the outer loop latch.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/// Returns true if the loop structure satisfies the basic requirements and</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// false otherwise.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopNestAnalysis_8cpp.html#aa476d5315e502f74f064165e49a3ff9b">checkLoopsStructure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OuterLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;InnerLoop,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// LoopNest implementation</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#aa80b31035ddca93f1c59789d3c8af1d4">   42</a></span>&#160;<a class="code" href="classllvm_1_1LoopNest.html#a432b4455d6653676c5cd49ffb464b7dd">LoopNest::LoopNest</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;Root, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    : MaxPerfectDepth(getMaxPerfectDepth(Root, SE)) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(<a class="code" href="classllvm_1_1LoopNest.html#a3085b412e1547510b6891a60494b1d14">Loops</a>, <a class="code" href="namespacellvm.html#afcd24f998b3e45ec44ec597ee4197d87">breadth_first</a>(&amp;Root));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#a9f905da3130336a4fddcd7a7d3360bfd">   47</a></span>&#160;std::unique_ptr&lt;LoopNest&gt; <a class="code" href="classllvm_1_1LoopNest.html#a9f905da3130336a4fddcd7a7d3360bfd">LoopNest::getLoopNest</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;Root,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                                <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">return</span> std::make_unique&lt;LoopNest&gt;(Root, SE);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="LoopNestAnalysis_8cpp.html#a1c4d5fb1666ee6c06e64b8853e81642b">   52</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *<a class="code" href="LoopNestAnalysis_8cpp.html#a1c4d5fb1666ee6c06e64b8853e81642b">getOuterLoopLatchCmp</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OuterLoop) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch &amp;&amp; <span class="stringliteral">&quot;Expecting a valid loop latch&quot;</span>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI &amp;&amp; BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;         <span class="stringliteral">&quot;Expecting loop latch terminator to be a branch instruction&quot;</span>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *OuterLoopLatchCmp = dyn_cast&lt;CmpInst&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a>, <span class="keywordflow">if</span> (OuterLoopLatchCmp) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Outer loop latch compare instruction: &quot;</span> &lt;&lt; *OuterLoopLatchCmp</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      });</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> OuterLoopLatchCmp;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="LoopNestAnalysis_8cpp.html#a3293db089547b3b22fc0de67bc903032">   70</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *<a class="code" href="LoopNestAnalysis_8cpp.html#a3293db089547b3b22fc0de67bc903032">getInnerLoopGuardCmp</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;InnerLoop) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *InnerGuard = InnerLoop.<a class="code" href="classllvm_1_1Loop.html#a580a6361a2bad87e6071ecc795bdae96">getLoopGuardBranch</a>();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *InnerLoopGuardCmp =</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      (InnerGuard) ? dyn_cast&lt;CmpInst&gt;(InnerGuard-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a>, <span class="keywordflow">if</span> (InnerLoopGuardCmp) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inner loop guard compare instruction: &quot;</span> &lt;&lt; *InnerLoopGuardCmp</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      });</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> InnerLoopGuardCmp;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="LoopNestAnalysis_8cpp.html#a6a54f3aff376f5f286501361749fea29">   84</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopNestAnalysis_8cpp.html#a6a54f3aff376f5f286501361749fea29">checkSafeInstruction</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *InnerLoopGuardCmp,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *OuterLoopLatchCmp,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                 std::optional&lt;Loop::LoopBounds&gt; OuterLoopLB) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">bool</span> IsAllowed =</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;BranchInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (!IsAllowed)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// The only binary instruction allowed is the outer loop step instruction,</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// the only comparison instructions allowed are the inner loop guard</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// compare instruction and the outer loop latch compare instruction.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">if</span> ((isa&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != &amp;OuterLoopLB-&gt;getStepInst()) ||</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      (isa&lt;CmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != OuterLoopLatchCmp &amp;&amp; &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != InnerLoopGuardCmp)) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#a67c21f16b8b65879632a1d332e79d253">  103</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoopNest.html#a67c21f16b8b65879632a1d332e79d253">LoopNest::arePerfectlyNested</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OuterLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;InnerLoop,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> (analyzeLoopNestForPerfectNest(OuterLoop, InnerLoop, SE) ==</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          PerfectLoopNest);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;LoopNest::LoopNestEnum LoopNest::analyzeLoopNestForPerfectNest(</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OuterLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;InnerLoop, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() &amp;&amp; <span class="stringliteral">&quot;Outer loop should have subloops&quot;</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#a0fa33dfd6ffaaae721fc05b6941263aa">isOutermost</a>() &amp;&amp; <span class="stringliteral">&quot;Inner loop should have a parent&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking whether loop &#39;&quot;</span> &lt;&lt; OuterLoop.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>()</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&#39; and &#39;&quot;</span> &lt;&lt; InnerLoop.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>()</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&#39; are perfectly nested.\n&quot;</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// Determine whether the loops structure satisfies the following requirements:</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">//  - the inner loop should be the outer loop&#39;s only child</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">//  - the outer loop header should &#39;flow&#39; into the inner loop preheader</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">//    or jump around the inner loop to the outer loop latch</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">//  - if the inner loop latch exits the inner loop, it should &#39;flow&#39; into</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">//    the outer loop latch.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopNestAnalysis_8cpp.html#aa476d5315e502f74f064165e49a3ff9b">checkLoopsStructure</a>(OuterLoop, InnerLoop, SE)) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not perfectly nested: invalid loop structure.\n&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> InvalidLoopStructure;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// Bail out if we cannot retrieve the outer loop bounds.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">auto</span> OuterLoopLB = OuterLoop.<a class="code" href="classllvm_1_1Loop.html#a096b15bbaad7c5f24d29b0592339b9e8">getBounds</a>(SE);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span> (OuterLoopLB == std::nullopt) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cannot compute loop bounds of OuterLoop: &quot;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                      &lt;&lt; OuterLoop &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> OuterLoopLowerBoundUnknown;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *OuterLoopLatchCmp = <a class="code" href="LoopNestAnalysis_8cpp.html#a1c4d5fb1666ee6c06e64b8853e81642b">getOuterLoopLatchCmp</a>(OuterLoop);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *InnerLoopGuardCmp = <a class="code" href="LoopNestAnalysis_8cpp.html#a3293db089547b3b22fc0de67bc903032">getInnerLoopGuardCmp</a>(InnerLoop);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// Determine whether instructions in a basic block are one of:</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">//  - the inner loop guard comparison</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">//  - the outer loop latch comparison</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">//  - the outer loop induction variable increment</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">//  - a phi node, a cast or a branch</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keyword">auto</span> containsOnlySafeInstructions = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordtype">bool</span> IsSafeInstr = <a class="code" href="LoopNestAnalysis_8cpp.html#a6a54f3aff376f5f286501361749fea29">checkSafeInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InnerLoopGuardCmp,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                              OuterLoopLatchCmp, OuterLoopLB);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> (IsSafeInstr) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(<a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a>, {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Instruction: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\nin basic block:&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;is unsafe.\n&quot;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        });</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">return</span> IsSafeInstr;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    });</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  };</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// Check the code surrounding the inner loop for instructions that are deemed</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// unsafe.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterLoopHeader = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterLoopLatch = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLoopPreHeader = InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (!containsOnlySafeInstructions(*OuterLoopHeader) ||</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      !containsOnlySafeInstructions(*OuterLoopLatch) ||</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      (InnerLoopPreHeader != OuterLoopHeader &amp;&amp;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;       !containsOnlySafeInstructions(*InnerLoopPreHeader)) ||</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      !containsOnlySafeInstructions(*InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>())) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not perfectly nested: code surrounding inner loop is &quot;</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                         <span class="stringliteral">&quot;unsafe\n&quot;</span>;);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> ImperfectLoopNest;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop &#39;&quot;</span> &lt;&lt; OuterLoop.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; and &#39;&quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    &lt;&lt; InnerLoop.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; are perfectly nested.\n&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> PerfectLoopNest;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#a797a9f600b2119356e4ea74cdc6ba25a">  181</a></span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">LoopNest::InstrVectorTy</a> <a class="code" href="classllvm_1_1LoopNest.html#a797a9f600b2119356e4ea74cdc6ba25a">LoopNest::getInterveningInstructions</a>(</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OuterLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;InnerLoop, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">InstrVectorTy</a> Instr;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">switch</span> (analyzeLoopNestForPerfectNest(OuterLoop, InnerLoop, SE)) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">case</span> PerfectLoopNest:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;The loop Nest is Perfect, returning empty &quot;</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                         <span class="stringliteral">&quot;instruction vector. \n&quot;</span>;);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> Instr;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">case</span> InvalidLoopStructure:</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not perfectly nested: invalid loop structure. &quot;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                         <span class="stringliteral">&quot;Instruction vector is empty.\n&quot;</span>;);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> Instr;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">case</span> OuterLoopLowerBoundUnknown:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cannot compute loop bounds of OuterLoop: &quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                      &lt;&lt; OuterLoop &lt;&lt; <span class="stringliteral">&quot;\nInstruction vector is empty.\n&quot;</span>;);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> Instr;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">case</span> ImperfectLoopNest:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// Identify the outer loop latch comparison instruction.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">auto</span> OuterLoopLB = OuterLoop.<a class="code" href="classllvm_1_1Loop.html#a096b15bbaad7c5f24d29b0592339b9e8">getBounds</a>(SE);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *OuterLoopLatchCmp = <a class="code" href="LoopNestAnalysis_8cpp.html#a1c4d5fb1666ee6c06e64b8853e81642b">getOuterLoopLatchCmp</a>(OuterLoop);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *InnerLoopGuardCmp = <a class="code" href="LoopNestAnalysis_8cpp.html#a3293db089547b3b22fc0de67bc903032">getInnerLoopGuardCmp</a>(InnerLoop);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keyword">auto</span> GetUnsafeInstructions = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="LoopNestAnalysis_8cpp.html#a6a54f3aff376f5f286501361749fea29">checkSafeInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InnerLoopGuardCmp, OuterLoopLatchCmp,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                OuterLoopLB)) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        Instr.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(<a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a>, {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Instruction: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\nin basic block:&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;is unsafe.\n&quot;</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        });</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  };</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// Check the code surrounding the inner loop for instructions that are deemed</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// unsafe.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterLoopHeader = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterLoopLatch = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLoopPreHeader = InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLoopExitBlock = InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  GetUnsafeInstructions(*OuterLoopHeader);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  GetUnsafeInstructions(*OuterLoopLatch);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  GetUnsafeInstructions(*InnerLoopExitBlock);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (InnerLoopPreHeader != OuterLoopHeader) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    GetUnsafeInstructions(*InnerLoopPreHeader);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">return</span> Instr;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoopVectorTy, 4&gt;</a></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#a57dd4a8d48a825207a80611dfef6d45e">  241</a></span>&#160;<a class="code" href="classllvm_1_1LoopNest.html#a57dd4a8d48a825207a80611dfef6d45e">LoopNest::getPerfectLoops</a>(<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoopVectorTy, 4&gt;</a> LV;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">LoopVectorTy</a> PerfectNest;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L : <a class="code" href="namespacellvm.html#add49d9f7abebe402adf1a57c762abeef">depth_first</a>(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Loop.html">Loop</a> *<span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1LoopNest.html#a3085b412e1547510b6891a60494b1d14">Loops</a>.front()))) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (PerfectNest.empty())</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      PerfectNest.push_back(L);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keyword">auto</span> &amp;SubLoops = L-&gt;getSubLoops();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (SubLoops.size() == 1 &amp;&amp; <a class="code" href="classllvm_1_1LoopNest.html#a67c21f16b8b65879632a1d332e79d253">arePerfectlyNested</a>(*L, *SubLoops.front(), SE)) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      PerfectNest.push_back(SubLoops.front());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      LV.push_back(PerfectNest);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      PerfectNest.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">return</span> LV;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#ad2c7f512c7735232319f74e85a4263e2">  261</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1LoopNest.html#acbe3cef3fd28531e0c1e5ae0980e916f">LoopNest::getMaxPerfectDepth</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;Root, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Get maximum perfect depth of loop nest rooted by loop &#39;&quot;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    &lt;&lt; Root.<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurrentLoop = &amp;Root;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *SubLoops = &amp;CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a47bb4b8ffdd881717123e9b244a10b12">getSubLoops</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">unsigned</span> CurrentDepth = 1;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">while</span> (SubLoops-&gt;size() == 1) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *InnerLoop = SubLoops-&gt;front();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1LoopNest.html#a67c21f16b8b65879632a1d332e79d253">arePerfectlyNested</a>(*CurrentLoop, *InnerLoop, SE)) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not a perfect nest: loop &#39;&quot;</span> &lt;&lt; CurrentLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>()</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;&#39; is not perfectly nested with loop &#39;&quot;</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;               &lt;&lt; InnerLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      });</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    CurrentLoop = InnerLoop;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    SubLoops = &amp;CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a47bb4b8ffdd881717123e9b244a10b12">getSubLoops</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    ++CurrentDepth;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">return</span> CurrentDepth;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">  288</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">LoopNest::skipEmptyBlockUntil</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *End,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                                <span class="keywordtype">bool</span> CheckUniquePred) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a> &amp;&amp; <span class="stringliteral">&quot;Expecting valid From&quot;</span>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(End &amp;&amp; <span class="stringliteral">&quot;Expecting valid End&quot;</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a> == End || !<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>-&gt;getUniqueSuccessor())</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keyword">auto</span> IsEmpty = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;size() == 1);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  };</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// Visited is used to avoid running into an infinite loop.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const BasicBlock *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>-&gt;getUniqueSuccessor();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != End &amp;&amp; IsEmpty(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; !Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;         (!CheckUniquePred || <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getUniquePredecessor())) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    PredBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getUniqueSuccessor();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == End) ? *End : *PredBB;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="LoopNestAnalysis_8cpp.html#aa476d5315e502f74f064165e49a3ff9b">  315</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopNestAnalysis_8cpp.html#aa476d5315e502f74f064165e49a3ff9b">checkLoopsStructure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OuterLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;InnerLoop,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// The inner loop must be the only outer loop&#39;s child.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> ((OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a47bb4b8ffdd881717123e9b244a10b12">getSubLoops</a>().size() != 1) ||</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      (InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>() != &amp;OuterLoop))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// We expect loops in normal form which have a preheader, header, latch...</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (!OuterLoop.<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>() || !InnerLoop.<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>())</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterLoopHeader = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterLoopLatch = OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLoopPreHeader = InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLoopLatch = InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLoopExit = InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// We expect rotated loops. The inner loop should have a single exit block.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (OuterLoop.<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>() != OuterLoopLatch ||</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>() != InnerLoopLatch || !InnerLoopExit)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// Returns whether the block `ExitBlock` contains at least one LCSSA Phi node.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">auto</span> ContainsLCSSAPhi = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;ExitBlock) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(ExitBlock.phis(), [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      return PN.getNumIncomingValues() == 1;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    });</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  };</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// Returns whether the block `BB` qualifies for being an extra Phi block. The</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// extra Phi block is the additional block inserted after the exit block of an</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// &quot;guarded&quot; inner loop which contains &quot;only&quot; Phi nodes corresponding to the</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// LCSSA Phi nodes in the exit block.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keyword">auto</span> IsExtraPhiBlock = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getFirstNonPHI() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator() &amp;&amp;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;           <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.phis(), [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;             return all_of(PN.blocks(), [&amp;](const BasicBlock *IncomingBlock) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;               return IncomingBlock == InnerLoopExit ||</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                      IncomingBlock == OuterLoopHeader;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;             });</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;           });</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  };</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExtraPhiBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// Ensure the only branch that may exist between the loops is the inner loop</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// guard.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (OuterLoopHeader != InnerLoopPreHeader) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;SingleSucc =</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">LoopNest::skipEmptyBlockUntil</a>(OuterLoopHeader, InnerLoopPreHeader);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// no conditional branch present</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (&amp;SingleSucc != InnerLoopPreHeader) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(SingleSucc.<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">if</span> (!BI || BI != InnerLoop.<a class="code" href="classllvm_1_1Loop.html#a580a6361a2bad87e6071ecc795bdae96">getLoopGuardBranch</a>())</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordtype">bool</span> InnerLoopExitContainsLCSSA = ContainsLCSSAPhi(*InnerLoopExit);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// The successors of the inner loop guard should be the inner loop</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">// preheader or the outer loop latch possibly through empty blocks.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad37b3ffc4c5f3cbe9248d587a2efb850">successors</a>()) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PotentialInnerPreHeader = Succ;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PotentialOuterLatch = Succ;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="comment">// Ensure the inner loop guard successor is empty before skipping</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// blocks.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span> (Succ-&gt;size() == 1) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          PotentialInnerPreHeader =</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;              &amp;<a class="code" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">LoopNest::skipEmptyBlockUntil</a>(Succ, InnerLoopPreHeader);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          PotentialOuterLatch =</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;              &amp;<a class="code" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">LoopNest::skipEmptyBlockUntil</a>(Succ, OuterLoopLatch);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> (PotentialInnerPreHeader == InnerLoopPreHeader)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span> (PotentialOuterLatch == OuterLoopLatch)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="comment">// If `InnerLoopExit` contains LCSSA Phi instructions, additional block</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment">// may be inserted before the `OuterLoopLatch` to which `BI` jumps. The</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="comment">// loops are still considered perfectly nested if the extra block only</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">// contains Phi instructions from InnerLoopExit and OuterLoopHeader.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> (InnerLoopExitContainsLCSSA &amp;&amp; IsExtraPhiBlock(*Succ) &amp;&amp;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            Succ-&gt;getSingleSuccessor() == OuterLoopLatch) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          <span class="comment">// Points to the extra block so that we can reference it later in the</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;          <span class="comment">// final check. We can also conclude that the inner loop is</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;          <span class="comment">// guarded and there exists LCSSA Phi node in the exit block later if</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          <span class="comment">// we see a non-null `ExtraPhiBlock`.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          ExtraPhiBlock = Succ;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(<a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a>, {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inner loop guard successor &quot;</span> &lt;&lt; Succ-&gt;getName()</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; doesn&#39;t lead to inner loop preheader or &quot;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    <span class="stringliteral">&quot;outer loop latch.\n&quot;</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        });</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// Ensure the inner loop exit block lead to the outer loop latch possibly</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// through empty blocks.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> ((!ExtraPhiBlock ||</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;       &amp;<a class="code" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">LoopNest::skipEmptyBlockUntil</a>(InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>(),</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                      ExtraPhiBlock) != ExtraPhiBlock) &amp;&amp;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      (&amp;<a class="code" href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">LoopNest::skipEmptyBlockUntil</a>(InnerLoop.<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>(),</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                      OuterLoopLatch) != OuterLoopLatch)) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inner loop exit block &quot;</span> &lt;&lt; *InnerLoopExit</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; does not directly lead to the outer loop latch.\n&quot;</span>;);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">LoopNestAnalysis::Key</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="namespacellvm.html#a6a1c647f91f86b7bfea85c0cee90de91">  437</a></span>&#160;<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a> &amp;LN) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;IsPerfect=&quot;</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (LN.<a class="code" href="classllvm_1_1LoopNest.html#ad2c7f512c7735232319f74e85a4263e2">getMaxPerfectDepth</a>() == LN.<a class="code" href="classllvm_1_1LoopNest.html#a2e412f8b916b22399f515ff64bfb6705">getNestDepth</a>())</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;true&quot;</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;, Depth=&quot;</span> &lt;&lt; LN.<a class="code" href="classllvm_1_1LoopNest.html#a2e412f8b916b22399f515ff64bfb6705">getNestDepth</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;, OutermostLoop: &quot;</span> &lt;&lt; LN.<a class="code" href="classllvm_1_1LoopNest.html#ac9a27bb5250b3aadddc4696c07678dd0">getOutermostLoop</a>().<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;, Loops: ( &quot;</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L : LN.<a class="code" href="classllvm_1_1LoopNest.html#a76910b27c22c1ec00680bc5362806678">getLoops</a>())</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; L-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">// LoopNestPrinterPass implementation</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopNestPrinterPass.html#aaf9544eaca7fe1e7b473639f38a3b094">  457</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">LoopNestPrinterPass::run</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                           <a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR,</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                           <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;U) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> LN = <a class="code" href="classllvm_1_1LoopNest.html#a9f905da3130336a4fddcd7a7d3360bfd">LoopNest::getLoopNest</a>(L, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">SE</a>))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    OS &lt;&lt; *LN &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8cpp_html_ab3595005ef7c117f30d4c18201190bbb"><div class="ttname"><a href="LoopNestAnalysis_8cpp.html#ab3595005ef7c117f30d4c18201190bbb">VerboseDebug</a></div><div class="ttdeci">static const char * VerboseDebug</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00023">LoopNestAnalysis.cpp:23</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad37b3ffc4c5f3cbe9248d587a2efb850"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad37b3ffc4c5f3cbe9248d587a2efb850">llvm::BranchInst::successors</a></div><div class="ttdeci">iterator_range&lt; succ_op_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03249">Instructions.h:3249</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ab48af53a5000ecede46c76dabb4578d2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">llvm::LoopBase::getExitBlock</a></div><div class="ttdeci">BlockT * getExitBlock() const</div><div class="ttdoc">If getExitBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00107">LoopInfoImpl.h:107</a></div></div>
<div class="ttc" id="aBreadthFirstIterator_8h_html"><div class="ttname"><a href="BreadthFirstIterator_8h.html">BreadthFirstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a67c21f16b8b65879632a1d332e79d253"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a67c21f16b8b65879632a1d332e79d253">llvm::LoopNest::arePerfectlyNested</a></div><div class="ttdeci">static bool arePerfectlyNested(const Loop &amp;OuterLoop, const Loop &amp;InnerLoop, ScalarEvolution &amp;SE)</div><div class="ttdoc">Return true if the given loops OuterLoop and InnerLoop are perfectly nested with respect to each othe...</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00103">LoopNestAnalysis.cpp:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a580a6361a2bad87e6071ecc795bdae96"><div class="ttname"><a href="classllvm_1_1Loop.html#a580a6361a2bad87e6071ecc795bdae96">llvm::Loop::getLoopGuardBranch</a></div><div class="ttdeci">BranchInst * getLoopGuardBranch() const</div><div class="ttdoc">Return the loop guard branch, if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00367">LoopInfo.cpp:367</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html">llvm::LoopStandardAnalysisResults</a></div><div class="ttdoc">The adaptor from a function pass to a loop pass computes these analyses and makes them available to t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00051">LoopAnalysisManager.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; const BasicBlock *, 4 &gt;</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aDepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a096b15bbaad7c5f24d29b0592339b9e8"><div class="ttname"><a href="classllvm_1_1Loop.html#a096b15bbaad7c5f24d29b0592339b9e8">llvm::Loop::getBounds</a></div><div class="ttdeci">std::optional&lt; LoopBounds &gt; getBounds(ScalarEvolution &amp;SE) const</div><div class="ttdoc">Return the struct LoopBounds collected if all struct members are found, else std::nullopt.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00287">LoopInfo.cpp:287</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a62733c3335a87750623dbfc5b3ae4f6c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const</div><div class="ttdoc">Return the parent loop if it exists or nullptr for top level loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00114">LoopInfo.h:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a47bb4b8ffdd881717123e9b244a10b12"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a47bb4b8ffdd881717123e9b244a10b12">llvm::LoopBase::getSubLoops</a></div><div class="ttdeci">const std::vector&lt; LoopT * &gt; &amp; getSubLoops() const</div><div class="ttdoc">Return the loops contained entirely within this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00160">LoopInfo.h:160</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aDebug_8h_html_a0e760853102aabaceef5ef82347c593c"><div class="ttname"><a href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a></div><div class="ttdeci">#define DEBUG_WITH_TYPE(TYPE, X)</div><div class="ttdoc">DEBUG_WITH_TYPE macro - This macro should be used by passes to emit debug information.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00064">Debug.h:64</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1PALMD_html_af892c75285b0f64d58ca76cb73059adf"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">llvm::AMDGPU::PALMD::Key</a></div><div class="ttdeci">Key</div><div class="ttdoc">PAL metadata keys.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00486">AMDGPUMetadata.h:486</a></div></div>
<div class="ttc" id="anamespacellvm_html_afcd24f998b3e45ec44ec597ee4197d87"><div class="ttname"><a href="namespacellvm.html#afcd24f998b3e45ec44ec597ee4197d87">llvm::breadth_first</a></div><div class="ttdeci">iterator_range&lt; bf_iterator&lt; T &gt; &gt; breadth_first(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="BreadthFirstIterator_8h_source.html#l00157">BreadthFirstIterator.h:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5ee0a415cf089775fd277550b257f74e"><div class="ttname"><a href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APFixedPoint &amp;FX)</div><div class="ttdef"><b>Definition:</b> <a href="APFixedPoint_8h_source.html#l00292">APFixedPoint.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_adf6f53d7652b471c995b7d10f3dd2729"><div class="ttname"><a href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const</div><div class="ttdoc">If getExitingBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00048">LoopInfoImpl.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a917a64b00c1745fd0c78c2b2320cd4ad"><div class="ttname"><a href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">llvm::Loop::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00891">LoopInfo.h:891</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8cpp_html_aa476d5315e502f74f064165e49a3ff9b"><div class="ttname"><a href="LoopNestAnalysis_8cpp.html#aa476d5315e502f74f064165e49a3ff9b">checkLoopsStructure</a></div><div class="ttdeci">static bool checkLoopsStructure(const Loop &amp;OuterLoop, const Loop &amp;InnerLoop, ScalarEvolution &amp;SE)</div><div class="ttdoc">Determine whether the loops structure violates basic requirements for perfect nesting:</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00315">LoopNestAnalysis.cpp:315</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dxil_1_1PointerTypeAnalysis_html_ae574a4c1d84b9e67bc94489f356805b4"><div class="ttname"><a href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">llvm::dxil::PointerTypeAnalysis::run</a></div><div class="ttdeci">PointerTypeMap run(const Module &amp;M)</div><div class="ttdoc">Compute the PointerTypeMap for the module M.</div><div class="ttdef"><b>Definition:</b> <a href="PointerTypeAnalysis_8cpp_source.html#l00189">PointerTypeAnalysis.cpp:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">This class is the base class for the comparison instructions.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00708">InstrTypes.h:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ac233a2693163ed58305215ca2f6921e3"><div class="ttname"><a href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">llvm::Loop::isLoopSimplifyForm</a></div><div class="ttdeci">bool isLoopSimplifyForm() const</div><div class="ttdoc">Return true if the Loop is in the form that the LoopSimplify form transforms loops to,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00479">LoopInfo.cpp:479</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html">llvm::LPMUpdater</a></div><div class="ttdoc">This class provides an interface for updating the loop pass manager based on mutations to the loop ne...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00262">LoopPassManager.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a0c3d91a5a6e71c114dea21819cc71382"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a0c3d91a5a6e71c114dea21819cc71382">llvm::LoopNest::skipEmptyBlockUntil</a></div><div class="ttdeci">static const BasicBlock &amp; skipEmptyBlockUntil(const BasicBlock *From, const BasicBlock *End, bool CheckUniquePred=false)</div><div class="ttdoc">Recursivelly traverse all empty 'single successor' basic blocks of From (if there are any).</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00288">LoopNestAnalysis.cpp:288</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00069">PassManager.h:69</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8cpp_html_a1c4d5fb1666ee6c06e64b8853e81642b"><div class="ttname"><a href="LoopNestAnalysis_8cpp.html#a1c4d5fb1666ee6c06e64b8853e81642b">getOuterLoopLatchCmp</a></div><div class="ttdeci">static CmpInst * getOuterLoopLatchCmp(const Loop &amp;OuterLoop)</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00052">LoopNestAnalysis.cpp:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_ad2c7f512c7735232319f74e85a4263e2"><div class="ttname"><a href="classllvm_1_1LoopNest.html#ad2c7f512c7735232319f74e85a4263e2">llvm::LoopNest::getMaxPerfectDepth</a></div><div class="ttdeci">static unsigned getMaxPerfectDepth(const Loop &amp;Root, ScalarEvolution &amp;SE)</div><div class="ttdoc">Return the maximum nesting depth of the loop nest rooted by loop Root.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00261">LoopNestAnalysis.cpp:261</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aLoopNestAnalysis_8cpp_html_a6a54f3aff376f5f286501361749fea29"><div class="ttname"><a href="LoopNestAnalysis_8cpp.html#a6a54f3aff376f5f286501361749fea29">checkSafeInstruction</a></div><div class="ttdeci">static bool checkSafeInstruction(const Instruction &amp;I, const CmpInst *InnerLoopGuardCmp, const CmpInst *OuterLoopLatchCmp, std::optional&lt; Loop::LoopBounds &gt; OuterLoopLB)</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00084">LoopNestAnalysis.cpp:84</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8h_html"><div class="ttname"><a href="LoopNestAnalysis_8h.html">LoopNestAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_ac9a27bb5250b3aadddc4696c07678dd0"><div class="ttname"><a href="classllvm_1_1LoopNest.html#ac9a27bb5250b3aadddc4696c07678dd0">llvm::LoopNest::getOutermostLoop</a></div><div class="ttdeci">Loop &amp; getOutermostLoop() const</div><div class="ttdoc">Return the outermost loop in the loop nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00080">LoopNestAnalysis.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a432b4455d6653676c5cd49ffb464b7dd"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a432b4455d6653676c5cd49ffb464b7dd">llvm::LoopNest::LoopNest</a></div><div class="ttdeci">LoopNest()=delete</div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a0fa33dfd6ffaaae721fc05b6941263aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a0fa33dfd6ffaaae721fc05b6941263aa">llvm::LoopBase::isOutermost</a></div><div class="ttdeci">bool isOutermost() const</div><div class="ttdoc">Return true if the loop does not have a parent (natural) loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00185">LoopInfo.h:185</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_add49d9f7abebe402adf1a57c762abeef"><div class="ttname"><a href="namespacellvm.html#add49d9f7abebe402adf1a57c762abeef">llvm::depth_first</a></div><div class="ttdeci">iterator_range&lt; df_iterator&lt; T &gt; &gt; depth_first(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00229">DepthFirstIterator.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a16165c1e5da45acaa086c3a54a188d34"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">llvm::LoopBase::isInnermost</a></div><div class="ttdeci">bool isInnermost() const</div><div class="ttdoc">Return true if the loop does not contain any (natural) loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00182">LoopInfo.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LoopNestAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00021">LoopNestAnalysis.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a124376878e24aef4252795ba9fea420f"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">llvm::LoopStandardAnalysisResults::SE</a></div><div class="ttdeci">ScalarEvolution &amp; SE</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00056">LoopAnalysisManager.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a76910b27c22c1ec00680bc5362806678"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a76910b27c22c1ec00680bc5362806678">llvm::LoopNest::getLoops</a></div><div class="ttdeci">ArrayRef&lt; Loop * &gt; getLoops() const</div><div class="ttdoc">Get the loops in the nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00117">LoopNestAnalysis.h:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a2e412f8b916b22399f515ff64bfb6705"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a2e412f8b916b22399f515ff64bfb6705">llvm::LoopNest::getNestDepth</a></div><div class="ttdeci">unsigned getNestDepth() const</div><div class="ttdoc">Return the loop nest depth (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00155">LoopNestAnalysis.h:155</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8cpp_html_a3293db089547b3b22fc0de67bc903032"><div class="ttname"><a href="LoopNestAnalysis_8cpp.html#a3293db089547b3b22fc0de67bc903032">getInnerLoopGuardCmp</a></div><div class="ttdeci">static CmpInst * getInnerLoopGuardCmp(const Loop &amp;InnerLoop)</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00070">LoopNestAnalysis.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a3085b412e1547510b6891a60494b1d14"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a3085b412e1547510b6891a60494b1d14">llvm::LoopNest::Loops</a></div><div class="ttdeci">LoopVectorTy Loops</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00184">LoopNestAnalysis.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a797a9f600b2119356e4ea74cdc6ba25a"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a797a9f600b2119356e4ea74cdc6ba25a">llvm::LoopNest::getInterveningInstructions</a></div><div class="ttdeci">static InstrVectorTy getInterveningInstructions(const Loop &amp;OuterLoop, const Loop &amp;InnerLoop, ScalarEvolution &amp;SE)</div><div class="ttdoc">Return a vector of instructions that prevent the LoopNest given by loops OuterLoop and InnerLoop from...</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00181">LoopNestAnalysis.cpp:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_acbe3cef3fd28531e0c1e5ae0980e916f"><div class="ttname"><a href="classllvm_1_1LoopNest.html#acbe3cef3fd28531e0c1e5ae0980e916f">llvm::LoopNest::getMaxPerfectDepth</a></div><div class="ttdeci">unsigned getMaxPerfectDepth() const</div><div class="ttdoc">Return the maximum perfect nesting depth.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00163">LoopNestAnalysis.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aBlockVerifier_8cpp_html_ae45c7d73c0ff5d177b59153ffae77f84"><div class="ttname"><a href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a></div><div class="ttdeci">BlockVerifier::State From</div><div class="ttdef"><b>Definition:</b> <a href="BlockVerifier_8cpp_source.html#l00055">BlockVerifier.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a9f905da3130336a4fddcd7a7d3360bfd"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a9f905da3130336a4fddcd7a7d3360bfd">llvm::LoopNest::getLoopNest</a></div><div class="ttdeci">static std::unique_ptr&lt; LoopNest &gt; getLoopNest(Loop &amp;Root, ScalarEvolution &amp;SE)</div><div class="ttdoc">Construct a LoopNest object.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00047">LoopNestAnalysis.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html"><div class="ttname"><a href="classllvm_1_1LoopNest.html">llvm::LoopNest</a></div><div class="ttdoc">This class represents a loop nest and can be used to query its properties.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00028">LoopNestAnalysis.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a57dd4a8d48a825207a80611dfef6d45e"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a57dd4a8d48a825207a80611dfef6d45e">llvm::LoopNest::getPerfectLoops</a></div><div class="ttdeci">SmallVector&lt; LoopVectorTy, 4 &gt; getPerfectLoops(ScalarEvolution &amp;SE) const</div><div class="ttdoc">Retrieve a vector of perfect loop nests contained in the current loop nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8cpp_source.html#l00241">LoopNestAnalysis.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:49:14 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

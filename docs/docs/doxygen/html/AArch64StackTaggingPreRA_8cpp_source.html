<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AArch64/AArch64StackTaggingPreRA.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_b69b85499a0be7bec9dbd65569a12909.html">AArch64</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AArch64StackTaggingPreRA.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AArch64StackTaggingPreRA_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- AArch64StackTaggingPreRA.cpp --- Stack Tagging for AArch64 -----===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64_8h.html">AArch64.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64MachineFunctionInfo_8h.html">AArch64MachineFunctionInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64InstrInfo_8h.html">AArch64InstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBranchProbabilityInfo_8h.html">llvm/CodeGen/MachineBranchProbabilityInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineTraceMetrics_8h.html">llvm/CodeGen/MachineTraceMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="AArch64StackTaggingPreRA_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   34</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;aarch64-stack-tagging-pre-ra&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4aa2c6265a177a814215ffa0ec31bd75c4">   36</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4">UncheckedLdStMode</a> { <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4af74d948d35f52e4bc661b99545b05746">UncheckedNever</a>, <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4aa2c6265a177a814215ffa0ec31bd75c4">UncheckedSafe</a>, <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4a694f808630128ed13bd708772836f575">UncheckedAlways</a> };</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;UncheckedLdStMode&gt;</a> <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ae4cdf6af9e4ffb496d2ef07d04f87d91">ClUncheckedLdSt</a>(</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="stringliteral">&quot;stack-tagging-unchecked-ld-st&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4aa2c6265a177a814215ffa0ec31bd75c4">UncheckedSafe</a>),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="stringliteral">&quot;Unconditionally apply unchecked-ld-st optimization (even for large &quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="stringliteral">&quot;stack frames, or in the presence of variable sized allocas).&quot;</span>),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4af74d948d35f52e4bc661b99545b05746">UncheckedNever</a>, <span class="stringliteral">&quot;never&quot;</span>, <span class="stringliteral">&quot;never apply unchecked-ld-st&quot;</span>),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4aa2c6265a177a814215ffa0ec31bd75c4">UncheckedSafe</a>, <span class="stringliteral">&quot;safe&quot;</span>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="stringliteral">&quot;apply unchecked-ld-st when the target is definitely within range&quot;</span>),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4a694f808630128ed13bd708772836f575">UncheckedAlways</a>, <span class="stringliteral">&quot;always&quot;</span>, <span class="stringliteral">&quot;always apply unchecked-ld-st&quot;</span>)));</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ab4dcda18178ac025ae6cd7338b96e2fc">ClFirstSlot</a>(<span class="stringliteral">&quot;stack-tagging-first-slot-opt&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Apply first slot optimization for stack tagging &quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                         <span class="stringliteral">&quot;(eliminate ADDG Rt, Rn, 0, 0).&quot;</span>));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">class </span>AArch64StackTaggingPreRA : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a> *AFI;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 16&gt;</a> ReTags;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  AArch64StackTaggingPreRA() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="namespacellvm.html#a905f96c85788f5247e25e00a899317c7">initializeAArch64StackTaggingPreRAPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordtype">bool</span> mayUseUncheckedLoadStore();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">void</span> uncheckUsesOf(<span class="keywordtype">unsigned</span> TaggedReg, <span class="keywordtype">int</span> FI);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">void</span> uncheckLoadsAndStores();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  std::optional&lt;int&gt; findFirstSlotCandidate();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;Func) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;AArch64 Stack Tagging PreRA&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;};</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">AArch64StackTaggingPreRA::ID</a> = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a80b86a6431807af4e8b0a73a5a45721e">INITIALIZE_PASS_BEGIN</a>(AArch64StackTaggingPreRA, <span class="stringliteral">&quot;aarch64-stack-tagging-pre-ra&quot;</span>,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                      <span class="stringliteral">&quot;AArch64 Stack Tagging PreRA Pass&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="AArch64StackTaggingPreRA_8cpp.html#a3d9786aba23105131dc05d9f8bfcac7a">   95</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(AArch64StackTaggingPreRA, &quot;aarch64-<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac3302d36e5507ecfe3ed8ba03d5e320c">stack</a>-<a class="code" href="AArch64GlobalsTagging_8cpp.html#af2d487de4755e3289227f40600fcd42f">tagging</a>-pre-<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a3d9786aba23105131dc05d9f8bfcac7a">ra</a>&quot;,</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="AArch64StackTaggingPreRA_8cpp.html#a6421f4944ecd28f601379a29d3deb345">   96</a></span>&#160;                    &quot;AArch64 Stack <a class="code" href="AArch64StackTagging_8cpp.html#ad759b9ef48f685ec214de2233b8149ed">Tagging</a> PreRA <a class="code" href="classllvm_1_1Pass.html">Pass</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="namespacellvm.html#a1c268b78bb60779c59f41a9212d21c6c">   98</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a1c268b78bb60779c59f41a9212d21c6c">createAArch64StackTaggingPreRAPass</a>() {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> AArch64StackTaggingPreRA();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="AArch64StackTaggingPreRA_8cpp.html#ae1cfd101bf9325862a53711c0b53140c">  102</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ae1cfd101bf9325862a53711c0b53140c">isUncheckedLoadOrStoreOpcode</a>(<span class="keywordtype">unsigned</span> Opcode) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRBBui:</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRHHui:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRWui:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRXui:</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRBui:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRHui:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRSui:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRDui:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRQui:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRSHWui:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRSHXui:</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRSBWui:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRSBXui:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">case</span> AArch64::LDRSWui:</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">case</span> AArch64::STRBBui:</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">case</span> AArch64::STRHHui:</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">case</span> AArch64::STRWui:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">case</span> AArch64::STRXui:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">case</span> AArch64::STRBui:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">case</span> AArch64::STRHui:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">case</span> AArch64::STRSui:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">case</span> AArch64::STRDui:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">case</span> AArch64::STRQui:</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPWi:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPXi:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPSi:</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPDi:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPQi:</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">case</span> AArch64::LDPSWi:</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">case</span> AArch64::STPWi:</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">case</span> AArch64::STPXi:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">case</span> AArch64::STPSi:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">case</span> AArch64::STPDi:</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">case</span> AArch64::STPQi:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keywordtype">bool</span> AArch64StackTaggingPreRA::mayUseUncheckedLoadStore() {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ae4cdf6af9e4ffb496d2ef07d04f87d91">ClUncheckedLdSt</a> == <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4af74d948d35f52e4bc661b99545b05746">UncheckedNever</a>)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ae4cdf6af9e4ffb496d2ef07d04f87d91">ClUncheckedLdSt</a> == <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4a694f808630128ed13bd708772836f575">UncheckedAlways</a>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// This estimate can be improved if we had harder guarantees about stack frame</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// layout. With LocalStackAllocation we can estimate SP offset to any</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// preallocated slot. AArch64FrameLowering::orderFrameObjects could put tagged</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// objects ahead of non-tagged ones, but that&#39;s not always desirable.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// Underestimating SP offset here may require the use of LDG to materialize</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// the tagged address of the stack slot, along with a scratch register</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// allocation (post-regalloc!).</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// For now we do the safe thing here and require that the entire stack frame</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// is within range of the shortest of the unchecked instructions.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">unsigned</span> FrameSize = 0;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">getObjectIndexEnd</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    FrameSize += MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">getObjectSize</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">bool</span> EntireFrameReachableFromSP = FrameSize &lt; 0xf00;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">return</span> !MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() &amp;&amp; EntireFrameReachableFromSP;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keywordtype">void</span> AArch64StackTaggingPreRA::uncheckUsesOf(<span class="keywordtype">unsigned</span> TaggedReg, <span class="keywordtype">int</span> FI) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;UseI :</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;       <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#af400646844b3c80b534e81a0d855ed4a">use_instructions</a>(TaggedReg))) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ae1cfd101bf9325862a53711c0b53140c">isUncheckedLoadOrStoreOpcode</a>(UseI.getOpcode())) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="comment">// FI operand is always the one before the immediate offset.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordtype">unsigned</span> OpIdx = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getLoadStoreImmIdx(UseI.getOpcode()) - 1;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">if</span> (UseI.getOperand(OpIdx).isReg() &amp;&amp;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          UseI.getOperand(OpIdx).getReg() == TaggedReg) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        UseI.getOperand(OpIdx).ChangeToFrameIndex(FI);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        UseI.getOperand(OpIdx).setTargetFlags(<a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71aefb2c1834e49df9715967d4a2c9c99e8">AArch64II::MO_TAGGED</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UseI.isCopy() &amp;&amp; UseI.getOperand(0).getReg().isVirtual()) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      uncheckUsesOf(UseI.getOperand(0).getReg(), FI);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keywordtype">void</span> AArch64StackTaggingPreRA::uncheckLoadsAndStores() {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReTags) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> TaggedReg = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">int</span> FI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1).getIndex();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    uncheckUsesOf(TaggedReg, FI);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">struct </span>SlotWithTag {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">int</span> FI;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  SlotWithTag(<span class="keywordtype">int</span> FI, <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>) : FI(FI), <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>(<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>) {}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keyword">explicit</span> SlotWithTag(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      : FI(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getIndex()), <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getImm()) {}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">operator==</a>(<span class="keyword">const</span> SlotWithTag &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> FI == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.FI &amp;&amp; <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.Tag;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;};</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html">  216</a></span>&#160;<span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo</a>&lt;SlotWithTag&gt; {</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a62a4d12f904f9c2ba15ee89084bc9887">  217</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> SlotWithTag <a class="code" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a62a4d12f904f9c2ba15ee89084bc9887">getEmptyKey</a>() { <span class="keywordflow">return</span> {-2, -2}; }</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a3d536e3adc112a2dc605bf66ac64fff9">  218</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> SlotWithTag <a class="code" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a3d536e3adc112a2dc605bf66ac64fff9">getTombstoneKey</a>() { <span class="keywordflow">return</span> {-3, -3}; }</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#ac6b3b364eb359f1a89ad6f464120af09">  219</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#ac6b3b364eb359f1a89ad6f464120af09">getHashValue</a>(<span class="keyword">const</span> SlotWithTag &amp;V) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#add71474638430694c84640146383fc44">hash_combine</a>(<a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;int&gt;::getHashValue</a>(V.FI),</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;int&gt;::getHashValue</a>(V.Tag));</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a2ec28db499905a895e5286f5bec4a6d8">  223</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a2ec28db499905a895e5286f5bec4a6d8">isEqual</a>(<span class="keyword">const</span> SlotWithTag &amp;A, <span class="keyword">const</span> SlotWithTag &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> A == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;};</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="AArch64StackTaggingPreRA_8cpp.html#a64436bd8236dbb5902aa21b3ee02b2e1">  229</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a64436bd8236dbb5902aa21b3ee02b2e1">isSlotPreAllocated</a>(<a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI, <span class="keywordtype">int</span> FI) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">return</span> MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a5990b78705882c9de507550bc81c40cb">getUseLocalStackAllocationBlock</a>() &amp;&amp;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;         MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a11d6e0b1aa8f7709f0330318b2cc5f1b">isObjectPreAllocated</a>(FI);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">// Pin one of the tagged slots to offset 0 from the tagged base pointer.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">// This would make its address available in a virtual register (IRG&#39;s def), as</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">// opposed to requiring an ADDG instruction to materialize. This effectively</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">// eliminates a vreg (by replacing it with direct uses of IRG, which is usually</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// live almost everywhere anyway), and therefore needs to happen before</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// regalloc.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;std::optional&lt;int&gt; AArch64StackTaggingPreRA::findFirstSlotCandidate() {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// Find the best (FI, Tag) pair to pin to offset 0.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Looking at the possible uses of a tagged address, the advantage of pinning</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// is:</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// - COPY to physical register.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">//   Does not matter, this would trade a MOV instruction for an ADDG.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// - ST*G matter, but those mostly appear near the function prologue where all</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">//   the tagged addresses need to be materialized anyway; also, counting ST*G</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">//   uses would overweight large allocas that require more than one ST*G</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">//   instruction.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// - Load/Store instructions in the address operand do not require a tagged</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">//   pointer, so they also do not benefit. These operands have already been</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">//   eliminated (see uncheckLoadsAndStores) so all remaining load/store</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">//   instructions count.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// - Any other instruction may benefit from being pinned to offset 0.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;AArch64StackTaggingPreRA::findFirstSlotCandidate\n&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#ab4dcda18178ac025ae6cd7338b96e2fc">ClFirstSlot</a>)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;SlotWithTag, int&gt;</a> RetagScore;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  SlotWithTag MaxScoreST{-1, -1};</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordtype">int</span> MaxScore = -1;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReTags) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    SlotWithTag <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>{*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>};</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64StackTaggingPreRA_8cpp.html#a64436bd8236dbb5902aa21b3ee02b2e1">isSlotPreAllocated</a>(MFI, <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.FI))</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RetagReg = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (!RetagReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">int</span> Score = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> WorkList;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    WorkList.push_back(RetagReg);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="HexagonCopyToCombine_8cpp.html#a02230ca194a9c8e52170cc7c426decb2">UseReg</a> = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;UseI : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#af400646844b3c80b534e81a0d855ed4a">use_instructions</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a02230ca194a9c8e52170cc7c426decb2">UseReg</a>)) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordtype">unsigned</span> Opcode = UseI.getOpcode();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (Opcode == AArch64::STGOffset || Opcode == AArch64::ST2GOffset ||</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            Opcode == AArch64::STZGOffset || Opcode == AArch64::STZ2GOffset ||</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            Opcode == AArch64::STGPi || Opcode == AArch64::STGloop ||</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            Opcode == AArch64::STZGloop || Opcode == AArch64::STGloop_wback ||</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            Opcode == AArch64::STZGloop_wback)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (UseI.isCopy()) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = UseI.getOperand(0).getReg();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <span class="keywordflow">if</span> (DstReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            WorkList.push_back(DstReg);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.FI &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.Tag &lt;&lt; <span class="stringliteral">&quot;] use of %&quot;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                          &lt;&lt; <a class="code" href="classllvm_1_1Register.html#a4df23dddc646b6a4b36ff483063a4ff8">Register::virtReg2Index</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a02230ca194a9c8e52170cc7c426decb2">UseReg</a>) &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; UseI</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        Score++;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">int</span> TotalScore = RetagScore[<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>] += Score;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (TotalScore &gt; MaxScore ||</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        (TotalScore == MaxScore &amp;&amp; <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.FI &gt; MaxScoreST.FI)) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      MaxScore = TotalScore;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      MaxScoreST = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (MaxScoreST.FI &lt; 0)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// If FI&#39;s tag is already 0, we are done.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span> (MaxScoreST.Tag == 0)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> MaxScoreST.FI;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Otherwise, find a random victim pair (FI, Tag) where Tag == 0.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  SlotWithTag SwapST{-1, -1};</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReTags) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    SlotWithTag <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>{*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>};</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.Tag == 0) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      SwapST = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// Swap tags between the victim and the highest scoring pair.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// If SwapWith is still (-1, -1), that&#39;s fine, too - we&#39;ll simply take tag for</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// the highest score slot without changing anything else.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReTags) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    SlotWithTag <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>{*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>};</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;TagOp = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(4);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> == MaxScoreST) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      TagOp.<a class="code" href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">setImm</a>(0);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> == SwapST) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      TagOp.<a class="code" href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">setImm</a>(MaxScoreST.Tag);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">return</span> MaxScoreST.FI;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="keywordtype">bool</span> AArch64StackTaggingPreRA::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;Func) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  MF = &amp;<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  AFI = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html">AArch64FunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64InstrInfo.html">AArch64InstrInfo</a> *<span class="keyword">&gt;</span>(MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AArch64RegisterInfo.html">AArch64RegisterInfo</a> *<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  MFI = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  ReTags.clear();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a86dd1b4ce6ff2d4a0b4593c5f7b2a3fd">isSSA</a>());</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** AArch64 Stack Tagging PreRA **********\n&quot;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;********** Function: &quot;</span> &lt;&lt; MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;int, 8&gt;</a> TaggedSlots;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *MF) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == AArch64::TAGPstack) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        ReTags.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordtype">int</span> FI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1).getIndex();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        TaggedSlots.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(FI);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">// There should be no offsets in TAGP yet.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(2).getImm() == 0);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// Take over from SSP. It does nothing for tagged slots, and should not really</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// have been enabled in the first place.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> FI : TaggedSlots)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a5938f9d0441c7b989d3e08e4dbd81ddf">setObjectSSPLayout</a>(FI, <a class="code" href="classllvm_1_1MachineFrameInfo.html#a3df888d2d0447ad8ff7b616b080d9f13ae58c4225f24cd64ac3846a49952e48e1">MachineFrameInfo::SSPLK_None</a>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span> (ReTags.empty())</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">if</span> (mayUseUncheckedLoadStore())</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    uncheckLoadsAndStores();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// Find a slot that is used with zero tag offset, like ADDG #fi, 0.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// If the base tagged pointer is set up to the address of this slot,</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// the ADDG instruction can be eliminated.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  std::optional&lt;int&gt; BaseSlot = findFirstSlotCandidate();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (BaseSlot)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    AFI-&gt;<a class="code" href="classllvm_1_1AArch64FunctionInfo.html#af6cfc93683b52a3179bca019b1b2bc71">setTaggedBasePointerIndex</a>(*BaseSlot);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReTags) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">int</span> FI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1).getIndex();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(4).getImm();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(3).getReg();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> == 0 &amp;&amp; FI == BaseSlot) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, {}, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AArch64::COPY),</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;              <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0).getReg())</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Base);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a0509430713d587eba74220a8375948a8"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">llvm::MachineFrameInfo::hasVarSizedObjects</a></div><div class="ttdeci">bool hasVarSizedObjects() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if the stack ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00355">MachineFrameInfo.h:355</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a95211e7eaa05886d4c3b27592ce117d4af74d948d35f52e4bc661b99545b05746"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4af74d948d35f52e4bc661b99545b05746">UncheckedNever</a></div><div class="ttdeci">@ UncheckedNever</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00036">AArch64StackTaggingPreRA.cpp:36</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aAArch64MachineFunctionInfo_8h_html"><div class="ttname"><a href="AArch64MachineFunctionInfo_8h.html">AArch64MachineFunctionInfo.h</a></div></div>
<div class="ttc" id="aAArch64_8h_html"><div class="ttname"><a href="AArch64_8h.html">AArch64.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_ad34f7e3cd7a9add3ab2529e267b48004"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">llvm::TargetSubtargetInfo::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00095">TargetSubtargetInfo.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a5990b78705882c9de507550bc81c40cb"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a5990b78705882c9de507550bc81c40cb">llvm::MachineFrameInfo::getUseLocalStackAllocationBlock</a></div><div class="ttdeci">bool getUseLocalStackAllocationBlock() const</div><div class="ttdoc">Get whether the local allocation blob should be allocated together or let PEI allocate the locals in ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00451">MachineFrameInfo.h:451</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a87849514193302b75f50a8092f94b98a"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">llvm::TargetSubtargetInfo::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const</div><div class="ttdoc">getRegisterInfo - If register information is available, return it.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00127">TargetSubtargetInfo.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a2feaa1c69335c6b9028076cd68c7a5f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">llvm::MachineOperand::setImm</a></div><div class="ttdeci">void setImm(int64_t immVal)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00684">MachineOperand.h:684</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_af400646844b3c80b534e81a0d855ed4a"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#af400646844b3c80b534e81a0d855ed4a">llvm::MachineRegisterInfo::use_instructions</a></div><div class="ttdeci">iterator_range&lt; use_instr_iterator &gt; use_instructions(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00507">MachineRegisterInfo.h:507</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a11d6e0b1aa8f7709f0330318b2cc5f1b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a11d6e0b1aa8f7709f0330318b2cc5f1b">llvm::MachineFrameInfo::isObjectPreAllocated</a></div><div class="ttdeci">bool isObjectPreAllocated(int ObjectIdx) const</div><div class="ttdoc">Return true if the object was pre-allocated into the local block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00463">MachineFrameInfo.h:463</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html_af6cfc93683b52a3179bca019b1b2bc71"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html#af6cfc93683b52a3179bca019b1b2bc71">llvm::AArch64FunctionInfo::setTaggedBasePointerIndex</a></div><div class="ttdeci">void setTaggedBasePointerIndex(int Index)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00413">AArch64MachineFunctionInfo.h:413</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac51e2d34abb79b72afef355fac525c76"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">llvm::MachineFrameInfo::getObjectIndexEnd</a></div><div class="ttdeci">int getObjectIndexEnd() const</div><div class="ttdoc">Return one past the maximum frame object index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00410">MachineFrameInfo.h:410</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_ac94a19fc8c57bf0350fc4e9f45897828"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">llvm::dwarf::Tag</a></div><div class="ttdeci">Tag</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00103">Dwarf.h:103</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00167">MachineFunctionPass.cpp:167</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aDepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aMachineTraceMetrics_8h_html"><div class="ttname"><a href="MachineTraceMetrics_8h.html">MachineTraceMetrics.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo</a></div><div class="ttdoc">An information struct used to provide DenseMap with the various necessary components for a given valu...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00034">APInt.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="aMachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
<div class="ttc" id="aAArch64InstrInfo_8h_html"><div class="ttname"><a href="AArch64InstrInfo_8h.html">AArch64InstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64InstrInfo_html"><div class="ttname"><a href="classllvm_1_1AArch64InstrInfo.html">llvm::AArch64InstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8h_source.html#l00035">AArch64InstrInfo.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac2dc0fa143c9f2127f0501734577a0a0"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">llvm::MachineFunction::getInfo</a></div><div class="ttdeci">Ty * getInfo()</div><div class="ttdoc">getInfo - Keep track of various per-function pieces of information for backends that would like to do...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00770">MachineFunction.h:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a5938f9d0441c7b989d3e08e4dbd81ddf"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a5938f9d0441c7b989d3e08e4dbd81ddf">llvm::MachineFrameInfo::setObjectSSPLayout</a></div><div class="ttdeci">void setObjectSSPLayout(int ObjectIdx, SSPLayoutKind Kind)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00574">MachineFrameInfo.h:574</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4_html_ac6b3b364eb359f1a89ad6f464120af09"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#ac6b3b364eb359f1a89ad6f464120af09">llvm::DenseMapInfo&lt; SlotWithTag &gt;::getHashValue</a></div><div class="ttdeci">static unsigned getHashValue(const SlotWithTag &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00219">AArch64StackTaggingPreRA.cpp:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a3df888d2d0447ad8ff7b616b080d9f13ae58c4225f24cd64ac3846a49952e48e1"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a3df888d2d0447ad8ff7b616b080d9f13ae58c4225f24cd64ac3846a49952e48e1">llvm::MachineFrameInfo::SSPLK_None</a></div><div class="ttdeci">@ SSPLK_None</div><div class="ttdoc">Did not trigger a stack protector.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00111">MachineFrameInfo.h:111</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a64436bd8236dbb5902aa21b3ee02b2e1"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a64436bd8236dbb5902aa21b3ee02b2e1">isSlotPreAllocated</a></div><div class="ttdeci">static bool isSlotPreAllocated(MachineFrameInfo *MFI, int FI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00229">AArch64StackTaggingPreRA.cpp:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a86dd1b4ce6ff2d4a0b4593c5f7b2a3fd"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a86dd1b4ce6ff2d4a0b4593c5f7b2a3fd">llvm::MachineRegisterInfo::isSSA</a></div><div class="ttdeci">bool isSSA() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00197">MachineRegisterInfo.h:197</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4_html_a62a4d12f904f9c2ba15ee89084bc9887"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a62a4d12f904f9c2ba15ee89084bc9887">llvm::DenseMapInfo&lt; SlotWithTag &gt;::getEmptyKey</a></div><div class="ttdeci">static SlotWithTag getEmptyKey()</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00217">AArch64StackTaggingPreRA.cpp:217</a></div></div>
<div class="ttc" id="aCodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_aebafd86dde59b5a05b22e8720e808a9d"><div class="ttname"><a href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">llvm::Register::isVirtual</a></div><div class="ttdeci">bool isVirtual() const</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00091">Register.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a3d9786aba23105131dc05d9f8bfcac7a"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a3d9786aba23105131dc05d9f8bfcac7a">ra</a></div><div class="ttdeci">aarch64 stack tagging pre ra</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00095">AArch64StackTaggingPreRA.cpp:95</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a8fa743aa76b6902028f8a643dfb87171"><div class="ttname"><a href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">llvm::cl::values</a></div><div class="ttdeci">ValuesClass values(OptsTy... Options)</div><div class="ttdoc">Helper to build a ValuesClass by forwarding a variable number of arguments as an initializer list to ...</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00703">CommandLine.h:703</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a9284fd53296d2a2f8ae654d000971000"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">llvm::MachineFrameInfo::getObjectSize</a></div><div class="ttdeci">int64_t getObjectSize(int ObjectIdx) const</div><div class="ttdoc">Return the size of the specified object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00470">MachineFrameInfo.h:470</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a02230ca194a9c8e52170cc7c426decb2"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a02230ca194a9c8e52170cc7c426decb2">UseReg</a></div><div class="ttdeci">static Register UseReg(const MachineOperand &amp;MO)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00252">HexagonCopyToCombine.cpp:252</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64FunctionInfo_html"><div class="ttname"><a href="classllvm_1_1AArch64FunctionInfo.html">llvm::AArch64FunctionInfo</a></div><div class="ttdoc">AArch64FunctionInfo - This class is derived from MachineFunctionInfo and contains private AArch64-spe...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MachineFunctionInfo_8h_source.html#l00039">AArch64MachineFunctionInfo.h:39</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00582">MachineFunction.cpp:582</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aMachineBranchProbabilityInfo_8h_html"><div class="ttname"><a href="MachineBranchProbabilityInfo_8h.html">MachineBranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a18fcadd076ad53e6df94e0ca7a80a9ef"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">llvm::MachineFunction::getFrameInfo</a></div><div class="ttdeci">MachineFrameInfo &amp; getFrameInfo()</div><div class="ttdoc">getFrameInfo - Return the frame info object for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00688">MachineFunction.h:688</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a95211e7eaa05886d4c3b27592ce117d4aa2c6265a177a814215ffa0ec31bd75c4"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4aa2c6265a177a814215ffa0ec31bd75c4">UncheckedSafe</a></div><div class="ttdeci">@ UncheckedSafe</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00036">AArch64StackTaggingPreRA.cpp:36</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_ab4dcda18178ac025ae6cd7338b96e2fc"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#ab4dcda18178ac025ae6cd7338b96e2fc">ClFirstSlot</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClFirstSlot(&quot;stack-tagging-first-slot-opt&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Apply first slot optimization for stack tagging &quot; &quot;(eliminate ADDG Rt, Rn, 0, 0).&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a80b86a6431807af4e8b0a73a5a45721e"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a80b86a6431807af4e8b0a73a5a45721e">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(AArch64StackTaggingPreRA, &quot;aarch64-stack-tagging-pre-ra&quot;, &quot;AArch64 Stack Tagging PreRA Pass&quot;, false, false) INITIALIZE_PASS_END(AArch64StackTaggingPreRA</div></div>
<div class="ttc" id="anamespacellvm_html_a4d812a2dd18aa186c164447e20e348e7"><div class="ttname"><a href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">llvm::operator==</a></div><div class="ttdeci">bool operator==(const AddressRangeValuePair &amp;LHS, const AddressRangeValuePair &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00153">AddressRanges.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="anamespacellvm_html_a905f96c85788f5247e25e00a899317c7"><div class="ttname"><a href="namespacellvm.html#a905f96c85788f5247e25e00a899317c7">llvm::initializeAArch64StackTaggingPreRAPass</a></div><div class="ttdeci">void initializeAArch64StackTaggingPreRAPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a95211e7eaa05886d4c3b27592ce117d4a694f808630128ed13bd708772836f575"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4a694f808630128ed13bd708772836f575">UncheckedAlways</a></div><div class="ttdeci">@ UncheckedAlways</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00036">AArch64StackTaggingPreRA.cpp:36</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1c268b78bb60779c59f41a9212d21c6c"><div class="ttname"><a href="namespacellvm.html#a1c268b78bb60779c59f41a9212d21c6c">llvm::createAArch64StackTaggingPreRAPass</a></div><div class="ttdeci">FunctionPass * createAArch64StackTaggingPreRAPass()</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00098">AArch64StackTaggingPreRA.cpp:98</a></div></div>
<div class="ttc" id="aTargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html_a187fd767976b311c09dff5e05ac0c1bc"><div class="ttname"><a href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a></div><div class="ttdeci">#define clEnumValN(ENUMVAL, FLAGNAME, DESC)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00678">CommandLine.h:678</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64RegisterInfo_html"><div class="ttname"><a href="classllvm_1_1AArch64RegisterInfo.html">llvm::AArch64RegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64RegisterInfo_8h_source.html#l00026">AArch64RegisterInfo.h:26</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4_html_a3d536e3adc112a2dc605bf66ac64fff9"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a3d536e3adc112a2dc605bf66ac64fff9">llvm::DenseMapInfo&lt; SlotWithTag &gt;::getTombstoneKey</a></div><div class="ttdeci">static SlotWithTag getTombstoneKey()</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00218">AArch64StackTaggingPreRA.cpp:218</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ifs_html_adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df"><div class="ttname"><a href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">llvm::ifs::IFSSymbolType::Func</a></div><div class="ttdeci">@ Func</div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aMachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_ae1cfd101bf9325862a53711c0b53140c"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#ae1cfd101bf9325862a53711c0b53140c">isUncheckedLoadOrStoreOpcode</a></div><div class="ttdeci">static bool isUncheckedLoadOrStoreOpcode(unsigned Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00102">AArch64StackTaggingPreRA.cpp:102</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_ae4cdf6af9e4ffb496d2ef07d04f87d91"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#ae4cdf6af9e4ffb496d2ef07d04f87d91">ClUncheckedLdSt</a></div><div class="ttdeci">cl::opt&lt; UncheckedLdStMode &gt; ClUncheckedLdSt(&quot;stack-tagging-unchecked-ld-st&quot;, cl::Hidden, cl::init(UncheckedSafe), cl::desc(&quot;Unconditionally apply unchecked-ld-st optimization (even for large &quot; &quot;stack frames, or in the presence of variable sized allocas).&quot;), cl::values(clEnumValN(UncheckedNever, &quot;never&quot;, &quot;never apply unchecked-ld-st&quot;), clEnumValN(UncheckedSafe, &quot;safe&quot;, &quot;apply unchecked-ld-st when the target is definitely within range&quot;), clEnumValN(UncheckedAlways, &quot;always&quot;, &quot;always apply unchecked-ld-st&quot;)))</div></div>
<div class="ttc" id="aAArch64GlobalsTagging_8cpp_html_af2d487de4755e3289227f40600fcd42f"><div class="ttname"><a href="AArch64GlobalsTagging_8cpp.html#af2d487de4755e3289227f40600fcd42f">tagging</a></div><div class="ttdeci">aarch64 globals tagging</div><div class="ttdef"><b>Definition:</b> <a href="AArch64GlobalsTagging_8cpp_source.html#l00137">AArch64GlobalsTagging.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">The MachineFrameInfo class represents an abstract stack frame until prolog/epilog code is inserted.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00106">MachineFrameInfo.h:106</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aAArch64StackTaggingPreRA_8cpp_html_a95211e7eaa05886d4c3b27592ce117d4"><div class="ttname"><a href="AArch64StackTaggingPreRA_8cpp.html#a95211e7eaa05886d4c3b27592ce117d4">UncheckedLdStMode</a></div><div class="ttdeci">UncheckedLdStMode</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00036">AArch64StackTaggingPreRA.cpp:36</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="aMachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_add71474638430694c84640146383fc44"><div class="ttname"><a href="namespacellvm.html#add71474638430694c84640146383fc44">llvm::hash_combine</a></div><div class="ttdeci">hash_code hash_combine(const Ts &amp;...args)</div><div class="ttdoc">Combine values into a single hash_code.</div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00613">Hashing.h:613</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ac3302d36e5507ecfe3ed8ba03d5e320c"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ac3302d36e5507ecfe3ed8ba03d5e320c">stack</a></div><div class="ttdeci">S is passed via registers r2 But gcc stores them to the stack</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00189">README.txt:189</a></div></div>
<div class="ttc" id="aAArch64StackTagging_8cpp_html_ad759b9ef48f685ec214de2233b8149ed"><div class="ttname"><a href="AArch64StackTagging_8cpp.html#ad759b9ef48f685ec214de2233b8149ed">Tagging</a></div><div class="ttdeci">AArch64 Stack Tagging</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTagging_8cpp_source.html#l00345">AArch64StackTagging.cpp:345</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a4df23dddc646b6a4b36ff483063a4ff8"><div class="ttname"><a href="classllvm_1_1Register.html#a4df23dddc646b6a4b36ff483063a4ff8">llvm::Register::virtReg2Index</a></div><div class="ttdeci">static unsigned virtReg2Index(Register Reg)</div><div class="ttdoc">Convert a virtual register number to a 0-based index.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00077">Register.h:77</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71aefb2c1834e49df9715967d4a2c9c99e8"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71aefb2c1834e49df9715967d4a2c9c99e8">llvm::AArch64II::MO_TAGGED</a></div><div class="ttdeci">@ MO_TAGGED</div><div class="ttdoc">MO_TAGGED - With MO_PAGE, indicates that the page includes a memory tag in bits 56-63.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00774">AArch64BaseInfo.h:774</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4_html_a2ec28db499905a895e5286f5bec4a6d8"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01SlotWithTag_01_4.html#a2ec28db499905a895e5286f5bec4a6d8">llvm::DenseMapInfo&lt; SlotWithTag &gt;::isEqual</a></div><div class="ttdeci">static bool isEqual(const SlotWithTag &amp;A, const SlotWithTag &amp;B)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64StackTaggingPreRA_8cpp_source.html#l00223">AArch64StackTaggingPreRA.cpp:223</a></div></div>
<div class="ttc" id="aTargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:08:59 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

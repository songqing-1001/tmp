<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AArch64/GISel/AArch64LegalizerInfo.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_b69b85499a0be7bec9dbd65569a12909.html">AArch64</a></li><li class="navelem"><a class="el" href="dir_93f1e631d3c6f8dc58629a6a479cd539.html">GISel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AArch64LegalizerInfo.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AArch64LegalizerInfo_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- AArch64LegalizerInfo.cpp ----------------------------------*- C++ -*-==//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// This file implements the targeting of the Machinelegalizer class for</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// AArch64.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// \todo This should be generated by TableGen.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64LegalizerInfo_8h.html">AArch64LegalizerInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64RegisterBankInfo_8h.html">AArch64RegisterBankInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AArch64Subtarget_8h.html">AArch64Subtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegalizerHelper_8h.html">llvm/CodeGen/GlobalISel/LegalizerHelper.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegalizerInfo_8h.html">llvm/CodeGen/GlobalISel/LegalizerInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MIPatternMatch_8h.html">llvm/CodeGen/GlobalISel/MIPatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineIRBuilder_8h.html">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2GlobalISel_2Utils_8h.html">llvm/CodeGen/GlobalISel/Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstr_8h.html">llvm/CodeGen/MachineInstr.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOpcodes_8h.html">llvm/CodeGen/TargetOpcodes.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTypes_8h.html">llvm/CodeGen/ValueTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsAArch64.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;initializer_list&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="AArch64LegalizerInfo_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   33</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;aarch64-legalinfo&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span>LegalizeActions;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span>LegalizeMutations;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span>LegalityPredicates;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">using namespace </span>MIPatternMatch;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64LegalizerInfo.html#ae27667d7c3fbd41b18fd5838fc4f0553">   41</a></span>&#160;<a class="code" href="classllvm_1_1AArch64LegalizerInfo.html#ae27667d7c3fbd41b18fd5838fc4f0553">AArch64LegalizerInfo::AArch64LegalizerInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1AArch64Subtarget.html">AArch64Subtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    : <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>(&amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">using namespace </span>TargetOpcode;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> p0 = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(0, 64);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> s8 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> s16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> s32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> s64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> s128 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v16s8 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(16, 8);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v8s8 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 8);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v4s8 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 8);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v8s16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 16);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v4s16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 16);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v2s16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 16);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v2s32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 32);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v4s32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 32);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v2s64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 64);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> v2p0 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, p0);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  std::initializer_list&lt;LLT&gt; PackedVectorAllTypeList = {<span class="comment">/* Begin 128bit types */</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                                        v16s8, v8s16, v4s32,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                                        v2s64, v2p0,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                                        <span class="comment">/* End 128bit types */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                        <span class="comment">/* Begin 64bit types */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                                        v8s8, v4s16, v2s32};</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = ST.getTargetLowering()-&gt;getTargetMachine();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// FIXME: support subtargets which have neon/fp-armv8 disabled.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (!ST.hasNEON() || !ST.hasFPARMv8()) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a29bf34090f1f9800ad8faa1e0fe5a2c6">getLegacyLegalizerInfo</a>().<a class="code" href="classllvm_1_1LegacyLegalizerInfo.html#a6b586580f1e35e04ae0f3186fadd6594">computeTables</a>();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// Some instructions only support s16 if the subtarget has full 16-bit FP</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// support.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasFP16 = ST.hasFullFP16();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;MinFPScalar = HasFP16 ? s16 : s32;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasCSSC = ST.hasCSSC();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasRCPC3 = ST.hasRCPC3();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_IMPLICIT_DEF, G_FREEZE})</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      .legalFor({p0, s8, s16, s32, s64})</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      .legalFor(PackedVectorAllTypeList)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s8, s64)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a84458721a72ec165f39c359c1e36268f">fewerElementsIf</a>(</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isVector() &amp;&amp;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                   (Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getElementType() != s64 ||</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                    Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getNumElements() != 2);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          },</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getElementType();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">if</span> (EltTy == s64)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;              <span class="keywordflow">return</span> std::make_pair(0, <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 64));</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">return</span> std::make_pair(0, EltTy);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          });</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_PHI)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0, s16, s32, s64})</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      .legalFor(PackedVectorAllTypeList)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s16, s64)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="comment">// Maximum: sN * k = 128</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s8, 16)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s16, 8)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s32, 4)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s64, 2)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, p0, 2);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BSWAP)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({s32, s64, v4s32, v2s32, v2s64})</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_ADD, G_SUB, G_MUL, G_AND, G_OR, G_XOR})</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      .legalFor({s32, s64, v2s32, v4s32, v4s16, v8s16, v16s8, v8s8})</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      .scalarizeIf(</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#afd4ab894cdbdc5888a2d10fa5e5f8333">Opcode</a> == G_MUL &amp;&amp; Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == v2s64;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;          },</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;          0)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      .legalFor({v2s64})</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s8, 16)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s16, 8)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s32, v4s32)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s64, v2s64)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aa506a47183fac5ee47075d2107b0ee9b">minScalarOrEltIf</a>(</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getNumElements() &lt;= 2;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          },</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          0, s32)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getNumElements() &lt;= 4;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          },</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          0, s16)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getNumElements() &lt;= 16;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          },</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;          0, s8)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a039bb9a10ad812f936f4325facc13ab3">moreElementsToNextPow2</a>(0);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SHL, G_ASHR, G_LSHR})</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SrcTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;AmtTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span> !SrcTy.isVector() &amp;&amp; SrcTy.getSizeInBits() == 32 &amp;&amp;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;               AmtTy.getSizeInBits() == 32;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      })</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      .legalFor({</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;          {s32, s32},</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;          {s32, s64},</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          {s64, s64},</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;          {v8s8, v8s8},</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          {v16s8, v16s8},</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;          {v4s16, v4s16},</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          {v8s16, v8s16},</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          {v2s32, v2s32},</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          {v4s32, v4s32},</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          {v2s64, v2s64},</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      })</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(1, s32, s64)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s32, v4s32)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s64, v2s64)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aed4922b60be95d28d75259e76d6d2905">moreElementsToNextPow2</a>(0)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a7e81ea6beb36738551abb34dcb38b5b8">minScalarSameAs</a>(1, 0);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_PTR_ADD)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{p0, s64}, {v2p0, v2s64}})</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      .clampScalar(1, s64, s64);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_PTRMASK).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{p0, s64}});</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SDIV, G_UDIV})</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      .legalFor({s32, s64})</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      .libcallFor({s128})</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      .clampScalar(0, s32, s64)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SREM, G_UREM, G_SDIVREM, G_UDIVREM})</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      .lowerFor({s8, s16, s32, s64, v2s64, v4s32, v2s32})</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#ac48512a9f1e26744de1b6940b4adb68f">widenScalarOrEltToNextPow2</a>(0)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      .clampScalarOrElt(0, s32, s64)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      .clampNumElements(0, v2s32, v4s32)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      .clampNumElements(0, v2s64, v2s64)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      .moreElementsToNextPow2(0);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SMULO, G_UMULO})</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      .widenScalarToNextPow2(0, <span class="comment">/*Min = */</span> 32)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SMULH, G_UMULH})</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      .legalFor({s64, v8s16, v16s8, v4s32})</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      .lower();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">auto</span> &amp;MinMaxActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      {G_SMIN, G_SMAX, G_UMIN, G_UMAX});</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> (HasCSSC)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    MinMaxActions</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({s32, s64, v8s8, v16s8, v4s16, v8s16, v2s32, v4s32})</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">// Making clamping conditional on CSSC extension as without legal types we</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">// lower to CMP which can fold one of the two sxtb&#39;s we&#39;d otherwise need</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// if we detect a type smaller than 32-bit.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        .minScalar(0, s32);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    MinMaxActions</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({v8s8, v16s8, v4s16, v8s16, v2s32, v4s32});</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  MinMaxActions</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v8s8, v16s8)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v4s16, v8s16)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s32, v4s32)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="comment">// FIXME: This sholdn&#39;t be needed as v2s64 types are going to</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="comment">// be expanded anyway, but G_ICMP doesn&#39;t support splitting vectors yet</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s64, v2s64)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      {G_SADDE, G_SSUBE, G_UADDE, G_USUBE, G_SADDO, G_SSUBO, G_UADDO, G_USUBO})</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      .legalFor({{s32, s32}, {s64, s32}})</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      .clampScalar(0, s32, s64)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(1, s32, s64)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FADD, G_FSUB, G_FMUL, G_FDIV, G_FNEG})</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      .legalFor({MinFPScalar, s32, s64, v2s64, v4s32, v2s32})</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      .clampScalar(0, MinFPScalar, s64)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s32, v4s32)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s64, v2s64);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FREM).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a12f9aadf7cbff9b4027cbeb6bfc45836">libcallFor</a>({s32, s64});</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FCEIL, G_FABS, G_FSQRT, G_FFLOOR, G_FRINT,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                               G_FMA, G_INTRINSIC_TRUNC, G_INTRINSIC_ROUND,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                               G_FNEARBYINT, G_INTRINSIC_LRINT})</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="comment">// If we don&#39;t have full FP16 support, then scalarize the elements of</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="comment">// vectors containing fp16 types.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      .fewerElementsIf(</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          [=, &amp;ST](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">return</span> Ty.isVector() &amp;&amp; Ty.getElementType() == s16 &amp;&amp;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                   !ST.hasFullFP16();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;          },</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> std::make_pair(0, s16); })</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="comment">// If we don&#39;t have full FP16 support, then widen s16 to s32 if we</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="comment">// encounter it.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      .widenScalarIf(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          [=, &amp;ST](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == s16 &amp;&amp; !ST.hasFullFP16();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          },</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> std::make_pair(0, s32); })</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      .legalFor({s16, s32, s64, v2s32, v4s32, v2s64, v2s16, v4s16, v8s16});</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      {G_FCOS, G_FSIN, G_FLOG10, G_FLOG, G_FLOG2, G_FEXP, G_FEXP2, G_FPOW})</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="comment">// We need a call for these, so we always need to scalarize.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// Regardless of FP16 support, widen 16-bit elements to 32-bits.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      .minScalar(0, s32)</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      .libcallFor({s32, s64, v2s32, v4s32, v2s64});</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_INSERT)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s32, s64, p0}),</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                   <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {s8, s16, s32}), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a45c9d1ec6a1b46697b0363f2c8a605c5">smallerThan</a>(1, 0)))</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(1)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(1, s8)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a182a4338dd8214b00c7af87ba1b2df2f">maxScalarIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s32}), 1, s16)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a182a4338dd8214b00c7af87ba1b2df2f">maxScalarIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s64, p0}), 1, s32);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_EXTRACT)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s16, s32, s64, p0}),</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                   <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {s32, s64, s128, p0}), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a45c9d1ec6a1b46697b0363f2c8a605c5">smallerThan</a>(0, 1)))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(1)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(1, s32, s128)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(0, s16)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a182a4338dd8214b00c7af87ba1b2df2f">maxScalarIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {s32}), 0, s16)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a182a4338dd8214b00c7af87ba1b2df2f">maxScalarIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {s64, p0}), 0, s32)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a182a4338dd8214b00c7af87ba1b2df2f">maxScalarIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {s128}), 0, s64);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {G_SEXTLOAD, G_ZEXTLOAD}) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keyword">auto</span> &amp;Actions =  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_SEXTLOAD)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      Actions.lowerIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a4d17100c5b9375e90f20d666f7615c56">atomicOrderingAtLeastOrStrongerThan</a>(0, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">AtomicOrdering::Unordered</a>));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Atomics have zero extending behavior.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    Actions</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      .legalForTypesWithMemDesc({{s32, p0, s8, 8},</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                 {s32, p0, s16, 8},</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                 {s32, p0, s32, 8},</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                 {s64, p0, s8, 2},</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                 {s64, p0, s16, 2},</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                 {s64, p0, s32, 4},</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                 {s64, p0, s64, 8},</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                 {p0, p0, s64, 8},</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                 {v2s32, p0, s64, 8}})</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      .clampScalar(0, s32, s64)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// TODO: We could support sum-of-pow2&#39;s but the lowering code doesn&#39;t know</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">//       how to do that yet.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      .unsupportedIfMemSizeNotPow2()</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// Lower anything left over into G_*EXT and G_LOAD</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      .lower();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keyword">auto</span> IsPtrVecPred = [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;ValTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (!ValTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = ValTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> EltTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp; EltTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>() == 0;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  };</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_LOAD)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">customIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">return</span> HasRCPC3 &amp;&amp; Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == s128 &amp;&amp;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;               Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      })</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == s128 &amp;&amp;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;               Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering != <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      })</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      .legalForTypesWithMemDesc({{s8, p0, s8, 8},</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                 {s16, p0, s16, 8},</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                 {s32, p0, s32, 8},</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                 {s64, p0, s64, 8},</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                 {p0, p0, s64, 8},</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                 {s128, p0, s128, 8},</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                 {v8s8, p0, s64, 8},</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                 {v16s8, p0, s128, 8},</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                 {v4s16, p0, s64, 8},</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                 {v8s16, p0, s128, 8},</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                 {v2s32, p0, s64, 8},</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                 {v4s32, p0, s128, 8},</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                 {v2s64, p0, s128, 8}})</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// These extends are also legal</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      .legalForTypesWithMemDesc({{s32, p0, s8, 8}, {s32, p0, s16, 8}})</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      .widenScalarToNextPow2(0, <span class="comment">/* MinSize = */</span> 8)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a9baba9f2d47d7728dd072376019e76eb">lowerIfMemSizeNotByteSizePow2</a>()</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s8, s64)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aa9f892eaf83d016fd0bdbc120f07af27">narrowScalarIf</a>(</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">// Clamp extending load results to 32-bits.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isScalar() &amp;&amp;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                   Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] != Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy &amp;&amp;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                   Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getSizeInBits() &gt; 32;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          },</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, s32))</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      .clampMaxNumElements(0, s8, 16)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s16, 8)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s32, 4)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s64, 2)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, p0, 2)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">customIf</a>(IsPtrVecPred)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a4aa85b84b3eaff6cb545b87118abc793">scalarizeIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, v2s16), 0);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_STORE)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">customIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">return</span> HasRCPC3 &amp;&amp; Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == s128 &amp;&amp;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;               Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      })</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == s128 &amp;&amp;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;               Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering != <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      })</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      .legalForTypesWithMemDesc(</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          {{s8, p0, s8, 8},     {s16, p0, s8, 8},  <span class="comment">// truncstorei8 from s16</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;           {s32, p0, s8, 8},                       <span class="comment">// truncstorei8 from s32</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;           {s64, p0, s8, 8},                       <span class="comment">// truncstorei8 from s64</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;           {s16, p0, s16, 8},   {s32, p0, s16, 8}, <span class="comment">// truncstorei16 from s32</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;           {s64, p0, s16, 8},                      <span class="comment">// truncstorei16 from s64</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;           {s32, p0, s8, 8},    {s32, p0, s16, 8},    {s32, p0, s32, 8},</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;           {s64, p0, s64, 8},   {s64, p0, s32, 8}, <span class="comment">// truncstorei32 from s64</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;           {p0, p0, s64, 8},    {s128, p0, s128, 8},  {v16s8, p0, s128, 8},</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;           {v8s8, p0, s64, 8},  {v4s16, p0, s64, 8},  {v8s16, p0, s128, 8},</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;           {v2s32, p0, s64, 8}, {v4s32, p0, s128, 8}, {v2s64, p0, s128, 8}})</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      .clampScalar(0, s8, s64)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a18b0ffd870be993f70b6e05a55b88df6">lowerIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isScalar() &amp;&amp;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;               Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] != Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      })</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">// Maximum: sN * k = 128</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      .clampMaxNumElements(0, s8, 16)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s16, 8)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s32, 4)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, s64, 2)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, p0, 2)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a5663a878fb2d06ca571e828e50638765">lowerIfMemSizeNotPow2</a>()</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">customIf</a>(IsPtrVecPred)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a4aa85b84b3eaff6cb545b87118abc793">scalarizeIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, v2s16), 0);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// Constants</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CONSTANT)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0, s8, s16, s32, s64})</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s8, s64);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FCONSTANT)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> (HasFP16 &amp;&amp; Ty == s16)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">return</span> Ty == s32 || Ty == s64 || Ty == s128;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      })</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      .clampScalar(0, MinFPScalar, s128);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_ICMP, G_FCMP})</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      .legalFor({{s32, s32},</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                 {s32, s64},</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                 {s32, p0},</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                 {v4s32, v4s32},</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                 {v2s32, v2s32},</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                 {v2s64, v2s64},</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                 {v2s64, v2p0},</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                 {v4s16, v4s16},</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                 {v8s16, v8s16},</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                 {v8s8, v8s8},</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                 {v16s8, v16s8}})</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#ac48512a9f1e26744de1b6940b4adb68f">widenScalarOrEltToNextPow2</a>(1)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      .clampScalar(1, s32, s64)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      .clampScalar(0, s32, s32)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      .minScalarEltSameAsIf(</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;SrcTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; !SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                   Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() != SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          },</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          0, 1)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1] == v2s16; },</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          1, s32)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1] == v2p0; }, 0,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          s64)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      .clampNumElements(0, v2s32, v4s32);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// Extensions</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keyword">auto</span> ExtLegalFunc = [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">unsigned</span> DstSize = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getSizeInBits();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (DstSize == 128 &amp;&amp; !Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isVector())</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Extending to a scalar s128 needs narrowing.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Make sure that we have something that will fit in a register, and</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// make sure it&#39;s a power of 2.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (DstSize &lt; 8 || DstSize &gt; 128 || !<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(DstSize))</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;SrcTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// Make sure we fit in a register otherwise. Don&#39;t bother checking that</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// the source type is below 128 bits. We shouldn&#39;t be allowing anything</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">// through which is wider than the destination in the first place.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">unsigned</span> SrcSize = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (SrcSize &lt; 8 || !<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(SrcSize))</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  };</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_ZEXT, G_SEXT, G_ANYEXT})</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      .legalIf(ExtLegalFunc)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s64, s64); <span class="comment">// Just for s128, others are handled above.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_TRUNC)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aa506a47183fac5ee47075d2107b0ee9b">minScalarOrEltIf</a>(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isVector(); },</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          0, s8)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">return</span> DstTy == v8s8 &amp;&amp; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 128;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      })</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      .alwaysLegal();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_SEXT_INREG)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({s32, s64})</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      .legalFor(PackedVectorAllTypeList)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// FP conversions</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FPTRUNC)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>(</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          {{s16, s32}, {s16, s64}, {s32, s64}, {v4s16, v4s32}, {v2s32, v2s64}})</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      .clampMaxNumElements(0, s32, 2);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FPEXT)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>(</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          {{s32, s16}, {s64, s16}, {s64, s32}, {v4s32, v4s16}, {v2s64, v2s32}})</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      .clampMaxNumElements(0, s64, 2);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// Conversions</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FPTOSI, G_FPTOUI})</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      .legalForCartesianProduct({s32, s64, v2s64, v4s32, v2s32})</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(1)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(1, s32, s64);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SITOFP, G_UITOFP})</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      .legalForCartesianProduct({s32, s64, v2s64, v4s32, v2s32})</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      .clampScalar(1, s32, s64)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a7e81ea6beb36738551abb34dcb38b5b8">minScalarSameAs</a>(1, 0)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// Control-flow</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BRCOND)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({s32})</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    .clampScalar(0, s32, s32);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BRINDIRECT).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0});</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_SELECT)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{s32, s32}, {s64, s32}, {p0, s32}})</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(1, s32, s32)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ad5a00fa9f24d73763b95b09c6558b66d">minScalarEltSameAsIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">isVector</a>(0), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">isVector</a>(1)), 1, 0)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a18b0ffd870be993f70b6e05a55b88df6">lowerIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">isVector</a>(0));</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Pointer-handling</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FRAME_INDEX).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0});</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getCodeModel() == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">CodeModel::Small</a>)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_GLOBAL_VALUE).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a62e6c26793769f611ca8477969c1d686">custom</a>();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_GLOBAL_VALUE).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0});</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_PTRTOINT)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{s64, p0}, {v2s64, v2p0}})</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      .widenScalarToNextPow2(0, 64)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s64, s64);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_INTTOPTR)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a5afa3595ce58ce9b516cb34303b31f94">unsupportedIf</a>([&amp;](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getSizeInBits() != Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getSizeInBits();</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      })</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      .legalFor({{p0, s64}, {v2p0, v2s64}});</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// Casts for 32 and 64-bit width type are just copies.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// Same for 128-bit width type, except they are on the FPR bank.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BITCAST)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="comment">// FIXME: This is wrong since G_BITCAST is not allowed to change the</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="comment">// number of bits but it&#39;s what the previous code described and fixing</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="comment">// it breaks tests.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a676390425ab5f53d99d702c3b8f15637">legalForCartesianProduct</a>({s8, s16, s32, s64, s128, v16s8, v8s8, v4s8,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                 v8s16, v4s16, v2s16, v4s32, v2s32, v2s64,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                 v2p0});</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_VASTART).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0});</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// va_list must be a pointer, but most sized types are pretty easy to handle</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// as the destination.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_VAARG)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8666d04f21c45d113eb29a8cc76dae2f">customForCartesianProduct</a>({s8, s16, s32, s64, p0}, {p0})</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      .clampScalar(0, s8, s64)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, <span class="comment">/*Min*/</span> 8);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_ATOMIC_CMPXCHG_WITH_SUCCESS)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a18b0ffd870be993f70b6e05a55b88df6">lowerIf</a>(</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          <a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s8, s16, s32, s64, s128}), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(2, p0)));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_ATOMIC_CMPXCHG)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">customIf</a>([](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getSizeInBits() == 128;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      })</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      .clampScalar(0, s32, s64)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s32, s64}), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, p0)));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      {G_ATOMICRMW_XCHG, G_ATOMICRMW_ADD, G_ATOMICRMW_SUB, G_ATOMICRMW_AND,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;       G_ATOMICRMW_OR, G_ATOMICRMW_XOR, G_ATOMICRMW_MIN, G_ATOMICRMW_MAX,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;       G_ATOMICRMW_UMIN, G_ATOMICRMW_UMAX})</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      .clampScalar(0, s32, s64)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s32, s64}), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, p0)));</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BLOCK_ADDR).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({p0});</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// Merge/Unmerge</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {G_MERGE_VALUES, G_UNMERGE_VALUES}) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordtype">unsigned</span> BigTyIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_MERGE_VALUES ? 0 : 1;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">unsigned</span> LitTyIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_MERGE_VALUES ? 1 : 0;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(LitTyIdx, 8)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(BigTyIdx, 32)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(LitTyIdx, s8, s64)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(BigTyIdx, s32, s128)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;          <span class="keywordflow">switch</span> (Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx].getSizeInBits()) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;          case 32:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          case 64:</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          case 128:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            break;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          default:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            return false;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;          switch (Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[LitTyIdx].getSizeInBits()) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          case 8:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;          case 16:</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;          case 32:</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          case 64:</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            return true;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          default:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            return false;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;          }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        });</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_EXTRACT_VECTOR_ELT)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a5afa3595ce58ce9b516cb34303b31f94">unsupportedIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;EltTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getElementType();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] != EltTy;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      })</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      .minScalar(2, s64)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;VecTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">return</span> VecTy == v2s16 || VecTy == v4s16 || VecTy == v8s16 ||</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;               VecTy == v4s32 || VecTy == v2s64 || VecTy == v2s32 ||</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;               VecTy == v8s8 || VecTy == v16s8 || VecTy == v2s32 ||</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;               VecTy == v2p0;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      })</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment">// We want to promote to &lt;M x s1&gt; to &lt;M x s64&gt; if that wouldn&#39;t</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="comment">// cause the total vec size to be &gt; 128b.</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getNumElements() &lt;= 2;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;          },</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;          0, s64)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getNumElements() &lt;= 4;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;          },</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;          0, s32)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getNumElements() &lt;= 8;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          },</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;          0, s16)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      .minScalarOrEltIf(</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getNumElements() &lt;= 16;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          },</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;          0, s8)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      .minScalarOrElt(0, s8) <span class="comment">// Worst case, we need at least s8.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(1, s64, 2)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(1, s32, 4)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(1, s16, 8)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(1, p0, 2);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_INSERT_VECTOR_ELT)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {v8s16, v2s32, v4s32, v2s64}));</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BUILD_VECTOR)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{v8s8, s8},</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                 {v16s8, s8},</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                 {v2s16, s16},</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                 {v4s16, s16},</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                 {v8s16, s16},</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                 {v2s32, s32},</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                 {v4s32, s32},</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                 {v2p0, p0},</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                 {v2s64, s64}})</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      .clampNumElements(0, v4s32, v4s32)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s64, v2s64)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8708e86d87fcf4704d3904153529f36c">minScalarOrElt</a>(0, s8)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a7e81ea6beb36738551abb34dcb38b5b8">minScalarSameAs</a>(1, 0);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BUILD_VECTOR_TRUNC).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CTLZ)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a676390425ab5f53d99d702c3b8f15637">legalForCartesianProduct</a>(</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;          {s32, s64, v8s8, v16s8, v4s16, v8s16, v2s32, v4s32})</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(1);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CTLZ_ZERO_UNDEF).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">// TODO: Custom lowering for v2s32, v4s32, v2s64.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BITREVERSE)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({s32, s64, v8s8, v16s8})</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      .widenScalarToNextPow2(0, <span class="comment">/*Min = */</span> 32)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CTTZ_ZERO_UNDEF).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CTTZ)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a18b0ffd870be993f70b6e05a55b88df6">lowerIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">isVector</a>(0))</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, s32, s64)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#adeb8194bb034b096faa148ff246595a1">scalarSameSizeAs</a>(1, 0)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">return</span> (HasCSSC &amp;&amp; <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s32, s64})(Query));</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      })</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> (!HasCSSC &amp;&amp; <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {s32, s64})(Query));</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      });</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_SHUFFLE_VECTOR)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;DstTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;SrcTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="comment">// For now just support the TBL2 variant which needs the source vectors</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="comment">// to be the same size as the dest.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">if</span> (DstTy != SrcTy)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>({v2s32, v4s32, v2s64, v2p0, v16s8, v8s16},</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                                  DstTy);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      })</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="comment">// G_SHUFFLE_VECTOR can have scalar sources (from 1 x s vectors), we</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">// just want those lowered into G_BUILD_VECTOR</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      .lowerIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">return</span> !Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].isVector();</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      })</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      .moreElementsIf(</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;          [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isVector() &amp;&amp; Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].isVector() &amp;&amp;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                   Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getNumElements() &gt;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                       Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getNumElements();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;          },</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;          <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(1, 0))</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a039bb9a10ad812f936f4325facc13ab3">moreElementsToNextPow2</a>(0)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      .clampNumElements(0, v4s32, v4s32)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      .clampNumElements(0, v2s64, v2s64);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CONCAT_VECTORS)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{v4s32, v2s32}, {v8s16, v4s16}, {v16s8, v8s8}});</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_JUMP_TABLE).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{p0}, {s64}});</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BRJT).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] == p0 &amp;&amp; Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1] == s64;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  });</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_DYN_STACKALLOC).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">if</span> (ST.hasMOPS()) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// G_BZERO is not supported. Currently it is only emitted by</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// PreLegalizerCombiner for G_MEMSET with zero constant.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BZERO).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1a6ccaca8abe3ac60dd270f1f2058948">unsupported</a>();</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_MEMSET)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a676390425ab5f53d99d702c3b8f15637">legalForCartesianProduct</a>({p0}, {s64}, {s64})</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        .customForCartesianProduct({p0}, {s8}, {s64})</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        .immIdx(0); <span class="comment">// Inform verifier imm idx 0 is handled.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_MEMCPY, G_MEMMOVE})</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        .legalForCartesianProduct({p0}, {p0}, {s64})</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        .immIdx(0); <span class="comment">// Inform verifier imm idx 0 is handled.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// G_MEMCPY_INLINE does not have a tailcall immediate</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_MEMCPY_INLINE)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a676390425ab5f53d99d702c3b8f15637">legalForCartesianProduct</a>({p0}, {p0}, {s64});</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_BZERO, G_MEMCPY, G_MEMMOVE, G_MEMSET})</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        .<a class="code" href="lib_2CodeGen_2README_8txt.html#a3625bbe909f59184d26d2652d7f5119b">libcall</a>();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// FIXME: Legal vector types are only legal with NEON.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keyword">auto</span> &amp;ABSActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_ABS);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (HasCSSC)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    ABSActions</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        .legalFor({s32, s64});</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  ABSActions</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      .legalFor(PackedVectorAllTypeList)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      .lowerIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">isScalar</a>(0));</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_VECREDUCE_FADD)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <span class="comment">// We only have FADDP to do reduction-like operations. Lower the rest.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{s32, v2s32}, {s64, v2s64}})</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      .clampMaxNumElements(1, s64, 2)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(1, s32, 2)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_VECREDUCE_ADD)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>(</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;          {{s8, v16s8}, {s16, v8s16}, {s32, v4s32}, {s32, v2s32}, {s64, v2s64}})</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      .clampMaxNumElements(1, s64, 2)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(1, s32, 4)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      {G_VECREDUCE_OR, G_VECREDUCE_AND, G_VECREDUCE_XOR})</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="comment">// Try to break down into smaller vectors as long as they&#39;re at least 64</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="comment">// bits. This lets us use vector operations for some parts of the</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="comment">// reduction.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      .fewerElementsIf(</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>())</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()))</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="comment">// We can usually perform 64b vector operations.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">return</span> SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 64;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;          },</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;          [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <span class="keywordflow">return</span> std::make_pair(1, SrcTy.<a class="code" href="classllvm_1_1LLT.html#af11a4c235044d52af7fbf840dec3f278">divide</a>(2));</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;          })</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(1)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      .lower();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_UADDSAT, G_USUBSAT})</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      .lowerIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) { <span class="keywordflow">return</span> Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isScalar(); });</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FSHL, G_FSHR}).lower();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_ROTR)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{s32, s64}, {s64, s64}})</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">return</span> Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isScalar() &amp;&amp; Q.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getScalarSizeInBits() &lt; 64;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      })</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      .lower();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_ROTL).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SBFX, G_UBFX})</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      .customFor({{s32, s32}, {s64, s64}});</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a51c635ed823e77c829c813f0dc2f72f9">always</a> = [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) { <span class="keywordflow">return</span> <span class="keyword">true</span>; };</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keyword">auto</span> &amp;CTPOPActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CTPOP);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> (HasCSSC)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    CTPOPActions</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        .legalFor({{s32, s32},</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                   {s64, s64},</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                   {v8s8, v8s8},</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                   {v16s8, v16s8}})</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        .customFor({{s128, s128},</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                    {v2s64, v2s64},</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                    {v2s32, v2s32},</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                    {v4s32, v4s32},</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    {v4s16, v4s16},</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                    {v8s16, v8s16}});</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    CTPOPActions</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        .legalFor({{v8s8, v8s8},</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                   {v16s8, v16s8}})</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        .customFor({{s32, s32},</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                    {s64, s64},</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                    {s128, s128},</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                    {v2s64, v2s64},</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                    {v2s32, v2s32},</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                    {v4s32, v4s32},</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                    {v4s16, v4s16},</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                    {v8s16, v8s16}});</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  CTPOPActions</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      .clampScalar(0, s32, s128)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      .minScalarEltSameAsIf(<a class="code" href="lib_2Target_2X86_2README_8txt.html#a51c635ed823e77c829c813f0dc2f72f9">always</a>, 1, 0)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      .maxScalarEltSameAsIf(<a class="code" href="lib_2Target_2X86_2README_8txt.html#a51c635ed823e77c829c813f0dc2f72f9">always</a>, 1, 0);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// TODO: Vector types.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SADDSAT, G_SSUBSAT}).lowerIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">isScalar</a>(0));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// TODO: Vector types.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FMAXNUM, G_FMINNUM})</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      .legalFor({MinFPScalar, s32, s64})</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      .libcallFor({s128})</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      .minScalar(0, MinFPScalar);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FMAXIMUM, G_FMINIMUM})</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      .legalFor({MinFPScalar, s32, s64, v2s32, v4s32, v2s64})</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      .legalIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">return</span> (Ty == v8s16 || Ty == v4s16) &amp;&amp; HasFP16;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      })</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      .minScalar(0, MinFPScalar)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v4s16, v8s16)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s32, v4s32)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">clampNumElements</a>(0, v2s64, v2s64);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// TODO: Libcall support for s128.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// TODO: s16 should be legal with full FP16 support.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_LROUND, G_LLROUND})</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      .legalFor({{s64, s32}, {s64, s64}});</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// TODO: Custom legalization for vector types.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// TODO: Custom legalization for mismatched types.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// TODO: s16 support.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FCOPYSIGN).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({{s32, s32}, {s64, s64}});</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FMAD).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a29bf34090f1f9800ad8faa1e0fe5a2c6">getLegacyLegalizerInfo</a>().<a class="code" href="classllvm_1_1LegacyLegalizerInfo.html#a6b586580f1e35e04ae0f3186fadd6594">computeTables</a>();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a9801185bc6472dc541877662983e7414">verify</a>(*ST.getInstrInfo());</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64LegalizerInfo.html#a96b31c593d1715c4146e1414b69b87a9">  898</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64LegalizerInfo.html#a96b31c593d1715c4146e1414b69b87a9">AArch64LegalizerInfo::legalizeCustom</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                                          <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">// No idea what to do.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VAARG:</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">return</span> legalizeVaArg(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, MIRBuilder);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD:</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STORE:</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> legalizeLoadStore(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, MIRBuilder, Observer);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SHL:</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ASHR:</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LSHR:</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">return</span> legalizeShlAshrLshr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, MIRBuilder, Observer);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_GLOBAL_VALUE:</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span> legalizeSmallCMGlobalValue(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, MIRBuilder, Observer);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_TRUNC:</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">return</span> legalizeVectorTrunc(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SBFX:</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UBFX:</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">return</span> legalizeBitfieldExtract(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Helper);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ROTR:</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">return</span> legalizeRotate(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Helper);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTPOP:</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> legalizeCTPOP(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Helper);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMIC_CMPXCHG:</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> legalizeAtomicCmpxchg128(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Helper);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ:</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> legalizeCTTZ(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BZERO:</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMCPY:</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMMOVE:</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMSET:</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">return</span> legalizeMemOps(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCOPYSIGN:</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span> legalizeFCopySign(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;expected switch to return&quot;</span>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeRotate(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                          <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                          <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// To allow for imported patterns to match, we ensure that the rotate amount</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// is 64b with an extension.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AmtReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> AmtTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(AmtReg);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  (void)AmtTy;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AmtTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; <span class="stringliteral">&quot;Expected a scalar rotate&quot;</span>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AmtTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 64 &amp;&amp; <span class="stringliteral">&quot;Expected this rotate to be legal&quot;</span>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keyword">auto</span> NewAmt = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), AmtReg);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).setReg(NewAmt.getReg(0));</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;}</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="AArch64LegalizerInfo_8cpp.html#a48fe09df24526087def4dfeed2933cbd">  960</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64LegalizerInfo_8cpp.html#a48fe09df24526087def4dfeed2933cbd">extractParts</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder, <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty, <span class="keywordtype">int</span> NumParts,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;VRegs) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumParts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    VRegs.push_back(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(Ty));</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(VRegs, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeVectorTrunc(</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>();</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// Similar to how operand splitting is done in SelectiondDAG, we can handle</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// %res(v8s8) = G_TRUNC %in(v8s32) by generating:</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">//   %inlo(&lt;4x s32&gt;), %inhi(&lt;4 x s32&gt;) = G_UNMERGE %in(&lt;8 x s32&gt;)</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">//   %lo16(&lt;4 x s16&gt;) = G_TRUNC %inlo</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">//   %hi16(&lt;4 x s16&gt;) = G_TRUNC %inhi</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="comment">//   %in16(&lt;8 x s16&gt;) = G_CONCAT_VECTORS %lo16, %hi16</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">//   %res(&lt;8 x s8&gt;) = G_TRUNC %in16</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(llvm::has_single_bit&lt;uint32_t&gt;(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) &amp;&amp;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;         llvm::has_single_bit&lt;uint32_t&gt;(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// Split input type.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SplitSrcTy =</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      SrcTy.<a class="code" href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">changeElementCount</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ae7510a639ca53c1bfa1c90c6dfc7eb2e">divideCoefficientBy</a>(2));</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">// First, split the source into two smaller vectors.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> SplitSrcs;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="AArch64LegalizerInfo_8cpp.html#a48fe09df24526087def4dfeed2933cbd">extractParts</a>(SrcReg, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, MIRBuilder, SplitSrcTy, 2, SplitSrcs);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// Truncate the splits into intermediate narrower elements.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> InterTy = SplitSrcTy.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() * 2);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; SplitSrcs.size(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    SplitSrcs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(InterTy, SplitSrcs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">buildConcatVectors</a>(</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      DstTy.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() * 2), SplitSrcs);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(<a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>.getReg(0));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeSmallCMGlobalValue(</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder,</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_GLOBAL_VALUE);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">// We do this custom legalization to convert G_GLOBAL_VALUE into target ADRP +</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="comment">// G_ADD_LOW instructions.</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// By splitting this here, we can optimize accesses in the small code model by</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="comment">// folding in the G_ADD_LOW into the load/store offset.</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keyword">auto</span> &amp;GlobalOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>* GV = GlobalOp.getGlobal();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">if</span> (GV-&gt;isThreadLocal())</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Don&#39;t want to modify TLS vars.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#aa4c9f6d9092cf5ca3819973f4b297050">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1TargetLoweringBase.html#a1ae2ee148379ed3d041b4bce586f7f99">getTargetMachine</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordtype">unsigned</span> OpFlags = ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#aa2bf24e995494a7c64d8f3e02818ad30">ClassifyGlobalReference</a>(GV, <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">if</span> (OpFlags &amp; <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a4144c2ee93286fba09bd8f14fb11f27a">AArch64II::MO_GOT</a>)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = GlobalOp.getOffset();</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">ADRP</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">AArch64::ADRP</a>, {<a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(0, 64)}, {})</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                  .addGlobalAddress(GV, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, OpFlags | <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a7f04634c15a04a59d5f234002e613b5b">AArch64II::MO_PAGE</a>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="comment">// Set the regclass on the dest reg too.</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(<a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">ADRP</a>.getReg(0), &amp;AArch64::GPR64RegClass);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// MO_TAGGED on the page indicates a tagged address. Set the tag now. We do so</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// by creating a MOVK that sets bits 48-63 of the register to (global address</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="comment">// + 0x100000000 - PC) &gt;&gt; 48. The additional 0x100000000 offset here is to</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// prevent an incorrect tag being generated during relocation when the the</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// global appears before the code section. Without the offset, a global at</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="comment">// `0x0f00&#39;0000&#39;0000&#39;1000` (i.e. at `0x1000` with tag `0xf`) that&#39;s referenced</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// by code at `0x2000` would result in `0x0f00&#39;0000&#39;0000&#39;1000 - 0x2000 =</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// 0x0eff&#39;ffff&#39;ffff&#39;f000`, meaning the tag would be incorrectly set to `0xe`</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// instead of `0xf`.</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// This assumes that we&#39;re in the small code model so we can assume a binary</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// size of &lt;= 4GB, which makes the untagged PC relative offset positive. The</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// binary must also be loaded into address range [0, 2^48). Both of these</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="comment">// properties need to be ensured at runtime when using tagged addresses.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">if</span> (OpFlags &amp; <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71aefb2c1834e49df9715967d4a2c9c99e8">AArch64II::MO_TAGGED</a>) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &amp;&amp;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;           <span class="stringliteral">&quot;Should not have folded in an offset for a tagged global!&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">ADRP</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(AArch64::MOVKXi, {<a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(0, 64)}, {<a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">ADRP</a>})</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;               .addGlobalAddress(GV, 0x100000000,</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                                 <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a4ac8a83c3f27cf2acb3928c64c07f1db">AArch64II::MO_PREL</a> | <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71af2217d25138eade76a256c4c3dc131bd">AArch64II::MO_G3</a>)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;               .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(48);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(<a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">ADRP</a>.getReg(0), &amp;AArch64::GPR64RegClass);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(AArch64::G_ADD_LOW, {DstReg}, {<a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">ADRP</a>})</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      .addGlobalAddress(GV, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                        OpFlags | <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a3a5053185998bdf24f3167c234915785">AArch64II::MO_PAGEOFF</a> | <a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a028a4adc46c746ba1501e1e6fefb54cc">AArch64II::MO_NC</a>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;}</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"><a class="line" href="classllvm_1_1AArch64LegalizerInfo.html#aa48b853fae2f40e3e483078a944ab8d1"> 1064</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AArch64LegalizerInfo.html#aa48b853fae2f40e3e483078a944ab8d1">AArch64LegalizerInfo::legalizeIntrinsic</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                             <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getIntrinsicID()) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">case</span> Intrinsic::vacopy: {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordtype">unsigned</span> PtrSize = ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#a59137b132e07516767761d5decf7e252">isTargetILP32</a>() ? 4 : 8;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordtype">unsigned</span> VaListSize =</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      (ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#a4d2e6b50d2d120966b45253b1ad825b4">isTargetDarwin</a>() || ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#a05fb81a3747dd4f76894a66c574cf99e">isTargetWindows</a>())</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;          ? PtrSize</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;          : ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#a59137b132e07516767761d5decf7e252">isTargetILP32</a>() ? 20 : 32;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keyword">auto</span> Val = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(VaListSize * 8));</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(Val, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2),</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                  *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(<a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(),</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                                           <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                                           VaListSize, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(PtrSize)));</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(Val, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1),</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                   *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(<a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(),</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                                            <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a>,</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                            VaListSize, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(PtrSize)));</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordflow">case</span> Intrinsic::get_dynamic_area_offset: {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIB = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), 0);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="keywordflow">case</span> Intrinsic::aarch64_mops_memset_tag: {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_INTRINSIC_W_SIDE_EFFECTS);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="comment">// Zext the value to 64 bit</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1Value.html">Value</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ZExtValueReg = MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a class="code" href="classllvm_1_1Value.html">Value</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>.setReg(ZExtValueReg);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="LoopDataPrefetch_8cpp.html#af1aa8156fe6dc9478d31e05cf3c1eb9b">Intrinsic::prefetch</a>: {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keyword">auto</span> &amp;AddrVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    int64_t IsWrite = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    int64_t Locality = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getImm();</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    int64_t IsData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getImm();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordtype">bool</span> IsStream = Locality == 0;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">if</span> (Locality != 0) {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Locality &lt;= 3 &amp;&amp; <span class="stringliteral">&quot;Prefetch locality out-of-range&quot;</span>);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="comment">// The locality degree is the opposite of the cache speed.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="comment">// Put the number the other way around.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="comment">// The encoding starts at 0 for level 1</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      Locality = 3 - Locality;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordtype">unsigned</span> PrfOp =</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        (IsWrite &lt;&lt; 4) | (!IsData &lt;&lt; 3) | (Locality &lt;&lt; 1) | IsStream;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(AArch64::G_PREFETCH).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(PrfOp).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(AddrVal);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">case</span> Intrinsic::aarch64_prefetch: {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keyword">auto</span> &amp;AddrVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    int64_t IsWrite = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    int64_t <a class="code" href="classllvm_1_1Target.html">Target</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getImm();</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    int64_t IsStream = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getImm();</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    int64_t IsData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getImm();</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordtype">unsigned</span> PrfOp = (IsWrite &lt;&lt; 4) |    <span class="comment">// Load/Store bit</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                     (!IsData &lt;&lt; 3) |    <span class="comment">// IsDataCache bit</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                     (<a class="code" href="classllvm_1_1Target.html">Target</a> &lt;&lt; 1) |     <span class="comment">// Cache level bits</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                     (<span class="keywordtype">unsigned</span>)IsStream; <span class="comment">// Stream bit</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(AArch64::G_PREFETCH).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(PrfOp).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(AddrVal);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeShlAshrLshr(</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder,</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_ASHR ||</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;         <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_LSHR ||</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;         <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SHL);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// If the shift amount is a G_CONSTANT, promote it to a 64 bit type so the</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// imported patterns can select it later. Either way, it will be legal.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AmtReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keyword">auto</span> VRegAndVal = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(AmtReg, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordflow">if</span> (!VRegAndVal)</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// Check the shift amount is in range for an immediate form.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  int64_t Amount = VRegAndVal-&gt;Value.getSExtValue();</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">if</span> (Amount &gt; 31)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// This will have to remain a register variant.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keyword">auto</span> ExtCst = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), Amount);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).setReg(ExtCst.getReg(0));</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;}</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"><a class="line" href="AArch64LegalizerInfo_8cpp.html#a6d09e7d04791679e440be7ed52480db8"> 1174</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AArch64LegalizerInfo_8cpp.html#a6d09e7d04791679e440be7ed52480db8">matchLDPSTPAddrMode</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> Root, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;Base, <span class="keywordtype">int</span> &amp;<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                                <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = Root;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewBase;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  int64_t NewOffset;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MIPatternMatch.html#aa9bd186f4281a367fb872d17d0e7728b">mi_match</a>(Root, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="namespacellvm_1_1MIPatternMatch.html#abef0dedc73ed9227d3b97209d619ee72">m_GPtrAdd</a>(<a class="code" href="namespacellvm_1_1MIPatternMatch.html#a00b04b7613c62a52917e1d2467faeab0">m_Reg</a>(NewBase), <a class="code" href="namespacellvm_1_1MIPatternMatch.html#a316dd9aa25d9ec9d6d21b56e4296e824">m_ICst</a>(NewOffset))) &amp;&amp;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      isShiftedInt&lt;7, 3&gt;(NewOffset)) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = NewBase;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = NewOffset;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;}</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">// FIXME: This should be removed and replaced with the generic bitcast legalize</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">// action.</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeLoadStore(</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder,</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_STORE ||</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;         <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_LOAD);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// Here we just try to handle vector loads/stores where our value type might</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// have pointer elements, which the SelectionDAG importer can&#39;t handle. To</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// allow the existing patterns for s64 to fire for p0, we just try to bitcast</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">// the value to use s64 types.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// Custom legalization requires the instruction, if not deleted, must be fully</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="comment">// legalized. In order to allow further legalization of the inst, we create</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="comment">// a new instruction and erase the existing one.</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ValReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> ValTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(ValReg);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">if</span> (ValTy == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128)) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> Ordering = (*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin())-&gt;getSuccessOrdering();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordtype">bool</span> IsLoad = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_LOAD;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordtype">bool</span> IsLoadAcquire = IsLoad &amp;&amp; Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordtype">bool</span> IsStoreRelease = !IsLoad &amp;&amp; Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordtype">bool</span> IsRcpC3 =</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        ST-&gt;hasLSE2() &amp;&amp; ST-&gt;hasRCPC3() &amp;&amp; (IsLoadAcquire || IsStoreRelease);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> s64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordtype">unsigned</span> Opcode;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (IsRcpC3) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      Opcode = IsLoad ? AArch64::LDIAPPX : AArch64::STILPX;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="comment">// For LSE2, loads/stores should have been converted to monotonic and had</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="comment">// a fence inserted after them.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac">AtomicOrdering::Monotonic</a> ||</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;             Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">AtomicOrdering::Unordered</a>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST-&gt;hasLSE2() &amp;&amp; <span class="stringliteral">&quot;ldp/stp not single copy atomic without +lse2&quot;</span>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      Opcode = IsLoad ? AArch64::LDPXi : AArch64::STPXi;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> NewI;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (IsLoad) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      NewI = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opcode, {s64, s64}, {});</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;          ValReg, {NewI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0), NewI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1)});</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(s64, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0));</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      NewI = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;          Opcode, {}, {<a class="code" href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>-&gt;getOperand(1)});</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">if</span> (IsRcpC3) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      NewI.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <a class="code" href="AArch64LegalizerInfo_8cpp.html#a6d09e7d04791679e440be7ed52480db8">matchLDPSTPAddrMode</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(), Base, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      NewI.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(Base);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      NewI.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> / 8);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    NewI.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#afb84ad0ad64ed2a34f473bbacc268501">cloneMemRefs</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="namespacellvm.html#a2a0be879cebaa17d623212f729b1d4b1">constrainSelectedInstRegOperands</a>(*NewI, *ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">getInstrInfo</a>(),</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                                     *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aed4562ccf898feaf2eb6cf5555b5084d">getTargetRegisterInfo</a>(),</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                                     *ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#af2f55f16e39b3b5b9047278790c2cb15">getRegBankInfo</a>());</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160; </div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">if</span> (!ValTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() || !ValTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() ||</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      ValTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>() != 0) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Tried to do custom legalization on wrong load/store&quot;</span>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="keywordtype">unsigned</span> PtrSize = ValTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewTy = <a class="code" href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(ValTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>(), PtrSize);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="keyword">auto</span> &amp;MMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  MMO.setType(NewTy);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_STORE) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(NewTy, ValReg);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(<a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>.getReg(0), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1), MMO);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keyword">auto</span> NewLoad = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(NewTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1), MMO);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(ValReg, NewLoad);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;}</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeVaArg(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm());</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ListPtr = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(ListPtr);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntPtrTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> PtrSize = PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / 8;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> PtrAlign = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(PtrSize);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keyword">auto</span> <a class="code" href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      PtrTy, ListPtr,</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(<a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(), <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                               PtrTy, PtrAlign));</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> DstPtr;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">if</span> (Alignment &gt; PtrAlign) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="comment">// Realign the list to the actual required alignment.</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keyword">auto</span> AlignMinus1 =</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntPtrTy, Alignment.value() - 1);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keyword">auto</span> ListTmp = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">buildPtrAdd</a>(PtrTy, List, AlignMinus1.getReg(0));</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    DstPtr = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af6aed1d3b2cf7133b73cf8bfa5122186">buildMaskLowPtrBits</a>(PtrTy, ListTmp, <a class="code" href="namespacellvm.html#ad82de9da62635df78a534de0f16c1129">Log2</a>(Alignment));</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    DstPtr = <a class="code" href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ValTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ValSize = ValTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / 8;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      Dst, DstPtr,</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(<a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(), <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>,</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                               ValTy, <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Alignment, PtrAlign)));</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntPtrTy, <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ValSize, PtrAlign));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keyword">auto</span> NewList = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">buildPtrAdd</a>(PtrTy, DstPtr, <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>.getReg(0));</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(NewList, ListPtr,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                        *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(<a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(),</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a>,</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                                                 PtrTy, PtrAlign));</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;}</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeBitfieldExtract(</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// Only legal if we can select immediate forms.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// TODO: Lower this otherwise.</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) &amp;&amp;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;         <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg(), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeCTPOP(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                                         <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">// When there is no integer popcount instruction (FEAT_CSSC isn&#39;t available),</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// it can be more efficiently lowered to the following sequence that uses</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="comment">// AdvSIMD registers/instructions as long as the copies to/from the AdvSIMD</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// registers are cheap.</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">//  FMOV    D0, X0        // copy 64-bit int to vector, high bits zero&#39;d</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">//  CNT     V0.8B, V0.8B  // 8xbyte pop-counts</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">//  ADDV    B0, V0.8B     // sum 8xbyte pop-counts</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">//  UMOV    X0, V0.B[0]   // copy byte result back to integer reg</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">// For 128 bit vector popcounts, we lower to the following sequence:</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">//  cnt.16b   v0, v0  // v8s16, v4s32, v2s64</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">//  uaddlp.8h v0, v0  // v8s16, v4s32, v2s64</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">//  uaddlp.4s v0, v0  //        v4s32, v2s64</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">//  uaddlp.2d v0, v0  //               v2s64</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// For 64 bit vector popcounts, we lower to the following sequence:</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="comment">//  cnt.8b    v0, v0  // v4s16, v2s32</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">//  uaddlp.4h v0, v0  // v4s16, v2s32</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="comment">//  uaddlp.2s v0, v0  //        v2s32</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Val = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Val);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty == <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) &amp;&amp;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;         <span class="stringliteral">&quot;Expected src and dst to have the same type!&quot;</span>);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span> (ST-&gt;hasCSSC() &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; Size == 128) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> s64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(s64, Val);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keyword">auto</span> CTPOP1 = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">buildCTPOP</a>(s64, <a class="code" href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keyword">auto</span> CTPOP2 = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">buildCTPOP</a>(s64, <a class="code" href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(s64, CTPOP1, CTPOP2);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(Dst, Add);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="keywordflow">if</span> (!ST-&gt;hasNEON() ||</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF()-&gt;getFunction().hasFnAttribute(Attribute::NoImplicitFloat)) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">// Use generic lowering when custom lowering is not possible.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; (<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> == 32 || <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> == 64) &amp;&amp;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;           Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#a0b9d961c3e0a9fa4c0e9ce806e972c4c">lowerBitCount</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ==</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;               LegalizerHelper::LegalizeResult::Legalized;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// Pre-conditioning: widen Val up to the nearest vector type.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// s32,s64,v4s16,v2s32 -&gt; v8i8</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="comment">// v8s16,v4s32,v2s64 -&gt; v16i8</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VTy = <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> == 128 ? <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(16, 8) : <a class="code" href="classllvm_1_1LLT.html">LLT</a>::fixed_vector(8, 8);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Size == 32 || Size == 64 || Size == 128) &amp;&amp; <span class="stringliteral">&quot;Expected only 32, 64, or 128 bit scalars!&quot;</span>);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">if</span> (Size == 32) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      Val = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), Val).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  Val = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(VTy, Val).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// Count bits in each byte-sized lane.</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">CTPOP</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">buildCTPOP</a>(VTy, Val);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="comment">// Sum across lanes.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> HSum = <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">CTPOP</a>.getReg(0);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordtype">unsigned</span> Opc;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LLT&gt;</a> HAddTys;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    Opc = Intrinsic::aarch64_neon_uaddlv;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 16)) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    Opc = Intrinsic::aarch64_neon_uaddlp;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 16));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 32)) {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    Opc = Intrinsic::aarch64_neon_uaddlp;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 16));</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 32));</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 64)) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    Opc = Intrinsic::aarch64_neon_uaddlp;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 16));</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 32));</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 64));</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 16)) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    Opc = Intrinsic::aarch64_neon_uaddlp;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 16));</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 32)) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    Opc = Intrinsic::aarch64_neon_uaddlp;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 16));</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    HAddTys.push_back(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 32));</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unexpected vector shape&quot;</span>);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> UADD;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LLT.html">LLT</a> HTy : HAddTys) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    UADD = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acaf57b895cd34253ab64b053aa5b992b">buildIntrinsic</a>(Opc, {HTy}, <span class="comment">/*HasSideEffects =*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                     .addUse(HSum);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    HSum = UADD.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; </div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="comment">// Post-conditioning.</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; (Size == 64 || Size == 128))</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(Dst, UADD);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    UADD-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(Dst);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;}</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeAtomicCmpxchg128(</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> s64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keyword">auto</span> <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="keyword">auto</span> DesiredI = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>({s64, s64}, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2));</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keyword">auto</span> NewI = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>({s64, s64}, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3));</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keyword">auto</span> DstLo = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(s64);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="keyword">auto</span> DstHi = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(s64);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> CAS;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keywordflow">if</span> (ST-&gt;hasLSE()) {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="comment">// We have 128-bit CASP instructions taking XSeqPair registers, which are</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="comment">// s128. We need the merge/unmerge to bracket the expansion and pair up with</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// the rest of the MIR so we must reassemble the extracted registers into a</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="comment">// 128-bit known-regclass one with code like this:</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="comment">//     %in1 = REG_SEQUENCE Lo, Hi    ; One for each input</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="comment">//     %out = CASP %in1, ...</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">//     %OldLo = G_EXTRACT %out, 0</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="comment">//     %OldHi = G_EXTRACT %out, 64</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keyword">auto</span> Ordering = (*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin())-&gt;getMergedOrdering();</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordtype">unsigned</span> Opcode;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">switch</span> (Ordering) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>:</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      Opcode = AArch64::CASPAX;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      Opcode = AArch64::CASPLX;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>:</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>:</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      Opcode = AArch64::CASPALX;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      Opcode = AArch64::CASPX;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> s128 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keyword">auto</span> CASDst = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(s128);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keyword">auto</span> CASDesired = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(s128);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keyword">auto</span> CASNew = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(s128);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::REG_SEQUENCE, {CASDesired}, {})</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        .addUse(DesiredI-&gt;getOperand(0).getReg())</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(AArch64::sube64)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(DesiredI-&gt;getOperand(1).getReg())</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(AArch64::subo64);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::REG_SEQUENCE, {CASNew}, {})</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        .addUse(NewI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>())</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(AArch64::sube64)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(NewI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>())</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(AArch64::subo64);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    CAS = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opcode, {CASDst}, {CASDesired, CASNew, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>});</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">buildExtract</a>({DstLo}, {CASDst}, 0);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">buildExtract</a>({DstHi}, {CASDst}, 64);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// The -O0 CMP_SWAP_128 is friendlier to generate code for because LDXP/STXP</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="comment">// can take arbitrary registers so it just has the normal GPR64 operands the</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="comment">// rest of AArch64 is expecting.</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keyword">auto</span> Ordering = (*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin())-&gt;getMergedOrdering();</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordtype">unsigned</span> Opcode;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">switch</span> (Ordering) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>:</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      Opcode = AArch64::CMP_SWAP_128_ACQUIRE;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      Opcode = AArch64::CMP_SWAP_128_RELEASE;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>:</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>:</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      Opcode = AArch64::CMP_SWAP_128;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      Opcode = AArch64::CMP_SWAP_128_MONOTONIC;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keyword">auto</span> Scratch = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(&amp;AArch64::GPR64RegClass);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    CAS = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opcode, {DstLo, DstHi, Scratch},</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                                {<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, DesiredI-&gt;getOperand(0),</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                                 DesiredI-&gt;getOperand(1), NewI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0),</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                 NewI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1)});</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  CAS.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#afb84ad0ad64ed2a34f473bbacc268501">cloneMemRefs</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <a class="code" href="namespacellvm.html#a2a0be879cebaa17d623212f729b1d4b1">constrainSelectedInstRegOperands</a>(*CAS, *ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">getInstrInfo</a>(),</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                                   *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aed4562ccf898feaf2eb6cf5555b5084d">getTargetRegisterInfo</a>(),</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                   *ST-&gt;<a class="code" href="classllvm_1_1AArch64Subtarget.html#af2f55f16e39b3b5b9047278790c2cb15">getRegBankInfo</a>());</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), {DstLo, DstHi});</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;}</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeCTTZ(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                                        <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>();</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keyword">auto</span> BitReverse = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a828ddf4cfe2b05f70a6566d36b4804c5">buildBitReverse</a>(Ty, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a31c8e33dcb4c2c60d965227c227e8e">buildCTLZ</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), BitReverse);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;}</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160; </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeMemOps(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                                          <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// Tagged version MOPSMemorySetTagged is legalised in legalizeIntrinsic</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_MEMSET) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">// Zext the value operand to 64 bit</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1Value.html">Value</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ZExtValueReg =</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a class="code" href="classllvm_1_1Value.html">Value</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>.setReg(ZExtValueReg);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;}</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="keywordtype">bool</span> AArch64LegalizerInfo::legalizeFCopySign(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                                             <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; <span class="stringliteral">&quot;Only expected scalars right now!&quot;</span>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DstSize == 32 || DstSize == 64) &amp;&amp; <span class="stringliteral">&quot;Unexpected dst type!&quot;</span>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg()) == DstTy &amp;&amp;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;         <span class="stringliteral">&quot;Expected homogeneous types!&quot;</span>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160; </div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="comment">// We want to materialize a mask with the high bit set.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> EltMask;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">// TODO: s16 support.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="keywordflow">switch</span> (DstSize) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected type for G_FCOPYSIGN!&quot;</span>);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="keywordflow">case</span> 64: {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="comment">// AdvSIMD immediate moves cannot materialize out mask in a single</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// instruction for 64-bit elements. Instead, materialize zero and then</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="comment">// negate it.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    EltMask = 0;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    VecTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, DstTy);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    EltMask = 0x80000000ULL;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    VecTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, DstTy);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// Widen In1 and In2 to 128 bits. We want these to eventually become</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// INSERT_SUBREGs.</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(VecTy);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, 0);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keyword">auto</span> Ins1 = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aca31191486506a279715dd3bf677d75f">buildInsertVectorElement</a>(</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      VecTy, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(), Zero);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keyword">auto</span> Ins2 = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aca31191486506a279715dd3bf677d75f">buildInsertVectorElement</a>(</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      VecTy, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), Zero);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// Construct the mask.</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(VecTy, EltMask);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="keywordflow">if</span> (DstSize == 64)</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac939f3c7fdf6c976421d61564d078506">buildFNeg</a>(VecTy, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keyword">auto</span> Sel = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(AArch64::G_BIT, {VecTy}, {Ins1, Ins2, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>});</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// Build an unmerge whose 0th elt is the original G_FCOPYSIGN destination. We</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">// want this to eventually become an EXTRACT_SUBREG.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> DstRegs(1, Dst);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    DstRegs.push_back(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(DstTy));</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(DstRegs, Sel);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aAArch64LegalizerInfo_8h_html"><div class="ttname"><a href="AArch64LegalizerInfo_8h.html">AArch64LegalizerInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00077">FileCheck.h:77</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdeci">@ Undef</div><div class="ttdoc">Value of the register doesn't matter.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00052">MachineInstrBuilder.h:52</a></div></div>
<div class="ttc" id="aMIPatternMatch_8h_html"><div class="ttname"><a href="MIPatternMatch_8h.html">MIPatternMatch.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab102f0f12dd38aeea5906b1d80c792ff"><div class="ttname"><a href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">llvm::alignTo</a></div><div class="ttdeci">uint64_t alignTo(uint64_t Size, Align A)</div><div class="ttdoc">Returns a multiple of A needed to store Size bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00155">Alignment.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a1a6ccaca8abe3ac60dd270f1f2058948"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a1a6ccaca8abe3ac60dd270f1f2058948">llvm::LegalizeRuleSet::unsupported</a></div><div class="ttdeci">LegalizeRuleSet &amp; unsupported()</div><div class="ttdoc">The instruction is unsupported.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00801">LegalizerInfo.h:801</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71af2217d25138eade76a256c4c3dc131bd"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71af2217d25138eade76a256c4c3dc131bd">llvm::AArch64II::MO_G3</a></div><div class="ttdeci">@ MO_G3</div><div class="ttdoc">MO_G3 - A symbol operand with this flag (granule 3) represents the high 16-bits of a 64-bit address,...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00715">AArch64BaseInfo.h:715</a></div></div>
<div class="ttc" id="aValueTypes_8h_html"><div class="ttname"><a href="ValueTypes_8h.html">ValueTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aca31191486506a279715dd3bf677d75f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aca31191486506a279715dd3bf677d75f">llvm::MachineIRBuilder::buildInsertVectorElement</a></div><div class="ttdeci">MachineInstrBuilder buildInsertVectorElement(const DstOp &amp;Res, const SrcOp &amp;Val, const SrcOp &amp;Elt, const SrcOp &amp;Idx)</div><div class="ttdoc">Build and insert Res = G_INSERT_VECTOR_ELT Val, Elt, Idx.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00830">MachineIRBuilder.cpp:830</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a05fb81a3747dd4f76894a66c574cf99e"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a05fb81a3747dd4f76894a66c574cf99e">llvm::AArch64Subtarget::isTargetWindows</a></div><div class="ttdeci">bool isTargetWindows() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00264">AArch64Subtarget.h:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ab38b237c564a670c78640d09642faa40"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">llvm::LegalizeRuleSet::widenScalarToNextPow2</a></div><div class="ttdeci">LegalizeRuleSet &amp; widenScalarToNextPow2(unsigned TypeIdx, unsigned MinSize=0)</div><div class="ttdoc">Widen the scalar to the next power of two that is at least MinSize.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00877">LegalizerInfo.h:877</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">llvm::AtomicOrdering::AcquireRelease</a></div><div class="ttdeci">@ AcquireRelease</div></div>
<div class="ttc" id="aAArch64LegalizerInfo_8cpp_html_a6d09e7d04791679e440be7ed52480db8"><div class="ttname"><a href="AArch64LegalizerInfo_8cpp.html#a6d09e7d04791679e440be7ed52480db8">matchLDPSTPAddrMode</a></div><div class="ttdeci">static void matchLDPSTPAddrMode(Register Root, Register &amp;Base, int &amp;Offset, MachineRegisterInfo &amp;MRI)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64LegalizerInfo_8cpp_source.html#l01174">AArch64LegalizerInfo.cpp:1174</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aMachineInstr_8h_html"><div class="ttname"><a href="MachineInstr_8h.html">MachineInstr.h</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00157">MachineRegisterInfo.cpp:157</a></div></div>
<div class="ttc" id="aAArch64RegisterBankInfo_8h_html"><div class="ttname"><a href="AArch64RegisterBankInfo_8h.html">AArch64RegisterBankInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_a00b04b7613c62a52917e1d2467faeab0"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#a00b04b7613c62a52917e1d2467faeab0">llvm::MIPatternMatch::m_Reg</a></div><div class="ttdeci">operand_type_match m_Reg()</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00270">MIPatternMatch.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a32539827696dafee94ee79c3321b4245"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">llvm::LegalizerInfo::getActionDefinitionsBuilder</a></div><div class="ttdeci">LegalizeRuleSet &amp; getActionDefinitionsBuilder(unsigned Opcode)</div><div class="ttdoc">Get the action definition builder for the given opcode.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8cpp_source.html#l00288">LegalizerInfo.cpp:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1ac8d27532cfd1d1f032ecbff2ba3611"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">llvm::MachineInstrBuilder::add</a></div><div class="ttdeci">const MachineInstrBuilder &amp; add(const MachineOperand &amp;MO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00224">MachineInstrBuilder.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ad5a00fa9f24d73763b95b09c6558b66d"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ad5a00fa9f24d73763b95b09c6558b66d">llvm::LegalizeRuleSet::minScalarEltSameAsIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; minScalarEltSameAsIf(LegalityPredicate Predicate, unsigned TypeIdx, unsigned LargeTypeIdx)</div><div class="ttdoc">Conditionally widen the scalar or elt to match the size of another.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01048">LegalizerInfo.h:1048</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a182a4338dd8214b00c7af87ba1b2df2f"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a182a4338dd8214b00c7af87ba1b2df2f">llvm::LegalizeRuleSet::maxScalarIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; maxScalarIf(LegalityPredicate Predicate, unsigned TypeIdx, const LLT Ty)</div><div class="ttdoc">Conditionally limit the maximum size of the scalar.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00990">LegalizerInfo.h:990</a></div></div>
<div class="ttc" id="aclassllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdoc">Target - Wrapper for Target specific information.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00149">TargetRegistry.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7075ef788cb3dea0ea239c1a6830734c"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">llvm::MachineIRBuilder::buildMergeLikeInstr</a></div><div class="ttdeci">MachineInstrBuilder buildMergeLikeInstr(const DstOp &amp;Res, ArrayRef&lt; Register &gt; Ops)</div><div class="ttdoc">Build and insert Res = G_MERGE_VALUES Op0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00620">MachineIRBuilder.cpp:620</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a5360139c6b31d85cf3e29e2e6b7cf873"><div class="ttname"><a href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">llvm::LLT::vector</a></div><div class="ttdeci">static constexpr LLT vector(ElementCount EC, unsigned ScalarSizeInBits)</div><div class="ttdoc">Get a low-level vector of some number of elements and element width.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00056">LowLevelTypeImpl.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aea93a9315aeba603531c6d3d3a07776e"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">llvm::MachineIRBuilder::getMRI</a></div><div class="ttdeci">MachineRegisterInfo * getMRI()</div><div class="ttdoc">Getter for MRI.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00291">MachineIRBuilder.h:291</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac76eb82370e997f967454f441effbbff"><div class="ttname"><a href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">llvm::getIConstantVRegValWithLookThrough</a></div><div class="ttdeci">std::optional&lt; ValueAndVReg &gt; getIConstantVRegValWithLookThrough(Register VReg, const MachineRegisterInfo &amp;MRI, bool LookThroughInstrs=true)</div><div class="ttdoc">If VReg is defined by a statically evaluable chain of instructions rooted on a G_CONSTANT returns its...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00409">Utils.cpp:409</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_af56ef6d2982131944aab4e6c249d7269"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">llvm::LegalizeRuleSet::customFor</a></div><div class="ttdeci">LegalizeRuleSet &amp; customFor(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00840">LegalizerInfo.h:840</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a0d496cc15e312863869a384532968143"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">llvm::MachineFunction::getMachineMemOperand</a></div><div class="ttdeci">MachineMemOperand * getMachineMemOperand(MachinePointerInfo PtrInfo, MachineMemOperand::Flags f, uint64_t s, Align base_alignment, const AAMDNodes &amp;AAInfo=AAMDNodes(), const MDNode *Ranges=nullptr, SyncScope::ID SSID=SyncScope::System, AtomicOrdering Ordering=AtomicOrdering::NotAtomic, AtomicOrdering FailureOrdering=AtomicOrdering::NotAtomic)</div><div class="ttdoc">getMachineMemOperand - Allocate a new MachineMemOperand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00469">MachineFunction.cpp:469</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">llvm::LegacyLegalizeActions::Bitcast</a></div><div class="ttdeci">@ Bitcast</div><div class="ttdoc">Perform the operation on a different, but equivalently sized type.</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00054">LegacyLegalizerInfo.h:54</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a2b789bf4896eb5516d09b45228ecc835"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a2b789bf4896eb5516d09b45228ecc835">llvm::LegalizeRuleSet::clampNumElements</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampNumElements(unsigned TypeIdx, const LLT MinTy, const LLT MaxTy)</div><div class="ttdoc">Limit the number of elements for the given vectors to at least MinTy's number of elements and at most...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01155">LegalizerInfo.h:1155</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aed4562ccf898feaf2eb6cf5555b5084d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aed4562ccf898feaf2eb6cf5555b5084d">llvm::MachineRegisterInfo::getTargetRegisterInfo</a></div><div class="ttdeci">const TargetRegisterInfo * getTargetRegisterInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00156">MachineRegisterInfo.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegacyLegalizerInfo_html_a6b586580f1e35e04ae0f3186fadd6594"><div class="ttname"><a href="classllvm_1_1LegacyLegalizerInfo.html#a6b586580f1e35e04ae0f3186fadd6594">llvm::LegacyLegalizerInfo::computeTables</a></div><div class="ttdeci">void computeTables()</div><div class="ttdoc">Compute any ancillary tables needed to quickly decide how an operation should be handled.</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8cpp_source.html#l00102">LegacyLegalizerInfo.cpp:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a67021459c7ef8f9a634b4eac7ffd0f96"><div class="ttname"><a href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">llvm::LLT::scalar</a></div><div class="ttdeci">static constexpr LLT scalar(unsigned SizeInBits)</div><div class="ttdoc">Get a low-level scalar or aggregate &quot;bag of bits&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00042">LowLevelTypeImpl.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a4d2e6b50d2d120966b45253b1ad825b4"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a4d2e6b50d2d120966b45253b1ad825b4">llvm::AArch64Subtarget::isTargetDarwin</a></div><div class="ttdeci">bool isTargetDarwin() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00261">AArch64Subtarget.h:261</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">llvm::AtomicOrdering::SequentiallyConsistent</a></div><div class="ttdeci">@ SequentiallyConsistent</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_aa506a47183fac5ee47075d2107b0ee9b"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#aa506a47183fac5ee47075d2107b0ee9b">llvm::LegalizeRuleSet::minScalarOrEltIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; minScalarOrEltIf(LegalityPredicate Predicate, unsigned TypeIdx, const LLT Ty)</div><div class="ttdoc">Ensure the scalar or element is at least as wide as Ty.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00934">LegalizerInfo.h:934</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a4ac8a83c3f27cf2acb3928c64c07f1db"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a4ac8a83c3f27cf2acb3928c64c07f1db">llvm::AArch64II::MO_PREL</a></div><div class="ttdeci">@ MO_PREL</div><div class="ttdoc">MO_PREL - Indicates that the bits of the symbol operand represented by MO_G0 etc are PC relative.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00766">AArch64BaseInfo.h:766</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aaa6f42b31892a929914872c879e4b365"><div class="ttname"><a href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">llvm::LLT::changeElementSize</a></div><div class="ttdeci">constexpr LLT changeElementSize(unsigned NewEltSize) const</div><div class="ttdoc">If this type is a vector, return a vector with the same number of elements but the new element size.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00187">LowLevelTypeImpl.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a39505e1fb9837807a81c02bd1eef7418"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a39505e1fb9837807a81c02bd1eef7418">llvm::AArch64Subtarget::getInstrInfo</a></div><div class="ttdeci">const AArch64InstrInfo * getInstrInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00181">AArch64Subtarget.h:181</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a4aa85b84b3eaff6cb545b87118abc793"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a4aa85b84b3eaff6cb545b87118abc793">llvm::LegalizeRuleSet::scalarizeIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; scalarizeIf(LegalityPredicate Predicate, unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00917">LegalizerInfo.h:917</a></div></div>
<div class="ttc" id="aMachineIRBuilder_8h_html"><div class="ttname"><a href="MachineIRBuilder_8h.html">MachineIRBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a7da5cc6e8aadd4d5fb6dd68f8ec12b7e"><div class="ttname"><a href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">llvm::LLT::isVector</a></div><div class="ttdeci">constexpr bool isVector() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00129">LowLevelTypeImpl.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a8708e86d87fcf4704d3904153529f36c"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a8708e86d87fcf4704d3904153529f36c">llvm::LegalizeRuleSet::minScalarOrElt</a></div><div class="ttdeci">LegalizeRuleSet &amp; minScalarOrElt(unsigned TypeIdx, const LLT Ty)</div><div class="ttdoc">Ensure the scalar or element is at least as wide as Ty.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00925">LegalizerInfo.h:925</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_af6ec49293cfc66ba0163caa2da451201"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">llvm::LegalizeRuleSet::scalarize</a></div><div class="ttdeci">LegalizeRuleSet &amp; scalarize(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00911">LegalizerInfo.h:911</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00292">MathExtras.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a8001d93939045f0e2c4b82e1b5eab30a"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">llvm::LegalizeRuleSet::lower</a></div><div class="ttdeci">LegalizeRuleSet &amp; lower()</div><div class="ttdoc">The instruction is lowered.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00659">LegalizerInfo.h:659</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html">llvm::LegalizerHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00046">LegalizerHelper.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_acd331b959990c033f8d612adf7701b05"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">llvm::LegalizeMutations::changeTo</a></div><div class="ttdeci">LegalizeMutation changeTo(unsigned TypeIdx, LLT Ty)</div><div class="ttdoc">Select this specific type for the given type index.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00017">LegalizeMutations.cpp:17</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aa24450f600cabd7212bd264a6dbc190c"><div class="ttname"><a href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">llvm::LLT::getElementType</a></div><div class="ttdeci">constexpr LLT getElementType() const</div><div class="ttdoc">Returns the vector's element type. Only valid for vector types.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00257">LowLevelTypeImpl.h:257</a></div></div>
<div class="ttc" id="aLegalizerInfo_8h_html"><div class="ttname"><a href="LegalizerInfo_8h.html">LegalizerInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_abef0dedc73ed9227d3b97209d619ee72"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#abef0dedc73ed9227d3b97209d619ee72">llvm::MIPatternMatch::m_GPtrAdd</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, TargetOpcode::G_PTR_ADD, false &gt; m_GPtrAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00470">MIPatternMatch.h:470</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a4d17100c5b9375e90f20d666f7615c56"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a4d17100c5b9375e90f20d666f7615c56">llvm::LegalityPredicates::atomicOrderingAtLeastOrStrongerThan</a></div><div class="ttdeci">LegalityPredicate atomicOrderingAtLeastOrStrongerThan(unsigned MMOIdx, AtomicOrdering Ordering)</div><div class="ttdoc">True iff the specified MMO index has at an atomic ordering of at Ordering or stronger.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00208">LegalityPredicates.cpp:208</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_aa4c9f6d9092cf5ca3819973f4b297050"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#aa4c9f6d9092cf5ca3819973f4b297050">llvm::AArch64Subtarget::getTargetLowering</a></div><div class="ttdeci">const AArch64TargetLowering * getTargetLowering() const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00178">AArch64Subtarget.h:178</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2a0be879cebaa17d623212f729b1d4b1"><div class="ttname"><a href="namespacellvm.html#a2a0be879cebaa17d623212f729b1d4b1">llvm::constrainSelectedInstRegOperands</a></div><div class="ttdeci">bool constrainSelectedInstRegOperands(MachineInstr &amp;I, const TargetInstrInfo &amp;TII, const TargetRegisterInfo &amp;TRI, const RegisterBankInfo &amp;RBI)</div><div class="ttdoc">Mutate the newly-selected instruction I to constrain its (possibly generic) virtual register operands...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00152">Utils.cpp:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_af751c28a69e1d07e19dad11e4e26a70d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">llvm::MachineIRBuilder::buildConstant</a></div><div class="ttdeci">virtual MachineInstrBuilder buildConstant(const DstOp &amp;Res, const ConstantInt &amp;Val)</div><div class="ttdoc">Build and insert Res = G_CONSTANT Val.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00302">MachineIRBuilder.cpp:302</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a37e356f8716e1bf292a3f999818f7a1e"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">llvm::LegalizeRuleSet::legalIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; legalIf(LegalityPredicate Predicate)</div><div class="ttdoc">The instruction is legal if predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00586">LegalizerInfo.h:586</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac">llvm::AtomicOrdering::Monotonic</a></div><div class="ttdeci">@ Monotonic</div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">llvm::logicalview::LVOutputKind::Split</a></div><div class="ttdeci">@ Split</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ab7414b66de51a2dd2f255c46b782157a"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">llvm::LegalizeRuleSet::minScalar</a></div><div class="ttdeci">LegalizeRuleSet &amp; minScalar(unsigned TypeIdx, const LLT Ty)</div><div class="ttdoc">Ensure the scalar is at least as wide as Ty.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00945">LegalizerInfo.h:945</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_a51c635ed823e77c829c813f0dc2f72f9"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#a51c635ed823e77c829c813f0dc2f72f9">always</a></div><div class="ttdeci">bar al al movzbl eax ret Missed when stored in a memory are stored as single byte objects the value of which is always(false) or 1(true). We are not using this fact</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01412">README.txt:1412</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a828ddf4cfe2b05f70a6566d36b4804c5"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a828ddf4cfe2b05f70a6566d36b4804c5">llvm::MachineIRBuilder::buildBitReverse</a></div><div class="ttdeci">MachineInstrBuilder buildBitReverse(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert Dst = G_BITREVERSE Src.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l02028">MachineIRBuilder.h:2028</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_aac9ffa01f634953a291122d63c8df338"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">llvm::LegalizeRuleSet::customIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; customIf(LegalityPredicate Predicate)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00834">LegalizerInfo.h:834</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ae56d6ae68f8659cfaa29fb7cb601f111"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">llvm::LegalityPredicates::typeIs</a></div><div class="ttdeci">LegalityPredicate typeIs(unsigned TypeIdx, LLT TypesInit)</div><div class="ttdoc">True iff the given type index is the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00028">LegalityPredicates.cpp:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_ae7510a639ca53c1bfa1c90c6dfc7eb2e"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ae7510a639ca53c1bfa1c90c6dfc7eb2e">llvm::details::FixedOrScalableQuantity::divideCoefficientBy</a></div><div class="ttdeci">constexpr LeafTy divideCoefficientBy(ScalarTy RHS) const</div><div class="ttdoc">We do not provide the '/' operator here because division for polynomial types does not work in the sa...</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00234">TypeSize.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a1e9e055fc19307bc3c7c1be6ccd36812"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">llvm::MachineIRBuilder::buildUnmerge</a></div><div class="ttdeci">MachineInstrBuilder buildUnmerge(ArrayRef&lt; LLT &gt; Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00648">MachineIRBuilder.cpp:648</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a9c983906f9c3c89cf8ab6b5ce081e48f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">llvm::MachineIRBuilder::buildZExt</a></div><div class="ttdeci">MachineInstrBuilder buildZExt(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_ZEXT Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00471">MachineIRBuilder.cpp:471</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7962eca94c9f77da448245745fb22f57"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">llvm::MachineIRBuilder::buildLoad</a></div><div class="ttdeci">MachineInstrBuilder buildLoad(const DstOp &amp;Res, const SrcOp &amp;Addr, MachineMemOperand &amp;MMO)</div><div class="ttdoc">Build and insert Res = G_LOAD Addr, MMO.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00918">MachineIRBuilder.h:918</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a45c9d1ec6a1b46697b0363f2c8a605c5"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a45c9d1ec6a1b46697b0363f2c8a605c5">llvm::LegalityPredicates::smallerThan</a></div><div class="ttdeci">LegalityPredicate smallerThan(unsigned TypeIdx0, unsigned TypeIdx1)</div><div class="ttdoc">True iff the first type index has a smaller total bit size than second type index.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00117">LegalityPredicates.cpp:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_a59137b132e07516767761d5decf7e252"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#a59137b132e07516767761d5decf7e252">llvm::AArch64Subtarget::isTargetILP32</a></div><div class="ttdeci">bool isTargetILP32() const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00273">AArch64Subtarget.h:273</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad82de9da62635df78a534de0f16c1129"><div class="ttname"><a href="namespacellvm.html#ad82de9da62635df78a534de0f16c1129">llvm::Log2</a></div><div class="ttdeci">unsigned Log2(Align A)</div><div class="ttdoc">Returns the log2 of the alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00208">Alignment.h:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64LegalizerInfo_html_aa48b853fae2f40e3e483078a944ab8d1"><div class="ttname"><a href="classllvm_1_1AArch64LegalizerInfo.html#aa48b853fae2f40e3e483078a944ab8d1">llvm::AArch64LegalizerInfo::legalizeIntrinsic</a></div><div class="ttdeci">bool legalizeIntrinsic(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64LegalizerInfo_8cpp_source.html#l01064">AArch64LegalizerInfo.cpp:1064</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a5663a878fb2d06ca571e828e50638765"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a5663a878fb2d06ca571e828e50638765">llvm::LegalizeRuleSet::lowerIfMemSizeNotPow2</a></div><div class="ttdeci">LegalizeRuleSet &amp; lowerIfMemSizeNotPow2()</div><div class="ttdoc">Lower a memory operation if the memory size, rounded to bytes, is not a power of 2.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00821">LegalizerInfo.h:821</a></div></div>
<div class="ttc" id="aCodeGen_2GlobalISel_2Utils_8h_html"><div class="ttname"><a href="CodeGen_2GlobalISel_2Utils_8h.html">Utils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a6a31c8e33dcb4c2c60d965227c227e8e"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a6a31c8e33dcb4c2c60d965227c227e8e">llvm::MachineIRBuilder::buildCTLZ</a></div><div class="ttdeci">MachineInstrBuilder buildCTLZ(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_CTLZ Op0, Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01700">MachineIRBuilder.h:1700</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a84458721a72ec165f39c359c1e36268f"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a84458721a72ec165f39c359c1e36268f">llvm::LegalizeRuleSet::fewerElementsIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; fewerElementsIf(LegalityPredicate Predicate, LegalizeMutation Mutation)</div><div class="ttdoc">Remove elements to reach the type selected by the mutation if the predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00792">LegalizerInfo.h:792</a></div></div>
<div class="ttc" id="aTargetOpcodes_8h_html"><div class="ttname"><a href="TargetOpcodes_8h.html">TargetOpcodes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a46cfa445be514255440f986c4b7b496f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">llvm::MachineIRBuilder::buildConcatVectors</a></div><div class="ttdeci">MachineInstrBuilder buildConcatVectors(const DstOp &amp;Res, ArrayRef&lt; Register &gt; Ops)</div><div class="ttdoc">Build and insert Res = G_CONCAT_VECTORS Op0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00746">MachineIRBuilder.cpp:746</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">llvm::CodeModel::Small</a></div><div class="ttdeci">@ Small</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_a76c9562101f54d25482f88ae29ed6131"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a></div><div class="ttdeci">static constexpr int Concat[]</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00239">X86InterleavedAccess.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac0ca0a03e016a6da0766af3c725a7c47"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">llvm::MachineIRBuilder::getMF</a></div><div class="ttdeci">MachineFunction &amp; getMF()</div><div class="ttdoc">Getter for the function we currently build.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00273">MachineIRBuilder.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a3989251b1a714fc8296685f77eac6e87"><div class="ttname"><a href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">llvm::LLT::isScalar</a></div><div class="ttdeci">constexpr bool isScalar() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00123">LowLevelTypeImpl.h:123</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">llvm::AtomicOrdering::Acquire</a></div><div class="ttdeci">@ Acquire</div></div>
<div class="ttc" id="aclassllvm_1_1AArch64LegalizerInfo_html_ae27667d7c3fbd41b18fd5838fc4f0553"><div class="ttname"><a href="classllvm_1_1AArch64LegalizerInfo.html#ae27667d7c3fbd41b18fd5838fc4f0553">llvm::AArch64LegalizerInfo::AArch64LegalizerInfo</a></div><div class="ttdeci">AArch64LegalizerInfo(const AArch64Subtarget &amp;ST)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64LegalizerInfo_8cpp_source.html#l00041">AArch64LegalizerInfo.cpp:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html_a1f637715070a99aa4140444e12697f9a"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">llvm::GISelChangeObserver::changingInstr</a></div><div class="ttdeci">virtual void changingInstr(MachineInstr &amp;MI)=0</div><div class="ttdoc">This instruction is about to be mutated in some way.</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a2e9c70ce46c94a7dbccb0aefd6219571"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">llvm::LegalizeRuleSet::clampMaxNumElements</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampMaxNumElements(unsigned TypeIdx, const LLT EltTy, unsigned MaxElements)</div><div class="ttdoc">Limit the number of elements in EltTy vectors to at most MaxElements.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01131">LegalizerInfo.h:1131</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1c5fadb14ff1d77faad0cb58a43252ab"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">llvm::MachineInstrBuilder::getReg</a></div><div class="ttdeci">Register getReg(unsigned Idx) const</div><div class="ttdoc">Get the register for the operand index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00094">MachineInstrBuilder.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a956ffd0de93798f523683b447646dd92"><div class="ttname"><a href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">llvm::LLT::getSizeInBits</a></div><div class="ttdeci">constexpr TypeSize getSizeInBits() const</div><div class="ttdoc">Returns the total size of the type. Must only be called on sized types.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00159">LowLevelTypeImpl.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_afb84ad0ad64ed2a34f473bbacc268501"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#afb84ad0ad64ed2a34f473bbacc268501">llvm::MachineInstrBuilder::cloneMemRefs</a></div><div class="ttdeci">const MachineInstrBuilder &amp; cloneMemRefs(const MachineInstr &amp;OtherMI) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00213">MachineInstrBuilder.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64LegalizerInfo_html_a96b31c593d1715c4146e1414b69b87a9"><div class="ttname"><a href="classllvm_1_1AArch64LegalizerInfo.html#a96b31c593d1715c4146e1414b69b87a9">llvm::AArch64LegalizerInfo::legalizeCustom</a></div><div class="ttdeci">bool legalizeCustom(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const override</div><div class="ttdoc">Called for instructions with the Custom LegalizationAction.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64LegalizerInfo_8cpp_source.html#l00898">AArch64LegalizerInfo.cpp:898</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a9607e5a365ae4ce30b73b802f590bb21"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">llvm::MachineIRBuilder::buildCTPOP</a></div><div class="ttdeci">MachineInstrBuilder buildCTPOP(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_CTPOP Op0, Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01695">MachineIRBuilder.h:1695</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html_a45a05a932f80f51023592ff5131d56a5"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">llvm::GISelChangeObserver::changedInstr</a></div><div class="ttdeci">virtual void changedInstr(MachineInstr &amp;MI)=0</div><div class="ttdoc">This instruction was mutated in some way.</div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_af6aed1d3b2cf7133b73cf8bfa5122186"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#af6aed1d3b2cf7133b73cf8bfa5122186">llvm::MachineIRBuilder::buildMaskLowPtrBits</a></div><div class="ttdeci">MachineInstrBuilder buildMaskLowPtrBits(const DstOp &amp;Res, const SrcOp &amp;Op0, uint32_t NumBits)</div><div class="ttdoc">Build and insert Res = G_PTRMASK Op0, G_CONSTANT (1 &lt;&lt; NumBits) - 1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00225">MachineIRBuilder.cpp:225</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a></div><div class="ttdeci">AtomicOrdering</div><div class="ttdoc">Atomic ordering for LLVM's memory model.</div><div class="ttdef"><b>Definition:</b> <a href="AtomicOrdering_8h_source.html#l00056">AtomicOrdering.h:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_a5574ba0db2a42fa195db009f06f1d731"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">llvm::LegalizeMutations::scalarize</a></div><div class="ttdeci">LegalizeMutation scalarize(unsigned TypeIdx)</div><div class="ttdoc">Break up the vector type for the given type index into the element type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00108">LegalizeMutations.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a18b0ffd870be993f70b6e05a55b88df6"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a18b0ffd870be993f70b6e05a55b88df6">llvm::LegalizeRuleSet::lowerIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; lowerIf(LegalityPredicate Predicate)</div><div class="ttdoc">The instruction is lowered if predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00668">LegalizerInfo.h:668</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html">llvm::MachineIRBuilder</a></div><div class="ttdoc">Helper class to build MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00221">MachineIRBuilder.h:221</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a51b92ff153c76b49d9036c331fc534c2"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">llvm::LegalizeRuleSet::legalFor</a></div><div class="ttdeci">LegalizeRuleSet &amp; legalFor(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdoc">The instruction is legal when type index 0 is any type in the given list.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00593">LegalizerInfo.h:593</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_acf0f51041fbaaed06a39f2fe2686bb92"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">llvm::MachineIRBuilder::buildBitcast</a></div><div class="ttdeci">MachineInstrBuilder buildBitcast(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert Dst = G_BITCAST Src.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00690">MachineIRBuilder.h:690</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ad7ac7032baa62cc00002886633b9f281"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">llvm::LegalityPredicates::all</a></div><div class="ttdeci">Predicate all(Predicate P0, Predicate P1)</div><div class="ttdoc">True iff P0 and P1 are true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00228">LegalizerInfo.h:228</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a028a4adc46c746ba1501e1e6fefb54cc"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a028a4adc46c746ba1501e1e6fefb54cc">llvm::AArch64II::MO_NC</a></div><div class="ttdeci">@ MO_NC</div><div class="ttdoc">MO_NC - Indicates whether the linker is expected to check the symbol reference for overflow.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00747">AArch64BaseInfo.h:747</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_adabd45e67a1847750a117317b5ef8f9f"><div class="ttname"><a href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">llvm::LLT::changeElementCount</a></div><div class="ttdeci">constexpr LLT changeElementCount(ElementCount EC) const</div><div class="ttdoc">Return a vector or scalar with the same element type and the new element count.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00196">LowLevelTypeImpl.h:196</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html">llvm::MachinePointerInfo</a></div><div class="ttdoc">This class contains a discriminated union of information about pointers in memory operands,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00039">MachineMemOperand.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a3a5053185998bdf24f3167c234915785"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a3a5053185998bdf24f3167c234915785">llvm::AArch64II::MO_PAGEOFF</a></div><div class="ttdeci">@ MO_PAGEOFF</div><div class="ttdoc">MO_PAGEOFF - A symbol operand with this flag represents the offset of that symbol within a 4K page.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00711">AArch64BaseInfo.h:711</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aa911a7e9e51b7ed20810fc819efe6a26"><div class="ttname"><a href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">llvm::LLT::getElementCount</a></div><div class="ttdeci">constexpr ElementCount getElementCount() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00150">LowLevelTypeImpl.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a82dbc99941b4cb96955d0e550dfb19f5"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">llvm::MachineIRBuilder::buildPtrAdd</a></div><div class="ttdeci">MachineInstrBuilder buildPtrAdd(const DstOp &amp;Res, const SrcOp &amp;Op0, const SrcOp &amp;Op1)</div><div class="ttdoc">Build and insert Res = G_PTR_ADD Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00199">MachineIRBuilder.cpp:199</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">llvm::AtomicOrdering::Unordered</a></div><div class="ttdeci">@ Unordered</div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_af6fb778e7cc82464d03d353b0cfe292b"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">llvm::LegalizeRuleSet::clampScalar</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampScalar(unsigned TypeIdx, const LLT MinTy, const LLT MaxTy)</div><div class="ttdoc">Limit the range of scalar sizes to MinTy and MaxTy.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01006">LegalizerInfo.h:1006</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a676390425ab5f53d99d702c3b8f15637"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a676390425ab5f53d99d702c3b8f15637">llvm::LegalizeRuleSet::legalForCartesianProduct</a></div><div class="ttdeci">LegalizeRuleSet &amp; legalForCartesianProduct(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdoc">The instruction is legal when type indexes 0 and 1 are both in the given list.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00625">LegalizerInfo.h:625</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a71181d67d0bf68c3b8a535ec20463f90"><div class="ttname"><a href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">llvm::LLT::getNumElements</a></div><div class="ttdeci">constexpr uint16_t getNumElements() const</div><div class="ttdoc">Returns the number of elements in a vector LLT.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00133">LowLevelTypeImpl.h:133</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdoc">Primary interface to the complete machine description for the target machine.</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00078">TargetMachine.h:78</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a3b65801c5b31890a1d1cd8a0038aee87"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">llvm::LegalityPredicates::typeInSet</a></div><div class="ttdeci">LegalityPredicate typeInSet(unsigned TypeIdx, std::initializer_list&lt; LLT &gt; TypesInit)</div><div class="ttdoc">True iff the given type index is one of the specified types.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00034">LegalityPredicates.cpp:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_af11a4c235044d52af7fbf840dec3f278"><div class="ttname"><a href="classllvm_1_1LLT.html#af11a4c235044d52af7fbf840dec3f278">llvm::LLT::divide</a></div><div class="ttdeci">constexpr LLT divide(int Factor) const</div><div class="ttdoc">Return a type that is Factor times smaller.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00203">LowLevelTypeImpl.h:203</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a9baba9f2d47d7728dd072376019e76eb"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a9baba9f2d47d7728dd072376019e76eb">llvm::LegalizeRuleSet::lowerIfMemSizeNotByteSizePow2</a></div><div class="ttdeci">LegalizeRuleSet &amp; lowerIfMemSizeNotByteSizePow2()</div><div class="ttdoc">Lower a memory operation if the memory access size is not a round power of 2 byte size.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00829">LegalizerInfo.h:829</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a9694f2906cfe1d6d35bbe6742c67dff0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">llvm::MachineRegisterInfo::createGenericVirtualRegister</a></div><div class="ttdeci">Register createGenericVirtualRegister(LLT Ty, StringRef Name=&quot;&quot;)</div><div class="ttdoc">Create and return a new generic virtual register with low-level type Ty.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00185">MachineRegisterInfo.cpp:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_aec748fa81e1488192450f0b2a8d1aeca"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">llvm::MachineInstrBuilder::addUse</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addUse(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register use operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00123">MachineInstrBuilder.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a7ff0361855acbbe71b15b8dc6003fbc5"><div class="ttname"><a href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">llvm::LLT::pointer</a></div><div class="ttdeci">static constexpr LLT pointer(unsigned AddressSpace, unsigned SizeInBits)</div><div class="ttdoc">Get a low-level pointer in the given address space.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00049">LowLevelTypeImpl.h:49</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html_afd4ab894cdbdc5888a2d10fa5e5f8333"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html#afd4ab894cdbdc5888a2d10fa5e5f8333">llvm::LegalityQuery::Opcode</a></div><div class="ttdeci">unsigned Opcode</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00109">LegalizerInfo.h:109</a></div></div>
<div class="ttc" id="aLoopDataPrefetch_8cpp_html_af1aa8156fe6dc9478d31e05cf3c1eb9b"><div class="ttname"><a href="LoopDataPrefetch_8cpp.html#af1aa8156fe6dc9478d31e05cf3c1eb9b">prefetch</a></div><div class="ttdeci">loop data prefetch</div><div class="ttdef"><b>Definition:</b> <a href="LoopDataPrefetch_8cpp_source.html#l00149">LoopDataPrefetch.cpp:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a0b9d961c3e0a9fa4c0e9ce806e972c4c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a0b9d961c3e0a9fa4c0e9ce806e972c4c">llvm::LegalizerHelper::lowerBitCount</a></div><div class="ttdeci">LegalizeResult lowerBitCount(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05663">LegalizerHelper.cpp:5663</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a8bc92b8a902afb7675480ecc729a66d4"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">llvm::MachineIRBuilder::buildInstr</a></div><div class="ttdeci">MachineInstrBuilder buildInstr(unsigned Opcode)</div><div class="ttdoc">Build and insert &lt;empty&gt; = Opcode &lt;empty&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00385">MachineIRBuilder.h:385</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html">llvm::LegalityQuery</a></div><div class="ttdoc">The LegalityQuery object bundles together all the information that's needed to decide whether a given...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00108">LegalizerInfo.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a9d825f5954d7bd527aea490668c624c6"><div class="ttname"><a href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">llvm::LLT::isPointer</a></div><div class="ttdeci">constexpr bool isPointer() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00125">LowLevelTypeImpl.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a8666d04f21c45d113eb29a8cc76dae2f"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a8666d04f21c45d113eb29a8cc76dae2f">llvm::LegalizeRuleSet::customForCartesianProduct</a></div><div class="ttdeci">LegalizeRuleSet &amp; customForCartesianProduct(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00850">LegalizerInfo.h:850</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">llvm::logicalview::LVAttributeKind::Zero</a></div><div class="ttdeci">@ Zero</div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa910c5e501ff9679cc81de15bf3b9c1d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">llvm::LegalizerHelper::Observer</a></div><div class="ttdeci">GISelChangeObserver &amp; Observer</div><div class="ttdoc">To keep track of changes made by the LegalizerHelper.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00053">LegalizerHelper.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a2f52fec4aa17c3066db14a8d4717469d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">llvm::MachineIRBuilder::buildExtract</a></div><div class="ttdeci">MachineInstrBuilder buildExtract(const DstOp &amp;Res, const SrcOp &amp;Src, uint64_t Index)</div><div class="ttdoc">Build and insert Res0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00580">MachineIRBuilder.cpp:580</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html">llvm::GISelChangeObserver</a></div><div class="ttdoc">Abstract class that contains various methods for clients to notify about changes.</div><div class="ttdef"><b>Definition:</b> <a href="GISelChangeObserver_8h_source.html#l00029">GISelChangeObserver.h:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_ac48512a9f1e26744de1b6940b4adb68f"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#ac48512a9f1e26744de1b6940b4adb68f">llvm::LegalizeMutations::widenScalarOrEltToNextPow2</a></div><div class="ttdeci">LegalizeMutation widenScalarOrEltToNextPow2(unsigned TypeIdx, unsigned Min=0)</div><div class="ttdoc">Widen the scalar type or vector element type for the given type index to the next power of 2.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00077">LegalizeMutations.cpp:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">llvm::MachineMemOperand::MOLoad</a></div><div class="ttdeci">@ MOLoad</div><div class="ttdoc">The memory access reads data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00134">MachineMemOperand.h:134</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_acac15566596b1d588d87450ab77bf0d7"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">llvm::MachineIRBuilder::buildAnyExt</a></div><div class="ttdeci">MachineInstrBuilder buildAnyExt(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_ANYEXT Op0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00461">MachineIRBuilder.cpp:461</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a082316e51330aeb051eaed458a9f8304"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">llvm::LegalityPredicates::isScalar</a></div><div class="ttdeci">LegalityPredicate isScalar(unsigned TypeIdx)</div><div class="ttdoc">True iff the specified type index is a scalar.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00067">LegalityPredicates.cpp:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">llvm::AtomicOrdering::Release</a></div><div class="ttdeci">@ Release</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a29bf34090f1f9800ad8faa1e0fe5a2c6"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a29bf34090f1f9800ad8faa1e0fe5a2c6">llvm::LegalizerInfo::getLegacyLegalizerInfo</a></div><div class="ttdeci">const LegacyLegalizerInfo &amp; getLegacyLegalizerInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01202">LegalizerInfo.h:1202</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a1ae2ee148379ed3d041b4bce586f7f99"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a1ae2ee148379ed3d041b4bce586f7f99">llvm::TargetLoweringBase::getTargetMachine</a></div><div class="ttdeci">const TargetMachine &amp; getTargetMachine() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00358">TargetLowering.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_aa9f892eaf83d016fd0bdbc120f07af27"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#aa9f892eaf83d016fd0bdbc120f07af27">llvm::LegalizeRuleSet::narrowScalarIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; narrowScalarIf(LegalityPredicate Predicate, LegalizeMutation Mutation)</div><div class="ttdoc">Narrow the scalar to the one selected by the mutation if the predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00766">LegalizerInfo.h:766</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ad57555369f2dd451dd46e10cb3e4f1e9"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">llvm::MachineIRBuilder::buildTrunc</a></div><div class="ttdeci">MachineInstrBuilder buildTrunc(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_TRUNC Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00794">MachineIRBuilder.cpp:794</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_af2f55f16e39b3b5b9047278790c2cb15"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#af2f55f16e39b3b5b9047278790c2cb15">llvm::AArch64Subtarget::getRegBankInfo</a></div><div class="ttdeci">const RegisterBankInfo * getRegBankInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8cpp_source.html#l00352">AArch64Subtarget.cpp:352</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_a316dd9aa25d9ec9d6d21b56e4296e824"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#a316dd9aa25d9ec9d6d21b56e4296e824">llvm::MIPatternMatch::m_ICst</a></div><div class="ttdeci">ConstantMatch&lt; APInt &gt; m_ICst(APInt &amp;Cst)</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00093">MIPatternMatch.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html_aa2bf24e995494a7c64d8f3e02818ad30"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html#aa2bf24e995494a7c64d8f3e02818ad30">llvm::AArch64Subtarget::ClassifyGlobalReference</a></div><div class="ttdeci">unsigned ClassifyGlobalReference(const GlobalValue *GV, const TargetMachine &amp;TM) const</div><div class="ttdoc">ClassifyGlobalReference - Find the target operand flags that describe how a global value should be re...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8cpp_source.html#l00359">AArch64Subtarget.cpp:359</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a137bf40e73f82a78b6d2227ff65aeadf"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">llvm::MachineIRBuilder::buildUndef</a></div><div class="ttdeci">MachineInstrBuilder buildUndef(const DstOp &amp;Res)</div><div class="ttdoc">Build and insert Res = IMPLICIT_DEF.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00605">MachineIRBuilder.cpp:605</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html_a9e26ab57991dfde2757e4790a626d6a3"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">llvm::LegalityQuery::MMODescrs</a></div><div class="ttdeci">ArrayRef&lt; MemDesc &gt; MMODescrs</div><div class="ttdoc">Operations which require memory can use this to place requirements on the memory type for each MMO.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00128">LegalizerInfo.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a5afa3595ce58ce9b516cb34303b31f94"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a5afa3595ce58ce9b516cb34303b31f94">llvm::LegalizeRuleSet::unsupportedIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; unsupportedIf(LegalityPredicate Predicate)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00805">LegalizerInfo.h:805</a></div></div>
<div class="ttc" id="aLegalizerHelper_8h_html"><div class="ttname"><a href="LegalizerHelper_8h.html">LegalizerHelper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ac33fa4c8cfeb9287f51f95404a459de8"><div class="ttname"><a href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">llvm::LLT::getAddressSpace</a></div><div class="ttdeci">constexpr unsigned getAddressSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00247">LowLevelTypeImpl.h:247</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64ISD_html_a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19aa2e9d9d7c30818fd5ba551f8d3f0af34">llvm::AArch64ISD::ADRP</a></div><div class="ttdeci">@ ADRP</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00075">AArch64ISelLowering.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a7e81ea6beb36738551abb34dcb38b5b8"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a7e81ea6beb36738551abb34dcb38b5b8">llvm::LegalizeRuleSet::minScalarSameAs</a></div><div class="ttdeci">LegalizeRuleSet &amp; minScalarSameAs(unsigned TypeIdx, unsigned LargeTypeIdx)</div><div class="ttdoc">Widen the scalar to match the size of another.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01019">LegalizerInfo.h:1019</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">llvm::MachineMemOperand::MOStore</a></div><div class="ttdeci">@ MOStore</div><div class="ttdoc">The memory access writes data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00136">MachineMemOperand.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac939f3c7fdf6c976421d61564d078506"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac939f3c7fdf6c976421d61564d078506">llvm::MachineIRBuilder::buildFNeg</a></div><div class="ttdeci">MachineInstrBuilder buildFNeg(const DstOp &amp;Dst, const SrcOp &amp;Src0, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_FNEG Op0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01767">MachineIRBuilder.h:1767</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a9801185bc6472dc541877662983e7414"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a9801185bc6472dc541877662983e7414">llvm::LegalizerInfo::verify</a></div><div class="ttdeci">void verify(const MCInstrInfo &amp;MII) const</div><div class="ttdoc">Perform simple self-diagnostic and assert if there is anything obviously wrong with the actions set u...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8cpp_source.html#l00376">LegalizerInfo.cpp:376</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ab8c6d0c31153197f492410b3c0a37248"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ab8c6d0c31153197f492410b3c0a37248">llvm::LegalityPredicates::isVector</a></div><div class="ttdeci">LegalityPredicate isVector(unsigned TypeIdx)</div><div class="ttdoc">True iff the specified type index is a vector.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00073">LegalityPredicates.cpp:73</a></div></div>
<div class="ttc" id="aAArch64Subtarget_8h_html"><div class="ttname"><a href="AArch64Subtarget_8h.html">AArch64Subtarget.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_acaf57b895cd34253ab64b053aa5b992b"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#acaf57b895cd34253ab64b053aa5b992b">llvm::MachineIRBuilder::buildIntrinsic</a></div><div class="ttdeci">MachineInstrBuilder buildIntrinsic(Intrinsic::ID ID, ArrayRef&lt; Register &gt; Res, bool HasSideEffects)</div><div class="ttdoc">Build and insert either a G_INTRINSIC (if HasSideEffects is false) or G_INTRINSIC_W_SIDE_EFFECTS inst...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00770">MachineIRBuilder.cpp:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5dc0a32516ce31f495b440d47287028b"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">llvm::MachineRegisterInfo::getType</a></div><div class="ttdeci">LLT getType(Register Reg) const</div><div class="ttdoc">Get the low-level type of Reg or LLT{} if Reg is not a generic (target independent) virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00759">MachineRegisterInfo.h:759</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html_ab28fca6f8145be28b70ad89bb0c741b0"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">llvm::LegalityQuery::Types</a></div><div class="ttdeci">ArrayRef&lt; LLT &gt; Types</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00110">LegalizerInfo.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_aed4922b60be95d28d75259e76d6d2905"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#aed4922b60be95d28d75259e76d6d2905">llvm::LegalizeRuleSet::moreElementsToNextPow2</a></div><div class="ttdeci">LegalizeRuleSet &amp; moreElementsToNextPow2(unsigned TypeIdx)</div><div class="ttdoc">Add more elements to the vector to reach the next power of two.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01085">LegalizerInfo.h:1085</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_a361dad1df3e6d9b5610d40dcf49204c5"><div class="ttname"><a href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a></div><div class="ttdeci">const NodeList &amp; List</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00199">RDFGraph.cpp:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a682ba82f42f7903d0000ffbb13ea3b57"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(Register Reg)</div><div class="ttdoc">Change the register this operand corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00061">MachineOperand.cpp:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae50d11fc026093629c27142780ff1405"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">llvm::LegalizerHelper::MIRBuilder</a></div><div class="ttdeci">MachineIRBuilder &amp; MIRBuilder</div><div class="ttdoc">Expose MIRBuilder so clients can set their own RecordInsertInstruction functions.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00050">LegalizerHelper.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a62e6c26793769f611ca8477969c1d686"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a62e6c26793769f611ca8477969c1d686">llvm::LegalizeRuleSet::custom</a></div><div class="ttdeci">LegalizeRuleSet &amp; custom()</div><div class="ttdoc">Unconditionally custom lower.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00871">LegalizerInfo.h:871</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Register &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_a039bb9a10ad812f936f4325facc13ab3"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#a039bb9a10ad812f936f4325facc13ab3">llvm::LegalizeMutations::moreElementsToNextPow2</a></div><div class="ttdeci">LegalizeMutation moreElementsToNextPow2(unsigned TypeIdx, unsigned Min=0)</div><div class="ttdoc">Add more elements to the type for the given type index to the next power of.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00097">LegalizeMutations.cpp:97</a></div></div>
<div class="ttc" id="aAArch64LegalizerInfo_8cpp_html_a48fe09df24526087def4dfeed2933cbd"><div class="ttname"><a href="AArch64LegalizerInfo_8cpp.html#a48fe09df24526087def4dfeed2933cbd">extractParts</a></div><div class="ttdeci">static void extractParts(Register Reg, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;MIRBuilder, LLT Ty, int NumParts, SmallVectorImpl&lt; Register &gt; &amp;VRegs)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64LegalizerInfo_8cpp_source.html#l00960">AArch64LegalizerInfo.cpp:960</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_adeb8194bb034b096faa148ff246595a1"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#adeb8194bb034b096faa148ff246595a1">llvm::LegalizeRuleSet::scalarSameSizeAs</a></div><div class="ttdeci">LegalizeRuleSet &amp; scalarSameSizeAs(unsigned TypeIdx, unsigned SameSizeIdx)</div><div class="ttdoc">Change the type TypeIdx to have the same scalar size as type SameSizeIdx.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01042">LegalizerInfo.h:1042</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_aa9bd186f4281a367fb872d17d0e7728b"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#aa9bd186f4281a367fb872d17d0e7728b">llvm::MIPatternMatch::mi_match</a></div><div class="ttdeci">bool mi_match(Reg R, const MachineRegisterInfo &amp;MRI, Pattern &amp;&amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00025">MIPatternMatch.h:25</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71aefb2c1834e49df9715967d4a2c9c99e8"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71aefb2c1834e49df9715967d4a2c9c99e8">llvm::AArch64II::MO_TAGGED</a></div><div class="ttdeci">@ MO_TAGGED</div><div class="ttdoc">MO_TAGGED - With MO_PAGE, indicates that the page includes a memory tag in bits 56-63.</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00774">AArch64BaseInfo.h:774</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a87a7405685118d45876c996318829ceb"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">llvm::MachineIRBuilder::buildStore</a></div><div class="ttdeci">MachineInstrBuilder buildStore(const SrcOp &amp;Val, const SrcOp &amp;Addr, MachineMemOperand &amp;MMO)</div><div class="ttdoc">Build and insert G_STORE Val, Addr, MMO.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00434">MachineIRBuilder.cpp:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1AArch64Subtarget_html"><div class="ttname"><a href="classllvm_1_1AArch64Subtarget.html">llvm::AArch64Subtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64Subtarget_8h_source.html#l00038">AArch64Subtarget.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a12f9aadf7cbff9b4027cbeb6bfc45836"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a12f9aadf7cbff9b4027cbeb6bfc45836">llvm::LegalizeRuleSet::libcallFor</a></div><div class="ttdeci">LegalizeRuleSet &amp; libcallFor(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00738">LegalizerInfo.h:738</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a12a128f6b9c963b6fd300cbdf52fba84"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">llvm::MachineIRBuilder::buildAdd</a></div><div class="ttdeci">MachineInstrBuilder buildAdd(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_ADD Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01534">MachineIRBuilder.h:1534</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a4144c2ee93286fba09bd8f14fb11f27a"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a4144c2ee93286fba09bd8f14fb11f27a">llvm::AArch64II::MO_GOT</a></div><div class="ttdeci">@ MO_GOT</div><div class="ttdoc">MO_GOT - This flag indicates that a symbol operand represents the address of the GOT entry for the sy...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00742">AArch64BaseInfo.h:742</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a3625bbe909f59184d26d2652d7f5119b"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a3625bbe909f59184d26d2652d7f5119b">libcall</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM ID Predecessors according to mbb&lt; bb27, 0x8b0a7c0 &gt; Note ADDri is not a two address instruction its result reg1037 is an operand of the PHI node in bb76 and its operand reg1039 is the result of the PHI node We should treat it as a two address code and make sure the ADDri is scheduled after any node that reads reg1039 Use info(i.e. register scavenger) to assign it a free register to allow reuse the collector could move the objects and invalidate the derived pointer This is bad enough in the first but safe points can crop up unpredictably **array_addr i32 n y store obj obj **nth_el If the i64 division is lowered to a libcall</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00127">README.txt:127</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">llvm::AtomicOrdering::NotAtomic</a></div><div class="ttdeci">@ NotAtomic</div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">llvm::ISD::CTPOP</a></div><div class="ttdeci">@ CTPOP</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00703">ISDOpcodes.h:703</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a965a15cef77a97f0e17f9f26fd5be53e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">llvm::MachineRegisterInfo::setRegClass</a></div><div class="ttdeci">void setRegClass(Register Reg, const TargetRegisterClass *RC)</div><div class="ttdoc">setRegClass - Set the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00057">MachineRegisterInfo.cpp:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a32472b5afd0ae6edb4a233a25056a6aa"><div class="ttname"><a href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">llvm::LLT::getScalarSizeInBits</a></div><div class="ttdeci">constexpr unsigned getScalarSizeInBits() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00233">LowLevelTypeImpl.h:233</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a7f04634c15a04a59d5f234002e613b5b"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a7f04634c15a04a59d5f234002e613b5b">llvm::AArch64II::MO_PAGE</a></div><div class="ttdeci">@ MO_PAGE</div><div class="ttdoc">MO_PAGE - A symbol operand with this flag represents the pc-relative offset of the 4K page containing...</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00706">AArch64BaseInfo.h:706</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html"><div class="ttname"><a href="classllvm_1_1LLT.html">llvm::LLT</a></div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00039">LowLevelTypeImpl.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_acd1eca3232b7b3072543294cd2377a37"><div class="ttname"><a href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">llvm::LLT::fixed_vector</a></div><div class="ttdeci">static constexpr LLT fixed_vector(unsigned NumElements, unsigned ScalarSizeInBits)</div><div class="ttdoc">Get a low-level fixed-width vector of some number of elements and element width.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00076">LowLevelTypeImpl.h:76</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:09:01 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

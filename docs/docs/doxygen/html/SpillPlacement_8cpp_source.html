<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/SpillPlacement.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SpillPlacement.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SpillPlacement_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- SpillPlacement.cpp - Optimal Spill Code Placement ------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the spill code placement analysis.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// Each edge bundle corresponds to a node in a Hopfield network. Constraints on</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// basic blocks are weighted by the block frequency and added to become the node</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// bias.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Transparent basic blocks have the variable live through, but don&#39;t care if it</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// is spilled or in a register. These blocks become connections in the Hopfield</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// network, again weighted by block frequency.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// The Hopfield network minimizes (possibly locally) its energy function:</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//   E = -sum_n V_n * ( B_n + sum_{n, m linked by b} V_m * F_b )</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// The energy function represents the expected spill code execution frequency,</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// or the cost of spilling. This is a Lyapunov function which never increases</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// when a node is updated. It is guaranteed to converge to a local minimum.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpillPlacement_8h.html">SpillPlacement.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BitVector_8h.html">llvm/ADT/BitVector.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EdgeBundles_8h.html">llvm/CodeGen/EdgeBundles.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBlockFrequencyInfo_8h.html">llvm/CodeGen/MachineBlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="SpillPlacement_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   46</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;spill-code-placement&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1SpillPlacement.html#aa34d3acfa03ca143b486fc4fd7604e76">SpillPlacement::ID</a> = 0;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="namespacellvm.html#a5e42896e3b3a470b8b64cb9296a68630">   50</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#a5e42896e3b3a470b8b64cb9296a68630">llvm::SpillPlacementID</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#aa34d3acfa03ca143b486fc4fd7604e76">SpillPlacement::ID</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<a class="code" href="SpillPlacement_8cpp.html#ad55166072fc7347066796a6142af4e2e">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1SpillPlacement.html">SpillPlacement</a>, <a class="code" href="SpillPlacement_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                      <span class="stringliteral">&quot;Spill Code Placement Analysis&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1EdgeBundles.html">EdgeBundles</a>)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>)</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="SpillPlacement_8cpp.html#a030569d5a541b6110f2ae1b6a3413a58">   56</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(<a class="code" href="classllvm_1_1SpillPlacement.html">SpillPlacement</a>, <a class="code" href="SpillPlacement_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="SpillPlacement_8cpp.html#a664d624d87e6fdf269226a601eb2a224">   57</a></span>&#160;                    &quot;Spill Code <a class="code" href="MachineBlockPlacement_8cpp.html#a10783a549bfb83fd142ae4e645a283ef">Placement</a> Analysis&quot;, <a class="code" href="SpillPlacement_8cpp.html#a664d624d87e6fdf269226a601eb2a224">true</a>, <a class="code" href="SpillPlacement_8cpp.html#a664d624d87e6fdf269226a601eb2a224">true</a>)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SpillPlacement.html">SpillPlacement</a>::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  AU.setPreservesAll();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  AU.addRequiredTransitive&lt;<a class="code" href="classllvm_1_1EdgeBundles.html">EdgeBundles</a>&gt;();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  AU.addRequiredTransitive&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// Node - Each edge bundle corresponds to a Hopfield node.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// The node contains precomputed frequency data that only depends on the CFG,</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/// but Bias and Links are computed each time placeSpills is called.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">/// The node Value is positive when the variable should be in a register. The</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/// value can change when linked nodes change, but convergence is very fast</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/// because all weights are positive.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html">   75</a></span>&#160;<span class="comment"></span><span class="keyword">struct </span><a class="code" href="structSpillPlacement_1_1Node.html">SpillPlacement::Node</a> {<span class="comment"></span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">  /// BiasN - Sum of blocks that prefer a spill.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">   77</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> <a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  /// BiasP - Sum of blocks that prefer a register.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">   80</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> <a class="code" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  /// Value - Output value of this node computed from the Bias and links.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">  /// This is always on of the values {-1, 0, 1}. A positive number means the</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">  /// variable should go in a register through this bundle.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a6155db02c64ef3abd03259a7dba04ea9">   85</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="structSpillPlacement_1_1Node.html#a6155db02c64ef3abd03259a7dba04ea9">Value</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#aa492038a47765ed217bf484825fa0fc8">   87</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallVector.html">LinkVector</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BlockFrequency, unsigned&gt;</a>, 4&gt;;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  /// Links - (Weight, BundleNo) for all transparent blocks connecting to other</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">  /// bundles. The weights are all positive block frequencies.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">   91</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">LinkVector</a> <a class="code" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">Links</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">  /// SumLinkWeights - Cached sum of the weights of all links + ThresHold.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a2b91674cb12c7e0eb5bddcd71213e4c6">   94</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> <a class="code" href="structSpillPlacement_1_1Node.html#a2b91674cb12c7e0eb5bddcd71213e4c6">SumLinkWeights</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">  /// preferReg - Return true when this node prefers to be in a register.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a15e88c2cf83e7164d2d0d85ed00f9b31">   97</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="structSpillPlacement_1_1Node.html#a15e88c2cf83e7164d2d0d85ed00f9b31">preferReg</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Undecided nodes (Value==0) go on the stack.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Value.html">Value</a> &gt; 0;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">  /// mustSpill - Return True if this node is so biased that it must spill.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#ae39aa56454ff85c86ddd1aca307354bd">  103</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="structSpillPlacement_1_1Node.html#ae39aa56454ff85c86ddd1aca307354bd">mustSpill</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// We must spill if Bias &lt; -sum(weights) or the MustSpill flag was set.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// BiasN is saturated when MustSpill is set, make sure this still returns</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// true when the RHS saturates. Note that SumLinkWeights includes Threshold.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a> &gt;= <a class="code" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a> + <a class="code" href="structSpillPlacement_1_1Node.html#a2b91674cb12c7e0eb5bddcd71213e4c6">SumLinkWeights</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">  /// clear - Reset per-query data, but preserve frequencies that only depend on</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">  /// the CFG.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a1f6ba0386da9fc66b3ae391e57251f77">  112</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="structSpillPlacement_1_1Node.html#a1f6ba0386da9fc66b3ae391e57251f77">clear</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> &amp;Threshold) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a> = <a class="code" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a> = <a class="code" href="classllvm_1_1Value.html">Value</a> = 0;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="structSpillPlacement_1_1Node.html#a2b91674cb12c7e0eb5bddcd71213e4c6">SumLinkWeights</a> = Threshold;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">Links</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  /// addLink - Add a link to bundle b with weight w.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a414c03213909b5fd790e6f1b505b7099">  119</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="structSpillPlacement_1_1Node.html#a414c03213909b5fd790e6f1b505b7099">addLink</a>(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a>, <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> w) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Update cached sum.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="structSpillPlacement_1_1Node.html#a2b91674cb12c7e0eb5bddcd71213e4c6">SumLinkWeights</a> += w;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// There can be multiple links to the same bundle, add them up.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span> (std::pair&lt;BlockFrequency, unsigned&gt; &amp;L : <a class="code" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">Links</a>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">if</span> (L.second == <a class="code" href="lib_2Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        L.first += w;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// This must be the first link to b.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">Links</a>.push_back(std::make_pair(w, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a>));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">  /// addBias - Bias this node.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">  134</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">addBias</a>(<a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> <a class="code" href="BlockFrequencyInfo_8cpp.html#a6228da6ce1f2cdae97b17637c061011e">freq</a>, <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8c">BorderConstraint</a> direction) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">switch</span> (direction) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">PrefReg</a>:</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a> += <a class="code" href="BlockFrequencyInfo_8cpp.html#a6228da6ce1f2cdae97b17637c061011e">freq</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">PrefSpill</a>:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a> += <a class="code" href="BlockFrequencyInfo_8cpp.html#a6228da6ce1f2cdae97b17637c061011e">freq</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">MustSpill</a>:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a> = <a class="code" href="classllvm_1_1BlockFrequency.html#abfa4567a98b37bee439fc06ba54042b2">BlockFrequency::getMaxFrequency</a>();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">  /// update - Recompute Value from Bias and Links. Return true when node</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">  /// preference changes.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#a03f2e4a56ddffdac13c30b91083f40b2">  152</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="structSpillPlacement_1_1Node.html#a03f2e4a56ddffdac13c30b91083f40b2">update</a>(<span class="keyword">const</span> <a class="code" href="structSpillPlacement_1_1Node.html">Node</a> nodes[], <span class="keyword">const</span> <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> &amp;Threshold) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// Compute the weighted sum of inputs.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> SumN = <a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> SumP = <a class="code" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">for</span> (std::pair&lt;BlockFrequency, unsigned&gt; &amp;L : <a class="code" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">Links</a>) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPUUnifyDivergentExitNodes_8cpp.html#aaa253dd3e56c37edd403113782c0ef94">nodes</a>[L.second].Value == -1)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        SumN += L.first;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="AMDGPUUnifyDivergentExitNodes_8cpp.html#aaa253dd3e56c37edd403113782c0ef94">nodes</a>[L.second].Value == 1)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        SumP += L.first;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// Each weighted sum is going to be less than the total frequency of the</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// bundle. Ideally, we should simply set Value = sign(SumP - SumN), but we</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// will add a dead zone around 0 for two reasons:</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">//  1. It avoids arbitrary bias when all links are 0 as is possible during</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">//     initial iterations.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">//  2. It helps tame rounding errors when the links nominally sum to 0.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">bool</span> Before = <a class="code" href="structSpillPlacement_1_1Node.html#a15e88c2cf83e7164d2d0d85ed00f9b31">preferReg</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (SumN &gt;= SumP + Threshold)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> = -1;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SumP &gt;= SumN + Threshold)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> = 1;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> = 0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> Before != <a class="code" href="structSpillPlacement_1_1Node.html#a15e88c2cf83e7164d2d0d85ed00f9b31">preferReg</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="structSpillPlacement_1_1Node.html#af1f662c46e92ef73f72533ef32887586">  181</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structSpillPlacement_1_1Node.html#af1f662c46e92ef73f72533ef32887586">getDissentingNeighbors</a>(<a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;unsigned&gt;</a> &amp;List,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                              <span class="keyword">const</span> <a class="code" href="structSpillPlacement_1_1Node.html">Node</a> nodes[])<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Elt : <a class="code" href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">Links</a>) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = Elt.second;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="comment">// Neighbors that already have the same value are not going to</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="comment">// change because of this node changing.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> != <a class="code" href="AMDGPUUnifyDivergentExitNodes_8cpp.html#aaa253dd3e56c37edd403113782c0ef94">nodes</a>[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].<a class="code" href="classllvm_1_1Value.html">Value</a>)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a>.insert(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;};</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">bool</span> SpillPlacement::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  MF = &amp;mf;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  bundles = &amp;getAnalysis&lt;EdgeBundles&gt;();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  loops = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!nodes &amp;&amp; <span class="stringliteral">&quot;Leaking node array&quot;</span>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  nodes = <span class="keyword">new</span> Node[bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a9622c5f8f20875b7770001a92a4bb32f">getNumBundles</a>()];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  TodoList.<a class="code" href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">clear</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  TodoList.<a class="code" href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">setUniverse</a>(bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a9622c5f8f20875b7770001a92a4bb32f">getNumBundles</a>());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// Compute total ingoing and outgoing block frequencies for all bundles.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  BlockFrequencies.resize(mf.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>());</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  MBFI = &amp;getAnalysis&lt;MachineBlockFrequencyInfo&gt;();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  setThreshold(MBFI-&gt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html#a94d6e925ba8c5dd5bdf4fa1ad44ba5c0">getEntryFreq</a>());</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : mf) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">unsigned</span> Num = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getNumber();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    BlockFrequencies[Num] = MBFI-&gt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html#a7dd7fa8c0a91118934b08b516b6e9d37">getBlockFreq</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// We never change the function.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keywordtype">void</span> SpillPlacement::releaseMemory() {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keyword">delete</span>[] nodes;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  nodes = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  TodoList.<a class="code" href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">clear</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/// activate - mark node n as active if it wasn&#39;t already.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> SpillPlacement::activate(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  TodoList.<a class="code" href="classllvm_1_1SparseSet.html#a1a4055576fc0e9afc07647fe6dae8b0d">insert</a>(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> (ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a15d63c566878e964c19139b2c76c0dab">test</a>(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>))</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].<a class="code" href="structSpillPlacement_1_1Node.html#a1f6ba0386da9fc66b3ae391e57251f77">clear</a>(Threshold);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Very large bundles usually come from big switches, indirect branches,</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// landing pads, or loops with many &#39;continue&#39; statements. It is difficult to</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// allocate registers when so many different blocks are involved.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Give a small negative bias to large bundles such that a substantial</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// fraction of the connected blocks need to be interested before we consider</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// expanding the region through the bundle. This helps compile time by</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// limiting the number of blocks visited and the number of links in the</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Hopfield network.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a7ab56f64eaf1bdd1911ec7ecf75bf78d">getBlocks</a>(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>).<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &gt; 100) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].<a class="code" href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a> = 0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].<a class="code" href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a> = (MBFI-&gt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html#a94d6e925ba8c5dd5bdf4fa1ad44ba5c0">getEntryFreq</a>() / 16);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">/// Set the threshold for a given entry frequency.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">/// Set the threshold relative to \c Entry.  Since the threshold is used as a</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">/// bound on the open interval (-Threshold;Threshold), 1 is the minimum</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/// threshold.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> SpillPlacement::setThreshold(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> &amp;Entry) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// Apparently 2 is a good threshold when Entry==2^14, but we need to scale</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// it.  Divide by 2^13, rounding as appropriate.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Freq = Entry.getFrequency();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a8009351707fa969013ab5d9126bab03e">Scaled</a> = (Freq &gt;&gt; 13) + <span class="keywordtype">bool</span>(Freq &amp; (1 &lt;&lt; 12));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  Threshold = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(UINT64_C(1), <a class="code" href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a8009351707fa969013ab5d9126bab03e">Scaled</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">/// addConstraints - Compute node biases and weights from a set of constraints.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/// Set a bit in NodeMask for each active node.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">  260</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">SpillPlacement::addConstraints</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BlockConstraint&gt;</a> LiveBlocks) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html">BlockConstraint</a> &amp;LB : LiveBlocks) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Freq = BlockFrequencies[LB.Number];</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Live-in to block?</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (LB.Entry != <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">DontCare</a>) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a> = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">getBundle</a>(LB.Number, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      activate(<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      nodes[<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>].<a class="code" href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">addBias</a>(Freq, LB.Entry);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// Live-out from block?</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (LB.Exit != <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">DontCare</a>) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordtype">unsigned</span> ob = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">getBundle</a>(LB.Number, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      activate(ob);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      nodes[ob].<a class="code" href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">addBias</a>(Freq, LB.Exit);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/// addPrefSpill - Same as addConstraints(PrefSpill)</span></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a2bd552babf3d34952ed159b653515b5e">  281</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SpillPlacement.html#a2bd552babf3d34952ed159b653515b5e">SpillPlacement::addPrefSpill</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Blocks, <span class="keywordtype">bool</span> Strong) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : Blocks) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Freq = BlockFrequencies[<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (Strong)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      Freq += Freq;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a> = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">getBundle</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">unsigned</span> ob = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">getBundle</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    activate(<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    activate(ob);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    nodes[<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>].<a class="code" href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">addBias</a>(Freq, <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">PrefSpill</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    nodes[ob].<a class="code" href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">addBias</a>(Freq, <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">PrefSpill</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a80ed1a6b4e8e7a1eb342ac71a24e842b">  295</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SpillPlacement.html#a80ed1a6b4e8e7a1eb342ac71a24e842b">SpillPlacement::addLinks</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Links) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Profile_8cpp.html#a14a17296c5e9cf55d96793be90af8715">Number</a> : Links) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a> = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">getBundle</a>(<a class="code" href="Profile_8cpp.html#a14a17296c5e9cf55d96793be90af8715">Number</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">unsigned</span> ob = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">getBundle</a>(<a class="code" href="Profile_8cpp.html#a14a17296c5e9cf55d96793be90af8715">Number</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// Ignore self-loops.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a> == ob)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    activate(<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    activate(ob);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Freq = BlockFrequencies[<a class="code" href="Profile_8cpp.html#a14a17296c5e9cf55d96793be90af8715">Number</a>];</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    nodes[<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>].<a class="code" href="structSpillPlacement_1_1Node.html#a414c03213909b5fd790e6f1b505b7099">addLink</a>(ob, Freq);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    nodes[ob].<a class="code" href="structSpillPlacement_1_1Node.html#a414c03213909b5fd790e6f1b505b7099">addLink</a>(<a class="code" href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">ib</a>, Freq);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a435b043e417bb3f4fc9ac0f6e0c6ebc8">  311</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1SpillPlacement.html#a435b043e417bb3f4fc9ac0f6e0c6ebc8">SpillPlacement::scanActiveBundles</a>() {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  RecentPositive.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> : ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>()) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    update(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// A node that must spill, or a node without any links is not going to</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// change its value ever again, so exclude it from iterations.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].mustSpill())</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].preferReg())</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      RecentPositive.push_back(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">return</span> !RecentPositive.empty();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keywordtype">bool</span> SpillPlacement::update(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> (!nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].update(nodes, Threshold))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].<a class="code" href="structSpillPlacement_1_1Node.html#af1f662c46e92ef73f72533ef32887586">getDissentingNeighbors</a>(TodoList, nodes);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">/// iterate - Repeatedly update the Hopfield nodes until stability or the</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">/// maximum number of iterations is reached.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a8d70270c78d36ddb40a8b782e141b63a">  334</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SpillPlacement.html#a8d70270c78d36ddb40a8b782e141b63a">SpillPlacement::iterate</a>() {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// We do not need to push those node in the todolist.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// They are already been proceeded as part of the previous iteration.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  RecentPositive.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// Since the last iteration, the todolist have been augmented by calls</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// to addConstraints, addLinks, and co.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// Update the network energy starting at this new frontier.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment">// The call to ::update will add the nodes that changed into the todolist.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">unsigned</span> Limit = bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a9622c5f8f20875b7770001a92a4bb32f">getNumBundles</a>() * 10;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">while</span>(Limit-- &gt; 0 &amp;&amp; !TodoList.<a class="code" href="classllvm_1_1SparseSet.html#aa4dfc2338a3ed82eb01661c5391339d6">empty</a>()) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = TodoList.<a class="code" href="classllvm_1_1SparseSet.html#aa8aaae0a835db2df0f57f194c960372b">pop_back_val</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (!update(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>))</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].preferReg())</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      RecentPositive.push_back(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a329177b9cd260516a4aca8f55c199020">  353</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SpillPlacement.html#a329177b9cd260516a4aca8f55c199020">SpillPlacement::prepare</a>(<a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;RegBundles) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  RecentPositive.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  TodoList.<a class="code" href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">clear</a>();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// Reuse RegBundles as our ActiveNodes vector.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  ActiveNodes = &amp;RegBundles;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">clear</a>();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a9622c5f8f20875b7770001a92a4bb32f">getNumBundles</a>());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="classllvm_1_1SpillPlacement.html#a2310373a95001e3677c0f0534cdfc0e1">  363</a></span>&#160;<a class="code" href="classllvm_1_1SpillPlacement.html#a2310373a95001e3677c0f0534cdfc0e1">SpillPlacement::finish</a>() {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ActiveNodes &amp;&amp; <span class="stringliteral">&quot;Call prepare() first&quot;</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// Write preferences back to ActiveNodes.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordtype">bool</span> Perfect = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> : ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>())</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (!nodes[<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>].preferReg()) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      ActiveNodes-&gt;<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(<a class="code" href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      Perfect = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  ActiveNodes = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">return</span> Perfect;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a5c51fb97e1e2f08e23feafb387c5d4e1">  377</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a5c51fb97e1e2f08e23feafb387c5d4e1">SpillPlacement::BlockConstraint::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a> = [](<a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8c">BorderConstraint</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) -&gt; <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">DontCare</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DontCare&quot;</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">PrefReg</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;PrefReg&quot;</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">PrefSpill</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;PrefSpill&quot;</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca821efd84662975133aa7c60d1a84fa42">PrefBoth</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;PrefBoth&quot;</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">MustSpill</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;MustSpill&quot;</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    };</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;uncovered switch&quot;</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  };</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;{&quot;</span> &lt;&lt; <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">Entry</a>) &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">Exit</a>) &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         &lt;&lt; (<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aa94bff6fdd53de69a5ca85f8ff69a37c">ChangesValue</a> ? <span class="stringliteral">&quot;changes&quot;</span> : <span class="stringliteral">&quot;no change&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a3441def385335310144f7a6d27b885d7">  395</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a3441def385335310144f7a6d27b885d7">SpillPlacement::BlockConstraint::dump</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="classllvm_1_1Pass.html#a061b4c01e9c189208dbfd3c77fdb9a5c">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aSpillPlacement_8cpp_html_a664d624d87e6fdf269226a601eb2a224"><div class="ttname"><a href="SpillPlacement_8cpp.html#a664d624d87e6fdf269226a601eb2a224">true</a></div><div class="ttdeci">Spill Code Placement true</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00057">SpillPlacement.cpp:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html">llvm::SpillPlacement</a></div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00043">SpillPlacement.h:43</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a370ae71068f6725ac2c6b61cf66a05b4"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a370ae71068f6725ac2c6b61cf66a05b4">llvm::SpillPlacement::Node::BiasN</a></div><div class="ttdeci">BlockFrequency BiasN</div><div class="ttdoc">BiasN - Sum of blocks that prefer a spill.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00077">SpillPlacement.cpp:77</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00344">BitVector.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a35bbc237e4a675c5332103ac6e7dcce1"><div class="ttname"><a href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">llvm::BitVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear - Removes all bits from the bitvector.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00328">BitVector.h:328</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; std::pair&lt; BlockFrequency, unsigned &gt;, 4 &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1aa4357710f3fd6e616e13b5c16dc0d8"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">llvm::BitVector::set_bits</a></div><div class="ttdeci">iterator_range&lt; const_set_bits_iterator &gt; set_bits() const</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00133">BitVector.h:133</a></div></div>
<div class="ttc" id="aMachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_aa22424ba23740b6a748e8d0c239b7e4c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">llvm::MachineFunction::getNumBlockIDs</a></div><div class="ttdeci">unsigned getNumBlockIDs() const</div><div class="ttdoc">getNumBlockIDs - Return the number of MBB ID's allocated.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00815">MachineFunction.h:815</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a8d70270c78d36ddb40a8b782e141b63a"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a8d70270c78d36ddb40a8b782e141b63a">llvm::SpillPlacement::iterate</a></div><div class="ttdeci">void iterate()</div><div class="ttdoc">iterate - Update the network iteratively until convergence, or new bundles are found.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00334">SpillPlacement.cpp:334</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a6155db02c64ef3abd03259a7dba04ea9"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a6155db02c64ef3abd03259a7dba04ea9">llvm::SpillPlacement::Node::Value</a></div><div class="ttdeci">int Value</div><div class="ttdoc">Value - Output value of this node computed from the Bias and links.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00085">SpillPlacement.cpp:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequency_html_abfa4567a98b37bee439fc06ba54042b2"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html#abfa4567a98b37bee439fc06ba54042b2">llvm::BlockFrequency::getMaxFrequency</a></div><div class="ttdeci">static uint64_t getMaxFrequency()</div><div class="ttdoc">Returns the maximum possible frequency, the saturation value.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00030">BlockFrequency.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a32859a24aa7a3be269855b989d92a4b4"><div class="ttname"><a href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">llvm::BitVector::resize</a></div><div class="ttdeci">void resize(unsigned N, bool t=false)</div><div class="ttdoc">resize - Grow or shrink the bitvector.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00334">BitVector.h:334</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5e42896e3b3a470b8b64cb9296a68630"><div class="ttname"><a href="namespacellvm.html#a5e42896e3b3a470b8b64cb9296a68630">llvm::SpillPlacementID</a></div><div class="ttdeci">char &amp; SpillPlacementID</div><div class="ttdoc">SpillPlacement analysis.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00050">SpillPlacement.cpp:50</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a15e88c2cf83e7164d2d0d85ed00f9b31"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a15e88c2cf83e7164d2d0d85ed00f9b31">llvm::SpillPlacement::Node::preferReg</a></div><div class="ttdeci">bool preferReg() const</div><div class="ttdoc">preferReg - Return true when this node prefers to be in a register.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00097">SpillPlacement.cpp:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a0d46b9b2cb2caf78e65bbd56644fc0f2"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">llvm::SpillPlacement::addConstraints</a></div><div class="ttdeci">void addConstraints(ArrayRef&lt; BlockConstraint &gt; LiveBlocks)</div><div class="ttdoc">addConstraints - Add constraints and biases.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00260">SpillPlacement.cpp:260</a></div></div>
<div class="ttc" id="aSpillPlacement_8h_html"><div class="ttname"><a href="SpillPlacement_8h.html">SpillPlacement.h</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8cpp_html_a6228da6ce1f2cdae97b17637c061011e"><div class="ttname"><a href="BlockFrequencyInfo_8cpp.html#a6228da6ce1f2cdae97b17637c061011e">freq</a></div><div class="ttdeci">block freq</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00300">BlockFrequencyInfo.cpp:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBlockFrequencyInfo_html_a7dd7fa8c0a91118934b08b516b6e9d37"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html#a7dd7fa8c0a91118934b08b516b6e9d37">llvm::MachineBlockFrequencyInfo::getBlockFreq</a></div><div class="ttdeci">BlockFrequency getBlockFreq(const MachineBasicBlock *MBB) const</div><div class="ttdoc">getblockFreq - Return block frequency.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8cpp_source.html#l00230">MachineBlockFrequencyInfo.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00167">MachineFunctionPass.cpp:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00089">MachineLoopInfo.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1EdgeBundles_html"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html">llvm::EdgeBundles</a></div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00024">EdgeBundles.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a03bf04c760f4e0dc8f8673a6dbbc1f37"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a03bf04c760f4e0dc8f8673a6dbbc1f37">llvm::SpillPlacement::Node::addBias</a></div><div class="ttdeci">void addBias(BlockFrequency freq, BorderConstraint direction)</div><div class="ttdoc">addBias - Bias this node.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00134">SpillPlacement.cpp:134</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a67abf92d6eabc03f37e9a2bd422e290a"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a67abf92d6eabc03f37e9a2bd422e290a">llvm::SpillPlacement::Node::BiasP</a></div><div class="ttdeci">BlockFrequency BiasP</div><div class="ttdoc">BiasP - Sum of blocks that prefer a register.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00080">SpillPlacement.cpp:80</a></div></div>
<div class="ttc" id="aMachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html_aa94bff6fdd53de69a5ca85f8ff69a37c"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aa94bff6fdd53de69a5ca85f8ff69a37c">llvm::SpillPlacement::BlockConstraint::ChangesValue</a></div><div class="ttdeci">bool ChangesValue</div><div class="ttdoc">True when this block changes the value of the live range.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00097">SpillPlacement.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html">llvm::MachineBlockFrequencyInfo</a></div><div class="ttdoc">MachineBlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate machine basic b...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8h_source.html#l00033">MachineBlockFrequencyInfo.h:33</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a2b91674cb12c7e0eb5bddcd71213e4c6"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a2b91674cb12c7e0eb5bddcd71213e4c6">llvm::SpillPlacement::Node::SumLinkWeights</a></div><div class="ttdeci">BlockFrequency SumLinkWeights</div><div class="ttdoc">SumLinkWeights - Cached sum of the weights of all links + ThresHold.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00094">SpillPlacement.cpp:94</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_af1f662c46e92ef73f72533ef32887586"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#af1f662c46e92ef73f72533ef32887586">llvm::SpillPlacement::Node::getDissentingNeighbors</a></div><div class="ttdeci">void getDissentingNeighbors(SparseSet&lt; unsigned &gt; &amp;List, const Node nodes[]) const</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00181">SpillPlacement.cpp:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_acdf5bf3bbc10f9331f56441a4d483bb1"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int b</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00418">README.txt:418</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a1f6ba0386da9fc66b3ae391e57251f77"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a1f6ba0386da9fc66b3ae391e57251f77">llvm::SpillPlacement::Node::clear</a></div><div class="ttdeci">void clear(const BlockFrequency &amp;Threshold)</div><div class="ttdoc">clear - Reset per-query data, but preserve frequencies that only depend on the CFG.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00112">SpillPlacement.cpp:112</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a2310373a95001e3677c0f0534cdfc0e1"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a2310373a95001e3677c0f0534cdfc0e1">llvm::SpillPlacement::finish</a></div><div class="ttdeci">bool finish()</div><div class="ttdoc">finish - Compute the optimal spill code placement given the constraints.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00363">SpillPlacement.cpp:363</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aBitVector_8h_html"><div class="ttname"><a href="BitVector_8h.html">BitVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00075">BitVector.h:75</a></div></div>
<div class="ttc" id="aSpillPlacement_8cpp_html_ad55166072fc7347066796a6142af4e2e"><div class="ttname"><a href="SpillPlacement_8cpp.html#ad55166072fc7347066796a6142af4e2e">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(SpillPlacement, DEBUG_TYPE, &quot;Spill Code Placement Analysis&quot;, true, true) INITIALIZE_PASS_END(SpillPlacement</div></div>
<div class="ttc" id="aclassllvm_1_1EdgeBundles_html_a9622c5f8f20875b7770001a92a4bb32f"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html#a9622c5f8f20875b7770001a92a4bb32f">llvm::EdgeBundles::getNumBundles</a></div><div class="ttdeci">unsigned getNumBundles() const</div><div class="ttdoc">getNumBundles - Return the total number of bundles in the CFG.</div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00044">EdgeBundles.h:44</a></div></div>
<div class="ttc" id="aEdgeBundles_8h_html"><div class="ttname"><a href="EdgeBundles_8h.html">EdgeBundles.h</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a03f2e4a56ddffdac13c30b91083f40b2"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a03f2e4a56ddffdac13c30b91083f40b2">llvm::SpillPlacement::Node::update</a></div><div class="ttdeci">bool update(const Node nodes[], const BlockFrequency &amp;Threshold)</div><div class="ttdoc">update - Recompute Value from Bias and Links.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00152">SpillPlacement.cpp:152</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a5a13362b22c15eb1235eacd5f8440ed4"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a5a13362b22c15eb1235eacd5f8440ed4">llvm::SpillPlacement::Node::Links</a></div><div class="ttdeci">LinkVector Links</div><div class="ttdoc">Links - (Weight, BundleNo) for all transparent blocks connecting to other bundles.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00091">SpillPlacement.cpp:91</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html_a061b4c01e9c189208dbfd3c77fdb9a5c"><div class="ttname"><a href="classllvm_1_1Pass.html#a061b4c01e9c189208dbfd3c77fdb9a5c">llvm::Pass::print</a></div><div class="ttdeci">virtual void print(raw_ostream &amp;OS, const Module *M) const</div><div class="ttdoc">print - Print out the internal state of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00130">Pass.cpp:130</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html_addcae7ef74d3f00004c6dfcc5775c1e3"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">llvm::SpillPlacement::BlockConstraint::Number</a></div><div class="ttdeci">unsigned Number</div><div class="ttdoc">Basic block number (from MBB::getNumber()).</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00090">SpillPlacement.h:90</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aCodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html_aab2805f3c0c929660eb309b0fe9e9ee3"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">llvm::SpillPlacement::BlockConstraint::Entry</a></div><div class="ttdeci">BorderConstraint Entry</div><div class="ttdoc">Constraint on block entry.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00091">SpillPlacement.h:91</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html"><div class="ttname"><a href="structSpillPlacement_1_1Node.html">llvm::SpillPlacement::Node</a></div><div class="ttdoc">Node - Each edge bundle corresponds to a Hopfield node.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00075">SpillPlacement.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequency_html"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html">llvm::BlockFrequency</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00023">BlockFrequency.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">llvm::SpillPlacement::PrefReg</a></div><div class="ttdeci">@ PrefReg</div><div class="ttdoc">Block entry/exit prefers a register.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00082">SpillPlacement.h:82</a></div></div>
<div class="ttc" id="aAMDGPUUnifyDivergentExitNodes_8cpp_html_aaa253dd3e56c37edd403113782c0ef94"><div class="ttname"><a href="AMDGPUUnifyDivergentExitNodes_8cpp.html#aaa253dd3e56c37edd403113782c0ef94">nodes</a></div><div class="ttdeci">Unify divergent function exit nodes</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUUnifyDivergentExitNodes_8cpp_source.html#l00087">AMDGPUUnifyDivergentExitNodes.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseSet_html_aab146f4c3793a4a99649ce52b3badc15"><div class="ttname"><a href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">llvm::SparseSet::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear - Clears the set.</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00194">SparseSet.h:194</a></div></div>
<div class="ttc" id="aARCInstrInfo_8cpp_html_a5d6e37f3d036496321824378223ad718a8009351707fa969013ab5d9126bab03e"><div class="ttname"><a href="ARCInstrInfo_8cpp.html#a5d6e37f3d036496321824378223ad718a8009351707fa969013ab5d9126bab03e">Scaled</a></div><div class="ttdeci">@ Scaled</div><div class="ttdef"><b>Definition:</b> <a href="ARCInstrInfo_8cpp_source.html#l00035">ARCInstrInfo.cpp:35</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a2bd552babf3d34952ed159b653515b5e"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a2bd552babf3d34952ed159b653515b5e">llvm::SpillPlacement::addPrefSpill</a></div><div class="ttdeci">void addPrefSpill(ArrayRef&lt; unsigned &gt; Blocks, bool Strong)</div><div class="ttdoc">addPrefSpill - Add PrefSpill constraints to all blocks listed.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00281">SpillPlacement.cpp:281</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseSet_html_ac5c4065b01268eb6764867041cd1d96c"><div class="ttname"><a href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">llvm::SparseSet::setUniverse</a></div><div class="ttdeci">void setUniverse(unsigned U)</div><div class="ttdoc">setUniverse - Set the universe size which determines the largest key the set can hold.</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00155">SparseSet.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseSet_html_aa8aaae0a835db2df0f57f194c960372b"><div class="ttname"><a href="classllvm_1_1SparseSet.html#aa8aaae0a835db2df0f57f194c960372b">llvm::SparseSet::pop_back_val</a></div><div class="ttdeci">ValueT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00269">SparseSet.h:269</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_ae39aa56454ff85c86ddd1aca307354bd"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#ae39aa56454ff85c86ddd1aca307354bd">llvm::SpillPlacement::Node::mustSpill</a></div><div class="ttdeci">bool mustSpill() const</div><div class="ttdoc">mustSpill - Return True if this node is so biased that it must spill.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00103">SpillPlacement.cpp:103</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html_a3441def385335310144f7a6d27b885d7"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a3441def385335310144f7a6d27b885d7">llvm::SpillPlacement::BlockConstraint::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00395">SpillPlacement.cpp:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">llvm::SpillPlacement::PrefSpill</a></div><div class="ttdeci">@ PrefSpill</div><div class="ttdoc">Block entry/exit prefers a stack slot.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00083">SpillPlacement.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a80ed1a6b4e8e7a1eb342ac71a24e842b"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a80ed1a6b4e8e7a1eb342ac71a24e842b">llvm::SpillPlacement::addLinks</a></div><div class="ttdeci">void addLinks(ArrayRef&lt; unsigned &gt; Links)</div><div class="ttdoc">addLinks - Add transparent blocks with the given numbers.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00295">SpillPlacement.cpp:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">llvm::SpillPlacement::DontCare</a></div><div class="ttdeci">@ DontCare</div><div class="ttdoc">Block doesn't care / variable not live.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00081">SpillPlacement.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aProfile_8cpp_html_a14a17296c5e9cf55d96793be90af8715"><div class="ttname"><a href="Profile_8cpp.html#a14a17296c5e9cf55d96793be90af8715">Number</a></div><div class="ttdeci">uint32_t Number</div><div class="ttdef"><b>Definition:</b> <a href="Profile_8cpp_source.html#l00047">Profile.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseSet_html_aa4dfc2338a3ed82eb01661c5391339d6"><div class="ttname"><a href="classllvm_1_1SparseSet.html#aa4dfc2338a3ed82eb01661c5391339d6">llvm::SparseSet::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Returns true if the set is empty.</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00183">SparseSet.h:183</a></div></div>
<div class="ttc" id="aSpillPlacement_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="SpillPlacement_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00046">SpillPlacement.cpp:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a329177b9cd260516a4aca8f55c199020"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a329177b9cd260516a4aca8f55c199020">llvm::SpillPlacement::prepare</a></div><div class="ttdeci">void prepare(BitVector &amp;RegBundles)</div><div class="ttdoc">prepare - Reset state and prepare for a new spill placement computation.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00353">SpillPlacement.cpp:353</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">llvm::SpillPlacement::MustSpill</a></div><div class="ttdeci">@ MustSpill</div><div class="ttdoc">A register is impossible, variable must be spilled.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00085">SpillPlacement.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_a435b043e417bb3f4fc9ac0f6e0c6ebc8"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a435b043e417bb3f4fc9ac0f6e0c6ebc8">llvm::SpillPlacement::scanActiveBundles</a></div><div class="ttdeci">bool scanActiveBundles()</div><div class="ttdoc">scanActiveBundles - Perform an initial scan of all bundles activated by addConstraints and addLinks,...</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00311">SpillPlacement.cpp:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a15d63c566878e964c19139b2c76c0dab"><div class="ttname"><a href="classllvm_1_1BitVector.html#a15d63c566878e964c19139b2c76c0dab">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00454">BitVector.h:454</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseSet_html_a1a4055576fc0e9afc07647fe6dae8b0d"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a1a4055576fc0e9afc07647fe6dae8b0d">llvm::SparseSet::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;Val)</div><div class="ttdoc">insert - Attempts to insert a new element.</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00252">SparseSet.h:252</a></div></div>
<div class="ttc" id="anamespacellvm_html_a63540526d092e2f4bbc70590b6034f4e"><div class="ttname"><a href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">llvm::toString</a></div><div class="ttdeci">const char * toString(DWARFSectionKind Kind)</div><div class="ttdef"><b>Definition:</b> <a href="DWARFUnitIndex_8h_source.html#l00067">DWARFUnitIndex.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8ca821efd84662975133aa7c60d1a84fa42"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca821efd84662975133aa7c60d1a84fa42">llvm::SpillPlacement::PrefBoth</a></div><div class="ttdeci">@ PrefBoth</div><div class="ttdoc">Block entry prefers both register and stack.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00084">SpillPlacement.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00385">BitVector.h:385</a></div></div>
<div class="ttc" id="astructSpillPlacement_1_1Node_html_a414c03213909b5fd790e6f1b505b7099"><div class="ttname"><a href="structSpillPlacement_1_1Node.html#a414c03213909b5fd790e6f1b505b7099">llvm::SpillPlacement::Node::addLink</a></div><div class="ttdeci">void addLink(unsigned b, BlockFrequency w)</div><div class="ttdoc">addLink - Add a link to bundle b with weight w.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00119">SpillPlacement.cpp:119</a></div></div>
<div class="ttc" id="aMachineBlockPlacement_8cpp_html_a10783a549bfb83fd142ae4e645a283ef"><div class="ttname"><a href="MachineBlockPlacement_8cpp.html#a10783a549bfb83fd142ae4e645a283ef">Placement</a></div><div class="ttdeci">Branch Probability Basic Block Placement</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockPlacement_8cpp_source.html#l00631">MachineBlockPlacement.cpp:631</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html_a5c51fb97e1e2f08e23feafb387c5d4e1"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a5c51fb97e1e2f08e23feafb387c5d4e1">llvm::SpillPlacement::BlockConstraint::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00377">SpillPlacement.cpp:377</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_a361dad1df3e6d9b5610d40dcf49204c5"><div class="ttname"><a href="RDFGraph_8cpp.html#a361dad1df3e6d9b5610d40dcf49204c5">List</a></div><div class="ttdeci">const NodeList &amp; List</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00199">RDFGraph.cpp:199</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html_a1e36bf5c748d62c8fa43ff7827f94684"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">llvm::SpillPlacement::BlockConstraint::Exit</a></div><div class="ttdeci">BorderConstraint Exit</div><div class="ttdoc">Constraint on block exit.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00092">SpillPlacement.h:92</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__AM_html_a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc"><div class="ttname"><a href="namespacellvm_1_1ARM__AM.html#a37ea08d6fc20eb1ef1bfb3ad008261a5a142f78f7efc65a4326e455faf26fd4cc">llvm::ARM_AM::ib</a></div><div class="ttdeci">@ ib</div><div class="ttdef"><b>Definition:</b> <a href="ARMAddressingModes_8h_source.html#l00069">ARMAddressingModes.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1EdgeBundles_html_a7ab56f64eaf1bdd1911ec7ecf75bf78d"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html#a7ab56f64eaf1bdd1911ec7ecf75bf78d">llvm::EdgeBundles::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getBlocks(unsigned Bundle) const</div><div class="ttdoc">getBlocks - Return an array of blocks that are connected to Bundle.</div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00047">EdgeBundles.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseSet_html"><div class="ttname"><a href="classllvm_1_1SparseSet.html">llvm::SparseSet&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="lib_2Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00685">README.txt:685</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBlockFrequencyInfo_html_a94d6e925ba8c5dd5bdf4fa1ad44ba5c0"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html#a94d6e925ba8c5dd5bdf4fa1ad44ba5c0">llvm::MachineBlockFrequencyInfo::getEntryFreq</a></div><div class="ttdeci">uint64_t getEntryFreq() const</div><div class="ttdoc">Divide a block's BlockFrequency::getFrequency() value by this value to obtain the entry block - relat...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8cpp_source.html#l00289">MachineBlockFrequencyInfo.cpp:289</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aMachineBlockFrequencyInfo_8h_html"><div class="ttname"><a href="MachineBlockFrequencyInfo_8h.html">MachineBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="astructllvm_1_1SpillPlacement_1_1BlockConstraint_html"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html">llvm::SpillPlacement::BlockConstraint</a></div><div class="ttdoc">BlockConstraint - Entry and exit constraints for a basic block.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00089">SpillPlacement.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1EdgeBundles_html_a82ab46612904a1a2bbacf62facbfc306"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html#a82ab46612904a1a2bbacf62facbfc306">llvm::EdgeBundles::getBundle</a></div><div class="ttdeci">unsigned getBundle(unsigned N, bool Out) const</div><div class="ttdoc">getBundle - Return the ingoing (Out = false) or outgoing (Out = true) bundle number for basic block N</div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00041">EdgeBundles.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_aa34d3acfa03ca143b486fc4fd7604e76"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#aa34d3acfa03ca143b486fc4fd7604e76">llvm::SpillPlacement::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00073">SpillPlacement.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8c"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8c">llvm::SpillPlacement::BorderConstraint</a></div><div class="ttdeci">BorderConstraint</div><div class="ttdoc">BorderConstraint - A basic block has separate constraints for entry and exit.</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00080">SpillPlacement.h:80</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:01:13 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

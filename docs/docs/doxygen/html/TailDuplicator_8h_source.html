<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: include/llvm/CodeGen/TailDuplicator.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dcde91663b8816e1e2311938ccd8f690.html">llvm</a></li><li class="navelem"><a class="el" href="dir_19e251b771363806b5435ead42278477.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TailDuplicator.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="TailDuplicator_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- llvm/CodeGen/TailDuplicator.h ----------------------------*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file defines the TailDuplicator class. Used by the</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// TailDuplication pass, and MachineBlockPlacement.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_CODEGEN_TAILDUPLICATOR_H</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_CODEGEN_TAILDUPLICATOR_H</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N&gt; <span class="keyword">class </span>SmallSetVector;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Fn&gt; <span class="keyword">class </span>function_ref;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">class </span>MBFIWrapper;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">class </span>MachineBasicBlock;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">class </span>MachineBranchProbabilityInfo;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">class </span>MachineFunction;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">class </span>MachineInstr;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">class </span>MachineModuleInfo;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">class </span>MachineRegisterInfo;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">class </span>ProfileSummaryInfo;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">class </span>TargetRegisterInfo;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/// Utility class to perform tail duplication.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html">   39</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1TailDuplicator.html">TailDuplicator</a> {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *TII;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a> *MBPI;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> *MMI;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *MRI;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="classllvm_1_1MBFIWrapper.html">MBFIWrapper</a> *MBFI;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordtype">bool</span> PreRegAlloc;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordtype">bool</span> LayoutMode;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordtype">unsigned</span> TailDupSize;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// A list of virtual registers for which to update SSA form.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 16&gt;</a> SSAUpdateVRs;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// For each virtual register in SSAUpdateVals keep a list of source virtual</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// registers.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">using</span> AvailableValsTy = std::vector&lt;std::pair&lt;MachineBasicBlock *, Register&gt;&gt;;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, AvailableValsTy&gt;</a> SSAUpdateVals;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  /// Prepare to run on a specific machine function.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">  /// @param MF - Function that will be processed</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">  /// @param PreRegAlloc - true if used before register allocation</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">  /// @param MBPI - Branch Probability Info. Used to propagate correct</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">  ///     probabilities when modifying the CFG.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">  /// @param LayoutMode - When true, don&#39;t use the existing layout to make</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  ///     decisions.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  /// @param TailDupSize - Maxmimum size of blocks to tail-duplicate. Zero</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  ///     default implies using the command line value TailDupSize.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a1974019840857f5ae10aa6b4edc5317d">initMF</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">bool</span> PreRegAlloc,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a> *MBPI,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;              <a class="code" href="classllvm_1_1MBFIWrapper.html">MBFIWrapper</a> *MBFI,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;              <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;              <span class="keywordtype">bool</span> LayoutMode, <span class="keywordtype">unsigned</span> TailDupSize = 0);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a1b957210a6d62c3fe19410e746fc6ab4">tailDuplicateBlocks</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a22b5f49c33bc7b11d150556b0ee1ca0a">isSimpleBB</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#aa7dba30d4d9162f00367404e06085391">shouldTailDuplicate</a>(<span class="keywordtype">bool</span> IsSimple, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;TailBB);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  /// Returns true if TailBB can successfully be duplicated into PredBB</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a8fffb36a3e1523ff3d26521f27c02df8">canTailDuplicate</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">  /// Tail duplicate a single basic block into its predecessors, and then clean</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">  /// up.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">  /// If \p DuplicatePreds is not null, it will be updated to contain the list</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">  /// of predecessors that received a copy of \p MBB.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">  /// If \p RemovalCallback is non-null. It will be called before MBB is</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  /// deleted.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">  /// If \p CandidatePtr is not null, duplicate into these blocks only.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a1c0f17f40e0399c6d151a50e99797e58">tailDuplicateAndUpdate</a>(</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordtype">bool</span> IsSimple, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ForcedLayoutPred,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock*&gt;</a> *DuplicatedPreds = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *)&gt; *RemovalCallback = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> *CandidatePtr = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">using</span> <a class="code" href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">RegSubRegPair</a> = <a class="code" href="PeepholeOptimizer_8cpp.html#a16005492b382a6a76abae848b4af2b83">TargetInstrInfo::RegSubRegPair</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordtype">void</span> addSSAUpdateEntry(<a class="code" href="classllvm_1_1Register.html">Register</a> OrigReg, <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">void</span> processPHI(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> &amp;LocalVRMap,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;Register, RegSubRegPair&gt;&gt; &amp;<a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> &amp;UsedByPhi, <span class="keywordtype">bool</span> Remove);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordtype">void</span> duplicateInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                            <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                            <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> &amp;LocalVRMap,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> &amp;UsedByPhi);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">void</span> updateSuccessorsPHIs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FromBB, <span class="keywordtype">bool</span> isDead,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> &amp;TDBBs,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                            <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MachineBasicBlock *, 8&gt;</a> &amp;Succs);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordtype">bool</span> canCompletelyDuplicateBB(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordtype">bool</span> duplicateSimpleBB(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> &amp;TDBBs,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> &amp;RegsUsedByPhi);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordtype">bool</span> tailDuplicate(<span class="keywordtype">bool</span> IsSimple,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ForcedLayoutPred,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> &amp;TDBBs,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;<a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> *CandidatePtr);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">void</span> appendCopies(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;Register, RegSubRegPair&gt;&gt; &amp;CopyInfos,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;<a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">void</span> removeDeadBlock(</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *)&gt; *RemovalCallback = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;};</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#endif // LLVM_CODEGEN_TAILDUPLICATOR_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a1974019840857f5ae10aa6b4edc5317d"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a1974019840857f5ae10aa6b4edc5317d">llvm::TailDuplicator::initMF</a></div><div class="ttdeci">void initMF(MachineFunction &amp;MF, bool PreRegAlloc, const MachineBranchProbabilityInfo *MBPI, MBFIWrapper *MBFI, ProfileSummaryInfo *PSI, bool LayoutMode, unsigned TailDupSize=0)</div><div class="ttdoc">Prepare to run on a specific machine function.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00079">TailDuplicator.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00236">TargetRegisterInfo.h:236</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_aa7dba30d4d9162f00367404e06085391"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#aa7dba30d4d9162f00367404e06085391">llvm::TailDuplicator::shouldTailDuplicate</a></div><div class="ttdeci">bool shouldTailDuplicate(bool IsSimple, MachineBasicBlock &amp;TailBB)</div><div class="ttdoc">Determine if it is profitable to duplicate this block.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00550">TailDuplicator.cpp:550</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetInstrInfo_1_1RegSubRegPair_html"><div class="ttname"><a href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">llvm::TargetInstrInfo::RegSubRegPair</a></div><div class="ttdoc">A pair composed of a register and a sub-register index.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00494">TargetInstrInfo.h:494</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a22b5f49c33bc7b11d150556b0ee1ca0a"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a22b5f49c33bc7b11d150556b0ee1ca0a">llvm::TailDuplicator::isSimpleBB</a></div><div class="ttdeci">static bool isSimpleBB(MachineBasicBlock *TailBB)</div><div class="ttdoc">True if this BB has only one unconditional jump.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00680">TailDuplicator.cpp:680</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html">llvm::MachineBranchProbabilityInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8h_source.html#l00022">MachineBranchProbabilityInfo.h:22</a></div></div>
<div class="ttc" id="aDenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html">llvm::MachineModuleInfo</a></div><div class="ttdoc">This class contains meta information specific to a module.</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00074">MachineModuleInfo.h:74</a></div></div>
<div class="ttc" id="aSILowerI1Copies_8cpp_html_a5cd9e4c7fe1a7ebe8b545eb891a2a949"><div class="ttname"><a href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a></div><div class="ttdeci">SI Lower i1 Copies</div><div class="ttdef"><b>Definition:</b> <a href="SILowerI1Copies_8cpp_source.html#l00397">SILowerI1Copies.cpp:397</a></div></div>
<div class="ttc" id="aclassllvm_1_1MBFIWrapper_html"><div class="ttname"><a href="classllvm_1_1MBFIWrapper.html">llvm::MBFIWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="MBFIWrapper_8h_source.html#l00027">MBFIWrapper.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00268">DenseSet.h:268</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a1c0f17f40e0399c6d151a50e99797e58"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a1c0f17f40e0399c6d151a50e99797e58">llvm::TailDuplicator::tailDuplicateAndUpdate</a></div><div class="ttdeci">bool tailDuplicateAndUpdate(bool IsSimple, MachineBasicBlock *MBB, MachineBasicBlock *ForcedLayoutPred, SmallVectorImpl&lt; MachineBasicBlock * &gt; *DuplicatedPreds=nullptr, function_ref&lt; void(MachineBasicBlock *)&gt; *RemovalCallback=nullptr, SmallVectorImpl&lt; MachineBasicBlock * &gt; *CandidatePtr=nullptr)</div><div class="ttdoc">Tail duplicate a single basic block into its predecessors, and then clean up.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00155">TailDuplicator.cpp:155</a></div></div>
<div class="ttc" id="aPeepholeOptimizer_8cpp_html_a16005492b382a6a76abae848b4af2b83"><div class="ttname"><a href="PeepholeOptimizer_8cpp.html#a16005492b382a6a76abae848b4af2b83">RegSubRegPair</a></div><div class="ttdeci">TargetInstrInfo::RegSubRegPair RegSubRegPair</div><div class="ttdef"><b>Definition:</b> <a href="PeepholeOptimizer_8cpp_source.html#l00099">PeepholeOptimizer.cpp:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a8fffb36a3e1523ff3d26521f27c02df8"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a8fffb36a3e1523ff3d26521f27c02df8">llvm::TailDuplicator::canTailDuplicate</a></div><div class="ttdeci">bool canTailDuplicate(MachineBasicBlock *TailBB, MachineBasicBlock *PredBB)</div><div class="ttdoc">Returns true if TailBB can successfully be duplicated into PredBB.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00788">TailDuplicator.cpp:788</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html">llvm::TailDuplicator</a></div><div class="ttdoc">Utility class to perform tail duplication.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8h_source.html#l00039">TailDuplicator.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a1b957210a6d62c3fe19410e746fc6ab4"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a1b957210a6d62c3fe19410e746fc6ab4">llvm::TailDuplicator::tailDuplicateBlocks</a></div><div class="ttdeci">bool tailDuplicateBlocks()</div><div class="ttdoc">Look for small blocks that are unconditionally branched to and do not fall through.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00270">TailDuplicator.cpp:270</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:44:44 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/GlobalISel/LegalizerHelper.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li><li class="navelem"><a class="el" href="dir_6a229f14c730f076cdd0d3393eea743d.html">GlobalISel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LegalizerHelper.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LegalizerHelper_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- llvm/CodeGen/GlobalISel/LegalizerHelper.cpp -----------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file This file implements the LegalizerHelper class to legalize</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// individual instructions and the LegalizeMachineIR wrapper pass for the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// primary legalization.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegalizerHelper_8h.html">llvm/CodeGen/GlobalISel/LegalizerHelper.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallLowering_8h.html">llvm/CodeGen/GlobalISel/CallLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GISelChangeObserver_8h.html">llvm/CodeGen/GlobalISel/GISelChangeObserver.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GenericMachineInstrs_8h.html">llvm/CodeGen/GlobalISel/GenericMachineInstrs.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegalizerInfo_8h.html">llvm/CodeGen/GlobalISel/LegalizerInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LostDebugLocObserver_8h.html">llvm/CodeGen/GlobalISel/LostDebugLocObserver.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MIPatternMatch_8h.html">llvm/CodeGen/GlobalISel/MIPatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineIRBuilder_8h.html">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2GlobalISel_2Utils_8h.html">llvm/CodeGen/GlobalISel/Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineConstantPool_8h.html">llvm/CodeGen/MachineConstantPool.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetFrameLowering_8h.html">llvm/CodeGen/TargetFrameLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLowering_8h.html">llvm/CodeGen/TargetLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOpcodes_8h.html">llvm/CodeGen/TargetOpcodes.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   40</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;legalizer&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">using namespace </span>LegalizeActions;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">using namespace </span>MIPatternMatch;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/// Try to break down \p OrigTy into \p NarrowTy sized pieces.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/// Returns the number of \p NarrowTy elements needed to reconstruct \p OrigTy,</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// with any leftover piece as type \p LeftoverTy</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// Returns -1 in the first element of the pair if the breakdown is not</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// satisfiable.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::pair&lt;int, int&gt;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a29ab832e2ed35aec5b6f00fbca685e7e">   54</a></span>&#160;<a class="code" href="LegalizerHelper_8cpp.html#a29ab832e2ed35aec5b6f00fbca685e7e">getNarrowTypeBreakDown</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> OrigTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;LeftoverTy) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LeftoverTy.<a class="code" href="classllvm_1_1LLT.html#a69fb30748f1b3e8a0affd486a9f59f6d">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;this is an out argument&quot;</span>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">unsigned</span> Size = OrigTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">unsigned</span> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordtype">unsigned</span> NumParts = Size / NarrowSize;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordtype">unsigned</span> LeftoverSize = Size - NumParts * NarrowSize;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Size &gt; NarrowSize);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (LeftoverSize == 0)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> {NumParts, 0};</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">unsigned</span> EltSize = OrigTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (LeftoverSize % EltSize != 0)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">return</span> {-1, -1};</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    LeftoverTy = <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(LeftoverSize / EltSize), EltSize);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    LeftoverTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(LeftoverSize);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">int</span> NumLeftover = LeftoverSize / LeftoverTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">return</span> std::make_pair(NumParts, NumLeftover);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">   80</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">getFloatTypeForLLT</a>(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>())</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">switch</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#ae550f2e9436b395b614b4377ba27007f">Type::getHalfTy</a>(Ctx);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#ad5e0fe0efdd88f98a5b5eb512d5351c2">Type::getFloatTy</a>(Ctx);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">case</span> 64:</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#acb145f988329d1d621f73abcafea21d8">Type::getDoubleTy</a>(Ctx);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">case</span> 80:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#ace5611e40c0a2dbdc2c6cbc93bea180c">Type::getX86_FP80Ty</a>(Ctx);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">case</span> 128:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#a49f37835a410e050b960dd936a54dd05">Type::getFP128Ty</a>(Ctx);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aa10024dcff51f09d4751794584609e85">  101</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aa10024dcff51f09d4751794584609e85">LegalizerHelper::LegalizerHelper</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                 <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                 <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    : MIRBuilder(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>), Observer(Observer), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>(MF.getRegInfo()),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      LI(*MF.getSubtarget().getLegalizerInfo()),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      TLI(*MF.getSubtarget().getTargetLowering()) { }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#adb7cdaa3d40c87a6ab14ccfde7fa2578">  108</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aa10024dcff51f09d4751794584609e85">LegalizerHelper::LegalizerHelper</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LegalizerInfo.html">LegalizerInfo</a> &amp;LI,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                 <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                 <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  : MIRBuilder(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), Observer(Observer), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>(MF.getRegInfo()), LI(LI),</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    TLI(*MF.getSubtarget().getTargetLowering()) { }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#af8ec769be431aa1296a7c786eb456f53">  115</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#af8ec769be431aa1296a7c786eb456f53">LegalizerHelper::legalizeInstrStep</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                   <a class="code" href="classllvm_1_1LostDebugLocObserver.html">LostDebugLocObserver</a> &amp;LocObserver) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Legalizing: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ab24db762f0912a99f1e4d9e44eaeaa44">setInstrAndDebugLoc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_INTRINSIC ||</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_INTRINSIC_W_SIDE_EFFECTS)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#ae30bcd7968bd73b473060d15644aa60f">legalizeIntrinsic</a>(*<span class="keyword">this</span>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ? <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a> : <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">auto</span> Step = LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#af3687eafb2772c29aa67ce722c2081fd">getAction</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MRI);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">switch</span> (Step.Action) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1IRSimilarity.html#af46430106334db52bfa7a4107e53a0bda8f7357506e00d8cd0694f948f909865d">Legal</a>:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Already legal\n&quot;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca766fa3e68dde7dab82b6f063229a863f">AlreadyLegal</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a>:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Convert to libcall\n&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ad8a495f4190353f60d1cd5e471283f40">libcall</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, LocObserver);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a5449e96e0fbabdf17da10f550e73fef7">NarrowScalar</a>:</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Narrow scalar\n&quot;</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a6701d040466d73f3dc51481d3186c294">narrowScalar</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Step.TypeIdx, Step.NewType);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078af024bf463bed5cbd23fd03a1499b4b48">WidenScalar</a>:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Widen scalar\n&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aacc36b9bbb74a3cdb987aa8f28b269e3">widenScalar</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Step.TypeIdx, Step.NewType);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>:</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Bitcast type\n&quot;</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a6c12dbad109a5d725ce01a9a8363f948">bitcast</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Step.TypeIdx, Step.NewType);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">case</span> Lower:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Lower\n&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aa411af5653e9ed6cd4f664853b61bf0d">lower</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Step.TypeIdx, Step.NewType);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a4f494c23358a431c763a6dc593381c78">FewerElements</a>:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Reduce number of elements\n&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aa8fe481cda91a90b364e410009785003">fewerElementsVector</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Step.TypeIdx, Step.NewType);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a2c6b35e9cd746d28ac9625e5f1694539">MoreElements</a>:</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Increase number of elements\n&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a2ffccbb574e8a2cf63b8ede89f53090b">moreElementsVector</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Step.TypeIdx, Step.NewType);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">case</span> Custom:</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Custom legalization\n&quot;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#a2b63b5903f2c8111495a7047acdf8828">legalizeCustom</a>(*<span class="keyword">this</span>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ? <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a> : <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. Unable to legalize\n&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::extractParts(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty, <span class="keywordtype">int</span> NumParts,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                   <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;VRegs) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    VRegs.push_back(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(Ty));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(VRegs, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keywordtype">bool</span> LegalizerHelper::extractParts(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> RegTy,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                   <a class="code" href="classllvm_1_1LLT.html">LLT</a> MainTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;LeftoverTy,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                   <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;VRegs,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                   <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;LeftoverRegs) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LeftoverTy.<a class="code" href="classllvm_1_1LLT.html#a69fb30748f1b3e8a0affd486a9f59f6d">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;this is an out argument&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> = RegTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">unsigned</span> MainSize = MainTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordtype">unsigned</span> NumParts = <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> / MainSize;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">unsigned</span> LeftoverSize = <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> - NumParts * MainSize;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// Use an unmerge when possible.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (LeftoverSize == 0) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumParts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      VRegs.push_back(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(MainTy));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(VRegs, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// Perform irregular split. Leftover is last element of RegPieces.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span> (MainTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> RegPieces;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    extractVectorParts(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, MainTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>(), RegPieces);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; RegPieces.size() - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      VRegs.push_back(RegPieces[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    LeftoverRegs.push_back(RegPieces[RegPieces.size() - 1]);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    LeftoverTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(LeftoverRegs[0]);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  LeftoverTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(LeftoverSize);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// For irregular sizes, extract the individual parts.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumParts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(MainTy);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    VRegs.push_back(NewReg);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">buildExtract</a>(NewReg, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, MainSize * <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = MainSize * NumParts; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt; <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;       <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += LeftoverSize) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(LeftoverTy);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    LeftoverRegs.push_back(NewReg);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">buildExtract</a>(NewReg, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::extractVectorParts(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">unsigned</span> NumElts,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;VRegs) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> RegTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RegTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected a vector type&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = RegTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy = (NumElts == 1) ? EltTy : <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumElts, EltTy);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">unsigned</span> RegNumElts = RegTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordtype">unsigned</span> LeftoverNumElts = RegNumElts % NumElts;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordtype">unsigned</span> NumNarrowTyPieces = RegNumElts / NumElts;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// Perfect split without leftover</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (LeftoverNumElts == 0)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> extractParts(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, NarrowTy, NumNarrowTyPieces, VRegs);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// Irregular split. Provide direct access to all elements for artifact</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// combiner using unmerge to elements. Then build vectors with NumElts</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// elements. Remaining element(s) will be (used to build vector) Leftover.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Elts;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  extractParts(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, EltTy, RegNumElts, Elts);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// Requested sub-vectors of NarrowTy.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumNarrowTyPieces; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += NumElts) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Pieces(&amp;Elts[<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>], NumElts);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    VRegs.push_back(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(NarrowTy, Pieces).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Leftover element(s).</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (LeftoverNumElts == 1) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    VRegs.push_back(Elts[<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>]);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(LeftoverNumElts, EltTy);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Pieces(&amp;Elts[<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>], LeftoverNumElts);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    VRegs.push_back(</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(LeftoverTy, Pieces).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::insertParts(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ResultTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> PartTy,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> PartRegs,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> LeftoverRegs) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (!LeftoverTy.<a class="code" href="classllvm_1_1LLT.html#a69fb30748f1b3e8a0affd486a9f59f6d">isValid</a>()) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LeftoverRegs.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>());</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (!ResultTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, PartRegs);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (PartTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">buildConcatVectors</a>(DstReg, PartRegs);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(DstReg, PartRegs);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// Merge sub-vectors with different number of elements and insert into DstReg.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">if</span> (ResultTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LeftoverRegs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;Expected one leftover register&quot;</span>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> AllRegs;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : concat&lt;const Register&gt;(PartRegs, LeftoverRegs))</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      AllRegs.push_back(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> mergeMixedSubvectors(DstReg, AllRegs);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> GCDRegs;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = <a class="code" href="namespacellvm.html#adb74ac5c2f2a45c7247a785f898d4833">getGCDType</a>(<a class="code" href="namespacellvm.html#adb74ac5c2f2a45c7247a785f898d4833">getGCDType</a>(ResultTy, LeftoverTy), PartTy);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> PartReg : concat&lt;const Register&gt;(PartRegs, LeftoverRegs))</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    extractGCDType(GCDRegs, GCDTy, PartReg);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ResultLCMTy = buildLCMMergePieces(ResultTy, LeftoverTy, GCDTy, GCDRegs);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  buildWidenedRemergeToDst(DstReg, ResultLCMTy, GCDRegs);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::appendVectorElts(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;Elts,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                       <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> RegElts;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  extractParts(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>(), Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>(), RegElts);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  Elts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(RegElts);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">/// Merge \p PartRegs with different types into \p DstReg.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LegalizerHelper::mergeMixedSubvectors(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> PartRegs) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> AllElts;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; PartRegs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    appendVectorElts(AllElts, PartRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Leftover = PartRegs[PartRegs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() - 1];</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Leftover).<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>())</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    AllElts.push_back(Leftover);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    appendVectorElts(AllElts, Leftover);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, AllElts);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">/// Append the result registers of G_UNMERGE_VALUES \p MI to \p Regs.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#acbd00405fe4d2eca789c1225e75bc53f">  315</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LegalizerHelper_8cpp.html#acbd00405fe4d2eca789c1225e75bc53f">getUnmergeResults</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;Regs,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_UNMERGE_VALUES);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> StartIdx = Regs.size();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumResults = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  Regs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(Regs.size() + NumResults);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumResults; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    Regs[StartIdx + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getReg();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::extractGCDType(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;Parts,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                     <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy, <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (SrcTy == GCDTy) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// If the source already evenly divides the result type, we don&#39;t need to do</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// anything.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    Parts.push_back(SrcReg);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// Need to split into common type sized pieces.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(GCDTy, SrcReg);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#acbd00405fe4d2eca789c1225e75bc53f">getUnmergeResults</a>(Parts, *Unmerge);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<a class="code" href="classllvm_1_1LLT.html">LLT</a> LegalizerHelper::extractGCDType(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;Parts, <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                    <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy, <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = <a class="code" href="namespacellvm.html#adb74ac5c2f2a45c7247a785f898d4833">getGCDType</a>(<a class="code" href="namespacellvm.html#adb74ac5c2f2a45c7247a785f898d4833">getGCDType</a>(SrcTy, NarrowTy), DstTy);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  extractGCDType(Parts, GCDTy, SrcReg);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">return</span> GCDTy;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<a class="code" href="classllvm_1_1LLT.html">LLT</a> LegalizerHelper::buildLCMMergePieces(<a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;VRegs,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                         <span class="keywordtype">unsigned</span> PadStrategy) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LCMTy = <a class="code" href="namespacellvm.html#a55a2f0d67720407fe032276991d5111b">getLCMType</a>(DstTy, NarrowTy);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">int</span> NumParts = LCMTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordtype">int</span> NumSubParts = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / GCDTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">int</span> NumOrigSrc = VRegs.size();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PadReg;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// Get a value we can use to pad the source value if the sources won&#39;t evenly</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// cover the result type.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (NumOrigSrc &lt; NumParts * NumSubParts) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (PadStrategy == TargetOpcode::G_ZEXT)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      PadReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(GCDTy, 0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PadStrategy == TargetOpcode::G_ANYEXT)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      PadReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(GCDTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PadStrategy == TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="comment">// Shift the sign bit of the low register through the high register.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keyword">auto</span> ShiftAmt =</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), GCDTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - 1);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      PadReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(GCDTy, VRegs.back(), ShiftAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// Registers for the final merge to be produced.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Remerge(NumParts);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Registers needed for intermediate merges, which will be merged into a</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// source for Remerge.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> SubMerge(NumSubParts);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// Once we&#39;ve fully read off the end of the original source bits, we can reuse</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// the same high bits for remaining padding elements.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AllPadReg;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Build merges to the LCM type to cover the original result type.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumParts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">bool</span> AllMergePartsArePadding = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Build the requested merges to the requested type.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0; J != NumSubParts; ++J) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordtype">int</span> Idx = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> * NumSubParts + J;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (Idx &gt;= NumOrigSrc) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        SubMerge[J] = PadReg;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      SubMerge[J] = VRegs[Idx];</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">// There are meaningful bits here we can&#39;t reuse later.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      AllMergePartsArePadding = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// If we&#39;ve filled up a complete piece with padding bits, we can directly</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// emit the natural sized constant if applicable, rather than a merge of</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// smaller constants.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (AllMergePartsArePadding &amp;&amp; !AllPadReg) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (PadStrategy == TargetOpcode::G_ANYEXT)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        AllPadReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(NarrowTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PadStrategy == TargetOpcode::G_ZEXT)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        AllPadReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NarrowTy, 0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">// If this is a sign extension, we can&#39;t materialize a trivial constant</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">// with the right type and have to produce a merge.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (AllPadReg) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// Avoid creating additional instructions if we&#39;re just adding additional</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">// copies of padding bits.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      Remerge[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = AllPadReg;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (NumSubParts == 1)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      Remerge[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = SubMerge[0];</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      Remerge[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(NarrowTy, SubMerge).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// In the sign extend padding case, re-use the first all-signbit merge.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (AllMergePartsArePadding &amp;&amp; !AllPadReg)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      AllPadReg = Remerge[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  VRegs = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Remerge);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">return</span> LCMTy;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::buildWidenedRemergeToDst(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg, <a class="code" href="classllvm_1_1LLT.html">LLT</a> LCMTy,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                               <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> RemergeRegs) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// Create the merge to the widened source, and extract the relevant bits into</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// the result.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">if</span> (DstTy == LCMTy) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, RemergeRegs);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keyword">auto</span> Remerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(LCMTy, RemergeRegs);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; LCMTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, Remerge);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">if</span> (LCMTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">unsigned</span> NumDefs = LCMTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> UnmergeDefs(NumDefs);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    UnmergeDefs[0] = DstReg;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumDefs; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      UnmergeDefs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(DstTy);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(UnmergeDefs,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                            <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(LCMTy, RemergeRegs));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unhandled case&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a316be66b059419e22aefc98fd49e1081">  472</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> <a class="code" href="LegalizerHelper_8cpp.html#a316be66b059419e22aefc98fd49e1081">getRTLibDesc</a>(<span class="keywordtype">unsigned</span> Opcode, <span class="keywordtype">unsigned</span> Size) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor">#define RTLIBCASE_INT(LibcallPrefix)                                           \</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">  do {                                                                         \</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">    switch (Size) {                                                            \</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">    case 32:                                                                   \</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##32;                                         \</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">    case 64:                                                                   \</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##64;                                         \</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">    case 128:                                                                  \</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##128;                                        \</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">    default:                                                                   \</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">      llvm_unreachable(&quot;unexpected size&quot;);                                     \</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">    }                                                                          \</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">  } while (0)</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">#define RTLIBCASE(LibcallPrefix)                                               \</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">  do {                                                                         \</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="preprocessor">    switch (Size) {                                                            \</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">    case 32:                                                                   \</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##32;                                         \</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">    case 64:                                                                   \</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##64;                                         \</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">    case 80:                                                                   \</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##80;                                         \</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">    case 128:                                                                  \</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">      return RTLIB::LibcallPrefix##128;                                        \</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="preprocessor">    default:                                                                   \</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">      llvm_unreachable(&quot;unexpected size&quot;);                                     \</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor">    }                                                                          \</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">  } while (0)</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MUL:</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a>(MUL_I);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SDIV:</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a>(SDIV_I);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UDIV:</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a>(UDIV_I);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SREM:</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a>(SREM_I);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UREM:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a>(UREM_I);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF:</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a>(CTLZ_I);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FADD:</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(ADD_F);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSUB:</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(SUB_F);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMUL:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(MUL_F);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FDIV:</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(DIV_F);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(EXP_F);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP2:</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(EXP2_F);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREM:</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(REM_F);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPOW:</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(POW_F);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMA:</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(FMA_F);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSIN:</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(SIN_F);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCOS:</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(COS_F);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG10:</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(LOG10_F);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG:</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(LOG_F);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG2:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(LOG2_F);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCEIL:</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(CEIL_F);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FFLOOR:</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(FLOOR_F);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM:</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(FMIN_F);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(FMAX_F);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSQRT:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(SQRT_F);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FRINT:</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(RINT_F);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FNEARBYINT:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(NEARBYINT_F);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_ROUNDEVEN:</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a>(ROUNDEVEN_F);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown libcall function&quot;</span>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">/// True if an instruction is in tail position in its caller. Intended for</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">/// legalizing libcalls as tail calls when possible.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a0749d11a96068f2352e83d954c1849e7">  566</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LegalizerHelper_8cpp.html#a0749d11a96068f2352e83d954c1849e7">isLibCallInTailPosition</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// Conservatively require the attributes of the call to match those of</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// the return. Ignore NoAlias and NonNull because they don&#39;t affect the</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// call sequence.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> CallerAttrs = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getAttributes();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext(), CallerAttrs.<a class="code" href="classllvm_1_1AttributeList.html#a5604157867b3d226260f6388b987e49a">getRetAttrs</a>())</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;          .<a class="code" href="classllvm_1_1AttrBuilder.html#aa63e528eeff5082f6920b10244143920">removeAttribute</a>(Attribute::NoAlias)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;          .<a class="code" href="classllvm_1_1AttrBuilder.html#aa63e528eeff5082f6920b10244143920">removeAttribute</a>(Attribute::NonNull)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          .<a class="code" href="classllvm_1_1AttrBuilder.html#a4cf3cb56358d18065c78992569c32d2f">hasAttributes</a>())</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// It&#39;s not safe to eliminate the sign / zero extension of the return value.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">if</span> (CallerAttrs.<a class="code" href="classllvm_1_1AttributeList.html#afe4e348d7ff2f6b76dcaa69382b78980">hasRetAttr</a>(Attribute::ZExt) ||</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      CallerAttrs.<a class="code" href="classllvm_1_1AttributeList.html#afe4e348d7ff2f6b76dcaa69382b78980">hasRetAttr</a>(Attribute::SExt))</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// Only tail call if the following instruction is a standard return or if we</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// have a `thisreturn` callee, and a sequence like:</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">//   G_MEMCPY %0, %1, %2</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">//   $x0 = COPY %0</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">//   RET_ReallyLR implicit $x0</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keyword">auto</span> Next = <a class="code" href="namespacellvm.html#a0270bdca4aeb43f39bf91c900a398057">next_nodbg</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getIterator(), <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>());</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (Next != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>() &amp;&amp; Next-&gt;isCopy()) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unsupported opcode&quot;</span>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">case</span> TargetOpcode::G_BZERO:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">case</span> TargetOpcode::G_MEMCPY:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">case</span> TargetOpcode::G_MEMMOVE:</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">case</span> TargetOpcode::G_MEMSET:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> VReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (!VReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>() || VReg != Next-&gt;getOperand(1).getReg())</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> PReg = Next-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> (!PReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>())</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <a class="code" href="namespacellvm.html#a0270bdca4aeb43f39bf91c900a398057">next_nodbg</a>(Next, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>());</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>() || !<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>-&gt;isReturn())</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>-&gt;getNumImplicitOperands() != 1)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> (PReg != <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>-&gt;getOperand(0).getReg())</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="comment">// Skip over the COPY that we just validated.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    Next = <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">if</span> (Next == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>() || <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.<a class="code" href="classllvm_1_1HexagonInstrInfo.html#aa4e19e02d7a1b67cdeb7359198d6c9f7">isTailCall</a>(*Next) || !Next-&gt;isReturn())</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">  635</a></span>&#160;<a class="code" href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">llvm::createLibcall</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder, <span class="keyword">const</span> <span class="keywordtype">char</span> *Name,</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structllvm_1_1CallLowering_1_1ArgInfo.html">CallLowering::ArgInfo</a> &amp;Result,</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CallLowering::ArgInfo&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">CallingConv::ID</a> <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keyword">auto</span> &amp;CLI = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a2c539935ed4a45a8ad3afb386e98d276">getCallLowering</a>();</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="structllvm_1_1CallLowering_1_1CallLoweringInfo.html">CallLowering::CallLoweringInfo</a> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.CallConv = <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Callee = <a class="code" href="classllvm_1_1MachineOperand.html#a2871c33d3a1264270d23ec72b71f1399">MachineOperand::CreateES</a>(Name);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OrigRet = Result;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">std::copy</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.begin(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.end(), std::back_inserter(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OrigArgs));</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">if</span> (!CLI.lowerCall(MIRBuilder, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>))</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">LegalizerHelper::UnableToLegalize</a>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="namespacellvm.html#ae3ba391549b5b30785fb6d548f82d532">  653</a></span>&#160;<a class="code" href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">llvm::createLibcall</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder, <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a>,</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structllvm_1_1CallLowering_1_1ArgInfo.html">CallLowering::ArgInfo</a> &amp;Result,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CallLowering::ArgInfo&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keyword">auto</span> &amp;TLI = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a129ede6f18326075504d4bd0439fd517">getTargetLowering</a>();</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *Name = TLI.getLibcallName(<a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a>);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">CallingConv::ID</a> <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> = TLI.getLibcallCallingConv(<a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">createLibcall</a>(MIRBuilder, Name, Result, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">// Useful for libcalls where all operands have the same type.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a302df2102c76ad401ee88433c05fc31a">  664</a></span>&#160;<a class="code" href="LegalizerHelper_8cpp.html#a302df2102c76ad401ee88433c05fc31a">simpleLibcall</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder, <span class="keywordtype">unsigned</span> Size,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *OpType) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a> = <a class="code" href="LegalizerHelper_8cpp.html#a316be66b059419e22aefc98fd49e1081">getRTLibDesc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), Size);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// FIXME: What does the original arg index mean here?</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallLowering::ArgInfo, 3&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()))</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.push_back({MO.getReg(), OpType, 0});</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">createLibcall</a>(MIRBuilder, <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a>,</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                       {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(), OpType, 0}, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="namespacellvm.html#a524d3d59c93afc0f68256056ba5bfa0b">  677</a></span>&#160;<a class="code" href="namespacellvm.html#a524d3d59c93afc0f68256056ba5bfa0b">llvm::createMemLibcall</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                       <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LostDebugLocObserver.html">LostDebugLocObserver</a> &amp;LocObserver) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallLowering::ArgInfo, 3&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// Add all the args, except for the last which is an imm denoting &#39;tail&#39;.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// Need derive an IR type for call lowering.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> OpLLT = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OpTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span> (OpLLT.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      OpTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Ctx, OpLLT.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>());</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      OpTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(Ctx, OpLLT.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.push_back({<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, OpTy, 0});</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keyword">auto</span> &amp;CLI = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a2c539935ed4a45a8ad3afb386e98d276">getCallLowering</a>();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keyword">auto</span> &amp;TLI = *MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a129ede6f18326075504d4bd0439fd517">getTargetLowering</a>();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> RTLibcall;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BZERO:</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    RTLibcall = RTLIB::BZERO;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMCPY:</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    RTLibcall = <a class="code" href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38aec586817cf51a463ca101fab0ce085da">RTLIB::MEMCPY</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[0].Flags[0].setReturned();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMMOVE:</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    RTLibcall = RTLIB::MEMMOVE;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[0].Flags[0].setReturned();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMSET:</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    RTLibcall = RTLIB::MEMSET;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[0].Flags[0].setReturned();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unsupported opcode&quot;</span>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *Name = TLI.getLibcallName(RTLibcall);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// Unsupported libcall on the target.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (!Name) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.. .. Could not find libcall name for &quot;</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                      &lt;&lt; MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>().<a class="code" href="classllvm_1_1MCInstrInfo.html#abdbb44946a6951b5d90dd5313023156f">getName</a>(Opc) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">LegalizerHelper::UnableToLegalize</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="structllvm_1_1CallLowering_1_1CallLoweringInfo.html">CallLowering::CallLoweringInfo</a> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.CallConv = TLI.getLibcallCallingConv(RTLibcall);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Callee = <a class="code" href="classllvm_1_1MachineOperand.html#a2871c33d3a1264270d23ec72b71f1399">MachineOperand::CreateES</a>(Name);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OrigRet = <a class="code" href="structllvm_1_1CallLowering_1_1ArgInfo.html">CallLowering::ArgInfo</a>({0}, <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(Ctx), 0);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.IsTailCall = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1).getImm() &amp;&amp;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    <a class="code" href="LegalizerHelper_8cpp.html#a0749d11a96068f2352e83d954c1849e7">isLibCallInTailPosition</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>(), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">std::copy</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.begin(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.end(), std::back_inserter(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OrigArgs));</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">if</span> (!CLI.lowerCall(MIRBuilder, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>))</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">LegalizerHelper::UnableToLegalize</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.LoweredTailCall) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.IsTailCall &amp;&amp; <span class="stringliteral">&quot;Lowered tail call when it wasn&#39;t a tail call?&quot;</span>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// Check debug locations before removing the return.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    LocObserver.<a class="code" href="classllvm_1_1LostDebugLocObserver.html#a91c878e342c004f480a55e8dc3f6fa67">checkpoint</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// We must have a return following the call (or debug insts) to get past</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// isLibCallInTailPosition.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Next = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNextNode();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Next &amp;&amp;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;             (Next-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1912d4fbc40c61a12b1f770ad54dfd74">isCopy</a>() || Next-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a04af1d639a21e7ef4357facd283b42c4">isReturn</a>() || Next-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a42020afbcac5113c831c00294a0ac37f">isDebugInstr</a>()) &amp;&amp;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;             <span class="stringliteral">&quot;Expected instr following MI to be return or debug inst?&quot;</span>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="comment">// We lowered a tail call, so the call is now the return from the block.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="comment">// Delete the old return.</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      Next-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNextNode());</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">// We expect to lose the debug location from the return.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    LocObserver.<a class="code" href="classllvm_1_1LostDebugLocObserver.html#a91c878e342c004f480a55e8dc3f6fa67">checkpoint</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#ab6fa4a61feadaf493e383ab28709d486">  764</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> <a class="code" href="LegalizerHelper_8cpp.html#ab6fa4a61feadaf493e383ab28709d486">getConvRTLibDesc</a>(<span class="keywordtype">unsigned</span> Opcode, <a class="code" href="classllvm_1_1Type.html">Type</a> *ToType,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                       <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14">FromType</a>) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keyword">auto</span> ToMVT = <a class="code" href="classllvm_1_1MVT.html#a56bb53e2d0b01c78c8c538f903fd45b8">MVT::getVT</a>(ToType);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keyword">auto</span> FromMVT = <a class="code" href="classllvm_1_1MVT.html#a56bb53e2d0b01c78c8c538f903fd45b8">MVT::getVT</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14">FromType</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPEXT:</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RTLIB.html#ab82ac391f77e4b35af455c9c1f9d7fba">RTLIB::getFPEXT</a>(FromMVT, ToMVT);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTRUNC:</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RTLIB.html#aba26b1883eac90bc8f0c2b51a5377545">RTLIB::getFPROUND</a>(FromMVT, ToMVT);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOSI:</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RTLIB.html#aa70a6cd6c880ca47e604870efe33eba4">RTLIB::getFPTOSINT</a>(FromMVT, ToMVT);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOUI:</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a80e747e8b302cf5ad8e1d5ecade1937c">RTLIB::getFPTOUINT</a>(FromMVT, ToMVT);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SITOFP:</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a11ba84d43a1ba5d6c1e1c645d34a0dd9">RTLIB::getSINTTOFP</a>(FromMVT, ToMVT);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UITOFP:</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RTLIB.html#a3c139798e0933ade84b12ac860b593de">RTLIB::getUINTTOFP</a>(FromMVT, ToMVT);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported libcall function&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;}</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a9cafdd2a39d4c80b227afb0219b46815">  787</a></span>&#160;<a class="code" href="LegalizerHelper_8cpp.html#a9cafdd2a39d4c80b227afb0219b46815">conversionLibcall</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIRBuilder, <a class="code" href="classllvm_1_1Type.html">Type</a> *ToType,</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14">FromType</a>) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a> = <a class="code" href="LegalizerHelper_8cpp.html#ab6fa4a61feadaf493e383ab28709d486">getConvRTLibDesc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), ToType, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14">FromType</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">createLibcall</a>(MIRBuilder, <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a>,</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                       {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(), ToType, 0},</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                       {{<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(), <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14">FromType</a>, 0}});</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l00796"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ad8a495f4190353f60d1cd5e471283f40">  796</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ad8a495f4190353f60d1cd5e471283f40">LegalizerHelper::libcall</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LostDebugLocObserver.html">LostDebugLocObserver</a> &amp;LocObserver) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LLTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordtype">unsigned</span> Size = LLTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MUL:</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SDIV:</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UDIV:</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SREM:</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UREM:</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF: {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *HLTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(Ctx, Size);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = <a class="code" href="LegalizerHelper_8cpp.html#a302df2102c76ad401ee88433c05fc31a">simpleLibcall</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Size, HLTy);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structStatus.html">Status</a> != <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FADD:</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSUB:</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMUL:</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FDIV:</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMA:</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPOW:</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREM:</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCOS:</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSIN:</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG10:</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG:</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG2:</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP:</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP2:</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCEIL:</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FFLOOR:</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM:</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM:</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSQRT:</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FRINT:</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FNEARBYINT:</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_ROUNDEVEN: {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *HLTy = <a class="code" href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">getFloatTypeForLLT</a>(Ctx, LLTy);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (!HLTy || (Size != 32 &amp;&amp; Size != 64 &amp;&amp; Size != 80 &amp;&amp; Size != 128)) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;No libcall available for type &quot;</span> &lt;&lt; LLTy &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = <a class="code" href="LegalizerHelper_8cpp.html#a302df2102c76ad401ee88433c05fc31a">simpleLibcall</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Size, HLTy);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structStatus.html">Status</a> != <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>)</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPEXT:</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTRUNC: {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *FromTy = <a class="code" href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">getFloatTypeForLLT</a>(Ctx,  MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()));</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ToTy = <a class="code" href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">getFloatTypeForLLT</a>(Ctx, MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg()));</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (!FromTy || !ToTy)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizeResult</a> <a class="code" href="structStatus.html">Status</a> = <a class="code" href="LegalizerHelper_8cpp.html#a9cafdd2a39d4c80b227afb0219b46815">conversionLibcall</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, ToTy, FromTy );</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structStatus.html">Status</a> != <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>)</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOSI:</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOUI: {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="comment">// FIXME: Support other types</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordtype">unsigned</span> FromSize = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordtype">unsigned</span> ToSize = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">if</span> ((ToSize != 32 &amp;&amp; ToSize != 64) || (FromSize != 32 &amp;&amp; FromSize != 64))</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizeResult</a> <a class="code" href="structStatus.html">Status</a> = <a class="code" href="LegalizerHelper_8cpp.html#a9cafdd2a39d4c80b227afb0219b46815">conversionLibcall</a>(</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        ToSize == 32 ? <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx) : <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Ctx),</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        FromSize == 64 ? <a class="code" href="classllvm_1_1Type.html#acb145f988329d1d621f73abcafea21d8">Type::getDoubleTy</a>(Ctx) : <a class="code" href="classllvm_1_1Type.html#ad5e0fe0efdd88f98a5b5eb512d5351c2">Type::getFloatTy</a>(Ctx));</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structStatus.html">Status</a> != <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>)</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SITOFP:</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UITOFP: {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="comment">// FIXME: Support other types</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordtype">unsigned</span> FromSize = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordtype">unsigned</span> ToSize = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">if</span> ((FromSize != 32 &amp;&amp; FromSize != 64) || (ToSize != 32 &amp;&amp; ToSize != 64))</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizeResult</a> <a class="code" href="structStatus.html">Status</a> = <a class="code" href="LegalizerHelper_8cpp.html#a9cafdd2a39d4c80b227afb0219b46815">conversionLibcall</a>(</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>,</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        ToSize == 64 ? <a class="code" href="classllvm_1_1Type.html#acb145f988329d1d621f73abcafea21d8">Type::getDoubleTy</a>(Ctx) : <a class="code" href="classllvm_1_1Type.html#ad5e0fe0efdd88f98a5b5eb512d5351c2">Type::getFloatTy</a>(Ctx),</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        FromSize == 32 ? <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx) : <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Ctx));</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structStatus.html">Status</a> != <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BZERO:</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMCPY:</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMMOVE:</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MEMSET: {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizeResult</a> Result =</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <a class="code" href="namespacellvm.html#a524d3d59c93afc0f68256056ba5bfa0b">createMemLibcall</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, *<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, LocObserver);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (Result != <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a6701d040466d73f3dc51481d3186c294">  906</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a6701d040466d73f3dc51481d3186c294">LegalizerHelper::narrowScalar</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                                                              <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                                              <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SizeOp0 = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_IMPLICIT_DEF: {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// If SizeOp0 is not an exact multiple of NarrowSize, emit</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// G_ANYEXT(G_IMPLICIT_DEF). Cast result to vector if needed.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// FIXME: Although this would also be legal for the general case, it causes</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">//  a lot of regressions in the emitted code (superfluous COPYs, artifact</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">//  combines not being hit). This seems to be a problem related to the</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="comment">//  artifact combiner.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> (SizeOp0 % NarrowSize != 0) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> ImplicitTy = NarrowTy;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        ImplicitTy = <a class="code" href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>(), ImplicitTy);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> ImplicitReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(ImplicitTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(DstReg, ImplicitReg);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordtype">int</span> NumParts = SizeOp0 / NarrowSize;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> DstRegs;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      DstRegs.push_back(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(NarrowTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CONSTANT: {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Val = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getCImm()-&gt;getValue();</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordtype">unsigned</span> TotalSize = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordtype">unsigned</span> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordtype">int</span> NumParts = TotalSize / NarrowSize;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> PartRegs;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumParts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> * NarrowSize;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keyword">auto</span> K = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NarrowTy,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                        Val.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).<a class="code" href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(NarrowSize));</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      PartRegs.push_back(K.getReg(0));</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordtype">unsigned</span> LeftoverBits = TotalSize - NumParts * NarrowSize;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 1&gt;</a> LeftoverRegs;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">if</span> (LeftoverBits != 0) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      LeftoverTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(LeftoverBits);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keyword">auto</span> K = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        LeftoverTy,</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        Val.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(NumParts * NarrowSize).<a class="code" href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(LeftoverBits));</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      LeftoverRegs.push_back(K.getReg(0));</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    insertParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(),</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                Ty, NarrowTy, PartRegs, LeftoverTy, LeftoverRegs);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXT:</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ZEXT:</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ANYEXT:</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ab483400178810f8c04f3ee4ebe5db4c9">narrowScalarExt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_TRUNC: {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SizeOp1 = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() * 2 != SizeOp1) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t narrow trunc to type &quot;</span> &lt;&lt; NarrowTy &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(NarrowTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), Unmerge.getReg(0));</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREEZE: {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="comment">// Should widen scalar first</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 0)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(NarrowTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Parts;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Unmerge-&gt;getNumDefs(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      Parts.push_back(</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a08361fe1409d7e2a9b96b0cabb918383">buildFreeze</a>(NarrowTy, Unmerge.getReg(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), Parts);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ADD:</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SUB:</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDO:</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBO:</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDE:</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBE:</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDO:</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBO:</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDE:</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBE:</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aea9d2b3b2a626fb7c5093f5f8fa9cf95">narrowScalarAddSub</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MUL:</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMULH:</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a0c0426a2303d102874f24e00608e3de4">narrowScalarMul</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT:</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aaec7c9b0ed49d3297c833d8d9def42c0">narrowScalarExtract</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT:</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ad43f277d8baa4b080bfd1beed8542bd6">narrowScalarInsert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD: {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keyword">auto</span> &amp;LoadMI = cast&lt;GLoad&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = LoadMI.getDstReg();</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span> (8 * LoadMI.getMemSize() != DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> TmpReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(TmpReg, LoadMI.getPointerReg(), LoadMI.getMMO());</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(DstReg, TmpReg);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      LoadMI.eraseFromParent();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">reduceLoadStoreWidth</a>(LoadMI, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ZEXTLOAD:</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXTLOAD: {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keyword">auto</span> &amp;LoadMI = cast&lt;GExtLoad&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = LoadMI.getDstReg();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> PtrReg = LoadMI.getPointerReg();</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> TmpReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keyword">auto</span> &amp;MMO = LoadMI.getMMO();</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordtype">unsigned</span> MemSize = MMO.getSizeInBits();</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (MemSize == NarrowSize) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(TmpReg, PtrReg, MMO);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MemSize &lt; NarrowSize) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aeede510b1aaac978daaba60dcc2817de">buildLoadInstr</a>(LoadMI.getOpcode(), TmpReg, PtrReg, MMO);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MemSize &gt; NarrowSize) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="comment">// FIXME: Need to split the load.</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span> (isa&lt;GZExtLoad&gt;(LoadMI))</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(DstReg, TmpReg);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a42427e969917da5da61fadd006fed326">buildSExt</a>(DstReg, TmpReg);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    LoadMI.eraseFromParent();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STORE: {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keyword">auto</span> &amp;StoreMI = cast&lt;GStore&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = StoreMI.getValueReg();</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordtype">int</span> NumParts = SizeOp0 / NarrowSize;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordtype">unsigned</span> HandledSize = NumParts * NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordtype">unsigned</span> LeftoverBits = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - HandledSize;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; LeftoverBits != 0)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (8 * StoreMI.getMemSize() != SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> TmpReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(TmpReg, SrcReg);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(TmpReg, StoreMI.getPointerReg(), StoreMI.getMMO());</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      StoreMI.eraseFromParent();</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">reduceLoadStoreWidth</a>(StoreMI, 0, NarrowTy);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SELECT:</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6f143ae3ebc33b4f3f97e486bf7112">narrowScalarSelect</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_AND:</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_OR:</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_XOR: {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// Legalize bitwise operation:</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">// A = BinOp&lt;Ty&gt; B, C</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">// into:</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// B1, ..., BN = G_UNMERGE_VALUES B</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// C1, ..., CN = G_UNMERGE_VALUES C</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="comment">// A1 = BinOp&lt;Ty/N&gt; B1, C2</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">// ...</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">// AN = BinOp&lt;Ty/N&gt; BN, CN</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">// A = G_MERGE_VALUES A1, ..., AN</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8a4aeb9640ed05629f69b925f53ae366">narrowScalarBasic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SHL:</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LSHR:</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ASHR:</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a2f99d62852a3fab708983d8ea2139755">narrowScalarShift</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ:</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF:</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ:</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ_ZERO_UNDEF:</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTPOP:</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 1)</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">case</span> TargetOpcode::G_CTLZ:</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF:</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae25927a69e107ef1477822b884ca034b">narrowScalarCTLZ</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordflow">case</span> TargetOpcode::G_CTTZ:</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordflow">case</span> TargetOpcode::G_CTTZ_ZERO_UNDEF:</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a2db1bc1a16d89298b92a13857146e28d">narrowScalarCTTZ</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <span class="keywordflow">case</span> TargetOpcode::G_CTPOP:</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a048378560a1f3ddd48ddf9c60ae488f5">narrowScalarCTPOP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4">narrowScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, 0, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTTOPTR:</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a">narrowScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, 1);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PTRTOINT:</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4">narrowScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, 0, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PHI: {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="comment">// FIXME: add support for when SizeOp0 isn&#39;t an exact multiple of</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">// NarrowSize.</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span> (SizeOp0 % NarrowSize != 0)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordtype">unsigned</span> NumParts = SizeOp0 / NarrowSize;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> DstRegs(NumParts);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;Register, 2&gt;</a>, 2&gt; SrcRegs(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() / 2);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;OpMBB = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1).getMBB();</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(OpMBB, OpMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0fab3e644b3457f90ed7f64876a037d2">getFirstTerminatorForward</a>());</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg(), NarrowTy, NumParts,</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                   SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> / 2]);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      DstRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB =</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::G_PHI).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(DstRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> += 2)</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> / 2][<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> + 1));</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">getFirstNonPHI</a>());</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), DstRegs);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT_VECTOR_ELT:</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT_VECTOR_ELT: {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 2)</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordtype">int</span> OpIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_EXTRACT_VECTOR_ELT ? 2 : 3;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a">narrowScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, OpIdx);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ICMP: {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SrcSize = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred =</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a><span class="keyword">&gt;</span>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getPredicate());</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// TODO: Handle the non-equality case for weird sizes.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span> (NarrowSize * 2 != SrcSize &amp;&amp; !<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred))</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy; <span class="comment">// Example: s88 -&gt; s64 (NarrowTy) + s24 (leftover)</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> LHSPartRegs, LHSLeftoverRegs;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (!extractParts(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, SrcTy, NarrowTy, LeftoverTy, LHSPartRegs,</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                      LHSLeftoverRegs))</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Unused; <span class="comment">// Matches LeftoverTy; G_ICMP LHS and RHS are the same type.</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> RHSPartRegs, RHSLeftoverRegs;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (!extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg(), SrcTy, NarrowTy, Unused,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                      RHSPartRegs, RHSLeftoverRegs))</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="comment">// We now have the LHS and RHS of the compare split into narrow-type</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="comment">// registers, plus potentially some leftover type.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> ResTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred)) {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="comment">// For each part on the LHS and RHS, keep track of the result of XOR-ing</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="comment">// them together. For each equal part, the result should be all 0s. For</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="comment">// each non-equal part, we&#39;ll get at least one 1.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NarrowTy, 0);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Xors;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> LHSAndRHS : <a class="code" href="namespacellvm.html#a2edb650de7b28add81349f5abf7ed7aa">zip</a>(LHSPartRegs, RHSPartRegs)) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = std::get&lt;0&gt;(LHSAndRHS);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = std::get&lt;1&gt;(LHSAndRHS);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(NarrowTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        Xors.push_back(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <span class="comment">// Build a G_XOR for each leftover register. Each G_XOR must be widened</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="comment">// to the desired narrow type so that we can OR them together later.</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> WidenedXors;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> LHSAndRHS : <a class="code" href="namespacellvm.html#a2edb650de7b28add81349f5abf7ed7aa">zip</a>(LHSLeftoverRegs, RHSLeftoverRegs)) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = std::get&lt;0&gt;(LHSAndRHS);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = std::get&lt;1&gt;(LHSAndRHS);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(LeftoverTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = extractGCDType(WidenedXors, NarrowTy, LeftoverTy, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        buildLCMMergePieces(LeftoverTy, NarrowTy, GCDTy, WidenedXors,</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                            <span class="comment">/* PadStrategy = */</span> TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        Xors.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">insert</a>(Xors.end(), WidenedXors.begin(), WidenedXors.end());</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="comment">// Now, for each part we broke up, we know if they are equal/not equal</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="comment">// based off the G_XOR. We can OR these all together and compare against</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="comment">// 0 to get the result.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Xors.size() &gt;= 2 &amp;&amp; <span class="stringliteral">&quot;Should have gotten at least two Xors?&quot;</span>);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NarrowTy, Xors[0], Xors[1]);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 2, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Xors.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NarrowTy, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, Xors[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(Pred, Dst, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, Zero);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="comment">// TODO: Handle non-power-of-two types.</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LHSPartRegs.size() == 2 &amp;&amp; <span class="stringliteral">&quot;Expected exactly 2 LHS part regs?&quot;</span>);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RHSPartRegs.size() == 2 &amp;&amp; <span class="stringliteral">&quot;Expected exactly 2 RHS part regs?&quot;</span>);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> LHSL = LHSPartRegs[0];</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> LHSH = LHSPartRegs[1];</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> RHSL = RHSPartRegs[0];</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> RHSH = RHSPartRegs[1];</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> CmpH = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(Pred, ResTy, LHSH, RHSH);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> CmpHEQ =</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, ResTy, LHSH, RHSH);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> CmpLU = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;          <a class="code" href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">ICmpInst::getUnsignedPredicate</a>(Pred), ResTy, LHSL, RHSL);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, CmpHEQ, CmpLU, CmpH);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXT_INREG: {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    int64_t SizeInBits = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="comment">// So long as the new type has more bits than the bits we&#39;re extending we</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="comment">// don&#39;t need to break it apart.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &gt;= SizeInBits) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="comment">// We don&#39;t lose any non-extension bits by truncating the src and</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="comment">// sign-extending the dst.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <span class="keyword">auto</span> TruncMIB = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(NarrowTy, MO1);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      MO1.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(TruncMIB.getReg(0));</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO2 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> DstExt = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a42427e969917da5da61fadd006fed326">buildSExt</a>(MO2, DstExt);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      MO2.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(DstExt);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="comment">// Break it apart. Components below the extension point are unmodified. The</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="comment">// component containing the extension point becomes a narrower SEXT_INREG.</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="comment">// Components above it are ashr&#39;d from the component containing the</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="comment">// extension point.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (SizeOp0 % NarrowSize != 0)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordtype">int</span> NumParts = SizeOp0 / NarrowSize;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="comment">// List the registers where the destination will be scattered.</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> DstRegs;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">// List the registers where the source will be split.</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> SrcRegs;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="comment">// Create all the temporary registers.</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      SrcRegs.push_back(SrcReg);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// Explode the big arguments into smaller chunks.</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(SrcRegs, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AshrCstReg =</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NarrowTy, NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() - 1)</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> FullExtensionReg = 0;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> PartialExtensionReg = 0;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="comment">// Do the operation on each small part.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) * NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; SizeInBits)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        DstRegs.push_back(SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> * NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &gt; SizeInBits) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PartialExtensionReg &amp;&amp;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;               <span class="stringliteral">&quot;Expected to visit partial extension before full&quot;</span>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">if</span> (FullExtensionReg) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;          DstRegs.push_back(FullExtensionReg);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        DstRegs.push_back(</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(NarrowTy, PartialExtensionReg, AshrCstReg)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        FullExtensionReg = DstRegs.back();</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        DstRegs.push_back(</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                .buildInstr(</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                    TargetOpcode::G_SEXT_INREG, {NarrowTy},</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                    {SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], SizeInBits % NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>()})</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                .<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0));</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        PartialExtensionReg = DstRegs.back();</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// Gather the destination registers into the final destination.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BSWAP:</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BITREVERSE: {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">if</span> (SizeOp0 % NarrowSize != 0)</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> SrcRegs, DstRegs;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordtype">unsigned</span> NumParts = SizeOp0 / NarrowSize;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(), NarrowTy, NumParts, SrcRegs);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="keyword">auto</span> DstPart = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), {NarrowTy},</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                           {SrcRegs[NumParts - 1 - i]});</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      DstRegs.push_back(DstPart.getReg(0));</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), DstRegs);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  }</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PTR_ADD:</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PTRMASK: {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a">narrowScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, 2);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOUI:</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOSI:</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a687c20941b83380477f4a3d95ad4e390">narrowScalarFPTOI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPEXT:</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4">narrowScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, 0, TargetOpcode::G_FPEXT);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#acc6c42a7b5fe244fad430ca7df32d346"> 1418</a></span>&#160;<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#acc6c42a7b5fe244fad430ca7df32d346">LegalizerHelper::coerceToScalar</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> Val) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Val);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>())</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>();</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralAddressSpace(Ty.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>()))</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(NewTy, Val).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewVal = Val;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>());</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">if</span> (EltTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    NewVal = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(NewTy, NewVal).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(NewTy, NewVal).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;}</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c"> 1440</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">LegalizerHelper::widenScalarSrc</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                                     <span class="keywordtype">unsigned</span> OpIdx, <span class="keywordtype">unsigned</span> ExtOpcode) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keyword">auto</span> ExtB = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOpcode, {WideTy}, {MO});</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(ExtB.getReg(0));</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a"> 1447</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a">LegalizerHelper::narrowScalarSrc</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy,</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                                      <span class="keywordtype">unsigned</span> OpIdx) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="keyword">auto</span> ExtB = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(NarrowTy, MO);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(ExtB.getReg(0));</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;}</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f"> 1454</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">LegalizerHelper::widenScalarDst</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy,</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                                     <span class="keywordtype">unsigned</span> OpIdx, <span class="keywordtype">unsigned</span> TruncOpcode) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstExt = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TruncOpcode, {MO}, {DstExt});</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(DstExt);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;}</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4"> 1463</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4">LegalizerHelper::narrowScalarDst</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                                      <span class="keywordtype">unsigned</span> OpIdx, <span class="keywordtype">unsigned</span> ExtOpcode) {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstTrunc = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOpcode, {MO}, {DstTrunc});</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(DstTrunc);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;}</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2"> 1472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">LegalizerHelper::moreElementsVectorDst</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy,</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                                            <span class="keywordtype">unsigned</span> OpIdx) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstExt = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(DstExt);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad68c3cafb2cc7ee28ee3c7dff2a45f2e">buildDeleteTrailingVectorElements</a>(Dst, DstExt);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;}</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f"> 1482</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">LegalizerHelper::moreElementsVectorSrc</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> MoreTy,</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                                            <span class="keywordtype">unsigned</span> OpIdx) {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Regs;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a901a49f9b5721ab01d9d371f96e4bcea">buildPadVectorWithUndefElements</a>(MoreTy, MO).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd"> 1489</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">LegalizerHelper::bitcastSrc</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> CastTy, <span class="keywordtype">unsigned</span> OpIdx) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.setReg(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(CastTy, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3"> 1494</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">LegalizerHelper::bitcastDst</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> CastTy, <span class="keywordtype">unsigned</span> OpIdx) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CastDst = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(CastTy);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(MO, CastDst);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(CastDst);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;}</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160; </div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;LegalizerHelper::widenScalarMergeValues(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                                        <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src1);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> SrcSize = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> WideSize = WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumMerge = (DstSize + WideSize - 1) / WideSize;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="keywordtype">unsigned</span> NumOps = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands();</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordtype">unsigned</span> NumSrc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordtype">unsigned</span> PartSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / NumSrc;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordflow">if</span> (WideSize &gt;= DstSize) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="comment">// Directly pack the bits in the target type.</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ResultReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(WideTy, Src1).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160; </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 2; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumOps; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> - 1) * PartSize;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getReg();</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg) == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PartSize));</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <span class="keyword">auto</span> ZextInput = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(WideTy, SrcReg);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> NextResult = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1 == NumOps &amp;&amp; WideTy == DstTy ? DstReg :</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <span class="keyword">auto</span> Shl = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(WideTy, ZextInput, ShiftAmt);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NextResult, ResultReg, Shl);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      ResultReg = NextResult;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">if</span> (WideSize &gt; DstSize)</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, ResultReg);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5986a45c021d42bcc2f1563aa25c4cc8">buildIntToPtr</a>(DstReg, ResultReg);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160; </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// Unmerge the original values to the GCD type, and recombine to the next</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="comment">// multiple greater than the original type.</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// %3:_(s12) = G_MERGE_VALUES %0:_(s4), %1:_(s4), %2:_(s4) -&gt; s6</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">// %4:_(s2), %5:_(s2) = G_UNMERGE_VALUES %0</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// %6:_(s2), %7:_(s2) = G_UNMERGE_VALUES %1</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">// %8:_(s2), %9:_(s2) = G_UNMERGE_VALUES %2</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// %10:_(s6) = G_MERGE_VALUES %4, %5, %6</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// %11:_(s6) = G_MERGE_VALUES %7, %8, %9</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// %12:_(s12) = G_MERGE_VALUES %10, %11</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// Padding with undef if necessary:</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// %2:_(s8) = G_MERGE_VALUES %0:_(s4), %1:_(s4) -&gt; s6</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">// %3:_(s2), %4:_(s2) = G_UNMERGE_VALUES %0</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="comment">// %5:_(s2), %6:_(s2) = G_UNMERGE_VALUES %1</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="comment">// %7:_(s2) = G_IMPLICIT_DEF</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">// %8:_(s6) = G_MERGE_VALUES %3, %4, %5</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// %9:_(s6) = G_MERGE_VALUES %6, %7, %7</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// %10:_(s12) = G_MERGE_VALUES %8, %9</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> GCD = <a class="code" href="ScalarEvolution_8cpp.html#aa4ab138d4aa4beb5e35a996d3bd21765">std::gcd</a>(SrcSize, WideSize);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(GCD);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Parts;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> NewMergeRegs;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Unmerges;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideDstTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(NumMerge * WideSize);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// Decompose the original operands if they don&#39;t evenly divide.</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands())) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = MO.getReg();</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">if</span> (GCD == SrcSize) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      Unmerges.push_back(SrcReg);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(GCDTy, SrcReg);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0, JE = Unmerge-&gt;getNumOperands() - 1; J != JE; ++J)</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        Unmerges.push_back(Unmerge.getReg(J));</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// Pad with undef to the next size that is a multiple of the requested size.</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Unmerges.size()) != NumMerge * WideSize) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> UndefReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(GCDTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Unmerges.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumMerge * WideSize; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      Unmerges.push_back(UndefReg);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> PartsPerGCD = WideSize / GCD;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160; </div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="comment">// Build merges of each piece.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Slicer(Unmerges);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumMerge; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Slicer = Slicer.drop_front(PartsPerGCD)) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keyword">auto</span> <a class="code" href="R600ClauseMergePass_8cpp.html#aba99928790de45fa7aa12b47fbd828ff">Merge</a> =</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(WideTy, Slicer.take_front(PartsPerGCD));</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    NewMergeRegs.push_back(<a class="code" href="R600ClauseMergePass_8cpp.html#aba99928790de45fa7aa12b47fbd828ff">Merge</a>.getReg(0));</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// A truncate may be necessary if the requested type doesn&#39;t evenly divide the</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// original result type.</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == WideDstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, NewMergeRegs);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keyword">auto</span> FinalMerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(WideDstTy, NewMergeRegs);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, FinalMerge.getReg(0));</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160; </div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;LegalizerHelper::widenScalarUnmergeValues(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                                          <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keywordtype">int</span> NumDst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDst).getReg();</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst0Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst0Reg);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">if</span> (!DstTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>())</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="keywordflow">if</span> (WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt;= SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>();</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralAddressSpace(SrcTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>())) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not casting non-integral address space integer\n&quot;</span>);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      SrcTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      SrcReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(SrcTy, SrcReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    }</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">// Widen SrcTy to WideTy. This does not affect the result, but since the</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="comment">// user requested this size, it is probably better handled than SrcTy and</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="comment">// should reduce the total number of legalization artifacts.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">if</span> (WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      SrcTy = WideTy;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      SrcReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(WideTy, SrcReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="comment">// Theres no unmerge type to target. Directly extract the bits from the</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="comment">// source type</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordtype">unsigned</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160; </div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Dst0Reg, SrcReg);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumDst; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, DstSize * <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="keyword">auto</span> Shr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(SrcTy, SrcReg, ShiftAmt);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), Shr);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="comment">// Extend the source to a wider type.</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LCMTy = <a class="code" href="namespacellvm.html#a55a2f0d67720407fe032276991d5111b">getLCMType</a>(SrcTy, WideTy);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160; </div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> WideSrc = SrcReg;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">if</span> (LCMTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="comment">// TODO: If this is an integral address space, cast to integer and anyext.</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Widening pointer source types not implemented\n&quot;</span>);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    }</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160; </div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    WideSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(LCMTy, WideSrc).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(WideTy, WideSrc);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="comment">// Create a sequence of unmerges and merges to the original results. Since we</span></div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="comment">// may have widened the source, we will need to pad the results with dead defs</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// to cover the source register.</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// e.g. widen s48 to s64:</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// %1:_(s48), %2:_(s48) = G_UNMERGE_VALUES %0:_(s96)</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">// =&gt;</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">//  %4:_(s192) = G_ANYEXT %0:_(s96)</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">//  %5:_(s64), %6, %7 = G_UNMERGE_VALUES %4 ; Requested unmerge</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="comment">//  ; unpack to GCD type, with extra dead defs</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">//  %8:_(s16), %9, %10, %11 = G_UNMERGE_VALUES %5:_(s64)</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="comment">//  %12:_(s16), %13, dead %14, dead %15 = G_UNMERGE_VALUES %6:_(s64)</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="comment">//  dead %16:_(s16), dead %17, dead %18, dead %18 = G_UNMERGE_VALUES %7:_(s64)</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="comment">//  %1:_(s48) = G_MERGE_VALUES %8:_(s16), %9, %10   ; Remerge to destination</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="comment">//  %2:_(s48) = G_MERGE_VALUES %11:_(s16), %12, %13 ; Remerge to destination</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = <a class="code" href="namespacellvm.html#adb74ac5c2f2a45c7247a785f898d4833">getGCDType</a>(WideTy, DstTy);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumUnmerge = Unmerge-&gt;getNumOperands() - 1;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> PartsPerRemerge = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / GCDTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="comment">// Directly unmerge to the destination without going through a GCD type</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <span class="comment">// if possible</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordflow">if</span> (PartsPerRemerge == 1) {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> PartsPerUnmerge = WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160; </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumUnmerge; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keyword">auto</span> MIB = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::G_UNMERGE_VALUES);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0; J != PartsPerUnmerge; ++J) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordtype">int</span> Idx = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> * PartsPerUnmerge + J;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordflow">if</span> (Idx &lt; NumDst)</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;          MIB.addDef(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx).getReg());</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;          <span class="comment">// Create dead def for excess components.</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;          MIB.addDef(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(DstTy));</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      }</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160; </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      MIB.addUse(Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 16&gt;</a> Parts;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0; J != NumUnmerge; ++J)</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      extractGCDType(Parts, GCDTy, Unmerge.getReg(J));</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> RemergeParts;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumDst; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0; J &lt; PartsPerRemerge; ++J) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> Idx = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> * PartsPerRemerge + J;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        RemergeParts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Parts[Idx]);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160; </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getReg(), RemergeParts);</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      RemergeParts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    }</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;}</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;LegalizerHelper::widenScalarExtract(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                                    <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() || DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> Src(SrcReg);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="comment">// Extracts from pointers can be handled only if they are really just</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <span class="comment">// simple integers.</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>();</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralAddressSpace(SrcTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>()))</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcAsIntTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      Src = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(SrcAsIntTy, Src);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      SrcTy = SrcAsIntTy;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> == 0) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <span class="comment">// Avoid a shift in the degenerate case.</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg,</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                            <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a40c85353b0cd7cfdc7d8f8b364758c15">buildAnyExtOrTrunc</a>(WideTy, Src));</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160; </div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="comment">// Do a shift in the source type.</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> ShiftTy = SrcTy;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">if</span> (WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      Src = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(WideTy, Src);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      ShiftTy = WideTy;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keyword">auto</span> LShr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      ShiftTy, Src, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShiftTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, LShr);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160; </div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">if</span> (!SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">if</span> (DstTy != SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>())</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160; </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> % SrcTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() != 0)</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).setImm((WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) *</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                          <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>(), 0);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;}</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;LegalizerHelper::widenScalarInsert(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                                   <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0 || WideTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;}</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;LegalizerHelper::widenScalarAddSubOverflow(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                                           <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordtype">unsigned</span> Opcode;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordtype">unsigned</span> ExtOpcode;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  std::optional&lt;Register&gt; CarryIn;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected opcode!&quot;</span>);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDO:</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    Opcode = TargetOpcode::G_ADD;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    ExtOpcode = TargetOpcode::G_SEXT;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBO:</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    Opcode = TargetOpcode::G_SUB;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    ExtOpcode = TargetOpcode::G_SEXT;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDO:</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    Opcode = TargetOpcode::G_ADD;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    ExtOpcode = TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBO:</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    Opcode = TargetOpcode::G_SUB;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    ExtOpcode = TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDE:</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    Opcode = TargetOpcode::G_UADDE;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    ExtOpcode = TargetOpcode::G_SEXT;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    CarryIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBE:</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    Opcode = TargetOpcode::G_USUBE;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    ExtOpcode = TargetOpcode::G_SEXT;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    CarryIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDE:</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    Opcode = TargetOpcode::G_UADDE;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    ExtOpcode = TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    CarryIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBE:</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    Opcode = TargetOpcode::G_USUBE;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    ExtOpcode = TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    CarryIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordtype">unsigned</span> BoolExtOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5aafc4bc2c28b6cb5d9aeb319b186d11">getBoolExtOp</a>(WideTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">if</span> (CarryIn)</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 4, BoolExtOp);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  }</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; </div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="keyword">auto</span> LHSExt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOpcode, {WideTy}, {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2)});</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keyword">auto</span> RHSExt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOpcode, {WideTy}, {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3)});</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="comment">// Do the arithmetic in the larger type.</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewOp;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="keywordflow">if</span> (CarryIn) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> CarryOutTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    NewOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                .<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opcode, {WideTy, CarryOutTy},</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                            {LHSExt, RHSExt, *CarryIn})</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                .<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    NewOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opcode, {WideTy}, {LHSExt, RHSExt}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> OrigTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="keyword">auto</span> TruncOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(OrigTy, NewOp);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keyword">auto</span> ExtOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOpcode, {WideTy}, {TruncOp});</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// There is no overflow if the ExtOp is the same as NewOp.</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1), NewOp, ExtOp);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="comment">// Now trunc the NewOp to the original result.</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), NewOp);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;}</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;LegalizerHelper::widenScalarAddSubShlSat(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                                         <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keywordtype">bool</span> IsSigned = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SADDSAT ||</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SSUBSAT ||</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SSHLSAT;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="keywordtype">bool</span> IsShift = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SSHLSAT ||</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                 <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_USHLSAT;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// We can convert this to:</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="comment">//   1. Any extend iN to iM</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">//   2. SHL by M-N</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">//   3. [US][ADD|SUB|SHL]SAT</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">//   4. L/ASHR by M-N</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">// It may be more efficient to lower this to a min and a max operation in</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="comment">// the higher precision arithmetic if the promoted operation isn&#39;t legal,</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="comment">// but this decision is up to the target&#39;s lowering request.</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keywordtype">unsigned</span> NewBits = WideTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keywordtype">unsigned</span> SHLAmount = NewBits - MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg).<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="comment">// Shifts must zero-extend the RHS to preserve the unsigned quantity, and</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="comment">// must not left shift the RHS to preserve the shift amount.</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(WideTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = IsShift ? <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(WideTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2))</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                     : <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(WideTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2));</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="keyword">auto</span> ShiftK = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, SHLAmount);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="keyword">auto</span> ShiftL = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(WideTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, ShiftK);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="keyword">auto</span> ShiftR = IsShift ? <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> : <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(WideTy, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, ShiftK);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="keyword">auto</span> WideInst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), {WideTy},</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                                        {ShiftL, ShiftR}, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags());</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160; </div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">// Use a shift that will preserve the number of sign bits when the trunc is</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="comment">// folded away.</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = IsSigned ? <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(WideTy, WideInst, ShiftK)</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                         : <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(WideTy, WideInst, ShiftK);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, Result);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;}</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;LegalizerHelper::widenScalarMulo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                                 <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="keywordtype">bool</span> IsSigned = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SMULO;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> OriginalOverflow = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> OverflowTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(OriginalOverflow);</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <span class="keywordtype">unsigned</span> SrcBitWidth = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">// To determine if the result overflowed in the larger type, we extend the</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="comment">// input to the larger type, do the multiply (checking if it overflows),</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="comment">// then also check the high bits of the result to see if overflow happened</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">// there.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keywordtype">unsigned</span> ExtOp = IsSigned ? TargetOpcode::G_SEXT : TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keyword">auto</span> LeftOperand = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOp, {WideTy}, {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>});</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keyword">auto</span> RightOperand = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOp, {WideTy}, {<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>});</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keyword">auto</span> Mulo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), {WideTy, OverflowTy},</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                                    {LeftOperand, RightOperand});</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = Mulo-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Result, Mul);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> ExtResult;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="comment">// Overflow occurred if it occurred in the larger type, or if the high part</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="comment">// of the result does not zero/sign-extend the low part.  Check this second</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="comment">// possibility first.</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="keywordflow">if</span> (IsSigned) {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="comment">// For signed, overflow occurred when the high part does not sign-extend</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="comment">// the low part.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    ExtResult = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afe73ac7a93f98c40c8fb66fce8fa4400">buildSExtInReg</a>(WideTy, Mul, SrcBitWidth);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="comment">// Unsigned overflow occurred when the high part does not zero-extend the</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="comment">// low part.</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    ExtResult = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a26edc3c3cae5a3f4d6ddd7f628b98c45">buildZExtInReg</a>(WideTy, Mul, SrcBitWidth);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  }</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">// Multiplication cannot overflow if the WideTy is &gt;= 2 * original width,</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">// so we don&#39;t need to check the overflow result of larger type Mulo.</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="keywordflow">if</span> (WideTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; 2 * SrcBitWidth) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keyword">auto</span> Overflow =</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, OverflowTy, Mul, ExtResult);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="comment">// Finally check if the multiplication in the larger type itself overflowed.</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(OriginalOverflow, Mulo-&gt;getOperand(1), Overflow);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, OriginalOverflow, Mul, ExtResult);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  }</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;}</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l02032"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aacc36b9bbb74a3cdb987aa8f28b269e3"> 2032</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aacc36b9bbb74a3cdb987aa8f28b269e3">LegalizerHelper::widenScalar</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy) {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_XCHG:</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_ADD:</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_SUB:</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_AND:</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_OR:</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_XOR:</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_MIN:</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_MAX:</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_UMIN:</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMICRMW_UMAX:</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0 &amp;&amp; <span class="stringliteral">&quot;atomicrmw with second scalar type&quot;</span>);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMIC_CMPXCHG:</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0 &amp;&amp; <span class="stringliteral">&quot;G_ATOMIC_CMPXCHG with second scalar type&quot;</span>);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMIC_CMPXCHG_WITH_SUCCESS:</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 4, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    }</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 1 &amp;&amp;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;           <span class="stringliteral">&quot;G_ATOMIC_CMPXCHG_WITH_SUCCESS with third scalar type&quot;</span>);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT:</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">return</span> widenScalarExtract(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT:</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">return</span> widenScalarInsert(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MERGE_VALUES:</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">return</span> widenScalarMergeValues(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UNMERGE_VALUES:</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <span class="keywordflow">return</span> widenScalarUnmergeValues(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDO:</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBO:</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDO:</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBO:</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDE:</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBE:</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDE:</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBE:</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <span class="keywordflow">return</span> widenScalarAddSubOverflow(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMULO:</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMULO:</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">return</span> widenScalarMulo(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDSAT:</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBSAT:</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSHLSAT:</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDSAT:</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBSAT:</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USHLSAT:</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keywordflow">return</span> widenScalarAddSubShlSat(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, WideTy);</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ:</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ_ZERO_UNDEF:</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ:</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF:</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTPOP: {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    }</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160; </div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="comment">// First extend the input.</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordtype">unsigned</span> ExtOpc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_CTTZ ||</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                              <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_CTTZ_ZERO_UNDEF</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                          ? TargetOpcode::G_ANYEXT</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                          : TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keyword">auto</span> MIBSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOpc, {WideTy}, {SrcReg});</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> CurTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordtype">unsigned</span> NewOpc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="keywordflow">if</span> (NewOpc == TargetOpcode::G_CTTZ) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <span class="comment">// The count is the same in the larger type except if the original</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      <span class="comment">// value was zero.  This can be handled by setting the bit just off</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <span class="comment">// the top of the original type.</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <span class="keyword">auto</span> TopBit =</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;          <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), CurTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      MIBSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        WideTy, MIBSrc, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, TopBit));</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      <span class="comment">// Now we know the operand is non-zero, use the more relaxed opcode.</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      NewOpc = TargetOpcode::G_CTTZ_ZERO_UNDEF;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="comment">// Perform the operation at the larger size.</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keyword">auto</span> MIBNewOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(NewOpc, {WideTy}, {MIBSrc});</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="comment">// This is already the correct result for CTPOP and CTTZs</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_CTLZ ||</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_CTLZ_ZERO_UNDEF) {</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="comment">// The correct result is NewOp - (Difference in widety and current ty).</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordtype">unsigned</span> SizeDiff = WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - CurTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      MIBNewOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;          WideTy, MIBNewOp, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, SizeDiff));</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    }</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7ac5295bdfdd480a2c66ee54273ebe21">buildZExtOrTrunc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), MIBNewOp);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BSWAP: {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160; </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ShrReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstExt = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ShiftAmtReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).setReg(DstExt);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordtype">unsigned</span> DiffBits = WideTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() - Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShiftAmtReg, DiffBits);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(ShrReg, DstExt, ShiftAmtReg);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, ShrReg);</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  }</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BITREVERSE: {</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <span class="keywordtype">unsigned</span> DiffBits = WideTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() - Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstExt = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).setReg(DstExt);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, DiffBits);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(WideTy, DstExt, ShiftAmt);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  }</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREEZE:</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160; </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ABS:</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160; </div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ADD:</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_AND:</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MUL:</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_OR:</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_XOR:</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SUB:</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="comment">// Perform operation at larger width (any extension is fines here, high bits</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="comment">// don&#39;t affect the result) and then truncate the result back to the</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="comment">// original type.</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160; </div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SBFX:</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UBFX:</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SHL:</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160; </div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 1);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <span class="comment">// The &quot;number of bits to shift&quot; operand must preserve its value as an</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <span class="comment">// unsigned integer:</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160; </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SDIV:</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SREM:</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMIN:</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMAX:</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160; </div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SDIVREM:</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160; </div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ASHR:</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LSHR:</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160; </div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <span class="keywordtype">unsigned</span> CvtOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_ASHR ?</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        TargetOpcode::G_SEXT : TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160; </div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, CvtOp);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 1);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="comment">// The &quot;number of bits to shift&quot; operand must preserve its value as an</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      <span class="comment">// unsigned integer:</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    }</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UDIV:</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UREM:</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMIN:</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMAX:</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UDIVREM:</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SELECT:</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="comment">// Perform operation at larger width (any extension is fine here, high</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="comment">// bits don&#39;t affect the result) and then truncate the result back to the</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="comment">// original type.</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="keywordtype">bool</span> IsVec = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>();</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="comment">// Explicit extension is required here since high bits affect the result.</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5aafc4bc2c28b6cb5d9aeb319b186d11">getBoolExtOp</a>(IsVec, <span class="keyword">false</span>));</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    }</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOSI:</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOUI:</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0)</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_FPEXT);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SITOFP:</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0)</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, TargetOpcode::G_FPTRUNC);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UITOFP:</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0)</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, TargetOpcode::G_FPTRUNC);</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD:</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXTLOAD:</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ZEXTLOAD:</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STORE: {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160; </div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>())</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="keywordtype">unsigned</span> ExtType = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() == 1 ?</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      TargetOpcode::G_ZEXT : TargetOpcode::G_ANYEXT;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, ExtType);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CONSTANT: {</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;SrcMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>().<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordtype">unsigned</span> ExtOpc = LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#a45aaa22f9450b9e89c1008c90e20659c">getExtOpcodeForWideningConstant</a>(</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg()));</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((ExtOpc == TargetOpcode::G_ZEXT || ExtOpc == TargetOpcode::G_SEXT ||</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            ExtOpc == TargetOpcode::G_ANYEXT) &amp;&amp;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;           <span class="stringliteral">&quot;Illegal Extend&quot;</span>);</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;SrcVal = SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0af83aa690c458c5b3a8dc36ad3c3f9">getCImm</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>();</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Val = (ExtOpc == TargetOpcode::G_SEXT)</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                           ? SrcVal.<a class="code" href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                           : SrcVal.<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#aae70dd97002db997dfc96303fa9e6971">setCImm</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ctx, Val));</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCONSTANT: {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="comment">// To avoid changing the bits of the constant due to extension to a larger</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="comment">// type and then using G_FPTRUNC, we simply convert to a G_CONSTANT.</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;SrcMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Val = SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#a878403638ab65500c736343a57678bdb">getFPImm</a>()-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">getValueAPF</a>().<a class="code" href="classllvm_1_1APFloat.html#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>();</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ab24db762f0912a99f1e4d9e44eaeaa44">setInstrAndDebugLoc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keyword">auto</span> IntCst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), Val);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(*IntCst, WideTy, 0, TargetOpcode::G_TRUNC);</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_IMPLICIT_DEF: {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BRCOND:</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5aafc4bc2c28b6cb5d9aeb319b186d11">getBoolExtOp</a>(<span class="keyword">false</span>, <span class="keyword">false</span>));</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160; </div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCMP:</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_FPEXT);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_FPEXT);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    }</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ICMP:</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0)</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordtype">unsigned</span> ExtOpcode = <a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">CmpInst::isSigned</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                               <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getPredicate()))</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                               ? TargetOpcode::G_SEXT</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                               : TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, ExtOpcode);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, ExtOpcode);</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160; </div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PTR_ADD:</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 1 &amp;&amp; <span class="stringliteral">&quot;unable to legalize pointer of G_PTR_ADD&quot;</span>);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160; </div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PHI: {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0 &amp;&amp; <span class="stringliteral">&quot;Expecting only Idx 0&quot;</span>);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> += 2) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;OpMBB = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1).getMBB();</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(OpMBB, OpMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0fab3e644b3457f90ed7f64876a037d2">getFirstTerminatorForward</a>());</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    }</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160; </div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, --<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">getFirstNonPHI</a>());</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  }</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT_VECTOR_ELT: {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 0) {</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> VecReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VecReg);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(VecTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>(), WideTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()), 1,</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;          TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    }</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 2)</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="comment">// TODO: Probably should be zext</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  }</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT_VECTOR_ELT: {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> VecReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VecReg);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideVecTy = <a class="code" href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(VecTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>(), WideTy);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideVecTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideVecTy, 0);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    }</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160; </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 2) {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <span class="comment">// TODO: Probably should be zext</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 3, TargetOpcode::G_SEXT);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160; </div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  }</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FADD:</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMUL:</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSUB:</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMA:</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAD:</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FNEG:</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FABS:</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCANONICALIZE:</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM:</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM:</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM_IEEE:</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM_IEEE:</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINIMUM:</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXIMUM:</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FDIV:</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREM:</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCEIL:</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FFLOOR:</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCOS:</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSIN:</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG10:</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG:</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG2:</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FRINT:</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FNEARBYINT:</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSQRT:</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP:</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP2:</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPOW:</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_TRUNC:</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_ROUND:</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_ROUNDEVEN:</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160; </div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TargetOpcode::G_FPEXT);</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160; </div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, TargetOpcode::G_FPTRUNC);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPOWI: {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_FPEXT);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, TargetOpcode::G_FPTRUNC);</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  }</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTTOPTR:</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160; </div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PTRTOINT:</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BUILD_VECTOR: {</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160; </div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideEltTy = TypeIdx == 1 ? WideTy : WideTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideEltTy, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160; </div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="comment">// Avoid changing the result vector type if the source element type was</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <span class="comment">// requested.</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>().<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(TargetOpcode::G_BUILD_VECTOR_TRUNC));</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0);</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    }</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXT_INREG:</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160; </div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 1, TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 0, TargetOpcode::G_TRUNC);</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PTRMASK: {</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, WideTy, 2, TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;}</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160; </div>
<div class="line"><a name="l02627"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a944828d894ed9e13fbdfac2652d88745"> 2627</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LegalizerHelper_8cpp.html#a944828d894ed9e13fbdfac2652d88745">getUnmergePieces</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;Pieces,</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                             <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> Src, <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(Ty, Src);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Unmerge-&gt;getNumOperands() - 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    Pieces.push_back(Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;}</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160; </div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l02635"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a297f161b2970f693a98a4bf30c7eb630"> 2635</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a297f161b2970f693a98a4bf30c7eb630">LegalizerHelper::lowerFConstant</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>();</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <span class="keywordtype">unsigned</span> AddrSpace = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getDefaultGlobalsAddressSpace();</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> AddrPtrTy = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(AddrSpace, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerSizeInBits(AddrSpace));</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">getFloatTypeForLLT</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst))));</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160; </div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  <span class="keyword">auto</span> <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1da8389b4eb951b11309c28ad492e8d4">buildConstantPool</a>(</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      AddrPtrTy, MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa460158a4019a4043faf6ea76344cbd5">getConstantPool</a>()-&gt;<a class="code" href="classllvm_1_1MachineConstantPool.html#afd6691ddb5d4adf50d744297e18a1c6d">getConstantPoolIndex</a>(</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                     <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getFPImm(), Alignment));</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <a class="code" href="structllvm_1_1MachinePointerInfo.html#a8b1a64bd0c1be7a99998055c78d1312b">MachinePointerInfo::getConstantPool</a>(MF), <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>,</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;      MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst), Alignment);</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aeede510b1aaac978daaba60dcc2817de">buildLoadInstr</a>(TargetOpcode::G_LOAD, Dst, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, *MMO);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;}</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l02661"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a6fb535803cbc7430528cdb19a157dd47"> 2661</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a6fb535803cbc7430528cdb19a157dd47">LegalizerHelper::lowerBitcast</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160; </div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcEltTy = SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> SrcRegs;</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160; </div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <span class="keywordtype">int</span> NumDstElt = DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      <span class="keywordtype">int</span> NumSrcElt = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstEltTy = DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstCastTy = DstEltTy; <span class="comment">// Intermediate bitcast result type</span></div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcPartTy = SrcEltTy; <span class="comment">// Original unmerge result type.</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160; </div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      <span class="comment">// If there&#39;s an element size mismatch, insert intermediate casts to match</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      <span class="comment">// the result element type.</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <span class="keywordflow">if</span> (NumSrcElt &lt; NumDstElt) { <span class="comment">// Source element type is larger.</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        <span class="comment">// %1:_(&lt;4 x s8&gt;) = G_BITCAST %0:_(&lt;2 x s16&gt;)</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        <span class="comment">// =&gt;</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <span class="comment">// %2:_(s16), %3:_(s16) = G_UNMERGE_VALUES %0</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        <span class="comment">// %3:_(&lt;2 x s8&gt;) = G_BITCAST %2</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <span class="comment">// %4:_(&lt;2 x s8&gt;) = G_BITCAST %3</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        <span class="comment">// %1:_(&lt;4 x s16&gt;) = G_CONCAT_VECTORS %3, %4</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        DstCastTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumDstElt / NumSrcElt, DstEltTy);</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        SrcPartTy = SrcEltTy;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumSrcElt &gt; NumDstElt) { <span class="comment">// Source element type is smaller.</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        <span class="comment">// %1:_(&lt;2 x s16&gt;) = G_BITCAST %0:_(&lt;4 x s8&gt;)</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <span class="comment">// =&gt;</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        <span class="comment">// %2:_(&lt;2 x s8&gt;), %3:_(&lt;2 x s8&gt;) = G_UNMERGE_VALUES %0</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="comment">// %3:_(s16) = G_BITCAST %2</span></div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <span class="comment">// %4:_(s16) = G_BITCAST %3</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;        <span class="comment">// %1:_(&lt;2 x s16&gt;) = G_BUILD_VECTOR %3, %4</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        SrcPartTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumSrcElt / NumDstElt, SrcEltTy);</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        DstCastTy = DstEltTy;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;      }</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160; </div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a944828d894ed9e13fbdfac2652d88745">getUnmergePieces</a>(SrcRegs, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Src, SrcPartTy);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> &amp;SrcReg : SrcRegs)</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        SrcReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(DstCastTy, SrcReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a944828d894ed9e13fbdfac2652d88745">getUnmergePieces</a>(SrcRegs, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Src, SrcEltTy);</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160; </div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(Dst, SrcRegs);</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> SrcRegs;</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a944828d894ed9e13fbdfac2652d88745">getUnmergePieces</a>(SrcRegs, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Src, DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>());</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(Dst, SrcRegs);</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  }</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;}</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="comment">/// Figure out the bit offset into a register when coercing a vector index for</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="comment">/// the wide element type. This is only for the case when promoting vector to</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="comment">/// one with larger elements.</span></div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="comment"></span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="comment">/// %offset_idx = G_AND %idx, ~(-1 &lt;&lt; Log2(DstEltSize / SrcEltSize))</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="comment">/// %offset_bits = G_SHL %offset_idx, Log2(SrcEltSize)</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a5f65ab13a2645935d21a119b722a55a1"> 2735</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="LegalizerHelper_8cpp.html#a5f65ab13a2645935d21a119b722a55a1">getBitcastWiderVectorElementOffset</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                                                   <a class="code" href="classllvm_1_1Register.html">Register</a> Idx,</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                                                   <span class="keywordtype">unsigned</span> NewEltSize,</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                                                   <span class="keywordtype">unsigned</span> OldEltSize) {</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Log2EltRatio = <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(NewEltSize / OldEltSize);</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(Idx);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160; </div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="comment">// Now figure out the amount we need to shift to get the target bits.</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="keyword">auto</span> OffsetMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      IdxTy, ~(<a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(IdxTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) &lt;&lt; Log2EltRatio));</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="keyword">auto</span> OffsetIdx = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(IdxTy, Idx, OffsetMask);</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildShl(IdxTy, OffsetIdx,</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(IdxTy, <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(OldEltSize))).getReg(0);</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;}</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="comment">/// Perform a G_EXTRACT_VECTOR_ELT in a different sized vector element. If this</span></div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="comment">/// is casting to a vector with a smaller element size, perform multiple element</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="comment">/// extracts and merge the results. If this is coercing to a vector with larger</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="comment">/// elements, index the bitcasted vector and extract the target element with bit</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="comment">/// operations. This is intended to force the indexing in the native register</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">/// size for architectures that can dynamically index the register file.</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l02757"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ac50dd9fe6220347f8306e3694a8129cb"> 2757</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ac50dd9fe6220347f8306e3694a8129cb">LegalizerHelper::bitcastExtractVectorElt</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                                         <a class="code" href="classllvm_1_1LLT.html">LLT</a> CastTy) {</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160; </div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcVec = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Idx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcVecTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcVec);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Idx);</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcEltTy = SrcVecTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <span class="keywordtype">unsigned</span> NewNumElts = CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? CastTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() : 1;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <span class="keywordtype">unsigned</span> OldNumElts = SrcVecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160; </div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewEltTy = CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? CastTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() : CastTy;</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CastVec = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(CastTy, SrcVec).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160; </div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NewEltSize = NewEltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> OldEltSize = SrcEltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="keywordflow">if</span> (NewNumElts &gt; OldNumElts) {</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="comment">// Decreasing the vector element size</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <span class="comment">// e.g. i64 = extract_vector_elt x:v2i64, y:i32</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="comment">//  =&gt;</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="comment">//  v4i32:castx = bitcast x:v2i64</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="comment">// i64 = bitcast</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <span class="comment">//   (v2i32 build_vector (i32 (extract_vector_elt castx, (2 * y))),</span></div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="comment">//                       (i32 (extract_vector_elt castx, (2 * y + 1)))</span></div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <span class="keywordflow">if</span> (NewNumElts % OldNumElts != 0)</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160; </div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <span class="comment">// Type of the intermediate result vector.</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NewEltsPerOldElt = NewNumElts / OldNumElts;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> MidTy =</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(NewEltsPerOldElt), NewEltTy);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keyword">auto</span> NewEltsPerOldEltK = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, NewEltsPerOldElt);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160; </div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> NewOps(NewEltsPerOldElt);</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="keyword">auto</span> NewBaseIdx = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(IdxTy, Idx, NewEltsPerOldEltK);</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160; </div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NewEltsPerOldElt; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      <span class="keyword">auto</span> IdxOffset = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;      <span class="keyword">auto</span> TmpIdx = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(IdxTy, NewBaseIdx, IdxOffset);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="keyword">auto</span> Elt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7835e6cd3f1b340d3bb617304038d744">buildExtractVectorElement</a>(NewEltTy, CastVec, TmpIdx);</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      NewOps[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = Elt.getReg(0);</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    }</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <span class="keyword">auto</span> NewVec = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(MidTy, NewOps);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(Dst, NewVec);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  }</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="keywordflow">if</span> (NewNumElts &lt; OldNumElts) {</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <span class="keywordflow">if</span> (NewEltSize % OldEltSize != 0)</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="comment">// This only depends on powers of 2 because we use bit tricks to figure out</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="comment">// the bit offset we need to shift to get the target element. A general</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="comment">// expansion could emit division/multiply.</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NewEltSize / OldEltSize))</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160; </div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="comment">// Increasing the vector element size.</span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="comment">// %elt:_(small_elt) = G_EXTRACT_VECTOR_ELT %vec:_(&lt;N x small_elt&gt;), %idx</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="comment">//   =&gt;</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="comment">// %cast = G_BITCAST %vec</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <span class="comment">// %scaled_idx = G_LSHR %idx, Log2(DstEltSize / SrcEltSize)</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="comment">// %wide_elt  = G_EXTRACT_VECTOR_ELT %cast, %scaled_idx</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="comment">// %offset_idx = G_AND %idx, ~(-1 &lt;&lt; Log2(DstEltSize / SrcEltSize))</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <span class="comment">// %offset_bits = G_SHL %offset_idx, Log2(SrcEltSize)</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <span class="comment">// %elt_bits = G_LSHR %wide_elt, %offset_bits</span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="comment">// %elt = G_TRUNC %elt_bits</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Log2EltRatio = <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(NewEltSize / OldEltSize);</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="keyword">auto</span> Log2Ratio = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, Log2EltRatio);</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160; </div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <span class="comment">// Divide to get the index in the wider element type.</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="keyword">auto</span> ScaledIdx = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(IdxTy, Idx, Log2Ratio);</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160; </div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> WideElt = CastVec;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="keywordflow">if</span> (CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      WideElt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7835e6cd3f1b340d3bb617304038d744">buildExtractVectorElement</a>(NewEltTy, CastVec,</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                                                     ScaledIdx).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    }</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160; </div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="comment">// Compute the bit offset into the register of the target element.</span></div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> OffsetBits = <a class="code" href="LegalizerHelper_8cpp.html#a5f65ab13a2645935d21a119b722a55a1">getBitcastWiderVectorElementOffset</a>(</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Idx, NewEltSize, OldEltSize);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160; </div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <span class="comment">// Shift the wide element to get the target element.</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="keyword">auto</span> ExtractedBits = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(NewEltTy, WideElt, OffsetBits);</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Dst, ExtractedBits);</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  }</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160; </div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;}</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment">/// Emit code to insert \p InsertReg into \p TargetRet at \p OffsetBits in \p</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">/// TargetReg, while preserving other bits in \p TargetReg.</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="comment">/// (InsertReg &lt;&lt; Offset) | (TargetReg &amp; ~(-1 &gt;&gt; InsertReg.size()) &lt;&lt; Offset)</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a2b99673a7e084ea8e75699f04b5f683a"> 2867</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="LegalizerHelper_8cpp.html#a2b99673a7e084ea8e75699f04b5f683a">buildBitFieldInsert</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                                    <a class="code" href="classllvm_1_1Register.html">Register</a> TargetReg, <a class="code" href="classllvm_1_1Register.html">Register</a> InsertReg,</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                                    <a class="code" href="classllvm_1_1Register.html">Register</a> OffsetBits) {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> TargetTy = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(TargetReg);</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> InsertTy = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(InsertReg);</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  <span class="keyword">auto</span> ZextVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildZExt(TargetTy, InsertReg);</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="keyword">auto</span> ShiftedInsertVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildShl(TargetTy, ZextVal, OffsetBits);</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160; </div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <span class="comment">// Produce a bitmask of the value to insert</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <span class="keyword">auto</span> EltMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    TargetTy, <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(TargetTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(),</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                                   InsertTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="comment">// Shift it into position</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <span class="keyword">auto</span> ShiftedMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildShl(TargetTy, EltMask, OffsetBits);</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  <span class="keyword">auto</span> InvShiftedMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildNot(TargetTy, ShiftedMask);</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160; </div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="comment">// Clear out the bits in the wide element</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  <span class="keyword">auto</span> MaskedOldElt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(TargetTy, TargetReg, InvShiftedMask);</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160; </div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="comment">// The value to insert has all zeros already, so stick it into the masked</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <span class="comment">// wide element.</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildOr(TargetTy, MaskedOldElt, ShiftedInsertVal).getReg(0);</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;}</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment">/// Perform a G_INSERT_VECTOR_ELT in a different sized vector element. If this</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">/// is increasing the element size, perform the indexing in the target element</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">/// type, and use bit operations to insert at the element position. This is</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">/// intended for architectures that can dynamically index the register file and</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment">/// want to force indexing in the native register size.</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l02897"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a0a37f8fb6797142b53677bc4b59bf540"> 2897</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a0a37f8fb6797142b53677bc4b59bf540">LegalizerHelper::bitcastInsertVectorElt</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;                                        <a class="code" href="classllvm_1_1LLT.html">LLT</a> CastTy) {</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160; </div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcVec = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Val = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Idx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160; </div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Idx);</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecEltTy = VecTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewEltTy = CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? CastTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() : CastTy;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NewEltSize = NewEltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> OldEltSize = VecEltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160; </div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  <span class="keywordtype">unsigned</span> NewNumElts = CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? CastTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() : 1;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <span class="keywordtype">unsigned</span> OldNumElts = VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160; </div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CastVec = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(CastTy, SrcVec).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keywordflow">if</span> (NewNumElts &lt; OldNumElts) {</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span> (NewEltSize % OldEltSize != 0)</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160; </div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="comment">// This only depends on powers of 2 because we use bit tricks to figure out</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="comment">// the bit offset we need to shift to get the target element. A general</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="comment">// expansion could emit division/multiply.</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NewEltSize / OldEltSize))</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Log2EltRatio = <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(NewEltSize / OldEltSize);</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="keyword">auto</span> Log2Ratio = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, Log2EltRatio);</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160; </div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="comment">// Divide to get the index in the wider element type.</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keyword">auto</span> ScaledIdx = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(IdxTy, Idx, Log2Ratio);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160; </div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ExtractedElt = CastVec;</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="keywordflow">if</span> (CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      ExtractedElt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7835e6cd3f1b340d3bb617304038d744">buildExtractVectorElement</a>(NewEltTy, CastVec,</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;                                                          ScaledIdx).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    }</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="comment">// Compute the bit offset into the register of the target element.</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> OffsetBits = <a class="code" href="LegalizerHelper_8cpp.html#a5f65ab13a2645935d21a119b722a55a1">getBitcastWiderVectorElementOffset</a>(</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Idx, NewEltSize, OldEltSize);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160; </div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> InsertedElt = <a class="code" href="LegalizerHelper_8cpp.html#a2b99673a7e084ea8e75699f04b5f683a">buildBitFieldInsert</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, ExtractedElt,</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;                                               Val, OffsetBits);</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keywordflow">if</span> (CastTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      InsertedElt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aca31191486506a279715dd3bf677d75f">buildInsertVectorElement</a>(</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        CastTy, CastVec, InsertedElt, ScaledIdx).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    }</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(Dst, InsertedElt);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  }</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160; </div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;}</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160; </div>
<div class="line"><a name="l02960"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a1dbb219846876149646e81e84ee81a47"> 2960</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1dbb219846876149646e81e84ee81a47">LegalizerHelper::lowerLoad</a>(<a class="code" href="classllvm_1_1GAnyLoad.html">GAnyLoad</a> &amp;LoadMI) {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  <span class="comment">// Lower to a memory-width G_LOAD and a G_SEXT/G_ZEXT/G_ANYEXT</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = LoadMI.<a class="code" href="classllvm_1_1GAnyLoad.html#a4fe5ff0257f5b8749cbe223b848b2570">getDstReg</a>();</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PtrReg = LoadMI.<a class="code" href="classllvm_1_1GLoadStore.html#a0a7fb170c5d3165c1a9f3cf5fee5b4ca">getPointerReg</a>();</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> &amp;MMO = LoadMI.<a class="code" href="classllvm_1_1GLoadStore.html#a2aaf791aa3564d53adefabc2e145234c">getMMO</a>();</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> MemTy = MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160; </div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  <span class="keywordtype">unsigned</span> MemSizeInBits = MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <span class="keywordtype">unsigned</span> MemStoreSizeInBits = 8 * MemTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160; </div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="keywordflow">if</span> (MemSizeInBits != MemStoreSizeInBits) {</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">if</span> (MemTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="comment">// Promote to a byte-sized load if not loading an integral number of</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="comment">// bytes.  For example, promote EXTLOAD:i20 -&gt; EXTLOAD:i24.</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideMemTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(MemStoreSizeInBits);</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *NewMMO =</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a2379cc7655115ddb345a664db355c2a0">getPointerInfo</a>(), WideMemTy);</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160; </div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadReg = DstReg;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> LoadTy = DstTy;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160; </div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="comment">// If this wasn&#39;t already an extending load, we need to widen the result</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="comment">// register to avoid creating a load with a narrower result than the source.</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordflow">if</span> (MemStoreSizeInBits &gt; DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      LoadTy = WideMemTy;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      LoadReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideMemTy);</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    }</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160; </div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="keywordflow">if</span> (isa&lt;GSExtLoad&gt;(LoadMI)) {</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;      <span class="keyword">auto</span> NewLoad = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(LoadTy, PtrReg, *NewMMO);</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afe73ac7a93f98c40c8fb66fce8fa4400">buildSExtInReg</a>(LoadReg, NewLoad, MemSizeInBits);</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;GZExtLoad&gt;(LoadMI) || WideMemTy == LoadTy) {</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;      <span class="keyword">auto</span> NewLoad = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(LoadTy, PtrReg, *NewMMO);</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      <span class="comment">// The extra bits are guaranteed to be zero, since we stored them that</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      <span class="comment">// way.  A zext load from Wide thus automatically gives zext from MemVT.</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6b02e5030940984fb331116653635050">buildAssertZExt</a>(LoadReg, NewLoad, MemSizeInBits);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(LoadReg, PtrReg, *NewMMO);</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    }</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160; </div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <span class="keywordflow">if</span> (DstTy != LoadTy)</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, LoadReg);</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160; </div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    LoadMI.<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  }</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160; </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="comment">// Big endian lowering not implemented.</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">isBigEndian</a>())</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160; </div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  <span class="comment">// This load needs splitting into power of 2 sized loads.</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  <span class="comment">// Our strategy here is to generate anyextending loads for the smaller</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  <span class="comment">// types up to next power-2 result type, and then combine the two larger</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  <span class="comment">// result values together, before truncating back down to the non-pow-2</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  <span class="comment">// type.</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <span class="comment">// E.g. v1 = i24 load =&gt;</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="comment">// v2 = i32 zextload (2 byte)</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  <span class="comment">// v3 = i32 load (1 byte)</span></div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  <span class="comment">// v4 = i32 shl v3, 16</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  <span class="comment">// v5 = i32 or v4, v2</span></div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  <span class="comment">// v1 = i24 trunc v5</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <span class="comment">// By doing this we generate the correct truncate which should get</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  <span class="comment">// combined away as an artifact with a matching extend.</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160; </div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LargeSplitSize, SmallSplitSize;</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160; </div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(MemSizeInBits)) {</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="comment">// This load needs splitting into power of 2 sized loads.</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    LargeSplitSize = <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(MemSizeInBits);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    SmallSplitSize = MemSizeInBits - LargeSplitSize;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    <span class="comment">// This is already a power of 2, but we still need to split this in half.</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    <span class="comment">// Assume we&#39;re being asked to decompose an unaligned load.</span></div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="comment">// TODO: If this requires multiple splits, handle them all at once.</span></div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keyword">auto</span> &amp;Ctx = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="keywordflow">if</span> (TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#aabebd01d497720c5f7f25f1112c14ebf">allowsMemoryAccess</a>(Ctx, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>(), MemTy, MMO))</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160; </div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    SmallSplitSize = LargeSplitSize = MemSizeInBits / 2;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  }</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160; </div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <span class="keywordflow">if</span> (MemTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <span class="comment">// TODO: Handle vector extloads</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordflow">if</span> (MemTy != DstTy)</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160; </div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="comment">// TODO: We can do better than scalarizing the vector and at least split it</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <span class="comment">// in half.</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">reduceLoadStoreWidth</a>(LoadMI, 0, DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>());</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  }</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *LargeMMO =</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, 0, LargeSplitSize / 8);</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *SmallMMO =</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, LargeSplitSize / 8, SmallSplitSize / 8);</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(PtrReg);</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  <span class="keywordtype">unsigned</span> AnyExtSize = <a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> AnyExtTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(AnyExtSize);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <span class="keyword">auto</span> LargeLoad = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aeede510b1aaac978daaba60dcc2817de">buildLoadInstr</a>(TargetOpcode::G_ZEXTLOAD, AnyExtTy,</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;                                             PtrReg, *LargeMMO);</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160; </div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="keyword">auto</span> OffsetCst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()),</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;                                            LargeSplitSize / 8);</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PtrAddReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(PtrTy);</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="keyword">auto</span> SmallPtr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">buildPtrAdd</a>(PtrAddReg, PtrReg, OffsetCst);</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="keyword">auto</span> SmallLoad = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aeede510b1aaac978daaba60dcc2817de">buildLoadInstr</a>(LoadMI.<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>(), AnyExtTy,</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;                                             SmallPtr, *SmallMMO);</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160; </div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AnyExtTy, LargeSplitSize);</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(AnyExtTy, SmallLoad, ShiftAmt);</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160; </div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="keywordflow">if</span> (AnyExtTy == DstTy)</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(DstReg, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, LargeLoad);</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AnyExtTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(AnyExtTy, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, LargeLoad);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, {<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>});</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp; <span class="stringliteral">&quot;expected pointer&quot;</span>);</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(AnyExtTy, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, LargeLoad);</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160; </div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="comment">// FIXME: We currently consider this to be illegal for non-integral address</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <span class="comment">// spaces, but we need still need a way to reinterpret the bits.</span></div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5986a45c021d42bcc2f1563aa25c4cc8">buildIntToPtr</a>(DstReg, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>);</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  }</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160; </div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  LoadMI.<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;}</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160; </div>
<div class="line"><a name="l03097"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a40e2e64056fc2e2dabadfb9ceae338f6"> 3097</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a40e2e64056fc2e2dabadfb9ceae338f6">LegalizerHelper::lowerStore</a>(<a class="code" href="classllvm_1_1GStore.html">GStore</a> &amp;StoreMI) {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="comment">// Lower a non-power of 2 store into multiple pow-2 stores.</span></div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <span class="comment">// E.g. split an i24 store into an i16 store + i8 store.</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <span class="comment">// We do this by first extending the stored value to the next largest power</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  <span class="comment">// of 2 type, and then using truncating stores to store the components.</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <span class="comment">// By doing this, likewise with G_LOAD, generate an extend that can be</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <span class="comment">// artifact-combined away instead of leaving behind extracts.</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = StoreMI.<a class="code" href="classllvm_1_1GStore.html#ab80d0571fdf63877734e0f7bea4e886b">getValueReg</a>();</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PtrReg = StoreMI.<a class="code" href="classllvm_1_1GLoadStore.html#a0a7fb170c5d3165c1a9f3cf5fee5b4ca">getPointerReg</a>();</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> &amp;MMO = **StoreMI.<a class="code" href="classllvm_1_1MachineInstr.html#aa5ff177bc1498508696aaf27235db3fc">memoperands_begin</a>();</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> MemTy = MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="keywordtype">unsigned</span> StoreWidth = MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  <span class="keywordtype">unsigned</span> StoreSizeInBits = 8 * MemTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <span class="keywordflow">if</span> (StoreWidth != StoreSizeInBits) {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160; </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="comment">// Promote to a byte-sized store with upper bits zero if not</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="comment">// storing an integral number of bytes.  For example, promote</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="comment">// TRUNCSTORE:i1 X -&gt; TRUNCSTORE:i8 (and X, 1)</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(StoreSizeInBits);</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160; </div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (StoreSizeInBits &gt; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      <span class="comment">// Avoid creating a store with a narrower source than result.</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      SrcReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(WideTy, SrcReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;      SrcTy = WideTy;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keyword">auto</span> ZextInReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a26edc3c3cae5a3f4d6ddd7f628b98c45">buildZExtInReg</a>(SrcTy, SrcReg, StoreWidth);</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160; </div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *NewMMO =</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a2379cc7655115ddb345a664db355c2a0">getPointerInfo</a>(), WideTy);</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(ZextInReg, PtrReg, *NewMMO);</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    StoreMI.<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  }</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160; </div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <span class="keywordflow">if</span> (MemTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <span class="comment">// TODO: Handle vector trunc stores</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <span class="keywordflow">if</span> (MemTy != SrcTy)</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160; </div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    <span class="comment">// TODO: We can do better than scalarizing the vector and at least split it</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    <span class="comment">// in half.</span></div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">reduceLoadStoreWidth</a>(StoreMI, 0, SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>());</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  }</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160; </div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <span class="keywordtype">unsigned</span> MemSizeInBits = MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LargeSplitSize, SmallSplitSize;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(MemSizeInBits)) {</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    LargeSplitSize = llvm::bit_floor&lt;uint64_t&gt;(MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    SmallSplitSize = MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - LargeSplitSize;</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <span class="keyword">auto</span> &amp;Ctx = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    <span class="keywordflow">if</span> (TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#aabebd01d497720c5f7f25f1112c14ebf">allowsMemoryAccess</a>(Ctx, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>(), MemTy, MMO))</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>; <span class="comment">// Don&#39;t know what we&#39;re being asked to do.</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160; </div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    SmallSplitSize = LargeSplitSize = MemSizeInBits / 2;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160; </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <span class="comment">// Extend to the next pow-2. If this store was itself the result of lowering,</span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  <span class="comment">// e.g. an s56 store being broken into s32 + s24, we might have a stored type</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <span class="comment">// that&#39;s wider than the stored size.</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <span class="keywordtype">unsigned</span> AnyExtSize = <a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewSrcTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(AnyExtSize);</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160; </div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntPtrTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    SrcReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(IntPtrTy, SrcReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  }</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  <span class="keyword">auto</span> ExtVal = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a40c85353b0cd7cfdc7d8f8b364758c15">buildAnyExtOrTrunc</a>(NewSrcTy, SrcReg);</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160; </div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;  <span class="comment">// Obtain the smaller value by shifting away the larger value.</span></div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NewSrcTy, LargeSplitSize);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <span class="keyword">auto</span> SmallVal = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(NewSrcTy, ExtVal, ShiftAmt);</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  <span class="comment">// Generate the PtrAdd and truncating stores.</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(PtrReg);</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;  <span class="keyword">auto</span> OffsetCst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()), LargeSplitSize / 8);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  <span class="keyword">auto</span> SmallPtr =</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">buildPtrAdd</a>(PtrTy, PtrReg, OffsetCst);</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160; </div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *LargeMMO =</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, 0, LargeSplitSize / 8);</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *SmallMMO =</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, LargeSplitSize / 8, SmallSplitSize / 8);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(ExtVal, PtrReg, *LargeMMO);</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(SmallVal, SmallPtr, *SmallMMO);</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;  StoreMI.<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;}</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03197"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a6c12dbad109a5d725ce01a9a8363f948"> 3197</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a6c12dbad109a5d725ce01a9a8363f948">LegalizerHelper::bitcast</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> CastTy) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD: {</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> &amp;MMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    <span class="comment">// Not sure how to interpret a bitcast of an extending load.</span></div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="keywordflow">if</span> (MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>().<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != CastTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160; </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">bitcastDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 0);</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a0204ff8c047858d1fb330cafa728b51e">setType</a>(CastTy);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  }</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STORE: {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160; </div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> &amp;MMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160; </div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="comment">// Not sure how to interpret a bitcast of a truncating store.</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <span class="keywordflow">if</span> (MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>().<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != CastTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160; </div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">bitcastSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 0);</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    MMO.<a class="code" href="classllvm_1_1MachineMemOperand.html#a0204ff8c047858d1fb330cafa728b51e">setType</a>(CastTy);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SELECT: {</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160; </div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="keywordflow">if</span> (MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;bitcast action not implemented for vector select\n&quot;</span>);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160; </div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">bitcastSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 2);</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">bitcastSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 3);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">bitcastDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 0);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  }</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_AND:</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_OR:</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_XOR: {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">bitcastSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 1);</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">bitcastSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 2);</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">bitcastDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, CastTy, 0);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  }</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT_VECTOR_ELT:</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ac50dd9fe6220347f8306e3694a8129cb">bitcastExtractVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, CastTy);</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT_VECTOR_ELT:</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a0a37f8fb6797142b53677bc4b59bf540">bitcastInsertVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, CastTy);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;  }</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;}</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160; </div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;<span class="comment">// Legalize an instruction by changing the opcode in place.</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::changeOpcode(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> NewOpcode) {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>().<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(NewOpcode));</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;}</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160; </div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03274"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aa411af5653e9ed6cd4f664853b61bf0d"> 3274</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aa411af5653e9ed6cd4f664853b61bf0d">LegalizerHelper::lower</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> LowerHintTy) {</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  <span class="keyword">using namespace </span>TargetOpcode;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160; </div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCONSTANT:</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a297f161b2970f693a98a4bf30c7eb630">lowerFConstant</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BITCAST:</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a6fb535803cbc7430528cdb19a157dd47">lowerBitcast</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SREM:</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UREM: {</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keyword">auto</span> Quot =</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == G_SREM ? G_SDIV : G_UDIV, {Ty},</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;                              {MI.getOperand(1), MI.getOperand(2)});</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160; </div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <span class="keyword">auto</span> Prod = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(Ty, Quot, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2));</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1), Prod);</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  }</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDO:</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBO:</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a545272144fee7632786d2fc0427ec6db">lowerSADDO_SSUBO</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMULH:</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMULH:</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1a84546a5ff646ed05b5772e00084db6">lowerSMULH_UMULH</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMULO:</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMULO: {</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    <span class="comment">// Generate G_UMULH/G_SMULH to check for overflow and a normal G_MUL for the</span></div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    <span class="comment">// result.</span></div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Overflow = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160; </div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SMULO</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;                          ? TargetOpcode::G_SMULH</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                          : TargetOpcode::G_UMULH;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>();</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::G_MUL));</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1);</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160; </div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <span class="keyword">auto</span> HiPart = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opcode, {Ty}, {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>});</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, 0);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    <span class="comment">// Move insert point forward so we can use the Res register if needed.</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">getMBB</a>(), ++<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="comment">// For *signed* multiply, overflow is detected by checking:</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <span class="comment">// (hi != (lo &gt;&gt; bitwidth-1))</span></div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <span class="keywordflow">if</span> (Opcode == TargetOpcode::G_SMULH) {</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - 1);</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;      <span class="keyword">auto</span> Shifted = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(Ty, Res, ShiftAmt);</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, Overflow, HiPart, Shifted);</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, Overflow, HiPart, Zero);</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    }</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  }</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FNEG: {</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160; </div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="comment">// TODO: Handle vector types once we are able to</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;    <span class="comment">// represent them.</span></div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keyword">auto</span> SignMask =</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SubByReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(Res, SubByReg, SignMask);</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  }</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSUB:</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STRICT_FSUB: {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160; </div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="comment">// Lower (G_FSUB LHS, RHS) to (G_FADD LHS, (G_FNEG RHS)).</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="comment">// First, check if G_FNEG is marked as Lower. If so, we may</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="comment">// end up with an infinite loop as G_FSUB is used to legalize G_FNEG.</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="keywordflow">if</span> (LI.getAction({G_FNEG, {Ty}}).Action == Lower)</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keyword">auto</span> Neg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac939f3c7fdf6c976421d61564d078506">buildFNeg</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_STRICT_FSUB)</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6c47deaeb76718f7eaa6262308a72dd5">buildStrictFAdd</a>(Res, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Neg, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags());</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afc51b7318978bc4878cce41bdf1774db">buildFAdd</a>(Res, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Neg, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags());</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160; </div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;  }</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAD:</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aac36a82fb8a9d486c3b59ccab7769e4d">lowerFMad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FFLOOR:</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ab031376e8eddaebf70d2cbcce069b4ba">lowerFFloor</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_ROUND:</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1422ed8c8a0aea2d84dc7e2f35d24874">lowerIntrinsicRound</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_ROUNDEVEN: {</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    <span class="comment">// Since round even is the assumed rounding mode for unconstrained FP</span></div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <span class="comment">// operations, rint and roundeven are the same operation.</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    changeOpcode(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TargetOpcode::G_FRINT);</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  }</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMIC_CMPXCHG_WITH_SUCCESS: {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> OldValRes = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SuccessRes = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CmpVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> NewVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a88bfee6694db03e525171fc9eb98b13d">buildAtomicCmpXchg</a>(OldValRes, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, CmpVal, NewVal,</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                                  **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin());</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, SuccessRes, OldValRes, CmpVal);</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;  }</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD:</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXTLOAD:</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ZEXTLOAD:</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1dbb219846876149646e81e84ee81a47">lowerLoad</a>(cast&lt;GAnyLoad&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STORE:</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a40e2e64056fc2e2dabadfb9ceae338f6">lowerStore</a>(cast&lt;GStore&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF:</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ_ZERO_UNDEF:</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ:</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ:</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTPOP:</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a0b9d961c3e0a9fa4c0e9ce806e972c4c">lowerBitCount</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  <span class="keywordflow">case</span> G_UADDO: {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CarryOut = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160; </div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(Res, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, CarryOut, Res, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160; </div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  }</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <span class="keywordflow">case</span> G_UADDE: {</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CarryOut = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CarryIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="keyword">auto</span> TmpRes = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="keyword">auto</span> ZExtCarryIn = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(Ty, CarryIn);</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(Res, TmpRes, ZExtCarryIn);</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, CarryOut, Res, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160; </div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  }</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  <span class="keywordflow">case</span> G_USUBO: {</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> BorrowOut = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160; </div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Res, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, BorrowOut, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160; </div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  }</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  <span class="keywordflow">case</span> G_USUBE: {</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> BorrowOut = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> BorrowIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> CondTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(BorrowOut);</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160; </div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keyword">auto</span> TmpRes = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    <span class="keyword">auto</span> ZExtBorrowIn = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(Ty, BorrowIn);</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Res, TmpRes, ZExtBorrowIn);</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160; </div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <span class="keyword">auto</span> LHS_EQ_RHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, CondTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="keyword">auto</span> LHS_ULT_RHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, CondTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(BorrowOut, LHS_EQ_RHS, BorrowIn, LHS_ULT_RHS);</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160; </div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  }</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;  <span class="keywordflow">case</span> G_UITOFP:</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aba403eaa336a6c9d869717c9e54edd9c">lowerUITOFP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <span class="keywordflow">case</span> G_SITOFP:</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a0a4f859f973b7f797f2d510c369980ad">lowerSITOFP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <span class="keywordflow">case</span> G_FPTOUI:</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a64f47636eb4667460ea08f358d6d39da">lowerFPTOUI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  <span class="keywordflow">case</span> G_FPTOSI:</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ab99f92278021f1921be23b762056a9cc">lowerFPTOSI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="keywordflow">case</span> G_FPTRUNC:</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aaa03d66b30e1b6173c99b9a4266b7da9">lowerFPTRUNC</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;  <span class="keywordflow">case</span> G_FPOWI:</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a84a1b0b6afe8ccff8b1c5fd66de228af">lowerFPOWI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;  <span class="keywordflow">case</span> G_SMIN:</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  <span class="keywordflow">case</span> G_SMAX:</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;  <span class="keywordflow">case</span> G_UMIN:</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <span class="keywordflow">case</span> G_UMAX:</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a7287c6cc84f805db4ae46d581b4deecc">lowerMinMax</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  <span class="keywordflow">case</span> G_FCOPYSIGN:</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a9dc8c9b527c43cc36ac86886d18f00e4">lowerFCopySign</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <span class="keywordflow">case</span> G_FMINNUM:</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;  <span class="keywordflow">case</span> G_FMAXNUM:</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a105bd213837c5c2e30520113d885b8f3">lowerFMinNumMaxNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  <span class="keywordflow">case</span> G_MERGE_VALUES:</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#abce8515ac1fb3b6be13d5a39418847cb">lowerMergeValues</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  <span class="keywordflow">case</span> G_UNMERGE_VALUES:</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a6abe0f5db91bf445b3962dba969c5c7f">lowerUnmergeValues</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXT_INREG: {</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).isImm() &amp;&amp; <span class="stringliteral">&quot;Expected immediate&quot;</span>);</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    int64_t SizeInBits = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160; </div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> TmpRes = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(DstTy);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160; </div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    <span class="keyword">auto</span> MIBSz = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() - SizeInBits);</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(TmpRes, SrcReg, MIBSz-&gt;getOperand(0));</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(DstReg, TmpRes, MIBSz-&gt;getOperand(0));</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  }</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  <span class="keywordflow">case</span> G_EXTRACT_VECTOR_ELT:</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  <span class="keywordflow">case</span> G_INSERT_VECTOR_ELT:</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a2fdcff9cc28cfffa71717b8d3c32c781">lowerExtractInsertVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;  <span class="keywordflow">case</span> G_SHUFFLE_VECTOR:</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#abac7927a227a6c370e26ee82af77567d">lowerShuffleVector</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;  <span class="keywordflow">case</span> G_DYN_STACKALLOC:</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a0b54c43cec90635e63e99f792b9207bc">lowerDynStackAlloc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  <span class="keywordflow">case</span> G_EXTRACT:</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a76e5a8c6363a48b3ca4e924a8f59f0e5">lowerExtract</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <span class="keywordflow">case</span> G_INSERT:</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a743aa32715279bdb86b53f20065950c9">lowerInsert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <span class="keywordflow">case</span> G_BSWAP:</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae62214791d9e4dcb2f7eda048092458f">lowerBswap</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <span class="keywordflow">case</span> G_BITREVERSE:</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a2ed659cad017d524d63d763e19ef756f">lowerBitreverse</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  <span class="keywordflow">case</span> G_READ_REGISTER:</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  <span class="keywordflow">case</span> G_WRITE_REGISTER:</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a76df0b752eddd8b0711d1af16a3658ad">lowerReadWriteRegister</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;  <span class="keywordflow">case</span> G_UADDSAT:</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="keywordflow">case</span> G_USUBSAT: {</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    <span class="comment">// Try to make a reasonable guess about which lowering strategy to use. The</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="comment">// target can override this with custom lowering and calling the</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="comment">// implementation functions.</span></div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    <span class="keywordflow">if</span> (LI.isLegalOrCustom({G_UMIN, Ty}))</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a813d1719803526d9839b4ae8d0a6b93d">lowerAddSubSatToMinMax</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aae6d16ec0f044086e929d63d532178bf">lowerAddSubSatToAddoSubo</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  }</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;  <span class="keywordflow">case</span> G_SADDSAT:</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  <span class="keywordflow">case</span> G_SSUBSAT: {</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160; </div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <span class="comment">// FIXME: It would probably make more sense to see if G_SADDO is preferred,</span></div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <span class="comment">// since it&#39;s a shorter expansion. However, we would need to figure out the</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <span class="comment">// preferred boolean type for the carry out for the query.</span></div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    <span class="keywordflow">if</span> (LI.isLegalOrCustom({G_SMIN, Ty}) &amp;&amp; LI.isLegalOrCustom({G_SMAX, Ty}))</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a813d1719803526d9839b4ae8d0a6b93d">lowerAddSubSatToMinMax</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aae6d16ec0f044086e929d63d532178bf">lowerAddSubSatToAddoSubo</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;  }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  <span class="keywordflow">case</span> G_SSHLSAT:</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <span class="keywordflow">case</span> G_USHLSAT:</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a00a7edf44feca96dfa6abdc4ae5d705d">lowerShlSat</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <span class="keywordflow">case</span> G_ABS:</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a21f36be0b82249def611e5709ff7dd15">lowerAbsToAddXor</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <span class="keywordflow">case</span> G_SELECT:</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ad29042068469adc2859360985494dbb9">lowerSelect</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  <span class="keywordflow">case</span> G_IS_FPCLASS:</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a79ddea5769637d54074168769084f404">lowerISFPCLASS</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;  <span class="keywordflow">case</span> G_SDIVREM:</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  <span class="keywordflow">case</span> G_UDIVREM:</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ace9b958e28468570d5cc74682e326f3b">lowerDIVREM</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  <span class="keywordflow">case</span> G_FSHL:</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <span class="keywordflow">case</span> G_FSHR:</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aa6564387d7a51c85b557861c8f2d30ba">lowerFunnelShift</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;  <span class="keywordflow">case</span> G_ROTL:</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  <span class="keywordflow">case</span> G_ROTR:</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ac5df097268459420f2dd52a648379463">lowerRotate</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;  <span class="keywordflow">case</span> G_MEMSET:</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;  <span class="keywordflow">case</span> G_MEMCPY:</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  <span class="keywordflow">case</span> G_MEMMOVE:</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#aca820b14c7ae2e658cefd8a3be4da035">lowerMemCpyFamily</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;  <span class="keywordflow">case</span> G_MEMCPY_INLINE:</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    <span class="keywordflow">return</span> lowerMemcpyInline(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  <a class="code" href="CodeGen_2GlobalISel_2Utils_8h.html#a42d8e909f2bea1119192cca95df057fa">GISEL_VECREDUCE_CASES_NONSEQ</a></div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8e25418b93784160f4a660950f5fa806">lowerVectorReduction</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;}</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aee39b6aa6b9299acb9388393e34f3937"> 3581</a></span>&#160;<a class="code" href="structllvm_1_1Align.html">Align</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#aee39b6aa6b9299acb9388393e34f3937">LegalizerHelper::getStackTemporaryAlignment</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty,</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;                                                  <a class="code" href="structllvm_1_1Align.html">Align</a> <a class="code" href="namespacellvm.html#ab3b23d3c8c5c910df534a80ce9772495">MinAlign</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  <span class="comment">// FIXME: We&#39;re missing a way to go back from LLT to llvm::Type to query the</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <span class="comment">// datalayout for the preferred alignment. Also there should be a target hook</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;  <span class="comment">// for this to allow targets to reduce the alignment and ignore the</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  <span class="comment">// datalayout. e.g. AMDGPU should always use a 4-byte alignment, regardless of</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;  <span class="comment">// the type.</span></div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(<a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>())), <a class="code" href="namespacellvm.html#ab3b23d3c8c5c910df534a80ce9772495">MinAlign</a>);</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;}</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160; </div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;<a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></div>
<div class="line"><a name="l03592"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a576b964fe2d7d8750601681e04f05a9c"> 3592</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a576b964fe2d7d8750601681e04f05a9c">LegalizerHelper::createStackTemporary</a>(<a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> Bytes, <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment,</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;                                      <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> &amp;PtrInfo) {</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>();</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  <span class="keywordtype">int</span> FrameIdx = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">CreateStackObject</a>(Bytes, Alignment, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160; </div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;  <span class="keywordtype">unsigned</span> AddrSpace = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getAllocaAddrSpace();</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> FramePtrTy = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(AddrSpace, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerSizeInBits(AddrSpace));</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160; </div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;  PtrInfo = <a class="code" href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIdx);</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a92664cdbeb0b24030809439993ac271d">buildFrameIndex</a>(FramePtrTy, FrameIdx);</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;}</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160; </div>
<div class="line"><a name="l03605"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a7cff50fc754d88cd04027e85d578f443"> 3605</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="LegalizerHelper_8cpp.html#a7cff50fc754d88cd04027e85d578f443">clampDynamicVectorIndex</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> IdxReg,</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                                        <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy) {</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;  int64_t IdxVal;</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MIPatternMatch.html#aa9bd186f4281a367fb872d17d0e7728b">mi_match</a>(IdxReg, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI(), <a class="code" href="namespacellvm_1_1MIPatternMatch.html#a316dd9aa25d9ec9d6d21b56e4296e824">m_ICst</a>(IdxVal)))</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <span class="keywordflow">return</span> IdxReg;</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160; </div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(IdxReg);</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;  <span class="keywordtype">unsigned</span> NElts = VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NElts)) {</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(IdxTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(NElts));</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(IdxTy, IdxReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(IdxTy, <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>)).getReg(0);</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;  }</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMin(IdxTy, IdxReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(IdxTy, NElts - 1))</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;      .getReg(0);</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;}</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160; </div>
<div class="line"><a name="l03622"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ae91b4ff9d9c084c672f78adb9ed4006a"> 3622</a></span>&#160;<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae91b4ff9d9c084c672f78adb9ed4006a">LegalizerHelper::getVectorElementPointer</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> VecPtr, <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy,</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;                                                  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = VecTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160; </div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;  <span class="comment">// Calculate the element offset and add it to the pointer.</span></div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;  <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / 8; <span class="comment">// FIXME: should be ABI size.</span></div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltSize * 8 == EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &amp;&amp;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;         <span class="stringliteral">&quot;Converting bits to bytes lost precision&quot;</span>);</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160; </div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;  <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a class="code" href="LegalizerHelper_8cpp.html#a7cff50fc754d88cd04027e85d578f443">clampDynamicVectorIndex</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, VecTy);</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160; </div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(IdxTy, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                                 <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, EltSize));</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160; </div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VecPtr);</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">buildPtrAdd</a>(PtrTy, VecPtr, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;}</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160; </div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;<span class="comment">/// Check that all vector operands have same number of elements. Other operands</span></div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;<span class="comment"></span><span class="comment">/// should be listed in NonVecOp.</span></div>
<div class="line"><a name="l03644"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#aacaa5cd359fad565f73313045b5c83f0"> 3644</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LegalizerHelper_8cpp.html#aacaa5cd359fad565f73313045b5c83f0">hasSameNumEltsOnAllVectorOperands</a>(</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <a class="code" href="classllvm_1_1GenericMachineInstr.html">GenericMachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    std::initializer_list&lt;unsigned&gt; NonVecOpIndices) {</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumMemOperands() != 0)</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160; </div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(0));</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <span class="keywordflow">if</span> (!VecTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160; </div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> OpIdx = 1; OpIdx &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); ++OpIdx) {</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(OpIdx);</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isReg()) {</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(NonVecOpIndices, OpIdx))</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    }</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160; </div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getReg());</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(NonVecOpIndices, OpIdx))</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    }</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160; </div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() != NumElts)</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;  }</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160; </div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;}</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="comment">/// Fill \p DstOps with DstOps that have same number of elements combined as</span></div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;<span class="comment">/// the Ty. These DstOps have either scalar type when \p NumElts = 1 or are</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;<span class="comment">/// vectors with \p NumElts elements. When Ty.getNumElements() is not multiple</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;<span class="comment">/// of \p NumElts last DstOp (leftover) has fewer then \p NumElts elements.</span></div>
<div class="line"><a name="l03682"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a74212fb91857a365ae5c6c85a0646d97"> 3682</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LegalizerHelper_8cpp.html#a74212fb91857a365ae5c6c85a0646d97">makeDstOps</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;DstOp&gt;</a> &amp;DstOps, <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty,</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;                       <span class="keywordtype">unsigned</span> NumElts) {</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected vector type&quot;</span>);</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy = (NumElts == 1) ? EltTy : <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumElts, EltTy);</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <span class="keywordtype">int</span> NumParts, NumLeftover;</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  std::tie(NumParts, NumLeftover) =</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a29ab832e2ed35aec5b6f00fbca685e7e">getNarrowTypeBreakDown</a>(Ty, NarrowTy, LeftoverTy);</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160; </div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumParts &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Error in getNarrowTypeBreakDown&quot;</span>);</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    DstOps.push_back(NarrowTy);</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  }</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160; </div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="keywordflow">if</span> (LeftoverTy.<a class="code" href="classllvm_1_1LLT.html#a69fb30748f1b3e8a0affd486a9f59f6d">isValid</a>()) {</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumLeftover == 1 &amp;&amp; <span class="stringliteral">&quot;expected exactly one leftover&quot;</span>);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;    DstOps.push_back(LeftoverTy);</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;  }</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;}</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;<span class="comment">/// Operand \p Op is used on \p N sub-instructions. Fill \p Ops with \p N SrcOps</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;<span class="comment">/// made from \p Op depending on operand type.</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a497ca5acebfbe31e76e7c05991519336"> 3705</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LegalizerHelper_8cpp.html#a497ca5acebfbe31e76e7c05991519336">broadcastSrcOp</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;SrcOp&gt;</a> &amp;Ops, <span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                           <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) {</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isReg())</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      Ops.push_back(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getReg());</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isImm())</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      Ops.push_back(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getImm());</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isPredicate())</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;      Ops.push_back(<span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getPredicate()));</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported type&quot;</span>);</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  }</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;}</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160; </div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="comment">// Handle splitting vector operations which need to have the same number of</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;<span class="comment">// elements in each type index, but each type index may have a different element</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;<span class="comment">// type.</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;<span class="comment">// e.g.  &lt;4 x s64&gt; = G_SHL &lt;4 x s64&gt;, &lt;4 x s32&gt; -&gt;</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;<span class="comment">//       &lt;2 x s64&gt; = G_SHL &lt;2 x s64&gt;, &lt;2 x s32&gt;</span></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;<span class="comment">//       &lt;2 x s64&gt; = G_SHL &lt;2 x s64&gt;, &lt;2 x s32&gt;</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;<span class="comment">// Also handles some irregular breakdown cases, e.g.</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;<span class="comment">// e.g.  &lt;3 x s64&gt; = G_SHL &lt;3 x s64&gt;, &lt;3 x s32&gt; -&gt;</span></div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;<span class="comment">//       &lt;2 x s64&gt; = G_SHL &lt;2 x s64&gt;, &lt;2 x s32&gt;</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;<span class="comment">//             s64 = G_SHL s64, s32</span></div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03732"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e"> 3732</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">LegalizerHelper::fewerElementsVectorMultiEltType</a>(</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    <a class="code" href="classllvm_1_1GenericMachineInstr.html">GenericMachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> NumElts,</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    std::initializer_list&lt;unsigned&gt; NonVecOpIndices) {</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LegalizerHelper_8cpp.html#aacaa5cd359fad565f73313045b5c83f0">hasSameNumEltsOnAllVectorOperands</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MRI, NonVecOpIndices) &amp;&amp;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;         <span class="stringliteral">&quot;Non-compatible opcode or not specified non-vector operands&quot;</span>);</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;  <span class="keywordtype">unsigned</span> OrigNumElts = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(0)).<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160; </div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;  <span class="keywordtype">unsigned</span> NumInputs = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumDefs();</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;  <span class="keywordtype">unsigned</span> NumDefs = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumDefs();</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160; </div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <span class="comment">// Create DstOps (sub-vectors with NumElts elts + Leftover) for each output.</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <span class="comment">// Build instructions with DstOps to use instruction found by CSE directly.</span></div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <span class="comment">// CSE copies found instruction into given vreg when building with vreg dest.</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;DstOp, 8&gt;</a>, 2&gt; OutputOpsPieces(NumDefs);</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <span class="comment">// Output registers will be taken from created instructions.</span></div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;Register, 8&gt;</a>, 2&gt; OutputRegs(NumDefs);</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDefs; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <a class="code" href="LegalizerHelper_8cpp.html#a74212fb91857a365ae5c6c85a0646d97">makeDstOps</a>(OutputOpsPieces[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)), NumElts);</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;  }</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160; </div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;  <span class="comment">// Split vector input operands into sub-vectors with NumElts elts + Leftover.</span></div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  <span class="comment">// Operands listed in NonVecOpIndices will be used as is without splitting;</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;  <span class="comment">// examples: compare predicate in icmp and fcmp (op 1), vector select with i1</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  <span class="comment">// scalar condition (op 1), immediate in sext_inreg (op 2).</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;SrcOp, 8&gt;</a>, 3&gt; InputOpsPieces(NumInputs);</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> UseIdx = NumDefs, UseNo = 0; UseIdx &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands();</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;       ++UseIdx, ++UseNo) {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(NonVecOpIndices, UseIdx)) {</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a497ca5acebfbe31e76e7c05991519336">broadcastSrcOp</a>(InputOpsPieces[UseNo], OutputOpsPieces[0].<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>(),</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;                     <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(UseIdx));</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> SplitPieces;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;      extractVectorParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(UseIdx), NumElts, SplitPieces);</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : SplitPieces)</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;        InputOpsPieces[UseNo].push_back(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    }</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  }</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160; </div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  <span class="keywordtype">unsigned</span> NumLeftovers = OrigNumElts % NumElts ? 1 : 0;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160; </div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  <span class="comment">// Take i-th piece of each input operand split and build sub-vector/scalar</span></div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  <span class="comment">// instruction. Set i-th DstOp(s) from OutputOpsPieces as destination(s).</span></div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; OrigNumElts / NumElts + NumLeftovers; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DstOp, 2&gt;</a> Defs;</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> DstNo = 0; DstNo &lt; NumDefs; ++DstNo)</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;      Defs.push_back(OutputOpsPieces[DstNo][<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160; </div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SrcOp, 3&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> InputNo = 0; InputNo &lt; NumInputs; ++InputNo)</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.push_back(InputOpsPieces[InputNo][<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160; </div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), Defs, <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags());</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> DstNo = 0; DstNo &lt; NumDefs; ++DstNo)</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;      OutputRegs[DstNo].push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg(DstNo));</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  }</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160; </div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <span class="comment">// Merge small outputs into MI&#39;s output for each def operand.</span></div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="keywordflow">if</span> (NumLeftovers) {</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDefs; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      mergeMixedSubvectors(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), OutputRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDefs; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), OutputRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  }</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160; </div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;}</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160; </div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03802"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a60e4161d46b020a55403acd13e31df9a"> 3802</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a60e4161d46b020a55403acd13e31df9a">LegalizerHelper::fewerElementsVectorPhi</a>(<a class="code" href="classllvm_1_1GenericMachineInstr.html">GenericMachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;                                        <span class="keywordtype">unsigned</span> NumElts) {</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="keywordtype">unsigned</span> OrigNumElts = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(0)).<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160; </div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <span class="keywordtype">unsigned</span> NumInputs = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumDefs();</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <span class="keywordtype">unsigned</span> NumDefs = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumDefs();</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160; </div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DstOp, 8&gt;</a> OutputOpsPieces;</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> OutputRegs;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <a class="code" href="LegalizerHelper_8cpp.html#a74212fb91857a365ae5c6c85a0646d97">makeDstOps</a>(OutputOpsPieces, MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(0)), NumElts);</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160; </div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="comment">// Instructions that perform register split will be inserted in basic block</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  <span class="comment">// where register is defined (basic block is in the next operand).</span></div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;Register, 8&gt;</a>, 3&gt; InputOpsPieces(NumInputs / 2);</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> UseIdx = NumDefs, UseNo = 0; UseIdx &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands();</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;       UseIdx += 2, ++UseNo) {</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;OpMBB = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(UseIdx + 1).getMBB();</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(OpMBB, OpMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0fab3e644b3457f90ed7f64876a037d2">getFirstTerminatorForward</a>());</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    extractVectorParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(UseIdx), NumElts, InputOpsPieces[UseNo]);</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  }</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160; </div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="comment">// Build PHIs with fewer elements.</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="keywordtype">unsigned</span> NumLeftovers = OrigNumElts % NumElts ? 1 : 0;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; OrigNumElts / NumElts + NumLeftovers; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    <span class="keyword">auto</span> Phi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::G_PHI);</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    Phi.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(OutputOpsPieces[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getLLTTy(MRI)));</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    OutputRegs.push_back(Phi.getReg(0));</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160; </div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; NumInputs / 2; ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      Phi.addUse(InputOpsPieces[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>][<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      Phi.add(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1 + <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> * 2 + 1));</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    }</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  }</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160; </div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  <span class="comment">// Merge small outputs into MI&#39;s def.</span></div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <span class="keywordflow">if</span> (NumLeftovers) {</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    mergeMixedSubvectors(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(0), OutputRegs);</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getReg(0), OutputRegs);</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  }</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160; </div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;}</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160; </div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03850"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#abce993680c63fae7b6cc5814e9b07826"> 3850</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#abce993680c63fae7b6cc5814e9b07826">LegalizerHelper::fewerElementsVectorUnmergeValues</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                                                  <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;                                                  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumDst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDst).getReg();</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160; </div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1 || NarrowTy == DstTy)</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160; </div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="comment">// Requires compatible types. Otherwise SrcReg should have been defined by</span></div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;  <span class="comment">// merge-like instruction that would get artifact combined. Most likely</span></div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;  <span class="comment">// instruction that defines SrcReg has to perform more/fewer elements</span></div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;  <span class="comment">// legalization compatible with NarrowTy.</span></div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected vector types&quot;</span>);</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((SrcTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() == NarrowTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>()) &amp;&amp; <span class="stringliteral">&quot;bad type&quot;</span>);</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160; </div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="keywordflow">if</span> ((SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 0) ||</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;      (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 0))</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160; </div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <span class="comment">// This is most likely DstTy (smaller then register size) packed in SrcTy</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <span class="comment">// (larger then register size) and since unmerge was not combined it will be</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  <span class="comment">// lowered to bit sequence extracts from register. Unpack SrcTy to NarrowTy</span></div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  <span class="comment">// (register size) pieces first. Then unpack each of NarrowTy pieces to DstTy.</span></div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160; </div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  <span class="comment">// %1:_(DstTy), %2, %3, %4 = G_UNMERGE_VALUES %0:_(SrcTy)</span></div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  <span class="comment">// %5:_(NarrowTy), %6 = G_UNMERGE_VALUES %0:_(SrcTy) - reg sequence</span></div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  <span class="comment">// %1:_(DstTy), %2 = G_UNMERGE_VALUES %5:_(NarrowTy) - sequence of bits in reg</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="comment">// %3:_(DstTy), %4 = G_UNMERGE_VALUES %6:_(NarrowTy)</span></div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(NarrowTy, SrcReg);</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumUnmerge = Unmerge-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">getNumOperands</a>() - 1;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> PartsPerUnmerge = NumDst / NumUnmerge;</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160; </div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumUnmerge; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <span class="keyword">auto</span> MIB = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::G_UNMERGE_VALUES);</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160; </div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0; J != PartsPerUnmerge; ++J)</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;      MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">addDef</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> * PartsPerUnmerge + J).getReg());</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;  }</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160; </div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;}</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160; </div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03899"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#abb2458b37415bd3ed547b405507ebc6b"> 3899</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#abb2458b37415bd3ed547b405507ebc6b">LegalizerHelper::fewerElementsVectorMerge</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;                                          <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <span class="comment">// Requires compatible types. Otherwise user of DstReg did not perform unmerge</span></div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  <span class="comment">// that should have been artifact combined. Most likely instruction that uses</span></div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  <span class="comment">// DstReg has to do more/fewer elements legalization compatible with NarrowTy.</span></div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected vector types&quot;</span>);</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DstTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() == NarrowTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>()) &amp;&amp; <span class="stringliteral">&quot;bad type&quot;</span>);</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  <span class="keywordflow">if</span> (NarrowTy == SrcTy)</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160; </div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;  <span class="comment">// This attempts to lower part of LCMTy merge/unmerge sequence. Intended use</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;  <span class="comment">// is for old mir tests. Since the changes to more/fewer elements it should no</span></div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="comment">// longer be possible to generate MIR like this when starting from llvm-ir</span></div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;  <span class="comment">// because LCMTy approach was replaced with merge/unmerge to vector elements.</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;  <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Expected vector types&quot;</span>);</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((SrcTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() == NarrowTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>()) &amp;&amp; <span class="stringliteral">&quot;bad type&quot;</span>);</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    <span class="keywordflow">if</span> ((DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 0) ||</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() &gt;= SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()))</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <span class="comment">// %2:_(DstTy) = G_CONCAT_VECTORS %0:_(SrcTy), %1:_(SrcTy)</span></div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <span class="comment">// %3:_(EltTy), %4, %5 = G_UNMERGE_VALUES %0:_(SrcTy)</span></div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <span class="comment">// %6:_(EltTy), %7, %8 = G_UNMERGE_VALUES %1:_(SrcTy)</span></div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    <span class="comment">// %9:_(NarrowTy) = G_BUILD_VECTOR %3:_(EltTy), %4</span></div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <span class="comment">// %10:_(NarrowTy) = G_BUILD_VECTOR %5:_(EltTy), %6</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="comment">// %11:_(NarrowTy) = G_BUILD_VECTOR %7:_(EltTy), %8</span></div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    <span class="comment">// %2:_(DstTy) = G_CONCAT_VECTORS %9:_(NarrowTy), %10, %11</span></div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160; </div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Elts;</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>();</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(EltTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg());</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; Unmerge-&gt;getNumDefs(); ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;        Elts.push_back(Unmerge.getReg(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>));</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    }</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160; </div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> NarrowTyElts;</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;    <span class="keywordtype">unsigned</span> NumNarrowTyElts = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;    <span class="keywordtype">unsigned</span> NumNarrowTyPieces = DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() / NumNarrowTyElts;</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumNarrowTyPieces;</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;         ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += NumNarrowTyElts) {</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Pieces(&amp;Elts[<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>], NumNarrowTyElts);</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;      NarrowTyElts.push_back(</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(NarrowTy, Pieces).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    }</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160; </div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, NarrowTyElts);</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;  }</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160; </div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0 &amp;&amp; <span class="stringliteral">&quot;Bad type index&quot;</span>);</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;  <span class="keywordflow">if</span> ((NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 0) ||</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      (DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 0))</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160; </div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;  <span class="comment">// This is most likely SrcTy (smaller then register size) packed in DstTy</span></div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;  <span class="comment">// (larger then register size) and since merge was not combined it will be</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;  <span class="comment">// lowered to bit sequence packing into register. Merge SrcTy to NarrowTy</span></div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;  <span class="comment">// (register size) pieces first. Then merge each of NarrowTy pieces to DstTy.</span></div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160; </div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;  <span class="comment">// %0:_(DstTy) = G_MERGE_VALUES %1:_(SrcTy), %2, %3, %4</span></div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;  <span class="comment">// %5:_(NarrowTy) = G_MERGE_VALUES %1:_(SrcTy), %2 - sequence of bits in reg</span></div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;  <span class="comment">// %6:_(NarrowTy) = G_MERGE_VALUES %3:_(SrcTy), %4</span></div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;  <span class="comment">// %0:_(DstTy)  = G_MERGE_VALUES %5:_(NarrowTy), %6 - reg sequence</span></div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> NarrowTyElts;</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;  <span class="keywordtype">unsigned</span> NumParts = DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() / NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;  <span class="keywordtype">unsigned</span> NumSrcElts = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() : 1;</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() / NumSrcElts;</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Sources;</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;      Sources.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1 + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> * NumElts + <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>).getReg());</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    NarrowTyElts.push_back(</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(NarrowTy, Sources).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;  }</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160; </div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, NarrowTyElts);</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;}</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160; </div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l03987"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ae18cc835581a3f8882d7725891b67e4e"> 3987</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ae18cc835581a3f8882d7725891b67e4e">LegalizerHelper::fewerElementsVectorExtractInsertVectorElt</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;                                                           <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;                                                           <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowVecTy) {</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcVec = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InsertVal;</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  <span class="keywordtype">bool</span> IsInsert = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_INSERT_VECTOR_ELT;</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160; </div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((IsInsert ? TypeIdx == 0 : TypeIdx == 1) &amp;&amp; <span class="stringliteral">&quot;not a vector type index&quot;</span>);</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <span class="keywordflow">if</span> (IsInsert)</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;    InsertVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160; </div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Idx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1).getReg();</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160; </div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <span class="comment">// TODO: Handle total scalarization case.</span></div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;  <span class="keywordflow">if</span> (!NarrowVecTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160; </div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcVec);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160; </div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;  <span class="comment">// If the index is a constant, we can really break this down as you would</span></div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;  <span class="comment">// expect, and index into the target size pieces.</span></div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;  int64_t IdxVal;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;  <span class="keyword">auto</span> MaybeCst = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Idx, MRI);</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;  <span class="keywordflow">if</span> (MaybeCst) {</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    IdxVal = MaybeCst-&gt;Value.getSExtValue();</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    <span class="comment">// Avoid out of bounds indexing the pieces.</span></div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <span class="keywordflow">if</span> (IdxVal &gt;= VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()) {</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(DstReg);</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;    }</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160; </div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> VecParts;</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = extractGCDType(VecParts, VecTy, NarrowVecTy, SrcVec);</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160; </div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    <span class="comment">// Build a sequence of NarrowTy pieces in VecParts for this operand.</span></div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> LCMTy = buildLCMMergePieces(VecTy, NarrowVecTy, GCDTy, VecParts,</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;                                    TargetOpcode::G_ANYEXT);</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160; </div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;    <span class="keywordtype">unsigned</span> NewNumElts = NarrowVecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160; </div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Idx);</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    int64_t PartIdx = IdxVal / NewNumElts;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    <span class="keyword">auto</span> NewIdx =</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, IdxVal - NewNumElts * PartIdx);</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160; </div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    <span class="keywordflow">if</span> (IsInsert) {</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> PartTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VecParts[PartIdx]);</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160; </div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;      <span class="comment">// Use the adjusted index to insert into one of the subvectors.</span></div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;      <span class="keyword">auto</span> InsertPart = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aca31191486506a279715dd3bf677d75f">buildInsertVectorElement</a>(</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;          PartTy, VecParts[PartIdx], InsertVal, NewIdx);</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;      VecParts[PartIdx] = InsertPart.getReg(0);</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160; </div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;      <span class="comment">// Recombine the inserted subvector with the others to reform the result</span></div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      <span class="comment">// vector.</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      buildWidenedRemergeToDst(DstReg, LCMTy, VecParts);</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7835e6cd3f1b340d3bb617304038d744">buildExtractVectorElement</a>(DstReg, VecParts[PartIdx], NewIdx);</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    }</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160; </div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  }</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160; </div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;  <span class="comment">// With a variable index, we can&#39;t perform the operation in a smaller type, so</span></div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  <span class="comment">// we&#39;re forced to expand this.</span></div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;  <span class="comment">// TODO: We could emit a chain of compare/select to figure out which piece to</span></div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;  <span class="comment">// index.</span></div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a2fdcff9cc28cfffa71717b8d3c32c781">lowerExtractInsertVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;}</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160; </div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04062"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e"> 4062</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">LegalizerHelper::reduceLoadStoreWidth</a>(<a class="code" href="classllvm_1_1GLoadStore.html">GLoadStore</a> &amp;LdStMI, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;                                      <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <span class="comment">// FIXME: Don&#39;t know how to handle secondary types yet.</span></div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160; </div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <span class="comment">// This implementation doesn&#39;t work for atomics. Give up instead of doing</span></div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;  <span class="comment">// something invalid.</span></div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;  <span class="keywordflow">if</span> (LdStMI.<a class="code" href="classllvm_1_1GLoadStore.html#a48eb6042fa9ac09ca019c94be20487f5">isAtomic</a>())</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160; </div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;  <span class="keywordtype">bool</span> IsLoad = isa&lt;GLoad&gt;(LdStMI);</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ValReg = LdStMI.<a class="code" href="classllvm_1_1GenericMachineInstr.html#a2cdf10ff4f5fb865c6a669331aeb5846">getReg</a>(0);</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AddrReg = LdStMI.<a class="code" href="classllvm_1_1GLoadStore.html#a0a7fb170c5d3165c1a9f3cf5fee5b4ca">getPointerReg</a>();</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ValTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(ValReg);</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160; </div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;  <span class="comment">// FIXME: Do we need a distinct NarrowMemory legalize action?</span></div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;  <span class="keywordflow">if</span> (ValTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 8 * LdStMI.<a class="code" href="classllvm_1_1GLoadStore.html#a1833a6824522ac00595a007393c73f61">getMemSize</a>()) {</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t narrow extload/truncstore\n&quot;</span>);</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;  }</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160; </div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;  <span class="keywordtype">int</span> NumParts = -1;</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <span class="keywordtype">int</span> NumLeftover = -1;</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> NarrowRegs, NarrowLeftoverRegs;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  <span class="keywordflow">if</span> (IsLoad) {</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;    std::tie(NumParts, NumLeftover) = <a class="code" href="LegalizerHelper_8cpp.html#a29ab832e2ed35aec5b6f00fbca685e7e">getNarrowTypeBreakDown</a>(ValTy, NarrowTy, LeftoverTy);</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    <span class="keywordflow">if</span> (extractParts(ValReg, ValTy, NarrowTy, LeftoverTy, NarrowRegs,</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                     NarrowLeftoverRegs)) {</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;      NumParts = NarrowRegs.size();</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      NumLeftover = NarrowLeftoverRegs.size();</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    }</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;  }</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160; </div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;  <span class="keywordflow">if</span> (NumParts == -1)</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160; </div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(AddrReg);</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> OffsetTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160; </div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <span class="keywordtype">unsigned</span> TotalSize = ValTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160; </div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;  <span class="comment">// Split the load/store into PartTy sized pieces starting at Offset. If this</span></div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;  <span class="comment">// is a load, return the new registers in ValRegs. For a store, each elements</span></div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  <span class="comment">// of ValRegs should be PartTy. Returns the next offset that needs to be</span></div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;  <span class="comment">// handled.</span></div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">isBigEndian</a>();</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;  <span class="keyword">auto</span> MMO = LdStMI.<a class="code" href="classllvm_1_1GLoadStore.html#a2aaf791aa3564d53adefabc2e145234c">getMMO</a>();</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  <span class="keyword">auto</span> splitTypePieces = [=](<a class="code" href="classllvm_1_1LLT.html">LLT</a> PartTy, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;ValRegs,</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;                             <span class="keywordtype">unsigned</span> NumParts, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) -&gt; <span class="keywordtype">unsigned</span> {</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;    <span class="keywordtype">unsigned</span> PartSize = PartTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = NumParts; Idx != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt; TotalSize;</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;         ++Idx) {</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;      <span class="keywordtype">unsigned</span> ByteOffset = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> / 8;</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> NewAddrReg;</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160; </div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0f2bb4d63ad6914f3783967bf881a14b">materializePtrAdd</a>(NewAddrReg, AddrReg, OffsetTy, ByteOffset);</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160; </div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;      <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *NewMMO =</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(&amp;MMO, ByteOffset, PartTy);</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160; </div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;      <span class="keywordflow">if</span> (IsLoad) {</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(PartTy);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;        ValRegs.push_back(Dst);</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(Dst, NewAddrReg, *NewMMO);</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(ValRegs[Idx], NewAddrReg, *NewMMO);</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;      }</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a> ? <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> - PartSize : <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + PartSize;</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;    }</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160; </div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;  };</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160; </div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a> ? TotalSize - NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() : 0;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;  <span class="keywordtype">unsigned</span> HandledOffset =</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;      splitTypePieces(NarrowTy, NarrowRegs, NumParts, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160; </div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;  <span class="comment">// Handle the rest of the register if this isn&#39;t an even type breakdown.</span></div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;  <span class="keywordflow">if</span> (LeftoverTy.<a class="code" href="classllvm_1_1LLT.html#a69fb30748f1b3e8a0affd486a9f59f6d">isValid</a>())</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;    splitTypePieces(LeftoverTy, NarrowLeftoverRegs, NumLeftover, HandledOffset);</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160; </div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;  <span class="keywordflow">if</span> (IsLoad) {</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    insertParts(ValReg, ValTy, NarrowTy, NarrowRegs,</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;                LeftoverTy, NarrowLeftoverRegs);</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;  }</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160; </div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;  LdStMI.<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;}</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160; </div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04157"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aa8fe481cda91a90b364e410009785003"> 4157</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aa8fe481cda91a90b364e410009785003">LegalizerHelper::fewerElementsVector</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                                     <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  <span class="keyword">using namespace </span>TargetOpcode;</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;  <a class="code" href="classllvm_1_1GenericMachineInstr.html">GenericMachineInstr</a> &amp;GMI = cast&lt;GenericMachineInstr&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() : 1;</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160; </div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;  <span class="keywordflow">case</span> G_IMPLICIT_DEF:</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;  <span class="keywordflow">case</span> G_TRUNC:</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;  <span class="keywordflow">case</span> G_AND:</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;  <span class="keywordflow">case</span> G_OR:</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  <span class="keywordflow">case</span> G_XOR:</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;  <span class="keywordflow">case</span> G_ADD:</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;  <span class="keywordflow">case</span> G_SUB:</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;  <span class="keywordflow">case</span> G_MUL:</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;  <span class="keywordflow">case</span> G_PTR_ADD:</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;  <span class="keywordflow">case</span> G_SMULH:</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;  <span class="keywordflow">case</span> G_UMULH:</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;  <span class="keywordflow">case</span> G_FADD:</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;  <span class="keywordflow">case</span> G_FMUL:</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  <span class="keywordflow">case</span> G_FSUB:</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;  <span class="keywordflow">case</span> G_FNEG:</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;  <span class="keywordflow">case</span> G_FABS:</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;  <span class="keywordflow">case</span> G_FCANONICALIZE:</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;  <span class="keywordflow">case</span> G_FDIV:</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;  <span class="keywordflow">case</span> G_FREM:</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;  <span class="keywordflow">case</span> G_FMA:</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;  <span class="keywordflow">case</span> G_FMAD:</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;  <span class="keywordflow">case</span> G_FPOW:</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  <span class="keywordflow">case</span> G_FEXP:</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;  <span class="keywordflow">case</span> G_FEXP2:</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;  <span class="keywordflow">case</span> G_FLOG:</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;  <span class="keywordflow">case</span> G_FLOG2:</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;  <span class="keywordflow">case</span> G_FLOG10:</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;  <span class="keywordflow">case</span> G_FNEARBYINT:</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;  <span class="keywordflow">case</span> G_FCEIL:</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;  <span class="keywordflow">case</span> G_FFLOOR:</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  <span class="keywordflow">case</span> G_FRINT:</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;  <span class="keywordflow">case</span> G_INTRINSIC_ROUND:</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  <span class="keywordflow">case</span> G_INTRINSIC_ROUNDEVEN:</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;  <span class="keywordflow">case</span> G_INTRINSIC_TRUNC:</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  <span class="keywordflow">case</span> G_FCOS:</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;  <span class="keywordflow">case</span> G_FSIN:</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <span class="keywordflow">case</span> G_FSQRT:</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <span class="keywordflow">case</span> G_BSWAP:</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  <span class="keywordflow">case</span> G_BITREVERSE:</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  <span class="keywordflow">case</span> G_SDIV:</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;  <span class="keywordflow">case</span> G_UDIV:</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <span class="keywordflow">case</span> G_SREM:</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  <span class="keywordflow">case</span> G_UREM:</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;  <span class="keywordflow">case</span> G_SDIVREM:</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;  <span class="keywordflow">case</span> G_UDIVREM:</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;  <span class="keywordflow">case</span> G_SMIN:</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;  <span class="keywordflow">case</span> G_SMAX:</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;  <span class="keywordflow">case</span> G_UMIN:</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;  <span class="keywordflow">case</span> G_UMAX:</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;  <span class="keywordflow">case</span> G_ABS:</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;  <span class="keywordflow">case</span> G_FMINNUM:</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;  <span class="keywordflow">case</span> G_FMAXNUM:</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;  <span class="keywordflow">case</span> G_FMINNUM_IEEE:</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;  <span class="keywordflow">case</span> G_FMAXNUM_IEEE:</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;  <span class="keywordflow">case</span> G_FMINIMUM:</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;  <span class="keywordflow">case</span> G_FMAXIMUM:</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;  <span class="keywordflow">case</span> G_FSHL:</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;  <span class="keywordflow">case</span> G_FSHR:</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;  <span class="keywordflow">case</span> G_ROTL:</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;  <span class="keywordflow">case</span> G_ROTR:</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  <span class="keywordflow">case</span> G_FREEZE:</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;  <span class="keywordflow">case</span> G_SADDSAT:</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  <span class="keywordflow">case</span> G_SSUBSAT:</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;  <span class="keywordflow">case</span> G_UADDSAT:</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;  <span class="keywordflow">case</span> G_USUBSAT:</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;  <span class="keywordflow">case</span> G_UMULO:</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;  <span class="keywordflow">case</span> G_SMULO:</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;  <span class="keywordflow">case</span> G_SHL:</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;  <span class="keywordflow">case</span> G_LSHR:</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  <span class="keywordflow">case</span> G_ASHR:</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;  <span class="keywordflow">case</span> G_SSHLSAT:</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;  <span class="keywordflow">case</span> G_USHLSAT:</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;  <span class="keywordflow">case</span> G_CTLZ:</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;  <span class="keywordflow">case</span> G_CTLZ_ZERO_UNDEF:</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  <span class="keywordflow">case</span> G_CTTZ:</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;  <span class="keywordflow">case</span> G_CTTZ_ZERO_UNDEF:</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;  <span class="keywordflow">case</span> G_CTPOP:</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;  <span class="keywordflow">case</span> G_FCOPYSIGN:</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  <span class="keywordflow">case</span> G_ZEXT:</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  <span class="keywordflow">case</span> G_SEXT:</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  <span class="keywordflow">case</span> G_ANYEXT:</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;  <span class="keywordflow">case</span> G_FPEXT:</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <span class="keywordflow">case</span> G_FPTRUNC:</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;  <span class="keywordflow">case</span> G_SITOFP:</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;  <span class="keywordflow">case</span> G_UITOFP:</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;  <span class="keywordflow">case</span> G_FPTOSI:</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  <span class="keywordflow">case</span> G_FPTOUI:</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;  <span class="keywordflow">case</span> G_INTTOPTR:</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;  <span class="keywordflow">case</span> G_PTRTOINT:</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;  <span class="keywordflow">case</span> G_ADDRSPACE_CAST:</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;  <span class="keywordflow">case</span> G_UADDO:</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;  <span class="keywordflow">case</span> G_USUBO:</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;  <span class="keywordflow">case</span> G_UADDE:</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  <span class="keywordflow">case</span> G_USUBE:</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;  <span class="keywordflow">case</span> G_SADDO:</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;  <span class="keywordflow">case</span> G_SSUBO:</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  <span class="keywordflow">case</span> G_SADDE:</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;  <span class="keywordflow">case</span> G_SSUBE:</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;  <span class="keywordflow">case</span> G_STRICT_FADD:</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="keywordflow">case</span> G_STRICT_FSUB:</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;  <span class="keywordflow">case</span> G_STRICT_FMUL:</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;  <span class="keywordflow">case</span> G_STRICT_FMA:</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">fewerElementsVectorMultiEltType</a>(GMI, NumElts);</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;  <span class="keywordflow">case</span> G_ICMP:</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;  <span class="keywordflow">case</span> G_FCMP:</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">fewerElementsVectorMultiEltType</a>(GMI, NumElts, {1 <span class="comment">/*cpm predicate*/</span>});</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;  <span class="keywordflow">case</span> G_IS_FPCLASS:</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">fewerElementsVectorMultiEltType</a>(GMI, NumElts, {2, 3 <span class="comment">/*mask,fpsem*/</span>});</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;  <span class="keywordflow">case</span> G_SELECT:</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">fewerElementsVectorMultiEltType</a>(GMI, NumElts);</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">fewerElementsVectorMultiEltType</a>(GMI, NumElts, {1 <span class="comment">/*scalar cond*/</span>});</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;  <span class="keywordflow">case</span> G_PHI:</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a60e4161d46b020a55403acd13e31df9a">fewerElementsVectorPhi</a>(GMI, NumElts);</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;  <span class="keywordflow">case</span> G_UNMERGE_VALUES:</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#abce993680c63fae7b6cc5814e9b07826">fewerElementsVectorUnmergeValues</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;  <span class="keywordflow">case</span> G_BUILD_VECTOR:</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0 &amp;&amp; <span class="stringliteral">&quot;not a vector type index&quot;</span>);</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#abb2458b37415bd3ed547b405507ebc6b">fewerElementsVectorMerge</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;  <span class="keywordflow">case</span> G_CONCAT_VECTORS:</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1) <span class="comment">// TODO: This probably does work as expected already.</span></div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#abb2458b37415bd3ed547b405507ebc6b">fewerElementsVectorMerge</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;  <span class="keywordflow">case</span> G_EXTRACT_VECTOR_ELT:</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;  <span class="keywordflow">case</span> G_INSERT_VECTOR_ELT:</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#ae18cc835581a3f8882d7725891b67e4e">fewerElementsVectorExtractInsertVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;  <span class="keywordflow">case</span> G_LOAD:</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;  <span class="keywordflow">case</span> G_STORE:</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">reduceLoadStoreWidth</a>(cast&lt;GLoadStore&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>), TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;  <span class="keywordflow">case</span> G_SEXT_INREG:</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">fewerElementsVectorMultiEltType</a>(GMI, NumElts, {2 <span class="comment">/*imm*/</span>});</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  <a class="code" href="CodeGen_2GlobalISel_2Utils_8h.html#a42d8e909f2bea1119192cca95df057fa">GISEL_VECREDUCE_CASES_NONSEQ</a></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#addd0c111e12b07d02698a1fdcba59b0d">fewerElementsVectorReductions</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;  <span class="keywordflow">case</span> G_SHUFFLE_VECTOR:</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1eac84349f5abc12d101036412730c5c">fewerElementsVectorShuffle</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, NarrowTy);</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;  }</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;}</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160; </div>
<div class="line"><a name="l04304"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a1eac84349f5abc12d101036412730c5c"> 4304</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1eac84349f5abc12d101036412730c5c">LegalizerHelper::fewerElementsVectorShuffle</a>(</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TypeIdx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SHUFFLE_VECTOR);</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160; </div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src2Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getShuffleMask();</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src1Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src1Reg);</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src2Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src2Reg);</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;  <span class="comment">// The shuffle should be canonicalized by now.</span></div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;  <span class="keywordflow">if</span> (DstTy != Src1Ty)</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;  <span class="keywordflow">if</span> (DstTy != Src2Ty)</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160; </div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()))</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160; </div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;  <span class="comment">// We only support splitting a shuffle into 2, so adjust NarrowTy accordingly.</span></div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;  <span class="comment">// Further legalization attempts will be needed to do split further.</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;  NarrowTy =</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;      DstTy.<a class="code" href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">changeElementCount</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ae7510a639ca53c1bfa1c90c6dfc7eb2e">divideCoefficientBy</a>(2));</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;  <span class="keywordtype">unsigned</span> NewElts = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160; </div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> SplitSrc1Regs, SplitSrc2Regs;</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;  extractParts(Src1Reg, NarrowTy, 2, SplitSrc1Regs);</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;  extractParts(Src2Reg, NarrowTy, 2, SplitSrc2Regs);</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Inputs[4] = {SplitSrc1Regs[0], SplitSrc1Regs[1], SplitSrc2Regs[0],</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;                        SplitSrc2Regs[1]};</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160; </div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Hi, Lo;</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160; </div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;  <span class="comment">// If Lo or Hi uses elements from at most two of the four input vectors, then</span></div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;  <span class="comment">// express it as a vector shuffle of those two inputs.  Otherwise extract the</span></div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;  <span class="comment">// input elements by hand and construct the Lo/Hi output using a BUILD_VECTOR.</span></div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 16&gt;</a> Ops;</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="NVVMIntrRange_8cpp.html#a7df34dbf636f2fbbb00f2b86eccdb1eb">High</a> = 0; <a class="code" href="NVVMIntrRange_8cpp.html#a7df34dbf636f2fbbb00f2b86eccdb1eb">High</a> &lt; 2; ++<a class="code" href="NVVMIntrRange_8cpp.html#a7df34dbf636f2fbbb00f2b86eccdb1eb">High</a>) {</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;Output = <a class="code" href="NVVMIntrRange_8cpp.html#a7df34dbf636f2fbbb00f2b86eccdb1eb">High</a> ? Hi : Lo;</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160; </div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <span class="comment">// Build a shuffle mask for the output, discovering on the fly which</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;    <span class="comment">// input vectors to use as shuffle operands (recorded in InputUsed).</span></div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    <span class="comment">// If building a suitable shuffle vector proves too hard, then bail</span></div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;    <span class="comment">// out with useBuildVector set.</span></div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    <span class="keywordtype">unsigned</span> InputUsed[2] = {-1U, -1U}; <span class="comment">// Not yet discovered.</span></div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;    <span class="keywordtype">unsigned</span> FirstMaskIdx = <a class="code" href="NVVMIntrRange_8cpp.html#a7df34dbf636f2fbbb00f2b86eccdb1eb">High</a> * NewElts;</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;    <span class="keywordtype">bool</span> UseBuildVector = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> MaskOffset = 0; MaskOffset &lt; NewElts; ++MaskOffset) {</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      <span class="comment">// The mask element.  This indexes into the input.</span></div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;      <span class="keywordtype">int</span> Idx = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[FirstMaskIdx + MaskOffset];</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160; </div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      <span class="comment">// The input vector this mask element indexes into.</span></div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;      <span class="keywordtype">unsigned</span> Input = (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)Idx / NewElts;</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160; </div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;      <span class="keywordflow">if</span> (Input &gt;= <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(Inputs)) {</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;        <span class="comment">// The mask element does not index into any input vector.</span></div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;        Ops.push_back(-1);</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;      }</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160; </div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;      <span class="comment">// Turn the index into an offset from the start of the input vector.</span></div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;      Idx -= Input * NewElts;</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160; </div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;      <span class="comment">// Find or create a shuffle vector operand to hold this input.</span></div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;      <span class="keywordtype">unsigned</span> OpNo;</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="keywordflow">for</span> (OpNo = 0; OpNo &lt; <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(InputUsed); ++OpNo) {</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;        <span class="keywordflow">if</span> (InputUsed[OpNo] == Input) {</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;          <span class="comment">// This input vector is already an operand.</span></div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InputUsed[OpNo] == -1U) {</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;          <span class="comment">// Create a new operand for this input vector.</span></div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;          InputUsed[OpNo] = Input;</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;        }</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      }</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160; </div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;      <span class="keywordflow">if</span> (OpNo &gt;= <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(InputUsed)) {</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;        <span class="comment">// More than two input vectors used!  Give up on trying to create a</span></div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;        <span class="comment">// shuffle vector.  Insert all elements into a BUILD_VECTOR instead.</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;        UseBuildVector = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;      }</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160; </div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;      <span class="comment">// Add the mask index for the new shuffle vector.</span></div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;      Ops.push_back(Idx + OpNo * NewElts);</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;    }</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160; </div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    <span class="keywordflow">if</span> (UseBuildVector) {</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 16&gt;</a> SVOps;</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160; </div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;      <span class="comment">// Extract the input elements by hand.</span></div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> MaskOffset = 0; MaskOffset &lt; NewElts; ++MaskOffset) {</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;        <span class="comment">// The mask element.  This indexes into the input.</span></div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;        <span class="keywordtype">int</span> Idx = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[FirstMaskIdx + MaskOffset];</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160; </div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;        <span class="comment">// The input vector this mask element indexes into.</span></div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;        <span class="keywordtype">unsigned</span> Input = (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)Idx / NewElts;</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160; </div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;        <span class="keywordflow">if</span> (Input &gt;= <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(Inputs)) {</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;          <span class="comment">// The mask element is &quot;undef&quot; or indexes off the end of the input.</span></div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;          SVOps.push_back(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(EltTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;        }</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160; </div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;        <span class="comment">// Turn the index into an offset from the start of the input vector.</span></div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;        Idx -= Input * NewElts;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160; </div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;        <span class="comment">// Extract the vector element by hand.</span></div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;        SVOps.push_back(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a></div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;                            .buildExtractVectorElement(</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;                                EltTy, Inputs[Input],</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;                                <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), Idx))</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;                            .<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0));</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;      }</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160; </div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;      <span class="comment">// Construct the Lo/Hi output using a G_BUILD_VECTOR.</span></div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      Output = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(NarrowTy, SVOps).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InputUsed[0] == -1U) {</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;      <span class="comment">// No input vectors were used! The result is undefined.</span></div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;      Output = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(NarrowTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> Op0 = Inputs[InputUsed[0]];</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;      <span class="comment">// If only one input was used, use an undefined vector for the other.</span></div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> Op1 = InputUsed[1] == -1U</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;                         ? <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(NarrowTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0)</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;                         : Inputs[InputUsed[1]];</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;      <span class="comment">// At least one input vector was used. Create a new shuffle vector.</span></div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;      Output = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aded2b440bea348970816da1ecd40f2c1">buildShuffleVector</a>(NarrowTy, Op0, Op1, Ops).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;    }</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160; </div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;  }</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160; </div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">buildConcatVectors</a>(DstReg, {Lo, Hi});</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;}</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160; </div>
<div class="line"><a name="l04446"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a4df0dbd10ced1d274a13b702816d3903"> 4446</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LegalizerHelper_8cpp.html#a4df0dbd10ced1d274a13b702816d3903">getScalarOpcForReduction</a>(<span class="keywordtype">unsigned</span> Opc) {</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;  <span class="keywordtype">unsigned</span> ScalarOpc;</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_FADD:</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    ScalarOpc = TargetOpcode::G_FADD;</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_FMUL:</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;    ScalarOpc = TargetOpcode::G_FMUL;</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_FMAX:</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;    ScalarOpc = TargetOpcode::G_FMAXNUM;</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_FMIN:</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;    ScalarOpc = TargetOpcode::G_FMINNUM;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_ADD:</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;    ScalarOpc = TargetOpcode::G_ADD;</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_MUL:</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    ScalarOpc = TargetOpcode::G_MUL;</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_AND:</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    ScalarOpc = TargetOpcode::G_AND;</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_OR:</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    ScalarOpc = TargetOpcode::G_OR;</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_XOR:</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    ScalarOpc = TargetOpcode::G_XOR;</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_SMAX:</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    ScalarOpc = TargetOpcode::G_SMAX;</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_SMIN:</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;    ScalarOpc = TargetOpcode::G_SMIN;</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_UMAX:</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;    ScalarOpc = TargetOpcode::G_UMAX;</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_VECREDUCE_UMIN:</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    ScalarOpc = TargetOpcode::G_UMIN;</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled reduction&quot;</span>);</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;  }</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;  <span class="keywordflow">return</span> ScalarOpc;</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;}</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160; </div>
<div class="line"><a name="l04494"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#addd0c111e12b07d02698a1fdcba59b0d"> 4494</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#addd0c111e12b07d02698a1fdcba59b0d">LegalizerHelper::fewerElementsVectorReductions</a>(</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TypeIdx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Opc != TargetOpcode::G_VECREDUCE_SEQ_FADD &amp;&amp;</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;         Opc != TargetOpcode::G_VECREDUCE_SEQ_FMUL &amp;&amp;</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;         <span class="stringliteral">&quot;Sequential reductions not expected&quot;</span>);</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160; </div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160; </div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;  <span class="comment">// The semantics of the normal non-sequential reductions allow us to freely</span></div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;  <span class="comment">// re-associate the operation.</span></div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160; </div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;  <span class="keywordflow">if</span> (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp;</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;      (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() % NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() != 0))</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160; </div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;  <span class="keywordtype">unsigned</span> ScalarOpc = <a class="code" href="LegalizerHelper_8cpp.html#a4df0dbd10ced1d274a13b702816d3903">getScalarOpcForReduction</a>(Opc);</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> SplitSrcs;</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;  <span class="comment">// If NarrowTy is a scalar then we&#39;re being asked to scalarize.</span></div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumParts =</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;      NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() / NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;                          : SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160; </div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;  extractParts(SrcReg, NarrowTy, NumParts, SplitSrcs);</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;  <span class="keywordflow">if</span> (NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;    <span class="keywordflow">if</span> (DstTy != NarrowTy)</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>; <span class="comment">// FIXME: handle implicit extensions.</span></div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160; </div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NumParts)) {</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;      <span class="comment">// Generate a tree of scalar operations to reduce the critical path.</span></div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> PartialResults;</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      <span class="keywordtype">unsigned</span> NumPartsLeft = NumParts;</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <span class="keywordflow">while</span> (NumPartsLeft &gt; 1) {</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx &lt; NumPartsLeft - 1; Idx += 2) {</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;          PartialResults.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;              <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a></div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;                  .buildInstr(ScalarOpc, {NarrowTy},</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;                              {SplitSrcs[Idx], SplitSrcs[Idx + 1]})</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;                  .<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0));</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;        }</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;        SplitSrcs = PartialResults;</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;        PartialResults.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;        NumPartsLeft = SplitSrcs.size();</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;      }</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SplitSrcs.size() == 1);</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(DstReg, SplitSrcs[0]);</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    }</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="comment">// If we can&#39;t generate a tree, then just do sequential operations.</span></div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Acc = SplitSrcs[0];</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 1; Idx &lt; NumParts; ++Idx)</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;      Acc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ScalarOpc, {NarrowTy}, {Acc, SplitSrcs[Idx]})</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(DstReg, Acc);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;  }</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> PartialReductions;</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 0; Part &lt; NumParts; ++Part) {</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;    PartialReductions.push_back(</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opc, {DstTy}, {SplitSrcs[Part]}).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  }</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160; </div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160; </div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;  <span class="comment">// If the types involved are powers of 2, we can generate intermediate vector</span></div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;  <span class="comment">// ops, before generating a final reduction operation.</span></div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()) &amp;&amp;</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;      <a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>())) {</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    <span class="keywordflow">return</span> tryNarrowPow2Reduction(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, SrcReg, SrcTy, NarrowTy, ScalarOpc);</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;  }</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160; </div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Acc = PartialReductions[0];</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Part = 1; Part &lt; NumParts; ++Part) {</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;    <span class="keywordflow">if</span> (Part == NumParts - 1) {</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ScalarOpc, {DstReg},</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;                            {Acc, PartialReductions[Part]});</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;      Acc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a></div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;                .<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ScalarOpc, {DstTy}, {Acc, PartialReductions[Part]})</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;                .<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;    }</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;  }</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;}</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160; </div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;LegalizerHelper::tryNarrowPow2Reduction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg,</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;                                        <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy,</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;                                        <span class="keywordtype">unsigned</span> ScalarOpc) {</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> SplitSrcs;</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;  <span class="comment">// Split the sources into NarrowTy size pieces.</span></div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;  extractParts(SrcReg, NarrowTy,</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;               SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() / NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>(), SplitSrcs);</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;  <span class="comment">// We&#39;re going to do a tree reduction using vector operations until we have</span></div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;  <span class="comment">// one NarrowTy size value left.</span></div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;  <span class="keywordflow">while</span> (SplitSrcs.size() &gt; 1) {</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register&gt;</a> PartialRdxs;</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx &lt; SplitSrcs.size()-1; Idx += 2) {</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = SplitSrcs[Idx];</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = SplitSrcs[Idx + 1];</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      <span class="comment">// Create the intermediate vector op.</span></div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> Res =</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ScalarOpc, {NarrowTy}, {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;      PartialRdxs.push_back(Res);</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;    }</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;    SplitSrcs = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(PartialRdxs);</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;  }</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;  <span class="comment">// Finally generate the requested NarrowTy based reduction.</span></div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(SplitSrcs[0]);</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;}</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160; </div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04616"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a79ab7155d5feabf02f01c4d3b7d9c422"> 4616</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a79ab7155d5feabf02f01c4d3b7d9c422">LegalizerHelper::narrowScalarShiftByConstant</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Amt,</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> HalfTy, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> AmtTy) {</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160; </div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InL = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(HalfTy);</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InH = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(HalfTy);</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>({InL, InH}, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160; </div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;  <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>()) {</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), {InL, InH});</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;  }</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160; </div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NVT = HalfTy;</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;  <span class="keywordtype">unsigned</span> NVTBits = HalfTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;  <span class="keywordtype">unsigned</span> VTBits = 2 * NVTBits;</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160; </div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;  <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> Lo(<a class="code" href="classllvm_1_1Register.html">Register</a>(0)), Hi(<a class="code" href="classllvm_1_1Register.html">Register</a>(0));</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SHL) {</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;    <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(VTBits)) {</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;      Lo = Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NVT, 0);</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(NVTBits)) {</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NVT, 0);</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(NVT, InL,</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;                               <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt - NVTBits));</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Amt == NVTBits) {</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NVT, 0);</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;      Hi = InL;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(NVT, InL, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt));</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;      <span class="keyword">auto</span> OrLHS =</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(NVT, InH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt));</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;      <span class="keyword">auto</span> OrRHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;          NVT, InL, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, -Amt + NVTBits));</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NVT, OrLHS, OrRHS);</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;    }</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_LSHR) {</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;    <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(VTBits)) {</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;      Lo = Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NVT, 0);</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(NVTBits)) {</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(NVT, InH,</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;                                <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt - NVTBits));</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NVT, 0);</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Amt == NVTBits) {</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;      Lo = InH;</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(NVT, 0);</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;      <span class="keyword">auto</span> ShiftAmtConst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt);</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160; </div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;      <span class="keyword">auto</span> OrLHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(NVT, InL, ShiftAmtConst);</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;      <span class="keyword">auto</span> OrRHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;          NVT, InH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, -Amt + NVTBits));</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160; </div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NVT, OrLHS, OrRHS);</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(NVT, InH, ShiftAmtConst);</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;    }</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;    <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(VTBits)) {</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;      Hi = Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;          NVT, InH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, NVTBits - 1));</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Amt.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(NVTBits)) {</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(NVT, InH,</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;                                <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt - NVTBits));</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(NVT, InH,</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;                                <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, NVTBits - 1));</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Amt == NVTBits) {</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;      Lo = InH;</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(NVT, InH,</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;                                <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, NVTBits - 1));</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;      <span class="keyword">auto</span> ShiftAmtConst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, Amt);</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160; </div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;      <span class="keyword">auto</span> OrLHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(NVT, InL, ShiftAmtConst);</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;      <span class="keyword">auto</span> OrRHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;          NVT, InH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, -Amt + NVTBits));</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160; </div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NVT, OrLHS, OrRHS);</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(NVT, InH, ShiftAmtConst);</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;    }</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  }</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160; </div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), {Lo, Hi});</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160; </div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;}</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160; </div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;<span class="comment">// TODO: Optimize if constant shift amount.</span></div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04705"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a2f99d62852a3fab708983d8ea2139755"> 4705</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a2f99d62852a3fab708983d8ea2139755">LegalizerHelper::narrowScalarShift</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;                                   <a class="code" href="classllvm_1_1LLT.html">LLT</a> RequestedTy) {</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;  <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a">narrowScalarSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, RequestedTy, 2);</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;  }</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160; </div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160; </div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Amt = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ShiftAmtTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Amt);</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstEltSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;  <span class="keywordflow">if</span> (DstEltSize % 2 != 0)</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160; </div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;  <span class="comment">// Ignore the input type. We can only go to exactly half the size of the</span></div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;  <span class="comment">// input. If that isn&#39;t small enough, the resulting pieces will be further</span></div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;  <span class="comment">// legalized.</span></div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NewBitSize = DstEltSize / 2;</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> HalfTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(NewBitSize);</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> CondTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160; </div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> VRegAndVal = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Amt, MRI)) {</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a79ab7155d5feabf02f01c4d3b7d9c422">narrowScalarShiftByConstant</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, VRegAndVal-&gt;Value, HalfTy,</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;                                       ShiftAmtTy);</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;  }</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160; </div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;  <span class="comment">// TODO: Expand with known bits.</span></div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160; </div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;  <span class="comment">// Handle the fully general expansion by an unknown amount.</span></div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;  <span class="keyword">auto</span> NewBits = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShiftAmtTy, NewBitSize);</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160; </div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InL = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(HalfTy);</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InH = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(HalfTy);</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>({InL, InH}, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160; </div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;  <span class="keyword">auto</span> AmtExcess = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(ShiftAmtTy, Amt, NewBits);</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;  <span class="keyword">auto</span> AmtLack = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(ShiftAmtTy, NewBits, Amt);</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160; </div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShiftAmtTy, 0);</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;  <span class="keyword">auto</span> IsShort = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, CondTy, Amt, NewBits);</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;  <span class="keyword">auto</span> IsZero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, CondTy, Amt, Zero);</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160; </div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ResultRegs[2];</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SHL: {</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;    <span class="comment">// Short: ShAmt &lt; NewBitSize</span></div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;    <span class="keyword">auto</span> LoS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(HalfTy, InL, Amt);</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160; </div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;    <span class="keyword">auto</span> LoOr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(HalfTy, InL, AmtLack);</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;    <span class="keyword">auto</span> HiOr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(HalfTy, InH, Amt);</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    <span class="keyword">auto</span> HiS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(HalfTy, LoOr, HiOr);</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160; </div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;    <span class="comment">// Long: ShAmt &gt;= NewBitSize</span></div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;    <span class="keyword">auto</span> LoL = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(HalfTy, 0);         <span class="comment">// Lo part is zero.</span></div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;    <span class="keyword">auto</span> HiL = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(HalfTy, InL, AmtExcess); <span class="comment">// Hi from Lo part.</span></div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160; </div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    <span class="keyword">auto</span> Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(HalfTy, IsShort, LoS, LoL);</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;    <span class="keyword">auto</span> Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;        HalfTy, IsZero, InH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(HalfTy, IsShort, HiS, HiL));</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160; </div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;    ResultRegs[0] = Lo.getReg(0);</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    ResultRegs[1] = Hi.getReg(0);</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  }</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LSHR:</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ASHR: {</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <span class="comment">// Short: ShAmt &lt; NewBitSize</span></div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    <span class="keyword">auto</span> HiS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), {HalfTy}, {InH, Amt});</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160; </div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;    <span class="keyword">auto</span> LoOr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(HalfTy, InL, Amt);</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    <span class="keyword">auto</span> HiOr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(HalfTy, InH, AmtLack);</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;    <span class="keyword">auto</span> LoS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(HalfTy, LoOr, HiOr);</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160; </div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <span class="comment">// Long: ShAmt &gt;= NewBitSize</span></div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> HiL;</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_LSHR) {</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;      HiL = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(HalfTy, 0);            <span class="comment">// Hi part is zero.</span></div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;      <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShiftAmtTy, NewBitSize - 1);</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;      HiL = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(HalfTy, InH, ShiftAmt);    <span class="comment">// Sign of Hi part.</span></div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;    }</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    <span class="keyword">auto</span> LoL = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), {HalfTy},</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;                                     {InH, AmtExcess});     <span class="comment">// Lo from Hi part.</span></div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160; </div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;    <span class="keyword">auto</span> Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;        HalfTy, IsZero, InL, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(HalfTy, IsShort, LoS, LoL));</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160; </div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    <span class="keyword">auto</span> Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(HalfTy, IsShort, HiS, HiL);</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160; </div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;    ResultRegs[0] = Lo.getReg(0);</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    ResultRegs[1] = Hi.getReg(0);</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;  }</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;not a shift&quot;</span>);</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;  }</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160; </div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, ResultRegs);</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;}</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160; </div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04814"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a98e3f12f0b3d7f35251e1e71336b480c"> 4814</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a98e3f12f0b3d7f35251e1e71336b480c">LegalizerHelper::moreElementsVectorPhi</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;                                       <a class="code" href="classllvm_1_1LLT.html">LLT</a> MoreTy) {</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TypeIdx == 0 &amp;&amp; <span class="stringliteral">&quot;Expecting only Idx 0&quot;</span>);</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160; </div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> += 2) {</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;OpMBB = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1).getMBB();</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(OpMBB, OpMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>());</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;  }</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160; </div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, --<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">getFirstNonPHI</a>());</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;}</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160; </div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04833"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a2ffccbb574e8a2cf63b8ede89f53090b"> 4833</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a2ffccbb574e8a2cf63b8ede89f53090b">LegalizerHelper::moreElementsVector</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;                                    <a class="code" href="classllvm_1_1LLT.html">LLT</a> MoreTy) {</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_IMPLICIT_DEF:</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD: {</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;  }</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STORE:</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_AND:</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_OR:</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_XOR:</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ADD:</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SUB:</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MUL:</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FADD:</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMUL:</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDSAT:</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBSAT:</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDSAT:</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBSAT:</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMIN:</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMAX:</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMIN:</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMAX:</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM:</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM:</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM_IEEE:</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM_IEEE:</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINIMUM:</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXIMUM:</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STRICT_FADD:</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STRICT_FSUB:</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STRICT_FMUL: {</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 1);</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 2);</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;  }</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMA:</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_STRICT_FMA:</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSHR:</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSHL: {</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 1);</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 2);</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 3);</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;  }</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT:</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 1);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT:</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREEZE:</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FNEG:</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FABS:</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BSWAP:</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCANONICALIZE:</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXT_INREG:</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 1);</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SELECT: {</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CondReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> CondTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(CondReg);</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;    <span class="keywordflow">if</span> (TypeIdx == 1) {</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      <span class="keywordflow">if</span> (!CondTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() ||</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;          DstTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>() != MoreTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>())</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;      <span class="comment">// This is turning a scalar select of vectors into a vector</span></div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;      <span class="comment">// select. Broadcast the select condition.</span></div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;      <span class="keyword">auto</span> ShufSplat = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a43b43271e5bcbbc5cc620b4dfa94937a">buildShuffleSplat</a>(MoreTy, CondReg);</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(ShufSplat.getReg(0));</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;    }</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160; </div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;    <span class="keywordflow">if</span> (CondTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160; </div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 2);</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 3);</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;  }</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UNMERGE_VALUES:</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_PHI:</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a98e3f12f0b3d7f35251e1e71336b480c">moreElementsVectorPhi</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, MoreTy);</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SHUFFLE_VECTOR:</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a1a3548d0921506d0cd736b7960c12485">moreElementsVectorShuffle</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TypeIdx, MoreTy);</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BUILD_VECTOR: {</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SrcOp, 8&gt;</a> Elts;</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.uses()) {</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      Elts.push_back(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getReg());</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;    }</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160; </div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Elts.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; MoreTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;      Elts.push_back(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(MoreTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>()));</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;    }</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160; </div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad68c3cafb2cc7ee28ee3c7dff2a45f2e">buildDeleteTrailingVectorElements</a>(</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(Opc, {MoreTy}, Elts));</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;  }</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_TRUNC: {</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 1);</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;  }</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  }</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;}</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;<span class="comment">/// Expand source vectors to the size of destination vector.</span></div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l04982"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a8b4f9b4a8d23929cd5399ad0f005344e"> 4982</a></span>&#160;<a class="code" href="LegalizerHelper_8cpp.html#a8b4f9b4a8d23929cd5399ad0f005344e">equalizeVectorShuffleLengths</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>) {</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;MRI = *<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>();</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160; </div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getShuffleMask();</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;  <span class="keywordtype">unsigned</span> MaskNumElts = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.size();</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;  <span class="keywordtype">unsigned</span> SrcNumElts = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DestEltTy = DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160; </div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;  <span class="comment">// TODO: Normalize the shuffle vector since mask and vector length don&#39;t</span></div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;  <span class="comment">// match.</span></div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;  <span class="keywordflow">if</span> (MaskNumElts &lt;= SrcNumElts) {</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;    <span class="keywordflow">return</span> LegalizerHelper::LegalizeResult::UnableToLegalize;</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;  }</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160; </div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;  <span class="keywordtype">unsigned</span> PaddedMaskNumElts = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(MaskNumElts, SrcNumElts);</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;  <span class="keywordtype">unsigned</span> NumConcat = PaddedMaskNumElts / SrcNumElts;</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PaddedTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(PaddedMaskNumElts, DestEltTy);</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160; </div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  <span class="comment">// Create new source vectors by concatenating the initial</span></div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;  <span class="comment">// source vectors with undefined vectors of the same size.</span></div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(SrcTy);</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> MOps1(NumConcat, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>.getReg(0));</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> MOps2(NumConcat, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>.getReg(0));</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;  MOps1[0] = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;  MOps2[0] = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160; </div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;  <span class="keyword">auto</span> Src1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">buildConcatVectors</a>(PaddedTy, MOps1);</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;  <span class="keyword">auto</span> Src2 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">buildConcatVectors</a>(PaddedTy, MOps2);</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160; </div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;  <span class="comment">// Readjust mask for new input vector length.</span></div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> MappedOps(PaddedMaskNumElts, -1);</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != MaskNumElts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;    <span class="keywordtype">int</span> Idx = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <span class="keywordflow">if</span> (Idx &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(SrcNumElts))</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;      Idx += PaddedMaskNumElts - SrcNumElts;</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;    MappedOps[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = Idx;</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;  }</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160; </div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;  <span class="comment">// If we got more elements than required, extract subvector.</span></div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;  <span class="keywordflow">if</span> (MaskNumElts != PaddedMaskNumElts) {</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a766456df1dd21e804cd4596304e10764ae8b4b40ec3622e371789b790caabc083">Shuffle</a> =</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aded2b440bea348970816da1ecd40f2c1">buildShuffleVector</a>(PaddedTy, Src1, Src2, MappedOps);</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160; </div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 16&gt;</a> Elts(MaskNumElts);</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; MaskNumElts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;      Elts[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] =</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7e58ecea881b2ea06fee315563860e39">buildExtractVectorElementConstant</a>(DestEltTy, <a class="code" href="namespacellvm.html#a766456df1dd21e804cd4596304e10764ae8b4b40ec3622e371789b790caabc083">Shuffle</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;    }</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(DstReg, Elts);</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aded2b440bea348970816da1ecd40f2c1">buildShuffleVector</a>(DstReg, Src1, Src2, MappedOps);</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;  }</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160; </div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;  <span class="keywordflow">return</span> LegalizerHelper::LegalizeResult::Legalized;</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;}</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160; </div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05044"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a1a3548d0921506d0cd736b7960c12485"> 5044</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a1a3548d0921506d0cd736b7960c12485">LegalizerHelper::moreElementsVectorShuffle</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;                                           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TypeIdx, <a class="code" href="classllvm_1_1LLT.html">LLT</a> MoreTy) {</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src2Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getShuffleMask();</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src1Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src1Reg);</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src2Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src2Reg);</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;  <span class="keywordtype">unsigned</span> WidenNumElts = MoreTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160; </div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; Src1Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp;</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;      DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() &gt; Src1Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()) {</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LegalizerHelper_8cpp.html#a8b4f9b4a8d23929cd5399ad0f005344e">equalizeVectorShuffleLengths</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>);</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  }</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160; </div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160; </div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;  <span class="comment">// Expect a canonicalized shuffle.</span></div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;  <span class="keywordflow">if</span> (DstTy != Src1Ty || DstTy != Src2Ty)</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160; </div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 1);</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">moreElementsVectorSrc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 2);</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160; </div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;  <span class="comment">// Adjust mask based on new input vector length.</span></div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 16&gt;</a> NewMask;</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumElts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;    <span class="keywordtype">int</span> Idx = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(NumElts))</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;      NewMask.push_back(Idx);</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;      NewMask.push_back(Idx - NumElts + WidenNumElts);</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;  }</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = NumElts; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != WidenNumElts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;    NewMask.push_back(-1);</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MoreTy, 0);</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ab24db762f0912a99f1e4d9e44eaeaa44">setInstrAndDebugLoc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aded2b440bea348970816da1ecd40f2c1">buildShuffleVector</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(),</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;                                <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(),</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                                <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), NewMask);</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;}</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160; </div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;<span class="keywordtype">void</span> LegalizerHelper::multiplyRegisters(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;DstRegs,</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;                                        <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Src1Regs,</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;                                        <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Src2Regs,</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;                                        <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;  <span class="keywordtype">unsigned</span> SrcParts = Src1Regs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>();</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;  <span class="keywordtype">unsigned</span> DstParts = DstRegs.size();</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160; </div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;  <span class="keywordtype">unsigned</span> DstIdx = 0; <span class="comment">// Low bits of the result.</span></div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> FactorSum =</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(NarrowTy, Src1Regs[DstIdx], Src2Regs[DstIdx]).getReg(0);</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;  DstRegs[DstIdx] = FactorSum;</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160; </div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;  <span class="keywordtype">unsigned</span> CarrySumPrevDstIdx;</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Factors;</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160; </div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;  <span class="keywordflow">for</span> (DstIdx = 1; DstIdx &lt; DstParts; DstIdx++) {</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;    <span class="comment">// Collect low parts of muls for DstIdx.</span></div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = DstIdx + 1 &lt; SrcParts ? 0 : DstIdx - SrcParts + 1;</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;         <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(DstIdx, SrcParts - 1); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> =</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(NarrowTy, Src1Regs[DstIdx - <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Src2Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;      Factors.push_back(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>.getReg(0));</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;    }</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;    <span class="comment">// Collect high parts of muls from previous DstIdx.</span></div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = DstIdx &lt; SrcParts ? 0 : DstIdx - SrcParts;</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;         <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(DstIdx - 1, SrcParts - 1); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Umulh =</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMulH(NarrowTy, Src1Regs[DstIdx - 1 - <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Src2Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;      Factors.push_back(Umulh.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0));</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    }</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    <span class="comment">// Add CarrySum from additions calculated for previous DstIdx.</span></div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;    <span class="keywordflow">if</span> (DstIdx != 1) {</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;      Factors.push_back(CarrySumPrevDstIdx);</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;    }</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160; </div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CarrySum;</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;    <span class="comment">// Add all factors and accumulate all carries into CarrySum.</span></div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    <span class="keywordflow">if</span> (DstIdx != DstParts - 1) {</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Uaddo =</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAddo(NarrowTy, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Factors[0], Factors[1]);</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;      FactorSum = Uaddo.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;      CarrySum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildZExt(NarrowTy, Uaddo.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(1)).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Factors.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;        <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Uaddo =</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAddo(NarrowTy, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), FactorSum, Factors[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;        FactorSum = Uaddo.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;        <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Carry = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildZExt(NarrowTy, Uaddo.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(1));</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;        CarrySum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(NarrowTy, CarrySum, Carry).getReg(0);</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;      }</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      <span class="comment">// Since value for the next index is not calculated, neither is CarrySum.</span></div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      FactorSum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(NarrowTy, Factors[0], Factors[1]).getReg(0);</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Factors.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;        FactorSum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(NarrowTy, FactorSum, Factors[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]).getReg(0);</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;    }</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160; </div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;    CarrySumPrevDstIdx = CarrySum;</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    DstRegs[DstIdx] = FactorSum;</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;    Factors.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;  }</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;}</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160; </div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05155"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aea9d2b3b2a626fb7c5093f5f8fa9cf95"> 5155</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aea9d2b3b2a626fb7c5093f5f8fa9cf95">LegalizerHelper::narrowScalarAddSub</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;                                    <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160; </div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstType = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;  <span class="comment">// FIXME: add support for vector types</span></div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;  <span class="keywordflow">if</span> (DstType.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160; </div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;  <span class="keywordtype">unsigned</span> OpO, OpE, OpF;</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDO:</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDE:</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDO:</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDE:</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ADD:</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;    OpO = TargetOpcode::G_UADDO;</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;    OpE = TargetOpcode::G_UADDE;</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;    OpF = TargetOpcode::G_UADDE;</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;    <span class="keywordflow">if</span> (Opcode == TargetOpcode::G_SADDO || Opcode == TargetOpcode::G_SADDE)</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;      OpF = TargetOpcode::G_SADDE;</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBO:</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBE:</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBO:</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBE:</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SUB:</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;    OpO = TargetOpcode::G_USUBO;</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;    OpE = TargetOpcode::G_USUBE;</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;    OpF = TargetOpcode::G_USUBE;</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;    <span class="keywordflow">if</span> (Opcode == TargetOpcode::G_SSUBO || Opcode == TargetOpcode::G_SSUBE)</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;      OpF = TargetOpcode::G_SSUBE;</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected add/sub opcode!&quot;</span>);</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;  }</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160; </div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;  <span class="comment">// 1 for a plain add/sub, 2 if this is an operation with a carry-out.</span></div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;  <span class="keywordtype">unsigned</span> NumDefs = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDefs).getReg();</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src2 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDefs + 1).getReg();</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CarryDst, CarryIn;</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;  <span class="keywordflow">if</span> (NumDefs == 2)</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;    CarryDst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumDefs + 3)</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;    CarryIn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDefs + 2).getReg();</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160; </div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> RegTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy, DummyTy;</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Src1Regs, Src2Regs, Src1Left, Src2Left, DstRegs;</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;  extractParts(Src1, RegTy, NarrowTy, LeftoverTy, Src1Regs, Src1Left);</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;  extractParts(Src2, RegTy, NarrowTy, DummyTy, Src2Regs, Src2Left);</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160; </div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;  <span class="keywordtype">int</span> NarrowParts = Src1Regs.size();</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Src1Left.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;    Src1Regs.push_back(Src1Left[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;    Src2Regs.push_back(Src2Left[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;  }</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;  DstRegs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(Src1Regs.size());</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160; </div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = Src1Regs.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg =</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;        MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src1Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> CarryOut = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1));</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;    <span class="comment">// Forward the final carry-out to the destination register</span></div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> - 1 &amp;&amp; CarryDst)</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;      CarryOut = CarryDst;</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160; </div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    <span class="keywordflow">if</span> (!CarryIn) {</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(OpO, {DstReg, CarryOut},</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;                            {Src1Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Src2Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]});</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> - 1) {</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(OpF, {DstReg, CarryOut},</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;                            {Src1Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Src2Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], CarryIn});</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(OpE, {DstReg, CarryOut},</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;                            {Src1Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Src2Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], CarryIn});</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;    }</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160; </div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;    DstRegs.push_back(DstReg);</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;    CarryIn = CarryOut;</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;  }</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;  insertParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), RegTy, NarrowTy,</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;              <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(DstRegs).take_front(NarrowParts), LeftoverTy,</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;              <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(DstRegs).drop_front(NarrowParts));</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160; </div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;}</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160; </div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05249"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a0c0426a2303d102874f24e00608e3de4"> 5249</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a0c0426a2303d102874f24e00608e3de4">LegalizerHelper::narrowScalarMul</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src2 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160; </div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160; </div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;  <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;  <span class="keywordtype">unsigned</span> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;  <span class="keywordflow">if</span> (Size % NarrowSize != 0)</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160; </div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;  <span class="keywordtype">unsigned</span> NumParts = Size / NarrowSize;</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;  <span class="keywordtype">bool</span> IsMulHigh = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_UMULH;</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;  <span class="keywordtype">unsigned</span> DstTmpParts = NumParts * (IsMulHigh ? 2 : 1);</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160; </div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Src1Parts, Src2Parts;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> DstTmpRegs(DstTmpParts);</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;  extractParts(Src1, NarrowTy, NumParts, Src1Parts);</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;  extractParts(Src2, NarrowTy, NumParts, Src2Parts);</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;  multiplyRegisters(DstTmpRegs, Src1Parts, Src2Parts, NarrowTy);</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160; </div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;  <span class="comment">// Take only high half of registers if this is high mul.</span></div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> DstRegs(&amp;DstTmpRegs[DstTmpParts - NumParts], NumParts);</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;}</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160; </div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05281"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a687c20941b83380477f4a3d95ad4e390"> 5281</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a687c20941b83380477f4a3d95ad4e390">LegalizerHelper::narrowScalarFPTOI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;                                   <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160; </div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;  <span class="keywordtype">bool</span> IsSigned = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_FPTOSI;</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160; </div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160; </div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;  <span class="comment">// If all finite floats fit into the narrowed integer type, we can just swap</span></div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;  <span class="comment">// out the result type. This is practically only useful for conversions from</span></div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;  <span class="comment">// half to at least 16-bits, so just handle the one case.</span></div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() != <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) ||</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;      NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; (IsSigned ? 17u : 16u))</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160; </div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4">narrowScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NarrowTy, 0,</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;                  IsSigned ? TargetOpcode::G_SEXT : TargetOpcode::G_ZEXT);</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;}</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160; </div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05306"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aaec7c9b0ed49d3297c833d8d9def42c0"> 5306</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aaec7c9b0ed49d3297c833d8d9def42c0">LegalizerHelper::narrowScalarExtract</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;                                     <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160; </div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160; </div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;  int64_t SizeOp1 = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;  <span class="comment">// FIXME: add support for when SizeOp1 isn&#39;t an exact multiple of</span></div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;  <span class="comment">// NarrowSize.</span></div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;  <span class="keywordflow">if</span> (SizeOp1 % NarrowSize != 0)</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;  <span class="keywordtype">int</span> NumParts = SizeOp1 / NarrowSize;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160; </div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> SrcRegs, DstRegs;</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 2&gt;</a> Indexes;</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;  extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(), NarrowTy, NumParts, SrcRegs);</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160; </div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> OpReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> OpStart = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> OpSize = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(OpReg).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;    <span class="keywordtype">unsigned</span> SrcStart = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> * NarrowSize;</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160; </div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;    <span class="keywordflow">if</span> (SrcStart + NarrowSize &lt;= OpStart || SrcStart &gt;= OpStart + OpSize) {</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;      <span class="comment">// No part of the extract uses this subregister, ignore it.</span></div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SrcStart == OpStart &amp;&amp; NarrowTy == MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(OpReg)) {</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;      <span class="comment">// The entire subregister is extracted, forward the value.</span></div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;      DstRegs.push_back(SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;    }</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160; </div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;    <span class="comment">// OpSegStart is where this destination segment would start in OpReg if it</span></div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;    <span class="comment">// extended infinitely in both directions.</span></div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;    int64_t ExtractOffset;</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SegSize;</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;    <span class="keywordflow">if</span> (OpStart &lt; SrcStart) {</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;      ExtractOffset = 0;</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;      SegSize = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(NarrowSize, OpStart + OpSize - SrcStart);</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;      ExtractOffset = OpStart - SrcStart;</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      SegSize = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(SrcStart + NarrowSize - OpStart, OpSize);</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    }</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160; </div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SegReg = SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;    <span class="keywordflow">if</span> (ExtractOffset != 0 || SegSize != NarrowSize) {</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;      <span class="comment">// A genuine extract is needed.</span></div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;      SegReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SegSize));</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">buildExtract</a>(SegReg, SrcRegs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], ExtractOffset);</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;    }</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160; </div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;    DstRegs.push_back(SegReg);</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;  }</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160; </div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;  <span class="keywordflow">if</span> (MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg).<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DstRegs.size() &gt; 1)</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(DstReg, DstRegs[0]);</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;}</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160; </div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05373"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ad43f277d8baa4b080bfd1beed8542bd6"> 5373</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ad43f277d8baa4b080bfd1beed8542bd6">LegalizerHelper::narrowScalarInsert</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;                                    <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;  <span class="comment">// FIXME: Don&#39;t know how to handle secondary types yet.</span></div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160; </div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> SrcRegs, LeftoverRegs, DstRegs;</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 2&gt;</a> Indexes;</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> RegTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy;</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;  extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(), RegTy, NarrowTy, LeftoverTy, SrcRegs,</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;               LeftoverRegs);</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160; </div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : LeftoverRegs)</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;    SrcRegs.push_back(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160; </div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> OpReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> OpStart = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getImm();</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> OpSize = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(OpReg).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = SrcRegs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    <span class="keywordtype">unsigned</span> DstStart = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> * NarrowSize;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160; </div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    <span class="keywordflow">if</span> (DstStart == OpStart &amp;&amp; NarrowTy == MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(OpReg)) {</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;      <span class="comment">// The entire subregister is defined by this insert, forward the new</span></div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;      <span class="comment">// value.</span></div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;      DstRegs.push_back(OpReg);</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;    }</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160; </div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = SrcRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;    <span class="keywordflow">if</span> (MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]) == LeftoverTy) {</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;      <span class="comment">// The leftover reg is smaller than NarrowTy, so we need to extend it.</span></div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;      SrcReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">buildAnyExt</a>(SrcReg, SrcRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;    }</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160; </div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;    <span class="keywordflow">if</span> (DstStart + NarrowSize &lt;= OpStart || DstStart &gt;= OpStart + OpSize) {</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;      <span class="comment">// No part of the insert affects this subregister, forward the original.</span></div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;      DstRegs.push_back(SrcReg);</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;    }</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160; </div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;    <span class="comment">// OpSegStart is where this destination segment would start in OpReg if it</span></div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;    <span class="comment">// extended infinitely in both directions.</span></div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;    int64_t ExtractOffset, InsertOffset;</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SegSize;</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    <span class="keywordflow">if</span> (OpStart &lt; DstStart) {</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;      InsertOffset = 0;</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;      ExtractOffset = DstStart - OpStart;</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;      SegSize = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(NarrowSize, OpStart + OpSize - DstStart);</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;      InsertOffset = OpStart - DstStart;</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;      ExtractOffset = 0;</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;      SegSize =</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;        <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(NarrowSize - InsertOffset, OpStart + OpSize - DstStart);</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;    }</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160; </div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SegReg = OpReg;</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;    <span class="keywordflow">if</span> (ExtractOffset != 0 || SegSize != OpSize) {</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;      <span class="comment">// A genuine extract is needed.</span></div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;      SegReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SegSize));</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">buildExtract</a>(SegReg, OpReg, ExtractOffset);</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;    }</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(NarrowTy);</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aaf34795e0fa82f3edac1a235f50da4c1">buildInsert</a>(DstReg, SrcReg, SegReg, InsertOffset);</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;    DstRegs.push_back(DstReg);</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;  }</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160; </div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> WideSize = DstRegs.size() * NarrowSize;</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;  <span class="keywordflow">if</span> (WideSize &gt; RegTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> MergeReg = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(WideSize));</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(MergeReg, DstRegs);</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(DstReg, MergeReg);</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, DstRegs);</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160; </div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;}</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160; </div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05457"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a8a4aeb9640ed05629f69b925f53ae366"> 5457</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a8a4aeb9640ed05629f69b925f53ae366">LegalizerHelper::narrowScalarBasic</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;                                   <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160; </div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == 3 &amp;&amp; TypeIdx == 0);</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160; </div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> DstRegs, DstLeftoverRegs;</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Src0Regs, Src0LeftoverRegs;</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Src1Regs, Src1LeftoverRegs;</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy;</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;  <span class="keywordflow">if</span> (!extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg(), DstTy, NarrowTy, LeftoverTy,</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;                    Src0Regs, Src0LeftoverRegs))</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160; </div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Unused;</div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;  <span class="keywordflow">if</span> (!extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), DstTy, NarrowTy, Unused,</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;                    Src1Regs, Src1LeftoverRegs))</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;inconsistent extractParts result&quot;</span>);</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160; </div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Src1Regs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;    <span class="keyword">auto</span> Inst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(), {NarrowTy},</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;                                        {Src0Regs[I], Src1Regs[I]});</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;    DstRegs.push_back(Inst.getReg(0));</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;  }</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160; </div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Src1LeftoverRegs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;    <span class="keyword">auto</span> Inst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(),</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;      {LeftoverTy}, {Src0LeftoverRegs[I], Src1LeftoverRegs[I]});</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;    DstLeftoverRegs.push_back(Inst.getReg(0));</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;  }</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160; </div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;  insertParts(DstReg, DstTy, NarrowTy, DstRegs,</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;              LeftoverTy, DstLeftoverRegs);</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160; </div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;}</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160; </div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05498"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ab483400178810f8c04f3ee4ebe5db4c9"> 5498</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ab483400178810f8c04f3ee4ebe5db4c9">LegalizerHelper::narrowScalarExt</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;                                 <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160; </div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160; </div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160; </div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> Parts;</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> GCDTy = extractGCDType(Parts, DstTy, NarrowTy, SrcReg);</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LCMTy = buildLCMMergePieces(DstTy, NarrowTy, GCDTy, Parts, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode());</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;  buildWidenedRemergeToDst(DstReg, LCMTy, Parts);</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160; </div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;}</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160; </div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05520"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a8f6f143ae3ebc33b4f3f97e486bf7112"> 5520</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a8f6f143ae3ebc33b4f3f97e486bf7112">LegalizerHelper::narrowScalarSelect</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;                                    <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 0)</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160; </div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CondReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> CondTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(CondReg);</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;  <span class="keywordflow">if</span> (CondTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) <span class="comment">// TODO: Handle vselect</span></div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160; </div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160; </div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> DstRegs, DstLeftoverRegs;</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Src1Regs, Src1LeftoverRegs;</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Src2Regs, Src2LeftoverRegs;</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LeftoverTy;</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;  <span class="keywordflow">if</span> (!extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), DstTy, NarrowTy, LeftoverTy,</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;                    Src1Regs, Src1LeftoverRegs))</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160; </div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Unused;</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;  <span class="keywordflow">if</span> (!extractParts(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg(), DstTy, NarrowTy, Unused,</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;                    Src2Regs, Src2LeftoverRegs))</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;inconsistent extractParts result&quot;</span>);</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160; </div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Src1Regs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    <span class="keyword">auto</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(NarrowTy,</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;                                         CondReg, Src1Regs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], Src2Regs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;    DstRegs.push_back(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>.getReg(0));</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;  }</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160; </div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Src1LeftoverRegs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;    <span class="keyword">auto</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;      LeftoverTy, CondReg, Src1LeftoverRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], Src2LeftoverRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;    DstLeftoverRegs.push_back(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>.getReg(0));</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;  }</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160; </div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;  insertParts(DstReg, DstTy, NarrowTy, DstRegs,</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;              LeftoverTy, DstLeftoverRegs);</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160; </div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;}</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160; </div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05566"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ae25927a69e107ef1477822b884ca034b"> 5566</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ae25927a69e107ef1477822b884ca034b">LegalizerHelper::narrowScalarCTLZ</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;                                  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160; </div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;  <span class="keywordtype">unsigned</span> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160; </div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 2 * NarrowSize) {</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsUndef = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_CTLZ_ZERO_UNDEF;</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160; </div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;    <span class="keyword">auto</span> UnmergeSrc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(NarrowTy, SrcReg);</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;    <span class="comment">// ctlz(Hi:Lo) -&gt; Hi == 0 ? (NarrowSize + ctlz(Lo)) : ctlz(Hi)</span></div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    <span class="keyword">auto</span> C_0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(NarrowTy, 0);</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;    <span class="keyword">auto</span> HiIsZero = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1),</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;                                UnmergeSrc.getReg(1), C_0);</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;    <span class="keyword">auto</span> LoCTLZ = IsUndef ?</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTLZ_ZERO_UNDEF(DstTy, UnmergeSrc.getReg(0)) :</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTLZ(DstTy, UnmergeSrc.getReg(0));</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;    <span class="keyword">auto</span> C_NarrowSize = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstTy, NarrowSize);</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;    <span class="keyword">auto</span> HiIsZeroCTLZ = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(DstTy, LoCTLZ, C_NarrowSize);</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;    <span class="keyword">auto</span> HiCTLZ = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTLZ_ZERO_UNDEF(DstTy, UnmergeSrc.getReg(1));</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(DstReg, HiIsZero, HiIsZeroCTLZ, HiCTLZ);</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160; </div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;  }</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160; </div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;}</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160; </div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05602"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a2db1bc1a16d89298b92a13857146e28d"> 5602</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a2db1bc1a16d89298b92a13857146e28d">LegalizerHelper::narrowScalarCTTZ</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;                                  <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160; </div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;  <span class="keywordtype">unsigned</span> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160; </div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 2 * NarrowSize) {</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsUndef = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_CTTZ_ZERO_UNDEF;</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160; </div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;    <span class="keyword">auto</span> UnmergeSrc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(NarrowTy, SrcReg);</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;    <span class="comment">// cttz(Hi:Lo) -&gt; Lo == 0 ? (cttz(Hi) + NarrowSize) : cttz(Lo)</span></div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;    <span class="keyword">auto</span> C_0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(NarrowTy, 0);</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;    <span class="keyword">auto</span> LoIsZero = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1),</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;                                UnmergeSrc.getReg(0), C_0);</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;    <span class="keyword">auto</span> HiCTTZ = IsUndef ?</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTTZ_ZERO_UNDEF(DstTy, UnmergeSrc.getReg(1)) :</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTTZ(DstTy, UnmergeSrc.getReg(1));</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;    <span class="keyword">auto</span> C_NarrowSize = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstTy, NarrowSize);</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;    <span class="keyword">auto</span> LoIsZeroCTTZ = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(DstTy, HiCTTZ, C_NarrowSize);</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;    <span class="keyword">auto</span> LoCTTZ = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTTZ_ZERO_UNDEF(DstTy, UnmergeSrc.getReg(0));</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(DstReg, LoIsZero, LoIsZeroCTTZ, LoCTTZ);</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160; </div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;  }</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160; </div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;}</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160; </div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05638"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a048378560a1f3ddd48ddf9c60ae488f5"> 5638</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a048378560a1f3ddd48ddf9c60ae488f5">LegalizerHelper::narrowScalarCTPOP</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> TypeIdx,</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;                                   <a class="code" href="classllvm_1_1LLT.html">LLT</a> NarrowTy) {</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;  <span class="keywordflow">if</span> (TypeIdx != 1)</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160; </div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;  <span class="keywordtype">unsigned</span> NarrowSize = NarrowTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160; </div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 2 * NarrowSize) {</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;    <span class="keyword">auto</span> UnmergeSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(NarrowTy, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1));</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160; </div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    <span class="keyword">auto</span> LoCTPOP = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">buildCTPOP</a>(DstTy, UnmergeSrc.getReg(0));</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;    <span class="keyword">auto</span> HiCTPOP = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">buildCTPOP</a>(DstTy, UnmergeSrc.getReg(1));</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(DstReg, HiCTPOP, LoCTPOP);</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160; </div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;  }</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160; </div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;}</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160; </div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05663"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a0b9d961c3e0a9fa4c0e9ce806e972c4c"> 5663</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a0b9d961c3e0a9fa4c0e9ce806e972c4c">LegalizerHelper::lowerBitCount</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>();</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;  <span class="keyword">auto</span> isSupported = [<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Q) {</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;    <span class="keyword">auto</span> QAction = LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#af3687eafb2772c29aa67ce722c2081fd">getAction</a>(Q).<a class="code" href="structllvm_1_1LegalizeActionStep.html#a1ad3bef7dbfe7e650af077cede882b93">Action</a>;</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;    <span class="keywordflow">return</span> QAction == <a class="code" href="namespacellvm_1_1IRSimilarity.html#af46430106334db52bfa7a4107e53a0bda8f7357506e00d8cd0694f948f909865d">Legal</a> || QAction == <a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">Libcall</a> || QAction == Custom;</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;  };</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ_ZERO_UNDEF: {</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;    <span class="comment">// This trivially expands to CTLZ.</span></div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::G_CTLZ));</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;  }</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ: {</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;    <span class="keywordtype">unsigned</span> Len = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160; </div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;    <span class="keywordflow">if</span> (isSupported({TargetOpcode::G_CTLZ_ZERO_UNDEF, {DstTy, SrcTy}})) {</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;      <span class="comment">// If CTLZ_ZERO_UNDEF is supported, emit that and a select for zero.</span></div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;      <span class="keyword">auto</span> CtlzZU = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4fe52c440f33a8895fb01730017de4be">buildCTLZ_ZERO_UNDEF</a>(DstTy, SrcReg);</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;      <span class="keyword">auto</span> ZeroSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 0);</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;      <span class="keyword">auto</span> ICmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, SrcTy.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1), SrcReg, ZeroSrc);</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;      <span class="keyword">auto</span> LenConst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, Len);</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(DstReg, ICmp, LenConst, CtlzZU);</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;    }</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;    <span class="comment">// for now, we do this:</span></div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;    <span class="comment">// NewLen = NextPowerOf2(Len);</span></div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;    <span class="comment">// x = x | (x &gt;&gt; 1);</span></div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    <span class="comment">// x = x | (x &gt;&gt; 2);</span></div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;    <span class="comment">// ...</span></div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;    <span class="comment">// x = x | (x &gt;&gt;16);</span></div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <span class="comment">// x = x | (x &gt;&gt;32); // for 64-bit input</span></div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;    <span class="comment">// Upto NewLen/2</span></div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;    <span class="comment">// return Len - popcount(x);</span></div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    <span class="comment">// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren</span></div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = SrcReg;</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;    <span class="keywordtype">unsigned</span> NewLen = <a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(Len);</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; (1U &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;= (NewLen / 2); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;      <span class="keyword">auto</span> MIBShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 1ULL &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;      <span class="keyword">auto</span> MIBOp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;          SrcTy, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(SrcTy, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, MIBShiftAmt));</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = MIBOp.getReg(0);</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;    }</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;    <span class="keyword">auto</span> MIBPop = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">buildCTPOP</a>(DstTy, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, Len),</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;                        MIBPop);</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;  }</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ_ZERO_UNDEF: {</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;    <span class="comment">// This trivially expands to CTTZ.</span></div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::G_CTTZ));</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;  }</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ: {</div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160; </div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;    <span class="keywordtype">unsigned</span> Len = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;    <span class="keywordflow">if</span> (isSupported({TargetOpcode::G_CTTZ_ZERO_UNDEF, {DstTy, SrcTy}})) {</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;      <span class="comment">// If CTTZ_ZERO_UNDEF is legal or custom, emit that and a select with</span></div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;      <span class="comment">// zero.</span></div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;      <span class="keyword">auto</span> CttzZU = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a80194aed09e8b4c04c228940ff2a56a5">buildCTTZ_ZERO_UNDEF</a>(DstTy, SrcReg);</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;      <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 0);</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;      <span class="keyword">auto</span> ICmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, DstTy.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1), SrcReg, Zero);</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;      <span class="keyword">auto</span> LenConst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, Len);</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(DstReg, ICmp, LenConst, CttzZU);</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;    }</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    <span class="comment">// for now, we use: { return popcount(~x &amp; (x - 1)); }</span></div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    <span class="comment">// unless the target has ctlz but not ctpop, in which case we use:</span></div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;    <span class="comment">// { return 32 - nlz(~x &amp; (x-1)); }</span></div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;    <span class="comment">// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren</span></div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    <span class="keyword">auto</span> MIBCstNeg1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, -1);</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;    <span class="keyword">auto</span> MIBNot = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(SrcTy, SrcReg, MIBCstNeg1);</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;    <span class="keyword">auto</span> MIBTmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;        SrcTy, MIBNot, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(SrcTy, SrcReg, MIBCstNeg1));</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;    <span class="keywordflow">if</span> (!isSupported({TargetOpcode::G_CTPOP, {SrcTy, SrcTy}}) &amp;&amp;</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;        isSupported({TargetOpcode::G_CTLZ, {SrcTy, SrcTy}})) {</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;      <span class="keyword">auto</span> MIBCstLen = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, Len);</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), MIBCstLen,</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;                          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a31c8e33dcb4c2c60d965227c227e8e">buildCTLZ</a>(SrcTy, MIBTmp));</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;    }</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>.get(TargetOpcode::G_CTPOP));</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(MIBTmp.getReg(0));</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;  }</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTPOP: {</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;    <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160; </div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;    <span class="comment">// Count set bits in blocks of 2 bits. Default approach would be</span></div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;    <span class="comment">// B2Count = { val &amp; 0x55555555 } + { (val &gt;&gt; 1) &amp; 0x55555555 }</span></div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;    <span class="comment">// We use following formula instead:</span></div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;    <span class="comment">// B2Count = val - { (val &gt;&gt; 1) &amp; 0x55555555 }</span></div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;    <span class="comment">// since it gives same result in blocks of 2 with one instruction less.</span></div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;    <span class="keyword">auto</span> C_1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, 1);</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;    <span class="keyword">auto</span> B2Set1LoTo1Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLShr(Ty, SrcReg, C_1);</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> B2Mask1HiTo0 = <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0x55));</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;    <span class="keyword">auto</span> C_B2Mask1HiTo0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, B2Mask1HiTo0);</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;    <span class="keyword">auto</span> B2Count1Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(Ty, B2Set1LoTo1Hi, C_B2Mask1HiTo0);</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    <span class="keyword">auto</span> B2Count = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(Ty, SrcReg, B2Count1Hi);</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160; </div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;    <span class="comment">// In order to get count in blocks of 4 add values from adjacent block of 2.</span></div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    <span class="comment">// B4Count = { B2Count &amp; 0x33333333 } + { (B2Count &gt;&gt; 2) &amp; 0x33333333 }</span></div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    <span class="keyword">auto</span> C_2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, 2);</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;    <span class="keyword">auto</span> B4Set2LoTo2Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLShr(Ty, B2Count, C_2);</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> B4Mask2HiTo0 = <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0x33));</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;    <span class="keyword">auto</span> C_B4Mask2HiTo0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, B4Mask2HiTo0);</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;    <span class="keyword">auto</span> B4HiB2Count = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(Ty, B4Set2LoTo2Hi, C_B4Mask2HiTo0);</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;    <span class="keyword">auto</span> B4LoB2Count = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(Ty, B2Count, C_B4Mask2HiTo0);</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;    <span class="keyword">auto</span> B4Count = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(Ty, B4HiB2Count, B4LoB2Count);</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160; </div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;    <span class="comment">// For count in blocks of 8 bits we don&#39;t have to mask high 4 bits before</span></div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;    <span class="comment">// addition since count value sits in range {0,...,8} and 4 bits are enough</span></div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;    <span class="comment">// to hold such binary values. After addition high 4 bits still hold count</span></div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    <span class="comment">// of set bits in high 4 bit block, set them to zero and get 8 bit result.</span></div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;    <span class="comment">// B8Count = { B4Count + (B4Count &gt;&gt; 4) } &amp; 0x0F0F0F0F</span></div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    <span class="keyword">auto</span> C_4 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, 4);</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;    <span class="keyword">auto</span> B8HiB4Count = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLShr(Ty, B4Count, C_4);</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;    <span class="keyword">auto</span> B8CountDirty4Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(Ty, B8HiB4Count, B4Count);</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> B8Mask4HiTo0 = <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0x0F));</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;    <span class="keyword">auto</span> C_B8Mask4HiTo0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, B8Mask4HiTo0);</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;    <span class="keyword">auto</span> B8Count = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(Ty, B8CountDirty4Hi, C_B8Mask4HiTo0);</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160; </div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Size&lt;=128 &amp;&amp; <span class="stringliteral">&quot;Scalar size is too large for CTPOP lower algorithm&quot;</span>);</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;    <span class="comment">// 8 bits can hold CTPOP result of 128 bit int or smaller. Mul with this</span></div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;    <span class="comment">// bitmask will set 8 msb in ResTmp to sum of all B8Counts in 8 bit blocks.</span></div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;    <span class="keyword">auto</span> MulMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0x01)));</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;    <span class="keyword">auto</span> ResTmp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(Ty, B8Count, MulMask);</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160; </div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;    <span class="comment">// Shift count result from 8 high bits to low bits.</span></div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;    <span class="keyword">auto</span> C_SizeM8 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, Size - 8);</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLShr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), ResTmp, C_SizeM8);</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160; </div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;  }</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;  }</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;}</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160; </div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;<span class="comment">// Check that (every element of) Reg is undef or not an exact multiple of BW.</span></div>
<div class="line"><a name="l05826"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#aced5d43b6a199d148e877d5536e95739"> 5826</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LegalizerHelper_8cpp.html#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;MRI,</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;                                        <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">unsigned</span> BW) {</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a50bf4f84c8a910409d92dd85e2b72953">matchUnaryPredicate</a>(</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;        <span class="comment">// Null constant here means an undef.</span></div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast_or_null&lt;ConstantInt&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;        <span class="keywordflow">return</span> !CI || CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a4e3a2187cacdec76028617a403c47d89">urem</a>(BW) != 0;</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;      },</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;      <span class="comment">/*AllowUndefs*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;}</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160; </div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05839"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a332b012f0983179618526234e605c9aa"> 5839</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a332b012f0983179618526234e605c9aa">LegalizerHelper::lowerFunnelShiftWithInverse</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ShTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160; </div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;  <span class="keywordtype">unsigned</span> BW = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160; </div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(BW))</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160; </div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsFSHL = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_FSHL;</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;  <span class="keywordtype">unsigned</span> RevOpcode = IsFSHL ? TargetOpcode::G_FSHR : TargetOpcode::G_FSHL;</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160; </div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LegalizerHelper_8cpp.html#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(MRI, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, BW)) {</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;    <span class="comment">// fshl X, Y, Z -&gt; fshr X, Y, -Z</span></div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;    <span class="comment">// fshr X, Y, Z -&gt; fshl X, Y, -Z</span></div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;    <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShTy, 0);</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;    <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, Zero, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;    <span class="comment">// fshl X, Y, Z -&gt; fshr (srl X, 1), (fshr X, Y, 1), ~Z</span></div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;    <span class="comment">// fshr X, Y, Z -&gt; fshl (fshl X, Y, 1), (shl Y, 1), ~Z</span></div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;    <span class="keyword">auto</span> One = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShTy, 1);</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;    <span class="keywordflow">if</span> (IsFSHL) {</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RevOpcode, {Ty}, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, One}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, One).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RevOpcode, {Ty}, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, One}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, One).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;    }</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160; </div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;    <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a16532d0d8fb47080714810131b45b75b">buildNot</a>(ShTy, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;  }</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160; </div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RevOpcode, {Dst}, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>});</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;}</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160; </div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05881"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a7359ee87521122d9315cb47df7ec57c5"> 5881</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a7359ee87521122d9315cb47df7ec57c5">LegalizerHelper::lowerFunnelShiftAsShifts</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ShTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160; </div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BW = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsFSHL = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_FSHL;</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160; </div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ShX, ShY;</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ShAmt, InvShAmt;</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160; </div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;  <span class="comment">// FIXME: Emit optimized urem by constant instead of letting it expand later.</span></div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LegalizerHelper_8cpp.html#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(MRI, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, BW)) {</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;    <span class="comment">// fshl: X &lt;&lt; C | Y &gt;&gt; (BW - C)</span></div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;    <span class="comment">// fshr: X &lt;&lt; (BW - C) | Y &gt;&gt; C</span></div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;    <span class="comment">// where C = Z % BW is not zero</span></div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;    <span class="keyword">auto</span> BitWidthC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShTy, BW);</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;    ShAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3b08f09b085506a31ea5ac83f5d8fda1">buildURem</a>(ShTy, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, BitWidthC).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;    InvShAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(ShTy, BitWidthC, ShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;    ShX = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IsFSHL ? ShAmt : InvShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;    ShY = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, IsFSHL ? InvShAmt : ShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;    <span class="comment">// fshl: X &lt;&lt; (Z % BW) | Y &gt;&gt; 1 &gt;&gt; (BW - 1 - (Z % BW))</span></div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;    <span class="comment">// fshr: X &lt;&lt; 1 &lt;&lt; (BW - 1 - (Z % BW)) | Y &gt;&gt; (Z % BW)</span></div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShTy, BW - 1);</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(BW)) {</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;      <span class="comment">// Z % BW -&gt; Z &amp; (BW - 1)</span></div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;      ShAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(ShTy, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;      <span class="comment">// (BW - 1) - (Z % BW) -&gt; ~Z &amp; (BW - 1)</span></div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;      <span class="keyword">auto</span> NotZ = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a16532d0d8fb47080714810131b45b75b">buildNot</a>(ShTy, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;      InvShAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(ShTy, NotZ, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;      <span class="keyword">auto</span> BitWidthC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShTy, BW);</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;      ShAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3b08f09b085506a31ea5ac83f5d8fda1">buildURem</a>(ShTy, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, BitWidthC).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;      InvShAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(ShTy, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, ShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;    }</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160; </div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;    <span class="keyword">auto</span> One = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ShTy, 1);</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;    <span class="keywordflow">if</span> (IsFSHL) {</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;      ShX = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;      <span class="keyword">auto</span> ShY1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, One);</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;      ShY = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, ShY1, InvShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;      <span class="keyword">auto</span> ShX1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, One);</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;      ShX = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, ShX1, InvShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;      ShY = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, ShAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;    }</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;  }</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160; </div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(Dst, ShX, ShY);</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;}</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160; </div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05939"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aa6564387d7a51c85b557861c8f2d30ba"> 5939</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aa6564387d7a51c85b557861c8f2d30ba">LegalizerHelper::lowerFunnelShift</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;  <span class="comment">// These operations approximately do the following (while avoiding undefined</span></div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;  <span class="comment">// shifts by BW):</span></div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;  <span class="comment">// G_FSHL: (X &lt;&lt; (Z % BW)) | (Y &gt;&gt; (BW - (Z % BW)))</span></div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;  <span class="comment">// G_FSHR: (X &lt;&lt; (BW - (Z % BW))) | (Y &gt;&gt; (Z % BW))</span></div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ShTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg());</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160; </div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;  <span class="keywordtype">bool</span> IsFSHL = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_FSHL;</div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;  <span class="keywordtype">unsigned</span> RevOpcode = IsFSHL ? TargetOpcode::G_FSHR : TargetOpcode::G_FSHL;</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160; </div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;  <span class="comment">// TODO: Use smarter heuristic that accounts for vector legalization.</span></div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;  <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#af3687eafb2772c29aa67ce722c2081fd">getAction</a>({RevOpcode, {Ty, ShTy}}).Action == Lower)</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a7359ee87521122d9315cb47df7ec57c5">lowerFunnelShiftAsShifts</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160; </div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;  <span class="comment">// This only works for powers of 2, fallback to shifts if it fails.</span></div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> Result = <a class="code" href="classllvm_1_1LegalizerHelper.html#a332b012f0983179618526234e605c9aa">lowerFunnelShiftWithInverse</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;  <span class="keywordflow">if</span> (Result == <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>)</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a7359ee87521122d9315cb47df7ec57c5">lowerFunnelShiftAsShifts</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;}</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160; </div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l05963"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aa30414996e4930e5be9e10e0bab811d0"> 5963</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aa30414996e4930e5be9e10e0bab811d0">LegalizerHelper::lowerRotateWithReverseRotate</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Amt = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> AmtTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Amt);</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(AmtTy, 0);</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;  <span class="keywordtype">bool</span> IsLeft = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_ROTL;</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;  <span class="keywordtype">unsigned</span> RevRot = IsLeft ? TargetOpcode::G_ROTR : TargetOpcode::G_ROTL;</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;  <span class="keyword">auto</span> Neg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(AmtTy, Zero, Amt);</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RevRot, {Dst}, {Src, Neg});</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;}</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160; </div>
<div class="line"><a name="l05977"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ac5df097268459420f2dd52a648379463"> 5977</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#ac5df097268459420f2dd52a648379463">LegalizerHelper::lowerRotate</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Amt = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> AmtTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Amt);</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160; </div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;  <span class="keywordtype">unsigned</span> EltSizeInBits = DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;  <span class="keywordtype">bool</span> IsLeft = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_ROTL;</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160; </div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ab24db762f0912a99f1e4d9e44eaeaa44">setInstrAndDebugLoc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160; </div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;  <span class="comment">// If a rotate in the other direction is supported, use it.</span></div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;  <span class="keywordtype">unsigned</span> RevRot = IsLeft ? TargetOpcode::G_ROTR : TargetOpcode::G_ROTL;</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;  <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LegalizerInfo.html#a83cf4c51d6ae07b6018d800c0b32d97b">isLegalOrCustom</a>({RevRot, {DstTy, SrcTy}}) &amp;&amp;</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;      <a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(EltSizeInBits))</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;    <span class="keywordflow">return</span> lowerRotateWithReverseRotate(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160; </div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;  <span class="comment">// If a funnel shift is supported, use it.</span></div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;  <span class="keywordtype">unsigned</span> FShOpc = IsLeft ? TargetOpcode::G_FSHL : TargetOpcode::G_FSHR;</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;  <span class="keywordtype">unsigned</span> RevFsh = !IsLeft ? TargetOpcode::G_FSHL : TargetOpcode::G_FSHR;</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;  <span class="keywordtype">bool</span> IsFShLegal = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;  <span class="keywordflow">if</span> ((IsFShLegal = LI.isLegalOrCustom({FShOpc, {DstTy, AmtTy}})) ||</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;      LI.isLegalOrCustom({RevFsh, {DstTy, AmtTy}})) {</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;    <span class="keyword">auto</span> buildFunnelShift = [&amp;](<span class="keywordtype">unsigned</span> Opc, <a class="code" href="classllvm_1_1Register.html">Register</a> R1, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>,</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;                                <a class="code" href="classllvm_1_1Register.html">Register</a> R3) {</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;      MIRBuilder.buildInstr(Opc, {R1}, {<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, R3});</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;      <span class="keywordflow">return</span> Legalized;</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;    };</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;    <span class="comment">// If a funnel shift in the other direction is supported, use it.</span></div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;    <span class="keywordflow">if</span> (IsFShLegal) {</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;      <span class="keywordflow">return</span> buildFunnelShift(FShOpc, Dst, Src, Amt);</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(EltSizeInBits)) {</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;      Amt = MIRBuilder.buildNeg(DstTy, Amt).getReg(0);</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;      <span class="keywordflow">return</span> buildFunnelShift(RevFsh, Dst, Src, Amt);</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;    }</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;  }</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160; </div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = MIRBuilder.buildConstant(AmtTy, 0);</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;  <span class="keywordtype">unsigned</span> ShOpc = IsLeft ? TargetOpcode::G_SHL : TargetOpcode::G_LSHR;</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;  <span class="keywordtype">unsigned</span> RevShiftOpc = IsLeft ? TargetOpcode::G_LSHR : TargetOpcode::G_SHL;</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;  <span class="keyword">auto</span> BitWidthMinusOneC = MIRBuilder.buildConstant(AmtTy, EltSizeInBits - 1);</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ShVal;</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RevShiftVal;</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(EltSizeInBits)) {</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;    <span class="comment">// (rotl x, c) -&gt; x &lt;&lt; (c &amp; (w - 1)) | x &gt;&gt; (-c &amp; (w - 1))</span></div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;    <span class="comment">// (rotr x, c) -&gt; x &gt;&gt; (c &amp; (w - 1)) | x &lt;&lt; (-c &amp; (w - 1))</span></div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;    <span class="keyword">auto</span> NegAmt = MIRBuilder.buildSub(AmtTy, Zero, Amt);</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;    <span class="keyword">auto</span> ShAmt = MIRBuilder.buildAnd(AmtTy, Amt, BitWidthMinusOneC);</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;    ShVal = MIRBuilder.buildInstr(ShOpc, {DstTy}, {Src, ShAmt}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;    <span class="keyword">auto</span> RevAmt = MIRBuilder.buildAnd(AmtTy, NegAmt, BitWidthMinusOneC);</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;    RevShiftVal =</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;        MIRBuilder.buildInstr(RevShiftOpc, {DstTy}, {Src, RevAmt}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;    <span class="comment">// (rotl x, c) -&gt; x &lt;&lt; (c % w) | x &gt;&gt; 1 &gt;&gt; (w - 1 - (c % w))</span></div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;    <span class="comment">// (rotr x, c) -&gt; x &gt;&gt; (c % w) | x &lt;&lt; 1 &lt;&lt; (w - 1 - (c % w))</span></div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;    <span class="keyword">auto</span> BitWidthC = MIRBuilder.buildConstant(AmtTy, EltSizeInBits);</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;    <span class="keyword">auto</span> ShAmt = MIRBuilder.buildURem(AmtTy, Amt, BitWidthC);</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;    ShVal = MIRBuilder.buildInstr(ShOpc, {DstTy}, {Src, ShAmt}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;    <span class="keyword">auto</span> RevAmt = MIRBuilder.buildSub(AmtTy, BitWidthMinusOneC, ShAmt);</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;    <span class="keyword">auto</span> One = MIRBuilder.buildConstant(AmtTy, 1);</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;    <span class="keyword">auto</span> Inner = MIRBuilder.buildInstr(RevShiftOpc, {DstTy}, {Src, One});</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;    RevShiftVal =</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;        MIRBuilder.buildInstr(RevShiftOpc, {DstTy}, {Inner, RevAmt}).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;  }</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;  MIRBuilder.buildOr(Dst, ShVal, RevShiftVal);</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;  <span class="keywordflow">return</span> Legalized;</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;}</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160; </div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;<span class="comment">// Expand s32 = G_UITOFP s64 using bit operations to an IEEE float</span></div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;<span class="comment">// representation.</span></div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06052"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a9b5ad9f5de612dc98a4f3232a98ab754"> 6052</a></span>&#160;LegalizerHelper::lowerU64ToF32BitOps(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160; </div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src) == S64 &amp;&amp; MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) == S32);</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160; </div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;  <span class="comment">// unsigned cul2f(ulong u) {</span></div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;  <span class="comment">//   uint lz = clz(u);</span></div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;  <span class="comment">//   uint e = (u != 0) ? 127U + 63U - lz : 0;</span></div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;  <span class="comment">//   u = (u &lt;&lt; lz) &amp; 0x7fffffffffffffffUL;</span></div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;  <span class="comment">//   ulong t = u &amp; 0xffffffffffUL;</span></div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;  <span class="comment">//   uint v = (e &lt;&lt; 23) | (uint)(u &gt;&gt; 40);</span></div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;  <span class="comment">//   uint r = t &gt; 0x8000000000UL ? 1U : (t == 0x8000000000UL ? v &amp; 1U : 0U);</span></div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;  <span class="comment">//   return as_float(v + r);</span></div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160; </div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;  <span class="keyword">auto</span> Zero32 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0);</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;  <span class="keyword">auto</span> Zero64 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, 0);</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160; </div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;  <span class="keyword">auto</span> LZ = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4fe52c440f33a8895fb01730017de4be">buildCTLZ_ZERO_UNDEF</a>(S32, Src);</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160; </div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;  <span class="keyword">auto</span> K = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 127U + 63U);</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;  <span class="keyword">auto</span> Sub = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(S32, K, LZ);</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160; </div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;  <span class="keyword">auto</span> NotZero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, Src, Zero64);</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, NotZero, Sub, Zero32);</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160; </div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;  <span class="keyword">auto</span> Mask0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, (-1ULL) &gt;&gt; 1);</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;  <span class="keyword">auto</span> ShlLZ = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(S64, Src, LZ);</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160; </div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;  <span class="keyword">auto</span> U = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S64, ShlLZ, Mask0);</div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160; </div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;  <span class="keyword">auto</span> Mask1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, 0xffffffffffULL);</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;  <span class="keyword">auto</span> <a class="code" href="classT.html">T</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S64, U, Mask1);</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160; </div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;  <span class="keyword">auto</span> UShl = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(S64, U, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, 40));</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;  <span class="keyword">auto</span> ShlE = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(S32, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 23));</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;  <span class="keyword">auto</span> V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, ShlE, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(S32, UShl));</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160; </div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, 0x8000000000ULL);</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;  <span class="keyword">auto</span> RCmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>, S1, <a class="code" href="classT.html">T</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;  <span class="keyword">auto</span> TCmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, S1, <a class="code" href="classT.html">T</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 1);</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160; </div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;  <span class="keyword">auto</span> VTrunc1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S32, V, One);</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;  <span class="keyword">auto</span> Select0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, TCmp, VTrunc1, Zero32);</div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;  <span class="keyword">auto</span> R = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, RCmp, One, Select0);</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(Dst, V, R);</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160; </div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;}</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160; </div>
<div class="line"><a name="l06108"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aba403eaa336a6c9d869717c9e54edd9c"> 6108</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#aba403eaa336a6c9d869717c9e54edd9c">LegalizerHelper::lowerUITOFP</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160; </div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;  <span class="keywordflow">if</span> (SrcTy == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1)) {</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;    <span class="keyword">auto</span> True = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(DstTy, 1.0);</div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;    <span class="keyword">auto</span> False = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(DstTy, 0.0);</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, Src, True, False);</div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;  }</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160; </div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;  <span class="keywordflow">if</span> (SrcTy != <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64))</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160; </div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;  <span class="keywordflow">if</span> (DstTy == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32)) {</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;    <span class="comment">// TODO: SelectionDAG has several alternative expansions to port which may</span></div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;    <span class="comment">// be more reasonble depending on the available instructions. If a target</span></div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;    <span class="comment">// has sitofp, does not have CTLZ, or can efficiently use f64 as an</span></div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;    <span class="comment">// intermediate type, this is probably worse.</span></div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a9b5ad9f5de612dc98a4f3232a98ab754">lowerU64ToF32BitOps</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;  }</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160; </div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;}</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160; </div>
<div class="line"><a name="l06136"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a0a4f859f973b7f797f2d510c369980ad"> 6136</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a0a4f859f973b7f797f2d510c369980ad">LegalizerHelper::lowerSITOFP</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160; </div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160; </div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;  <span class="keywordflow">if</span> (SrcTy == S1) {</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;    <span class="keyword">auto</span> True = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(DstTy, -1.0);</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;    <span class="keyword">auto</span> False = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(DstTy, 0.0);</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, Src, True, False);</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;  }</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160; </div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;  <span class="keywordflow">if</span> (SrcTy != S64)</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160; </div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;  <span class="keywordflow">if</span> (DstTy == S32) {</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;    <span class="comment">// signed cl2f(long l) {</span></div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;    <span class="comment">//   long s = l &gt;&gt; 63;</span></div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;    <span class="comment">//   float r = cul2f((l + s) ^ s);</span></div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    <span class="comment">//   return s ? -r : r;</span></div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> L = Src;</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;    <span class="keyword">auto</span> SignBit = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, 63);</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;    <span class="keyword">auto</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(S64, L, SignBit);</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160; </div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;    <span class="keyword">auto</span> LPlusS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(S64, L, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(S64, LPlusS, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;    <span class="keyword">auto</span> R = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a86e0c21f3e1e706b8d26733726c76195">buildUITOFP</a>(S32, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160; </div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;    <span class="keyword">auto</span> RNeg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac939f3c7fdf6c976421d61564d078506">buildFNeg</a>(S32, R);</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;    <span class="keyword">auto</span> SignNotZero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;                                            <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S64, 0));</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, SignNotZero, RNeg, R);</div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;  }</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160; </div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;}</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160; </div>
<div class="line"><a name="l06182"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a64f47636eb4667460ea08f358d6d39da"> 6182</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a64f47636eb4667460ea08f358d6d39da">LegalizerHelper::lowerFPTOUI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160; </div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;  <span class="keywordflow">if</span> (SrcTy != S64 &amp;&amp; SrcTy != S32)</div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;  <span class="keywordflow">if</span> (DstTy != S32 &amp;&amp; DstTy != S64)</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160; </div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;  <span class="comment">// FPTOSI gives same result as FPTOUI for positive signed integers.</span></div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;  <span class="comment">// FPTOUI needs to deal with fp values that convert to unsigned integers</span></div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;  <span class="comment">// greater or equal to 2^31 for float or 2^63 for double. For brevity 2^Exp.</span></div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160; </div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> TwoPExpInt = <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> TwoPExpFP(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32 ? <a class="code" href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>()</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;                                                : <a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>(),</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;                    <a class="code" href="classllvm_1_1APInt.html#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;  TwoPExpFP.<a class="code" href="classllvm_1_1APFloat.html#a7a046fe3d1230e4804494ce18bae1175">convertFromAPInt</a>(TwoPExpInt, <span class="keyword">false</span>, <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160; </div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> FPTOSI = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a03241215374b8ba88272333652a4a151">buildFPTOSI</a>(DstTy, Src);</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160; </div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Threshold = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(SrcTy, TwoPExpFP);</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;  <span class="comment">// For fp Value greater or equal to Threshold(2^Exp), we use FPTOSI on</span></div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;  <span class="comment">// (Value - 2^Exp) and add 2^Exp by setting highest bit in result to 1.</span></div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> FSub = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a02d0daf870f6458a98b61f4b82a399c3">buildFSub</a>(SrcTy, Src, Threshold);</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> ResLowBits = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a03241215374b8ba88272333652a4a151">buildFPTOSI</a>(DstTy, FSub);</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> ResHighBit = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, TwoPExpInt);</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Res = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(DstTy, ResLowBits, ResHighBit);</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160; </div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160; </div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19adee98654dac93ffd21f1b9a129ec40e2">FCMP</a> =</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afb3340c638c09709ce5766dcf672500d">buildFCmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">CmpInst::FCMP_ULT</a>, S1, Src, Threshold);</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, <a class="code" href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19adee98654dac93ffd21f1b9a129ec40e2">FCMP</a>, FPTOSI, Res);</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160; </div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;}</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160; </div>
<div class="line"><a name="l06225"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ab99f92278021f1921be23b762056a9cc"> 6225</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#ab99f92278021f1921be23b762056a9cc">LegalizerHelper::lowerFPTOSI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160; </div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;  <span class="comment">// FIXME: Only f32 to i64 conversions are supported.</span></div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() != S32 || DstTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() != S64)</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160; </div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;  <span class="comment">// Expand f32 -&gt; i64 conversion</span></div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;  <span class="comment">// This algorithm comes from compiler-rt&#39;s implementation of fixsfdi:</span></div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;  <span class="comment">// https://github.com/llvm/llvm-project/blob/main/compiler-rt/lib/builtins/fixsfdi.c</span></div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160; </div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;  <span class="keywordtype">unsigned</span> SrcEltBits = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160; </div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;  <span class="keyword">auto</span> ExponentMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 0x7F800000);</div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;  <span class="keyword">auto</span> ExponentLoBit = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 23);</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160; </div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;  <span class="keyword">auto</span> AndExpMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(SrcTy, Src, ExponentMask);</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;  <span class="keyword">auto</span> ExponentBits = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(SrcTy, AndExpMask, ExponentLoBit);</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160; </div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;  <span class="keyword">auto</span> SignMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy,</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;                                           <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(SrcEltBits));</div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;  <span class="keyword">auto</span> AndSignMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(SrcTy, Src, SignMask);</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;  <span class="keyword">auto</span> SignLowBit = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, SrcEltBits - 1);</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;  <span class="keyword">auto</span> Sign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(SrcTy, AndSignMask, SignLowBit);</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;  Sign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a42427e969917da5da61fadd006fed326">buildSExt</a>(DstTy, Sign);</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160; </div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;  <span class="keyword">auto</span> MantissaMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 0x007FFFFF);</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;  <span class="keyword">auto</span> AndMantissaMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(SrcTy, Src, MantissaMask);</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;  <span class="keyword">auto</span> K = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 0x00800000);</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160; </div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;  <span class="keyword">auto</span> R = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(SrcTy, AndMantissaMask, K);</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;  R = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(DstTy, R);</div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160; </div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;  <span class="keyword">auto</span> Bias = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 127);</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(SrcTy, ExponentBits, Bias);</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;  <span class="keyword">auto</span> SubExponent = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(SrcTy, <a class="code" href="namespacellvm.html#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>, ExponentLoBit);</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;  <span class="keyword">auto</span> ExponentSub = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(SrcTy, ExponentLoBit, <a class="code" href="namespacellvm.html#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>);</div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160; </div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;  <span class="keyword">auto</span> Shl = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(DstTy, R, SubExponent);</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;  <span class="keyword">auto</span> Srl = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(DstTy, R, ExponentSub);</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160; </div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;  <span class="keyword">auto</span> CmpGt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>,</div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;                                    S1, <a class="code" href="namespacellvm.html#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>, ExponentLoBit);</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160; </div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;  R = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(DstTy, CmpGt, Shl, Srl);</div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160; </div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;  <span class="keyword">auto</span> XorSign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(DstTy, R, Sign);</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(DstTy, XorSign, Sign);</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160; </div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;  <span class="keyword">auto</span> ZeroSrcTy = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcTy, 0);</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160; </div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;  <span class="keyword">auto</span> ExponentLt0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>,</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;                                          S1, <a class="code" href="namespacellvm.html#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>, ZeroSrcTy);</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160; </div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;  <span class="keyword">auto</span> ZeroDstTy = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, 0);</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, ExponentLt0, ZeroDstTy, <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>);</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160; </div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;}</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160; </div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;<span class="comment">// f64 -&gt; f16 conversion using round-to-nearest-even rounding mode.</span></div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06294"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a04ee040b3b0253a0832ddb7915d55ae1"> 6294</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a04ee040b3b0253a0832ddb7915d55ae1">LegalizerHelper::lowerFPTRUNC_F64_TO_F16</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160; </div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;  <span class="keywordflow">if</span> (MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src).<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) <span class="comment">// TODO: Handle vectors directly.</span></div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160; </div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ExpMask = 0x7ff;</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ExpBiasf64 = 1023;</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ExpBiasf16 = 15;</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160; </div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(S32, Src);</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> U = Unmerge.getReg(0);</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> UH = Unmerge.getReg(1);</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160; </div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(S32, UH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 20));</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S32, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, ExpMask));</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160; </div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;  <span class="comment">// Subtract the fp64 exponent bias (1023) to get the real exponent and</span></div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;  <span class="comment">// add the f16 bias (15) to get the biased exponent for the f16 format.</span></div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(</div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;    S32, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, -ExpBiasf64 + ExpBiasf16));</div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160; </div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(S32, UH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 8));</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;  <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S32, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0xffe));</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160; </div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;  <span class="keyword">auto</span> MaskedSig = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S32, UH,</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;                                       <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0x1ff));</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;  MaskedSig = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, MaskedSig, U);</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160; </div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0);</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;  <span class="keyword">auto</span> SigCmpNE0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, MaskedSig, Zero);</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;  <span class="keyword">auto</span> Lo40Set = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(S32, SigCmpNE0);</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;  <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Lo40Set);</div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160; </div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;  <span class="comment">// (M != 0 ? 0x0200 : 0) | 0x7c00;</span></div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;  <span class="keyword">auto</span> Bits0x200 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0x0200);</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;  <span class="keyword">auto</span> CmpM_NE0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Zero);</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;  <span class="keyword">auto</span> SelectCC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, CmpM_NE0, Bits0x200, Zero);</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160; </div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;  <span class="keyword">auto</span> Bits0x7c00 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0x7c00);</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, SelectCC, Bits0x7c00);</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160; </div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;  <span class="comment">// N = M | (E &lt;&lt; 12);</span></div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;  <span class="keyword">auto</span> EShl12 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(S32, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 12));</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;  <span class="keyword">auto</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, EShl12);</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160; </div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;  <span class="comment">// B = clamp(1-E, 0, 13);</span></div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 1);</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;  <span class="keyword">auto</span> OneSubExp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(S32, One, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a42ee731fc4e33eab8c5d6f76f8d8b2">buildSMax</a>(S32, OneSubExp, Zero);</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aad02a49b6c2f7c3c92a4ad7df5c4eb47">buildSMin</a>(S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 13));</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160; </div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;  <span class="keyword">auto</span> SigSetHigh = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>,</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;                                       <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0x1000));</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160; </div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(S32, SigSetHigh, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;  <span class="keyword">auto</span> D0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(S32, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160; </div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;  <span class="keyword">auto</span> D0_NE_SigSetHigh = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1,</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;                                             D0, SigSetHigh);</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;  <span class="keyword">auto</span> D1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(S32, D0_NE_SigSetHigh);</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, D1);</div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160; </div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;  <span class="keyword">auto</span> CmpELtOne = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, S1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, One);</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;  <span class="keyword">auto</span> V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, CmpELtOne, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160; </div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;  <span class="keyword">auto</span> VLow3 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S32, V, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 7));</div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;  V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(S32, V, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 2));</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160; </div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;  <span class="keyword">auto</span> VLow3Eq3 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, S1, VLow3,</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;                                       <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 3));</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;  <span class="keyword">auto</span> V0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(S32, VLow3Eq3);</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160; </div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;  <span class="keyword">auto</span> VLow3Gt5 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, S1, VLow3,</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;                                       <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 5));</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;  <span class="keyword">auto</span> V1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(S32, VLow3Gt5);</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160; </div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;  V1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, V0, V1);</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;  V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(S32, V, V1);</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160; </div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;  <span class="keyword">auto</span> CmpEGt30 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>,  S1,</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;                                       <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 30));</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;  V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, CmpEGt30,</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;                             <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0x7c00), V);</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160; </div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;  <span class="keyword">auto</span> CmpEGt1039 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, S1,</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;                                         <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 1039));</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;  V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(S32, CmpEGt1039, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160; </div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;  <span class="comment">// Extract the sign bit.</span></div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;  <span class="keyword">auto</span> Sign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(S32, UH, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 16));</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;  Sign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(S32, Sign, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(S32, 0x8000));</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160; </div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;  <span class="comment">// Insert the sign bit</span></div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;  V = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(S32, Sign, V);</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160; </div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Dst, V);</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;}</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160; </div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06399"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aaa03d66b30e1b6173c99b9a4266b7da9"> 6399</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aaa03d66b30e1b6173c99b9a4266b7da9">LegalizerHelper::lowerFPTRUNC</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160; </div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160; </div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() == S16 &amp;&amp; SrcTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() == S64)</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a04ee040b3b0253a0832ddb7915d55ae1">lowerFPTRUNC_F64_TO_F16</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160; </div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;}</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160; </div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;<span class="comment">// TODO: If RHS is a constant SelectionDAGBuilder expands this into a</span></div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;<span class="comment">// multiplication tree.</span></div>
<div class="line"><a name="l06416"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a84a1b0b6afe8ccff8b1c5fd66de228af"> 6416</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a84a1b0b6afe8ccff8b1c5fd66de228af">LegalizerHelper::lowerFPOWI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160; </div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;  <span class="keyword">auto</span> CvtSrc1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8c0db0c02bedbc26aba0fe9ebc77fff9">buildSITOFP</a>(Ty, Src1);</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3f2727e87d9863c60b67b7d08b05d2e6">buildFPow</a>(Dst, Src0, CvtSrc1, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags());</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;}</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160; </div>
<div class="line"><a name="l06428"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a96bf442f65306b9a5ffda8ca473f0ce1"> 6428</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> <a class="code" href="LegalizerHelper_8cpp.html#a96bf442f65306b9a5ffda8ca473f0ce1">minMaxToCompare</a>(<span class="keywordtype">unsigned</span> Opc) {</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMIN:</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>;</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SMAX:</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>;</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMIN:</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UMAX:</div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;not in integer min/max&quot;</span>);</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;  }</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;}</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160; </div>
<div class="line"><a name="l06443"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a7287c6cc84f805db4ae46d581b4deecc"> 6443</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a7287c6cc84f805db4ae46d581b4deecc">LegalizerHelper::lowerMinMax</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160; </div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="LegalizerHelper_8cpp.html#a96bf442f65306b9a5ffda8ca473f0ce1">minMaxToCompare</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode());</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> CmpType = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst).<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1);</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160; </div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;  <span class="keyword">auto</span> Cmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(Pred, CmpType, Src0, Src1);</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, Cmp, Src0, Src1);</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160; </div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;}</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160; </div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06459"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a9dc8c9b527c43cc36ac86886d18f00e4"> 6459</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a9dc8c9b527c43cc36ac86886d18f00e4">LegalizerHelper::lowerFCopySign</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160; </div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src0Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src0);</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src1Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src1);</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160; </div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> Src0Size = Src0Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> Src1Size = Src1Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160; </div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;  <span class="keyword">auto</span> SignBitMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;    Src0Ty, <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(Src0Size));</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160; </div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;  <span class="keyword">auto</span> NotSignBitMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;    Src0Ty, <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(Src0Size, Src0Size - 1));</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160; </div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> And0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(Src0Ty, Src0, NotSignBitMask).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> And1;</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;  <span class="keywordflow">if</span> (Src0Ty == Src1Ty) {</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;    And1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(Src1Ty, Src1, SignBitMask).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Src0Size &gt; Src1Size) {</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Src0Ty, Src0Size - Src1Size);</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;    <span class="keyword">auto</span> Zext = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(Src0Ty, Src1);</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;    <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Src0Ty, Zext, ShiftAmt);</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;    And1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(Src0Ty, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, SignBitMask).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Src1Ty, Src1Size - Src0Size);</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;    <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Src1Ty, Src1, ShiftAmt);</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;    <span class="keyword">auto</span> Trunc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Src0Ty, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;    And1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(Src0Ty, Trunc, SignBitMask).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;  }</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160; </div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;  <span class="comment">// Be careful about setting nsz/nnan/ninf on every instruction, since the</span></div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;  <span class="comment">// constants are a nan and -0.0, but the final result should preserve</span></div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;  <span class="comment">// everything.</span></div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(Dst, And0, And1, Flags);</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160; </div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;}</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160; </div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06503"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a105bd213837c5c2e30520113d885b8f3"> 6503</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a105bd213837c5c2e30520113d885b8f3">LegalizerHelper::lowerFMinNumMaxNum</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;  <span class="keywordtype">unsigned</span> NewOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_FMINNUM ?</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;    TargetOpcode::G_FMINNUM_IEEE : TargetOpcode::G_FMAXNUM_IEEE;</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160; </div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160; </div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418">MachineInstr::FmNoNans</a>)) {</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;    <span class="comment">// Insert canonicalizes if it&#39;s possible we need to quiet to get correct</span></div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;    <span class="comment">// sNaN behavior.</span></div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160; </div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;    <span class="comment">// Note this must be done here, and not as an optimization combine in the</span></div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;    <span class="comment">// absence of a dedicate quiet-snan instruction as we&#39;re using an</span></div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;    <span class="comment">// omni-purpose G_FCANONICALIZE.</span></div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#acbbab4f4f342da97b2f73b4b1fedc983">isKnownNeverSNaN</a>(Src0, MRI))</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;      Src0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afe0950de33581b21ef3c56db5f4382c1">buildFCanonicalize</a>(Ty, Src0, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags()).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160; </div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#acbbab4f4f342da97b2f73b4b1fedc983">isKnownNeverSNaN</a>(Src1, MRI))</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;      Src1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afe0950de33581b21ef3c56db5f4382c1">buildFCanonicalize</a>(Ty, Src1, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags()).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;  }</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160; </div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;  <span class="comment">// If there are no nans, it&#39;s safe to simply replace this with the non-IEEE</span></div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;  <span class="comment">// version.</span></div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(NewOp, {Dst}, {Src0, Src1}, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags());</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;}</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160; </div>
<div class="line"><a name="l06533"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aac36a82fb8a9d486c3b59ccab7769e4d"> 6533</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#aac36a82fb8a9d486c3b59ccab7769e4d">LegalizerHelper::lowerFMad</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;  <span class="comment">// Expand G_FMAD a, b, c -&gt; G_FADD (G_FMUL a, b), c</span></div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160; </div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a04873b91eebbedfe4fd28d54029068d6">buildFMul</a>(Ty, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2),</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;                                  Flags);</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afc51b7318978bc4878cce41bdf1774db">buildFAdd</a>(DstReg, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3), Flags);</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;}</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160; </div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06547"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a1422ed8c8a0aea2d84dc7e2f35d24874"> 6547</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a1422ed8c8a0aea2d84dc7e2f35d24874">LegalizerHelper::lowerIntrinsicRound</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> CondTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1);</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160; </div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;  <span class="comment">// round(x) =&gt;</span></div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;  <span class="comment">//  t = trunc(x);</span></div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;  <span class="comment">//  d = fabs(x - t);</span></div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;  <span class="comment">//  o = copysign(1.0f, x);</span></div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;  <span class="comment">//  return t + (d &gt;= 0.5 ? o : 0.0);</span></div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160; </div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;  <span class="keyword">auto</span> <a class="code" href="classT.html">T</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4252eb25f822e53c1bea2ec59e5c0f07">buildIntrinsicTrunc</a>(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Flags);</div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160; </div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;  <span class="keyword">auto</span> Diff = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a02d0daf870f6458a98b61f4b82a399c3">buildFSub</a>(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classT.html">T</a>, Flags);</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;  <span class="keyword">auto</span> AbsDiff = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a2161bd545c3baa8bfaa0d7b44ecf38c4">buildFAbs</a>(Ty, Diff, Flags);</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(Ty, 0.0);</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(Ty, 1.0);</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;  <span class="keyword">auto</span> Half = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(Ty, 0.5);</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;  <span class="keyword">auto</span> SignOne = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac6b47b51bfacb6c594a3c6b8472202c1">buildFCopysign</a>(Ty, One, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160; </div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;  <span class="keyword">auto</span> Cmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afb3340c638c09709ce5766dcf672500d">buildFCmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">CmpInst::FCMP_OGE</a>, CondTy, AbsDiff, Half,</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;                                  Flags);</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;  <span class="keyword">auto</span> Sel = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Ty, Cmp, SignOne, Zero, Flags);</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160; </div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afc51b7318978bc4878cce41bdf1774db">buildFAdd</a>(DstReg, <a class="code" href="classT.html">T</a>, Sel, Flags);</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160; </div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;}</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160; </div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06580"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ab031376e8eddaebf70d2cbcce069b4ba"> 6580</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ab031376e8eddaebf70d2cbcce069b4ba">LegalizerHelper::lowerFFloor</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> CondTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1);</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160; </div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;  <span class="comment">// result = trunc(src);</span></div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;  <span class="comment">// if (src &lt; 0.0 &amp;&amp; src != result)</span></div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;  <span class="comment">//   result += -1.0.</span></div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160; </div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;  <span class="keyword">auto</span> Trunc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4252eb25f822e53c1bea2ec59e5c0f07">buildIntrinsicTrunc</a>(Ty, SrcReg, Flags);</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">buildFConstant</a>(Ty, 0.0);</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160; </div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;  <span class="keyword">auto</span> Lt0 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afb3340c638c09709ce5766dcf672500d">buildFCmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP_OLT</a>, CondTy,</div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;                                  SrcReg, Zero, Flags);</div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;  <span class="keyword">auto</span> NeTrunc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afb3340c638c09709ce5766dcf672500d">buildFCmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">CmpInst::FCMP_ONE</a>, CondTy,</div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;                                      SrcReg, Trunc, Flags);</div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(CondTy, Lt0, NeTrunc);</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;  <span class="keyword">auto</span> AddVal = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8c0db0c02bedbc26aba0fe9ebc77fff9">buildSITOFP</a>(Ty, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>);</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160; </div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afc51b7318978bc4878cce41bdf1774db">buildFAdd</a>(DstReg, Trunc, AddVal, Flags);</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;}</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160; </div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06607"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#abce8515ac1fb3b6be13d5a39418847cb"> 6607</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#abce8515ac1fb3b6be13d5a39418847cb">LegalizerHelper::lowerMergeValues</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumOps = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands();</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src0Reg);</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;  <span class="keywordtype">unsigned</span> PartSize = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160; </div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ResultReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(WideTy, Src0Reg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160; </div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 2; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumOps; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> - 1) * PartSize;</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160; </div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getReg();</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;    <span class="keyword">auto</span> ZextInput = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(WideTy, SrcReg);</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160; </div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> NextResult = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1 == NumOps &amp;&amp; WideTy == DstTy ? DstReg :</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;      MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(WideTy);</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160; </div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;    <span class="keyword">auto</span> Shl = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(WideTy, ZextInput, ShiftAmt);</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(NextResult, ResultReg, Shl);</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;    ResultReg = NextResult;</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;  }</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160; </div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a80f295107105ef76efd7022b579cc8e0">isNonIntegralAddressSpace</a>(</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;          DstTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>())) {</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not casting nonintegral address space\n&quot;</span>);</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;    }</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160; </div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5986a45c021d42bcc2f1563aa25c4cc8">buildIntToPtr</a>(DstReg, ResultReg);</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;  }</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160; </div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;}</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160; </div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06648"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a6abe0f5db91bf445b3962dba969c5c7f"> 6648</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a6abe0f5db91bf445b3962dba969c5c7f">LegalizerHelper::lowerUnmergeValues</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumDst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1;</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDst).getReg();</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst0Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst0Reg);</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>; <span class="comment">// TODO</span></div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160; </div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;  SrcReg = <a class="code" href="classllvm_1_1LegalizerHelper.html#acc6c42a7b5fe244fad430ca7df32d346">coerceToScalar</a>(SrcReg);</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;  <span class="keywordflow">if</span> (!SrcReg)</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160; </div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;  <span class="comment">// Expand scalarizing unmerge as bitcast to integer and shift.</span></div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160; </div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Dst0Reg, SrcReg);</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160; </div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = DstSize;</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumDst; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += DstSize) {</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;    <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(IntTy, SrcReg, ShiftAmt);</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;  }</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160; </div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;}</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;<span class="comment">/// Lower a vector extract or insert by writing the vector to a stack temporary</span></div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;<span class="comment">/// and reloading the element or vector.</span></div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;<span class="comment">/// %dst = G_EXTRACT_VECTOR_ELT %vec, %idx</span></div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;<span class="comment">///  =&gt;</span></div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;<span class="comment">///  %stack_temp = G_FRAME_INDEX</span></div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;<span class="comment">///  G_STORE %vec, %stack_temp</span></div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;<span class="comment">///  %idx = clamp(%idx, %vec.getNumElements())</span></div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;<span class="comment">///  %element_ptr = G_PTR_ADD %stack_temp, %idx</span></div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;<span class="comment">///  %dst = G_LOAD %element_ptr</span></div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06688"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a2fdcff9cc28cfffa71717b8d3c32c781"> 6688</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a2fdcff9cc28cfffa71717b8d3c32c781">LegalizerHelper::lowerExtractInsertVectorElt</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcVec = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InsertVal;</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_INSERT_VECTOR_ELT)</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;    InsertVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160; </div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Idx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1).getReg();</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160; </div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcVec);</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = VecTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160; </div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;  int64_t IdxVal;</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MIPatternMatch.html#aa9bd186f4281a367fb872d17d0e7728b">mi_match</a>(Idx, MRI, <a class="code" href="namespacellvm_1_1MIPatternMatch.html#a316dd9aa25d9ec9d6d21b56e4296e824">m_ICst</a>(IdxVal)) &amp;&amp; IdxVal &lt;= NumElts) {</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> SrcRegs;</div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;    extractParts(SrcVec, EltTy, NumElts, SrcRegs);</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160; </div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;    <span class="keywordflow">if</span> (InsertVal) {</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;      SrcRegs[IdxVal] = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(DstReg, SrcRegs);</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(DstReg, SrcRegs[IdxVal]);</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;    }</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160; </div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;  }</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160; </div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;  <span class="keywordflow">if</span> (!EltTy.<a class="code" href="classllvm_1_1LLT.html#a8b8f5d788ec31cd57f429ce38b5e3bb7">isByteSized</a>()) { <span class="comment">// Not implemented.</span></div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t handle non-byte element vectors yet\n&quot;</span>);</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;  }</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160; </div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;  <span class="keywordtype">unsigned</span> EltBytes = EltTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> VecAlign = <a class="code" href="classllvm_1_1LegalizerHelper.html#aee39b6aa6b9299acb9388393e34f3937">getStackTemporaryAlignment</a>(VecTy);</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> EltAlign;</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160; </div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> PtrInfo;</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;  <span class="keyword">auto</span> StackTemp = <a class="code" href="classllvm_1_1LegalizerHelper.html#a576b964fe2d7d8750601681e04f05a9c">createStackTemporary</a>(<a class="code" href="classllvm_1_1TypeSize.html#a06e32f822cc82701a5652331bccab467">TypeSize::Fixed</a>(VecTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>()),</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;                                        VecAlign, PtrInfo);</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(SrcVec, StackTemp, PtrInfo, VecAlign);</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160; </div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;  <span class="comment">// Get the pointer to the element, and be sure not to hit undefined behavior</span></div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;  <span class="comment">// if the index is out of bounds.</span></div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> EltPtr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae91b4ff9d9c084c672f78adb9ed4006a">getVectorElementPointer</a>(StackTemp.getReg(0), VecTy, Idx);</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160; </div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MIPatternMatch.html#aa9bd186f4281a367fb872d17d0e7728b">mi_match</a>(Idx, MRI, <a class="code" href="namespacellvm_1_1MIPatternMatch.html#a316dd9aa25d9ec9d6d21b56e4296e824">m_ICst</a>(IdxVal))) {</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;    int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = IdxVal * EltBytes;</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;    PtrInfo = PtrInfo.<a class="code" href="structllvm_1_1MachinePointerInfo.html#a9459055a98e20980521289e8d20fcc7e">getWithOffset</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;    EltAlign = <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(VecAlign, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;    <span class="comment">// We lose information with a variable offset.</span></div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;    EltAlign = <a class="code" href="classllvm_1_1LegalizerHelper.html#aee39b6aa6b9299acb9388393e34f3937">getStackTemporaryAlignment</a>(EltTy);</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;    PtrInfo = <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(EltPtr).<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>());</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;  }</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160; </div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;  <span class="keywordflow">if</span> (InsertVal) {</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;    <span class="comment">// Write the inserted element</span></div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">buildStore</a>(InsertVal, EltPtr, PtrInfo, EltAlign);</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160; </div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;    <span class="comment">// Reload the whole vector.</span></div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(DstReg, StackTemp, PtrInfo, VecAlign);</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(DstReg, EltPtr, PtrInfo, EltAlign);</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;  }</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160; </div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;}</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160; </div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06760"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#abac7927a227a6c370e26ee82af77567d"> 6760</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#abac7927a227a6c370e26ee82af77567d">LegalizerHelper::lowerShuffleVector</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Src0Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src0Reg);</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160; </div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getShuffleMask();</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160; </div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;    <span class="keywordflow">if</span> (Src0Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160; </div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;    <span class="comment">// This is just a SELECT.</span></div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.size() == 1 &amp;&amp; <span class="stringliteral">&quot;Expected a single mask element&quot;</span>);</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Val;</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[0] &lt; 0 || <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[0] &gt; 1)</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;      Val = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(DstTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;      Val = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[0] == 0 ? Src0Reg : Src1Reg;</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(DstReg, Val);</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;  }</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160; </div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>;</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 32&gt;</a> BuildVec;</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160; </div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Idx : <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>) {</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0) {</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>.isValid())</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;        <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(EltTy).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;      BuildVec.push_back(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;    }</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160; </div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;    <span class="keywordflow">if</span> (Src0Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;      BuildVec.push_back(Idx == 0 ? Src0Reg : Src1Reg);</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;      <span class="keywordtype">int</span> NumElts = Src0Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> SrcVec = Idx &lt; NumElts ? Src0Reg : Src1Reg;</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;      <span class="keywordtype">int</span> ExtractIdx = Idx &lt; NumElts ? Idx : Idx - NumElts;</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;      <span class="keyword">auto</span> IdxK = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IdxTy, ExtractIdx);</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;      <span class="keyword">auto</span> Extract = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7835e6cd3f1b340d3bb617304038d744">buildExtractVectorElement</a>(EltTy, SrcVec, IdxK);</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;      BuildVec.push_back(Extract.getReg(0));</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;    }</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;  }</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160; </div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">buildBuildVector</a>(DstReg, BuildVec);</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;}</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160; </div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06816"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a0b54c43cec90635e63e99f792b9207bc"> 6816</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a0b54c43cec90635e63e99f792b9207bc">LegalizerHelper::lowerDynStackAlloc</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF();</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;TFI = *MF.getSubtarget().getFrameLowering();</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;  <span class="keywordflow">if</span> (TFI.getStackGrowthDirection() == <a class="code" href="classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50ca5a5dea77f2a0aaffed9741ae04e8d865">TargetFrameLowering::StackGrowsUp</a>)</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160; </div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AllocSize = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#ad4b2e7a84faf3d7b6ffb84b541358e00">assumeAligned</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm());</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160; </div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntPtrTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160; </div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SPReg = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a5de0162fac7c57cab62e5bb81f0b5542">getStackPointerRegisterToSaveRestore</a>();</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;  <span class="keyword">auto</span> SPTmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(PtrTy, SPReg);</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;  SPTmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3493ece271aff0f2c3d162494e3fcc81">buildCast</a>(IntPtrTy, SPTmp);</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160; </div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;  <span class="comment">// Subtract the final alloc from the SP. We use G_PTRTOINT here so we don&#39;t</span></div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;  <span class="comment">// have to generate an extra instruction to negate the alloc and then use</span></div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;  <span class="comment">// G_PTR_ADD to add the negative offset.</span></div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;  <span class="keyword">auto</span> Alloc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(IntPtrTy, SPTmp, AllocSize);</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;  <span class="keywordflow">if</span> (Alignment &gt; <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1)) {</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> AlignMask(IntPtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), Alignment.<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;    AlignMask.<a class="code" href="classllvm_1_1APInt.html#a8376734f311508662dd7e737752e5953">negate</a>();</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;    <span class="keyword">auto</span> AlignCst = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntPtrTy, AlignMask);</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;    Alloc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(IntPtrTy, Alloc, AlignCst);</div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;  }</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160; </div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;  SPTmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3493ece271aff0f2c3d162494e3fcc81">buildCast</a>(PtrTy, Alloc);</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(SPReg, SPTmp);</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(Dst, SPTmp);</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160; </div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;}</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160; </div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l06853"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a76e5a8c6363a48b3ca4e924a8f59f0e5"> 6853</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a76e5a8c6363a48b3ca4e924a8f59f0e5">LegalizerHelper::lowerExtract</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160; </div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160; </div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;  <span class="comment">// Extract sub-vector or one element</span></div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;    <span class="keywordtype">unsigned</span> SrcEltSize = SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;    <span class="keywordtype">unsigned</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160; </div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> % SrcEltSize == 0) &amp;&amp; (DstSize % SrcEltSize == 0) &amp;&amp;</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;        (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + DstSize &lt;= SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())) {</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;      <span class="comment">// Unmerge and allow access to each Src element for the artifact combiner.</span></div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>(), Src);</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160; </div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;      <span class="comment">// Take element(s) we need to extract and copy it (merge them).</span></div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> SubVectorElts;</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> / SrcEltSize;</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;           Idx &lt; (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + DstSize) / SrcEltSize; ++Idx) {</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;        SubVectorElts.push_back(Unmerge.getReg(Idx));</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;      }</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;      <span class="keywordflow">if</span> (SubVectorElts.size() == 1)</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(Dst, SubVectorElts[0]);</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(Dst, SubVectorElts);</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160; </div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;    }</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;  }</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160; </div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp;</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;      (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() ||</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;       (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; DstTy == SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>()))) {</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcIntTy = SrcTy;</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;    <span class="keywordflow">if</span> (!SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;      SrcIntTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;      Src = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">buildBitcast</a>(SrcIntTy, Src).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;    }</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160; </div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> == 0)</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Dst, Src);</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;      <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(SrcIntTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;      <span class="keyword">auto</span> Shr = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(SrcIntTy, Src, ShiftAmt);</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Dst, Shr);</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;    }</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160; </div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;  }</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160; </div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;}</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160; </div>
<div class="line"><a name="l06911"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a743aa32715279bdb86b53f20065950c9"> 6911</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#a743aa32715279bdb86b53f20065950c9">LegalizerHelper::lowerInsert</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> InsertSrc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getImm();</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160; </div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> InsertTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(InsertSrc);</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160; </div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;  <span class="comment">// Insert sub-vector or one element</span></div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;  <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; !InsertTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>()) {</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;    <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;    <span class="keywordtype">unsigned</span> InsertSize = InsertTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160; </div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> % EltSize == 0) &amp;&amp; (InsertSize % EltSize == 0) &amp;&amp;</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;        (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + InsertSize &lt;= DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())) {</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;      <span class="keyword">auto</span> UnmergeSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(EltTy, Src);</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> DstElts;</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;      <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;      <span class="comment">// Elements from Src before insert start Offset</span></div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;      <span class="keywordflow">for</span> (; Idx &lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> / EltSize; ++Idx) {</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;        DstElts.push_back(UnmergeSrc.getReg(Idx));</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;      }</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160; </div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;      <span class="comment">// Replace elements in Src with elements from InsertSrc</span></div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;      <span class="keywordflow">if</span> (InsertTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; EltSize) {</div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;        <span class="keyword">auto</span> UnmergeInsertSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(EltTy, InsertSrc);</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; Idx &lt; (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + InsertSize) / EltSize;</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;             ++Idx, ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;          DstElts.push_back(UnmergeInsertSrc.getReg(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;        }</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;        DstElts.push_back(InsertSrc);</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;        ++Idx;</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;      }</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160; </div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;      <span class="comment">// Remaining elements from Src after insert</span></div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;      <span class="keywordflow">for</span> (; Idx &lt; DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>(); ++Idx) {</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;        DstElts.push_back(UnmergeSrc.getReg(Idx));</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;      }</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160; </div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">buildMergeLikeInstr</a>(Dst, DstElts);</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;    }</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;  }</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160; </div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;  <span class="keywordflow">if</span> (InsertTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ||</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;      (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() != InsertTy))</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160; </div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">getDataLayout</a>();</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;  <span class="keywordflow">if</span> ((DstTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp;</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;       <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralAddressSpace(DstTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>())) ||</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;      (InsertTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp;</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;       <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isNonIntegralAddressSpace(InsertTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>()))) {</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not casting non-integral address space integer\n&quot;</span>);</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;  }</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160; </div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntDstTy = DstTy;</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160; </div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;  <span class="keywordflow">if</span> (!DstTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;    IntDstTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;    Src = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3493ece271aff0f2c3d162494e3fcc81">buildCast</a>(IntDstTy, Src).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;  }</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160; </div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;  <span class="keywordflow">if</span> (!InsertTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntInsertTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(InsertTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;    InsertSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(IntInsertTy, InsertSrc).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;  }</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160; </div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ExtInsSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">buildZExt</a>(IntDstTy, InsertSrc).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> != 0) {</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntDstTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;    ExtInsSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(IntDstTy, ExtInsSrc, ShiftAmt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;  }</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160; </div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaskVal = <a class="code" href="classllvm_1_1APInt.html#af3bee3e462a14abdf3858c354a5cd222">APInt::getBitsSetWithWrap</a>(</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;      DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + InsertTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160; </div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntDstTy, MaskVal);</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;  <span class="keyword">auto</span> MaskedSrc = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(IntDstTy, Src, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(IntDstTy, MaskedSrc, ExtInsSrc);</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160; </div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3493ece271aff0f2c3d162494e3fcc81">buildCast</a>(Dst, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>);</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;}</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160; </div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07003"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a545272144fee7632786d2fc0427ec6db"> 7003</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a545272144fee7632786d2fc0427ec6db">LegalizerHelper::lowerSADDO_SSUBO</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsAdd = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SADDO;</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160; </div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst0);</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> BoolTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst1);</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160; </div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;  <span class="keywordflow">if</span> (IsAdd)</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(Dst0, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Dst0, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160; </div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;  <span class="comment">// TODO: If SADDSAT/SSUBSAT is legal, compare results to detect overflow.</span></div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160; </div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, 0);</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160; </div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;  <span class="comment">// For an addition, the result should be less than one of the operands (LHS)</span></div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;  <span class="comment">// if and only if the other operand (RHS) is negative, otherwise there will</span></div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;  <span class="comment">// be overflow.</span></div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;  <span class="comment">// For a subtraction, the result should be less than one of the operands</span></div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;  <span class="comment">// (LHS) if and only if the other operand (RHS) is (non-zero) positive,</span></div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;  <span class="comment">// otherwise there will be overflow.</span></div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;  <span class="keyword">auto</span> ResultLowerThanLHS =</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, BoolTy, Dst0, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;  <span class="keyword">auto</span> ConditionRHS = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;      IsAdd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, BoolTy, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Zero);</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160; </div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(Dst1, ConditionRHS, ResultLowerThanLHS);</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;}</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160; </div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07039"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a813d1719803526d9839b4ae8d0a6b93d"> 7039</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a813d1719803526d9839b4ae8d0a6b93d">LegalizerHelper::lowerAddSubSatToMinMax</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;  <span class="keywordtype">bool</span> IsSigned;</div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;  <span class="keywordtype">bool</span> IsAdd;</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;  <span class="keywordtype">unsigned</span> BaseOp;</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unexpected addsat/subsat opcode&quot;</span>);</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDSAT:</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;    IsSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;    IsAdd = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;    BaseOp = TargetOpcode::G_ADD;</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDSAT:</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;    IsSigned = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;    IsAdd = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;    BaseOp = TargetOpcode::G_ADD;</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBSAT:</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;    IsSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;    IsAdd = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;    BaseOp = TargetOpcode::G_SUB;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBSAT:</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;    IsSigned = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;    IsAdd = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;    BaseOp = TargetOpcode::G_SUB;</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;  }</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160; </div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;  <span class="keywordflow">if</span> (IsSigned) {</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;    <span class="comment">// sadd.sat(a, b) -&gt;</span></div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;    <span class="comment">//   hi = 0x7fffffff - smax(a, 0)</span></div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;    <span class="comment">//   lo = 0x80000000 - smin(a, 0)</span></div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;    <span class="comment">//   a + smin(smax(lo, b), hi)</span></div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;    <span class="comment">// ssub.sat(a, b) -&gt;</span></div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;    <span class="comment">//   lo = smax(a, -1) - 0x7fffffff</span></div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;    <span class="comment">//   hi = smin(a, -1) - 0x80000000</span></div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;    <span class="comment">//   a - smin(smax(lo, b), hi)</span></div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;    <span class="comment">// TODO: AMDGPU can use a &quot;median of 3&quot; instruction here:</span></div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;    <span class="comment">//   a +/- med3(lo, b, hi)</span></div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumBits = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;    <span class="keyword">auto</span> MaxVal =</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(NumBits));</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;    <span class="keyword">auto</span> MinVal =</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(NumBits));</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Hi, Lo;</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;    <span class="keywordflow">if</span> (IsAdd) {</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;      <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, 0);</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, MaxVal, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a42ee731fc4e33eab8c5d6f76f8d8b2">buildSMax</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Zero));</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, MinVal, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aad02a49b6c2f7c3c92a4ad7df5c4eb47">buildSMin</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Zero));</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;      <span class="keyword">auto</span> NegOne = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, -1);</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;      Lo = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a42ee731fc4e33eab8c5d6f76f8d8b2">buildSMax</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, NegOne),</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;                               MaxVal);</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;      Hi = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aad02a49b6c2f7c3c92a4ad7df5c4eb47">buildSMin</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, NegOne),</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;                               MinVal);</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;    }</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;    <span class="keyword">auto</span> RHSClamped =</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aad02a49b6c2f7c3c92a4ad7df5c4eb47">buildSMin</a>(Ty, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a42ee731fc4e33eab8c5d6f76f8d8b2">buildSMax</a>(Ty, Lo, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>), Hi);</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(BaseOp, {Res}, {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, RHSClamped});</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;    <span class="comment">// uadd.sat(a, b) -&gt; a + umin(~a, b)</span></div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;    <span class="comment">// usub.sat(a, b) -&gt; a - umin(a, b)</span></div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Not = IsAdd ? <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a16532d0d8fb47080714810131b45b75b">buildNot</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0) : <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;    <span class="keyword">auto</span> Min = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af9ac32566a3d7b10a68fac371f15f643">buildUMin</a>(Ty, Not, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(BaseOp, {Res}, {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Min});</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;  }</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160; </div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;}</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160; </div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07116"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aae6d16ec0f044086e929d63d532178bf"> 7116</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aae6d16ec0f044086e929d63d532178bf">LegalizerHelper::lowerAddSubSatToAddoSubo</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> BoolTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1);</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;  <span class="keywordtype">bool</span> IsSigned;</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;  <span class="keywordtype">bool</span> IsAdd;</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;  <span class="keywordtype">unsigned</span> OverflowOp;</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unexpected addsat/subsat opcode&quot;</span>);</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UADDSAT:</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;    IsSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;    IsAdd = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;    OverflowOp = TargetOpcode::G_UADDO;</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SADDSAT:</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;    IsSigned = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;    IsAdd = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;    OverflowOp = TargetOpcode::G_SADDO;</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_USUBSAT:</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;    IsSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;    IsAdd = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;    OverflowOp = TargetOpcode::G_USUBO;</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SSUBSAT:</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;    IsSigned = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;    IsAdd = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;    OverflowOp = TargetOpcode::G_SSUBO;</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;  }</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160; </div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;  <span class="keyword">auto</span> OverflowRes =</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(OverflowOp, {Ty, BoolTy}, {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>});</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Tmp = OverflowRes.getReg(0);</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Ov = OverflowRes.getReg(1);</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Clamp;</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;  <span class="keywordflow">if</span> (IsSigned) {</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;    <span class="comment">// sadd.sat(a, b) -&gt;</span></div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;    <span class="comment">//   {tmp, ov} = saddo(a, b)</span></div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;    <span class="comment">//   ov ? (tmp &gt;&gt;s 31) + 0x80000000 : r</span></div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;    <span class="comment">// ssub.sat(a, b) -&gt;</span></div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;    <span class="comment">//   {tmp, ov} = ssubo(a, b)</span></div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;    <span class="comment">//   ov ? (tmp &gt;&gt;s 31) + 0x80000000 : r</span></div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumBits = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;    <span class="keyword">auto</span> ShiftAmount = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, NumBits - 1);</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;    <span class="keyword">auto</span> Sign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(Ty, Tmp, ShiftAmount);</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;    <span class="keyword">auto</span> MinVal =</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(NumBits));</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;    Clamp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(Ty, Sign, MinVal);</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;    <span class="comment">// uadd.sat(a, b) -&gt;</span></div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;    <span class="comment">//   {tmp, ov} = uaddo(a, b)</span></div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;    <span class="comment">//   ov ? 0xffffffff : tmp</span></div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;    <span class="comment">// usub.sat(a, b) -&gt;</span></div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;    <span class="comment">//   {tmp, ov} = usubo(a, b)</span></div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;    <span class="comment">//   ov ? 0 : tmp</span></div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;    Clamp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, IsAdd ? -1 : 0);</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;  }</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Res, Ov, Clamp, Tmp);</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160; </div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;}</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160; </div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07184"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a00a7edf44feca96dfa6abdc4ae5d705d"> 7184</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a00a7edf44feca96dfa6abdc4ae5d705d">LegalizerHelper::lowerShlSat</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SSHLSAT ||</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_USHLSAT) &amp;&amp;</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;         <span class="stringliteral">&quot;Expected shlsat opcode!&quot;</span>);</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;  <span class="keywordtype">bool</span> IsSigned = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SSHLSAT;</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> BoolTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(1);</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160; </div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;  <span class="keywordtype">unsigned</span> BW = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;  <span class="keyword">auto</span> Result = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;  <span class="keyword">auto</span> Orig = IsSigned ? <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(Ty, Result, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;                       : <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, Result, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160; </div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> SatVal;</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;  <span class="keywordflow">if</span> (IsSigned) {</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;    <span class="keyword">auto</span> SatMin = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(BW));</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;    <span class="keyword">auto</span> SatMax = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(BW));</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;    <span class="keyword">auto</span> Cmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, BoolTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;                                    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, 0));</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;    SatVal = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Ty, Cmp, SatMin, SatMax);</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;    SatVal = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, <a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(BW));</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;  }</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;  <span class="keyword">auto</span> Ov = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, BoolTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Orig);</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Res, Ov, SatVal, Result);</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160; </div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;}</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160; </div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07218"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ae62214791d9e4dcb2f7eda048092458f"> 7218</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#ae62214791d9e4dcb2f7eda048092458f">LegalizerHelper::lowerBswap</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;  <span class="keywordtype">unsigned</span> SizeInBytes = (Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() + 7) / 8;</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;  <span class="keywordtype">unsigned</span> BaseShiftAmt = (SizeInBytes - 1) * 8;</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160; </div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;  <span class="comment">// Swap most and least significant byte, set remaining bytes in Res to zero.</span></div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;  <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, BaseShiftAmt);</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;  <span class="keyword">auto</span> LSByteShiftedLeft = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, Src, ShiftAmt);</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;  <span class="keyword">auto</span> MSByteShiftedRight = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, Src, ShiftAmt);</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;  <span class="keyword">auto</span> Res = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(Ty, MSByteShiftedRight, LSByteShiftedLeft);</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160; </div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;  <span class="comment">// Set i-th high/low byte in Res to i-th low/high byte from Src.</span></div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; SizeInBytes / 2; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;    <span class="comment">// AND with Mask leaves byte i unchanged and sets remaining bytes to 0.</span></div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> APMask(SizeInBytes * 8, 0xFF &lt;&lt; (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> * 8));</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, APMask);</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;    <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, BaseShiftAmt - 16 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;    <span class="comment">// Low byte shifted left to place of high byte: (Src &amp; Mask) &lt;&lt; ShiftAmt.</span></div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;    <span class="keyword">auto</span> LoByte = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(Ty, Src, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;    <span class="keyword">auto</span> LoShiftedLeft = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Ty, LoByte, ShiftAmt);</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;    Res = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(Ty, Res, LoShiftedLeft);</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;    <span class="comment">// High byte shifted right to place of low byte: (Src &gt;&gt; ShiftAmt) &amp; Mask.</span></div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;    <span class="keyword">auto</span> SrcShiftedRight = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Ty, Src, ShiftAmt);</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;    <span class="keyword">auto</span> HiShiftedRight = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(Ty, SrcShiftedRight, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;    Res = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(Ty, Res, HiShiftedRight);</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;  }</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;  Res.getInstr()-&gt;getOperand(0).setReg(Dst);</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160; </div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;}</div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160; </div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;<span class="comment">//{ (Src &amp; Mask) &gt;&gt; N } | { (Src &lt;&lt; N) &amp; Mask }</span></div>
<div class="line"><a name="l07253"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a0e2a54fd566b6bf48d197b334d242e91"> 7253</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="LegalizerHelper_8cpp.html#a0e2a54fd566b6bf48d197b334d242e91">SwapN</a>(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1DstOp.html">DstOp</a> Dst, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;                                 <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Src, <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>) {</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Dst.getLLTTy(*<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI());</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> C_N = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MaskLoNTo0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(Ty, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLShr(Ty, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(Ty, Src, MaskLoNTo0), C_N);</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(Ty, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildShl(Ty, Src, C_N), MaskLoNTo0);</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildOr(Dst, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;}</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160; </div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07264"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a2ed659cad017d524d63d763e19ef756f"> 7264</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a2ed659cad017d524d63d763e19ef756f">LegalizerHelper::lowerBitreverse</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;  <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160; </div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a19328c462764af5f4699fb1698dad994">BSWAP</a> =</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::G_BSWAP, {Ty}, {Src});</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160; </div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;  <span class="comment">// swap high and low 4 bits in 8 bit blocks 7654|3210 -&gt; 3210|7654</span></div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;  <span class="comment">//    [(val &amp; 0xF0F0F0F0) &gt;&gt; 4] | [(val &amp; 0x0F0F0F0F) &lt;&lt; 4]</span></div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;  <span class="comment">// -&gt; [(val &amp; 0xF0F0F0F0) &gt;&gt; 4] | [(val &lt;&lt; 4) &amp; 0xF0F0F0F0]</span></div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Swap4 =</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a0e2a54fd566b6bf48d197b334d242e91">SwapN</a>(4, Ty, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a19328c462764af5f4699fb1698dad994">BSWAP</a>, <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0xF0)));</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160; </div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;  <span class="comment">// swap high and low 2 bits in 4 bit blocks 32|10 76|54 -&gt; 10|32 54|76</span></div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;  <span class="comment">//    [(val &amp; 0xCCCCCCCC) &gt;&gt; 2] &amp; [(val &amp; 0x33333333) &lt;&lt; 2]</span></div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;  <span class="comment">// -&gt; [(val &amp; 0xCCCCCCCC) &gt;&gt; 2] &amp; [(val &lt;&lt; 2) &amp; 0xCCCCCCCC]</span></div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Swap2 =</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;      <a class="code" href="LegalizerHelper_8cpp.html#a0e2a54fd566b6bf48d197b334d242e91">SwapN</a>(2, Ty, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Swap4, <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0xCC)));</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160; </div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;  <span class="comment">// swap high and low 1 bit in 2 bit blocks 1|0 3|2 5|4 7|6 -&gt; 0|1 2|3 4|5 6|7</span></div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;  <span class="comment">//    [(val &amp; 0xAAAAAAAA) &gt;&gt; 1] &amp; [(val &amp; 0x55555555) &lt;&lt; 1]</span></div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;  <span class="comment">// -&gt; [(val &amp; 0xAAAAAAAA) &gt;&gt; 1] &amp; [(val &lt;&lt; 1) &amp; 0xAAAAAAAA]</span></div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;  <a class="code" href="LegalizerHelper_8cpp.html#a0e2a54fd566b6bf48d197b334d242e91">SwapN</a>(1, Dst, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>, Swap2, <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Size, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0xAA)));</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160; </div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;}</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160; </div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07295"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a76df0b752eddd8b0711d1af16a3658ad"> 7295</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a76df0b752eddd8b0711d1af16a3658ad">LegalizerHelper::lowerReadWriteRegister</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160; </div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;  <span class="keywordtype">bool</span> IsRead = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_READ_REGISTER;</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;  <span class="keywordtype">int</span> NameOpIdx = IsRead ? 1 : 0;</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;  <span class="keywordtype">int</span> ValRegIndex = IsRead ? 0 : 1;</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160; </div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ValReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ValRegIndex).getReg();</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(ValReg);</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MDString.html">MDString</a> *RegStr = cast&lt;MDString&gt;(</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;    cast&lt;MDNode&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NameOpIdx).getMetadata())-&gt;getOperand(0));</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160; </div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PhysReg = TLI.<a class="code" href="classllvm_1_1TargetLowering.html#a349007dec8d5a6ab5e7d338c282003ca">getRegisterByName</a>(RegStr-&gt;<a class="code" href="classllvm_1_1MDString.html#ae44259d9edd71181ea8b89d18f27a967">getString</a>().<a class="code" href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">data</a>(), Ty, MF);</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;  <span class="keywordflow">if</span> (!PhysReg.<a class="code" href="classllvm_1_1Register.html#a4a6966b99e305bd6f01fb17c645ae3da">isValid</a>())</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160; </div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;  <span class="keywordflow">if</span> (IsRead)</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(ValReg, PhysReg);</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(PhysReg, ValReg);</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160; </div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;}</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160; </div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07321"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a1a84546a5ff646ed05b5772e00084db6"> 7321</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a1a84546a5ff646ed05b5772e00084db6">LegalizerHelper::lowerSMULH_UMULH</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;  <span class="keywordtype">bool</span> IsSigned = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_SMULH;</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;  <span class="keywordtype">unsigned</span> ExtOp = IsSigned ? TargetOpcode::G_SEXT : TargetOpcode::G_ZEXT;</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Result = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> OrigTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Result);</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;  <span class="keyword">auto</span> SizeInBits = OrigTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy = OrigTy.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(SizeInBits * 2);</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160; </div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOp, {WideTy}, {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1)});</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ExtOp, {WideTy}, {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2)});</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(WideTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;  <span class="keywordtype">unsigned</span> ShiftOp = IsSigned ? TargetOpcode::G_ASHR : TargetOpcode::G_LSHR;</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160; </div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;  <span class="keyword">auto</span> ShiftAmt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(WideTy, SizeInBits);</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;  <span class="keyword">auto</span> Shifted = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(ShiftOp, {WideTy}, {<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, ShiftAmt});</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">buildTrunc</a>(Result, Shifted);</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160; </div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;}</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160; </div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07343"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a79ddea5769637d54074168769084f404"> 7343</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a79ddea5769637d54074168769084f404">LegalizerHelper::lowerISFPCLASS</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160; </div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> == 0) {</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstReg, 0);</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;  }</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>) == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>) {</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstReg, 1);</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;  }</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160; </div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;  <span class="keywordtype">unsigned</span> BitSize = SrcTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Semantics = <a class="code" href="namespacellvm.html#a25ebf05ccdc20f3355715fb29ee82427">getFltSemanticForLLT</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>());</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160; </div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IntTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(BitSize);</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;    IntTy = <a class="code" href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>(), IntTy);</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;  <span class="keyword">auto</span> AsInt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(IntTy, SrcReg);</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160; </div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;  <span class="comment">// Various masks.</span></div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> SignBit = <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(BitSize);</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> ValueMask = <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(BitSize);     <span class="comment">// All bits but sign.</span></div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Inf = <a class="code" href="classllvm_1_1APFloat.html#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics).<a class="code" href="classllvm_1_1APFloat.html#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>(); <span class="comment">// Exp and int bit.</span></div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> ExpMask = Inf;</div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> AllOneMantissa = <a class="code" href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(Semantics).<a class="code" href="classllvm_1_1APFloat.html#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>() &amp; ~Inf;</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> QNaNBitMask =</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;      <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(BitSize, AllOneMantissa.<a class="code" href="classllvm_1_1APInt.html#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() - 1);</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> InvertionMask = <a class="code" href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160; </div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;  <span class="keyword">auto</span> SignBitC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, SignBit);</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;  <span class="keyword">auto</span> ValueMaskC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, ValueMask);</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;  <span class="keyword">auto</span> InfC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, Inf);</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;  <span class="keyword">auto</span> ExpMaskC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, ExpMask);</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;  <span class="keyword">auto</span> ZeroC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, 0);</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160; </div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;  <span class="keyword">auto</span> Abs = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(IntTy, AsInt, ValueMaskC);</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;  <span class="keyword">auto</span> Sign =</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_NE, DstTy, AsInt, Abs);</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160; </div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;  <span class="keyword">auto</span> Res = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, 0);</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> appendToRes = [&amp;](<a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> ToAppend) {</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;    Res = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(DstTy, Res, ToAppend);</div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;  };</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160; </div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;  <span class="comment">// Tests that involve more than one class should be processed first.</span></div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a>) == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a>) {</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;    <span class="comment">// finite(V) ==&gt; abs(V) u&lt; exp_mask</span></div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;    appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_ULT, DstTy, Abs,</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;                                     ExpMaskC));</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp;= ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a>;</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a>) == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1e0f1de98d5e5415cf2ae9aa20993d69">fcPosFinite</a>) {</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;    <span class="comment">// finite(V) &amp;&amp; V &gt; 0 ==&gt; V u&lt; exp_mask</span></div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;    appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_ULT, DstTy, AsInt,</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;                                     ExpMaskC));</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp;= ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1e0f1de98d5e5415cf2ae9aa20993d69">fcPosFinite</a>;</div>
<div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a>) == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67aad6706481db6d8fac9a1cb6c3edd3b41">fcNegFinite</a>) {</div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;    <span class="comment">// finite(V) &amp;&amp; V &lt; 0 ==&gt; abs(V) u&lt; exp_mask &amp;&amp; signbit == 1</span></div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;    <span class="keyword">auto</span> Cmp = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_ULT, DstTy, Abs,</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;                                    ExpMaskC);</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(DstTy, Cmp, Sign);</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;    appendToRes(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>);</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp;= ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67aad6706481db6d8fac9a1cb6c3edd3b41">fcNegFinite</a>;</div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;  }</div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160; </div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;  <span class="comment">// Check for individual classes.</span></div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PartialCheck = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247">fcZero</a>) {</div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;    <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3ce5d8e60ab35c2eac434686f7938f13">fcPosZero</a>)</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;      appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, DstTy,</div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;                                       AsInt, ZeroC));</div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247">fcZero</a>)</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;      appendToRes(</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, DstTy, Abs, ZeroC));</div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// fcNegZero</span></div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;      appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, DstTy,</div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;                                       AsInt, SignBitC));</div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;  }</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160; </div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PartialCheck = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a22e3d9fb3f1b84617e3a3ef5c51145c7">fcInf</a>) {</div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;    <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a>)</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;      appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, DstTy,</div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;                                       AsInt, InfC));</div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a22e3d9fb3f1b84617e3a3ef5c51145c7">fcInf</a>)</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;      appendToRes(</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, DstTy, Abs, InfC));</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">// fcNegInf</span></div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> NegInf = <a class="code" href="classllvm_1_1APFloat.html#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics, <span class="keyword">true</span>).<a class="code" href="classllvm_1_1APFloat.html#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>();</div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;      <span class="keyword">auto</span> NegInfC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, NegInf);</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;      appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_EQ, DstTy,</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;                                       AsInt, NegInfC));</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;    }</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;  }</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160; </div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PartialCheck = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a>) {</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;    <span class="keyword">auto</span> InfWithQnanBitC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, Inf | QNaNBitMask);</div>
<div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;    <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a>) {</div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;      <span class="comment">// isnan(V) ==&gt; abs(V) u&gt; int(inf)</span></div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;      appendToRes(</div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_UGT, DstTy, Abs, InfC));</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a9db118513388c635dee4a573de902842">fcQNan</a>) {</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;      <span class="comment">// isquiet(V) ==&gt; abs(V) u&gt;= (unsigned(Inf) | quiet_bit)</span></div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;      appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_UGE, DstTy, Abs,</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;                                       InfWithQnanBitC));</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// fcSNan</span></div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;      <span class="comment">// issignaling(V) ==&gt; abs(V) u&gt; unsigned(Inf) &amp;&amp;</span></div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;      <span class="comment">//                    abs(V) u&lt; (unsigned(Inf) | quiet_bit)</span></div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;      <span class="keyword">auto</span> IsNan =</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;          <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_UGT, DstTy, Abs, InfC);</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;      <span class="keyword">auto</span> IsNotQnan = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_ULT, DstTy,</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;                                            Abs, InfWithQnanBitC);</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;      appendToRes(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(DstTy, IsNan, IsNotQnan));</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;    }</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;  }</div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160; </div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PartialCheck = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1d0a7c99f3541df874ad98ba481b27d6">fcSubnormal</a>) {</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;    <span class="comment">// issubnormal(V) ==&gt; unsigned(abs(V) - 1) u&lt; (all mantissa bits set)</span></div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;    <span class="comment">// issubnormal(V) &amp;&amp; V&gt;0 ==&gt; unsigned(V - 1) u&lt; (all mantissa bits set)</span></div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    <span class="keyword">auto</span> V = (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a2415abc0d17bb4bfad67606913c8ce10">fcPosSubnormal</a>) ? AsInt : Abs;</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    <span class="keyword">auto</span> OneC = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, 1);</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;    <span class="keyword">auto</span> VMinusOne = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(IntTy, V, OneC);</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;    <span class="keyword">auto</span> SubnormalRes =</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_ULT, DstTy, VMinusOne,</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;                             <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, AllOneMantissa));</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;    <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67aef5dadf4b31ffe9ff41bc8b25bd012de">fcNegSubnormal</a>)</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;      SubnormalRes = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(DstTy, SubnormalRes, Sign);</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;    appendToRes(SubnormalRes);</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;  }</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160; </div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PartialCheck = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a64cb92f784db53c70b9246a3cc632b25">fcNormal</a>) {</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;    <span class="comment">// isnormal(V) ==&gt; (0 u&lt; exp u&lt; max_exp) ==&gt; (unsigned(exp-1) u&lt;</span></div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;    <span class="comment">// (max_exp-1))</span></div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> ExpLSB = ExpMask &amp; ~(ExpMask.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(1));</div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;    <span class="keyword">auto</span> ExpMinusOne = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(</div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;        IntTy, Abs, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, ExpLSB));</div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaxExpMinusOne = ExpMask - ExpLSB;</div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;    <span class="keyword">auto</span> NormalRes =</div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;        <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">buildICmp</a>(CmpInst::Predicate::ICMP_ULT, DstTy, ExpMinusOne,</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;                             <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IntTy, MaxExpMinusOne));</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;    <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74">fcNegNormal</a>)</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;      NormalRes = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(DstTy, NormalRes, Sign);</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PartialCheck == <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67afff82cc4502e0e3bf3575c9622284e18">fcPosNormal</a>) {</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;      <span class="keyword">auto</span> PosSign = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;          DstTy, Sign, <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, InvertionMask));</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;      NormalRes = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(DstTy, NormalRes, PosSign);</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;    }</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;    appendToRes(NormalRes);</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;  }</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160; </div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">buildCopy</a>(DstReg, Res);</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;}</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160; </div>
<div class="line"><a name="l07502"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ad29042068469adc2859360985494dbb9"> 7502</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#ad29042068469adc2859360985494dbb9">LegalizerHelper::lowerSelect</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;  <span class="comment">// Implement vector G_SELECT in terms of XOR, AND, OR.</span></div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MaskReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Op1Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Op2Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> MaskTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(MaskReg);</div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;  <span class="keywordflow">if</span> (!DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160; </div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;  <span class="keywordtype">bool</span> IsEltPtr = DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>();</div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;  <span class="keywordflow">if</span> (IsEltPtr) {</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> ScalarPtrTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewTy = DstTy.<a class="code" href="classllvm_1_1LLT.html#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(ScalarPtrTy);</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;    Op1Reg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(NewTy, Op1Reg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;    Op2Reg = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">buildPtrToInt</a>(NewTy, Op2Reg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;    DstTy = NewTy;</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;  }</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160; </div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;  <span class="keywordflow">if</span> (MaskTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;    <span class="comment">// Turn the scalar condition into a vector condition mask.</span></div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160; </div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> MaskElt = MaskReg;</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160; </div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;    <span class="comment">// The condition was potentially zero extended before, but we want a sign</span></div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;    <span class="comment">// extended boolean.</span></div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;    <span class="keywordflow">if</span> (MaskTy != <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1))</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;      MaskElt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#afe73ac7a93f98c40c8fb66fce8fa4400">buildSExtInReg</a>(MaskTy, MaskElt, 1).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160; </div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;    <span class="comment">// Continue the sign extension (or truncate) to match the data type.</span></div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;    MaskElt = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a437e7190e38ee7e10daee0f4909d5066">buildSExtOrTrunc</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>(),</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;                                          MaskElt).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160; </div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;    <span class="comment">// Generate a vector splat idiom.</span></div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;    <span class="keyword">auto</span> ShufSplat = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a43b43271e5bcbbc5cc620b4dfa94937a">buildShuffleSplat</a>(DstTy, MaskElt);</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;    MaskReg = ShufSplat.getReg(0);</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;    MaskTy = DstTy;</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;  }</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160; </div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;  <span class="keywordflow">if</span> (MaskTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;  }</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160; </div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;  <span class="keyword">auto</span> NotMask = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a16532d0d8fb47080714810131b45b75b">buildNot</a>(MaskTy, MaskReg);</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;  <span class="keyword">auto</span> NewOp1 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(MaskTy, Op1Reg, MaskReg);</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;  <span class="keyword">auto</span> NewOp2 = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(MaskTy, Op2Reg, NotMask);</div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;  <span class="keywordflow">if</span> (IsEltPtr) {</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(DstTy, NewOp1, NewOp2);</div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a5986a45c021d42bcc2f1563aa25c4cc8">buildIntToPtr</a>(DstReg, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>);</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">buildOr</a>(DstReg, NewOp1, NewOp2);</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;  }</div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;}</div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160; </div>
<div class="line"><a name="l07559"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#ace9b958e28468570d5cc74682e326f3b"> 7559</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a> <a class="code" href="classllvm_1_1LegalizerHelper.html#ace9b958e28468570d5cc74682e326f3b">LegalizerHelper::lowerDIVREM</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;  <span class="comment">// Split DIVREM into individual instructions.</span></div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160; </div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;      Opcode == TargetOpcode::G_SDIVREM ? TargetOpcode::G_SDIV</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;                                        : TargetOpcode::G_UDIV,</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;      {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>()}, {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3)});</div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;      Opcode == TargetOpcode::G_SDIVREM ? TargetOpcode::G_SREM</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;                                        : TargetOpcode::G_UREM,</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;      {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>()}, {<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3)});</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;}</div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160; </div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07576"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a21f36be0b82249def611e5709ff7dd15"> 7576</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a21f36be0b82249def611e5709ff7dd15">LegalizerHelper::lowerAbsToAddXor</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;  <span class="comment">// Expand %res = G_ABS %a into:</span></div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;  <span class="comment">// %v1 = G_ASHR %a, scalar_size-1</span></div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;  <span class="comment">// %v2 = G_ADD %a, %v1</span></div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;  <span class="comment">// %res = G_XOR %v2, %v1</span></div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> OpReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;  <span class="keyword">auto</span> ShiftAmt =</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;      <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstTy, DstTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() - 1);</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">buildAShr</a>(DstTy, OpReg, ShiftAmt);</div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;  <span class="keyword">auto</span> Add = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(DstTy, OpReg, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">buildXor</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), Add, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;}</div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160; </div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07593"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a34f7e7a55fa5743fadeef838b7c9ece9"> 7593</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a34f7e7a55fa5743fadeef838b7c9ece9">LegalizerHelper::lowerAbsToMaxNeg</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;  <span class="comment">// Expand %res = G_ABS %a into:</span></div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;  <span class="comment">// %v1 = G_CONSTANT 0</span></div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;  <span class="comment">// %v2 = G_SUB %v1, %a</span></div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;  <span class="comment">// %res = G_SMAX %a, %v2</span></div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;  <span class="keyword">auto</span> Zero = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, 0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;  <span class="keyword">auto</span> Sub = <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">buildSub</a>(Ty, Zero, SrcReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a6a42ee731fc4e33eab8c5d6f76f8d8b2">buildSMax</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), SrcReg, Sub);</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;}</div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160; </div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07608"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a8e25418b93784160f4a660950f5fa806"> 7608</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a8e25418b93784160f4a660950f5fa806">LegalizerHelper::lowerVectorReduction</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(SrcReg);</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160; </div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;  <span class="comment">// The source could be a scalar if the IR type was &lt;1 x sN&gt;.</span></div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;  <span class="keywordflow">if</span> (SrcTy.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>()) {</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;    <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>; <span class="comment">// FIXME: handle extension.</span></div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;    <span class="comment">// This can be just a plain copy.</span></div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">getTII</a>().<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(TargetOpcode::COPY));</div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;  }</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;;</div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;}</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160; </div>
<div class="line"><a name="l07626"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a755eb2d2f25e8da3b2d904146e61b1a5"> 7626</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LegalizerHelper_8cpp.html#a755eb2d2f25e8da3b2d904146e61b1a5">shouldLowerMemFuncForSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;  <span class="comment">// On Darwin, -Os means optimize for size without hurting performance, so</span></div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;  <span class="comment">// only really optimize for size when -Oz (MinSize) is used.</span></div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ad63e0e437ca71cc2b5a5d4d5aa3685f2">getTargetTriple</a>().<a class="code" href="classllvm_1_1Triple.html#ab6fdf9b428bc3d57837022121c155cbf">isOSDarwin</a>())</div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;    <span class="keywordflow">return</span> MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">hasMinSize</a>();</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;  <span class="keywordflow">return</span> MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>();</div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;}</div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160; </div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;<span class="comment">// Returns a list of types to use for memory op lowering in MemOps. A partial</span></div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;<span class="comment">// port of findOptimalMemOpLowering in TargetLowering.</span></div>
<div class="line"><a name="l07636"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a1476a89aa41e0a21b60bfc63a292f2c3"> 7636</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LegalizerHelper_8cpp.html#a1476a89aa41e0a21b60bfc63a292f2c3">findGISelOptimalMemOpLowering</a>(std::vector&lt;LLT&gt; &amp;MemOps,</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;                                          <span class="keywordtype">unsigned</span> Limit, <span class="keyword">const</span> <a class="code" href="structllvm_1_1MemOp.html">MemOp</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>,</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;                                          <span class="keywordtype">unsigned</span> DstAS, <span class="keywordtype">unsigned</span> SrcAS,</div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> &amp;FuncAttributes,</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;TLI) {</div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isMemcpyWithFixedDstAlign() &amp;&amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getSrcAlign() &lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getDstAlign())</div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160; </div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a64db465f835b214b79cb525a9326062d">getOptimalMemOpLLT</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, FuncAttributes);</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160; </div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;  <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html">LLT</a>()) {</div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;    <span class="comment">// Use the largest scalar type whose alignment constraints are satisfied.</span></div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;    <span class="comment">// We only need to check DstAlign here as SrcAlign is always greater or</span></div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;    <span class="comment">// equal to DstAlign (or zero).</span></div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;    Ty = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isFixedDstAlign())</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getDstAlign() &lt; Ty.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>() &amp;&amp;</div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;             !TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a63b5343b9da17f8bcc83ec545022f5c7">allowsMisalignedMemoryAccesses</a>(Ty, DstAS, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getDstAlign()))</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;        Ty = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>());</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Could not find valid type&quot;</span>);</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;    <span class="comment">// FIXME: check for the largest legal type we can load/store to.</span></div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;  }</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160; </div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;  <span class="keywordtype">unsigned</span> NumMemOps = 0;</div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Size = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.size();</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;  <span class="keywordflow">while</span> (Size) {</div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;    <span class="keywordtype">unsigned</span> TySize = Ty.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;    <span class="keywordflow">while</span> (TySize &gt; Size) {</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;      <span class="comment">// For now, only use non-vector load / store&#39;s for the left-over pieces.</span></div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> NewTy = Ty;</div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;      <span class="comment">// FIXME: check for mem op safety and legality of the types. Not all of</span></div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;      <span class="comment">// SDAGisms map cleanly to GISel concepts.</span></div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;      <span class="keywordflow">if</span> (NewTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;        NewTy = NewTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 64 ? <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64) : <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;      NewTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(NewTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - 1));</div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;      <span class="keywordtype">unsigned</span> NewTySize = NewTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewTySize &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Could not find appropriate type&quot;</span>);</div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160; </div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;      <span class="comment">// If the new LLT cannot cover all of the remaining bits, then consider</span></div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;      <span class="comment">// issuing a (or a pair of) unaligned and overlapping load / store.</span></div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;      <span class="keywordtype">unsigned</span> Fast;</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;      <span class="comment">// Need to get a VT equivalent for allowMisalignedMemoryAccesses().</span></div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;      <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="namespacellvm.html#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(Ty);</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;      <span class="keywordflow">if</span> (NumMemOps &amp;&amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.allowOverlap() &amp;&amp; NewTySize &lt; Size &amp;&amp;</div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;          TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a63b5343b9da17f8bcc83ec545022f5c7">allowsMisalignedMemoryAccesses</a>(</div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;              VT, DstAS, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isFixedDstAlign() ? <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.getDstAlign() : <a class="code" href="structllvm_1_1Align.html">Align</a>(1),</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;              <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac2989bebe46c9b9fcb7a92e5ade8dde6">MachineMemOperand::MONone</a>, &amp;Fast) &amp;&amp;</div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;          Fast)</div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;        TySize = Size;</div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;        Ty = NewTy;</div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;        TySize = NewTySize;</div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;      }</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;    }</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160; </div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;    <span class="keywordflow">if</span> (++NumMemOps &gt; Limit)</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160; </div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;    MemOps.push_back(Ty);</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;    Size -= TySize;</div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;  }</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160; </div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;}</div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160; </div>
<div class="line"><a name="l07701"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#adaeb153523323510127b36a482fe7369"> 7701</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="LegalizerHelper_8cpp.html#adaeb153523323510127b36a482fe7369">getTypeForLLT</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty, <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(<a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>()),</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;                                Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>());</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;}</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160; </div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;<span class="comment">// Get a vectorized representation of the memset value operand, GISel edition.</span></div>
<div class="line"><a name="l07709"></a><span class="lineno"><a class="line" href="LegalizerHelper_8cpp.html#a2f1d26ea9bced931d104b4dd8b26775f"> 7709</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="LegalizerHelper_8cpp.html#a2f1d26ea9bced931d104b4dd8b26775f">getMemsetValue</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> Val, <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;MIB) {</div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">getMRI</a>();</div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;  <span class="keywordtype">unsigned</span> NumBits = Ty.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;  <span class="keyword">auto</span> ValVRegAndVal = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Val, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;  <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; ValVRegAndVal) {</div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Scalar = ValVRegAndVal-&gt;Value.trunc(8);</div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> SplatVal = <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(NumBits, Scalar);</div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;    <span class="keywordflow">return</span> MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, SplatVal).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;  }</div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160; </div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;  <span class="comment">// Extend the byte value to the larger type, and then multiply by a magic</span></div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;  <span class="comment">// value 0x010101... in order to replicate it across every byte.</span></div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;  <span class="comment">// Unless it&#39;s zero, in which case just emit a larger G_CONSTANT 0.</span></div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;  <span class="keywordflow">if</span> (ValVRegAndVal &amp;&amp; ValVRegAndVal-&gt;Value == 0) {</div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;    <span class="keywordflow">return</span> MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(Ty, 0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;  }</div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160; </div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ExtType = Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>();</div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;  <span class="keyword">auto</span> ZExt = MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a7ac5295bdfdd480a2c66ee54273ebe21">buildZExtOrTrunc</a>(ExtType, Val);</div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;  <span class="keywordflow">if</span> (NumBits &gt; 8) {</div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1msf.html#afa98ccc224894a8f32ec9ed84776e709">Magic</a> = <a class="code" href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(NumBits, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8, 0x01));</div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;    <span class="keyword">auto</span> MagicMI = MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ExtType, <a class="code" href="namespacellvm_1_1msf.html#afa98ccc224894a8f32ec9ed84776e709">Magic</a>);</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;    Val = MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(ExtType, ZExt, MagicMI).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;  }</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160; </div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;  <span class="comment">// For vector types create a G_BUILD_VECTOR.</span></div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;    Val = MIB.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac6b49f09ee0a287b676593cdef557720">buildSplatVector</a>(Ty, Val).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160; </div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;  <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;}</div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160; </div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;LegalizerHelper::lowerMemset(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> Dst, <a class="code" href="classllvm_1_1Register.html">Register</a> Val,</div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;                             <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> KnownLen, <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment,</div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;                             <span class="keywordtype">bool</span> IsVolatile) {</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;  <span class="keyword">auto</span> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;TLI = *MF.getSubtarget().getTargetLowering();</div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = MF.getDataLayout();</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = MF.getFunction().getContext();</div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160; </div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(KnownLen != 0 &amp;&amp; <span class="stringliteral">&quot;Have a zero length memset length!&quot;</span>);</div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160; </div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;  <span class="keywordtype">bool</span> DstAlignCanChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.getFrameInfo();</div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;  <span class="keywordtype">bool</span> OptSize = <a class="code" href="LegalizerHelper_8cpp.html#a755eb2d2f25e8da3b2d904146e61b1a5">shouldLowerMemFuncForSize</a>(MF);</div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160; </div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *FIDef = <a class="code" href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(TargetOpcode::G_FRAME_INDEX, Dst, MRI);</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;  <span class="keywordflow">if</span> (FIDef &amp;&amp; !MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">isFixedObjectIndex</a>(FIDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>()))</div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;    DstAlignCanChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160; </div>
<div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;  <span class="keywordtype">unsigned</span> Limit = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#aea38b47d1095d96c4103ce3990ae8eca">getMaxStoresPerMemset</a>(OptSize);</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;  std::vector&lt;LLT&gt; MemOps;</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160; </div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DstMMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> DstPtrInfo = DstMMO.getPointerInfo();</div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160; </div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;  <span class="keyword">auto</span> ValVRegAndVal = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Val, MRI);</div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;  <span class="keywordtype">bool</span> IsZeroVal = ValVRegAndVal &amp;&amp; ValVRegAndVal-&gt;Value == 0;</div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160; </div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LegalizerHelper_8cpp.html#a1476a89aa41e0a21b60bfc63a292f2c3">findGISelOptimalMemOpLowering</a>(MemOps, Limit,</div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;                                     <a class="code" href="structllvm_1_1MemOp.html#a59f05cc1c22539dd52f17f6025c75d6c">MemOp::Set</a>(KnownLen, DstAlignCanChange,</div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;                                                Alignment,</div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;                                                <span class="comment">/*IsZeroMemset=*/</span>IsZeroVal,</div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;                                                <span class="comment">/*IsVolatile=*/</span>IsVolatile),</div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;                                     DstPtrInfo.<a class="code" href="structllvm_1_1MachinePointerInfo.html#a2788ec4ff3130471e24ab77dc08f7c50">getAddrSpace</a>(), ~0u,</div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;                                     MF.getFunction().getAttributes(), TLI))</div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160; </div>
<div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;  <span class="keywordflow">if</span> (DstAlignCanChange) {</div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;    <span class="comment">// Get an estimate of the type from the LLT.</span></div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IRTy = <a class="code" href="LegalizerHelper_8cpp.html#adaeb153523323510127b36a482fe7369">getTypeForLLT</a>(MemOps[0], <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> NewAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(IRTy);</div>
<div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;    <span class="keywordflow">if</span> (NewAlign &gt; Alignment) {</div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;      Alignment = NewAlign;</div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;      <span class="keywordtype">unsigned</span> FI = FIDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>();</div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;      <span class="comment">// Give the stack frame object a larger alignment if needed.</span></div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;      <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(FI) &lt; Alignment)</div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;        MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af4c34648ca4596767ff0c3409fc3f2d9">setObjectAlignment</a>(FI, Alignment);</div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;    }</div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;  }</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160; </div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;  <span class="comment">// Find the largest store and generate the bit pattern for it.</span></div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LargestTy = MemOps[0];</div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; MemOps.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;    <span class="keywordflow">if</span> (MemOps[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getSizeInBits() &gt; LargestTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())</div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;      LargestTy = MemOps[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160; </div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;  <span class="comment">// The memset stored value is always defined as an s8, so in order to make it</span></div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;  <span class="comment">// work with larger store types we need to repeat the bit pattern across the</span></div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;  <span class="comment">// wider type.</span></div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MemSetValue = <a class="code" href="LegalizerHelper_8cpp.html#a2f1d26ea9bced931d104b4dd8b26775f">getMemsetValue</a>(Val, LargestTy, MIB);</div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160; </div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;  <span class="keywordflow">if</span> (!MemSetValue)</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160; </div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;  <span class="comment">// Generate the stores. For each store type in the list, we generate the</span></div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;  <span class="comment">// matching store of that type to the destination address.</span></div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;  <span class="keywordtype">unsigned</span> DstOff = 0;</div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = KnownLen;</div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; MemOps.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = MemOps[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;    <span class="keywordtype">unsigned</span> TySize = Ty.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;    <span class="keywordflow">if</span> (TySize &gt; Size) {</div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;      <span class="comment">// Issuing an unaligned load / store pair that overlaps with the previous</span></div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;      <span class="comment">// pair. Adjust the offset accordingly.</span></div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == MemOps.size() - 1 &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != 0);</div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;      DstOff -= TySize - <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>;</div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;    }</div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160; </div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;    <span class="comment">// If this store is smaller than the largest store see whether we can get</span></div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;    <span class="comment">// the smaller value for free with a truncate.</span></div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1Value.html">Value</a> = MemSetValue;</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; LargestTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;      <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="namespacellvm.html#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(Ty);</div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;      <a class="code" href="classllvm_1_1MVT.html">MVT</a> LargestVT = <a class="code" href="namespacellvm.html#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(LargestTy);</div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;      <span class="keywordflow">if</span> (!LargestTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; !Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp;</div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;          TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(LargestVT, VT))</div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> = MIB.buildTrunc(Ty, MemSetValue).getReg(0);</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> = <a class="code" href="LegalizerHelper_8cpp.html#a2f1d26ea9bced931d104b4dd8b26775f">getMemsetValue</a>(Val, Ty, MIB);</div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1Value.html">Value</a>)</div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;    }</div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160; </div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;    <span class="keyword">auto</span> *StoreMMO = MF.getMachineMemOperand(&amp;DstMMO, DstOff, Ty);</div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160; </div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = Dst;</div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;    <span class="keywordflow">if</span> (DstOff != 0) {</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;          MIB.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()), DstOff);</div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = MIB.buildPtrAdd(PtrTy, Dst, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0);</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;    }</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160; </div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;    MIB.buildStore(<a class="code" href="classllvm_1_1Value.html">Value</a>, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, *StoreMMO);</div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;    DstOff += Ty.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> -= TySize;</div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;  }</div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160; </div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;}</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160; </div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07855"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#a70e30c8ffe7b84b2ca54cc12aabbe768"> 7855</a></span>&#160;LegalizerHelper::lowerMemcpyInline(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_MEMCPY_INLINE);</div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160; </div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Len = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160; </div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *MMOIt = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *<a class="code" href="structllvm_1_1MemOp.html">MemOp</a> = *MMOIt;</div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;  <span class="keywordtype">bool</span> IsVolatile = <a class="code" href="structllvm_1_1MemOp.html">MemOp</a>-&gt;isVolatile();</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160; </div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;  <span class="comment">// See if this is a constant length copy</span></div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;  <span class="keyword">auto</span> LenVRegAndVal = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Len, MRI);</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;  <span class="comment">// FIXME: support dynamically sized G_MEMCPY_INLINE</span></div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LenVRegAndVal &amp;&amp;</div>
<div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;         <span class="stringliteral">&quot;inline memcpy with dynamic size is not yet supported&quot;</span>);</div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> KnownLen = LenVRegAndVal-&gt;Value.<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;  <span class="keywordflow">if</span> (KnownLen == 0) {</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;  }</div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160; </div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DstMMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SrcMMO = **std::next(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin());</div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> DstAlign = DstMMO.getBaseAlign();</div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> SrcAlign = SrcMMO.getBaseAlign();</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160; </div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;  <span class="keywordflow">return</span> lowerMemcpyInline(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dst, Src, KnownLen, DstAlign, SrcAlign,</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;                           IsVolatile);</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;}</div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160; </div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;LegalizerHelper::lowerMemcpyInline(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> Dst, <a class="code" href="classllvm_1_1Register.html">Register</a> Src,</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;                                   <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> KnownLen, <a class="code" href="structllvm_1_1Align.html">Align</a> DstAlign,</div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;                                   <a class="code" href="structllvm_1_1Align.html">Align</a> SrcAlign, <span class="keywordtype">bool</span> IsVolatile) {</div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_MEMCPY_INLINE);</div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;  <span class="keywordflow">return</span> lowerMemcpy(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dst, Src, KnownLen,</div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;                     <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;uint64_t&gt;::max</a>(), DstAlign, SrcAlign,</div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;                     IsVolatile);</div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;}</div>
<div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160; </div>
<div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;LegalizerHelper::lowerMemcpy(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> Dst, <a class="code" href="classllvm_1_1Register.html">Register</a> Src,</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;                             <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> KnownLen, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Limit, <a class="code" href="structllvm_1_1Align.html">Align</a> DstAlign,</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;                             <a class="code" href="structllvm_1_1Align.html">Align</a> SrcAlign, <span class="keywordtype">bool</span> IsVolatile) {</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;  <span class="keyword">auto</span> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;TLI = *MF.getSubtarget().getTargetLowering();</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = MF.getDataLayout();</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = MF.getFunction().getContext();</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160; </div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(KnownLen != 0 &amp;&amp; <span class="stringliteral">&quot;Have a zero length memcpy length!&quot;</span>);</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160; </div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;  <span class="keywordtype">bool</span> DstAlignCanChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.getFrameInfo();</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(DstAlign, SrcAlign);</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160; </div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *FIDef = <a class="code" href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(TargetOpcode::G_FRAME_INDEX, Dst, MRI);</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;  <span class="keywordflow">if</span> (FIDef &amp;&amp; !MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">isFixedObjectIndex</a>(FIDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>()))</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;    DstAlignCanChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160; </div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;  <span class="comment">// FIXME: infer better src pointer alignment like SelectionDAG does here.</span></div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;  <span class="comment">// FIXME: also use the equivalent of isMemSrcFromConstant and alwaysinlining</span></div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;  <span class="comment">// if the memcpy is in a tail call position.</span></div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160; </div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;  std::vector&lt;LLT&gt; MemOps;</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160; </div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DstMMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SrcMMO = **std::next(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin());</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> DstPtrInfo = DstMMO.getPointerInfo();</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> SrcPtrInfo = SrcMMO.getPointerInfo();</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160; </div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LegalizerHelper_8cpp.html#a1476a89aa41e0a21b60bfc63a292f2c3">findGISelOptimalMemOpLowering</a>(</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;          MemOps, Limit,</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;          <a class="code" href="structllvm_1_1MemOp.html#aa4f7c77353721083af1f43583e7d4164">MemOp::Copy</a>(KnownLen, DstAlignCanChange, Alignment, SrcAlign,</div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;                      IsVolatile),</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;          DstPtrInfo.<a class="code" href="structllvm_1_1MachinePointerInfo.html#a2788ec4ff3130471e24ab77dc08f7c50">getAddrSpace</a>(), SrcPtrInfo.<a class="code" href="structllvm_1_1MachinePointerInfo.html#a2788ec4ff3130471e24ab77dc08f7c50">getAddrSpace</a>(),</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;          MF.getFunction().getAttributes(), TLI))</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160; </div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;  <span class="keywordflow">if</span> (DstAlignCanChange) {</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;    <span class="comment">// Get an estimate of the type from the LLT.</span></div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IRTy = <a class="code" href="LegalizerHelper_8cpp.html#adaeb153523323510127b36a482fe7369">getTypeForLLT</a>(MemOps[0], <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> NewAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(IRTy);</div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160; </div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;    <span class="comment">// Don&#39;t promote to an alignment that would require dynamic stack</span></div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;    <span class="comment">// realignment.</span></div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = MF.getSubtarget().getRegisterInfo();</div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">hasStackRealignment</a>(MF))</div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;      <span class="keywordflow">while</span> (NewAlign &gt; Alignment &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.exceedsNaturalStackAlignment(NewAlign))</div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;        NewAlign = NewAlign.<a class="code" href="structllvm_1_1Align.html#a0a648e1baa573dcc8a550235ed44e7ae">previous</a>();</div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160; </div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;    <span class="keywordflow">if</span> (NewAlign &gt; Alignment) {</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;      Alignment = NewAlign;</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;      <span class="keywordtype">unsigned</span> FI = FIDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>();</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;      <span class="comment">// Give the stack frame object a larger alignment if needed.</span></div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;      <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(FI) &lt; Alignment)</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;        MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af4c34648ca4596767ff0c3409fc3f2d9">setObjectAlignment</a>(FI, Alignment);</div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;    }</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;  }</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160; </div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inlining memcpy: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> &lt;&lt; <span class="stringliteral">&quot; into loads &amp; stores\n&quot;</span>);</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160; </div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;  <span class="comment">// Now we need to emit a pair of load and stores for each of the types we&#39;ve</span></div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;  <span class="comment">// collected. I.e. for each type, generate a load from the source pointer of</span></div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;  <span class="comment">// that type width, and then generate a corresponding store to the dest buffer</span></div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;  <span class="comment">// of that value loaded. This can result in a sequence of loads and stores</span></div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;  <span class="comment">// mixed types, depending on what the target specifies as good types to use.</span></div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;  <span class="keywordtype">unsigned</span> CurrOffset = 0;</div>
<div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = KnownLen;</div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> CopyTy : MemOps) {</div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;    <span class="comment">// Issuing an unaligned load / store pair  that overlaps with the previous</span></div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;    <span class="comment">// pair. Adjust the offset accordingly.</span></div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;    <span class="keywordflow">if</span> (CopyTy.getSizeInBytes() &gt; Size)</div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;      CurrOffset -= CopyTy.getSizeInBytes() - <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>;</div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160; </div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;    <span class="comment">// Construct MMOs for the accesses.</span></div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;    <span class="keyword">auto</span> *LoadMMO =</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;        MF.getMachineMemOperand(&amp;SrcMMO, CurrOffset, CopyTy.getSizeInBytes());</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;    <span class="keyword">auto</span> *StoreMMO =</div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;        MF.getMachineMemOperand(&amp;DstMMO, CurrOffset, CopyTy.getSizeInBytes());</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160; </div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;    <span class="comment">// Create the load.</span></div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadPtr = Src;</div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;    <span class="keywordflow">if</span> (CurrOffset != 0) {</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = MIB.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()), CurrOffset)</div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;                   .getReg(0);</div>
<div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;      LoadPtr = MIB.buildPtrAdd(SrcTy, Src, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0);</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;    }</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;    <span class="keyword">auto</span> LdVal = MIB.buildLoad(CopyTy, LoadPtr, *LoadMMO);</div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160; </div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;    <span class="comment">// Create the store.</span></div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> StorePtr = Dst;</div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;    <span class="keywordflow">if</span> (CurrOffset != 0) {</div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;      StorePtr = MIB.buildPtrAdd(DstTy, Dst, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0);</div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;    }</div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;    MIB.buildStore(LdVal, StorePtr, *StoreMMO);</div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;    CurrOffset += CopyTy.getSizeInBytes();</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> -= CopyTy.getSizeInBytes();</div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;  }</div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160; </div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;}</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160; </div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;LegalizerHelper::lowerMemmove(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> Dst, <a class="code" href="classllvm_1_1Register.html">Register</a> Src,</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;                              <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> KnownLen, <a class="code" href="structllvm_1_1Align.html">Align</a> DstAlign, <a class="code" href="structllvm_1_1Align.html">Align</a> SrcAlign,</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;                              <span class="keywordtype">bool</span> IsVolatile) {</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;  <span class="keyword">auto</span> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;TLI = *MF.getSubtarget().getTargetLowering();</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = MF.getDataLayout();</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = MF.getFunction().getContext();</div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160; </div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(KnownLen != 0 &amp;&amp; <span class="stringliteral">&quot;Have a zero length memmove length!&quot;</span>);</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160; </div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;  <span class="keywordtype">bool</span> DstAlignCanChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.getFrameInfo();</div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;  <span class="keywordtype">bool</span> OptSize = <a class="code" href="LegalizerHelper_8cpp.html#a755eb2d2f25e8da3b2d904146e61b1a5">shouldLowerMemFuncForSize</a>(MF);</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(DstAlign, SrcAlign);</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160; </div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *FIDef = <a class="code" href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(TargetOpcode::G_FRAME_INDEX, Dst, MRI);</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;  <span class="keywordflow">if</span> (FIDef &amp;&amp; !MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">isFixedObjectIndex</a>(FIDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>()))</div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;    DstAlignCanChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160; </div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;  <span class="keywordtype">unsigned</span> Limit = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#aabf1014e2eb7b6826ee5c98baee11764">getMaxStoresPerMemmove</a>(OptSize);</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;  std::vector&lt;LLT&gt; MemOps;</div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160; </div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DstMMO = **<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SrcMMO = **std::next(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin());</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> DstPtrInfo = DstMMO.getPointerInfo();</div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> SrcPtrInfo = SrcMMO.getPointerInfo();</div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160; </div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;  <span class="comment">// FIXME: SelectionDAG always passes false for &#39;AllowOverlap&#39;, apparently due</span></div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;  <span class="comment">// to a bug in it&#39;s findOptimalMemOpLowering implementation. For now do the</span></div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;  <span class="comment">// same thing here.</span></div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LegalizerHelper_8cpp.html#a1476a89aa41e0a21b60bfc63a292f2c3">findGISelOptimalMemOpLowering</a>(</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;          MemOps, Limit,</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;          <a class="code" href="structllvm_1_1MemOp.html#aa4f7c77353721083af1f43583e7d4164">MemOp::Copy</a>(KnownLen, DstAlignCanChange, Alignment, SrcAlign,</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;                      <span class="comment">/*IsVolatile*/</span> <span class="keyword">true</span>),</div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;          DstPtrInfo.<a class="code" href="structllvm_1_1MachinePointerInfo.html#a2788ec4ff3130471e24ab77dc08f7c50">getAddrSpace</a>(), SrcPtrInfo.<a class="code" href="structllvm_1_1MachinePointerInfo.html#a2788ec4ff3130471e24ab77dc08f7c50">getAddrSpace</a>(),</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;          MF.getFunction().getAttributes(), TLI))</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160; </div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;  <span class="keywordflow">if</span> (DstAlignCanChange) {</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;    <span class="comment">// Get an estimate of the type from the LLT.</span></div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IRTy = <a class="code" href="LegalizerHelper_8cpp.html#adaeb153523323510127b36a482fe7369">getTypeForLLT</a>(MemOps[0], <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> NewAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(IRTy);</div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160; </div>
<div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;    <span class="comment">// Don&#39;t promote to an alignment that would require dynamic stack</span></div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;    <span class="comment">// realignment.</span></div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = MF.getSubtarget().getRegisterInfo();</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">hasStackRealignment</a>(MF))</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;      <span class="keywordflow">while</span> (NewAlign &gt; Alignment &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.exceedsNaturalStackAlignment(NewAlign))</div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;        NewAlign = NewAlign.<a class="code" href="structllvm_1_1Align.html#a0a648e1baa573dcc8a550235ed44e7ae">previous</a>();</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160; </div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;    <span class="keywordflow">if</span> (NewAlign &gt; Alignment) {</div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;      Alignment = NewAlign;</div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;      <span class="keywordtype">unsigned</span> FI = FIDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">getIndex</a>();</div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;      <span class="comment">// Give the stack frame object a larger alignment if needed.</span></div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;      <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(FI) &lt; Alignment)</div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;        MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af4c34648ca4596767ff0c3409fc3f2d9">setObjectAlignment</a>(FI, Alignment);</div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;    }</div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;  }</div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160; </div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inlining memmove: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> &lt;&lt; <span class="stringliteral">&quot; into loads &amp; stores\n&quot;</span>);</div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160; </div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> MIB(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;  <span class="comment">// Memmove requires that we perform the loads first before issuing the stores.</span></div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;  <span class="comment">// Apart from that, this loop is pretty much doing the same thing as the</span></div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;  <span class="comment">// memcpy codegen function.</span></div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;  <span class="keywordtype">unsigned</span> CurrOffset = 0;</div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 16&gt;</a> LoadVals;</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> CopyTy : MemOps) {</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;    <span class="comment">// Construct MMO for the load.</span></div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;    <span class="keyword">auto</span> *LoadMMO =</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;        MF.getMachineMemOperand(&amp;SrcMMO, CurrOffset, CopyTy.getSizeInBytes());</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160; </div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;    <span class="comment">// Create the load.</span></div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadPtr = Src;</div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;    <span class="keywordflow">if</span> (CurrOffset != 0) {</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;          MIB.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()), CurrOffset);</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;      LoadPtr = MIB.buildPtrAdd(SrcTy, Src, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0);</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;    }</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;    LoadVals.push_back(MIB.buildLoad(CopyTy, LoadPtr, *LoadMMO).getReg(0));</div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;    CurrOffset += CopyTy.getSizeInBytes();</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;  }</div>
<div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160; </div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;  CurrOffset = 0;</div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; MemOps.size(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> CopyTy = MemOps[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;    <span class="comment">// Now store the values loaded.</span></div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;    <span class="keyword">auto</span> *StoreMMO =</div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;        MF.getMachineMemOperand(&amp;DstMMO, CurrOffset, CopyTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>());</div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160; </div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> StorePtr = Dst;</div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;    <span class="keywordflow">if</span> (CurrOffset != 0) {</div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;          MIB.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()), CurrOffset);</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;      StorePtr = MIB.buildPtrAdd(DstTy, Dst, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0);</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;    }</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;    MIB.buildStore(LoadVals[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], StorePtr, *StoreMMO);</div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;    CurrOffset += CopyTy.<a class="code" href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">getSizeInBytes</a>();</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;  }</div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;}</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160; </div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">LegalizerHelper::LegalizeResult</a></div>
<div class="line"><a name="l08110"></a><span class="lineno"><a class="line" href="classllvm_1_1LegalizerHelper.html#aca820b14c7ae2e658cefd8a3be4da035"> 8110</a></span>&#160;<a class="code" href="classllvm_1_1LegalizerHelper.html#aca820b14c7ae2e658cefd8a3be4da035">LegalizerHelper::lowerMemCpyFamily</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> MaxLen) {</div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Opc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;  <span class="comment">// This combine is fairly complex so it&#39;s not written with a separate</span></div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;  <span class="comment">// matcher function.</span></div>
<div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opc == TargetOpcode::G_MEMCPY || Opc == TargetOpcode::G_MEMMOVE ||</div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;          Opc == TargetOpcode::G_MEMSET) &amp;&amp;</div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;         <span class="stringliteral">&quot;Expected memcpy like instruction&quot;</span>);</div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160; </div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;  <span class="keyword">auto</span> MMOIt = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *<a class="code" href="structllvm_1_1MemOp.html">MemOp</a> = *MMOIt;</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160; </div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> DstAlign = <a class="code" href="structllvm_1_1MemOp.html">MemOp</a>-&gt;getBaseAlign();</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> SrcAlign;</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Len = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160; </div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;  <span class="keywordflow">if</span> (Opc != TargetOpcode::G_MEMSET) {</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MMOIt != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_end() &amp;&amp; <span class="stringliteral">&quot;Expected a second MMO on MI&quot;</span>);</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;    <a class="code" href="structllvm_1_1MemOp.html">MemOp</a> = *(++MMOIt);</div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;    SrcAlign = <a class="code" href="structllvm_1_1MemOp.html">MemOp</a>-&gt;getBaseAlign();</div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;  }</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160; </div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;  <span class="comment">// See if this is a constant length copy</span></div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;  <span class="keyword">auto</span> LenVRegAndVal = <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Len, MRI);</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;  <span class="keywordflow">if</span> (!LenVRegAndVal)</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> KnownLen = LenVRegAndVal-&gt;Value.<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160; </div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;  <span class="keywordflow">if</span> (KnownLen == 0) {</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">Legalized</a>;</div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;  }</div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160; </div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;  <span class="keywordtype">bool</span> IsVolatile = <a class="code" href="structllvm_1_1MemOp.html">MemOp</a>-&gt;isVolatile();</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;  <span class="keywordflow">if</span> (Opc == TargetOpcode::G_MEMCPY_INLINE)</div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;    <span class="keywordflow">return</span> lowerMemcpyInline(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dst, Src, KnownLen, DstAlign, SrcAlign,</div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;                             IsVolatile);</div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160; </div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;  <span class="comment">// Don&#39;t try to optimize volatile.</span></div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;  <span class="keywordflow">if</span> (IsVolatile)</div>
<div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160; </div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;  <span class="keywordflow">if</span> (MaxLen &amp;&amp; KnownLen &gt; MaxLen)</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160; </div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;  <span class="keywordflow">if</span> (Opc == TargetOpcode::G_MEMCPY) {</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;    <span class="keyword">auto</span> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;TLI = *MF.getSubtarget().getTargetLowering();</div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;    <span class="keywordtype">bool</span> OptSize = <a class="code" href="LegalizerHelper_8cpp.html#a755eb2d2f25e8da3b2d904146e61b1a5">shouldLowerMemFuncForSize</a>(MF);</div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Limit = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a4aeaf8d22c1a5ec6e5c36633c5951c30">getMaxStoresPerMemcpy</a>(OptSize);</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;    <span class="keywordflow">return</span> lowerMemcpy(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dst, Src, KnownLen, Limit, DstAlign, SrcAlign,</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;                       IsVolatile);</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;  }</div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;  <span class="keywordflow">if</span> (Opc == TargetOpcode::G_MEMMOVE)</div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;    <span class="keywordflow">return</span> lowerMemmove(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dst, Src, KnownLen, DstAlign, SrcAlign, IsVolatile);</div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;  <span class="keywordflow">if</span> (Opc == TargetOpcode::G_MEMSET)</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;    <span class="keywordflow">return</span> lowerMemset(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dst, Src, KnownLen, DstAlign, IsVolatile);</div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">UnableToLegalize</a>;</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00077">FileCheck.h:77</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a12f4126914a32142bcfecc1e7bc0fe6e"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a12f4126914a32142bcfecc1e7bc0fe6e">RTLIBCASE_INT</a></div><div class="ttdeci">#define RTLIBCASE_INT(LibcallPrefix)</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1HexagonInstrInfo_html_aa4e19e02d7a1b67cdeb7359198d6c9f7"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#aa4e19e02d7a1b67cdeb7359198d6c9f7">llvm::HexagonInstrInfo::isTailCall</a></div><div class="ttdeci">bool isTailCall(const MachineInstr &amp;MI) const override</div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l02651">HexagonInstrInfo.cpp:2651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdeci">@ Undef</div><div class="ttdoc">Value of the register doesn't matter.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00052">MachineInstrBuilder.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0270bdca4aeb43f39bf91c900a398057"><div class="ttname"><a href="namespacellvm.html#a0270bdca4aeb43f39bf91c900a398057">llvm::next_nodbg</a></div><div class="ttdeci">IterT next_nodbg(IterT It, IterT End, bool SkipPseudoOp=true)</div><div class="ttdoc">Increment It, then continue incrementing it while it points to a debug instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01323">MachineBasicBlock.h:1323</a></div></div>
<div class="ttc" id="aMIPatternMatch_8h_html"><div class="ttname"><a href="MIPatternMatch_8h.html">MIPatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_aabf1014e2eb7b6826ee5c98baee11764"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#aabf1014e2eb7b6826ee5c98baee11764">llvm::TargetLoweringBase::getMaxStoresPerMemmove</a></div><div class="ttdeci">unsigned getMaxStoresPerMemmove(bool OptSize) const</div><div class="ttdoc">Get maximum # of store operations permitted for llvm.memmove.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01716">TargetLowering.h:1716</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab102f0f12dd38aeea5906b1d80c792ff"><div class="ttname"><a href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">llvm::alignTo</a></div><div class="ttdeci">uint64_t alignTo(uint64_t Size, Align A)</div><div class="ttdoc">Returns a multiple of A needed to store Size bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00155">Alignment.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a576b964fe2d7d8750601681e04f05a9c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a576b964fe2d7d8750601681e04f05a9c">llvm::LegalizerHelper::createStackTemporary</a></div><div class="ttdeci">MachineInstrBuilder createStackTemporary(TypeSize Bytes, Align Alignment, MachinePointerInfo &amp;PtrInfo)</div><div class="ttdoc">Create a stack temporary based on the size in bytes and the alignment.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03592">LegalizerHelper.cpp:3592</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aca31191486506a279715dd3bf677d75f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aca31191486506a279715dd3bf677d75f">llvm::MachineIRBuilder::buildInsertVectorElement</a></div><div class="ttdeci">MachineInstrBuilder buildInsertVectorElement(const DstOp &amp;Res, const SrcOp &amp;Val, const SrcOp &amp;Elt, const SrcOp &amp;Idx)</div><div class="ttdoc">Build and insert Res = G_INSERT_VECTOR_ELT Val, Elt, Idx.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00830">MachineIRBuilder.cpp:830</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a79ab7155d5feabf02f01c4d3b7d9c422"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a79ab7155d5feabf02f01c4d3b7d9c422">llvm::LegalizerHelper::narrowScalarShiftByConstant</a></div><div class="ttdeci">LegalizeResult narrowScalarShiftByConstant(MachineInstr &amp;MI, const APInt &amp;Amt, LLT HalfTy, LLT ShiftAmtTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04616">LegalizerHelper.cpp:4616</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a5de0162fac7c57cab62e5bb81f0b5542"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a5de0162fac7c57cab62e5bb81f0b5542">llvm::TargetLoweringBase::getStackPointerRegisterToSaveRestore</a></div><div class="ttdeci">Register getStackPointerRegisterToSaveRestore() const</div><div class="ttdoc">If a physical register, this specifies the register that llvm.savestack/llvm.restorestack should save...</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01827">TargetLowering.h:1827</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_aced5d43b6a199d148e877d5536e95739"><div class="ttname"><a href="LegalizerHelper_8cpp.html#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a></div><div class="ttdeci">static bool isNonZeroModBitWidthOrUndef(const MachineRegisterInfo &amp;MRI, Register Reg, unsigned BW)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05826">LegalizerHelper.cpp:5826</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a8a4aeb9640ed05629f69b925f53ae366"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a8a4aeb9640ed05629f69b925f53ae366">llvm::LegalizerHelper::narrowScalarBasic</a></div><div class="ttdeci">LegalizeResult narrowScalarBasic(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05457">LegalizerHelper.cpp:5457</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a9db118513388c635dee4a573de902842"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a9db118513388c635dee4a573de902842">fcQNan</a></div><div class="ttdeci">@ fcQNan</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00201">FloatingPointMode.h:201</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="aR600ClauseMergePass_8cpp_html_aba99928790de45fa7aa12b47fbd828ff"><div class="ttname"><a href="R600ClauseMergePass_8cpp.html#aba99928790de45fa7aa12b47fbd828ff">Merge</a></div><div class="ttdeci">R600 Clause Merge</div><div class="ttdef"><b>Definition:</b> <a href="R600ClauseMergePass_8cpp_source.html#l00070">R600ClauseMergePass.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineConstantPool_html_afd6691ddb5d4adf50d744297e18a1c6d"><div class="ttname"><a href="classllvm_1_1MachineConstantPool.html#afd6691ddb5d4adf50d744297e18a1c6d">llvm::MachineConstantPool::getConstantPoolIndex</a></div><div class="ttdeci">unsigned getConstantPoolIndex(const Constant *C, Align Alignment)</div><div class="ttdoc">getConstantPoolIndex - Create a new entry in the constant pool or return an existing one.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l01441">MachineFunction.cpp:1441</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a98e3f12f0b3d7f35251e1e71336b480c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a98e3f12f0b3d7f35251e1e71336b480c">llvm::LegalizerHelper::moreElementsVectorPhi</a></div><div class="ttdeci">LegalizeResult moreElementsVectorPhi(MachineInstr &amp;MI, unsigned TypeIdx, LLT MoreTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04814">LegalizerHelper.cpp:4814</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1LostDebugLocObserver_html"><div class="ttname"><a href="classllvm_1_1LostDebugLocObserver.html">llvm::LostDebugLocObserver</a></div><div class="ttdef"><b>Definition:</b> <a href="LostDebugLocObserver_8h_source.html#l00019">LostDebugLocObserver.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a5986a45c021d42bcc2f1563aa25c4cc8"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a5986a45c021d42bcc2f1563aa25c4cc8">llvm::MachineIRBuilder::buildIntToPtr</a></div><div class="ttdeci">MachineInstrBuilder buildIntToPtr(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert a G_INTTOPTR instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00685">MachineIRBuilder.h:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ab99f92278021f1921be23b762056a9cc"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ab99f92278021f1921be23b762056a9cc">llvm::LegalizerHelper::lowerFPTOSI</a></div><div class="ttdeci">LegalizeResult lowerFPTOSI(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06225">LegalizerHelper.cpp:6225</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aTargetFrameLowering_8h_html"><div class="ttname"><a href="TargetFrameLowering_8h.html">TargetFrameLowering.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">llvm::RecurKind::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">Bitwise or logical OR of integers.</div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a34554bbf9cf7577f166fb01533dcd775"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a34554bbf9cf7577f166fb01533dcd775">llvm::MachineIRBuilder::buildICmp</a></div><div class="ttdeci">MachineInstrBuilder buildICmp(CmpInst::Predicate Pred, const DstOp &amp;Res, const SrcOp &amp;Op0, const SrcOp &amp;Op1)</div><div class="ttdoc">Build and insert a Res = G_ICMP Pred, Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00805">MachineIRBuilder.cpp:805</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a6a42ee731fc4e33eab8c5d6f76f8d8b2"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a6a42ee731fc4e33eab8c5d6f76f8d8b2">llvm::MachineIRBuilder::buildSMax</a></div><div class="ttdeci">MachineInstrBuilder buildSMax(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1)</div><div class="ttdoc">Build and insert Res = G_SMAX Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01857">MachineIRBuilder.h:1857</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ad8a495f4190353f60d1cd5e471283f40"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ad8a495f4190353f60d1cd5e471283f40">llvm::LegalizerHelper::libcall</a></div><div class="ttdeci">LegalizeResult libcall(MachineInstr &amp;MI, LostDebugLocObserver &amp;LocObserver)</div><div class="ttdoc">Legalize an instruction by emiting a runtime library call instead.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00796">LegalizerHelper.cpp:796</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a04ee040b3b0253a0832ddb7915d55ae1"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a04ee040b3b0253a0832ddb7915d55ae1">llvm::LegalizerHelper::lowerFPTRUNC_F64_TO_F16</a></div><div class="ttdeci">LegalizeResult lowerFPTRUNC_F64_TO_F16(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06294">LegalizerHelper.cpp:6294</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a49f37835a410e050b960dd936a54dd05"><div class="ttname"><a href="classllvm_1_1Type.html#a49f37835a410e050b960dd936a54dd05">llvm::Type::getFP128Ty</a></div><div class="ttdeci">static Type * getFP128Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00233">Type.cpp:233</a></div></div>
<div class="ttc" id="aCallLowering_8h_html"><div class="ttname"><a href="CallLowering_8h.html">CallLowering.h</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a0c5765e9acba977f6e462c2917276d8f"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">llvm::APFloatBase::IEEEsingle</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEsingle() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00244">APFloat.cpp:244</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html_a0a648e1baa573dcc8a550235ed44e7ae"><div class="ttname"><a href="structllvm_1_1Align.html#a0a648e1baa573dcc8a550235ed44e7ae">llvm::Align::previous</a></div><div class="ttdeci">Align previous() const</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00088">Alignment.h:88</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a8528b8088d41e3b859d4ea0f25e13991"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a8528b8088d41e3b859d4ea0f25e13991">llvm::MachineIRBuilder::buildShl</a></div><div class="ttdeci">MachineInstrBuilder buildShl(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01622">MachineIRBuilder.h:1622</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalizeActionStep_html_a1ad3bef7dbfe7e650af077cede882b93"><div class="ttname"><a href="structllvm_1_1LegalizeActionStep.html#a1ad3bef7dbfe7e650af077cede882b93">llvm::LegalizeActionStep::Action</a></div><div class="ttdeci">LegalizeAction Action</div><div class="ttdoc">The action to take or the final answer.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00144">LegalizerInfo.h:144</a></div></div>
<div class="ttc" id="aAArch64MIPeepholeOpt_8cpp_html_a9c374320ed4e895f9afa199987182bd2"><div class="ttname"><a href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a></div><div class="ttdeci">unsigned RegSize</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MIPeepholeOpt_8cpp_source.html#l00123">AArch64MIPeepholeOpt.cpp:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1ac8d27532cfd1d1f032ecbff2ba3611"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">llvm::MachineInstrBuilder::add</a></div><div class="ttdeci">const MachineInstrBuilder &amp; add(const MachineOperand &amp;MO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00224">MachineInstrBuilder.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aa5ff177bc1498508696aaf27235db3fc"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aa5ff177bc1498508696aaf27235db3fc">llvm::MachineInstr::memoperands_begin</a></div><div class="ttdeci">mmo_iterator memoperands_begin() const</div><div class="ttdoc">Access to memory operands of the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00731">MachineInstr.h:731</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078a2c6b35e9cd746d28ac9625e5f1694539"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a2c6b35e9cd746d28ac9625e5f1694539">llvm::LegacyLegalizeActions::MoreElements</a></div><div class="ttdeci">@ MoreElements</div><div class="ttdoc">The (vector) operation should be implemented by widening the input vector and ignoring the lanes adde...</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00051">LegacyLegalizerInfo.h:51</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a19328c462764af5f4699fb1698dad994"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a19328c462764af5f4699fb1698dad994">llvm::ISD::BSWAP</a></div><div class="ttdeci">@ BSWAP</div><div class="ttdoc">Byte Swap and Counting operators.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00700">ISDOpcodes.h:700</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078a4f494c23358a431c763a6dc593381c78"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a4f494c23358a431c763a6dc593381c78">llvm::LegacyLegalizeActions::FewerElements</a></div><div class="ttdeci">@ FewerElements</div><div class="ttdoc">The (vector) operation should be implemented by splitting it into sub-vectors where the operation is ...</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00045">LegacyLegalizerInfo.h:45</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_a8b1a64bd0c1be7a99998055c78d1312b"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#a8b1a64bd0c1be7a99998055c78d1312b">llvm::MachinePointerInfo::getConstantPool</a></div><div class="ttdeci">static MachinePointerInfo getConstantPool(MachineFunction &amp;MF)</div><div class="ttdoc">Return a MachinePointerInfo record that refers to the constant pool.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01043">MachineOperand.cpp:1043</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0edf31d256ecb3ac003bf2d81a576c9e"><div class="ttname"><a href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">llvm::getOpcodeDef</a></div><div class="ttdeci">MachineInstr * getOpcodeDef(unsigned Opcode, Register Reg, const MachineRegisterInfo &amp;MRI)</div><div class="ttdoc">See if Reg is defined by an single def instruction that is Opcode.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00475">Utils.cpp:475</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_adaeb153523323510127b36a482fe7369"><div class="ttname"><a href="LegalizerHelper_8cpp.html#adaeb153523323510127b36a482fe7369">getTypeForLLT</a></div><div class="ttdeci">static Type * getTypeForLLT(LLT Ty, LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07701">LegalizerHelper.cpp:7701</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a9dc8c9b527c43cc36ac86886d18f00e4"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a9dc8c9b527c43cc36ac86886d18f00e4">llvm::LegalizerHelper::lowerFCopySign</a></div><div class="ttdeci">LegalizeResult lowerFCopySign(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06459">LegalizerHelper.cpp:6459</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac6b49f09ee0a287b676593cdef557720"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac6b49f09ee0a287b676593cdef557720">llvm::MachineIRBuilder::buildSplatVector</a></div><div class="ttdeci">MachineInstrBuilder buildSplatVector(const DstOp &amp;Res, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert Res = G_BUILD_VECTOR with Src replicated to fill the number of elements.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00695">MachineIRBuilder.cpp:695</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_a7df34dbf636f2fbbb00f2b86eccdb1eb"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#a7df34dbf636f2fbbb00f2b86eccdb1eb">High</a></div><div class="ttdeci">uint64_t High</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00061">NVVMIntrRange.cpp:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7075ef788cb3dea0ea239c1a6830734c"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7075ef788cb3dea0ea239c1a6830734c">llvm::MachineIRBuilder::buildMergeLikeInstr</a></div><div class="ttdeci">MachineInstrBuilder buildMergeLikeInstr(const DstOp &amp;Res, ArrayRef&lt; Register &gt; Ops)</div><div class="ttdoc">Build and insert Res = G_MERGE_VALUES Op0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00620">MachineIRBuilder.cpp:620</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a5360139c6b31d85cf3e29e2e6b7cf873"><div class="ttname"><a href="classllvm_1_1LLT.html#a5360139c6b31d85cf3e29e2e6b7cf873">llvm::LLT::vector</a></div><div class="ttdeci">static constexpr LLT vector(ElementCount EC, unsigned ScalarSizeInBits)</div><div class="ttdoc">Get a low-level vector of some number of elements and element width.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00056">LowLevelTypeImpl.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aea93a9315aeba603531c6d3d3a07776e"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aea93a9315aeba603531c6d3d3a07776e">llvm::MachineIRBuilder::getMRI</a></div><div class="ttdeci">MachineRegisterInfo * getMRI()</div><div class="ttdoc">Getter for MRI.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00291">MachineIRBuilder.h:291</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac76eb82370e997f967454f441effbbff"><div class="ttname"><a href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">llvm::getIConstantVRegValWithLookThrough</a></div><div class="ttdeci">std::optional&lt; ValueAndVReg &gt; getIConstantVRegValWithLookThrough(Register VReg, const MachineRegisterInfo &amp;MRI, bool LookThroughInstrs=true)</div><div class="ttdoc">If VReg is defined by a statically evaluable chain of instructions rooted on a G_CONSTANT returns its...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00409">Utils.cpp:409</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a26edc3c3cae5a3f4d6ddd7f628b98c45"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a26edc3c3cae5a3f4d6ddd7f628b98c45">llvm::MachineIRBuilder::buildZExtInReg</a></div><div class="ttdeci">MachineInstrBuilder buildZExtInReg(const DstOp &amp;Res, const SrcOp &amp;Op, int64_t ImmOp)</div><div class="ttdoc">Build and inserts Res = G_AND Op, LowBitsSet(ImmOp) Since there is no G_ZEXT_INREG like G_SEXT_INREG,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00551">MachineIRBuilder.cpp:551</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a0d496cc15e312863869a384532968143"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">llvm::MachineFunction::getMachineMemOperand</a></div><div class="ttdeci">MachineMemOperand * getMachineMemOperand(MachinePointerInfo PtrInfo, MachineMemOperand::Flags f, uint64_t s, Align base_alignment, const AAMDNodes &amp;AAInfo=AAMDNodes(), const MDNode *Ranges=nullptr, SyncScope::ID SSID=SyncScope::System, AtomicOrdering Ordering=AtomicOrdering::NotAtomic, AtomicOrdering FailureOrdering=AtomicOrdering::NotAtomic)</div><div class="ttdoc">getMachineMemOperand - Allocate a new MachineMemOperand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00469">MachineFunction.cpp:469</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a2ed659cad017d524d63d763e19ef756f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a2ed659cad017d524d63d763e19ef756f">llvm::LegalizerHelper::lowerBitreverse</a></div><div class="ttdeci">LegalizeResult lowerBitreverse(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07264">LegalizerHelper.cpp:7264</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdeci">@ FCMP_ONE</div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00726">InstrTypes.h:726</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">llvm::LegacyLegalizeActions::Bitcast</a></div><div class="ttdeci">@ Bitcast</div><div class="ttdoc">Perform the operation on a different, but equivalently sized type.</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00054">LegacyLegalizerInfo.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a31a4848346777be4c13b39d57c0885d0"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a31a4848346777be4c13b39d57c0885d0">llvm::MachineIRBuilder::buildMul</a></div><div class="ttdeci">MachineInstrBuilder buildMul(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_MUL Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01567">MachineIRBuilder.h:1567</a></div></div>
<div class="ttc" id="aclassllvm_1_1GStore_html_ab80d0571fdf63877734e0f7bea4e886b"><div class="ttname"><a href="classllvm_1_1GStore.html#ab80d0571fdf63877734e0f7bea4e886b">llvm::GStore::getValueReg</a></div><div class="ttdeci">Register getValueReg() const</div><div class="ttdoc">Get the stored value register.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00133">GenericMachineInstrs.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a331d69b5f93e47e7c596062b77dd5913"><div class="ttname"><a href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">llvm::APInt::getMaxValue</a></div><div class="ttdeci">static APInt getMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum unsigned value of APInt for specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00186">APInt.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a0f2bb4d63ad6914f3783967bf881a14b"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a0f2bb4d63ad6914f3783967bf881a14b">llvm::MachineIRBuilder::materializePtrAdd</a></div><div class="ttdeci">std::optional&lt; MachineInstrBuilder &gt; materializePtrAdd(Register &amp;Res, Register Op0, const LLT ValueTy, uint64_t Value)</div><div class="ttdoc">Materialize and insert Res = G_PTR_ADD Op0, (G_CONSTANT Value)</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00210">MachineIRBuilder.cpp:210</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a1675c68d181eacf6dde19dc7d0cdd20c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a1675c68d181eacf6dde19dc7d0cdd20c">llvm::LegalizerHelper::widenScalarSrc</a></div><div class="ttdeci">void widenScalarSrc(MachineInstr &amp;MI, LLT WideTy, unsigned OpIdx, unsigned ExtOpcode)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Use by extending the operand's typ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01440">LegalizerHelper.cpp:1440</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a3ce5d8e60ab35c2eac434686f7938f13"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3ce5d8e60ab35c2eac434686f7938f13">fcPosZero</a></div><div class="ttdeci">@ fcPosZero</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00206">FloatingPointMode.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a6fb535803cbc7430528cdb19a157dd47"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a6fb535803cbc7430528cdb19a157dd47">llvm::LegalizerHelper::lowerBitcast</a></div><div class="ttdeci">LegalizeResult lowerBitcast(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02661">LegalizerHelper.cpp:2661</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078af024bf463bed5cbd23fd03a1499b4b48"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078af024bf463bed5cbd23fd03a1499b4b48">llvm::LegacyLegalizeActions::WidenScalar</a></div><div class="ttdeci">@ WidenScalar</div><div class="ttdoc">The operation should be implemented in terms of a wider scalar base-type.</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00040">LegacyLegalizerInfo.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a67021459c7ef8f9a634b4eac7ffd0f96"><div class="ttname"><a href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">llvm::LLT::scalar</a></div><div class="ttdeci">static constexpr LLT scalar(unsigned SizeInBits)</div><div class="ttdoc">Get a low-level scalar or aggregate &quot;bag of bits&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00042">LowLevelTypeImpl.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a2161bd545c3baa8bfaa0d7b44ecf38c4"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a2161bd545c3baa8bfaa0d7b44ecf38c4">llvm::MachineIRBuilder::buildFAbs</a></div><div class="ttdeci">MachineInstrBuilder buildFAbs(const DstOp &amp;Dst, const SrcOp &amp;Src0, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_FABS Op0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01773">MachineIRBuilder.h:1773</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7ac5295bdfdd480a2c66ee54273ebe21"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7ac5295bdfdd480a2c66ee54273ebe21">llvm::MachineIRBuilder::buildZExtOrTrunc</a></div><div class="ttdeci">MachineInstrBuilder buildZExtOrTrunc(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_ZEXT Op, Res = G_TRUNC Op, or Res = COPY Op depending on the differing sizes...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00541">MachineIRBuilder.cpp:541</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a76e5a8c6363a48b3ca4e924a8f59f0e5"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a76e5a8c6363a48b3ca4e924a8f59f0e5">llvm::LegalizerHelper::lowerExtract</a></div><div class="ttdeci">LegalizeResult lowerExtract(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06853">LegalizerHelper.cpp:6853</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a3f2727e87d9863c60b67b7d08b05d2e6"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a3f2727e87d9863c60b67b7d08b05d2e6">llvm::MachineIRBuilder::buildFPow</a></div><div class="ttdeci">MachineInstrBuilder buildFPow(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Dst = G_FPOW Src0, Src1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01818">MachineIRBuilder.h:1818</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a64f47636eb4667460ea08f358d6d39da"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a64f47636eb4667460ea08f358d6d39da">llvm::LegalizerHelper::lowerFPTOUI</a></div><div class="ttdeci">LegalizeResult lowerFPTOUI(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06182">LegalizerHelper.cpp:6182</a></div></div>
<div class="ttc" id="astructllvm_1_1MemOp_html"><div class="ttname"><a href="structllvm_1_1MemOp.html">llvm::MemOp</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00112">TargetLowering.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af3bee3e462a14abdf3858c354a5cd222"><div class="ttname"><a href="classllvm_1_1APInt.html#af3bee3e462a14abdf3858c354a5cd222">llvm::APInt::getBitsSetWithWrap</a></div><div class="ttdeci">static APInt getBitsSetWithWrap(unsigned numBits, unsigned loBit, unsigned hiBit)</div><div class="ttdoc">Wrap version of getBitsSet.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00253">APInt.h:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ad6cbca2857caf659c388e189c948a1fd"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ad6cbca2857caf659c388e189c948a1fd">llvm::LegalizerHelper::bitcastSrc</a></div><div class="ttdeci">void bitcastSrc(MachineInstr &amp;MI, LLT CastTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a use by inserting a G_BITCAST to Ca...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01489">LegalizerHelper.cpp:1489</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00236">TargetRegisterInfo.h:236</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_af9ac32566a3d7b10a68fac371f15f643"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#af9ac32566a3d7b10a68fac371f15f643">llvm::MachineIRBuilder::buildUMin</a></div><div class="ttdeci">MachineInstrBuilder buildUMin(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1)</div><div class="ttdoc">Build and insert Res = G_UMIN Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01863">MachineIRBuilder.h:1863</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a0fab3e644b3457f90ed7f64876a037d2"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0fab3e644b3457f90ed7f64876a037d2">llvm::MachineBasicBlock::getFirstTerminatorForward</a></div><div class="ttdeci">iterator getFirstTerminatorForward()</div><div class="ttdoc">Finds the first terminator in a block by scanning forward.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00258">MachineBasicBlock.cpp:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_aabebd01d497720c5f7f25f1112c14ebf"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#aabebd01d497720c5f7f25f1112c14ebf">llvm::TargetLoweringBase::allowsMemoryAccess</a></div><div class="ttdeci">virtual bool allowsMemoryAccess(LLVMContext &amp;Context, const DataLayout &amp;DL, EVT VT, unsigned AddrSpace=0, Align Alignment=Align(1), MachineMemOperand::Flags Flags=MachineMemOperand::MONone, unsigned *Fast=nullptr) const</div><div class="ttdoc">Return true if the target supports a memory access of this type for the given address space and align...</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l01754">TargetLoweringBase.cpp:1754</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a562c9513409b74f02cb3a5c9bae672ea"><div class="ttname"><a href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">llvm::APInt::getSignedMaxValue</a></div><div class="ttdeci">static APInt getSignedMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00189">APInt.h:189</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a74212fb91857a365ae5c6c85a0646d97"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a74212fb91857a365ae5c6c85a0646d97">makeDstOps</a></div><div class="ttdeci">static void makeDstOps(SmallVectorImpl&lt; DstOp &gt; &amp;DstOps, LLT Ty, unsigned NumElts)</div><div class="ttdoc">Fill DstOps with DstOps that have same number of elements combined as the Ty.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03682">LegalizerHelper.cpp:3682</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_ab6fa4a61feadaf493e383ab28709d486"><div class="ttname"><a href="LegalizerHelper_8cpp.html#ab6fa4a61feadaf493e383ab28709d486">getConvRTLibDesc</a></div><div class="ttdeci">static RTLIB::Libcall getConvRTLibDesc(unsigned Opcode, Type *ToType, Type *FromType)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00764">LegalizerHelper.cpp:764</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aaa6f42b31892a929914872c879e4b365"><div class="ttname"><a href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">llvm::LLT::changeElementSize</a></div><div class="ttdeci">constexpr LLT changeElementSize(unsigned NewEltSize) const</div><div class="ttdoc">If this type is a vector, return a vector with the same number of elements but the new element size.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00187">LowLevelTypeImpl.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a88bfee6694db03e525171fc9eb98b13d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a88bfee6694db03e525171fc9eb98b13d">llvm::MachineIRBuilder::buildAtomicCmpXchg</a></div><div class="ttdeci">MachineInstrBuilder buildAtomicCmpXchg(Register OldValRes, Register Addr, Register CmpVal, Register NewVal, MachineMemOperand &amp;MMO)</div><div class="ttdoc">Build and insert OldValRes&lt;def&gt; = G_ATOMIC_CMPXCHG Addr, CmpVal, NewVal, MMO.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00869">MachineIRBuilder.cpp:869</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_a50a0bab21f1d14a86a1483ec283e4447"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">llvm::RTLIB::Libcall</a></div><div class="ttdeci">Libcall</div><div class="ttdoc">RTLIB::Libcall enum - This enum defines all of the runtime library calls the backend can emit.</div><div class="ttdef"><b>Definition:</b> <a href="RuntimeLibcalls_8h_source.html#l00030">RuntimeLibcalls.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aac36a82fb8a9d486c3b59ccab7769e4d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aac36a82fb8a9d486c3b59ccab7769e4d">llvm::LegalizerHelper::lowerFMad</a></div><div class="ttdeci">LegalizeResult lowerFMad(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06533">LegalizerHelper.cpp:6533</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_aaaeded5d0cab77f531b294638459aca5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01292">Instructions.h:1292</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a29ab832e2ed35aec5b6f00fbca685e7e"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a29ab832e2ed35aec5b6f00fbca685e7e">getNarrowTypeBreakDown</a></div><div class="ttdeci">static std::pair&lt; int, int &gt; getNarrowTypeBreakDown(LLT OrigTy, LLT NarrowTy, LLT &amp;LeftoverTy)</div><div class="ttdoc">Try to break down OrigTy into NarrowTy sized pieces.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00054">LegalizerHelper.cpp:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca8e4cde53763caadd95a5eeaeb48344bf">llvm::LegalizerHelper::UnableToLegalize</a></div><div class="ttdeci">@ UnableToLegalize</div><div class="ttdoc">Some kind of error has occurred and we could not legalize this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00071">LegalizerHelper.h:71</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a64cb92f784db53c70b9246a3cc632b25"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a64cb92f784db53c70b9246a3cc632b25">fcNormal</a></div><div class="ttdeci">@ fcNormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00213">FloatingPointMode.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00432">Attributes.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a584cb8dfa0090b33a969c4dda27337f6"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">llvm::ElementCount::getFixed</a></div><div class="ttdeci">static constexpr ElementCount getFixed(ScalarTy MinVal)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00291">TypeSize.h:291</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a></div><div class="ttdeci">@ fcNan</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00211">FloatingPointMode.h:211</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html">llvm::MachineMemOperand</a></div><div class="ttdoc">A description of a memory reference used in the backend.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00127">MachineMemOperand.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a7faf4e0334b77ab527e4b45e3a1f4d65"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">llvm::ConstantFP::getValueAPF</a></div><div class="ttdeci">const APFloat &amp; getValueAPF() const</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00297">Constants.h:297</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a7cff50fc754d88cd04027e85d578f443"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a7cff50fc754d88cd04027e85d578f443">clampDynamicVectorIndex</a></div><div class="ttdeci">static Register clampDynamicVectorIndex(MachineIRBuilder &amp;B, Register IdxReg, LLT VecTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03605">LegalizerHelper.cpp:3605</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a46a7cbf3724080a5f4f4c7e7a4551e26"><div class="ttname"><a href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned greater than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01160">APInt.h:1160</a></div></div>
<div class="ttc" id="aGenericMachineInstrs_8h_html"><div class="ttname"><a href="GenericMachineInstrs_8h.html">GenericMachineInstrs.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a00a7edf44feca96dfa6abdc4ae5d705d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a00a7edf44feca96dfa6abdc4ae5d705d">llvm::LegalizerHelper::lowerShlSat</a></div><div class="ttdeci">LegalizeResult lowerShlSat(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07184">LegalizerHelper.cpp:7184</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMISD_html_a4097c262adca175c068cc59fa984dc38aec586817cf51a463ca101fab0ce085da"><div class="ttname"><a href="namespacellvm_1_1ARMISD.html#a4097c262adca175c068cc59fa984dc38aec586817cf51a463ca101fab0ce085da">llvm::ARMISD::MEMCPY</a></div><div class="ttdeci">@ MEMCPY</div><div class="ttdef"><b>Definition:</b> <a href="ARMISelLowering_8h_source.html#l00310">ARMISelLowering.h:310</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a316be66b059419e22aefc98fd49e1081"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a316be66b059419e22aefc98fd49e1081">getRTLibDesc</a></div><div class="ttdeci">static RTLIB::Libcall getRTLibDesc(unsigned Opcode, unsigned Size)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00472">LegalizerHelper.cpp:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a1912d4fbc40c61a12b1f770ad54dfd74"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1912d4fbc40c61a12b1f770ad54dfd74">llvm::MachineInstr::isCopy</a></div><div class="ttdeci">bool isCopy() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01344">MachineInstr.h:1344</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a60609bd46d38414e2c9e2334f9740727"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a60609bd46d38414e2c9e2334f9740727">llvm::MachineIRBuilder::buildBuildVector</a></div><div class="ttdeci">MachineInstrBuilder buildBuildVector(const DstOp &amp;Res, ArrayRef&lt; Register &gt; Ops)</div><div class="ttdoc">Build and insert Res = G_BUILD_VECTOR Op0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00675">MachineIRBuilder.cpp:675</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa411af5653e9ed6cd4f664853b61bf0d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa411af5653e9ed6cd4f664853b61bf0d">llvm::LegalizerHelper::lower</a></div><div class="ttdeci">LegalizeResult lower(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdoc">Legalize an instruction by splitting it into simpler parts, hopefully understood by the target.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03274">LegalizerHelper.cpp:3274</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ad29042068469adc2859360985494dbb9"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ad29042068469adc2859360985494dbb9">llvm::LegalizerHelper::lowerSelect</a></div><div class="ttdeci">LegalizeResult lowerSelect(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07502">LegalizerHelper.cpp:7502</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ace9b958e28468570d5cc74682e326f3b"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ace9b958e28468570d5cc74682e326f3b">llvm::LegalizerHelper::lowerDIVREM</a></div><div class="ttdeci">LegalizeResult lowerDIVREM(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07559">LegalizerHelper.cpp:7559</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aMachineIRBuilder_8h_html"><div class="ttname"><a href="MachineIRBuilder_8h.html">MachineIRBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af34549c39d6f741fbdaf9a795aa306e9"><div class="ttname"><a href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">llvm::APInt::lshr</a></div><div class="ttdeci">APInt lshr(unsigned shiftAmt) const</div><div class="ttdoc">Logical right-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00839">APInt.h:839</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5542d44947f8d964b5ce3b20ea719b44"><div class="ttname"><a href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">llvm::PowerOf2Ceil</a></div><div class="ttdeci">uint64_t PowerOf2Ceil(uint64_t A)</div><div class="ttdoc">Returns the power of two which is greater than or equal to the given value.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00469">MathExtras.h:469</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a7da5cc6e8aadd4d5fb6dd68f8ec12b7e"><div class="ttname"><a href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">llvm::LLT::isVector</a></div><div class="ttdeci">constexpr bool isVector() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00129">LowLevelTypeImpl.h:129</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00292">MathExtras.h:292</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67afff82cc4502e0e3bf3575c9622284e18"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67afff82cc4502e0e3bf3575c9622284e18">fcPosNormal</a></div><div class="ttdeci">@ fcPosNormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00208">FloatingPointMode.h:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_af474773f09e4dbbc430d8d8df632e9fb"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#af474773f09e4dbbc430d8d8df632e9fb">llvm::MachineIRBuilder::buildXor</a></div><div class="ttdeci">MachineInstrBuilder buildXor(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1)</div><div class="ttdoc">Build and insert Res = G_XOR Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01673">MachineIRBuilder.h:1673</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aa24450f600cabd7212bd264a6dbc190c"><div class="ttname"><a href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">llvm::LLT::getElementType</a></div><div class="ttdeci">constexpr LLT getElementType() const</div><div class="ttdoc">Returns the vector's element type. Only valid for vector types.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00257">LowLevelTypeImpl.h:257</a></div></div>
<div class="ttc" id="aLegalizerInfo_8h_html"><div class="ttname"><a href="LegalizerInfo_8h.html">LegalizerInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac6b47b51bfacb6c594a3c6b8472202c1"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac6b47b51bfacb6c594a3c6b8472202c1">llvm::MachineIRBuilder::buildFCopysign</a></div><div class="ttdeci">MachineInstrBuilder buildFCopysign(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1)</div><div class="ttdoc">Build and insert Res = G_FCOPYSIGN Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01825">MachineIRBuilder.h:1825</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_aae70dd97002db997dfc96303fa9e6971"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aae70dd97002db997dfc96303fa9e6971">llvm::MachineOperand::setCImm</a></div><div class="ttdeci">void setCImm(const ConstantInt *CI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00689">MachineOperand.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_add4e37b60ea64faafbc9a5bf3e27280f"><div class="ttname"><a href="classllvm_1_1APInt.html#add4e37b60ea64faafbc9a5bf3e27280f">llvm::APInt::getZero</a></div><div class="ttdeci">static APInt getZero(unsigned numBits)</div><div class="ttdoc">Get the '0' value for the specified bit-width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00177">APInt.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a21f36be0b82249def611e5709ff7dd15"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a21f36be0b82249def611e5709ff7dd15">llvm::LegalizerHelper::lowerAbsToAddXor</a></div><div class="ttdeci">LegalizeResult lowerAbsToAddXor(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07576">LegalizerHelper.cpp:7576</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a></div><div class="ttdeci">@ fcPosInf</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00209">FloatingPointMode.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html_a06e32f822cc82701a5652331bccab467"><div class="ttname"><a href="classllvm_1_1TypeSize.html#a06e32f822cc82701a5652331bccab467">llvm::TypeSize::Fixed</a></div><div class="ttdeci">static constexpr TypeSize Fixed(ScalarTy ExactSize)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00331">TypeSize.h:331</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_af4c34648ca4596767ff0c3409fc3f2d9"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#af4c34648ca4596767ff0c3409fc3f2d9">llvm::MachineFrameInfo::setObjectAlignment</a></div><div class="ttdeci">void setObjectAlignment(int ObjectIdx, Align Alignment)</div><div class="ttdoc">setObjectAlignment - Change the alignment of the specified stack object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00497">MachineFrameInfo.h:497</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00158">ArrayRef.h:158</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ab031376e8eddaebf70d2cbcce069b4ba"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ab031376e8eddaebf70d2cbcce069b4ba">llvm::LegalizerHelper::lowerFFloor</a></div><div class="ttdeci">LegalizeResult lowerFFloor(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06580">LegalizerHelper.cpp:6580</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_af751c28a69e1d07e19dad11e4e26a70d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#af751c28a69e1d07e19dad11e4e26a70d">llvm::MachineIRBuilder::buildConstant</a></div><div class="ttdeci">virtual MachineInstrBuilder buildConstant(const DstOp &amp;Res, const ConstantInt &amp;Val)</div><div class="ttdoc">Build and insert Res = G_CONSTANT Val.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00302">MachineIRBuilder.cpp:302</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_a3c139798e0933ade84b12ac860b593de"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#a3c139798e0933ade84b12ac860b593de">llvm::RTLIB::getUINTTOFP</a></div><div class="ttdeci">Libcall getUINTTOFP(EVT OpVT, EVT RetVT)</div><div class="ttdoc">getUINTTOFP - Return the UINTTOFP_*_* value for the given types, or UNKNOWN_LIBCALL if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l00452">TargetLoweringBase.cpp:452</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd6aa057934751aaac54e5c18bcc18eb"><div class="ttname"><a href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">llvm::commonAlignment</a></div><div class="ttdeci">Align commonAlignment(Align A, uint64_t Offset)</div><div class="ttdoc">Returns the alignment that satisfies both alignments.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00212">Alignment.h:212</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64ISD_html_a35ad1b8db0dfad0b69c9185c5fe24e19adee98654dac93ffd21f1b9a129ec40e2"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a35ad1b8db0dfad0b69c9185c5fe24e19adee98654dac93ffd21f1b9a129ec40e2">llvm::AArch64ISD::FCMP</a></div><div class="ttdeci">@ FCMP</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00166">AArch64ISelLowering.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html_aa63e528eeff5082f6920b10244143920"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#aa63e528eeff5082f6920b10244143920">llvm::AttrBuilder::removeAttribute</a></div><div class="ttdeci">AttrBuilder &amp; removeAttribute(Attribute::AttrKind Val)</div><div class="ttdoc">Remove an attribute from the builder.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01704">Attributes.cpp:1704</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a3b08f09b085506a31ea5ac83f5d8fda1"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a3b08f09b085506a31ea5ac83f5d8fda1">llvm::MachineIRBuilder::buildURem</a></div><div class="ttdeci">MachineInstrBuilder buildURem(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_UREM Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01586">MachineIRBuilder.h:1586</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a2871c33d3a1264270d23ec72b71f1399"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2871c33d3a1264270d23ec72b71f1399">llvm::MachineOperand::CreateES</a></div><div class="ttdeci">static MachineOperand CreateES(const char *SymName, unsigned TargetFlags=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00900">MachineOperand.h:900</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a4fe52c440f33a8895fb01730017de4be"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a4fe52c440f33a8895fb01730017de4be">llvm::MachineIRBuilder::buildCTLZ_ZERO_UNDEF</a></div><div class="ttdeci">MachineInstrBuilder buildCTLZ_ZERO_UNDEF(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_CTLZ_ZERO_UNDEF Op0, Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01705">MachineIRBuilder.h:1705</a></div></div>
<div class="ttc" id="anamespacellvm_html_a25ebf05ccdc20f3355715fb29ee82427"><div class="ttname"><a href="namespacellvm.html#a25ebf05ccdc20f3355715fb29ee82427">llvm::getFltSemanticForLLT</a></div><div class="ttdeci">const llvm::fltSemantics &amp; getFltSemanticForLLT(LLT Ty)</div><div class="ttdoc">Get the appropriate floating point arithmetic semantic based on the bit size of the given scalar LLT.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2LowLevelType_8cpp_source.html#l00072">LowLevelType.cpp:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa10024dcff51f09d4751794584609e85"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa10024dcff51f09d4751794584609e85">llvm::LegalizerHelper::LegalizerHelper</a></div><div class="ttdeci">LegalizerHelper(MachineFunction &amp;MF, GISelChangeObserver &amp;Observer, MachineIRBuilder &amp;B)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00101">LegalizerHelper.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a8e25418b93784160f4a660950f5fa806"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a8e25418b93784160f4a660950f5fa806">llvm::LegalizerHelper::lowerVectorReduction</a></div><div class="ttdeci">LegalizeResult lowerVectorReduction(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07608">LegalizerHelper.cpp:7608</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a1e0f1de98d5e5415cf2ae9aa20993d69"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1e0f1de98d5e5415cf2ae9aa20993d69">fcPosFinite</a></div><div class="ttdeci">@ fcPosFinite</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00216">FloatingPointMode.h:216</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdeci">@ FCMP_ULT</div><div class="ttdoc">1 1 0 0 True if unordered or less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00732">InstrTypes.h:732</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ae4165ca7bcbee300d5e9c065adcc1415"><div class="ttname"><a href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">llvm::LLT::getScalarType</a></div><div class="ttdeci">constexpr LLT getScalarType() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00174">LowLevelTypeImpl.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1GLoadStore_html_a48eb6042fa9ac09ca019c94be20487f5"><div class="ttname"><a href="classllvm_1_1GLoadStore.html#a48eb6042fa9ac09ca019c94be20487f5">llvm::GLoadStore::isAtomic</a></div><div class="ttdeci">bool isAtomic() const</div><div class="ttdoc">Returns true if the attached MachineMemOperand has the atomic flag set.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00050">GenericMachineInstrs.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a2379cc7655115ddb345a664db355c2a0"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a2379cc7655115ddb345a664db355c2a0">llvm::MachineMemOperand::getPointerInfo</a></div><div class="ttdeci">const MachinePointerInfo &amp; getPointerInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00201">MachineMemOperand.h:201</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ac465c012a999bcab06235573fcb0860f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ac465c012a999bcab06235573fcb0860f">llvm::LegalizerHelper::moreElementsVectorSrc</a></div><div class="ttdeci">void moreElementsVectorSrc(MachineInstr &amp;MI, LLT MoreTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Use by producing a vector with und...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01482">LegalizerHelper.cpp:1482</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a85eb6ee9f537a283b2ba9964c54ab2f2"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a85eb6ee9f537a283b2ba9964c54ab2f2">llvm::MachineInstrBuilder::addDef</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addDef(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register definition operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00116">MachineInstrBuilder.h:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a13bd3dae94013a7bf38afc9391c8fa8f"><div class="ttname"><a href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">llvm::Register::isPhysical</a></div><div class="ttdeci">bool isPhysical() const</div><div class="ttdoc">Return true if the specified register number is in the physical register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00097">Register.h:97</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aTargetLowering_8h_html"><div class="ttname"><a href="TargetLowering_8h.html">TargetLowering.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_adb74ac5c2f2a45c7247a785f898d4833"><div class="ttname"><a href="namespacellvm.html#adb74ac5c2f2a45c7247a785f898d4833">llvm::getGCDType</a></div><div class="ttdeci">LLVM_READNONE LLT getGCDType(LLT OrigTy, LLT TargetTy)</div><div class="ttdoc">Return a type where the total size is the greatest common divisor of OrigTy and TargetTy.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00960">Utils.cpp:960</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aee39b6aa6b9299acb9388393e34f3937"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aee39b6aa6b9299acb9388393e34f3937">llvm::LegalizerHelper::getStackTemporaryAlignment</a></div><div class="ttdeci">Align getStackTemporaryAlignment(LLT Type, Align MinAlign=Align()) const</div><div class="ttdoc">Return the alignment to use for a stack temporary object with the given type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03581">LegalizerHelper.cpp:3581</a></div></div>
<div class="ttc" id="aMathExtras_8h_html_a9211f62d8e1e6de999eaa63ec0f6ae02"><div class="ttname"><a href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a></div><div class="ttdeci">#define R2(n)</div></div>
<div class="ttc" id="anamespacellvm_html_ab3b23d3c8c5c910df534a80ce9772495"><div class="ttname"><a href="namespacellvm.html#ab3b23d3c8c5c910df534a80ce9772495">llvm::MinAlign</a></div><div class="ttdeci">constexpr uint64_t MinAlign(uint64_t A, uint64_t B)</div><div class="ttdoc">A and B are either alignments or offsets.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00439">MathExtras.h:439</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae62214791d9e4dcb2f7eda048092458f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae62214791d9e4dcb2f7eda048092458f">llvm::LegalizerHelper::lowerBswap</a></div><div class="ttdeci">LegalizeResult lowerBswap(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07218">LegalizerHelper.cpp:7218</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a7359ee87521122d9315cb47df7ec57c5"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a7359ee87521122d9315cb47df7ec57c5">llvm::LegalizerHelper::lowerFunnelShiftAsShifts</a></div><div class="ttdeci">LegalizeResult lowerFunnelShiftAsShifts(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05881">LegalizerHelper.cpp:5881</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a></div><div class="ttdeci">@ fcAllFlags</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00219">FloatingPointMode.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a63b5343b9da17f8bcc83ec545022f5c7"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a63b5343b9da17f8bcc83ec545022f5c7">llvm::TargetLoweringBase::allowsMisalignedMemoryAccesses</a></div><div class="ttdeci">virtual bool allowsMisalignedMemoryAccesses(EVT, unsigned AddrSpace=0, Align Alignment=Align(1), MachineMemOperand::Flags Flags=MachineMemOperand::MONone, unsigned *=nullptr) const</div><div class="ttdoc">Determine if the target supports unaligned memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01730">TargetLowering.h:1730</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_ae7510a639ca53c1bfa1c90c6dfc7eb2e"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ae7510a639ca53c1bfa1c90c6dfc7eb2e">llvm::details::FixedOrScalableQuantity::divideCoefficientBy</a></div><div class="ttdeci">constexpr LeafTy divideCoefficientBy(ScalarTy RHS) const</div><div class="ttdoc">We do not provide the '/' operator here because division for polynomial types does not work in the sa...</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00234">TypeSize.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a1476a89aa41e0a21b60bfc63a292f2c3"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a1476a89aa41e0a21b60bfc63a292f2c3">findGISelOptimalMemOpLowering</a></div><div class="ttdeci">static bool findGISelOptimalMemOpLowering(std::vector&lt; LLT &gt; &amp;MemOps, unsigned Limit, const MemOp &amp;Op, unsigned DstAS, unsigned SrcAS, const AttributeList &amp;FuncAttributes, const TargetLowering &amp;TLI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07636">LegalizerHelper.cpp:7636</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a1e9e055fc19307bc3c7c1be6ccd36812"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a1e9e055fc19307bc3c7c1be6ccd36812">llvm::MachineIRBuilder::buildUnmerge</a></div><div class="ttdeci">MachineInstrBuilder buildUnmerge(ArrayRef&lt; LLT &gt; Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00648">MachineIRBuilder.cpp:648</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">llvm::RecurKind::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">Bitwise or logical AND of integers.</div></div>
<div class="ttc" id="aTarget_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a9c983906f9c3c89cf8ab6b5ce081e48f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a9c983906f9c3c89cf8ab6b5ce081e48f">llvm::MachineIRBuilder::buildZExt</a></div><div class="ttdeci">MachineInstrBuilder buildZExt(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_ZEXT Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00471">MachineIRBuilder.cpp:471</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7835e6cd3f1b340d3bb617304038d744"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7835e6cd3f1b340d3bb617304038d744">llvm::MachineIRBuilder::buildExtractVectorElement</a></div><div class="ttdeci">MachineInstrBuilder buildExtractVectorElement(const DstOp &amp;Res, const SrcOp &amp;Val, const SrcOp &amp;Idx)</div><div class="ttdoc">Build and insert Res = G_EXTRACT_VECTOR_ELT Val, Idx.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00836">MachineIRBuilder.cpp:836</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7962eca94c9f77da448245745fb22f57"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7962eca94c9f77da448245745fb22f57">llvm::MachineIRBuilder::buildLoad</a></div><div class="ttdeci">MachineInstrBuilder buildLoad(const DstOp &amp;Res, const SrcOp &amp;Addr, MachineMemOperand &amp;MMO)</div><div class="ttdoc">Build and insert Res = G_LOAD Addr, MMO.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00918">MachineIRBuilder.h:918</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a302df2102c76ad401ee88433c05fc31a"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a302df2102c76ad401ee88433c05fc31a">simpleLibcall</a></div><div class="ttdeci">static LegalizerHelper::LegalizeResult simpleLibcall(MachineInstr &amp;MI, MachineIRBuilder &amp;MIRBuilder, unsigned Size, Type *OpType)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00664">LegalizerHelper.cpp:664</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a8f6f143ae3ebc33b4f3f97e486bf7112"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a8f6f143ae3ebc33b4f3f97e486bf7112">llvm::LegalizerHelper::narrowScalarSelect</a></div><div class="ttdeci">LegalizeResult narrowScalarSelect(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05520">LegalizerHelper.cpp:5520</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a0a4f859f973b7f797f2d510c369980ad"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a0a4f859f973b7f797f2d510c369980ad">llvm::LegalizerHelper::lowerSITOFP</a></div><div class="ttdeci">LegalizeResult lowerSITOFP(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06136">LegalizerHelper.cpp:6136</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a0c0426a2303d102874f24e00608e3de4"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a0c0426a2303d102874f24e00608e3de4">llvm::LegalizerHelper::narrowScalarMul</a></div><div class="ttdeci">LegalizeResult narrowScalarMul(MachineInstr &amp;MI, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05249">LegalizerHelper.cpp:5249</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a64db465f835b214b79cb525a9326062d"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a64db465f835b214b79cb525a9326062d">llvm::TargetLoweringBase::getOptimalMemOpLLT</a></div><div class="ttdeci">virtual LLT getOptimalMemOpLLT(const MemOp &amp;Op, const AttributeList &amp;) const</div><div class="ttdoc">LLT returning variant.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01799">TargetLowering.h:1799</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a048378560a1f3ddd48ddf9c60ae488f5"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a048378560a1f3ddd48ddf9c60ae488f5">llvm::LegalizerHelper::narrowScalarCTPOP</a></div><div class="ttdeci">LegalizeResult narrowScalarCTPOP(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05638">LegalizerHelper.cpp:5638</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a545272144fee7632786d2fc0427ec6db"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a545272144fee7632786d2fc0427ec6db">llvm::LegalizerHelper::lowerSADDO_SSUBO</a></div><div class="ttdeci">LegalizeResult lowerSADDO_SSUBO(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07003">LegalizerHelper.cpp:7003</a></div></div>
<div class="ttc" id="aMipsDisassembler_8cpp_html_a15b5b86944f6df97d2c3659d77f51f91"><div class="ttname"><a href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a></div><div class="ttdeci">static unsigned getReg(const MCDisassembler *D, unsigned RC, unsigned RegNo)</div><div class="ttdef"><b>Definition:</b> <a href="MipsDisassembler_8cpp_source.html#l00521">MipsDisassembler.cpp:521</a></div></div>
<div class="ttc" id="aLostDebugLocObserver_8h_html"><div class="ttname"><a href="LostDebugLocObserver_8h.html">LostDebugLocObserver.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a49cd5939942c6665aba4cae8c220dff1"><div class="ttname"><a href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">llvm::APInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Determine if this value is zero, i.e. all bits are clear.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00366">APInt.h:366</a></div></div>
<div class="ttc" id="aclassllvm_1_1GAnyLoad_html_a4fe5ff0257f5b8749cbe223b848b2570"><div class="ttname"><a href="classllvm_1_1GAnyLoad.html#a4fe5ff0257f5b8749cbe223b848b2570">llvm::GAnyLoad::getDstReg</a></div><div class="ttdeci">Register getDstReg() const</div><div class="ttdoc">Get the definition register of the loaded value.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00082">GenericMachineInstrs.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_abac7927a227a6c370e26ee82af77567d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#abac7927a227a6c370e26ee82af77567d">llvm::LegalizerHelper::lowerShuffleVector</a></div><div class="ttdeci">LegalizeResult lowerShuffleVector(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06760">LegalizerHelper.cpp:6760</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_ab6fdf9b428bc3d57837022121c155cbf"><div class="ttname"><a href="classllvm_1_1Triple.html#ab6fdf9b428bc3d57837022121c155cbf">llvm::Triple::isOSDarwin</a></div><div class="ttdeci">bool isOSDarwin() const</div><div class="ttdoc">Is this a &quot;Darwin&quot; OS (macOS, iOS, tvOS, watchOS, or DriverKit).</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00518">Triple.h:518</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aaa03d66b30e1b6173c99b9a4266b7da9"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aaa03d66b30e1b6173c99b9a4266b7da9">llvm::LegalizerHelper::lowerFPTRUNC</a></div><div class="ttdeci">LegalizeResult lowerFPTRUNC(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06399">LegalizerHelper.cpp:6399</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae25927a69e107ef1477822b884ca034b"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae25927a69e107ef1477822b884ca034b">llvm::LegalizerHelper::narrowScalarCTLZ</a></div><div class="ttdeci">LegalizeResult narrowScalarCTLZ(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05566">LegalizerHelper.cpp:5566</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a25a4c14864c6f574bc99e19e15a8b4d2"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">llvm::LegalizerHelper::moreElementsVectorDst</a></div><div class="ttdeci">void moreElementsVectorDst(MachineInstr &amp;MI, LLT MoreTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Def by performing it with addition...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01472">LegalizerHelper.cpp:1472</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_aea38b47d1095d96c4103ce3990ae8eca"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#aea38b47d1095d96c4103ce3990ae8eca">llvm::TargetLoweringBase::getMaxStoresPerMemset</a></div><div class="ttdeci">unsigned getMaxStoresPerMemset(bool OptSize) const</div><div class="ttdoc">Get maximum # of store operations permitted for llvm.memset.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01677">TargetLowering.h:1677</a></div></div>
<div class="ttc" id="astructllvm_1_1CallLowering_1_1ArgInfo_html"><div class="ttname"><a href="structllvm_1_1CallLowering_1_1ArgInfo.html">llvm::CallLowering::ArgInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="CallLowering_8h_source.html#l00062">CallLowering.h:62</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_acb145f988329d1d621f73abcafea21d8"><div class="ttname"><a href="classllvm_1_1Type.html#acb145f988329d1d621f73abcafea21d8">llvm::Type::getDoubleTy</a></div><div class="ttdeci">static Type * getDoubleTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00229">Type.cpp:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_afd3920e024c9e79df5fd07b03c64d314"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#afd3920e024c9e79df5fd07b03c64d314">llvm::MachineIRBuilder::buildPtrToInt</a></div><div class="ttdeci">MachineInstrBuilder buildPtrToInt(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert a G_PTRTOINT instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00680">MachineIRBuilder.h:680</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_aba26b1883eac90bc8f0c2b51a5377545"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#aba26b1883eac90bc8f0c2b51a5377545">llvm::RTLIB::getFPROUND</a></div><div class="ttdeci">Libcall getFPROUND(EVT OpVT, EVT RetVT)</div><div class="ttdoc">getFPROUND - Return the FPROUND_*_* value for the given types, or UNKNOWN_LIBCALL if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l00265">TargetLoweringBase.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLowering_html"><div class="ttname"><a href="classllvm_1_1TargetLowering.html">llvm::TargetLowering</a></div><div class="ttdoc">This class defines information used to lower LLVM code to legal SelectionDAG operators that the targe...</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l03515">TargetLowering.h:3515</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a6701d040466d73f3dc51481d3186c294"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a6701d040466d73f3dc51481d3186c294">llvm::LegalizerHelper::narrowScalar</a></div><div class="ttdeci">LegalizeResult narrowScalar(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdoc">Legalize an instruction by reducing the width of the underlying scalar type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00906">LegalizerHelper.cpp:906</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a40c85353b0cd7cfdc7d8f8b364758c15"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a40c85353b0cd7cfdc7d8f8b364758c15">llvm::MachineIRBuilder::buildAnyExtOrTrunc</a></div><div class="ttdeci">MachineInstrBuilder buildAnyExtOrTrunc(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Res = COPY Op depending on the differing sizes of Res and Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00546">MachineIRBuilder.cpp:546</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a497ca5acebfbe31e76e7c05991519336"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a497ca5acebfbe31e76e7c05991519336">broadcastSrcOp</a></div><div class="ttdeci">static void broadcastSrcOp(SmallVectorImpl&lt; SrcOp &gt; &amp;Ops, unsigned N, MachineOperand &amp;Op)</div><div class="ttdoc">Operand Op is used on N sub-instructions.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03705">LegalizerHelper.cpp:3705</a></div></div>
<div class="ttc" id="aclassllvm_1_1LostDebugLocObserver_html_a91c878e342c004f480a55e8dc3f6fa67"><div class="ttname"><a href="classllvm_1_1LostDebugLocObserver.html#a91c878e342c004f480a55e8dc3f6fa67">llvm::LostDebugLocObserver::checkpoint</a></div><div class="ttdeci">void checkpoint(bool CheckDebugLocs=true)</div><div class="ttdoc">Call this to indicate that it's a good point to assess whether locations have been lost.</div><div class="ttdef"><b>Definition:</b> <a href="LostDebugLocObserver_8cpp_source.html#l00070">LostDebugLocObserver.cpp:70</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67aad6706481db6d8fac9a1cb6c3edd3b41"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67aad6706481db6d8fac9a1cb6c3edd3b41">fcNegFinite</a></div><div class="ttdeci">@ fcNegFinite</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00217">FloatingPointMode.h:217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a6c12dbad109a5d725ce01a9a8363f948"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a6c12dbad109a5d725ce01a9a8363f948">llvm::LegalizerHelper::bitcast</a></div><div class="ttdeci">LegalizeResult bitcast(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdoc">Legalize an instruction by replacing the value type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03197">LegalizerHelper.cpp:3197</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a071e8d814b2b30b02544fad964227b8e"><div class="ttname"><a href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">llvm::APInt::getAllOnes</a></div><div class="ttdeci">static APInt getAllOnes(unsigned numBits)</div><div class="ttdoc">Return an APInt of a specified width with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00214">APInt.h:214</a></div></div>
<div class="ttc" id="aCodeGen_2GlobalISel_2Utils_8h_html"><div class="ttname"><a href="CodeGen_2GlobalISel_2Utils_8h.html">Utils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a42020afbcac5113c831c00294a0ac37f"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a42020afbcac5113c831c00294a0ac37f">llvm::MachineInstr::isDebugInstr</a></div><div class="ttdeci">bool isDebugInstr() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01275">MachineInstr.h:1275</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a6a31c8e33dcb4c2c60d965227c227e8e"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a6a31c8e33dcb4c2c60d965227c227e8e">llvm::MachineIRBuilder::buildCTLZ</a></div><div class="ttdeci">MachineInstrBuilder buildCTLZ(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_CTLZ Op0, Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01700">MachineIRBuilder.h:1700</a></div></div>
<div class="ttc" id="aTargetOpcodes_8h_html"><div class="ttname"><a href="TargetOpcodes_8h.html">TargetOpcodes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a46cfa445be514255440f986c4b7b496f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a46cfa445be514255440f986c4b7b496f">llvm::MachineIRBuilder::buildConcatVectors</a></div><div class="ttdeci">MachineInstrBuilder buildConcatVectors(const DstOp &amp;Res, ArrayRef&lt; Register &gt; Ops)</div><div class="ttdoc">Build and insert Res = G_CONCAT_VECTORS Op0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00746">MachineIRBuilder.cpp:746</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="anamespacellvm_html_a646986783f35e0fef8988f0f28d2589f"><div class="ttname"><a href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">llvm::Log2_32</a></div><div class="ttdeci">unsigned Log2_32(uint32_t Value)</div><div class="ttdoc">Return the floor log base 2 of the specified value, -1 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00382">MathExtras.h:382</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a6be291efcc6345779494105f57f85aac"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a6be291efcc6345779494105f57f85aac">llvm::MachineIRBuilder::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00283">MachineIRBuilder.h:283</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a9b5ad9f5de612dc98a4f3232a98ab754"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a9b5ad9f5de612dc98a4f3232a98ab754">llvm::LegalizerHelper::lowerU64ToF32BitOps</a></div><div class="ttdeci">LegalizeResult lowerU64ToF32BitOps(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06052">LegalizerHelper.cpp:6052</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac0ca0a03e016a6da0766af3c725a7c47"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">llvm::MachineIRBuilder::getMF</a></div><div class="ttdeci">MachineFunction &amp; getMF()</div><div class="ttdoc">Getter for the function we currently build.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00273">MachineIRBuilder.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a3989251b1a714fc8296685f77eac6e87"><div class="ttname"><a href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">llvm::LLT::isScalar</a></div><div class="ttdeci">constexpr bool isScalar() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00123">LowLevelTypeImpl.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a8f6d92157833612e9b4cd0085e181b7e"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a8f6d92157833612e9b4cd0085e181b7e">llvm::LegalizerHelper::fewerElementsVectorMultiEltType</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorMultiEltType(GenericMachineInstr &amp;MI, unsigned NumElts, std::initializer_list&lt; unsigned &gt; NonVecOpIndices={})</div><div class="ttdoc">Handles most opcodes.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03732">LegalizerHelper.cpp:3732</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a743aa32715279bdb86b53f20065950c9"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a743aa32715279bdb86b53f20065950c9">llvm::LegalizerHelper::lowerInsert</a></div><div class="ttdeci">LegalizeResult lowerInsert(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06911">LegalizerHelper.cpp:6911</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ae74a60e5edcee0609a1e4fddc62a8a01"><div class="ttname"><a href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">llvm::LLT::scalarOrVector</a></div><div class="ttdeci">static constexpr LLT scalarOrVector(ElementCount EC, LLT ScalarTy)</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00100">LowLevelTypeImpl.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ad04539d64efd58e70c5e828739cf718e"><div class="ttname"><a href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">llvm::StringRef::data</a></div><div class="ttdeci">const char * data() const</div><div class="ttdoc">data - Get a pointer to the start of the string (which may not be null terminated).</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00131">StringRef.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a02d0daf870f6458a98b61f4b82a399c3"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a02d0daf870f6458a98b61f4b82a399c3">llvm::MachineIRBuilder::buildFSub</a></div><div class="ttdeci">MachineInstrBuilder buildFSub(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_FSUB Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01739">MachineIRBuilder.h:1739</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a33eb6083767372c564ea4bcf6c06eaf1"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a33eb6083767372c564ea4bcf6c06eaf1">llvm::MachineIRBuilder::buildAnd</a></div><div class="ttdeci">MachineInstrBuilder buildAnd(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1)</div><div class="ttdoc">Build and insert Res = G_AND Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01651">MachineIRBuilder.h:1651</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html_a1f637715070a99aa4140444e12697f9a"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">llvm::GISelChangeObserver::changingInstr</a></div><div class="ttdeci">virtual void changingInstr(MachineInstr &amp;MI)=0</div><div class="ttdoc">This instruction is about to be mutated in some way.</div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a0749d11a96068f2352e83d954c1849e7"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a0749d11a96068f2352e83d954c1849e7">isLibCallInTailPosition</a></div><div class="ttdeci">static bool isLibCallInTailPosition(MachineInstr &amp;MI, const TargetInstrInfo &amp;TII, MachineRegisterInfo &amp;MRI)</div><div class="ttdoc">True if an instruction is in tail position in its caller.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00566">LegalizerHelper.cpp:566</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aad02a49b6c2f7c3c92a4ad7df5c4eb47"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aad02a49b6c2f7c3c92a4ad7df5c4eb47">llvm::MachineIRBuilder::buildSMin</a></div><div class="ttdeci">MachineInstrBuilder buildSMin(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1)</div><div class="ttdoc">Build and insert Res = G_SMIN Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01851">MachineIRBuilder.h:1851</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdeci">@ FCMP_OLT</div><div class="ttdoc">0 1 0 0 True if ordered and less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00724">InstrTypes.h:724</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a813d1719803526d9839b4ae8d0a6b93d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a813d1719803526d9839b4ae8d0a6b93d">llvm::LegalizerHelper::lowerAddSubSatToMinMax</a></div><div class="ttdeci">LegalizeResult lowerAddSubSatToMinMax(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07039">LegalizerHelper.cpp:7039</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a9c5a2112c559ffbe2c7bbf5698b6482f"><div class="ttname"><a href="classllvm_1_1APFloat.html#a9c5a2112c559ffbe2c7bbf5698b6482f">llvm::APFloat::bitcastToAPInt</a></div><div class="ttdeci">APInt bitcastToAPInt() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01174">APFloat.h:1174</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ae6e7e975f7a4e5d535be32068a7c67df"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">llvm::MachineFrameInfo::isFixedObjectIndex</a></div><div class="ttdeci">bool isFixedObjectIndex(int ObjectIdx) const</div><div class="ttdoc">Returns true if the specified index corresponds to a fixed stack object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00688">MachineFrameInfo.h:688</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67aef5dadf4b31ffe9ff41bc8b25bd012de"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67aef5dadf4b31ffe9ff41bc8b25bd012de">fcNegSubnormal</a></div><div class="ttdeci">@ fcNegSubnormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00204">FloatingPointMode.h:204</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html_af9a870d5df50fe0133a410b7c9114c80"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">llvm::FixedVectorType::get</a></div><div class="ttdeci">static FixedVectorType * get(Type *ElementType, unsigned NumElts)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00686">Type.cpp:686</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aba403eaa336a6c9d869717c9e54edd9c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aba403eaa336a6c9d869717c9e54edd9c">llvm::LegalizerHelper::lowerUITOFP</a></div><div class="ttdeci">LegalizeResult lowerUITOFP(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06108">LegalizerHelper.cpp:6108</a></div></div>
<div class="ttc" id="aclassllvm_1_1GLoadStore_html_a0a7fb170c5d3165c1a9f3cf5fee5b4ca"><div class="ttname"><a href="classllvm_1_1GLoadStore.html#a0a7fb170c5d3165c1a9f3cf5fee5b4ca">llvm::GLoadStore::getPointerReg</a></div><div class="ttdeci">Register getPointerReg() const</div><div class="ttdoc">Get the source register of the pointer value.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00044">GenericMachineInstrs.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aeede510b1aaac978daaba60dcc2817de"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aeede510b1aaac978daaba60dcc2817de">llvm::MachineIRBuilder::buildLoadInstr</a></div><div class="ttdeci">MachineInstrBuilder buildLoadInstr(unsigned Opcode, const DstOp &amp;Res, const SrcOp &amp;Addr, MachineMemOperand &amp;MMO)</div><div class="ttdoc">Build and insert Res = &lt;opcode&gt; Addr, MMO.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00403">MachineIRBuilder.cpp:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a45aaa22f9450b9e89c1008c90e20659c"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a45aaa22f9450b9e89c1008c90e20659c">llvm::LegalizerInfo::getExtOpcodeForWideningConstant</a></div><div class="ttdeci">virtual unsigned getExtOpcodeForWideningConstant(LLT SmallTy) const</div><div class="ttdoc">Return the opcode (SEXT/ZEXT/ANYEXT) that should be performed while widening a constant of type Small...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8cpp_source.html#l00371">LegalizerInfo.cpp:371</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a2db1bc1a16d89298b92a13857146e28d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a2db1bc1a16d89298b92a13857146e28d">llvm::LegalizerHelper::narrowScalarCTTZ</a></div><div class="ttdeci">LegalizeResult narrowScalarCTTZ(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05602">LegalizerHelper.cpp:5602</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa8fe481cda91a90b364e410009785003"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa8fe481cda91a90b364e410009785003">llvm::LegalizerHelper::fewerElementsVector</a></div><div class="ttdeci">LegalizeResult fewerElementsVector(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdoc">Legalize a vector instruction by splitting into multiple components, each acting on the same scalar t...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04157">LegalizerHelper.cpp:4157</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1c5fadb14ff1d77faad0cb58a43252ab"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1c5fadb14ff1d77faad0cb58a43252ab">llvm::MachineInstrBuilder::getReg</a></div><div class="ttdeci">Register getReg(unsigned Idx) const</div><div class="ttdoc">Get the register for the operand index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00094">MachineInstrBuilder.h:94</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a956ffd0de93798f523683b447646dd92"><div class="ttname"><a href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">llvm::LLT::getSizeInBits</a></div><div class="ttdeci">constexpr TypeSize getSizeInBits() const</div><div class="ttdoc">Returns the total size of the type. Must only be called on sized types.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00159">LowLevelTypeImpl.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a1422ed8c8a0aea2d84dc7e2f35d24874"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a1422ed8c8a0aea2d84dc7e2f35d24874">llvm::LegalizerHelper::lowerIntrinsicRound</a></div><div class="ttdeci">LegalizeResult lowerIntrinsicRound(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06547">LegalizerHelper.cpp:6547</a></div></div>
<div class="ttc" id="aScalarEvolution_8cpp_html_aa4ab138d4aa4beb5e35a996d3bd21765"><div class="ttname"><a href="ScalarEvolution_8cpp.html#aa4ab138d4aa4beb5e35a996d3bd21765">gcd</a></div><div class="ttdeci">APInt gcd(const SCEVConstant *C1, const SCEVConstant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l03581">ScalarEvolution.cpp:3581</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a9607e5a365ae4ce30b73b802f590bb21"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a9607e5a365ae4ce30b73b802f590bb21">llvm::MachineIRBuilder::buildCTPOP</a></div><div class="ttdeci">MachineInstrBuilder buildCTPOP(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_CTPOP Op0, Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01695">MachineIRBuilder.h:1695</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a2fdcff9cc28cfffa71717b8d3c32c781"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a2fdcff9cc28cfffa71717b8d3c32c781">llvm::LegalizerHelper::lowerExtractInsertVectorElt</a></div><div class="ttdeci">LegalizeResult lowerExtractInsertVectorElt(MachineInstr &amp;MI)</div><div class="ttdoc">Lower a vector extract or insert by writing the vector to a stack temporary and reloading the element...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06688">LegalizerHelper.cpp:6688</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_afb3340c638c09709ce5766dcf672500d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#afb3340c638c09709ce5766dcf672500d">llvm::MachineIRBuilder::buildFCmp</a></div><div class="ttdeci">MachineInstrBuilder buildFCmp(CmpInst::Predicate Pred, const DstOp &amp;Res, const SrcOp &amp;Op0, const SrcOp &amp;Op1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert a Res = G_FCMP PredOp0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00812">MachineIRBuilder.cpp:812</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a1d8cf0723104442c5ec84740aa7d43f9"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a1d8cf0723104442c5ec84740aa7d43f9">llvm::MachineIRBuilder::buildAShr</a></div><div class="ttdeci">MachineInstrBuilder buildAShr(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01634">MachineIRBuilder.h:1634</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aec662ee6ab1490a4cabebf2812e5b9ca"><div class="ttname"><a href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">llvm::APInt::getOneBitSet</a></div><div class="ttdeci">static APInt getOneBitSet(unsigned numBits, unsigned BitNo)</div><div class="ttdoc">Return an APInt with exactly one bit set in the result.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00222">APInt.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_html_a50bf4f84c8a910409d92dd85e2b72953"><div class="ttname"><a href="namespacellvm.html#a50bf4f84c8a910409d92dd85e2b72953">llvm::matchUnaryPredicate</a></div><div class="ttdeci">bool matchUnaryPredicate(const MachineRegisterInfo &amp;MRI, Register Reg, std::function&lt; bool(const Constant *ConstVal)&gt; Match, bool AllowUndefs=false)</div><div class="ttdoc">Attempt to match a unary predicate against a scalar/splat constant or every element of a constant G_B...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l01257">Utils.cpp:1257</a></div></div>
<div class="ttc" id="aCombinerHelper_8cpp_html_a4743a8a472e0491e534c1efd2935a1a9"><div class="ttname"><a href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a></div><div class="ttdeci">static std::optional&lt; bool &gt; isBigEndian(const SmallDenseMap&lt; int64_t, int64_t, 8 &gt; &amp;MemOffset2Idx, int64_t LowestIdx)</div><div class="ttdoc">Given a map from byte offsets in memory to indices in a load/store, determine if that map corresponds...</div><div class="ttdef"><b>Definition:</b> <a href="CombinerHelper_8cpp_source.html#l00112">CombinerHelper.cpp:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a23ad1ea55dda3ab7617c7fad52c571ab"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a23ad1ea55dda3ab7617c7fad52c571ab">llvm::MachineIRBuilder::buildSelect</a></div><div class="ttdeci">MachineInstrBuilder buildSelect(const DstOp &amp;Res, const SrcOp &amp;Tst, const SrcOp &amp;Op0, const SrcOp &amp;Op1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert a Res = G_SELECT Tst, Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00822">MachineIRBuilder.cpp:822</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae91b4ff9d9c084c672f78adb9ed4006a"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae91b4ff9d9c084c672f78adb9ed4006a">llvm::LegalizerHelper::getVectorElementPointer</a></div><div class="ttdeci">Register getVectorElementPointer(Register VecPtr, LLT VecTy, Register Index)</div><div class="ttdoc">Get a pointer to vector element Index located in memory for a vector of type VecTy starting at a base...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03622">LegalizerHelper.cpp:3622</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html_a45a05a932f80f51023592ff5131d56a5"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">llvm::GISelChangeObserver::changedInstr</a></div><div class="ttdeci">virtual void changedInstr(MachineInstr &amp;MI)=0</div><div class="ttdoc">This instruction was mutated in some way.</div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_aebafd86dde59b5a05b22e8720e808a9d"><div class="ttname"><a href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">llvm::Register::isVirtual</a></div><div class="ttdeci">bool isVirtual() const</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00091">Register.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1GStore_html"><div class="ttname"><a href="classllvm_1_1GStore.html">llvm::GStore</a></div><div class="ttdoc">Represents a G_STORE.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00130">GenericMachineInstrs.h:130</a></div></div>
<div class="ttc" id="anamespacellvm_html_a55a2f0d67720407fe032276991d5111b"><div class="ttname"><a href="namespacellvm.html#a55a2f0d67720407fe032276991d5111b">llvm::getLCMType</a></div><div class="ttdeci">LLVM_READNONE LLT getLCMType(LLT OrigTy, LLT TargetTy)</div><div class="ttdoc">Return the least common multiple type of OrigTy and TargetTy, by changing the number of vector elemen...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00899">Utils.cpp:899</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a9cafdd2a39d4c80b227afb0219b46815"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a9cafdd2a39d4c80b227afb0219b46815">conversionLibcall</a></div><div class="ttdeci">static LegalizerHelper::LegalizeResult conversionLibcall(MachineInstr &amp;MI, MachineIRBuilder &amp;MIRBuilder, Type *ToType, Type *FromType)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00787">LegalizerHelper.cpp:787</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a8b8f5d788ec31cd57f429ce38b5e3bb7"><div class="ttname"><a href="classllvm_1_1LLT.html#a8b8f5d788ec31cd57f429ce38b5e3bb7">llvm::LLT::isByteSized</a></div><div class="ttdeci">constexpr bool isByteSized() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00229">LowLevelTypeImpl.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a34f7e7a55fa5743fadeef838b7c9ece9"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a34f7e7a55fa5743fadeef838b7c9ece9">llvm::LegalizerHelper::lowerAbsToMaxNeg</a></div><div class="ttdeci">LegalizeResult lowerAbsToMaxNeg(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07593">LegalizerHelper.cpp:7593</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html_a84c1d72001dd5f34d9a55b3a7bb8a474"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00239">DataLayout.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa6564387d7a51c85b557861c8f2d30ba"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa6564387d7a51c85b557861c8f2d30ba">llvm::LegalizerHelper::lowerFunnelShift</a></div><div class="ttdeci">LegalizeResult lowerFunnelShift(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05939">LegalizerHelper.cpp:5939</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a76df0b752eddd8b0711d1af16a3658ad"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a76df0b752eddd8b0711d1af16a3658ad">llvm::LegalizerHelper::lowerReadWriteRegister</a></div><div class="ttdeci">LegalizeResult lowerReadWriteRegister(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07295">LegalizerHelper.cpp:7295</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a944828d894ed9e13fbdfac2652d88745"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a944828d894ed9e13fbdfac2652d88745">getUnmergePieces</a></div><div class="ttdeci">static void getUnmergePieces(SmallVectorImpl&lt; Register &gt; &amp;Pieces, MachineIRBuilder &amp;B, Register Src, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02627">LegalizerHelper.cpp:2627</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a332b012f0983179618526234e605c9aa"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a332b012f0983179618526234e605c9aa">llvm::LegalizerHelper::lowerFunnelShiftWithInverse</a></div><div class="ttdeci">LegalizeResult lowerFunnelShiftWithInverse(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05839">LegalizerHelper.cpp:5839</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_af07a09f1cda33d984cc725dc9e856d40"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">llvm::ICmpInst::getUnsignedPredicate</a></div><div class="ttdeci">Predicate getUnsignedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;ULE, UGT-&gt;UGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01276">Instructions.h:1276</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a5604157867b3d226260f6388b987e49a"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a5604157867b3d226260f6388b987e49a">llvm::AttributeList::getRetAttrs</a></div><div class="ttdeci">AttributeSet getRetAttrs() const</div><div class="ttdoc">The attributes for the ret value are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01458">Attributes.cpp:1458</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a81a7959d3e7f624343ecdf6905e251dd"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a81a7959d3e7f624343ecdf6905e251dd">llvm::MachineIRBuilder::buildFConstant</a></div><div class="ttdeci">virtual MachineInstrBuilder buildFConstant(const DstOp &amp;Res, const ConstantFP &amp;Val)</div><div class="ttdoc">Build and insert Res = G_FCONSTANT Val.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00331">MachineIRBuilder.cpp:331</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_ae30bcd7968bd73b473060d15644aa60f"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#ae30bcd7968bd73b473060d15644aa60f">llvm::LegalizerInfo::legalizeIntrinsic</a></div><div class="ttdeci">virtual bool legalizeIntrinsic(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01278">LegalizerInfo.h:1278</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a437e7190e38ee7e10daee0f4909d5066"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a437e7190e38ee7e10daee0f4909d5066">llvm::MachineIRBuilder::buildSExtOrTrunc</a></div><div class="ttdeci">MachineInstrBuilder buildSExtOrTrunc(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_SEXT Op, Res = G_TRUNC Op, or Res = COPY Op depending on the differing sizes...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00536">MachineIRBuilder.cpp:536</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a0df93c0f752428162e14b54f8999172d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a0df93c0f752428162e14b54f8999172d">llvm::MachineIRBuilder::setInsertPt</a></div><div class="ttdeci">void setInsertPt(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator II)</div><div class="ttdoc">Set the insertion point before the specified position.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00317">MachineIRBuilder.h:317</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a60e4161d46b020a55403acd13e31df9a"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a60e4161d46b020a55403acd13e31df9a">llvm::LegalizerHelper::fewerElementsVectorPhi</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorPhi(GenericMachineInstr &amp;MI, unsigned NumElts)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03802">LegalizerHelper.cpp:3802</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html">llvm::MachineIRBuilder</a></div><div class="ttdoc">Helper class to build MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00221">MachineIRBuilder.h:221</a></div></div>
<div class="ttc" id="anamespacellvm_1_1IRSimilarity_html_af46430106334db52bfa7a4107e53a0bda8f7357506e00d8cd0694f948f909865d"><div class="ttname"><a href="namespacellvm_1_1IRSimilarity.html#af46430106334db52bfa7a4107e53a0bda8f7357506e00d8cd0694f948f909865d">llvm::IRSimilarity::Legal</a></div><div class="ttdeci">@ Legal</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00077">IRSimilarityIdentifier.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0af83aa690c458c5b3a8dc36ad3c3f9"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0af83aa690c458c5b3a8dc36ad3c3f9">llvm::MachineOperand::getCImm</a></div><div class="ttdeci">const ConstantInt * getCImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00561">MachineOperand.h:561</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1GAnyLoad_html"><div class="ttname"><a href="classllvm_1_1GAnyLoad.html">llvm::GAnyLoad</a></div><div class="ttdoc">Represents any generic load, including sign/zero extending variants.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00079">GenericMachineInstrs.h:79</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247">fcZero</a></div><div class="ttdeci">@ fcZero</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00215">FloatingPointMode.h:215</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078a5449e96e0fbabdf17da10f550e73fef7"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a5449e96e0fbabdf17da10f550e73fef7">llvm::LegacyLegalizeActions::NarrowScalar</a></div><div class="ttdeci">@ NarrowScalar</div><div class="ttdoc">The operation should be synthesized from multiple instructions acting on a narrower scalar base-type.</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00035">LegacyLegalizerInfo.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a6c47deaeb76718f7eaa6262308a72dd5"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a6c47deaeb76718f7eaa6262308a72dd5">llvm::MachineIRBuilder::buildStrictFAdd</a></div><div class="ttdeci">MachineInstrBuilder buildStrictFAdd(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_STRICT_FADD Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01733">MachineIRBuilder.h:1733</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_acf0f51041fbaaed06a39f2fe2686bb92"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#acf0f51041fbaaed06a39f2fe2686bb92">llvm::MachineIRBuilder::buildBitcast</a></div><div class="ttdeci">MachineInstrBuilder buildBitcast(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert Dst = G_BITCAST Src.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00690">MachineIRBuilder.h:690</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a430daa77692b7b25f93a72d83e51964f"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a430daa77692b7b25f93a72d83e51964f">llvm::MachineIRBuilder::getInsertPt</a></div><div class="ttdeci">MachineBasicBlock::iterator getInsertPt()</div><div class="ttdoc">Current insertion point for new instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00312">MachineIRBuilder.h:312</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_adabd45e67a1847750a117317b5ef8f9f"><div class="ttname"><a href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">llvm::LLT::changeElementCount</a></div><div class="ttdeci">constexpr LLT changeElementCount(ElementCount EC) const</div><div class="ttdoc">Return a vector or scalar with the same element type and the new element count.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00196">LowLevelTypeImpl.h:196</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39f8096c7d5def7216a886f8c540716e"><div class="ttname"><a href="namespacellvm.html#a39f8096c7d5def7216a886f8c540716e">llvm::createLibcall</a></div><div class="ttdeci">LegalizerHelper::LegalizeResult createLibcall(MachineIRBuilder &amp;MIRBuilder, const char *Name, const CallLowering::ArgInfo &amp;Result, ArrayRef&lt; CallLowering::ArgInfo &gt; Args, CallingConv::ID CC)</div><div class="ttdoc">Helper function that creates a libcall to the given Name using the given calling convention CC.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00635">LegalizerHelper.cpp:635</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html">llvm::MachinePointerInfo</a></div><div class="ttdoc">This class contains a discriminated union of information about pointers in memory operands,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00039">MachineMemOperand.h:39</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aea9d2b3b2a626fb7c5093f5f8fa9cf95"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aea9d2b3b2a626fb7c5093f5f8fa9cf95">llvm::LegalizerHelper::narrowScalarAddSub</a></div><div class="ttdeci">LegalizeResult narrowScalarAddSub(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05155">LegalizerHelper.cpp:5155</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad4b2e7a84faf3d7b6ffb84b541358e00"><div class="ttname"><a href="namespacellvm.html#ad4b2e7a84faf3d7b6ffb84b541358e00">llvm::assumeAligned</a></div><div class="ttdeci">Align assumeAligned(uint64_t Value)</div><div class="ttdoc">Treats the value 0 as a 1, so Align is always at least 1.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00111">Alignment.h:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ab24db762f0912a99f1e4d9e44eaeaa44"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ab24db762f0912a99f1e4d9e44eaeaa44">llvm::MachineIRBuilder::setInstrAndDebugLoc</a></div><div class="ttdeci">void setInstrAndDebugLoc(MachineInstr &amp;MI)</div><div class="ttdoc">Set the insertion point to before MI, and set the debug loc to MI's loc.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00354">MachineIRBuilder.h:354</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aa911a7e9e51b7ed20810fc819efe6a26"><div class="ttname"><a href="classllvm_1_1LLT.html#aa911a7e9e51b7ed20810fc819efe6a26">llvm::LLT::getElementCount</a></div><div class="ttdeci">constexpr ElementCount getElementCount() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00150">LowLevelTypeImpl.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a82dbc99941b4cb96955d0e550dfb19f5"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a82dbc99941b4cb96955d0e550dfb19f5">llvm::MachineIRBuilder::buildPtrAdd</a></div><div class="ttdeci">MachineInstrBuilder buildPtrAdd(const DstOp &amp;Res, const SrcOp &amp;Op0, const SrcOp &amp;Op1)</div><div class="ttdoc">Build and insert Res = G_PTR_ADD Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00199">MachineIRBuilder.cpp:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8376734f311508662dd7e737752e5953"><div class="ttname"><a href="classllvm_1_1APInt.html#a8376734f311508662dd7e737752e5953">llvm::APInt::negate</a></div><div class="ttdeci">void negate()</div><div class="ttdoc">Negate this APInt in place.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01421">APInt.h:1421</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_afc51b7318978bc4878cce41bdf1774db"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#afc51b7318978bc4878cce41bdf1774db">llvm::MachineIRBuilder::buildFAdd</a></div><div class="ttdeci">MachineInstrBuilder buildFAdd(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_FADD Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01725">MachineIRBuilder.h:1725</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a22e3d9fb3f1b84617e3a3ef5c51145c7"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a22e3d9fb3f1b84617e3a3ef5c51145c7">fcInf</a></div><div class="ttdeci">@ fcInf</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00212">FloatingPointMode.h:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_abce8515ac1fb3b6be13d5a39418847cb"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#abce8515ac1fb3b6be13d5a39418847cb">llvm::LegalizerHelper::lowerMergeValues</a></div><div class="ttdeci">LegalizeResult lowerMergeValues(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06607">LegalizerHelper.cpp:6607</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a8b4f9b4a8d23929cd5399ad0f005344e"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a8b4f9b4a8d23929cd5399ad0f005344e">equalizeVectorShuffleLengths</a></div><div class="ttdeci">static LegalizerHelper::LegalizeResult equalizeVectorShuffleLengths(MachineInstr &amp;MI, MachineIRBuilder &amp;MIRBuilder)</div><div class="ttdoc">Expand source vectors to the size of destination vector.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04982">LegalizerHelper.cpp:4982</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l01040">Attributes.h:1040</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a8320a54de0a273478de910ac3795058b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">llvm::MachineFrameInfo::getObjectAlign</a></div><div class="ttdeci">Align getObjectAlign(int ObjectIdx) const</div><div class="ttdoc">Return the alignment of the specified stack object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00484">MachineFrameInfo.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a04873b91eebbedfe4fd28d54029068d6"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a04873b91eebbedfe4fd28d54029068d6">llvm::MachineIRBuilder::buildFMul</a></div><div class="ttdeci">MachineInstrBuilder buildFMul(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01592">MachineIRBuilder.h:1592</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a03241215374b8ba88272333652a4a151"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a03241215374b8ba88272333652a4a151">llvm::MachineIRBuilder::buildFPTOSI</a></div><div class="ttdeci">MachineInstrBuilder buildFPTOSI(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_FPTOSI Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01846">MachineIRBuilder.h:1846</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a1a84546a5ff646ed05b5772e00084db6"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a1a84546a5ff646ed05b5772e00084db6">llvm::LegalizerHelper::lowerSMULH_UMULH</a></div><div class="ttdeci">LegalizeResult lowerSMULH_UMULH(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07321">LegalizerHelper.cpp:7321</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aa7dc7faaab4856b8f0014b8283e26c7b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">llvm::MachineBasicBlock::getFirstNonPHI</a></div><div class="ttdeci">iterator getFirstNonPHI()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00198">MachineBasicBlock.cpp:198</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00166">README.txt:166</a></div></div>
<div class="ttc" id="aMachineConstantPool_8h_html"><div class="ttname"><a href="MachineConstantPool_8h.html">MachineConstantPool.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a7287c6cc84f805db4ae46d581b4deecc"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a7287c6cc84f805db4ae46d581b4deecc">llvm::LegalizerHelper::lowerMinMax</a></div><div class="ttdeci">LegalizeResult lowerMinMax(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06443">LegalizerHelper.cpp:6443</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a2415abc0d17bb4bfad67606913c8ce10"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a2415abc0d17bb4bfad67606913c8ce10">fcPosSubnormal</a></div><div class="ttdeci">@ fcPosSubnormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00207">FloatingPointMode.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a297f161b2970f693a98a4bf30c7eb630"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a297f161b2970f693a98a4bf30c7eb630">llvm::LegalizerHelper::lowerFConstant</a></div><div class="ttdeci">LegalizeResult lowerFConstant(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02635">LegalizerHelper.cpp:2635</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_acbd00405fe4d2eca789c1225e75bc53f"><div class="ttname"><a href="LegalizerHelper_8cpp.html#acbd00405fe4d2eca789c1225e75bc53f">getUnmergeResults</a></div><div class="ttdeci">static void getUnmergeResults(SmallVectorImpl&lt; Register &gt; &amp;Regs, const MachineInstr &amp;MI)</div><div class="ttdoc">Append the result registers of G_UNMERGE_VALUES MI to Regs.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00315">LegalizerHelper.cpp:315</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_aacaa5cd359fad565f73313045b5c83f0"><div class="ttname"><a href="LegalizerHelper_8cpp.html#aacaa5cd359fad565f73313045b5c83f0">hasSameNumEltsOnAllVectorOperands</a></div><div class="ttdeci">static bool hasSameNumEltsOnAllVectorOperands(GenericMachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, std::initializer_list&lt; unsigned &gt; NonVecOpIndices)</div><div class="ttdoc">Check that all vector operands have same number of elements.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03644">LegalizerHelper.cpp:3644</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a4252eb25f822e53c1bea2ec59e5c0f07"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a4252eb25f822e53c1bea2ec59e5c0f07">llvm::MachineIRBuilder::buildIntrinsicTrunc</a></div><div class="ttdeci">MachineInstrBuilder buildIntrinsicTrunc(const DstOp &amp;Dst, const SrcOp &amp;Src0, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Dst = G_INTRINSIC_TRUNC Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01787">MachineIRBuilder.h:1787</a></div></div>
<div class="ttc" id="aclassllvm_1_1GLoadStore_html_a1833a6824522ac00595a007393c73f61"><div class="ttname"><a href="classllvm_1_1GLoadStore.html#a1833a6824522ac00595a007393c73f61">llvm::GLoadStore::getMemSize</a></div><div class="ttdeci">uint64_t getMemSize() const</div><div class="ttdoc">Returns the size in bytes of the memory access.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00061">GenericMachineInstrs.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a878403638ab65500c736343a57678bdb"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a878403638ab65500c736343a57678bdb">llvm::MachineOperand::getFPImm</a></div><div class="ttdeci">const ConstantFP * getFPImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00566">MachineOperand.h:566</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a71181d67d0bf68c3b8a535ec20463f90"><div class="ttname"><a href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">llvm::LLT::getNumElements</a></div><div class="ttdeci">constexpr uint16_t getNumElements() const</div><div class="ttdoc">Returns the number of elements in a vector LLT.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00133">LowLevelTypeImpl.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_aa460158a4019a4043faf6ea76344cbd5"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aa460158a4019a4043faf6ea76344cbd5">llvm::MachineFunction::getConstantPool</a></div><div class="ttdeci">MachineConstantPool * getConstantPool()</div><div class="ttdoc">getConstantPool - Return the constant pool object for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00704">MachineFunction.h:704</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a1a3548d0921506d0cd736b7960c12485"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a1a3548d0921506d0cd736b7960c12485">llvm::LegalizerHelper::moreElementsVectorShuffle</a></div><div class="ttdeci">LegalizeResult moreElementsVectorShuffle(MachineInstr &amp;MI, unsigned TypeIdx, LLT MoreTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05044">LegalizerHelper.cpp:5044</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a448a4aa9f90dbde0f77fae45b1625d88"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a448a4aa9f90dbde0f77fae45b1625d88">llvm::MachineIRBuilder::getMBB</a></div><div class="ttdeci">const MachineBasicBlock &amp; getMBB() const</div><div class="ttdoc">Getter for the basic block we currently build.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00298">MachineIRBuilder.h:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a18fcadd076ad53e6df94e0ca7a80a9ef"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">llvm::MachineFunction::getFrameInfo</a></div><div class="ttdeci">MachineFrameInfo &amp; getFrameInfo()</div><div class="ttdoc">getFrameInfo - Return the frame info object for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00688">MachineFunction.h:688</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a1eac84349f5abc12d101036412730c5c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a1eac84349f5abc12d101036412730c5c">llvm::LegalizerHelper::fewerElementsVectorShuffle</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorShuffle(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04304">LegalizerHelper.cpp:4304</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a4aeaf8d22c1a5ec6e5c36633c5951c30"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a4aeaf8d22c1a5ec6e5c36633c5951c30">llvm::TargetLoweringBase::getMaxStoresPerMemcpy</a></div><div class="ttdeci">unsigned getMaxStoresPerMemcpy(bool OptSize) const</div><div class="ttdoc">Get maximum # of store operations permitted for llvm.memcpy.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01687">TargetLowering.h:1687</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdeci">@ FCMP_OGE</div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00723">InstrTypes.h:723</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_af3687eafb2772c29aa67ce722c2081fd"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#af3687eafb2772c29aa67ce722c2081fd">llvm::LegalizerInfo::getAction</a></div><div class="ttdeci">LegalizeActionStep getAction(const LegalityQuery &amp;Query) const</div><div class="ttdoc">Determine what action should be taken to legalize the described instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8cpp_source.html#l00319">LegalizerInfo.cpp:319</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ad7f8e31fdc4b07d287c52567a2d259f4"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ad7f8e31fdc4b07d287c52567a2d259f4">llvm::LegalizerHelper::narrowScalarDst</a></div><div class="ttdeci">void narrowScalarDst(MachineInstr &amp;MI, LLT NarrowTy, unsigned OpIdx, unsigned ExtOpcode)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01463">LegalizerHelper.cpp:1463</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a40e2e64056fc2e2dabadfb9ceae338f6"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a40e2e64056fc2e2dabadfb9ceae338f6">llvm::LegalizerHelper::lowerStore</a></div><div class="ttdeci">LegalizeResult lowerStore(GStore &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03097">LegalizerHelper.cpp:3097</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a3e9d2a9063bce7f5b3d7dd21fd05c79d"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">llvm::MachineMemOperand::getMemoryType</a></div><div class="ttdeci">LLT getMemoryType() const</div><div class="ttdoc">Return the memory type of the memory reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00232">MachineMemOperand.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a9694f2906cfe1d6d35bbe6742c67dff0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">llvm::MachineRegisterInfo::createGenericVirtualRegister</a></div><div class="ttdeci">Register createGenericVirtualRegister(LLT Ty, StringRef Name=&quot;&quot;)</div><div class="ttdoc">Create and return a new generic virtual register with low-level type Ty.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00185">MachineRegisterInfo.cpp:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html"><div class="ttname"><a href="classllvm_1_1MVT.html">llvm::MVT</a></div><div class="ttdoc">Machine Value Type.</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00031">MachineValueType.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a6b02e5030940984fb331116653635050"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a6b02e5030940984fb331116653635050">llvm::MachineIRBuilder::buildAssertZExt</a></div><div class="ttdeci">MachineInstrBuilder buildAssertZExt(const DstOp &amp;Res, const SrcOp &amp;Op, unsigned Size)</div><div class="ttdoc">Build and insert Res = G_ASSERT_ZEXT Op, Size.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00887">MachineIRBuilder.h:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_aec748fa81e1488192450f0b2a8d1aeca"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">llvm::MachineInstrBuilder::addUse</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addUse(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register use operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00123">MachineInstrBuilder.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ace5611e40c0a2dbdc2c6cbc93bea180c"><div class="ttname"><a href="classllvm_1_1Type.html#ace5611e40c0a2dbdc2c6cbc93bea180c">llvm::Type::getX86_FP80Ty</a></div><div class="ttdeci">static Type * getX86_FP80Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00232">Type.cpp:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae18cc835581a3f8882d7725891b67e4e"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae18cc835581a3f8882d7725891b67e4e">llvm::LegalizerHelper::fewerElementsVectorExtractInsertVectorElt</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorExtractInsertVectorElt(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03987">LegalizerHelper.cpp:3987</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_abce993680c63fae7b6cc5814e9b07826"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#abce993680c63fae7b6cc5814e9b07826">llvm::LegalizerHelper::fewerElementsVectorUnmergeValues</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorUnmergeValues(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03850">LegalizerHelper.cpp:3850</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a04af1d639a21e7ef4357facd283b42c4"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a04af1d639a21e7ef4357facd283b42c4">llvm::MachineInstr::isReturn</a></div><div class="ttdeci">bool isReturn(QueryType Type=AnyInBundle) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00862">MachineInstr.h:862</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrInfo_html_abdbb44946a6951b5d90dd5313023156f"><div class="ttname"><a href="classllvm_1_1MCInstrInfo.html#abdbb44946a6951b5d90dd5313023156f">llvm::MCInstrInfo::getName</a></div><div class="ttdeci">StringRef getName(unsigned Opcode) const</div><div class="ttdoc">Returns the name for the instructions with the given opcode.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrInfo_8h_source.html#l00070">MCInstrInfo.h:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4"><div class="ttname"><a href="namespacellvm.html#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">llvm::FloatStyle::Exponent</a></div><div class="ttdeci">@ Exponent</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aacc36b9bbb74a3cdb987aa8f28b269e3"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aacc36b9bbb74a3cdb987aa8f28b269e3">llvm::LegalizerHelper::widenScalar</a></div><div class="ttdeci">LegalizeResult widenScalar(MachineInstr &amp;MI, unsigned TypeIdx, LLT WideTy)</div><div class="ttdoc">Legalize an instruction by performing the operation on a wider scalar type (for example a 16-bit addi...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02032">LegalizerHelper.cpp:2032</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aaec7c9b0ed49d3297c833d8d9def42c0"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aaec7c9b0ed49d3297c833d8d9def42c0">llvm::LegalizerHelper::narrowScalarExtract</a></div><div class="ttdeci">LegalizeResult narrowScalarExtract(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05306">LegalizerHelper.cpp:5306</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_a9459055a98e20980521289e8d20fcc7e"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#a9459055a98e20980521289e8d20fcc7e">llvm::MachinePointerInfo::getWithOffset</a></div><div class="ttdeci">MachinePointerInfo getWithOffset(int64_t O) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00079">MachineMemOperand.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a4e3a2187cacdec76028617a403c47d89"><div class="ttname"><a href="classllvm_1_1APInt.html#a4e3a2187cacdec76028617a403c47d89">llvm::APInt::urem</a></div><div class="ttdeci">APInt urem(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned remainder operation.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01664">APInt.cpp:1664</a></div></div>
<div class="ttc" id="astructStatus_html"><div class="ttname"><a href="structStatus.html">Status</a></div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00029">SIModeRegister.cpp:29</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acae72f6ab1071b7ec87b741a8bef582b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">llvm::MachineBasicBlock::instr_end</a></div><div class="ttdeci">instr_iterator instr_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00295">MachineBasicBlock.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a0c4e2aa2235abdd10d2beffa32cd9b14"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14">llvm::NVPTX::PTXLdStInstCode::FromType</a></div><div class="ttdeci">FromType</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00116">NVPTX.h:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a97444fdd32d8610e39f82294399f3adca766fa3e68dde7dab82b6f063229a863f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca766fa3e68dde7dab82b6f063229a863f">llvm::LegalizerHelper::AlreadyLegal</a></div><div class="ttdeci">@ AlreadyLegal</div><div class="ttdoc">Instruction was already legal and no change was made to the MachineFunction.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00064">LegalizerHelper.h:64</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a4df0dbd10ced1d274a13b702816d3903"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a4df0dbd10ced1d274a13b702816d3903">getScalarOpcForReduction</a></div><div class="ttdeci">static unsigned getScalarOpcForReduction(unsigned Opc)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04446">LegalizerHelper.cpp:4446</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a7ff0361855acbbe71b15b8dc6003fbc5"><div class="ttname"><a href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">llvm::LLT::pointer</a></div><div class="ttdeci">static constexpr LLT pointer(unsigned AddressSpace, unsigned SizeInBits)</div><div class="ttdoc">Get a low-level pointer in the given address space.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00049">LowLevelTypeImpl.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a1dbb219846876149646e81e84ee81a47"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a1dbb219846876149646e81e84ee81a47">llvm::LegalizerHelper::lowerLoad</a></div><div class="ttdeci">LegalizeResult lowerLoad(GAnyLoad &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02960">LegalizerHelper.cpp:2960</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a2c539935ed4a45a8ad3afb386e98d276"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a2c539935ed4a45a8ad3afb386e98d276">llvm::TargetSubtargetInfo::getCallLowering</a></div><div class="ttdeci">virtual const CallLowering * getCallLowering() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00103">TargetSubtargetInfo.h:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a0b9d961c3e0a9fa4c0e9ce806e972c4c"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a0b9d961c3e0a9fa4c0e9ce806e972c4c">llvm::LegalizerHelper::lowerBitCount</a></div><div class="ttdeci">LegalizeResult lowerBitCount(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05663">LegalizerHelper.cpp:5663</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a8bc92b8a902afb7675480ecc729a66d4"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a8bc92b8a902afb7675480ecc729a66d4">llvm::MachineIRBuilder::buildInstr</a></div><div class="ttdeci">MachineInstrBuilder buildInstr(unsigned Opcode)</div><div class="ttdoc">Build and insert &lt;empty&gt; = Opcode &lt;empty&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00385">MachineIRBuilder.h:385</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html">llvm::LegalityQuery</a></div><div class="ttdoc">The LegalityQuery object bundles together all the information that's needed to decide whether a given...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00108">LegalizerInfo.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdoc">Returns an iterator to the first terminator instruction of this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00240">MachineBasicBlock.cpp:240</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ab483400178810f8c04f3ee4ebe5db4c9"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ab483400178810f8c04f3ee4ebe5db4c9">llvm::LegalizerHelper::narrowScalarExt</a></div><div class="ttdeci">LegalizeResult narrowScalarExt(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05498">LegalizerHelper.cpp:5498</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a9d825f5954d7bd527aea490668c624c6"><div class="ttname"><a href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">llvm::LLT::isPointer</a></div><div class="ttdeci">constexpr bool isPointer() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00125">LowLevelTypeImpl.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html_a80f295107105ef76efd7022b579cc8e0"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a80f295107105ef76efd7022b579cc8e0">llvm::DataLayout::isNonIntegralAddressSpace</a></div><div class="ttdeci">bool isNonIntegralAddressSpace(unsigned AddrSpace) const</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00389">DataLayout.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a539bdb4fdbf46e0bfcefebf5ac6d21dd"><div class="ttname"><a href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">llvm::APInt::getAllOnesValue</a></div><div class="ttdeci">static APInt getAllOnesValue(unsigned numBits)</div><div class="ttdoc">NOTE: This is soft-deprecated. Please use getAllOnes() instead.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00219">APInt.h:219</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a1ae307f415a8989475e3f7ddd6eefc8b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a1ae307f415a8989475e3f7ddd6eefc8b">llvm::MachineFrameInfo::CreateStackObject</a></div><div class="ttdeci">int CreateStackObject(uint64_t Size, Align Alignment, bool isSpillSlot, const AllocaInst *Alloca=nullptr, uint8_t ID=0)</div><div class="ttdoc">Create a new statically sized stack object, returning a nonnegative identifier to represent it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00051">MachineFrameInfo.cpp:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a4f404daab6050b7a8e95bb247d4aefb2"><div class="ttname"><a href="classllvm_1_1LLT.html#a4f404daab6050b7a8e95bb247d4aefb2">llvm::LLT::changeElementType</a></div><div class="ttdeci">constexpr LLT changeElementType(LLT NewEltTy) const</div><div class="ttdoc">If this type is a vector, return a vector with the same number of elements but the new element type.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00180">LowLevelTypeImpl.h:180</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a6ba7c3d54a5a714f7a27861ee114cce3"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">llvm::APFloatBase::IEEEdouble</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEdouble() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00247">APFloat.cpp:247</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_aa70a6cd6c880ca47e604870efe33eba4"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#aa70a6cd6c880ca47e604870efe33eba4">llvm::RTLIB::getFPTOSINT</a></div><div class="ttdeci">Libcall getFPTOSINT(EVT OpVT, EVT RetVT)</div><div class="ttdoc">getFPTOSINT - Return the FPTOSINT_*_* value for the given types, or UNKNOWN_LIBCALL if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l00308">TargetLoweringBase.cpp:308</a></div></div>
<div class="ttc" id="anamespacellvm_1_1msf_html_afa98ccc224894a8f32ec9ed84776e709"><div class="ttname"><a href="namespacellvm_1_1msf.html#afa98ccc224894a8f32ec9ed84776e709">llvm::msf::Magic</a></div><div class="ttdeci">static const char Magic[]</div><div class="ttdef"><b>Definition:</b> <a href="MSFCommon_8h_source.html#l00023">MSFCommon.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a0363204b5fbab08a46f5a7cd7f376f78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns the opcode of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00516">MachineInstr.h:516</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">llvm::logicalview::LVAttributeKind::Zero</a></div><div class="ttdeci">@ Zero</div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a5f65ab13a2645935d21a119b722a55a1"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a5f65ab13a2645935d21a119b722a55a1">getBitcastWiderVectorElementOffset</a></div><div class="ttdeci">static Register getBitcastWiderVectorElementOffset(MachineIRBuilder &amp;B, Register Idx, unsigned NewEltSize, unsigned OldEltSize)</div><div class="ttdoc">Figure out the bit offset into a register when coercing a vector index for the wide element type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02735">LegalizerHelper.cpp:2735</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ae32b6e2213ad3119a124e6e0673a5898"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ae32b6e2213ad3119a124e6e0673a5898">llvm::MachineIRBuilder::buildCopy</a></div><div class="ttdeci">MachineInstrBuilder buildCopy(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = COPY Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00297">MachineIRBuilder.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLowering_html_a349007dec8d5a6ab5e7d338c282003ca"><div class="ttname"><a href="classllvm_1_1TargetLowering.html#a349007dec8d5a6ab5e7d338c282003ca">llvm::TargetLowering::getRegisterByName</a></div><div class="ttdeci">virtual Register getRegisterByName(const char *RegName, LLT Ty, const MachineFunction &amp;MF) const</div><div class="ttdoc">Return the register ID of the name passed in.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l04477">TargetLowering.h:4477</a></div></div>
<div class="ttc" id="aTargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa910c5e501ff9679cc81de15bf3b9c1d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">llvm::LegalizerHelper::Observer</a></div><div class="ttdeci">GISelChangeObserver &amp; Observer</div><div class="ttdoc">To keep track of changes made by the LegalizerHelper.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00053">LegalizerHelper.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aaf34795e0fa82f3edac1a235f50da4c1"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aaf34795e0fa82f3edac1a235f50da4c1">llvm::MachineIRBuilder::buildInsert</a></div><div class="ttdeci">MachineInstrBuilder buildInsert(const DstOp &amp;Res, const SrcOp &amp;Src, const SrcOp &amp;Op, unsigned Index)</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00754">MachineIRBuilder.cpp:754</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a2f52fec4aa17c3066db14a8d4717469d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a2f52fec4aa17c3066db14a8d4717469d">llvm::MachineIRBuilder::buildExtract</a></div><div class="ttdeci">MachineInstrBuilder buildExtract(const DstOp &amp;Res, const SrcOp &amp;Src, uint64_t Index)</div><div class="ttdoc">Build and insert Res0, ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00580">MachineIRBuilder.cpp:580</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aRISCVRedundantCopyElimination_8cpp_html_a77c69067ae8279bc00ab8757731e90d7"><div class="ttname"><a href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a></div><div class="ttdeci">auto CC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVRedundantCopyElimination_8cpp_source.html#l00079">RISCVRedundantCopyElimination.cpp:79</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a96bf442f65306b9a5ffda8ca473f0ce1"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a96bf442f65306b9a5ffda8ca473f0ce1">minMaxToCompare</a></div><div class="ttdeci">static CmpInst::Predicate minMaxToCompare(unsigned Opc)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06428">LegalizerHelper.cpp:6428</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericMachineInstr_html_a2cdf10ff4f5fb865c6a669331aeb5846"><div class="ttname"><a href="classllvm_1_1GenericMachineInstr.html#a2cdf10ff4f5fb865c6a669331aeb5846">llvm::GenericMachineInstr::getReg</a></div><div class="ttdeci">Register getReg(unsigned Idx) const</div><div class="ttdoc">Access the Idx'th operand as a register and return it.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00032">GenericMachineInstrs.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a5cafcb9996d69b6f864daa6c7d00c48a"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a5cafcb9996d69b6f864daa6c7d00c48a">llvm::LegalizerHelper::narrowScalarSrc</a></div><div class="ttdeci">void narrowScalarSrc(MachineInstr &amp;MI, LLT NarrowTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Use by truncating the operand's ty...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01447">LegalizerHelper.cpp:1447</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a6abe0f5db91bf445b3962dba969c5c7f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a6abe0f5db91bf445b3962dba969c5c7f">llvm::LegalizerHelper::lowerUnmergeValues</a></div><div class="ttdeci">LegalizeResult lowerUnmergeValues(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06648">LegalizerHelper.cpp:6648</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html">llvm::GISelChangeObserver</a></div><div class="ttdoc">Abstract class that contains various methods for clients to notify about changes.</div><div class="ttdef"><b>Definition:</b> <a href="GISelChangeObserver_8h_source.html#l00029">GISelChangeObserver.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_afe73ac7a93f98c40c8fb66fce8fa4400"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#afe73ac7a93f98c40c8fb66fce8fa4400">llvm::MachineIRBuilder::buildSExtInReg</a></div><div class="ttdeci">MachineInstrBuilder buildSExtInReg(const DstOp &amp;Res, const SrcOp &amp;Op, int64_t ImmOp)</div><div class="ttdoc">Build and insert Res = G_SEXT_INREG Op, ImmOp.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00669">MachineIRBuilder.h:669</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aaa02ab5ab2c50cce96f4fec73c8186c3"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">llvm::LegalizerHelper::bitcastDst</a></div><div class="ttdeci">void bitcastDst(MachineInstr &amp;MI, LLT CastTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a def by inserting a G_BITCAST from ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01494">LegalizerHelper.cpp:1494</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a16532d0d8fb47080714810131b45b75b"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a16532d0d8fb47080714810131b45b75b">llvm::MachineIRBuilder::buildNot</a></div><div class="ttdeci">MachineInstrBuilder buildNot(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert a bitwise not, NegOne = G_CONSTANT -1 Res = G_OR Op0, NegOne.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01681">MachineIRBuilder.h:1681</a></div></div>
<div class="ttc" id="anamespacellvm_html_a766456df1dd21e804cd4596304e10764ae8b4b40ec3622e371789b790caabc083"><div class="ttname"><a href="namespacellvm.html#a766456df1dd21e804cd4596304e10764ae8b4b40ec3622e371789b790caabc083">llvm::ComplexDeinterleavingOperation::Shuffle</a></div><div class="ttdeci">@ Shuffle</div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_a2788ec4ff3130471e24ab77dc08f7c50"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#a2788ec4ff3130471e24ab77dc08f7c50">llvm::MachinePointerInfo::getAddrSpace</a></div><div class="ttdeci">unsigned getAddrSpace() const</div><div class="ttdoc">Return the LLVM IR address space number that this pointer points into.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01024">MachineOperand.cpp:1024</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">llvm::MachineMemOperand::MOLoad</a></div><div class="ttdeci">@ MOLoad</div><div class="ttdoc">The memory access reads data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00134">MachineMemOperand.h:134</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_acac15566596b1d588d87450ab77bf0d7"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#acac15566596b1d588d87450ab77bf0d7">llvm::MachineIRBuilder::buildAnyExt</a></div><div class="ttdeci">MachineInstrBuilder buildAnyExt(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_ANYEXT Op0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00461">MachineIRBuilder.cpp:461</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ad93e8a9d68a578f6a53c70d39aef0dbe"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ad93e8a9d68a578f6a53c70d39aef0dbe">llvm::MachineIRBuilder::buildOr</a></div><div class="ttdeci">MachineInstrBuilder buildOr(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_OR Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01666">MachineIRBuilder.h:1666</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_aecb45c8a19296356de29272079557062"><div class="ttname"><a href="LegalizerHelper_8cpp.html#aecb45c8a19296356de29272079557062">RTLIBCASE</a></div><div class="ttdeci">#define RTLIBCASE(LibcallPrefix)</div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1c455e007178a24dfb18ac0e200ea02c"><div class="ttname"><a href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">llvm::Function::hasOptSize</a></div><div class="ttdeci">bool hasOptSize() const</div><div class="ttdoc">Optimize this function for size (-Os) or minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00644">Function.h:644</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1dc76cc8bf703e6ada68bededcbb9573"><div class="ttname"><a href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">llvm::APInt::zext</a></div><div class="ttdeci">APInt zext(unsigned width) const</div><div class="ttdoc">Zero extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00973">APInt.cpp:973</a></div></div>
<div class="ttc" id="astructllvm_1_1MemOp_html_a59f05cc1c22539dd52f17f6025c75d6c"><div class="ttname"><a href="structllvm_1_1MemOp.html#a59f05cc1c22539dd52f17f6025c75d6c">llvm::MemOp::Set</a></div><div class="ttdeci">static MemOp Set(uint64_t Size, bool DstAlignCanChange, Align DstAlign, bool IsZeroMemset, bool IsVolatile)</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00145">TargetLowering.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a92664cdbeb0b24030809439993ac271d"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a92664cdbeb0b24030809439993ac271d">llvm::MachineIRBuilder::buildFrameIndex</a></div><div class="ttdeci">MachineInstrBuilder buildFrameIndex(const DstOp &amp;Res, int Idx)</div><div class="ttdoc">Build and insert Res = G_FRAME_INDEX Idx.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00145">MachineIRBuilder.cpp:145</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a86e0c21f3e1e706b8d26733726c76195"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a86e0c21f3e1e706b8d26733726c76195">llvm::MachineIRBuilder::buildUITOFP</a></div><div class="ttdeci">MachineInstrBuilder buildUITOFP(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_UITOFP Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01831">MachineIRBuilder.h:1831</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericMachineInstr_html"><div class="ttname"><a href="classllvm_1_1GenericMachineInstr.html">llvm::GenericMachineInstr</a></div><div class="ttdoc">A base class for all GenericMachineInstrs.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00026">GenericMachineInstrs.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ad57555369f2dd451dd46e10cb3e4f1e9"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ad57555369f2dd451dd46e10cb3e4f1e9">llvm::MachineIRBuilder::buildTrunc</a></div><div class="ttdeci">MachineInstrBuilder buildTrunc(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_TRUNC Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00794">MachineIRBuilder.cpp:794</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="astructllvm_1_1MemOp_html_aa4f7c77353721083af1f43583e7d4164"><div class="ttname"><a href="structllvm_1_1MemOp.html#aa4f7c77353721083af1f43583e7d4164">llvm::MemOp::Copy</a></div><div class="ttdeci">static MemOp Copy(uint64_t Size, bool DstAlignCanChange, Align DstAlign, Align SrcAlign, bool IsVolatile, bool MemcpyStrSrc=false)</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00130">TargetLowering.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a317c64fd4cfebc88e79387b3821a629d"><div class="ttname"><a href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">llvm::APInt::trunc</a></div><div class="ttdeci">APInt trunc(unsigned width) const</div><div class="ttdoc">Truncate to new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00898">APInt.cpp:898</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_ab82ac391f77e4b35af455c9c1f9d7fba"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#ab82ac391f77e4b35af455c9c1f9d7fba">llvm::RTLIB::getFPEXT</a></div><div class="ttdeci">Libcall getFPEXT(EVT OpVT, EVT RetVT)</div><div class="ttdoc">getFPEXT - Return the FPEXT_*_* value for the given types, or UNKNOWN_LIBCALL if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l00233">TargetLoweringBase.cpp:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00638">MachineFunction.h:638</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_a316dd9aa25d9ec9d6d21b56e4296e824"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#a316dd9aa25d9ec9d6d21b56e4296e824">llvm::MIPatternMatch::m_ICst</a></div><div class="ttdeci">ConstantMatch&lt; APInt &gt; m_ICst(APInt &amp;Cst)</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00093">MIPatternMatch.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ae68d159179d37dc7969439d842e2644f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const LLVMTargetMachine &amp; getTarget() const</div><div class="ttdoc">getTarget - Return the target machine this machine code is compiled with</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00668">MachineFunction.h:668</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae550f2e9436b395b614b4377ba27007f"><div class="ttname"><a href="classllvm_1_1Type.html#ae550f2e9436b395b614b4377ba27007f">llvm::Type::getHalfTy</a></div><div class="ttdeci">static Type * getHalfTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00226">Type.cpp:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_af704613be9bed4ecd92e5aee263c2d5f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">llvm::LegalizerHelper::widenScalarDst</a></div><div class="ttdeci">void widenScalarDst(MachineInstr &amp;MI, LLT WideTy, unsigned OpIdx=0, unsigned TruncOpcode=TargetOpcode::G_TRUNC)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Def by extending the operand's typ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01454">LegalizerHelper.cpp:1454</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a0a37f8fb6797142b53677bc4b59bf540"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a0a37f8fb6797142b53677bc4b59bf540">llvm::LegalizerHelper::bitcastInsertVectorElt</a></div><div class="ttdeci">LegalizeResult bitcastInsertVectorElt(MachineInstr &amp;MI, unsigned TypeIdx, LLT CastTy)</div><div class="ttdoc">Perform Bitcast legalize action on G_INSERT_VECTOR_ELT.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02897">LegalizerHelper.cpp:2897</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a8c0db0c02bedbc26aba0fe9ebc77fff9"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a8c0db0c02bedbc26aba0fe9ebc77fff9">llvm::MachineIRBuilder::buildSITOFP</a></div><div class="ttdeci">MachineInstrBuilder buildSITOFP(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_SITOFP Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01836">MachineIRBuilder.h:1836</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aca820b14c7ae2e658cefd8a3be4da035"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aca820b14c7ae2e658cefd8a3be4da035">llvm::LegalizerHelper::lowerMemCpyFamily</a></div><div class="ttdeci">LegalizeResult lowerMemCpyFamily(MachineInstr &amp;MI, unsigned MaxLen=0)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l08110">LegalizerHelper.cpp:8110</a></div></div>
<div class="ttc" id="aMachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html_a80735739b49cf97a491922c8f9af2cc1"><div class="ttname"><a href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">llvm::Align::value</a></div><div class="ttdeci">uint64_t value() const</div><div class="ttdoc">This is a hole in the type system and should not be abused.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00085">Alignment.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a2f99d62852a3fab708983d8ea2139755"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a2f99d62852a3fab708983d8ea2139755">llvm::LegalizerHelper::narrowScalarShift</a></div><div class="ttdeci">LegalizeResult narrowScalarShift(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04705">LegalizerHelper.cpp:4705</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a137bf40e73f82a78b6d2227ff65aeadf"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a137bf40e73f82a78b6d2227ff65aeadf">llvm::MachineIRBuilder::buildUndef</a></div><div class="ttdeci">MachineInstrBuilder buildUndef(const DstOp &amp;Res)</div><div class="ttdoc">Build and insert Res = IMPLICIT_DEF.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00605">MachineIRBuilder.cpp:605</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a7e58ecea881b2ea06fee315563860e39"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a7e58ecea881b2ea06fee315563860e39">llvm::MachineIRBuilder::buildExtractVectorElementConstant</a></div><div class="ttdeci">MachineInstrBuilder buildExtractVectorElementConstant(const DstOp &amp;Res, const SrcOp &amp;Val, const int Idx)</div><div class="ttdoc">Build and insert Res = G_EXTRACT_VECTOR_ELT Val, Idx.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01216">MachineIRBuilder.h:1216</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae22967d11b695d268992470debfae4b2"><div class="ttname"><a href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a></div><div class="ttdeci">T bit_floor(T Value)</div><div class="ttdoc">Returns the largest integral power of two no greater than Value if Value is nonzero.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00291">bit.h:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_aaa68daaf8d7b773d012887c92c2023ce"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aaa68daaf8d7b773d012887c92c2023ce">llvm::MachineOperand::getIndex</a></div><div class="ttdeci">int getIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00576">MachineOperand.h:576</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a1d0a7c99f3541df874ad98ba481b27d6"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1d0a7c99f3541df874ad98ba481b27d6">fcSubnormal</a></div><div class="ttdeci">@ fcSubnormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00214">FloatingPointMode.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_afe0950de33581b21ef3c56db5f4382c1"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#afe0950de33581b21ef3c56db5f4382c1">llvm::MachineIRBuilder::buildFCanonicalize</a></div><div class="ttdeci">MachineInstrBuilder buildFCanonicalize(const DstOp &amp;Dst, const SrcOp &amp;Src0, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Dst = G_FCANONICALIZE Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01780">MachineIRBuilder.h:1780</a></div></div>
<div class="ttc" id="astructllvm_1_1fltSemantics_html"><div class="ttname"><a href="structllvm_1_1fltSemantics.html">llvm::fltSemantics</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00097">APFloat.cpp:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_acbbab4f4f342da97b2f73b4b1fedc983"><div class="ttname"><a href="namespacellvm.html#acbbab4f4f342da97b2f73b4b1fedc983">llvm::isKnownNeverSNaN</a></div><div class="ttdeci">bool isKnownNeverSNaN(Register Val, const MachineRegisterInfo &amp;MRI)</div><div class="ttdoc">Returns true if Val can be assumed to never be a signaling NaN.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8h_source.html#l00301">Utils.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_aded2b440bea348970816da1ecd40f2c1"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#aded2b440bea348970816da1ecd40f2c1">llvm::MachineIRBuilder::buildShuffleVector</a></div><div class="ttdeci">MachineInstrBuilder buildShuffleVector(const DstOp &amp;Res, const SrcOp &amp;Src1, const SrcOp &amp;Src2, ArrayRef&lt; int &gt; Mask)</div><div class="ttdoc">Build and insert Res = G_SHUFFLE_VECTOR Src1, Src2, Mask.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00726">MachineIRBuilder.cpp:726</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a3712279d70deeec90a93db09deb12d02"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00957">InstrTypes.h:957</a></div></div>
<div class="ttc" id="astructllvm_1_1CallLowering_1_1CallLoweringInfo_html"><div class="ttname"><a href="structllvm_1_1CallLowering_1_1CallLoweringInfo.html">llvm::CallLowering::CallLoweringInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="CallLowering_8h_source.html#l00102">CallLowering.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1GLoadStore_html"><div class="ttname"><a href="classllvm_1_1GLoadStore.html">llvm::GLoadStore</a></div><div class="ttdoc">Represents any type of generic load or store.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00041">GenericMachineInstrs.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aae6d16ec0f044086e929d63d532178bf"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aae6d16ec0f044086e929d63d532178bf">llvm::LegalizerHelper::lowerAddSubSatToAddoSubo</a></div><div class="ttdeci">LegalizeResult lowerAddSubSatToAddoSubo(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07116">LegalizerHelper.cpp:7116</a></div></div>
<div class="ttc" id="aLegalizerHelper_8h_html"><div class="ttname"><a href="LegalizerHelper_8h.html">LegalizerHelper.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCCC_html_a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4"><div class="ttname"><a href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">llvm::ARCCC::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="ARCInfo_8h_source.html#l00041">ARCInfo.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a687c20941b83380477f4a3d95ad4e390"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a687c20941b83380477f4a3d95ad4e390">llvm::LegalizerHelper::narrowScalarFPTOI</a></div><div class="ttdeci">LegalizeResult narrowScalarFPTOI(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05281">LegalizerHelper.cpp:5281</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a901a49f9b5721ab01d9d371f96e4bcea"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a901a49f9b5721ab01d9d371f96e4bcea">llvm::MachineIRBuilder::buildPadVectorWithUndefElements</a></div><div class="ttdeci">MachineInstrBuilder buildPadVectorWithUndefElements(const DstOp &amp;Res, const SrcOp &amp;Op0)</div><div class="ttdoc">Build and insert a, b, ..., x = G_UNMERGE_VALUES Op0 Res = G_BUILD_VECTOR a, b, .....</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00236">MachineIRBuilder.cpp:236</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a2b99673a7e084ea8e75699f04b5f683a"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a2b99673a7e084ea8e75699f04b5f683a">buildBitFieldInsert</a></div><div class="ttdeci">static Register buildBitFieldInsert(MachineIRBuilder &amp;B, Register TargetReg, Register InsertReg, Register OffsetBits)</div><div class="ttdoc">Emit code to insert InsertReg into TargetRet at OffsetBits in TargetReg, while preserving other bits ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02867">LegalizerHelper.cpp:2867</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_a80e747e8b302cf5ad8e1d5ecade1937c"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#a80e747e8b302cf5ad8e1d5ecade1937c">llvm::RTLIB::getFPTOUINT</a></div><div class="ttdeci">Libcall getFPTOUINT(EVT OpVT, EVT RetVT)</div><div class="ttdoc">getFPTOUINT - Return the FPTOUINT_*_* value for the given types, or UNKNOWN_LIBCALL if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l00357">TargetLoweringBase.cpp:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418">llvm::MachineInstr::FmNoNans</a></div><div class="ttdeci">@ FmNoNans</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00090">MachineInstr.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8c55d8510ad4b7cb957d8f5a7cd6944e"><div class="ttname"><a href="classllvm_1_1APInt.html#a8c55d8510ad4b7cb957d8f5a7cd6944e">llvm::APInt::getSplat</a></div><div class="ttdeci">static APInt getSplat(unsigned NewLen, const APInt &amp;V)</div><div class="ttdoc">Return a value containing V broadcasted over NewLen bits.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00612">APInt.cpp:612</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ac33fa4c8cfeb9287f51f95404a459de8"><div class="ttname"><a href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">llvm::LLT::getAddressSpace</a></div><div class="ttdeci">constexpr unsigned getAddressSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00247">LowLevelTypeImpl.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a37c5a4a4fec678404ad5653355a6929b"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a37c5a4a4fec678404ad5653355a6929b">llvm::MachineIRBuilder::getTII</a></div><div class="ttdeci">const TargetInstrInfo &amp; getTII()</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00267">MachineIRBuilder.h:267</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a></div><div class="ttdeci">@ fcFinite</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00218">FloatingPointMode.h:218</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a0e2a54fd566b6bf48d197b334d242e91"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a0e2a54fd566b6bf48d197b334d242e91">SwapN</a></div><div class="ttdeci">static MachineInstrBuilder SwapN(unsigned N, DstOp Dst, MachineIRBuilder &amp;B, MachineInstrBuilder Src, APInt Mask)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07253">LegalizerHelper.cpp:7253</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8f877403433892e14ff0c692cbe9efdf"><div class="ttname"><a href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">llvm::APInt::getSignedMinValue</a></div><div class="ttdeci">static APInt getSignedMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00199">APInt.h:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ad68c3cafb2cc7ee28ee3c7dff2a45f2e"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ad68c3cafb2cc7ee28ee3c7dff2a45f2e">llvm::MachineIRBuilder::buildDeleteTrailingVectorElements</a></div><div class="ttdeci">MachineInstrBuilder buildDeleteTrailingVectorElements(const DstOp &amp;Res, const SrcOp &amp;Op0)</div><div class="ttdoc">Build and insert a, b, ..., x, y, z = G_UNMERGE_VALUES Op0 Res = G_BUILD_VECTOR a,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00259">MachineIRBuilder.cpp:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a105bd213837c5c2e30520113d885b8f3"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a105bd213837c5c2e30520113d885b8f3">llvm::LegalizerHelper::lowerFMinNumMaxNum</a></div><div class="ttdeci">LegalizeResult lowerFMinNumMaxNum(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06503">LegalizerHelper.cpp:6503</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_addd0c111e12b07d02698a1fdcba59b0d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#addd0c111e12b07d02698a1fdcba59b0d">llvm::LegalizerHelper::fewerElementsVectorReductions</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorReductions(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04494">LegalizerHelper.cpp:4494</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac939f3c7fdf6c976421d61564d078506"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac939f3c7fdf6c976421d61564d078506">llvm::MachineIRBuilder::buildFNeg</a></div><div class="ttdeci">MachineInstrBuilder buildFNeg(const DstOp &amp;Dst, const SrcOp &amp;Src0, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_FNEG Op0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01767">MachineIRBuilder.h:1767</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aca8fce65eb69a82aa10a635e2e79877a"><div class="ttname"><a href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">llvm::APInt::sext</a></div><div class="ttdeci">APInt sext(unsigned width) const</div><div class="ttdoc">Sign extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00946">APInt.cpp:946</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ad43f277d8baa4b080bfd1beed8542bd6"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ad43f277d8baa4b080bfd1beed8542bd6">llvm::LegalizerHelper::narrowScalarInsert</a></div><div class="ttdeci">LegalizeResult narrowScalarInsert(MachineInstr &amp;MI, unsigned TypeIdx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05373">LegalizerHelper.cpp:5373</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74">fcNegNormal</a></div><div class="ttdeci">@ fcNegNormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00203">FloatingPointMode.h:203</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a84a1b0b6afe8ccff8b1c5fd66de228af"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a84a1b0b6afe8ccff8b1c5fd66de228af">llvm::LegalizerHelper::lowerFPOWI</a></div><div class="ttdeci">LegalizeResult lowerFPOWI(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06416">LegalizerHelper.cpp:6416</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">llvm::RISCVMatInt::Imm</a></div><div class="ttdeci">@ Imm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00023">RISCVMatInt.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a96e76d4f9381108bffdc265b4d666b16"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a96e76d4f9381108bffdc265b4d666b16">llvm::TargetRegisterInfo::hasStackRealignment</a></div><div class="ttdeci">bool hasStackRealignment(const MachineFunction &amp;MF) const</div><div class="ttdoc">True if stack realignment is required and still possible.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00975">TargetRegisterInfo.h:975</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a0204ff8c047858d1fb330cafa728b51e"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a0204ff8c047858d1fb330cafa728b51e">llvm::MachineMemOperand::setType</a></div><div class="ttdeci">void setType(LLT NewTy)</div><div class="ttdoc">Reset the tracked memory type.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00322">MachineMemOperand.h:322</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a6f992bc4ca89f1b5f0b34f5b29978c31"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a6f992bc4ca89f1b5f0b34f5b29978c31">llvm::TargetLoweringBase::isTruncateFree</a></div><div class="ttdeci">virtual bool isTruncateFree(Type *FromTy, Type *ToTy) const</div><div class="ttdoc">Return true if it's free to truncate a value of type FromTy to type ToTy.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l02739">TargetLowering.h:2739</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a6e20e76960d952de088354cbcd14c3ab"><div class="ttname"><a href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">llvm::Type::getVoidTy</a></div><div class="ttdeci">static Type * getVoidTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00224">Type.cpp:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1e6f0d8dfed0ab631b488a3e6317718e"><div class="ttname"><a href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">llvm::APInt::getSignMask</a></div><div class="ttdeci">static APInt getSignMask(unsigned BitWidth)</div><div class="ttdoc">Get the SignMask for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00209">APInt.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a0b54c43cec90635e63e99f792b9207bc"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a0b54c43cec90635e63e99f792b9207bc">llvm::LegalizerHelper::lowerDynStackAlloc</a></div><div class="ttdeci">LegalizeResult lowerDynStackAlloc(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06816">LegalizerHelper.cpp:6816</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">The MachineFrameInfo class represents an abstract stack frame until prolog/epilog code is inserted.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00106">MachineFrameInfo.h:106</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a79ddea5769637d54074168769084f404"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a79ddea5769637d54074168769084f404">llvm::LegalizerHelper::lowerISFPCLASS</a></div><div class="ttdeci">LegalizeResult lowerISFPCLASS(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07343">LegalizerHelper.cpp:7343</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a22ed74f1ed33c4d33f524a650ea536a6"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">llvm::APFloatBase::rmNearestTiesToEven</a></div><div class="ttdeci">static constexpr roundingMode rmNearestTiesToEven</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00217">APFloat.h:217</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a129ede6f18326075504d4bd0439fd517"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a129ede6f18326075504d4bd0439fd517">llvm::TargetSubtargetInfo::getTargetLowering</a></div><div class="ttdeci">virtual const TargetLowering * getTargetLowering() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00099">TargetSubtargetInfo.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a97444fdd32d8610e39f82294399f3adc"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adc">llvm::LegalizerHelper::LegalizeResult</a></div><div class="ttdeci">LegalizeResult</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00061">LegalizerHelper.h:61</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_ad8ce1aee13dbdcc05d20284a30e83170"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">llvm::MachinePointerInfo::getFixedStack</a></div><div class="ttdeci">static MachinePointerInfo getFixedStack(MachineFunction &amp;MF, int FI, int64_t Offset=0)</div><div class="ttdoc">Return a MachinePointerInfo record that refers to the specified FrameIndex.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01049">MachineOperand.cpp:1049</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html_a4cf3cb56358d18065c78992569c32d2f"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#a4cf3cb56358d18065c78992569c32d2f">llvm::AttrBuilder::hasAttributes</a></div><div class="ttdeci">bool hasAttributes() const</div><div class="ttdoc">Return true if the builder has IR-level attributes.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l01099">Attributes.h:1099</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5dc0a32516ce31f495b440d47287028b"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">llvm::MachineRegisterInfo::getType</a></div><div class="ttdeci">LLT getType(Register Reg) const</div><div class="ttdoc">Get the low-level type of Reg or LLT{} if Reg is not a generic (target independent) virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00759">MachineRegisterInfo.h:759</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2edb650de7b28add81349f5abf7ed7aa"><div class="ttname"><a href="namespacellvm.html#a2edb650de7b28add81349f5abf7ed7aa">llvm::zip</a></div><div class="ttdeci">detail::zippy&lt; detail::zip_shortest, T, U, Args... &gt; zip(T &amp;&amp;t, U &amp;&amp;u, Args &amp;&amp;...args)</div><div class="ttdoc">zip iterator for two or more iteratable types.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00882">STLExtras.h:882</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a42427e969917da5da61fadd006fed326"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a42427e969917da5da61fadd006fed326">llvm::MachineIRBuilder::buildSExt</a></div><div class="ttdeci">MachineInstrBuilder buildSExt(const DstOp &amp;Res, const SrcOp &amp;Op)</div><div class="ttdoc">Build and insert Res = G_SEXT Op.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00466">MachineIRBuilder.cpp:466</a></div></div>
<div class="ttc" id="anamespacellvm_html_a38d317b55a165bcddde7bb58ab7b12f3"><div class="ttname"><a href="namespacellvm.html#a38d317b55a165bcddde7bb58ab7b12f3">llvm::getMVTForLLT</a></div><div class="ttdeci">MVT getMVTForLLT(LLT Ty)</div><div class="ttdoc">Get a rough equivalent of an MVT for a given LLT.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2LowLevelType_8cpp_source.html#l00045">LowLevelType.cpp:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a83cf4c51d6ae07b6018d800c0b32d97b"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a83cf4c51d6ae07b6018d800c0b32d97b">llvm::LegalizerInfo::isLegalOrCustom</a></div><div class="ttdeci">bool isLegalOrCustom(const LegalityQuery &amp;Query) const</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01259">LegalizerInfo.h:1259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a4a6966b99e305bd6f01fb17c645ae3da"><div class="ttname"><a href="classllvm_1_1Register.html#a4a6966b99e305bd6f01fb17c645ae3da">llvm::Register::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00126">Register.h:126</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1DstOp_html"><div class="ttname"><a href="classllvm_1_1DstOp.html">llvm::DstOp</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00067">MachineIRBuilder.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a682ba82f42f7903d0000ffbb13ea3b57"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(Register Reg)</div><div class="ttdoc">Change the register this operand corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00061">MachineOperand.cpp:61</a></div></div>
<div class="ttc" id="anamespacellvm_html_a524d3d59c93afc0f68256056ba5bfa0b"><div class="ttname"><a href="namespacellvm.html#a524d3d59c93afc0f68256056ba5bfa0b">llvm::createMemLibcall</a></div><div class="ttdeci">LegalizerHelper::LegalizeResult createMemLibcall(MachineIRBuilder &amp;MIRBuilder, MachineRegisterInfo &amp;MRI, MachineInstr &amp;MI, LostDebugLocObserver &amp;LocObserver)</div><div class="ttdoc">Create a libcall to memcpy et al.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00677">LegalizerHelper.cpp:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa30414996e4930e5be9e10e0bab811d0"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa30414996e4930e5be9e10e0bab811d0">llvm::LegalizerHelper::lowerRotateWithReverseRotate</a></div><div class="ttdeci">LegalizeResult lowerRotateWithReverseRotate(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05963">LegalizerHelper.cpp:5963</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a432824f0975bb863478bf4ef3a5df258"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Retuns the total number of operands.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00519">MachineInstr.h:519</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_afe4e348d7ff2f6b76dcaa69382b78980"><div class="ttname"><a href="classllvm_1_1AttributeList.html#afe4e348d7ff2f6b76dcaa69382b78980">llvm::AttributeList::hasRetAttr</a></div><div class="ttdeci">bool hasRetAttr(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the attribute exists for the return value.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00779">Attributes.h:779</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae50d11fc026093629c27142780ff1405"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">llvm::LegalizerHelper::MIRBuilder</a></div><div class="ttdeci">MachineIRBuilder &amp; MIRBuilder</div><div class="ttdoc">Expose MIRBuilder so clients can set their own RecordInsertInstruction functions.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00050">LegalizerHelper.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ad63e0e437ca71cc2b5a5d4d5aa3685f2"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ad63e0e437ca71cc2b5a5d4d5aa3685f2">llvm::TargetMachine::getTargetTriple</a></div><div class="ttdeci">const Triple &amp; getTargetTriple() const</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00127">TargetMachine.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ae456a811703836ee5d9e32c3e51a15b6"><div class="ttname"><a href="classllvm_1_1LLT.html#ae456a811703836ee5d9e32c3e51a15b6">llvm::LLT::getSizeInBytes</a></div><div class="ttdeci">constexpr TypeSize getSizeInBytes() const</div><div class="ttdoc">Returns the total size of the type in bytes, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00169">LowLevelTypeImpl.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3015474e70e59c0a3ed4f9f0e8644b75"><div class="ttname"><a href="classllvm_1_1APInt.html#a3015474e70e59c0a3ed4f9f0e8644b75">llvm::APInt::getActiveBits</a></div><div class="ttdeci">unsigned getActiveBits() const</div><div class="ttdoc">Compute the number of active bits in the value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01463">APInt.h:1463</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a56bb53e2d0b01c78c8c538f903fd45b8"><div class="ttname"><a href="classllvm_1_1MVT.html#a56bb53e2d0b01c78c8c538f903fd45b8">llvm::MVT::getVT</a></div><div class="ttdeci">static MVT getVT(Type *Ty, bool HandleUnknown=false)</div><div class="ttdoc">Return the value type corresponding to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8cpp_source.html#l00571">ValueTypes.cpp:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1GLoadStore_html_a2aaf791aa3564d53adefabc2e145234c"><div class="ttname"><a href="classllvm_1_1GLoadStore.html#a2aaf791aa3564d53adefabc2e145234c">llvm::GLoadStore::getMMO</a></div><div class="ttdeci">MachineMemOperand &amp; getMMO() const</div><div class="ttdoc">Get the MachineMemOperand on this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="GenericMachineInstrs_8h_source.html#l00047">GenericMachineInstrs.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Register &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a8eb21f893b8039f4edcc3e3bce0c319e"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a8eb21f893b8039f4edcc3e3bce0c319e">llvm::LegalizerHelper::reduceLoadStoreWidth</a></div><div class="ttdeci">LegalizeResult reduceLoadStoreWidth(GLoadStore &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04062">LegalizerHelper.cpp:4062</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a548cfb9440f36ba67fc5566b8e967fc6"><div class="ttname"><a href="classllvm_1_1Function.html#a548cfb9440f36ba67fc5566b8e967fc6">llvm::Function::hasMinSize</a></div><div class="ttdeci">bool hasMinSize() const</div><div class="ttdoc">Optimize this function for minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00641">Function.h:641</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a1da8389b4eb951b11309c28ad492e8d4"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a1da8389b4eb951b11309c28ad492e8d4">llvm::MachineIRBuilder::buildConstantPool</a></div><div class="ttdeci">MachineInstrBuilder buildConstantPool(const DstOp &amp;Res, unsigned Idx)</div><div class="ttdoc">Build and insert Res = G_CONSTANT_POOL Idx.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00167">MachineIRBuilder.cpp:167</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RTLIB_html_a11ba84d43a1ba5d6c1e1c645d34a0dd9"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#a11ba84d43a1ba5d6c1e1c645d34a0dd9">llvm::RTLIB::getSINTTOFP</a></div><div class="ttdeci">Libcall getSINTTOFP(EVT OpVT, EVT RetVT)</div><div class="ttdoc">getSINTTOFP - Return the SINTTOFP_*_* value for the given types, or UNKNOWN_LIBCALL if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l00406">TargetLoweringBase.cpp:406</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c6b351507d3c0730f4290919d43a12"><div class="ttname"><a href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef</a></div><div class="ttdeci">ArrayRef(const T &amp;OneElt) -&gt; ArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html">llvm::LegalizerInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01198">LegalizerInfo.h:1198</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_acc6c42a7b5fe244fad430ca7df32d346"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#acc6c42a7b5fe244fad430ca7df32d346">llvm::LegalizerHelper::coerceToScalar</a></div><div class="ttdeci">Register coerceToScalar(Register Val)</div><div class="ttdoc">Cast the given value to an LLT::scalar with an equivalent size.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01418">LegalizerHelper.cpp:1418</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the bottom loBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00289">APInt.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00313">Type.cpp:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_ab35b08ed1345493af2c69fbb71e4d0c3"><div class="ttname"><a href="classllvm_1_1APFloat.html#ab35b08ed1345493af2c69fbb71e4d0c3">llvm::APFloat::getInf</a></div><div class="ttdeci">static APFloat getInf(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdoc">Factory for Positive and Negative Infinity.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00930">APFloat.h:930</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrInfo_html_a0587abbded61717d8a153b7e5bfdbfed"><div class="ttname"><a href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">llvm::MCInstrInfo::get</a></div><div class="ttdeci">const MCInstrDesc &amp; get(unsigned Opcode) const</div><div class="ttdoc">Return the machine instruction descriptor that corresponds to the specified instruction opcode.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrInfo_8h_source.html#l00063">MCInstrInfo.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a5aafc4bc2c28b6cb5d9aeb319b186d11"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a5aafc4bc2c28b6cb5d9aeb319b186d11">llvm::MachineIRBuilder::getBoolExtOp</a></div><div class="ttdeci">unsigned getBoolExtOp(bool IsVec, bool IsFP) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00476">MachineIRBuilder.cpp:476</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a7a046fe3d1230e4804494ce18bae1175"><div class="ttname"><a href="classllvm_1_1APFloat.html#a7a046fe3d1230e4804494ce18bae1175">llvm::APFloat::convertFromAPInt</a></div><div class="ttdeci">opStatus convertFromAPInt(const APInt &amp;Input, bool IsSigned, roundingMode RM)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01157">APFloat.h:1157</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MIPatternMatch_html_aa9bd186f4281a367fb872d17d0e7728b"><div class="ttname"><a href="namespacellvm_1_1MIPatternMatch.html#aa9bd186f4281a367fb872d17d0e7728b">llvm::MIPatternMatch::mi_match</a></div><div class="ttdeci">bool mi_match(Reg R, const MachineRegisterInfo &amp;MRI, Pattern &amp;&amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="MIPatternMatch_8h_source.html#l00025">MIPatternMatch.h:25</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a08361fe1409d7e2a9b96b0cabb918383"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a08361fe1409d7e2a9b96b0cabb918383">llvm::MachineIRBuilder::buildFreeze</a></div><div class="ttdeci">MachineInstrBuilder buildFreeze(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert Dst = G_FREEZE Src.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01509">MachineIRBuilder.h:1509</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a80194aed09e8b4c04c228940ff2a56a5"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a80194aed09e8b4c04c228940ff2a56a5">llvm::MachineIRBuilder::buildCTTZ_ZERO_UNDEF</a></div><div class="ttdeci">MachineInstrBuilder buildCTTZ_ZERO_UNDEF(const DstOp &amp;Dst, const SrcOp &amp;Src0)</div><div class="ttdoc">Build and insert Res = G_CTTZ_ZERO_UNDEF Op0, Src0.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01715">MachineIRBuilder.h:1715</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a2b63b5903f2c8111495a7047acdf8828"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a2b63b5903f2c8111495a7047acdf8828">llvm::LegalizerInfo::legalizeCustom</a></div><div class="ttdeci">virtual bool legalizeCustom(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const</div><div class="ttdoc">Called for instructions with the Custom LegalizationAction.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01269">LegalizerInfo.h:1269</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_abb2458b37415bd3ed547b405507ebc6b"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#abb2458b37415bd3ed547b405507ebc6b">llvm::LegalizerHelper::fewerElementsVectorMerge</a></div><div class="ttdeci">LegalizeResult fewerElementsVectorMerge(MachineInstr &amp;MI, unsigned TypeIdx, LLT NarrowTy)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l03899">LegalizerHelper.cpp:3899</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00394">AMDGPUMetadata.h:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_acb9c55b6986369948507ca5241b4e411"><div class="ttname"><a href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">llvm::APInt::shl</a></div><div class="ttdeci">APInt shl(unsigned shiftAmt) const</div><div class="ttdoc">Left-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00861">APInt.h:861</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a2ffccbb574e8a2cf63b8ede89f53090b"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a2ffccbb574e8a2cf63b8ede89f53090b">llvm::LegalizerHelper::moreElementsVector</a></div><div class="ttdeci">LegalizeResult moreElementsVector(MachineInstr &amp;MI, unsigned TypeIdx, LLT MoreTy)</div><div class="ttdoc">Legalize a vector instruction by increasing the number of vector elements involved and ignoring the a...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l04833">LegalizerHelper.cpp:4833</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="aGISelChangeObserver_8h_html"><div class="ttname"><a href="GISelChangeObserver_8h.html">GISelChangeObserver.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a87a7405685118d45876c996318829ceb"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a87a7405685118d45876c996318829ceb">llvm::MachineIRBuilder::buildStore</a></div><div class="ttdeci">MachineInstrBuilder buildStore(const SrcOp &amp;Val, const SrcOp &amp;Addr, MachineMemOperand &amp;MMO)</div><div class="ttdoc">Build and insert G_STORE Val, Addr, MMO.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00434">MachineIRBuilder.cpp:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html_ae44259d9edd71181ea8b89d18f27a967"><div class="ttname"><a href="classllvm_1_1MDString.html#ae44259d9edd71181ea8b89d18f27a967">llvm::MDString::getString</a></div><div class="ttdeci">StringRef getString() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00507">Metadata.cpp:507</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a12a128f6b9c963b6fd300cbdf52fba84"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a12a128f6b9c963b6fd300cbdf52fba84">llvm::MachineIRBuilder::buildAdd</a></div><div class="ttdeci">MachineInstrBuilder buildAdd(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_ADD Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01534">MachineIRBuilder.h:1534</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a3c7e94e75999a798b141330fd51c80f4"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a3c7e94e75999a798b141330fd51c80f4">getFloatTypeForLLT</a></div><div class="ttdeci">static Type * getFloatTypeForLLT(LLVMContext &amp;Ctx, LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00080">LegalizerHelper.cpp:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html"><div class="ttname"><a href="classllvm_1_1MDString.html">llvm::MDString</a></div><div class="ttdoc">A single uniqued string.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00611">Metadata.h:611</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing basic block and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00705">MachineInstr.cpp:705</a></div></div>
<div class="ttc" id="alib_2Target_2WebAssembly_2README_8txt_html_a79ea041233b5866026c3071dfc464ec0"><div class="ttname"><a href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">copy</a></div><div class="ttdeci">we should consider alternate ways to model stack dependencies Lots of things could be done in WebAssemblyTargetTransformInfo cpp there are numerous optimization related hooks that can be overridden in WebAssemblyTargetLowering Instead of the OptimizeReturned which should consider preserving the returned attribute through to MachineInstrs and extending the MemIntrinsicResults pass to do this optimization on calls too That would also let the WebAssemblyPeephole pass clean up dead defs for such as it does for stores Consider implementing and or getMachineCombinerPatterns Find a clean way to fix the problem which leads to the Shrink Wrapping pass being run after the WebAssembly PEI pass When setting multiple variables to the same we currently get code like const It could be done with a smaller encoding like local tee $pop5 local copy</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2WebAssembly_2README_8txt_source.html#l00101">README.txt:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2ddac2989bebe46c9b9fcb7a92e5ade8dde6"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac2989bebe46c9b9fcb7a92e5ade8dde6">llvm::MachineMemOperand::MONone</a></div><div class="ttdeci">@ MONone</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00132">MachineMemOperand.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ac5df097268459420f2dd52a648379463"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ac5df097268459420f2dd52a648379463">llvm::LegalizerHelper::lowerRotate</a></div><div class="ttdeci">LegalizeResult lowerRotate(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l05977">LegalizerHelper.cpp:5977</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_af8ec769be431aa1296a7c786eb456f53"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#af8ec769be431aa1296a7c786eb456f53">llvm::LegalizerHelper::legalizeInstrStep</a></div><div class="ttdeci">LegalizeResult legalizeInstrStep(MachineInstr &amp;MI, LostDebugLocObserver &amp;LocObserver)</div><div class="ttdoc">Replace MI by a sequence of legal instructions that can implement the same operation.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l00115">LegalizerHelper.cpp:115</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a69fb30748f1b3e8a0affd486a9f59f6d"><div class="ttname"><a href="classllvm_1_1LLT.html#a69fb30748f1b3e8a0affd486a9f59f6d">llvm::LLT::isValid</a></div><div class="ttdeci">constexpr bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00121">LowLevelTypeImpl.h:121</a></div></div>
<div class="ttc" id="aCodeGen_2GlobalISel_2Utils_8h_html_a42d8e909f2bea1119192cca95df057fa"><div class="ttname"><a href="CodeGen_2GlobalISel_2Utils_8h.html#a42d8e909f2bea1119192cca95df057fa">GISEL_VECREDUCE_CASES_NONSEQ</a></div><div class="ttdeci">#define GISEL_VECREDUCE_CASES_NONSEQ</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8h_source.html#l00070">Utils.h:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_aaa67fe0741c2b3712630ae636f8c2c20"><div class="ttname"><a href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">llvm::APFloat::getLargest</a></div><div class="ttdeci">static APFloat getLargest(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdoc">Returns the largest finite number in the given semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00970">APFloat.h:970</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a2f1d26ea9bced931d104b4dd8b26775f"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a2f1d26ea9bced931d104b4dd8b26775f">getMemsetValue</a></div><div class="ttdeci">static Register getMemsetValue(Register Val, LLT Ty, MachineIRBuilder &amp;MIB)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07709">LegalizerHelper.cpp:7709</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">llvm::LegalizerHelper::Legalized</a></div><div class="ttdeci">@ Legalized</div><div class="ttdoc">Instruction has been legalized and the MachineFunction changed.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00067">LegalizerHelper.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad5e0fe0efdd88f98a5b5eb512d5351c2"><div class="ttname"><a href="classllvm_1_1Type.html#ad5e0fe0efdd88f98a5b5eb512d5351c2">llvm::Type::getFloatTy</a></div><div class="ttdeci">static Type * getFloatTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00228">Type.cpp:228</a></div></div>
<div class="ttc" id="aLegalizerHelper_8cpp_html_a755eb2d2f25e8da3b2d904146e61b1a5"><div class="ttname"><a href="LegalizerHelper_8cpp.html#a755eb2d2f25e8da3b2d904146e61b1a5">shouldLowerMemFuncForSize</a></div><div class="ttdeci">static bool shouldLowerMemFuncForSize(const MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l07626">LegalizerHelper.cpp:7626</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a3e17399c568f784acb8ebf8be9a558ec"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a3e17399c568f784acb8ebf8be9a558ec">llvm::MachineIRBuilder::buildLShr</a></div><div class="ttdeci">MachineInstrBuilder buildLShr(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01628">MachineIRBuilder.h:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1SrcOp_html"><div class="ttname"><a href="classllvm_1_1SrcOp.html">llvm::SrcOp</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00128">MachineIRBuilder.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a32472b5afd0ae6edb4a233a25056a6aa"><div class="ttname"><a href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">llvm::LLT::getScalarSizeInBits</a></div><div class="ttdeci">constexpr unsigned getScalarSizeInBits() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00233">LowLevelTypeImpl.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a453c74e2daac0745b53f8b31c11fc50ca5a5dea77f2a0aaffed9741ae04e8d865"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50ca5a5dea77f2a0aaffed9741ae04e8d865">llvm::TargetFrameLowering::StackGrowsUp</a></div><div class="ttdeci">@ StackGrowsUp</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00046">TargetFrameLowering.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">llvm::RecurKind::Xor</a></div><div class="ttdeci">@ Xor</div><div class="ttdoc">Bitwise or logical XOR of integers.</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ac50dd9fe6220347f8306e3694a8129cb"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ac50dd9fe6220347f8306e3694a8129cb">llvm::LegalizerHelper::bitcastExtractVectorElt</a></div><div class="ttdeci">LegalizeResult bitcastExtractVectorElt(MachineInstr &amp;MI, unsigned TypeIdx, LLT CastTy)</div><div class="ttdoc">Perform Bitcast legalize action on G_EXTRACT_VECTOR_ELT.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l02757">LegalizerHelper.cpp:2757</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a3493ece271aff0f2c3d162494e3fcc81"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a3493ece271aff0f2c3d162494e3fcc81">llvm::MachineIRBuilder::buildCast</a></div><div class="ttdeci">MachineInstrBuilder buildCast(const DstOp &amp;Dst, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert an appropriate cast between two registers of equal size.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00560">MachineIRBuilder.cpp:560</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a4b2fab18274c6ca276053bb774c6e8c3"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a4b2fab18274c6ca276053bb774c6e8c3">llvm::MachineIRBuilder::buildSub</a></div><div class="ttdeci">MachineInstrBuilder buildSub(const DstOp &amp;Dst, const SrcOp &amp;Src0, const SrcOp &amp;Src1, std::optional&lt; unsigned &gt; Flags=std::nullopt)</div><div class="ttdoc">Build and insert Res = G_SUB Op0, Op1.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l01551">MachineIRBuilder.h:1551</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_a43b43271e5bcbbc5cc620b4dfa94937a"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#a43b43271e5bcbbc5cc620b4dfa94937a">llvm::MachineIRBuilder::buildShuffleSplat</a></div><div class="ttdeci">MachineInstrBuilder buildShuffleSplat(const DstOp &amp;Res, const SrcOp &amp;Src)</div><div class="ttdoc">Build and insert a vector splat of a scalar Src using a G_INSERT_VECTOR_ELT and G_SHUFFLE_VECTOR idio...</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8cpp_source.html#l00714">MachineIRBuilder.cpp:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a94d23373106467003722f7d6c17b1528"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, T &amp;&amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00809">SmallVector.h:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html"><div class="ttname"><a href="classllvm_1_1LLT.html">llvm::LLT</a></div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00039">LowLevelTypeImpl.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_acd1eca3232b7b3072543294cd2377a37"><div class="ttname"><a href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">llvm::LLT::fixed_vector</a></div><div class="ttdeci">static constexpr LLT fixed_vector(unsigned NumElements, unsigned ScalarSizeInBits)</div><div class="ttdoc">Get a low-level fixed-width vector of some number of elements and element width.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00076">LowLevelTypeImpl.h:76</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:52:39 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

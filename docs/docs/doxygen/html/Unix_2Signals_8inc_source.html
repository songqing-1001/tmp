<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Support/Unix/Signals.inc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_f0dc79bace318df7ec0fa0bdb179ed95.html">Support</a></li><li class="navelem"><a class="el" href="dir_6250a1735cd73ce49bd3ad6a841e6a54.html">Unix</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Signals.inc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Unix_2Signals_8inc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- Signals.cpp - Generic Unix Signals Implementation -----*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file defines some helpful functions for dealing with the possibility of</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// Unix signals occurring while your program is running.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// This file is extremely careful to only do signal-safe things while in a</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// signal handler. In particular, memory allocation and acquiring a mutex</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// while in a signal handler should never occur. ManagedStatic isn&#39;t usable from</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// a signal handler for 2 reasons:</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//  1. Creating a new one allocates.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//  2. The signal handler could fire while llvm_shutdown is being processed, in</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//     which case the ManagedStatic is in an unknown state because it could</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//     already have been destroyed, or be in the process of being destroyed.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Modifying the behavior of the signal handlers (such as registering new ones)</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// can acquire a mutex, but all this guarantees is that the signal handler</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// behavior is only modified by one thread at a time. A signal handler can still</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// fire while this occurs!</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// Adding work to a signal handler requires lock-freedom (and assume atomics are</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// always lock-free) because the signal handler could fire while new work is</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// being added.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Unix_8h.html">Unix.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;llvm/Config/config.h&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Demangle_8h.html">llvm/Demangle/Demangle.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ExitCodes_8h.html">llvm/Support/ExitCodes.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FileSystem_8h.html">llvm/Support/FileSystem.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FileUtilities_8h.html">llvm/Support/FileUtilities.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Format_8h.html">llvm/Support/Format.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuffer_8h.html">llvm/Support/MemoryBuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Mutex_8h.html">llvm/Support/Mutex.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Program_8h.html">llvm/Support/Program.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SaveAndRestore_8h.html">llvm/Support/SaveAndRestore.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#ifdef HAVE_BACKTRACE</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include BACKTRACE_HEADER // For backtrace().</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#if HAVE_SIGNAL_H</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#if HAVE_SYS_STAT_H</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#if HAVE_DLFCN_H</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;dlfcn.h&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#if HAVE_MACH_MACH_H</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;mach/mach.h&gt;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#if HAVE_LINK_H</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &lt;link.h&gt;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#ifdef HAVE__UNWIND_BACKTRACE</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// FIXME: We should be able to use &lt;unwind.h&gt; for any target that has an</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// _Unwind_Backtrace function, but on FreeBSD the configure test passes</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// despite the function not existing, and on Android, &lt;unwind.h&gt; conflicts</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// with &lt;link.h&gt;.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#ifdef __GLIBC__</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &lt;unwind.h&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#undef HAVE__UNWIND_BACKTRACE</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SignalHandler(<span class="keywordtype">int</span> Sig);     <span class="comment">// defined below.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InfoSignalHandler(<span class="keywordtype">int</span> Sig); <span class="comment">// defined below.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">using</span> SignalHandlerFunctionType = void (*)();<span class="comment"></span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// The function to call if ctrl-c is pressed.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::atomic&lt;SignalHandlerFunctionType&gt; InterruptFunction =</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    ATOMIC_VAR_INIT(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> std::atomic&lt;SignalHandlerFunctionType&gt; InfoSignalFunction =</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    ATOMIC_VAR_INIT(<span class="keyword">nullptr</span>);<span class="comment"></span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/// The function to call on SIGPIPE (one-time use only).</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::atomic&lt;SignalHandlerFunctionType&gt; OneShotPipeSignalFunction =</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    ATOMIC_VAR_INIT(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/// Signal-safe removal of files.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">/// Inserting and erasing from the list isn&#39;t signal-safe, but removal of files</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/// themselves is signal-safe. Memory is freed when the head is freed, deletion</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/// is therefore not signal-safe either.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span><span class="keyword">class </span>FileToRemoveList {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  std::atomic&lt;char *&gt; <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653">Filename</a> = ATOMIC_VAR_INIT(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  std::atomic&lt;FileToRemoveList *&gt; Next = ATOMIC_VAR_INIT(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  FileToRemoveList() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// Not signal-safe.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  FileToRemoveList(<span class="keyword">const</span> std::string &amp;str) : <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653">Filename</a>(strdup(str.<a class="code" href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">c_str</a>())) {}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// Not signal-safe.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  ~FileToRemoveList() {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (FileToRemoveList *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = Next.exchange(<span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keyword">delete</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">char</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653">Filename</a>.exchange(<span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      free(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Not signal-safe.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> insert(std::atomic&lt;FileToRemoveList *&gt; &amp;Head,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                     <span class="keyword">const</span> std::string &amp;Filename) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Insert the new file at the end of the list.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    FileToRemoveList *NewHead = <span class="keyword">new</span> FileToRemoveList(Filename);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    std::atomic&lt;FileToRemoveList *&gt; *InsertionPoint = &amp;Head;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    FileToRemoveList *OldHead = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">while</span> (!InsertionPoint-&gt;compare_exchange_strong(OldHead, NewHead)) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      InsertionPoint = &amp;OldHead-&gt;Next;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      OldHead = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// Not signal-safe.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> erase(std::atomic&lt;FileToRemoveList *&gt; &amp;Head,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    <span class="keyword">const</span> std::string &amp;Filename) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// Use a lock to avoid concurrent erase: the comparison would access</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// free&#39;d memory.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">static</span> <a class="code" href="classllvm_1_1ManagedStatic.html">ManagedStatic&lt;sys::SmartMutex&lt;true&gt;</a>&gt; Lock;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="namespacellvm_1_1sys.html#a918f6c7d4cd2eeaf39efa697c0370296">sys::SmartScopedLock&lt;true&gt;</a> Writer(*Lock);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">for</span> (FileToRemoveList *Current = Head.load(); Current;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;         Current = Current-&gt;Next.load()) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">char</span> *OldFilename = Current-&gt;Filename.load()) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">if</span> (OldFilename != Filename)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// Leave an empty filename.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        OldFilename = Current-&gt;Filename.exchange(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">// The filename might have become null between the time we</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// compared it and we exchanged it.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> (OldFilename)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;          free(OldFilename);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// Signal-safe.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> removeAllFiles(std::atomic&lt;FileToRemoveList *&gt; &amp;Head) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// If cleanup were to occur while we&#39;re removing files we&#39;d have a bad time.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Make sure we&#39;re OK by preventing cleanup from doing anything while we&#39;re</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// removing files. If cleanup races with us and we win we&#39;ll have a leak,</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// but we won&#39;t crash.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    FileToRemoveList *OldHead = Head.exchange(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (FileToRemoveList *currentFile = OldHead; currentFile;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         currentFile = currentFile-&gt;Next.load()) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="comment">// If erasing was occuring while we&#39;re trying to remove files we&#39;d look</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="comment">// at free&#39;d data. Take away the path and put it back when done.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">char</span> *path = currentFile-&gt;Filename.exchange(<span class="keyword">nullptr</span>)) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// Get the status so we can determine if it&#39;s a file or directory. If we</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment">// can&#39;t stat the file, ignore it.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keyword">struct </span>stat buf;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (stat(path, &amp;buf) != 0)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// If this is not a regular file, ignore it. We want to prevent removal</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// of special files like /dev/null, even if the compiler is being run</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">// with the super-user permissions.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (!S_ISREG(buf.st_mode))</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// Otherwise, remove the file. We ignore any errors here as there is</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">// nothing else we can do.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        unlink(path);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">// We&#39;re done removing the file, erasing can safely proceed.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        currentFile-&gt;Filename.exchange(path);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// We&#39;re done removing files, cleanup can safely proceed.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    Head.exchange(OldHead);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;};</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keyword">static</span> std::atomic&lt;FileToRemoveList *&gt; FilesToRemove = ATOMIC_VAR_INIT(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">/// Clean up the list in a signal-friendly manner.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/// Recall that signals can fire during llvm_shutdown. If this occurs we should</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/// either clean something up or nothing at all, but we shouldn&#39;t crash!</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span><span class="keyword">struct </span>FilesToRemoveCleanup {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// Not signal-safe.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  ~FilesToRemoveCleanup() {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    FileToRemoveList *Head = FilesToRemove.exchange(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (Head)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keyword">delete</span> Head;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;};</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Argv0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/// Signals that represent requested termination. There&#39;s no bug or failure, or</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// if there is, it&#39;s not our direct responsibility. For whatever reason, our</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// continued execution is no longer desirable.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> IntSigs[] = {SIGHUP, SIGINT, SIGTERM, SIGUSR2};</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/// Signals that represent that we have a bug, and our prompt termination has</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/// been ordered.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> KillSigs[] = {SIGILL,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                               SIGTRAP,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                               SIGABRT,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                               SIGFPE,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                               SIGBUS,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                               SIGSEGV,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                               SIGQUIT</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#ifdef SIGSYS</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                               ,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                               SIGSYS</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#ifdef SIGXCPU</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                               ,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                               SIGXCPU</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#ifdef SIGXFSZ</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                               ,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                               SIGXFSZ</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#ifdef SIGEMT</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                               ,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                               SIGEMT</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;};</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/// Signals that represent requests for status.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> InfoSigs[] = {SIGUSR1</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#ifdef SIGINFO</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                               ,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                               SIGINFO</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;};</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> NumSigs = <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(IntSigs) + <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(KillSigs) +</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                              <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(InfoSigs) + 1 <span class="comment">/* SIGPIPE */</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keyword">static</span> std::atomic&lt;unsigned&gt; NumRegisteredSignals = ATOMIC_VAR_INIT(0);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keyword">struct </span>sigaction SA;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">int</span> SigNo;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;} RegisteredSignalInfo[NumSigs];</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#if defined(HAVE_SIGALTSTACK)</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// Hold onto both the old and new alternate signal stack so that it&#39;s not</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// reported as a leak. We don&#39;t make any attempt to remove our alt signal</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">// stack if we remove our signal handlers; that can&#39;t be done reliably if</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">// someone else is also trying to do the same thing.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keyword">static</span> stack_t OldAltStack;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<a class="code" href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a> <span class="keyword">static</span> <span class="keywordtype">void</span> *NewAltStackPointer;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CreateSigAltStack() {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> AltStackSize = MINSIGSTKSZ + 64 * 1024;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// If we&#39;re executing on the alternate stack, or we already have an alternate</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// signal stack that we&#39;re happy with, there&#39;s nothing for us to do. Don&#39;t</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// reduce the size, some other part of the process might need a larger stack</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// than we do.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (sigaltstack(<span class="keyword">nullptr</span>, &amp;OldAltStack) != 0 ||</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      OldAltStack.ss_flags &amp; SS_ONSTACK ||</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      (OldAltStack.ss_sp &amp;&amp; OldAltStack.ss_size &gt;= AltStackSize))</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  stack_t AltStack = {};</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  AltStack.ss_sp = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(<a class="code" href="namespacellvm.html#af46e6cffaf04efa64b9d4a6f8e0610a2">safe_malloc</a>(AltStackSize));</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  NewAltStackPointer = AltStack.ss_sp; <span class="comment">// Save to avoid reporting a leak.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  AltStack.ss_size = AltStackSize;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (sigaltstack(&amp;AltStack, &amp;OldAltStack) != 0)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    free(AltStack.ss_sp);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CreateSigAltStack() {}</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RegisterHandlers() { <span class="comment">// Not signal-safe.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// The mutex prevents other threads from registering handlers while we&#39;re</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// doing it. We also have to protect the handlers and their count because</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// a signal handler could fire while we&#39;re registeting handlers.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1ManagedStatic.html">ManagedStatic&lt;sys::SmartMutex&lt;true&gt;</a>&gt; SignalHandlerRegistrationMutex;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#a918f6c7d4cd2eeaf39efa697c0370296">sys::SmartScopedLock&lt;true&gt;</a> Guard(*SignalHandlerRegistrationMutex);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// If the handlers are already registered, we&#39;re done.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (NumRegisteredSignals.load() != 0)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// Create an alternate stack for signal handling. This is necessary for us to</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// be able to reliably handle signals due to stack overflow.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  CreateSigAltStack();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keyword">enum class</span> SignalKind { IsKill, IsInfo };</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keyword">auto</span> registerHandler = [&amp;](<span class="keywordtype">int</span> Signal, SignalKind <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> = NumRegisteredSignals.load();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> &lt; <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(RegisteredSignalInfo) &amp;&amp;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;           <span class="stringliteral">&quot;Out of space for signal handlers!&quot;</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">struct </span>sigaction NewHandler;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">case</span> SignalKind::IsKill:</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      NewHandler.sa_handler = SignalHandler;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      NewHandler.sa_flags = SA_NODEFER | SA_RESETHAND | SA_ONSTACK;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">case</span> SignalKind::IsInfo:</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      NewHandler.sa_handler = InfoSignalHandler;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      NewHandler.sa_flags = SA_ONSTACK;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    sigemptyset(&amp;NewHandler.sa_mask);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// Install the new handler, save the old one in RegisteredSignalInfo.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    sigaction(Signal, &amp;NewHandler, &amp;RegisteredSignalInfo[<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>].SA);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    RegisteredSignalInfo[<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>].SigNo = Signal;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    ++NumRegisteredSignals;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  };</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : IntSigs)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    registerHandler(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, SignalKind::IsKill);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : KillSigs)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    registerHandler(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, SignalKind::IsKill);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (OneShotPipeSignalFunction)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    registerHandler(SIGPIPE, SignalKind::IsKill);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : InfoSigs)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    registerHandler(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, SignalKind::IsInfo);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a80109dae9b24e661ea7fbff184ced3da">sys::unregisterHandlers</a>() {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// Restore all of the signal handlers to how they were before we showed up.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = NumRegisteredSignals.load(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    sigaction(RegisteredSignalInfo[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].SigNo, &amp;RegisteredSignalInfo[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].SA,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;              <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    --NumRegisteredSignals;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/// Process the FilesToRemove list.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> RemoveFilesToRemove() {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  FileToRemoveList::removeAllFiles(FilesToRemove);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#ad01be72a9c0cb2dc4c676aa0057a9b31">sys::CleanupOnSignal</a>(uintptr_t <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordtype">int</span> Sig = (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(InfoSigs, Sig)) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    InfoSignalHandler(Sig);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  RemoveFilesToRemove();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(IntSigs, Sig) || Sig == SIGPIPE)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#aa9516bcffe612375e99ac8c722b82847">llvm::sys::RunSignalHandlers</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">// The signal handler that runs.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SignalHandler(<span class="keywordtype">int</span> Sig) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// Restore the signal behavior to default, so that the program actually</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// crashes when we return and the signal reissues.  This also ensures that if</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// we crash in our signal handler that the program will terminate immediately</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// instead of recursing in the signal handler.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#a80109dae9b24e661ea7fbff184ced3da">sys::unregisterHandlers</a>();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// Unmask all potentially blocked kill signals.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  sigset_t SigMask;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  sigfillset(&amp;SigMask);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  sigprocmask(SIG_UNBLOCK, &amp;SigMask, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    RemoveFilesToRemove();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (Sig == SIGPIPE)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> OldOneShotPipeFunction =</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;              OneShotPipeSignalFunction.exchange(<span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">return</span> OldOneShotPipeFunction();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">bool</span> IsIntSig = <a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(IntSigs, Sig);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (IsIntSig)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> OldInterruptFunction = InterruptFunction.exchange(<span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">return</span> OldInterruptFunction();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (Sig == SIGPIPE || IsIntSig) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keyword">raise</span>(Sig); <span class="comment">// Execute the default handler.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// Otherwise if it is a fault (like SEGV) run any handler.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#aa9516bcffe612375e99ac8c722b82847">llvm::sys::RunSignalHandlers</a>();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">#ifdef __s390__</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// On S/390, certain signals are delivered with PSW Address pointing to</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// *after* the faulting instruction.  Simply returning from the signal</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// handler would continue execution after that point, instead of</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// re-raising the signal.  Raise the signal manually in those cases.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (Sig == SIGILL || Sig == SIGFPE || Sig == SIGTRAP)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keyword">raise</span>(Sig);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InfoSignalHandler(<span class="keywordtype">int</span> Sig) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <a class="code" href="structllvm_1_1SaveAndRestore.html">SaveAndRestore</a> SaveErrnoDuringASignalHandler(errno);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span> (SignalHandlerFunctionType CurrentInfoFunction = InfoSignalFunction)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    CurrentInfoFunction();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#ab0938d8ccb6550ddc3865f45b48acb6e">llvm::sys::RunInterruptHandlers</a>() { RemoveFilesToRemove(); }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a03a7c4c80c31a619c5e452314166401a">llvm::sys::SetInterruptFunction</a>(<span class="keywordtype">void</span> (*<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a>)()) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  InterruptFunction.exchange(<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">IF</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  RegisterHandlers();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#aae32f3b9e37b0c3f107abb91220894d4">llvm::sys::SetInfoSignalFunction</a>(<span class="keywordtype">void</span> (*Handler)()) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  InfoSignalFunction.exchange(Handler);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  RegisterHandlers();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a667819e7b48d7d4f3cf99c2709aac92e">llvm::sys::SetOneShotPipeSignalFunction</a>(<span class="keywordtype">void</span> (*Handler)()) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  OneShotPipeSignalFunction.exchange(Handler);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  RegisterHandlers();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a916621b9926263f33c49d2dff9883db5">llvm::sys::DefaultOneShotPipeSignalHandler</a>() {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// Send a special return code that drivers can check for, from sysexits.h.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="lib_2Target_2X86_2README_8txt.html#a809aa08f1d799a5ed298e68bd3fac0c7">exit</a>(EX_IOERR);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">// The public API</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys.html#aee27cc5336ecd3f21eeda4ad2826b915">llvm::sys::RemoveFileOnSignal</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Filename, std::string *ErrMsg) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// Ensure that cleanup will occur as soon as one file is added.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1ManagedStatic.html">ManagedStatic&lt;FilesToRemoveCleanup&gt;</a> FilesToRemoveCleanup;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  *FilesToRemoveCleanup;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  FileToRemoveList::insert(FilesToRemove, <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653">Filename</a>.str());</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  RegisterHandlers();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">// The public API</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a7936dae925973eb8b0921c01b70b16d8">llvm::sys::DontRemoveFileOnSignal</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Filename) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  FileToRemoveList::erase(FilesToRemove, <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653">Filename</a>.str());</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// Add a function to be called when a signal is delivered to the process. The</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">/// handler can have a cookie passed to it to identify what instance of the</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">/// handler it is.</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a9b92e7ec359dded2b96fb6491fb99d8b">llvm::sys::AddSignalHandler</a>(<a class="code" href="namespacellvm_1_1sys.html#a9a44fbaf9bab34a91d1b6713adcc6603">sys::SignalHandlerCallback</a> FnPtr,</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                                 <span class="keywordtype">void</span> *Cookie) { <span class="comment">// Signal-safe.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="Signals_8cpp.html#af66fd5871ea182311d860975bd5de5e9">insertSignalHandler</a>(FnPtr, Cookie);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  RegisterHandlers();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">#if defined(HAVE_BACKTRACE) &amp;&amp; ENABLE_BACKTRACES &amp;&amp; HAVE_LINK_H &amp;&amp;             \</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">    (defined(__linux__) || defined(__FreeBSD__) ||                             \</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">     defined(__FreeBSD_kernel__) || defined(__NetBSD__))</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="keyword">struct </span>DlIteratePhdrData {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordtype">void</span> **StackTrace;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordtype">int</span> depth;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordtype">bool</span> first;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **modules;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="classintptr__t.html">intptr_t</a> *offsets;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *main_exec_name;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;};</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> dl_iterate_phdr_cb(dl_phdr_info *<a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>, <span class="keywordtype">size_t</span> <a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>, <span class="keywordtype">void</span> *arg) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  DlIteratePhdrData *data = (DlIteratePhdrData *)arg;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = data-&gt;first ? data-&gt;main_exec_name : <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>-&gt;dlpi_name;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  data-&gt;first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>-&gt;dlpi_phnum; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *phdr = &amp;<a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>-&gt;dlpi_phdr[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (phdr-&gt;p_type != <a class="code" href="namespacellvm_1_1ELF.html#adf995e156306da95e0b337c16f5f2b02a15ee14963e8cb0e95f10994bbd35a050">PT_LOAD</a>)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="classintptr__t.html">intptr_t</a> beg = <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>-&gt;dlpi_addr + phdr-&gt;p_vaddr;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="classintptr__t.html">intptr_t</a> <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a> = beg + phdr-&gt;p_memsz;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; data-&gt;depth; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>++) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">if</span> (data-&gt;modules[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>])</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <a class="code" href="classintptr__t.html">intptr_t</a> addr = (<a class="code" href="classintptr__t.html">intptr_t</a>)data-&gt;StackTrace[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>];</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (beg &lt;= addr &amp;&amp; addr &lt; <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        data-&gt;modules[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>] = <a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        data-&gt;offsets[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>] = addr - <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>-&gt;dlpi_addr;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">/// If this is an ELF platform, we can find all loaded modules and their virtual</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/// addresses with dl_iterate_phdr.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="Signals_8cpp.html#a2a8bcb543c331c2d59d4005a62023344">findModulesAndOffsets</a>(<span class="keywordtype">void</span> **StackTrace, <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> **Modules, <a class="code" href="classintptr__t.html">intptr_t</a> *<a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612">Offsets</a>,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *MainExecutableName,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                  <a class="code" href="classllvm_1_1StringSaver.html">StringSaver</a> &amp;StrPool) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  DlIteratePhdrData data = {StackTrace, <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>,   <span class="keyword">true</span>,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                            Modules,    <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612">Offsets</a>, MainExecutableName};</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  dl_iterate_phdr(dl_iterate_phdr_cb, &amp;data);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">/// This platform does not have dl_iterate_phdr, so we do not yet know how to</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span><span class="comment">/// find all loaded DSOs.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="Signals_8cpp.html#a2a8bcb543c331c2d59d4005a62023344">findModulesAndOffsets</a>(<span class="keywordtype">void</span> **StackTrace, <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> **Modules, <a class="code" href="classintptr__t.html">intptr_t</a> *<a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612">Offsets</a>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *MainExecutableName,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                                  <a class="code" href="classllvm_1_1StringSaver.html">StringSaver</a> &amp;StrPool) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#endif // defined(HAVE_BACKTRACE) &amp;&amp; ENABLE_BACKTRACES &amp;&amp; ...</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#if ENABLE_BACKTRACES &amp;&amp; defined(HAVE__UNWIND_BACKTRACE)</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> unwindBacktrace(<span class="keywordtype">void</span> **StackTrace, <span class="keywordtype">int</span> MaxEntries) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">if</span> (MaxEntries &lt; 0)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// Skip the first frame (&#39;unwindBacktrace&#39; itself).</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordtype">int</span> Entries = -1;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keyword">auto</span> HandleFrame = [&amp;](_Unwind_Context *<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>) -&gt; _Unwind_Reason_Code {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// Apparently we need to detect reaching the end of the stack ourselves.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordtype">void</span> *IP = (<span class="keywordtype">void</span> *)_Unwind_GetIP(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (!IP)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <span class="keywordflow">return</span> _URC_END_OF_STACK;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Entries &lt; MaxEntries &amp;&amp; <span class="stringliteral">&quot;recursively called after END_OF_STACK?&quot;</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (Entries &gt;= 0)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      StackTrace[Entries] = IP;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (++Entries == MaxEntries)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">return</span> _URC_END_OF_STACK;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> _URC_NO_REASON;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  };</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  _Unwind_Backtrace(</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      [](_Unwind_Context *<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <span class="keywordtype">void</span> *Handler) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">return</span> (*<span class="keyword">static_cast&lt;</span>decltype(HandleFrame) *<span class="keyword">&gt;</span>(Handler))(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      },</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(&amp;HandleFrame));</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Entries, 0);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">// In the case of a program crash or fault, print out a stack trace so that the</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">// user has an indication of why and where we died.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">// On glibc systems we have the &#39;backtrace&#39; function, which works nicely, but</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">// doesn&#39;t demangle symbols.</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a3dd0c90b62e70756c75ae45c45ce5f8e">llvm::sys::PrintStackTrace</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">#if ENABLE_BACKTRACES</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> *StackTrace[256];</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordtype">int</span> depth = 0;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#if defined(HAVE_BACKTRACE)</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// Use backtrace() to output a backtrace on Linux systems with glibc.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (!depth)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    depth = backtrace(StackTrace, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(StackTrace)));</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#if defined(HAVE__UNWIND_BACKTRACE)</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// Try _Unwind_Backtrace() if backtrace() failed.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (!depth)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    depth =</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        unwindBacktrace(StackTrace, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(StackTrace)));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">if</span> (!depth)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// If &quot;Depth&quot; is not provided by the caller, use the return value of</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// backtrace() for printing a symbolized stack trace.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> = depth;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="Signals_8cpp.html#a1c25905ebd1d19c4d5c4e2ca86cdb1f2">printSymbolizedStackTrace</a>(Argv0, StackTrace, <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>, <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>))</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Stack dump without symbol names (ensure you have llvm-symbolizer in &quot;</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="stringliteral">&quot;your PATH or set the environment var `LLVM_SYMBOLIZER_PATH` to point &quot;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="stringliteral">&quot;to it):\n&quot;</span>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="preprocessor">#if HAVE_DLFCN_H &amp;&amp; HAVE_DLADDR</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordtype">int</span> width = 0;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; depth; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    Dl_info dlinfo;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    dladdr(StackTrace[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;dlinfo);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = strrchr(dlinfo.dli_fname, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordtype">int</span> nwidth;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      nwidth = strlen(dlinfo.dli_fname);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      nwidth = strlen(<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) - 1;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (nwidth &gt; width)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      width = nwidth;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; depth; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    Dl_info dlinfo;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    dladdr(StackTrace[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;dlinfo);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">format</a>(<span class="stringliteral">&quot;%-2d&quot;</span>, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = strrchr(dlinfo.dli_fname, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">format</a>(<span class="stringliteral">&quot; %-*s&quot;</span>, width, dlinfo.dli_fname);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">format</a>(<span class="stringliteral">&quot; %-*s&quot;</span>, width, <a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> + 1);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">format</a>(<span class="stringliteral">&quot; %#0*lx&quot;</span>, (<span class="keywordtype">int</span>)(<span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *) * 2) + 2,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                 (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)StackTrace[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (dlinfo.dli_sname != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordtype">int</span> res;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a> = <a class="code" href="namespacellvm.html#a68b8c17a15ae0ca3652aa658aa78efe4">itaniumDemangle</a>(dlinfo.dli_sname, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;res);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; dlinfo.dli_sname;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      free(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">format</a>(<span class="stringliteral">&quot; + %tu&quot;</span>, (<span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(StackTrace[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]) -</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                              <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(dlinfo.dli_saddr)));</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#elif defined(HAVE_BACKTRACE)</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  backtrace_symbols_fd(StackTrace, <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>, STDERR_FILENO);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> PrintStackTraceSignalHandler(<span class="keywordtype">void</span> *) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#a3dd0c90b62e70756c75ae45c45ce5f8e">sys::PrintStackTrace</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a>());</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#a3dda14c3980f644b8796c1a51d7bf11b">llvm::sys::DisableSystemDialogsOnCrash</a>() {}</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/// When an error signal (such as SIGABRT or SIGSEGV) is delivered to the</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">/// process, print a stack trace and then exit.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sys.html#ab062fd190912d9ca714311df7cbe51d5">llvm::sys::PrintStackTraceOnErrorSignal</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Argv0,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                             <span class="keywordtype">bool</span> DisableCrashReporting) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  ::Argv0 = Argv0;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#a9b92e7ec359dded2b96fb6491fb99d8b">AddSignalHandler</a>(PrintStackTraceSignalHandler, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#if defined(__APPLE__) &amp;&amp; ENABLE_CRASH_OVERRIDES</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// Environment variable to disable any kind of crash dialog.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">if</span> (DisableCrashReporting || getenv(<span class="stringliteral">&quot;LLVM_DISABLE_CRASH_REPORT&quot;</span>)) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    mach_port_t <span class="keyword">self</span> = mach_task_self();</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    exception_mask_t <a class="code" href="namespaceshuffles.html#a6abf8a645bd24dfb42085db9672ac39a">mask</a> = EXC_MASK_CRASH;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    kern_return_t <a class="code" href="lib_2Target_2X86_2README_8txt.html#aaf6381f136d6cb9f13adbd90b1781923">ret</a> = task_set_exception_ports(</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keyword">self</span>, <a class="code" href="namespaceshuffles.html#a6abf8a645bd24dfb42085db9672ac39a">mask</a>, MACH_PORT_NULL,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        EXCEPTION_STATE_IDENTITY | MACH_EXCEPTION_CODES, THREAD_STATE_NONE);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    (void)<a class="code" href="lib_2Target_2X86_2README_8txt.html#aaf6381f136d6cb9f13adbd90b1781923">ret</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aMemoryBuffer_8h_html"><div class="ttname"><a href="MemoryBuffer_8h.html">MemoryBuffer.h</a></div></div>
<div class="ttc" id="aCompiler_8h_html_a6881c00738b22a600dfee25a1c32dab3"><div class="ttname"><a href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a></div><div class="ttdeci">#define LLVM_ATTRIBUTE_USED</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00139">Compiler.h:139</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a3dd0c90b62e70756c75ae45c45ce5f8e"><div class="ttname"><a href="namespacellvm_1_1sys.html#a3dd0c90b62e70756c75ae45c45ce5f8e">llvm::sys::PrintStackTrace</a></div><div class="ttdeci">void PrintStackTrace(raw_ostream &amp;OS, int Depth=0)</div><div class="ttdoc">Print the stack trace using the given raw_ostream object.</div></div>
<div class="ttc" id="aFileSystem_8h_html"><div class="ttname"><a href="FileSystem_8h.html">FileSystem.h</a></div></div>
<div class="ttc" id="aclassintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="aSMEABIPass_8cpp_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">static const char * name</div><div class="ttdef"><b>Definition:</b> <a href="SMEABIPass_8cpp_source.html#l00049">SMEABIPass.cpp:49</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eac5f4a93ee302ab324b2d6be4da7d1995">llvm::AMDGPUISD::IF</a></div><div class="ttdeci">@ IF</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00370">AMDGPUISelLowering.h:370</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa1351017ac6423911223bc19a8cb7c653">llvm::logicalview::LVAttributeKind::Filename</a></div><div class="ttdeci">@ Filename</div></div>
<div class="ttc" id="anamespacellvm_html_a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639"><div class="ttname"><a href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">llvm::Depth</a></div><div class="ttdeci">@ Depth</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00036">SIMachineScheduler.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_aa9516bcffe612375e99ac8c722b82847"><div class="ttname"><a href="namespacellvm_1_1sys.html#aa9516bcffe612375e99ac8c722b82847">llvm::sys::RunSignalHandlers</a></div><div class="ttdeci">void RunSignalHandlers()</div><div class="ttdef"><b>Definition:</b> <a href="Signals_8cpp_source.html#l00097">Signals.cpp:97</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_aaf6381f136d6cb9f13adbd90b1781923"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#aaf6381f136d6cb9f13adbd90b1781923">ret</a></div><div class="ttdeci">to esp esp setne al movzbw ax esp setg cl movzbw cx cmove cx cl jne LBB1_2 esp ret(also really horrible code on ppc). This is due to the expand code for 64-bit compares. GCC produces multiple branches</div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00899">raw_ostream.cpp:899</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_ab0938d8ccb6550ddc3865f45b48acb6e"><div class="ttname"><a href="namespacellvm_1_1sys.html#ab0938d8ccb6550ddc3865f45b48acb6e">llvm::sys::RunInterruptHandlers</a></div><div class="ttdeci">void RunInterruptHandlers()</div><div class="ttdoc">This function runs all the registered interrupt handlers, including the removal of files registered b...</div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a03a7c4c80c31a619c5e452314166401a"><div class="ttname"><a href="namespacellvm_1_1sys.html#a03a7c4c80c31a619c5e452314166401a">llvm::sys::SetInterruptFunction</a></div><div class="ttdeci">void SetInterruptFunction(void(*IF)())</div><div class="ttdoc">This function registers a function to be called when the user &quot;interrupts&quot; the program (typically by ...</div></div>
<div class="ttc" id="aUnix_8h_html"><div class="ttname"><a href="Unix_8h.html">Unix.h</a></div></div>
<div class="ttc" id="aFormat_8h_html"><div class="ttname"><a href="Format_8h.html">Format.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a9a44fbaf9bab34a91d1b6713adcc6603"><div class="ttname"><a href="namespacellvm_1_1sys.html#a9a44fbaf9bab34a91d1b6713adcc6603">llvm::sys::SignalHandlerCallback</a></div><div class="ttdeci">void(*)(void *) SignalHandlerCallback</div><div class="ttdef"><b>Definition:</b> <a href="Signals_8h_source.html#l00061">Signals.h:61</a></div></div>
<div class="ttc" id="aExitCodes_8h_html"><div class="ttname"><a href="ExitCodes_8h.html">ExitCodes.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_aae32f3b9e37b0c3f107abb91220894d4"><div class="ttname"><a href="namespacellvm_1_1sys.html#aae32f3b9e37b0c3f107abb91220894d4">llvm::sys::SetInfoSignalFunction</a></div><div class="ttdeci">void SetInfoSignalFunction(void(*Handler)())</div><div class="ttdoc">Registers a function to be called when an &quot;info&quot; signal is delivered to the process.</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00536">README.txt:536</a></div></div>
<div class="ttc" id="aclassllvm_1_1ManagedStatic_html"><div class="ttname"><a href="classllvm_1_1ManagedStatic.html">llvm::ManagedStatic</a></div><div class="ttdoc">ManagedStatic - This transparently changes the behavior of global statics to be lazily constructed on...</div><div class="ttdef"><b>Definition:</b> <a href="ManagedStatic_8h_source.html#l00083">ManagedStatic.h:83</a></div></div>
<div class="ttc" id="aSignals_8cpp_html_af66fd5871ea182311d860975bd5de5e9"><div class="ttname"><a href="Signals_8cpp.html#af66fd5871ea182311d860975bd5de5e9">insertSignalHandler</a></div><div class="ttdeci">static void insertSignalHandler(sys::SignalHandlerCallback FnPtr, void *Cookie)</div><div class="ttdef"><b>Definition:</b> <a href="Signals_8cpp_source.html#l00111">Signals.cpp:111</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a916621b9926263f33c49d2dff9883db5"><div class="ttname"><a href="namespacellvm_1_1sys.html#a916621b9926263f33c49d2dff9883db5">llvm::sys::DefaultOneShotPipeSignalHandler</a></div><div class="ttdeci">void DefaultOneShotPipeSignalHandler()</div><div class="ttdoc">On Unix systems and Windows, this function exits with an &quot;IO error&quot; exit code.</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a3dda14c3980f644b8796c1a51d7bf11b"><div class="ttname"><a href="namespacellvm_1_1sys.html#a3dda14c3980f644b8796c1a51d7bf11b">llvm::sys::DisableSystemDialogsOnCrash</a></div><div class="ttdeci">void DisableSystemDialogsOnCrash()</div><div class="ttdoc">Disable all system dialog boxes that appear when the process crashes.</div></div>
<div class="ttc" id="aSignals_8cpp_html_a1c25905ebd1d19c4d5c4e2ca86cdb1f2"><div class="ttname"><a href="Signals_8cpp.html#a1c25905ebd1d19c4d5c4e2ca86cdb1f2">printSymbolizedStackTrace</a></div><div class="ttdeci">static LLVM_ATTRIBUTE_USED bool printSymbolizedStackTrace(StringRef Argv0, void **StackTrace, int Depth, llvm::raw_ostream &amp;OS)</div><div class="ttdoc">Helper that launches llvm-symbolizer and symbolizes a backtrace.</div><div class="ttdef"><b>Definition:</b> <a href="Signals_8cpp_source.html#l00141">Signals.cpp:141</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aSaveAndRestore_8h_html"><div class="ttname"><a href="SaveAndRestore_8h.html">SaveAndRestore.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a918f6c7d4cd2eeaf39efa697c0370296"><div class="ttname"><a href="namespacellvm_1_1sys.html#a918f6c7d4cd2eeaf39efa697c0370296">llvm::sys::SmartScopedLock</a></div><div class="ttdeci">std::lock_guard&lt; SmartMutex&lt; mt_only &gt; &gt; SmartScopedLock</div><div class="ttdef"><b>Definition:</b> <a href="Mutex_8h_source.html#l00069">Mutex.h:69</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00166">README.txt:166</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a9b92e7ec359dded2b96fb6491fb99d8b"><div class="ttname"><a href="namespacellvm_1_1sys.html#a9b92e7ec359dded2b96fb6491fb99d8b">llvm::sys::AddSignalHandler</a></div><div class="ttdeci">void AddSignalHandler(SignalHandlerCallback FnPtr, void *Cookie)</div><div class="ttdoc">Add a function to be called when an abort/kill signal is delivered to the process.</div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a667819e7b48d7d4f3cf99c2709aac92e"><div class="ttname"><a href="namespacellvm_1_1sys.html#a667819e7b48d7d4f3cf99c2709aac92e">llvm::sys::SetOneShotPipeSignalFunction</a></div><div class="ttdeci">void SetOneShotPipeSignalFunction(void(*Handler)())</div><div class="ttdoc">Registers a function to be called in a &quot;one-shot&quot; manner when a pipe signal is delivered to the proce...</div></div>
<div class="ttc" id="aLazyValueInfo_8cpp_html_add11cb1bc38847ce70e526af765dcce7"><div class="ttname"><a href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a></div><div class="ttdeci">lazy value info</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l00058">LazyValueInfo.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringSaver_html"><div class="ttname"><a href="classllvm_1_1StringSaver.html">llvm::StringSaver</a></div><div class="ttdoc">Saves strings in the provided stable storage and returns a StringRef with a stable character pointer.</div><div class="ttdef"><b>Definition:</b> <a href="StringSaver_8h_source.html#l00021">StringSaver.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aFileUtilities_8h_html"><div class="ttname"><a href="FileUtilities_8h.html">FileUtilities.h</a></div></div>
<div class="ttc" id="aDemangle_8h_html"><div class="ttname"><a href="Demangle_8h.html">Demangle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="astructllvm_1_1SaveAndRestore_html"><div class="ttname"><a href="structllvm_1_1SaveAndRestore.html">llvm::SaveAndRestore</a></div><div class="ttdoc">A utility class that uses RAII to save and restore the value of a variable.</div><div class="ttdef"><b>Definition:</b> <a href="SaveAndRestore_8h_source.html#l00023">SaveAndRestore.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66f0c57e04037076030c6a6e48f44f2d"><div class="ttname"><a href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">llvm::format</a></div><div class="ttdeci">format_object&lt; Ts... &gt; format(const char *Fmt, const Ts &amp;... Vals)</div><div class="ttdoc">These are helper functions used to produce formatted output.</div><div class="ttdef"><b>Definition:</b> <a href="Format_8h_source.html#l00124">Format.h:124</a></div></div>
<div class="ttc" id="aMutex_8h_html"><div class="ttname"><a href="Mutex_8h.html">Mutex.h</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ELF_html_adf995e156306da95e0b337c16f5f2b02a15ee14963e8cb0e95f10994bbd35a050"><div class="ttname"><a href="namespacellvm_1_1ELF.html#adf995e156306da95e0b337c16f5f2b02a15ee14963e8cb0e95f10994bbd35a050">llvm::ELF::PT_LOAD</a></div><div class="ttdeci">@ PT_LOAD</div><div class="ttdef"><b>Definition:</b> <a href="BinaryFormat_2ELF_8h_source.html#l01382">ELF.h:1382</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a80109dae9b24e661ea7fbff184ced3da"><div class="ttname"><a href="namespacellvm_1_1sys.html#a80109dae9b24e661ea7fbff184ced3da">llvm::sys::unregisterHandlers</a></div><div class="ttdeci">void unregisterHandlers()</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="anamespacellvm_html_af11d71816b6dc7c266e71fcff02be291"><div class="ttname"><a href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">llvm::c_str</a></div><div class="ttdeci">SmallVectorImpl&lt; T &gt;::const_pointer c_str(SmallVectorImpl&lt; T &gt; &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="WindowsSupport_8h_source.html#l00196">WindowsSupport.h:196</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_ad01be72a9c0cb2dc4c676aa0057a9b31"><div class="ttname"><a href="namespacellvm_1_1sys.html#ad01be72a9c0cb2dc4c676aa0057a9b31">llvm::sys::CleanupOnSignal</a></div><div class="ttdeci">void CleanupOnSignal(uintptr_t Context)</div><div class="ttdoc">This function does the following:</div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a7936dae925973eb8b0921c01b70b16d8"><div class="ttname"><a href="namespacellvm_1_1sys.html#a7936dae925973eb8b0921c01b70b16d8">llvm::sys::DontRemoveFileOnSignal</a></div><div class="ttdeci">void DontRemoveFileOnSignal(StringRef Filename)</div><div class="ttdoc">This function removes a file from the list of files to be removed on signal delivery.</div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_a809aa08f1d799a5ed298e68bd3fac0c7"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#a809aa08f1d799a5ed298e68bd3fac0c7">exit</a></div><div class="ttdeci">declare void exit(i32) noreturn nounwind This compiles into</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01072">README.txt:1072</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aProgram_8h_html"><div class="ttname"><a href="Program_8h.html">Program.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a68b8c17a15ae0ca3652aa658aa78efe4"><div class="ttname"><a href="namespacellvm.html#a68b8c17a15ae0ca3652aa658aa78efe4">llvm::itaniumDemangle</a></div><div class="ttdeci">char * itaniumDemangle(const char *mangled_name, char *buf, size_t *n, int *status)</div><div class="ttdef"><b>Definition:</b> <a href="ItaniumDemangle_8cpp_source.html#l00368">ItaniumDemangle.cpp:368</a></div></div>
<div class="ttc" id="aSignals_8cpp_html_a2a8bcb543c331c2d59d4005a62023344"><div class="ttname"><a href="Signals_8cpp.html#a2a8bcb543c331c2d59d4005a62023344">findModulesAndOffsets</a></div><div class="ttdeci">static bool findModulesAndOffsets(void **StackTrace, int Depth, const char **Modules, intptr_t *Offsets, const char *MainExecutableName, StringSaver &amp;StrPool)</div></div>
<div class="ttc" id="anamespaceshuffles_html_a6abf8a645bd24dfb42085db9672ac39a"><div class="ttname"><a href="namespaceshuffles.html#a6abf8a645bd24dfb42085db9672ac39a">shuffles::mask</a></div><div class="ttdeci">auto mask(ShuffFunc S, unsigned Length, OptArgs... args) -&gt; MaskT</div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelDAGToDAGHVX_8cpp_source.html#l00903">HexagonISelDAGToDAGHVX.cpp:903</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a901ce7389ca67dd79b8ab5b53c4a7da8"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int int int d</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00418">README.txt:418</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612">llvm::SI::KernelInputOffsets::Offsets</a></div><div class="ttdeci">Offsets</div><div class="ttdoc">Offsets in bytes from the start of the input buffer.</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01335">SIInstrInfo.h:1335</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_aee27cc5336ecd3f21eeda4ad2826b915"><div class="ttname"><a href="namespacellvm_1_1sys.html#aee27cc5336ecd3f21eeda4ad2826b915">llvm::sys::RemoveFileOnSignal</a></div><div class="ttdeci">bool RemoveFileOnSignal(StringRef Filename, std::string *ErrMsg=nullptr)</div><div class="ttdoc">This function registers signal handlers to ensure that if a signal gets delivered that the named file...</div></div>
<div class="ttc" id="anamespacellvm_html_af46e6cffaf04efa64b9d4a6f8e0610a2"><div class="ttname"><a href="namespacellvm.html#af46e6cffaf04efa64b9d4a6f8e0610a2">llvm::safe_malloc</a></div><div class="ttdeci">LLVM_ATTRIBUTE_RETURNS_NONNULL void * safe_malloc(size_t Sz)</div><div class="ttdef"><b>Definition:</b> <a href="MemAlloc_8h_source.html#l00025">MemAlloc.h:25</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_ab062fd190912d9ca714311df7cbe51d5"><div class="ttname"><a href="namespacellvm_1_1sys.html#ab062fd190912d9ca714311df7cbe51d5">llvm::sys::PrintStackTraceOnErrorSignal</a></div><div class="ttdeci">void PrintStackTraceOnErrorSignal(StringRef Argv0, bool DisableCrashReporting=false)</div><div class="ttdoc">When an error signal (such as SIGABRT or SIGSEGV) is delivered to the process, print a stack trace an...</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:07:46 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
